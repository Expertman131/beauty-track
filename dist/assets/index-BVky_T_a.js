var lse=Object.defineProperty;var RI=e=>{throw TypeError(e)};var cse=(e,t,r)=>t in e?lse(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Yy=(e,t,r)=>cse(e,typeof t!="symbol"?t+"":t,r),lE=(e,t,r)=>t.has(e)||RI("Cannot "+r);var He=(e,t,r)=>(lE(e,t,"read from private field"),r?r.call(e):t.get(e)),Vr=(e,t,r)=>t.has(e)?RI("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),sr=(e,t,r,n)=>(lE(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Wa=(e,t,r)=>(lE(e,t,"access private method"),r);var Zy=(e,t,r,n)=>({set _(a){sr(e,t,a,r)},get _(){return He(e,t,n)}});function use(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var wa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function mU(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var pU={exports:{}},kS={},gU={exports:{}},jr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx=Symbol.for("react.element"),dse=Symbol.for("react.portal"),fse=Symbol.for("react.fragment"),hse=Symbol.for("react.strict_mode"),mse=Symbol.for("react.profiler"),pse=Symbol.for("react.provider"),gse=Symbol.for("react.context"),vse=Symbol.for("react.forward_ref"),xse=Symbol.for("react.suspense"),yse=Symbol.for("react.memo"),bse=Symbol.for("react.lazy"),DI=Symbol.iterator;function wse(e){return e===null||typeof e!="object"?null:(e=DI&&e[DI]||e["@@iterator"],typeof e=="function"?e:null)}var vU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xU=Object.assign,yU={};function Ip(e,t,r){this.props=e,this.context=t,this.refs=yU,this.updater=r||vU}Ip.prototype.isReactComponent={};Ip.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ip.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bU(){}bU.prototype=Ip.prototype;function XO(e,t,r){this.props=e,this.context=t,this.refs=yU,this.updater=r||vU}var YO=XO.prototype=new bU;YO.constructor=XO;xU(YO,Ip.prototype);YO.isPureReactComponent=!0;var MI=Array.isArray,wU=Object.prototype.hasOwnProperty,ZO={current:null},_U={key:!0,ref:!0,__self:!0,__source:!0};function SU(e,t,r){var n,a={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)wU.call(t,n)&&!_U.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Wx,type:e,key:s,ref:o,props:a,_owner:ZO.current}}function _se(e,t){return{$$typeof:Wx,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function JO(e){return typeof e=="object"&&e!==null&&e.$$typeof===Wx}function Sse(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var II=/\/+/g;function cE(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sse(""+e.key):t.toString(36)}function k1(e,t,r,n,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Wx:case dse:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+cE(o,0):n,MI(a)?(r="",e!=null&&(r=e.replace(II,"$&/")+"/"),k1(a,t,r,"",function(u){return u})):a!=null&&(JO(a)&&(a=_se(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(II,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",MI(e))for(var l=0;l<e.length;l++){s=e[l];var c=n+cE(s,l);o+=k1(s,t,r,c,a)}else if(c=wse(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=n+cE(s,l++),o+=k1(s,t,r,c,a);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Jy(e,t,r){if(e==null)return e;var n=[],a=0;return k1(e,n,"","",function(s){return t.call(r,s,a++)}),n}function jse(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ms={current:null},T1={transition:null},Ese={ReactCurrentDispatcher:Ms,ReactCurrentBatchConfig:T1,ReactCurrentOwner:ZO};function jU(){throw Error("act(...) is not supported in production builds of React.")}jr.Children={map:Jy,forEach:function(e,t,r){Jy(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Jy(e,function(){t++}),t},toArray:function(e){return Jy(e,function(t){return t})||[]},only:function(e){if(!JO(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};jr.Component=Ip;jr.Fragment=fse;jr.Profiler=mse;jr.PureComponent=XO;jr.StrictMode=hse;jr.Suspense=xse;jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ese;jr.act=jU;jr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=xU({},e.props),a=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=ZO.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)wU.call(t,c)&&!_U.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Wx,type:e.type,key:a,ref:s,props:n,_owner:o}};jr.createContext=function(e){return e={$$typeof:gse,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pse,_context:e},e.Consumer=e};jr.createElement=SU;jr.createFactory=function(e){var t=SU.bind(null,e);return t.type=e,t};jr.createRef=function(){return{current:null}};jr.forwardRef=function(e){return{$$typeof:vse,render:e}};jr.isValidElement=JO;jr.lazy=function(e){return{$$typeof:bse,_payload:{_status:-1,_result:e},_init:jse}};jr.memo=function(e,t){return{$$typeof:yse,type:e,compare:t===void 0?null:t}};jr.startTransition=function(e){var t=T1.transition;T1.transition={};try{e()}finally{T1.transition=t}};jr.unstable_act=jU;jr.useCallback=function(e,t){return Ms.current.useCallback(e,t)};jr.useContext=function(e){return Ms.current.useContext(e)};jr.useDebugValue=function(){};jr.useDeferredValue=function(e){return Ms.current.useDeferredValue(e)};jr.useEffect=function(e,t){return Ms.current.useEffect(e,t)};jr.useId=function(){return Ms.current.useId()};jr.useImperativeHandle=function(e,t,r){return Ms.current.useImperativeHandle(e,t,r)};jr.useInsertionEffect=function(e,t){return Ms.current.useInsertionEffect(e,t)};jr.useLayoutEffect=function(e,t){return Ms.current.useLayoutEffect(e,t)};jr.useMemo=function(e,t){return Ms.current.useMemo(e,t)};jr.useReducer=function(e,t,r){return Ms.current.useReducer(e,t,r)};jr.useRef=function(e){return Ms.current.useRef(e)};jr.useState=function(e){return Ms.current.useState(e)};jr.useSyncExternalStore=function(e,t,r){return Ms.current.useSyncExternalStore(e,t,r)};jr.useTransition=function(){return Ms.current.useTransition()};jr.version="18.3.1";gU.exports=jr;var x=gU.exports;const G=zr(x),Vf=use({__proto__:null,default:G},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nse=x,Cse=Symbol.for("react.element"),kse=Symbol.for("react.fragment"),Tse=Object.prototype.hasOwnProperty,Ase=Nse.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Pse={key:!0,ref:!0,__self:!0,__source:!0};function EU(e,t,r){var n,a={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Tse.call(t,n)&&!Pse.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Cse,type:e,key:s,ref:o,props:a,_owner:Ase.current}}kS.Fragment=kse;kS.jsx=EU;kS.jsxs=EU;pU.exports=kS;var i=pU.exports,NU={exports:{}},Mi={},CU={exports:{}},kU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,F){var K=M.length;M.push(F);e:for(;0<K;){var X=K-1>>>1,O=M[X];if(0<a(O,F))M[X]=F,M[K]=O,K=X;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var F=M[0],K=M.pop();if(K!==F){M[0]=K;e:for(var X=0,O=M.length,W=O>>>1;X<W;){var L=2*(X+1)-1,H=M[L],ee=L+1,q=M[ee];if(0>a(H,K))ee<O&&0>a(q,H)?(M[X]=q,M[ee]=K,X=ee):(M[X]=H,M[L]=K,X=L);else if(ee<O&&0>a(q,K))M[X]=q,M[ee]=K,X=ee;else break e}}return F}function a(M,F){var K=M.sortIndex-F.sortIndex;return K!==0?K:M.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,v=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(M){for(var F=r(u);F!==null;){if(F.callback===null)n(u);else if(F.startTime<=M)n(u),F.sortIndex=F.expirationTime,t(c,F);else break;F=r(u)}}function _(M){if(m=!1,w(M),!v)if(r(c)!==null)v=!0,D(S);else{var F=r(u);F!==null&&U(_,F.startTime-M)}}function S(M,F){v=!1,m&&(m=!1,b(N),N=-1),p=!0;var K=h;try{for(w(F),f=r(c);f!==null&&(!(f.expirationTime>F)||M&&!T());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var O=X(f.expirationTime<=F);F=e.unstable_now(),typeof O=="function"?f.callback=O:f===r(c)&&n(c),w(F)}else n(c);f=r(c)}if(f!==null)var W=!0;else{var L=r(u);L!==null&&U(_,L.startTime-F),W=!1}return W}finally{f=null,h=K,p=!1}}var E=!1,j=null,N=-1,k=5,C=-1;function T(){return!(e.unstable_now()-C<k)}function A(){if(j!==null){var M=e.unstable_now();C=M;var F=!0;try{F=j(!0,M)}finally{F?B():(E=!1,j=null)}}else E=!1}var B;if(typeof y=="function")B=function(){y(A)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,B=function(){P.postMessage(null)}}else B=function(){g(A,0)};function D(M){j=M,E||(E=!0,B())}function U(M,F){N=g(function(){M(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,D(S))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(M){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var K=h;h=F;try{return M()}finally{h=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,F){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var K=h;h=M;try{return F()}finally{h=K}},e.unstable_scheduleCallback=function(M,F,K){var X=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?X+K:X):K=X,M){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=K+O,M={id:d++,callback:F,priorityLevel:M,startTime:K,expirationTime:O,sortIndex:-1},K>X?(M.sortIndex=K,t(u,M),r(c)===null&&M===r(u)&&(m?(b(N),N=-1):m=!0,U(_,K-X))):(M.sortIndex=O,t(c,M),v||p||(v=!0,D(S))),M},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(M){var F=h;return function(){var K=h;h=F;try{return M.apply(this,arguments)}finally{h=K}}}})(kU);CU.exports=kU;var Ose=CU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rse=x,Ni=Ose;function ot(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TU=new Set,Qg={};function Hf(e,t){Vm(e,t),Vm(e+"Capture",t)}function Vm(e,t){for(Qg[e]=t,e=0;e<t.length;e++)TU.add(t[e])}var vc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ak=Object.prototype.hasOwnProperty,Dse=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$I={},FI={};function Mse(e){return Ak.call(FI,e)?!0:Ak.call($I,e)?!1:Dse.test(e)?FI[e]=!0:($I[e]=!0,!1)}function Ise(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $se(e,t,r,n){if(t===null||typeof t>"u"||Ise(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Is(e,t,r,n,a,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Fa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fa[e]=new Is(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fa[t]=new Is(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fa[e]=new Is(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fa[e]=new Is(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fa[e]=new Is(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fa[e]=new Is(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fa[e]=new Is(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fa[e]=new Is(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fa[e]=new Is(e,5,!1,e.toLowerCase(),null,!1,!1)});var QO=/[\-:]([a-z])/g;function eR(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(QO,eR);Fa[t]=new Is(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(QO,eR);Fa[t]=new Is(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(QO,eR);Fa[t]=new Is(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fa[e]=new Is(e,1,!1,e.toLowerCase(),null,!1,!1)});Fa.xlinkHref=new Is("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fa[e]=new Is(e,1,!1,e.toLowerCase(),null,!0,!0)});function tR(e,t,r,n){var a=Fa.hasOwnProperty(t)?Fa[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($se(t,r,a,n)&&(r=null),n||a===null?Mse(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ac=Rse.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qy=Symbol.for("react.element"),Fh=Symbol.for("react.portal"),Lh=Symbol.for("react.fragment"),rR=Symbol.for("react.strict_mode"),Pk=Symbol.for("react.profiler"),AU=Symbol.for("react.provider"),PU=Symbol.for("react.context"),nR=Symbol.for("react.forward_ref"),Ok=Symbol.for("react.suspense"),Rk=Symbol.for("react.suspense_list"),aR=Symbol.for("react.memo"),eu=Symbol.for("react.lazy"),OU=Symbol.for("react.offscreen"),LI=Symbol.iterator;function w0(e){return e===null||typeof e!="object"?null:(e=LI&&e[LI]||e["@@iterator"],typeof e=="function"?e:null)}var An=Object.assign,uE;function Z0(e){if(uE===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);uE=t&&t[1]||""}return`
`+uE+e}var dE=!1;function fE(e,t){if(!e||dE)return"";dE=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=n.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{dE=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Z0(e):""}function Fse(e){switch(e.tag){case 5:return Z0(e.type);case 16:return Z0("Lazy");case 13:return Z0("Suspense");case 19:return Z0("SuspenseList");case 0:case 2:case 15:return e=fE(e.type,!1),e;case 11:return e=fE(e.type.render,!1),e;case 1:return e=fE(e.type,!0),e;default:return""}}function Dk(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Lh:return"Fragment";case Fh:return"Portal";case Pk:return"Profiler";case rR:return"StrictMode";case Ok:return"Suspense";case Rk:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case PU:return(e.displayName||"Context")+".Consumer";case AU:return(e._context.displayName||"Context")+".Provider";case nR:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case aR:return t=e.displayName||null,t!==null?t:Dk(e.type)||"Memo";case eu:t=e._payload,e=e._init;try{return Dk(e(t))}catch{}}return null}function Lse(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dk(t);case 8:return t===rR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function RU(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Bse(e){var t=RU(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function eb(e){e._valueTracker||(e._valueTracker=Bse(e))}function DU(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=RU(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Q1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Mk(e,t){var r=t.checked;return An({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function BI(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Fu(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function MU(e,t){t=t.checked,t!=null&&tR(e,"checked",t,!1)}function Ik(e,t){MU(e,t);var r=Fu(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$k(e,t.type,r):t.hasOwnProperty("defaultValue")&&$k(e,t.type,Fu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function UI(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function $k(e,t,r){(t!=="number"||Q1(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var J0=Array.isArray;function am(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Fu(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Fk(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ot(91));return An({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zI(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ot(92));if(J0(r)){if(1<r.length)throw Error(ot(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Fu(r)}}function IU(e,t){var r=Fu(t.value),n=Fu(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function WI(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function $U(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lk(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?$U(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var tb,FU=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(tb=tb||document.createElement("div"),tb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=tb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ev(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var pg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Use=["Webkit","ms","Moz","O"];Object.keys(pg).forEach(function(e){Use.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pg[t]=pg[e]})});function LU(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||pg.hasOwnProperty(e)&&pg[e]?(""+t).trim():t+"px"}function BU(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=LU(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var zse=An({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bk(e,t){if(t){if(zse[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ot(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ot(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ot(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ot(62))}}function Uk(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zk=null;function sR(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wk=null,sm=null,im=null;function VI(e){if(e=qx(e)){if(typeof Wk!="function")throw Error(ot(280));var t=e.stateNode;t&&(t=RS(t),Wk(e.stateNode,e.type,t))}}function UU(e){sm?im?im.push(e):im=[e]:sm=e}function zU(){if(sm){var e=sm,t=im;if(im=sm=null,VI(e),t)for(e=0;e<t.length;e++)VI(t[e])}}function WU(e,t){return e(t)}function VU(){}var hE=!1;function HU(e,t,r){if(hE)return e(t,r);hE=!0;try{return WU(e,t,r)}finally{hE=!1,(sm!==null||im!==null)&&(VU(),zU())}}function tv(e,t){var r=e.stateNode;if(r===null)return null;var n=RS(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ot(231,t,typeof r));return r}var Vk=!1;if(vc)try{var _0={};Object.defineProperty(_0,"passive",{get:function(){Vk=!0}}),window.addEventListener("test",_0,_0),window.removeEventListener("test",_0,_0)}catch{Vk=!1}function Wse(e,t,r,n,a,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var gg=!1,ew=null,tw=!1,Hk=null,Vse={onError:function(e){gg=!0,ew=e}};function Hse(e,t,r,n,a,s,o,l,c){gg=!1,ew=null,Wse.apply(Vse,arguments)}function qse(e,t,r,n,a,s,o,l,c){if(Hse.apply(this,arguments),gg){if(gg){var u=ew;gg=!1,ew=null}else throw Error(ot(198));tw||(tw=!0,Hk=u)}}function qf(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function qU(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function HI(e){if(qf(e)!==e)throw Error(ot(188))}function Gse(e){var t=e.alternate;if(!t){if(t=qf(e),t===null)throw Error(ot(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return HI(a),e;if(s===n)return HI(a),t;s=s.sibling}throw Error(ot(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o)throw Error(ot(189))}}if(r.alternate!==n)throw Error(ot(190))}if(r.tag!==3)throw Error(ot(188));return r.stateNode.current===r?e:t}function GU(e){return e=Gse(e),e!==null?KU(e):null}function KU(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=KU(e);if(t!==null)return t;e=e.sibling}return null}var XU=Ni.unstable_scheduleCallback,qI=Ni.unstable_cancelCallback,Kse=Ni.unstable_shouldYield,Xse=Ni.unstable_requestPaint,Wn=Ni.unstable_now,Yse=Ni.unstable_getCurrentPriorityLevel,iR=Ni.unstable_ImmediatePriority,YU=Ni.unstable_UserBlockingPriority,rw=Ni.unstable_NormalPriority,Zse=Ni.unstable_LowPriority,ZU=Ni.unstable_IdlePriority,TS=null,_l=null;function Jse(e){if(_l&&typeof _l.onCommitFiberRoot=="function")try{_l.onCommitFiberRoot(TS,e,void 0,(e.current.flags&128)===128)}catch{}}var Wo=Math.clz32?Math.clz32:tie,Qse=Math.log,eie=Math.LN2;function tie(e){return e>>>=0,e===0?32:31-(Qse(e)/eie|0)|0}var rb=64,nb=4194304;function Q0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function nw(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Q0(l):(s&=o,s!==0&&(n=Q0(s)))}else o=r&~a,o!==0?n=Q0(o):s!==0&&(n=Q0(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,s=t&-t,a>=s||a===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Wo(t),a=1<<r,n|=e[r],t&=~a;return n}function rie(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nie(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Wo(s),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=rie(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function qk(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function JU(){var e=rb;return rb<<=1,!(rb&4194240)&&(rb=64),e}function mE(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Vx(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wo(t),e[t]=r}function aie(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Wo(r),s=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~s}}function oR(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Wo(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Jr=0;function QU(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ez,lR,tz,rz,nz,Gk=!1,ab=[],Su=null,ju=null,Eu=null,rv=new Map,nv=new Map,su=[],sie="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function GI(e,t){switch(e){case"focusin":case"focusout":Su=null;break;case"dragenter":case"dragleave":ju=null;break;case"mouseover":case"mouseout":Eu=null;break;case"pointerover":case"pointerout":rv.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nv.delete(t.pointerId)}}function S0(e,t,r,n,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},t!==null&&(t=qx(t),t!==null&&lR(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function iie(e,t,r,n,a){switch(t){case"focusin":return Su=S0(Su,e,t,r,n,a),!0;case"dragenter":return ju=S0(ju,e,t,r,n,a),!0;case"mouseover":return Eu=S0(Eu,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return rv.set(s,S0(rv.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,nv.set(s,S0(nv.get(s)||null,e,t,r,n,a)),!0}return!1}function az(e){var t=$d(e.target);if(t!==null){var r=qf(t);if(r!==null){if(t=r.tag,t===13){if(t=qU(r),t!==null){e.blockedOn=t,nz(e.priority,function(){tz(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function A1(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kk(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);zk=n,r.target.dispatchEvent(n),zk=null}else return t=qx(r),t!==null&&lR(t),e.blockedOn=r,!1;t.shift()}return!0}function KI(e,t,r){A1(e)&&r.delete(t)}function oie(){Gk=!1,Su!==null&&A1(Su)&&(Su=null),ju!==null&&A1(ju)&&(ju=null),Eu!==null&&A1(Eu)&&(Eu=null),rv.forEach(KI),nv.forEach(KI)}function j0(e,t){e.blockedOn===t&&(e.blockedOn=null,Gk||(Gk=!0,Ni.unstable_scheduleCallback(Ni.unstable_NormalPriority,oie)))}function av(e){function t(a){return j0(a,e)}if(0<ab.length){j0(ab[0],e);for(var r=1;r<ab.length;r++){var n=ab[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Su!==null&&j0(Su,e),ju!==null&&j0(ju,e),Eu!==null&&j0(Eu,e),rv.forEach(t),nv.forEach(t),r=0;r<su.length;r++)n=su[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<su.length&&(r=su[0],r.blockedOn===null);)az(r),r.blockedOn===null&&su.shift()}var om=Ac.ReactCurrentBatchConfig,aw=!0;function lie(e,t,r,n){var a=Jr,s=om.transition;om.transition=null;try{Jr=1,cR(e,t,r,n)}finally{Jr=a,om.transition=s}}function cie(e,t,r,n){var a=Jr,s=om.transition;om.transition=null;try{Jr=4,cR(e,t,r,n)}finally{Jr=a,om.transition=s}}function cR(e,t,r,n){if(aw){var a=Kk(e,t,r,n);if(a===null)jE(e,t,n,sw,r),GI(e,n);else if(iie(a,e,t,r,n))n.stopPropagation();else if(GI(e,n),t&4&&-1<sie.indexOf(e)){for(;a!==null;){var s=qx(a);if(s!==null&&ez(s),s=Kk(e,t,r,n),s===null&&jE(e,t,n,sw,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else jE(e,t,n,null,r)}}var sw=null;function Kk(e,t,r,n){if(sw=null,e=sR(n),e=$d(e),e!==null)if(t=qf(e),t===null)e=null;else if(r=t.tag,r===13){if(e=qU(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sw=e,null}function sz(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yse()){case iR:return 1;case YU:return 4;case rw:case Zse:return 16;case ZU:return 536870912;default:return 16}default:return 16}}var vu=null,uR=null,P1=null;function iz(){if(P1)return P1;var e,t=uR,r=t.length,n,a="value"in vu?vu.value:vu.textContent,s=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[s-n];n++);return P1=a.slice(e,1<n?1-n:void 0)}function O1(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sb(){return!0}function XI(){return!1}function Ii(e){function t(r,n,a,s,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sb:XI,this.isPropagationStopped=XI,this}return An(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=sb)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=sb)},persist:function(){},isPersistent:sb}),t}var $p={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dR=Ii($p),Hx=An({},$p,{view:0,detail:0}),uie=Ii(Hx),pE,gE,E0,AS=An({},Hx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fR,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==E0&&(E0&&e.type==="mousemove"?(pE=e.screenX-E0.screenX,gE=e.screenY-E0.screenY):gE=pE=0,E0=e),pE)},movementY:function(e){return"movementY"in e?e.movementY:gE}}),YI=Ii(AS),die=An({},AS,{dataTransfer:0}),fie=Ii(die),hie=An({},Hx,{relatedTarget:0}),vE=Ii(hie),mie=An({},$p,{animationName:0,elapsedTime:0,pseudoElement:0}),pie=Ii(mie),gie=An({},$p,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vie=Ii(gie),xie=An({},$p,{data:0}),ZI=Ii(xie),yie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wie={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _ie(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wie[e])?!!t[e]:!1}function fR(){return _ie}var Sie=An({},Hx,{key:function(e){if(e.key){var t=yie[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=O1(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bie[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fR,charCode:function(e){return e.type==="keypress"?O1(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?O1(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jie=Ii(Sie),Eie=An({},AS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JI=Ii(Eie),Nie=An({},Hx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fR}),Cie=Ii(Nie),kie=An({},$p,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tie=Ii(kie),Aie=An({},AS,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pie=Ii(Aie),Oie=[9,13,27,32],hR=vc&&"CompositionEvent"in window,vg=null;vc&&"documentMode"in document&&(vg=document.documentMode);var Rie=vc&&"TextEvent"in window&&!vg,oz=vc&&(!hR||vg&&8<vg&&11>=vg),QI=" ",e$=!1;function lz(e,t){switch(e){case"keyup":return Oie.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cz(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bh=!1;function Die(e,t){switch(e){case"compositionend":return cz(t);case"keypress":return t.which!==32?null:(e$=!0,QI);case"textInput":return e=t.data,e===QI&&e$?null:e;default:return null}}function Mie(e,t){if(Bh)return e==="compositionend"||!hR&&lz(e,t)?(e=iz(),P1=uR=vu=null,Bh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oz&&t.locale!=="ko"?null:t.data;default:return null}}var Iie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t$(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Iie[e.type]:t==="textarea"}function uz(e,t,r,n){UU(n),t=iw(t,"onChange"),0<t.length&&(r=new dR("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var xg=null,sv=null;function $ie(e){wz(e,0)}function PS(e){var t=Wh(e);if(DU(t))return e}function Fie(e,t){if(e==="change")return t}var dz=!1;if(vc){var xE;if(vc){var yE="oninput"in document;if(!yE){var r$=document.createElement("div");r$.setAttribute("oninput","return;"),yE=typeof r$.oninput=="function"}xE=yE}else xE=!1;dz=xE&&(!document.documentMode||9<document.documentMode)}function n$(){xg&&(xg.detachEvent("onpropertychange",fz),sv=xg=null)}function fz(e){if(e.propertyName==="value"&&PS(sv)){var t=[];uz(t,sv,e,sR(e)),HU($ie,t)}}function Lie(e,t,r){e==="focusin"?(n$(),xg=t,sv=r,xg.attachEvent("onpropertychange",fz)):e==="focusout"&&n$()}function Bie(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return PS(sv)}function Uie(e,t){if(e==="click")return PS(t)}function zie(e,t){if(e==="input"||e==="change")return PS(t)}function Wie(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zo=typeof Object.is=="function"?Object.is:Wie;function iv(e,t){if(Zo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Ak.call(t,a)||!Zo(e[a],t[a]))return!1}return!0}function a$(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function s$(e,t){var r=a$(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=a$(r)}}function hz(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hz(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function mz(){for(var e=window,t=Q1();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Q1(e.document)}return t}function mR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Vie(e){var t=mz(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&hz(r.ownerDocument.documentElement,r)){if(n!==null&&mR(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=n.end===void 0?s:Math.min(n.end,a),!e.extend&&s>n&&(a=n,n=s,s=a),a=s$(r,s);var o=s$(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Hie=vc&&"documentMode"in document&&11>=document.documentMode,Uh=null,Xk=null,yg=null,Yk=!1;function i$(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Yk||Uh==null||Uh!==Q1(n)||(n=Uh,"selectionStart"in n&&mR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),yg&&iv(yg,n)||(yg=n,n=iw(Xk,"onSelect"),0<n.length&&(t=new dR("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Uh)))}function ib(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var zh={animationend:ib("Animation","AnimationEnd"),animationiteration:ib("Animation","AnimationIteration"),animationstart:ib("Animation","AnimationStart"),transitionend:ib("Transition","TransitionEnd")},bE={},pz={};vc&&(pz=document.createElement("div").style,"AnimationEvent"in window||(delete zh.animationend.animation,delete zh.animationiteration.animation,delete zh.animationstart.animation),"TransitionEvent"in window||delete zh.transitionend.transition);function OS(e){if(bE[e])return bE[e];if(!zh[e])return e;var t=zh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in pz)return bE[e]=t[r];return e}var gz=OS("animationend"),vz=OS("animationiteration"),xz=OS("animationstart"),yz=OS("transitionend"),bz=new Map,o$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qu(e,t){bz.set(e,t),Hf(t,[e])}for(var wE=0;wE<o$.length;wE++){var _E=o$[wE],qie=_E.toLowerCase(),Gie=_E[0].toUpperCase()+_E.slice(1);Qu(qie,"on"+Gie)}Qu(gz,"onAnimationEnd");Qu(vz,"onAnimationIteration");Qu(xz,"onAnimationStart");Qu("dblclick","onDoubleClick");Qu("focusin","onFocus");Qu("focusout","onBlur");Qu(yz,"onTransitionEnd");Vm("onMouseEnter",["mouseout","mouseover"]);Vm("onMouseLeave",["mouseout","mouseover"]);Vm("onPointerEnter",["pointerout","pointerover"]);Vm("onPointerLeave",["pointerout","pointerover"]);Hf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kie=new Set("cancel close invalid load scroll toggle".split(" ").concat(eg));function l$(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,qse(n,t,void 0,e),e.currentTarget=null}function wz(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;l$(a,l,u),s=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;l$(a,l,u),s=c}}}if(tw)throw e=Hk,tw=!1,Hk=null,e}function mn(e,t){var r=t[tT];r===void 0&&(r=t[tT]=new Set);var n=e+"__bubble";r.has(n)||(_z(t,e,2,!1),r.add(n))}function SE(e,t,r){var n=0;t&&(n|=4),_z(r,e,n,t)}var ob="_reactListening"+Math.random().toString(36).slice(2);function ov(e){if(!e[ob]){e[ob]=!0,TU.forEach(function(r){r!=="selectionchange"&&(Kie.has(r)||SE(r,!1,e),SE(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ob]||(t[ob]=!0,SE("selectionchange",!1,t))}}function _z(e,t,r,n){switch(sz(t)){case 1:var a=lie;break;case 4:a=cie;break;default:a=cR}r=a.bind(null,t,r,e),a=void 0,!Vk||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function jE(e,t,r,n,a){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=$d(l),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}l=l.parentNode}}n=n.return}HU(function(){var u=s,d=sR(r),f=[];e:{var h=bz.get(e);if(h!==void 0){var p=dR,v=e;switch(e){case"keypress":if(O1(r)===0)break e;case"keydown":case"keyup":p=jie;break;case"focusin":v="focus",p=vE;break;case"focusout":v="blur",p=vE;break;case"beforeblur":case"afterblur":p=vE;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=YI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=fie;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Cie;break;case gz:case vz:case xz:p=pie;break;case yz:p=Tie;break;case"scroll":p=uie;break;case"wheel":p=Pie;break;case"copy":case"cut":case"paste":p=vie;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=JI}var m=(t&4)!==0,g=!m&&e==="scroll",b=m?h!==null?h+"Capture":null:h;m=[];for(var y=u,w;y!==null;){w=y;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,b!==null&&(_=tv(y,b),_!=null&&m.push(lv(y,_,w)))),g)break;y=y.return}0<m.length&&(h=new p(h,v,null,r,d),f.push({event:h,listeners:m}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==zk&&(v=r.relatedTarget||r.fromElement)&&($d(v)||v[xc]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=u,v=v?$d(v):null,v!==null&&(g=qf(v),v!==g||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(m=YI,_="onMouseLeave",b="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(m=JI,_="onPointerLeave",b="onPointerEnter",y="pointer"),g=p==null?h:Wh(p),w=v==null?h:Wh(v),h=new m(_,y+"leave",p,r,d),h.target=g,h.relatedTarget=w,_=null,$d(d)===u&&(m=new m(b,y+"enter",v,r,d),m.target=w,m.relatedTarget=g,_=m),g=_,p&&v)t:{for(m=p,b=v,y=0,w=m;w;w=mh(w))y++;for(w=0,_=b;_;_=mh(_))w++;for(;0<y-w;)m=mh(m),y--;for(;0<w-y;)b=mh(b),w--;for(;y--;){if(m===b||b!==null&&m===b.alternate)break t;m=mh(m),b=mh(b)}m=null}else m=null;p!==null&&c$(f,h,p,m,!1),v!==null&&g!==null&&c$(f,g,v,m,!0)}}e:{if(h=u?Wh(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=Fie;else if(t$(h))if(dz)S=zie;else{S=Bie;var E=Lie}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=Uie);if(S&&(S=S(e,u))){uz(f,S,r,d);break e}E&&E(e,h,u),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&$k(h,"number",h.value)}switch(E=u?Wh(u):window,e){case"focusin":(t$(E)||E.contentEditable==="true")&&(Uh=E,Xk=u,yg=null);break;case"focusout":yg=Xk=Uh=null;break;case"mousedown":Yk=!0;break;case"contextmenu":case"mouseup":case"dragend":Yk=!1,i$(f,r,d);break;case"selectionchange":if(Hie)break;case"keydown":case"keyup":i$(f,r,d)}var j;if(hR)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Bh?lz(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(oz&&r.locale!=="ko"&&(Bh||N!=="onCompositionStart"?N==="onCompositionEnd"&&Bh&&(j=iz()):(vu=d,uR="value"in vu?vu.value:vu.textContent,Bh=!0)),E=iw(u,N),0<E.length&&(N=new ZI(N,e,null,r,d),f.push({event:N,listeners:E}),j?N.data=j:(j=cz(r),j!==null&&(N.data=j)))),(j=Rie?Die(e,r):Mie(e,r))&&(u=iw(u,"onBeforeInput"),0<u.length&&(d=new ZI("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=j))}wz(f,t)})}function lv(e,t,r){return{instance:e,listener:t,currentTarget:r}}function iw(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=tv(e,r),s!=null&&n.unshift(lv(e,s,a)),s=tv(e,t),s!=null&&n.push(lv(e,s,a))),e=e.return}return n}function mh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function c$(e,t,r,n,a){for(var s=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=tv(r,s),c!=null&&o.unshift(lv(r,c,l))):a||(c=tv(r,s),c!=null&&o.push(lv(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Xie=/\r\n?/g,Yie=/\u0000|\uFFFD/g;function u$(e){return(typeof e=="string"?e:""+e).replace(Xie,`
`).replace(Yie,"")}function lb(e,t,r){if(t=u$(t),u$(e)!==t&&r)throw Error(ot(425))}function ow(){}var Zk=null,Jk=null;function Qk(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var eT=typeof setTimeout=="function"?setTimeout:void 0,Zie=typeof clearTimeout=="function"?clearTimeout:void 0,d$=typeof Promise=="function"?Promise:void 0,Jie=typeof queueMicrotask=="function"?queueMicrotask:typeof d$<"u"?function(e){return d$.resolve(null).then(e).catch(Qie)}:eT;function Qie(e){setTimeout(function(){throw e})}function EE(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),av(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);av(t)}function Nu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function f$(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Fp=Math.random().toString(36).slice(2),vl="__reactFiber$"+Fp,cv="__reactProps$"+Fp,xc="__reactContainer$"+Fp,tT="__reactEvents$"+Fp,eoe="__reactListeners$"+Fp,toe="__reactHandles$"+Fp;function $d(e){var t=e[vl];if(t)return t;for(var r=e.parentNode;r;){if(t=r[xc]||r[vl]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=f$(e);e!==null;){if(r=e[vl])return r;e=f$(e)}return t}e=r,r=e.parentNode}return null}function qx(e){return e=e[vl]||e[xc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ot(33))}function RS(e){return e[cv]||null}var rT=[],Vh=-1;function ed(e){return{current:e}}function vn(e){0>Vh||(e.current=rT[Vh],rT[Vh]=null,Vh--)}function cn(e,t){Vh++,rT[Vh]=e.current,e.current=t}var Lu={},os=ed(Lu),Zs=ed(!1),cf=Lu;function Hm(e,t){var r=e.type.contextTypes;if(!r)return Lu;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Js(e){return e=e.childContextTypes,e!=null}function lw(){vn(Zs),vn(os)}function h$(e,t,r){if(os.current!==Lu)throw Error(ot(168));cn(os,t),cn(Zs,r)}function Sz(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ot(108,Lse(e)||"Unknown",a));return An({},r,n)}function cw(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lu,cf=os.current,cn(os,e),cn(Zs,Zs.current),!0}function m$(e,t,r){var n=e.stateNode;if(!n)throw Error(ot(169));r?(e=Sz(e,t,cf),n.__reactInternalMemoizedMergedChildContext=e,vn(Zs),vn(os),cn(os,e)):vn(Zs),cn(Zs,r)}var Xl=null,DS=!1,NE=!1;function jz(e){Xl===null?Xl=[e]:Xl.push(e)}function roe(e){DS=!0,jz(e)}function td(){if(!NE&&Xl!==null){NE=!0;var e=0,t=Jr;try{var r=Xl;for(Jr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Xl=null,DS=!1}catch(a){throw Xl!==null&&(Xl=Xl.slice(e+1)),XU(iR,td),a}finally{Jr=t,NE=!1}}return null}var Hh=[],qh=0,uw=null,dw=0,Ki=[],Xi=0,uf=null,ec=1,tc="";function Sd(e,t){Hh[qh++]=dw,Hh[qh++]=uw,uw=e,dw=t}function Ez(e,t,r){Ki[Xi++]=ec,Ki[Xi++]=tc,Ki[Xi++]=uf,uf=e;var n=ec;e=tc;var a=32-Wo(n)-1;n&=~(1<<a),r+=1;var s=32-Wo(t)+a;if(30<s){var o=a-a%5;s=(n&(1<<o)-1).toString(32),n>>=o,a-=o,ec=1<<32-Wo(t)+a|r<<a|n,tc=s+e}else ec=1<<s|r<<a|n,tc=e}function pR(e){e.return!==null&&(Sd(e,1),Ez(e,1,0))}function gR(e){for(;e===uw;)uw=Hh[--qh],Hh[qh]=null,dw=Hh[--qh],Hh[qh]=null;for(;e===uf;)uf=Ki[--Xi],Ki[Xi]=null,tc=Ki[--Xi],Ki[Xi]=null,ec=Ki[--Xi],Ki[Xi]=null}var wi=null,bi=null,_n=!1,Oo=null;function Nz(e,t){var r=Zi(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function p$(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wi=e,bi=Nu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wi=e,bi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=uf!==null?{id:ec,overflow:tc}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Zi(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,wi=e,bi=null,!0):!1;default:return!1}}function nT(e){return(e.mode&1)!==0&&(e.flags&128)===0}function aT(e){if(_n){var t=bi;if(t){var r=t;if(!p$(e,t)){if(nT(e))throw Error(ot(418));t=Nu(r.nextSibling);var n=wi;t&&p$(e,t)?Nz(n,r):(e.flags=e.flags&-4097|2,_n=!1,wi=e)}}else{if(nT(e))throw Error(ot(418));e.flags=e.flags&-4097|2,_n=!1,wi=e}}}function g$(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wi=e}function cb(e){if(e!==wi)return!1;if(!_n)return g$(e),_n=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qk(e.type,e.memoizedProps)),t&&(t=bi)){if(nT(e))throw Cz(),Error(ot(418));for(;t;)Nz(e,t),t=Nu(t.nextSibling)}if(g$(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ot(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){bi=Nu(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}bi=null}}else bi=wi?Nu(e.stateNode.nextSibling):null;return!0}function Cz(){for(var e=bi;e;)e=Nu(e.nextSibling)}function qm(){bi=wi=null,_n=!1}function vR(e){Oo===null?Oo=[e]:Oo.push(e)}var noe=Ac.ReactCurrentBatchConfig;function N0(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ot(309));var n=r.stateNode}if(!n)throw Error(ot(147,e));var a=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(ot(284));if(!r._owner)throw Error(ot(290,e))}return e}function ub(e,t){throw e=Object.prototype.toString.call(t),Error(ot(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function v$(e){var t=e._init;return t(e._payload)}function kz(e){function t(b,y){if(e){var w=b.deletions;w===null?(b.deletions=[y],b.flags|=16):w.push(y)}}function r(b,y){if(!e)return null;for(;y!==null;)t(b,y),y=y.sibling;return null}function n(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function a(b,y){return b=Au(b,y),b.index=0,b.sibling=null,b}function s(b,y,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<y?(b.flags|=2,y):w):(b.flags|=2,y)):(b.flags|=1048576,y)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,y,w,_){return y===null||y.tag!==6?(y=RE(w,b.mode,_),y.return=b,y):(y=a(y,w),y.return=b,y)}function c(b,y,w,_){var S=w.type;return S===Lh?d(b,y,w.props.children,_,w.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===eu&&v$(S)===y.type)?(_=a(y,w.props),_.ref=N0(b,y,w),_.return=b,_):(_=L1(w.type,w.key,w.props,null,b.mode,_),_.ref=N0(b,y,w),_.return=b,_)}function u(b,y,w,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=DE(w,b.mode,_),y.return=b,y):(y=a(y,w.children||[]),y.return=b,y)}function d(b,y,w,_,S){return y===null||y.tag!==7?(y=Jd(w,b.mode,_,S),y.return=b,y):(y=a(y,w),y.return=b,y)}function f(b,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=RE(""+y,b.mode,w),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Qy:return w=L1(y.type,y.key,y.props,null,b.mode,w),w.ref=N0(b,null,y),w.return=b,w;case Fh:return y=DE(y,b.mode,w),y.return=b,y;case eu:var _=y._init;return f(b,_(y._payload),w)}if(J0(y)||w0(y))return y=Jd(y,b.mode,w,null),y.return=b,y;ub(b,y)}return null}function h(b,y,w,_){var S=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(b,y,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Qy:return w.key===S?c(b,y,w,_):null;case Fh:return w.key===S?u(b,y,w,_):null;case eu:return S=w._init,h(b,y,S(w._payload),_)}if(J0(w)||w0(w))return S!==null?null:d(b,y,w,_,null);ub(b,w)}return null}function p(b,y,w,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return b=b.get(w)||null,l(y,b,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Qy:return b=b.get(_.key===null?w:_.key)||null,c(y,b,_,S);case Fh:return b=b.get(_.key===null?w:_.key)||null,u(y,b,_,S);case eu:var E=_._init;return p(b,y,w,E(_._payload),S)}if(J0(_)||w0(_))return b=b.get(w)||null,d(y,b,_,S,null);ub(y,_)}return null}function v(b,y,w,_){for(var S=null,E=null,j=y,N=y=0,k=null;j!==null&&N<w.length;N++){j.index>N?(k=j,j=null):k=j.sibling;var C=h(b,j,w[N],_);if(C===null){j===null&&(j=k);break}e&&j&&C.alternate===null&&t(b,j),y=s(C,y,N),E===null?S=C:E.sibling=C,E=C,j=k}if(N===w.length)return r(b,j),_n&&Sd(b,N),S;if(j===null){for(;N<w.length;N++)j=f(b,w[N],_),j!==null&&(y=s(j,y,N),E===null?S=j:E.sibling=j,E=j);return _n&&Sd(b,N),S}for(j=n(b,j);N<w.length;N++)k=p(j,b,N,w[N],_),k!==null&&(e&&k.alternate!==null&&j.delete(k.key===null?N:k.key),y=s(k,y,N),E===null?S=k:E.sibling=k,E=k);return e&&j.forEach(function(T){return t(b,T)}),_n&&Sd(b,N),S}function m(b,y,w,_){var S=w0(w);if(typeof S!="function")throw Error(ot(150));if(w=S.call(w),w==null)throw Error(ot(151));for(var E=S=null,j=y,N=y=0,k=null,C=w.next();j!==null&&!C.done;N++,C=w.next()){j.index>N?(k=j,j=null):k=j.sibling;var T=h(b,j,C.value,_);if(T===null){j===null&&(j=k);break}e&&j&&T.alternate===null&&t(b,j),y=s(T,y,N),E===null?S=T:E.sibling=T,E=T,j=k}if(C.done)return r(b,j),_n&&Sd(b,N),S;if(j===null){for(;!C.done;N++,C=w.next())C=f(b,C.value,_),C!==null&&(y=s(C,y,N),E===null?S=C:E.sibling=C,E=C);return _n&&Sd(b,N),S}for(j=n(b,j);!C.done;N++,C=w.next())C=p(j,b,N,C.value,_),C!==null&&(e&&C.alternate!==null&&j.delete(C.key===null?N:C.key),y=s(C,y,N),E===null?S=C:E.sibling=C,E=C);return e&&j.forEach(function(A){return t(b,A)}),_n&&Sd(b,N),S}function g(b,y,w,_){if(typeof w=="object"&&w!==null&&w.type===Lh&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Qy:e:{for(var S=w.key,E=y;E!==null;){if(E.key===S){if(S=w.type,S===Lh){if(E.tag===7){r(b,E.sibling),y=a(E,w.props.children),y.return=b,b=y;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===eu&&v$(S)===E.type){r(b,E.sibling),y=a(E,w.props),y.ref=N0(b,E,w),y.return=b,b=y;break e}r(b,E);break}else t(b,E);E=E.sibling}w.type===Lh?(y=Jd(w.props.children,b.mode,_,w.key),y.return=b,b=y):(_=L1(w.type,w.key,w.props,null,b.mode,_),_.ref=N0(b,y,w),_.return=b,b=_)}return o(b);case Fh:e:{for(E=w.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){r(b,y.sibling),y=a(y,w.children||[]),y.return=b,b=y;break e}else{r(b,y);break}else t(b,y);y=y.sibling}y=DE(w,b.mode,_),y.return=b,b=y}return o(b);case eu:return E=w._init,g(b,y,E(w._payload),_)}if(J0(w))return v(b,y,w,_);if(w0(w))return m(b,y,w,_);ub(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(r(b,y.sibling),y=a(y,w),y.return=b,b=y):(r(b,y),y=RE(w,b.mode,_),y.return=b,b=y),o(b)):r(b,y)}return g}var Gm=kz(!0),Tz=kz(!1),fw=ed(null),hw=null,Gh=null,xR=null;function yR(){xR=Gh=hw=null}function bR(e){var t=fw.current;vn(fw),e._currentValue=t}function sT(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function lm(e,t){hw=e,xR=Gh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xs=!0),e.firstContext=null)}function no(e){var t=e._currentValue;if(xR!==e)if(e={context:e,memoizedValue:t,next:null},Gh===null){if(hw===null)throw Error(ot(308));Gh=e,hw.dependencies={lanes:0,firstContext:e}}else Gh=Gh.next=e;return t}var Fd=null;function wR(e){Fd===null?Fd=[e]:Fd.push(e)}function Az(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,wR(t)):(r.next=a.next,a.next=r),t.interleaved=r,yc(e,n)}function yc(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var tu=!1;function _R(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pz(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cu(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Br&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,yc(e,r)}return a=n.interleaved,a===null?(t.next=t,wR(n)):(t.next=a.next,a.next=t),n.interleaved=t,yc(e,r)}function R1(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,oR(e,r)}}function x$(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?a=s=t:s=s.next=t}else a=s=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function mw(e,t,r,n){var a=e.updateQueue;tu=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=a.baseState;o=0,d=u=c=null,l=s;do{var h=l.lane,p=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,m=l;switch(h=t,p=r,m.tag){case 1:if(v=m.payload,typeof v=="function"){f=v.call(p,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=m.payload,h=typeof v=="function"?v.call(p,f,h):v,h==null)break e;f=An({},f,h);break e;case 2:tu=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else s===null&&(a.shared.lanes=0);ff|=o,e.lanes=o,e.memoizedState=f}}function y$(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ot(191,a));a.call(n)}}}var Gx={},Sl=ed(Gx),uv=ed(Gx),dv=ed(Gx);function Ld(e){if(e===Gx)throw Error(ot(174));return e}function SR(e,t){switch(cn(dv,t),cn(uv,e),cn(Sl,Gx),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lk(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lk(t,e)}vn(Sl),cn(Sl,t)}function Km(){vn(Sl),vn(uv),vn(dv)}function Oz(e){Ld(dv.current);var t=Ld(Sl.current),r=Lk(t,e.type);t!==r&&(cn(uv,e),cn(Sl,r))}function jR(e){uv.current===e&&(vn(Sl),vn(uv))}var kn=ed(0);function pw(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var CE=[];function ER(){for(var e=0;e<CE.length;e++)CE[e]._workInProgressVersionPrimary=null;CE.length=0}var D1=Ac.ReactCurrentDispatcher,kE=Ac.ReactCurrentBatchConfig,df=0,Tn=null,oa=null,ya=null,gw=!1,bg=!1,fv=0,aoe=0;function Va(){throw Error(ot(321))}function NR(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Zo(e[r],t[r]))return!1;return!0}function CR(e,t,r,n,a,s){if(df=s,Tn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D1.current=e===null||e.memoizedState===null?loe:coe,e=r(n,a),bg){s=0;do{if(bg=!1,fv=0,25<=s)throw Error(ot(301));s+=1,ya=oa=null,t.updateQueue=null,D1.current=uoe,e=r(n,a)}while(bg)}if(D1.current=vw,t=oa!==null&&oa.next!==null,df=0,ya=oa=Tn=null,gw=!1,t)throw Error(ot(300));return e}function kR(){var e=fv!==0;return fv=0,e}function fl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ya===null?Tn.memoizedState=ya=e:ya=ya.next=e,ya}function ao(){if(oa===null){var e=Tn.alternate;e=e!==null?e.memoizedState:null}else e=oa.next;var t=ya===null?Tn.memoizedState:ya.next;if(t!==null)ya=t,oa=e;else{if(e===null)throw Error(ot(310));oa=e,e={memoizedState:oa.memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},ya===null?Tn.memoizedState=ya=e:ya=ya.next=e}return ya}function hv(e,t){return typeof t=="function"?t(e):t}function TE(e){var t=ao(),r=t.queue;if(r===null)throw Error(ot(311));r.lastRenderedReducer=e;var n=oa,a=n.baseQueue,s=r.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}n.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,n=n.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((df&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Tn.lanes|=d,ff|=d}u=u.next}while(u!==null&&u!==s);c===null?o=n:c.next=l,Zo(n,t.memoizedState)||(Xs=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do s=a.lane,Tn.lanes|=s,ff|=s,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function AE(e){var t=ao(),r=t.queue;if(r===null)throw Error(ot(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,s=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do s=e(s,o.action),o=o.next;while(o!==a);Zo(s,t.memoizedState)||(Xs=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function Rz(){}function Dz(e,t){var r=Tn,n=ao(),a=t(),s=!Zo(n.memoizedState,a);if(s&&(n.memoizedState=a,Xs=!0),n=n.queue,TR($z.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||ya!==null&&ya.memoizedState.tag&1){if(r.flags|=2048,mv(9,Iz.bind(null,r,n,a,t),void 0,null),_a===null)throw Error(ot(349));df&30||Mz(r,t,a)}return a}function Mz(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Tn.updateQueue,t===null?(t={lastEffect:null,stores:null},Tn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Iz(e,t,r,n){t.value=r,t.getSnapshot=n,Fz(t)&&Lz(e)}function $z(e,t,r){return r(function(){Fz(t)&&Lz(e)})}function Fz(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Zo(e,r)}catch{return!0}}function Lz(e){var t=yc(e,1);t!==null&&Vo(t,e,1,-1)}function b$(e){var t=fl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hv,lastRenderedState:e},t.queue=e,e=e.dispatch=ooe.bind(null,Tn,e),[t.memoizedState,e]}function mv(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Tn.updateQueue,t===null?(t={lastEffect:null,stores:null},Tn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Bz(){return ao().memoizedState}function M1(e,t,r,n){var a=fl();Tn.flags|=e,a.memoizedState=mv(1|t,r,void 0,n===void 0?null:n)}function MS(e,t,r,n){var a=ao();n=n===void 0?null:n;var s=void 0;if(oa!==null){var o=oa.memoizedState;if(s=o.destroy,n!==null&&NR(n,o.deps)){a.memoizedState=mv(t,r,s,n);return}}Tn.flags|=e,a.memoizedState=mv(1|t,r,s,n)}function w$(e,t){return M1(8390656,8,e,t)}function TR(e,t){return MS(2048,8,e,t)}function Uz(e,t){return MS(4,2,e,t)}function zz(e,t){return MS(4,4,e,t)}function Wz(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vz(e,t,r){return r=r!=null?r.concat([e]):null,MS(4,4,Wz.bind(null,t,e),r)}function AR(){}function Hz(e,t){var r=ao();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&NR(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function qz(e,t){var r=ao();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&NR(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Gz(e,t,r){return df&21?(Zo(r,t)||(r=JU(),Tn.lanes|=r,ff|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xs=!0),e.memoizedState=r)}function soe(e,t){var r=Jr;Jr=r!==0&&4>r?r:4,e(!0);var n=kE.transition;kE.transition={};try{e(!1),t()}finally{Jr=r,kE.transition=n}}function Kz(){return ao().memoizedState}function ioe(e,t,r){var n=Tu(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Xz(e))Yz(t,r);else if(r=Az(e,t,r,n),r!==null){var a=Ns();Vo(r,e,n,a),Zz(r,t,n)}}function ooe(e,t,r){var n=Tu(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Xz(e))Yz(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,r);if(a.hasEagerState=!0,a.eagerState=l,Zo(l,o)){var c=t.interleaved;c===null?(a.next=a,wR(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Az(e,t,a,n),r!==null&&(a=Ns(),Vo(r,e,n,a),Zz(r,t,n))}}function Xz(e){var t=e.alternate;return e===Tn||t!==null&&t===Tn}function Yz(e,t){bg=gw=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Zz(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,oR(e,r)}}var vw={readContext:no,useCallback:Va,useContext:Va,useEffect:Va,useImperativeHandle:Va,useInsertionEffect:Va,useLayoutEffect:Va,useMemo:Va,useReducer:Va,useRef:Va,useState:Va,useDebugValue:Va,useDeferredValue:Va,useTransition:Va,useMutableSource:Va,useSyncExternalStore:Va,useId:Va,unstable_isNewReconciler:!1},loe={readContext:no,useCallback:function(e,t){return fl().memoizedState=[e,t===void 0?null:t],e},useContext:no,useEffect:w$,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,M1(4194308,4,Wz.bind(null,t,e),r)},useLayoutEffect:function(e,t){return M1(4194308,4,e,t)},useInsertionEffect:function(e,t){return M1(4,2,e,t)},useMemo:function(e,t){var r=fl();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=fl();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ioe.bind(null,Tn,e),[n.memoizedState,e]},useRef:function(e){var t=fl();return e={current:e},t.memoizedState=e},useState:b$,useDebugValue:AR,useDeferredValue:function(e){return fl().memoizedState=e},useTransition:function(){var e=b$(!1),t=e[0];return e=soe.bind(null,e[1]),fl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Tn,a=fl();if(_n){if(r===void 0)throw Error(ot(407));r=r()}else{if(r=t(),_a===null)throw Error(ot(349));df&30||Mz(n,t,r)}a.memoizedState=r;var s={value:r,getSnapshot:t};return a.queue=s,w$($z.bind(null,n,s,e),[e]),n.flags|=2048,mv(9,Iz.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=fl(),t=_a.identifierPrefix;if(_n){var r=tc,n=ec;r=(n&~(1<<32-Wo(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=fv++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=aoe++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},coe={readContext:no,useCallback:Hz,useContext:no,useEffect:TR,useImperativeHandle:Vz,useInsertionEffect:Uz,useLayoutEffect:zz,useMemo:qz,useReducer:TE,useRef:Bz,useState:function(){return TE(hv)},useDebugValue:AR,useDeferredValue:function(e){var t=ao();return Gz(t,oa.memoizedState,e)},useTransition:function(){var e=TE(hv)[0],t=ao().memoizedState;return[e,t]},useMutableSource:Rz,useSyncExternalStore:Dz,useId:Kz,unstable_isNewReconciler:!1},uoe={readContext:no,useCallback:Hz,useContext:no,useEffect:TR,useImperativeHandle:Vz,useInsertionEffect:Uz,useLayoutEffect:zz,useMemo:qz,useReducer:AE,useRef:Bz,useState:function(){return AE(hv)},useDebugValue:AR,useDeferredValue:function(e){var t=ao();return oa===null?t.memoizedState=e:Gz(t,oa.memoizedState,e)},useTransition:function(){var e=AE(hv)[0],t=ao().memoizedState;return[e,t]},useMutableSource:Rz,useSyncExternalStore:Dz,useId:Kz,unstable_isNewReconciler:!1};function jo(e,t){if(e&&e.defaultProps){t=An({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function iT(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:An({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var IS={isMounted:function(e){return(e=e._reactInternals)?qf(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ns(),a=Tu(e),s=cc(n,a);s.payload=t,r!=null&&(s.callback=r),t=Cu(e,s,a),t!==null&&(Vo(t,e,a,n),R1(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ns(),a=Tu(e),s=cc(n,a);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Cu(e,s,a),t!==null&&(Vo(t,e,a,n),R1(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ns(),n=Tu(e),a=cc(r,n);a.tag=2,t!=null&&(a.callback=t),t=Cu(e,a,n),t!==null&&(Vo(t,e,n,r),R1(t,e,n))}};function _$(e,t,r,n,a,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!iv(r,n)||!iv(a,s):!0}function Jz(e,t,r){var n=!1,a=Lu,s=t.contextType;return typeof s=="object"&&s!==null?s=no(s):(a=Js(t)?cf:os.current,n=t.contextTypes,s=(n=n!=null)?Hm(e,a):Lu),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=IS,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function S$(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&IS.enqueueReplaceState(t,t.state,null)}function oT(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},_R(e);var s=t.contextType;typeof s=="object"&&s!==null?a.context=no(s):(s=Js(t)?cf:os.current,a.context=Hm(e,s)),a.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(iT(e,t,s,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&IS.enqueueReplaceState(a,a.state,null),mw(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Xm(e,t){try{var r="",n=t;do r+=Fse(n),n=n.return;while(n);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:a,digest:null}}function PE(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function lT(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var doe=typeof WeakMap=="function"?WeakMap:Map;function Qz(e,t,r){r=cc(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){yw||(yw=!0,xT=n),lT(e,t)},r}function eW(e,t,r){r=cc(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){lT(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){lT(e,t),typeof n!="function"&&(ku===null?ku=new Set([this]):ku.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function j$(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new doe;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Eoe.bind(null,e,t,r),t.then(e,e))}function E$(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function N$(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=cc(-1,1),t.tag=2,Cu(r,t,1))),r.lanes|=1),e)}var foe=Ac.ReactCurrentOwner,Xs=!1;function gs(e,t,r,n){t.child=e===null?Tz(t,null,r,n):Gm(t,e.child,r,n)}function C$(e,t,r,n,a){r=r.render;var s=t.ref;return lm(t,a),n=CR(e,t,r,n,s,a),r=kR(),e!==null&&!Xs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,bc(e,t,a)):(_n&&r&&pR(t),t.flags|=1,gs(e,t,n,a),t.child)}function k$(e,t,r,n,a){if(e===null){var s=r.type;return typeof s=="function"&&!FR(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,tW(e,t,s,n,a)):(e=L1(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&a)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:iv,r(o,n)&&e.ref===t.ref)return bc(e,t,a)}return t.flags|=1,e=Au(s,n),e.ref=t.ref,e.return=t,t.child=e}function tW(e,t,r,n,a){if(e!==null){var s=e.memoizedProps;if(iv(s,n)&&e.ref===t.ref)if(Xs=!1,t.pendingProps=n=s,(e.lanes&a)!==0)e.flags&131072&&(Xs=!0);else return t.lanes=e.lanes,bc(e,t,a)}return cT(e,t,r,n,a)}function rW(e,t,r){var n=t.pendingProps,a=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},cn(Xh,di),di|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,cn(Xh,di),di|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,cn(Xh,di),di|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,cn(Xh,di),di|=n;return gs(e,t,a,r),t.child}function nW(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function cT(e,t,r,n,a){var s=Js(r)?cf:os.current;return s=Hm(t,s),lm(t,a),r=CR(e,t,r,n,s,a),n=kR(),e!==null&&!Xs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,bc(e,t,a)):(_n&&n&&pR(t),t.flags|=1,gs(e,t,r,a),t.child)}function T$(e,t,r,n,a){if(Js(r)){var s=!0;cw(t)}else s=!1;if(lm(t,a),t.stateNode===null)I1(e,t),Jz(t,r,n),oT(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=no(u):(u=Js(r)?cf:os.current,u=Hm(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&S$(t,o,n,u),tu=!1;var h=t.memoizedState;o.state=h,mw(t,n,o,a),c=t.memoizedState,l!==n||h!==c||Zs.current||tu?(typeof d=="function"&&(iT(t,r,d,n),c=t.memoizedState),(l=tu||_$(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Pz(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:jo(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=no(c):(c=Js(r)?cf:os.current,c=Hm(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&S$(t,o,n,c),tu=!1,h=t.memoizedState,o.state=h,mw(t,n,o,a);var v=t.memoizedState;l!==f||h!==v||Zs.current||tu?(typeof p=="function"&&(iT(t,r,p,n),v=t.memoizedState),(u=tu||_$(t,r,u,n,h,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return uT(e,t,r,n,s,a)}function uT(e,t,r,n,a,s){nW(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&m$(t,r,!1),bc(e,t,s);n=t.stateNode,foe.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Gm(t,e.child,null,s),t.child=Gm(t,null,l,s)):gs(e,t,l,s),t.memoizedState=n.state,a&&m$(t,r,!0),t.child}function aW(e){var t=e.stateNode;t.pendingContext?h$(e,t.pendingContext,t.pendingContext!==t.context):t.context&&h$(e,t.context,!1),SR(e,t.containerInfo)}function A$(e,t,r,n,a){return qm(),vR(a),t.flags|=256,gs(e,t,r,n),t.child}var dT={dehydrated:null,treeContext:null,retryLane:0};function fT(e){return{baseLanes:e,cachePool:null,transitions:null}}function sW(e,t,r){var n=t.pendingProps,a=kn.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),cn(kn,a&1),e===null)return aT(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=LS(o,n,0,null),e=Jd(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=fT(r),t.memoizedState=dT,e):PR(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return hoe(e,t,o,n,l,a,r);if(s){s=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Au(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=Au(l,s):(s=Jd(s,o,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?fT(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=dT,n}return s=e.child,e=s.sibling,n=Au(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function PR(e,t){return t=LS({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function db(e,t,r,n){return n!==null&&vR(n),Gm(t,e.child,null,r),e=PR(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hoe(e,t,r,n,a,s,o){if(r)return t.flags&256?(t.flags&=-257,n=PE(Error(ot(422))),db(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,a=t.mode,n=LS({mode:"visible",children:n.children},a,0,null),s=Jd(s,a,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&Gm(t,e.child,null,o),t.child.memoizedState=fT(o),t.memoizedState=dT,s);if(!(t.mode&1))return db(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(ot(419)),n=PE(s,n,void 0),db(e,t,o,n)}if(l=(o&e.childLanes)!==0,Xs||l){if(n=_a,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,yc(e,a),Vo(n,e,a,-1))}return $R(),n=PE(Error(ot(421))),db(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Noe.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,bi=Nu(a.nextSibling),wi=t,_n=!0,Oo=null,e!==null&&(Ki[Xi++]=ec,Ki[Xi++]=tc,Ki[Xi++]=uf,ec=e.id,tc=e.overflow,uf=t),t=PR(t,n.children),t.flags|=4096,t)}function P$(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),sT(e.return,t,r)}function OE(e,t,r,n,a){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function iW(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(gs(e,t,n.children,r),n=kn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&P$(e,r,t);else if(e.tag===19)P$(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(cn(kn,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&pw(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),OE(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&pw(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}OE(t,!0,r,null,s);break;case"together":OE(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function I1(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function bc(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ff|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ot(153));if(t.child!==null){for(e=t.child,r=Au(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Au(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function moe(e,t,r){switch(t.tag){case 3:aW(t),qm();break;case 5:Oz(t);break;case 1:Js(t.type)&&cw(t);break;case 4:SR(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;cn(fw,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(cn(kn,kn.current&1),t.flags|=128,null):r&t.child.childLanes?sW(e,t,r):(cn(kn,kn.current&1),e=bc(e,t,r),e!==null?e.sibling:null);cn(kn,kn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return iW(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),cn(kn,kn.current),n)break;return null;case 22:case 23:return t.lanes=0,rW(e,t,r)}return bc(e,t,r)}var oW,hT,lW,cW;oW=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};hT=function(){};lW=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ld(Sl.current);var s=null;switch(r){case"input":a=Mk(e,a),n=Mk(e,n),s=[];break;case"select":a=An({},a,{value:void 0}),n=An({},n,{value:void 0}),s=[];break;case"textarea":a=Fk(e,a),n=Fk(e,n),s=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ow)}Bk(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qg.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qg.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&mn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};cW=function(e,t,r,n){r!==n&&(t.flags|=4)};function C0(e,t){if(!_n)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ha(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function poe(e,t,r){var n=t.pendingProps;switch(gR(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:return Js(t.type)&&lw(),Ha(t),null;case 3:return n=t.stateNode,Km(),vn(Zs),vn(os),ER(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(cb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Oo!==null&&(wT(Oo),Oo=null))),hT(e,t),Ha(t),null;case 5:jR(t);var a=Ld(dv.current);if(r=t.type,e!==null&&t.stateNode!=null)lW(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ot(166));return Ha(t),null}if(e=Ld(Sl.current),cb(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[vl]=t,n[cv]=s,e=(t.mode&1)!==0,r){case"dialog":mn("cancel",n),mn("close",n);break;case"iframe":case"object":case"embed":mn("load",n);break;case"video":case"audio":for(a=0;a<eg.length;a++)mn(eg[a],n);break;case"source":mn("error",n);break;case"img":case"image":case"link":mn("error",n),mn("load",n);break;case"details":mn("toggle",n);break;case"input":BI(n,s),mn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},mn("invalid",n);break;case"textarea":zI(n,s),mn("invalid",n)}Bk(r,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&lb(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&lb(n.textContent,l,e),a=["children",""+l]):Qg.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&mn("scroll",n)}switch(r){case"input":eb(n),UI(n,s,!0);break;case"textarea":eb(n),WI(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=ow)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=$U(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[vl]=t,e[cv]=n,oW(e,t,!1,!1),t.stateNode=e;e:{switch(o=Uk(r,n),r){case"dialog":mn("cancel",e),mn("close",e),a=n;break;case"iframe":case"object":case"embed":mn("load",e),a=n;break;case"video":case"audio":for(a=0;a<eg.length;a++)mn(eg[a],e);a=n;break;case"source":mn("error",e),a=n;break;case"img":case"image":case"link":mn("error",e),mn("load",e),a=n;break;case"details":mn("toggle",e),a=n;break;case"input":BI(e,n),a=Mk(e,n),mn("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=An({},n,{value:void 0}),mn("invalid",e);break;case"textarea":zI(e,n),a=Fk(e,n),mn("invalid",e);break;default:a=n}Bk(r,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?BU(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&FU(e,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ev(e,c):typeof c=="number"&&ev(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qg.hasOwnProperty(s)?c!=null&&s==="onScroll"&&mn("scroll",e):c!=null&&tR(e,s,c,o))}switch(r){case"input":eb(e),UI(e,n,!1);break;case"textarea":eb(e),WI(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Fu(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?am(e,!!n.multiple,s,!1):n.defaultValue!=null&&am(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ow)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&t.stateNode!=null)cW(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ot(166));if(r=Ld(dv.current),Ld(Sl.current),cb(t)){if(n=t.stateNode,r=t.memoizedProps,n[vl]=t,(s=n.nodeValue!==r)&&(e=wi,e!==null))switch(e.tag){case 3:lb(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&lb(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[vl]=t,t.stateNode=n}return Ha(t),null;case 13:if(vn(kn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_n&&bi!==null&&t.mode&1&&!(t.flags&128))Cz(),qm(),t.flags|=98560,s=!1;else if(s=cb(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(ot(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ot(317));s[vl]=t}else qm(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ha(t),s=!1}else Oo!==null&&(wT(Oo),Oo=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||kn.current&1?la===0&&(la=3):$R())),t.updateQueue!==null&&(t.flags|=4),Ha(t),null);case 4:return Km(),hT(e,t),e===null&&ov(t.stateNode.containerInfo),Ha(t),null;case 10:return bR(t.type._context),Ha(t),null;case 17:return Js(t.type)&&lw(),Ha(t),null;case 19:if(vn(kn),s=t.memoizedState,s===null)return Ha(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)C0(s,!1);else{if(la!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=pw(e),o!==null){for(t.flags|=128,C0(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return cn(kn,kn.current&1|2),t.child}e=e.sibling}s.tail!==null&&Wn()>Ym&&(t.flags|=128,n=!0,C0(s,!1),t.lanes=4194304)}else{if(!n)if(e=pw(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),C0(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_n)return Ha(t),null}else 2*Wn()-s.renderingStartTime>Ym&&r!==1073741824&&(t.flags|=128,n=!0,C0(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Wn(),t.sibling=null,r=kn.current,cn(kn,n?r&1|2:r&1),t):(Ha(t),null);case 22:case 23:return IR(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?di&1073741824&&(Ha(t),t.subtreeFlags&6&&(t.flags|=8192)):Ha(t),null;case 24:return null;case 25:return null}throw Error(ot(156,t.tag))}function goe(e,t){switch(gR(t),t.tag){case 1:return Js(t.type)&&lw(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Km(),vn(Zs),vn(os),ER(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return jR(t),null;case 13:if(vn(kn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ot(340));qm()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vn(kn),null;case 4:return Km(),null;case 10:return bR(t.type._context),null;case 22:case 23:return IR(),null;case 24:return null;default:return null}}var fb=!1,Ja=!1,voe=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function Kh(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){In(e,t,n)}else r.current=null}function mT(e,t,r){try{r()}catch(n){In(e,t,n)}}var O$=!1;function xoe(e,t){if(Zk=aw,e=mz(),mR(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==s||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===a&&(l=o),h===s&&++d===n&&(c=o),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Jk={focusedElem:e,selectionRange:r},aw=!1,Nt=t;Nt!==null;)if(t=Nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Nt=e;else for(;Nt!==null;){t=Nt;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var m=v.memoizedProps,g=v.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?m:jo(t.type,m),g);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ot(163))}}catch(_){In(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Nt=e;break}Nt=t.return}return v=O$,O$=!1,v}function wg(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,s!==void 0&&mT(t,r,s)}a=a.next}while(a!==n)}}function $S(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function pT(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function uW(e){var t=e.alternate;t!==null&&(e.alternate=null,uW(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vl],delete t[cv],delete t[tT],delete t[eoe],delete t[toe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dW(e){return e.tag===5||e.tag===3||e.tag===4}function R$(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dW(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gT(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ow));else if(n!==4&&(e=e.child,e!==null))for(gT(e,t,r),e=e.sibling;e!==null;)gT(e,t,r),e=e.sibling}function vT(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(vT(e,t,r),e=e.sibling;e!==null;)vT(e,t,r),e=e.sibling}var ka=null,To=!1;function Uc(e,t,r){for(r=r.child;r!==null;)fW(e,t,r),r=r.sibling}function fW(e,t,r){if(_l&&typeof _l.onCommitFiberUnmount=="function")try{_l.onCommitFiberUnmount(TS,r)}catch{}switch(r.tag){case 5:Ja||Kh(r,t);case 6:var n=ka,a=To;ka=null,Uc(e,t,r),ka=n,To=a,ka!==null&&(To?(e=ka,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ka.removeChild(r.stateNode));break;case 18:ka!==null&&(To?(e=ka,r=r.stateNode,e.nodeType===8?EE(e.parentNode,r):e.nodeType===1&&EE(e,r),av(e)):EE(ka,r.stateNode));break;case 4:n=ka,a=To,ka=r.stateNode.containerInfo,To=!0,Uc(e,t,r),ka=n,To=a;break;case 0:case 11:case 14:case 15:if(!Ja&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&mT(r,t,o),a=a.next}while(a!==n)}Uc(e,t,r);break;case 1:if(!Ja&&(Kh(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){In(r,t,l)}Uc(e,t,r);break;case 21:Uc(e,t,r);break;case 22:r.mode&1?(Ja=(n=Ja)||r.memoizedState!==null,Uc(e,t,r),Ja=n):Uc(e,t,r);break;default:Uc(e,t,r)}}function D$(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new voe),t.forEach(function(n){var a=Coe.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function yo(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ka=l.stateNode,To=!1;break e;case 3:ka=l.stateNode.containerInfo,To=!0;break e;case 4:ka=l.stateNode.containerInfo,To=!0;break e}l=l.return}if(ka===null)throw Error(ot(160));fW(s,o,a),ka=null,To=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){In(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)hW(t,e),t=t.sibling}function hW(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yo(t,e),ol(e),n&4){try{wg(3,e,e.return),$S(3,e)}catch(m){In(e,e.return,m)}try{wg(5,e,e.return)}catch(m){In(e,e.return,m)}}break;case 1:yo(t,e),ol(e),n&512&&r!==null&&Kh(r,r.return);break;case 5:if(yo(t,e),ol(e),n&512&&r!==null&&Kh(r,r.return),e.flags&32){var a=e.stateNode;try{ev(a,"")}catch(m){In(e,e.return,m)}}if(n&4&&(a=e.stateNode,a!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&MU(a,s),Uk(l,o);var u=Uk(l,s);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?BU(a,f):d==="dangerouslySetInnerHTML"?FU(a,f):d==="children"?ev(a,f):tR(a,d,f,u)}switch(l){case"input":Ik(a,s);break;case"textarea":IU(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?am(a,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?am(a,!!s.multiple,s.defaultValue,!0):am(a,!!s.multiple,s.multiple?[]:"",!1))}a[cv]=s}catch(m){In(e,e.return,m)}}break;case 6:if(yo(t,e),ol(e),n&4){if(e.stateNode===null)throw Error(ot(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(m){In(e,e.return,m)}}break;case 3:if(yo(t,e),ol(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{av(t.containerInfo)}catch(m){In(e,e.return,m)}break;case 4:yo(t,e),ol(e);break;case 13:yo(t,e),ol(e),a=e.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(DR=Wn())),n&4&&D$(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Ja=(u=Ja)||d,yo(t,e),Ja=u):yo(t,e),ol(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Nt=e,d=e.child;d!==null;){for(f=Nt=d;Nt!==null;){switch(h=Nt,p=h.child,h.tag){case 0:case 11:case 14:case 15:wg(4,h,h.return);break;case 1:Kh(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){In(n,r,m)}}break;case 5:Kh(h,h.return);break;case 22:if(h.memoizedState!==null){I$(f);continue}}p!==null?(p.return=h,Nt=p):I$(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=LU("display",o))}catch(m){In(e,e.return,m)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){In(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yo(t,e),ol(e),n&4&&D$(e);break;case 21:break;default:yo(t,e),ol(e)}}function ol(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(dW(r)){var n=r;break e}r=r.return}throw Error(ot(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(ev(a,""),n.flags&=-33);var s=R$(e);vT(e,s,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=R$(e);gT(e,l,o);break;default:throw Error(ot(161))}}catch(c){In(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yoe(e,t,r){Nt=e,mW(e)}function mW(e,t,r){for(var n=(e.mode&1)!==0;Nt!==null;){var a=Nt,s=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||fb;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Ja;l=fb;var u=Ja;if(fb=o,(Ja=c)&&!u)for(Nt=a;Nt!==null;)o=Nt,c=o.child,o.tag===22&&o.memoizedState!==null?$$(a):c!==null?(c.return=o,Nt=c):$$(a);for(;s!==null;)Nt=s,mW(s),s=s.sibling;Nt=a,fb=l,Ja=u}M$(e)}else a.subtreeFlags&8772&&s!==null?(s.return=a,Nt=s):M$(e)}}function M$(e){for(;Nt!==null;){var t=Nt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ja||$S(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ja)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:jo(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&y$(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}y$(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&av(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ot(163))}Ja||t.flags&512&&pT(t)}catch(h){In(t,t.return,h)}}if(t===e){Nt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Nt=r;break}Nt=t.return}}function I$(e){for(;Nt!==null;){var t=Nt;if(t===e){Nt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Nt=r;break}Nt=t.return}}function $$(e){for(;Nt!==null;){var t=Nt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{$S(4,t)}catch(c){In(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){In(t,a,c)}}var s=t.return;try{pT(t)}catch(c){In(t,s,c)}break;case 5:var o=t.return;try{pT(t)}catch(c){In(t,o,c)}}}catch(c){In(t,t.return,c)}if(t===e){Nt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Nt=l;break}Nt=t.return}}var boe=Math.ceil,xw=Ac.ReactCurrentDispatcher,OR=Ac.ReactCurrentOwner,Qi=Ac.ReactCurrentBatchConfig,Br=0,_a=null,ea=null,Ma=0,di=0,Xh=ed(0),la=0,pv=null,ff=0,FS=0,RR=0,_g=null,Hs=null,DR=0,Ym=1/0,ql=null,yw=!1,xT=null,ku=null,hb=!1,xu=null,bw=0,Sg=0,yT=null,$1=-1,F1=0;function Ns(){return Br&6?Wn():$1!==-1?$1:$1=Wn()}function Tu(e){return e.mode&1?Br&2&&Ma!==0?Ma&-Ma:noe.transition!==null?(F1===0&&(F1=JU()),F1):(e=Jr,e!==0||(e=window.event,e=e===void 0?16:sz(e.type)),e):1}function Vo(e,t,r,n){if(50<Sg)throw Sg=0,yT=null,Error(ot(185));Vx(e,r,n),(!(Br&2)||e!==_a)&&(e===_a&&(!(Br&2)&&(FS|=r),la===4&&iu(e,Ma)),Qs(e,n),r===1&&Br===0&&!(t.mode&1)&&(Ym=Wn()+500,DS&&td()))}function Qs(e,t){var r=e.callbackNode;nie(e,t);var n=nw(e,e===_a?Ma:0);if(n===0)r!==null&&qI(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&qI(r),t===1)e.tag===0?roe(F$.bind(null,e)):jz(F$.bind(null,e)),Jie(function(){!(Br&6)&&td()}),r=null;else{switch(QU(n)){case 1:r=iR;break;case 4:r=YU;break;case 16:r=rw;break;case 536870912:r=ZU;break;default:r=rw}r=_W(r,pW.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function pW(e,t){if($1=-1,F1=0,Br&6)throw Error(ot(327));var r=e.callbackNode;if(cm()&&e.callbackNode!==r)return null;var n=nw(e,e===_a?Ma:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ww(e,n);else{t=n;var a=Br;Br|=2;var s=vW();(_a!==e||Ma!==t)&&(ql=null,Ym=Wn()+500,Zd(e,t));do try{Soe();break}catch(l){gW(e,l)}while(!0);yR(),xw.current=s,Br=a,ea!==null?t=0:(_a=null,Ma=0,t=la)}if(t!==0){if(t===2&&(a=qk(e),a!==0&&(n=a,t=bT(e,a))),t===1)throw r=pv,Zd(e,0),iu(e,n),Qs(e,Wn()),r;if(t===6)iu(e,n);else{if(a=e.current.alternate,!(n&30)&&!woe(a)&&(t=ww(e,n),t===2&&(s=qk(e),s!==0&&(n=s,t=bT(e,s))),t===1))throw r=pv,Zd(e,0),iu(e,n),Qs(e,Wn()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ot(345));case 2:jd(e,Hs,ql);break;case 3:if(iu(e,n),(n&130023424)===n&&(t=DR+500-Wn(),10<t)){if(nw(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Ns(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=eT(jd.bind(null,e,Hs,ql),t);break}jd(e,Hs,ql);break;case 4:if(iu(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Wo(n);s=1<<o,o=t[o],o>a&&(a=o),n&=~s}if(n=a,n=Wn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*boe(n/1960))-n,10<n){e.timeoutHandle=eT(jd.bind(null,e,Hs,ql),n);break}jd(e,Hs,ql);break;case 5:jd(e,Hs,ql);break;default:throw Error(ot(329))}}}return Qs(e,Wn()),e.callbackNode===r?pW.bind(null,e):null}function bT(e,t){var r=_g;return e.current.memoizedState.isDehydrated&&(Zd(e,t).flags|=256),e=ww(e,t),e!==2&&(t=Hs,Hs=r,t!==null&&wT(t)),e}function wT(e){Hs===null?Hs=e:Hs.push.apply(Hs,e)}function woe(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!Zo(s(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function iu(e,t){for(t&=~RR,t&=~FS,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Wo(t),n=1<<r;e[r]=-1,t&=~n}}function F$(e){if(Br&6)throw Error(ot(327));cm();var t=nw(e,0);if(!(t&1))return Qs(e,Wn()),null;var r=ww(e,t);if(e.tag!==0&&r===2){var n=qk(e);n!==0&&(t=n,r=bT(e,n))}if(r===1)throw r=pv,Zd(e,0),iu(e,t),Qs(e,Wn()),r;if(r===6)throw Error(ot(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jd(e,Hs,ql),Qs(e,Wn()),null}function MR(e,t){var r=Br;Br|=1;try{return e(t)}finally{Br=r,Br===0&&(Ym=Wn()+500,DS&&td())}}function hf(e){xu!==null&&xu.tag===0&&!(Br&6)&&cm();var t=Br;Br|=1;var r=Qi.transition,n=Jr;try{if(Qi.transition=null,Jr=1,e)return e()}finally{Jr=n,Qi.transition=r,Br=t,!(Br&6)&&td()}}function IR(){di=Xh.current,vn(Xh)}function Zd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Zie(r)),ea!==null)for(r=ea.return;r!==null;){var n=r;switch(gR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&lw();break;case 3:Km(),vn(Zs),vn(os),ER();break;case 5:jR(n);break;case 4:Km();break;case 13:vn(kn);break;case 19:vn(kn);break;case 10:bR(n.type._context);break;case 22:case 23:IR()}r=r.return}if(_a=e,ea=e=Au(e.current,null),Ma=di=t,la=0,pv=null,RR=FS=ff=0,Hs=_g=null,Fd!==null){for(t=0;t<Fd.length;t++)if(r=Fd[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=a,n.next=o}r.pending=n}Fd=null}return e}function gW(e,t){do{var r=ea;try{if(yR(),D1.current=vw,gw){for(var n=Tn.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}gw=!1}if(df=0,ya=oa=Tn=null,bg=!1,fv=0,OR.current=null,r===null||r.return===null){la=1,pv=t,ea=null;break}e:{var s=e,o=r.return,l=r,c=t;if(t=Ma,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=E$(o);if(p!==null){p.flags&=-257,N$(p,o,l,s,t),p.mode&1&&j$(s,u,t),t=p,c=u;var v=t.updateQueue;if(v===null){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}else{if(!(t&1)){j$(s,u,t),$R();break e}c=Error(ot(426))}}else if(_n&&l.mode&1){var g=E$(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),N$(g,o,l,s,t),vR(Xm(c,l));break e}}s=c=Xm(c,l),la!==4&&(la=2),_g===null?_g=[s]:_g.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var b=Qz(s,c,t);x$(s,b);break e;case 1:l=c;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ku===null||!ku.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var _=eW(s,l,t);x$(s,_);break e}}s=s.return}while(s!==null)}yW(r)}catch(S){t=S,ea===r&&r!==null&&(ea=r=r.return);continue}break}while(!0)}function vW(){var e=xw.current;return xw.current=vw,e===null?vw:e}function $R(){(la===0||la===3||la===2)&&(la=4),_a===null||!(ff&268435455)&&!(FS&268435455)||iu(_a,Ma)}function ww(e,t){var r=Br;Br|=2;var n=vW();(_a!==e||Ma!==t)&&(ql=null,Zd(e,t));do try{_oe();break}catch(a){gW(e,a)}while(!0);if(yR(),Br=r,xw.current=n,ea!==null)throw Error(ot(261));return _a=null,Ma=0,la}function _oe(){for(;ea!==null;)xW(ea)}function Soe(){for(;ea!==null&&!Kse();)xW(ea)}function xW(e){var t=wW(e.alternate,e,di);e.memoizedProps=e.pendingProps,t===null?yW(e):ea=t,OR.current=null}function yW(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=goe(r,t),r!==null){r.flags&=32767,ea=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{la=6,ea=null;return}}else if(r=poe(r,t,di),r!==null){ea=r;return}if(t=t.sibling,t!==null){ea=t;return}ea=t=e}while(t!==null);la===0&&(la=5)}function jd(e,t,r){var n=Jr,a=Qi.transition;try{Qi.transition=null,Jr=1,joe(e,t,r,n)}finally{Qi.transition=a,Jr=n}return null}function joe(e,t,r,n){do cm();while(xu!==null);if(Br&6)throw Error(ot(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ot(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(aie(e,s),e===_a&&(ea=_a=null,Ma=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||hb||(hb=!0,_W(rw,function(){return cm(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Qi.transition,Qi.transition=null;var o=Jr;Jr=1;var l=Br;Br|=4,OR.current=null,xoe(e,r),hW(r,e),Vie(Jk),aw=!!Zk,Jk=Zk=null,e.current=r,yoe(r),Xse(),Br=l,Jr=o,Qi.transition=s}else e.current=r;if(hb&&(hb=!1,xu=e,bw=a),s=e.pendingLanes,s===0&&(ku=null),Jse(r.stateNode),Qs(e,Wn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(yw)throw yw=!1,e=xT,xT=null,e;return bw&1&&e.tag!==0&&cm(),s=e.pendingLanes,s&1?e===yT?Sg++:(Sg=0,yT=e):Sg=0,td(),null}function cm(){if(xu!==null){var e=QU(bw),t=Qi.transition,r=Jr;try{if(Qi.transition=null,Jr=16>e?16:e,xu===null)var n=!1;else{if(e=xu,xu=null,bw=0,Br&6)throw Error(ot(331));var a=Br;for(Br|=4,Nt=e.current;Nt!==null;){var s=Nt,o=s.child;if(Nt.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Nt=u;Nt!==null;){var d=Nt;switch(d.tag){case 0:case 11:case 15:wg(8,d,s)}var f=d.child;if(f!==null)f.return=d,Nt=f;else for(;Nt!==null;){d=Nt;var h=d.sibling,p=d.return;if(uW(d),d===u){Nt=null;break}if(h!==null){h.return=p,Nt=h;break}Nt=p}}}var v=s.alternate;if(v!==null){var m=v.child;if(m!==null){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Nt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Nt=o;else e:for(;Nt!==null;){if(s=Nt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wg(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,Nt=b;break e}Nt=s.return}}var y=e.current;for(Nt=y;Nt!==null;){o=Nt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Nt=w;else e:for(o=y;Nt!==null;){if(l=Nt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$S(9,l)}}catch(S){In(l,l.return,S)}if(l===o){Nt=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Nt=_;break e}Nt=l.return}}if(Br=a,td(),_l&&typeof _l.onPostCommitFiberRoot=="function")try{_l.onPostCommitFiberRoot(TS,e)}catch{}n=!0}return n}finally{Jr=r,Qi.transition=t}}return!1}function L$(e,t,r){t=Xm(r,t),t=Qz(e,t,1),e=Cu(e,t,1),t=Ns(),e!==null&&(Vx(e,1,t),Qs(e,t))}function In(e,t,r){if(e.tag===3)L$(e,e,r);else for(;t!==null;){if(t.tag===3){L$(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ku===null||!ku.has(n))){e=Xm(r,e),e=eW(t,e,1),t=Cu(t,e,1),e=Ns(),t!==null&&(Vx(t,1,e),Qs(t,e));break}}t=t.return}}function Eoe(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ns(),e.pingedLanes|=e.suspendedLanes&r,_a===e&&(Ma&r)===r&&(la===4||la===3&&(Ma&130023424)===Ma&&500>Wn()-DR?Zd(e,0):RR|=r),Qs(e,t)}function bW(e,t){t===0&&(e.mode&1?(t=nb,nb<<=1,!(nb&130023424)&&(nb=4194304)):t=1);var r=Ns();e=yc(e,t),e!==null&&(Vx(e,t,r),Qs(e,r))}function Noe(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),bW(e,r)}function Coe(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ot(314))}n!==null&&n.delete(t),bW(e,r)}var wW;wW=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Zs.current)Xs=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Xs=!1,moe(e,t,r);Xs=!!(e.flags&131072)}else Xs=!1,_n&&t.flags&1048576&&Ez(t,dw,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;I1(e,t),e=t.pendingProps;var a=Hm(t,os.current);lm(t,r),a=CR(null,t,n,e,a,r);var s=kR();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Js(n)?(s=!0,cw(t)):s=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,_R(t),a.updater=IS,t.stateNode=a,a._reactInternals=t,oT(t,n,e,r),t=uT(null,t,n,!0,s,r)):(t.tag=0,_n&&s&&pR(t),gs(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(I1(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Toe(n),e=jo(n,e),a){case 0:t=cT(null,t,n,e,r);break e;case 1:t=T$(null,t,n,e,r);break e;case 11:t=C$(null,t,n,e,r);break e;case 14:t=k$(null,t,n,jo(n.type,e),r);break e}throw Error(ot(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:jo(n,a),cT(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:jo(n,a),T$(e,t,n,a,r);case 3:e:{if(aW(t),e===null)throw Error(ot(387));n=t.pendingProps,s=t.memoizedState,a=s.element,Pz(e,t),mw(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){a=Xm(Error(ot(423)),t),t=A$(e,t,n,r,a);break e}else if(n!==a){a=Xm(Error(ot(424)),t),t=A$(e,t,n,r,a);break e}else for(bi=Nu(t.stateNode.containerInfo.firstChild),wi=t,_n=!0,Oo=null,r=Tz(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(qm(),n===a){t=bc(e,t,r);break e}gs(e,t,n,r)}t=t.child}return t;case 5:return Oz(t),e===null&&aT(t),n=t.type,a=t.pendingProps,s=e!==null?e.memoizedProps:null,o=a.children,Qk(n,a)?o=null:s!==null&&Qk(n,s)&&(t.flags|=32),nW(e,t),gs(e,t,o,r),t.child;case 6:return e===null&&aT(t),null;case 13:return sW(e,t,r);case 4:return SR(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Gm(t,null,n,r):gs(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:jo(n,a),C$(e,t,n,a,r);case 7:return gs(e,t,t.pendingProps,r),t.child;case 8:return gs(e,t,t.pendingProps.children,r),t.child;case 12:return gs(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,cn(fw,n._currentValue),n._currentValue=o,s!==null)if(Zo(s.value,o)){if(s.children===a.children&&!Zs.current){t=bc(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=cc(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),sT(s.return,r,t),l.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ot(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),sT(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}gs(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,lm(t,r),a=no(a),n=n(a),t.flags|=1,gs(e,t,n,r),t.child;case 14:return n=t.type,a=jo(n,t.pendingProps),a=jo(n.type,a),k$(e,t,n,a,r);case 15:return tW(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:jo(n,a),I1(e,t),t.tag=1,Js(n)?(e=!0,cw(t)):e=!1,lm(t,r),Jz(t,n,a),oT(t,n,a,r),uT(null,t,n,!0,e,r);case 19:return iW(e,t,r);case 22:return rW(e,t,r)}throw Error(ot(156,t.tag))};function _W(e,t){return XU(e,t)}function koe(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zi(e,t,r,n){return new koe(e,t,r,n)}function FR(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Toe(e){if(typeof e=="function")return FR(e)?1:0;if(e!=null){if(e=e.$$typeof,e===nR)return 11;if(e===aR)return 14}return 2}function Au(e,t){var r=e.alternate;return r===null?(r=Zi(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function L1(e,t,r,n,a,s){var o=2;if(n=e,typeof e=="function")FR(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Lh:return Jd(r.children,a,s,t);case rR:o=8,a|=8;break;case Pk:return e=Zi(12,r,t,a|2),e.elementType=Pk,e.lanes=s,e;case Ok:return e=Zi(13,r,t,a),e.elementType=Ok,e.lanes=s,e;case Rk:return e=Zi(19,r,t,a),e.elementType=Rk,e.lanes=s,e;case OU:return LS(r,a,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case AU:o=10;break e;case PU:o=9;break e;case nR:o=11;break e;case aR:o=14;break e;case eu:o=16,n=null;break e}throw Error(ot(130,e==null?e:typeof e,""))}return t=Zi(o,r,t,a),t.elementType=e,t.type=n,t.lanes=s,t}function Jd(e,t,r,n){return e=Zi(7,e,n,t),e.lanes=r,e}function LS(e,t,r,n){return e=Zi(22,e,n,t),e.elementType=OU,e.lanes=r,e.stateNode={isHidden:!1},e}function RE(e,t,r){return e=Zi(6,e,null,t),e.lanes=r,e}function DE(e,t,r){return t=Zi(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Aoe(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mE(0),this.expirationTimes=mE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mE(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function LR(e,t,r,n,a,s,o,l,c){return e=new Aoe(e,t,r,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Zi(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},_R(s),e}function Poe(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fh,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function SW(e){if(!e)return Lu;e=e._reactInternals;e:{if(qf(e)!==e||e.tag!==1)throw Error(ot(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Js(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ot(171))}if(e.tag===1){var r=e.type;if(Js(r))return Sz(e,r,t)}return t}function jW(e,t,r,n,a,s,o,l,c){return e=LR(r,n,!0,e,a,s,o,l,c),e.context=SW(null),r=e.current,n=Ns(),a=Tu(r),s=cc(n,a),s.callback=t??null,Cu(r,s,a),e.current.lanes=a,Vx(e,a,n),Qs(e,n),e}function BS(e,t,r,n){var a=t.current,s=Ns(),o=Tu(a);return r=SW(r),t.context===null?t.context=r:t.pendingContext=r,t=cc(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Cu(a,t,o),e!==null&&(Vo(e,a,o,s),R1(e,a,o)),o}function _w(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function B$(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function BR(e,t){B$(e,t),(e=e.alternate)&&B$(e,t)}function Ooe(){return null}var EW=typeof reportError=="function"?reportError:function(e){console.error(e)};function UR(e){this._internalRoot=e}US.prototype.render=UR.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ot(409));BS(e,t,null,null)};US.prototype.unmount=UR.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hf(function(){BS(null,e,null,null)}),t[xc]=null}};function US(e){this._internalRoot=e}US.prototype.unstable_scheduleHydration=function(e){if(e){var t=rz();e={blockedOn:null,target:e,priority:t};for(var r=0;r<su.length&&t!==0&&t<su[r].priority;r++);su.splice(r,0,e),r===0&&az(e)}};function zR(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function zS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function U$(){}function Roe(e,t,r,n,a){if(a){if(typeof n=="function"){var s=n;n=function(){var u=_w(o);s.call(u)}}var o=jW(t,n,e,0,null,!1,!1,"",U$);return e._reactRootContainer=o,e[xc]=o.current,ov(e.nodeType===8?e.parentNode:e),hf(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=_w(c);l.call(u)}}var c=LR(e,0,!1,null,null,!1,!1,"",U$);return e._reactRootContainer=c,e[xc]=c.current,ov(e.nodeType===8?e.parentNode:e),hf(function(){BS(t,c,r,n)}),c}function WS(e,t,r,n,a){var s=r._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=_w(o);l.call(c)}}BS(t,o,e,a)}else o=Roe(r,t,e,a,n);return _w(o)}ez=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Q0(t.pendingLanes);r!==0&&(oR(t,r|1),Qs(t,Wn()),!(Br&6)&&(Ym=Wn()+500,td()))}break;case 13:hf(function(){var n=yc(e,1);if(n!==null){var a=Ns();Vo(n,e,1,a)}}),BR(e,1)}};lR=function(e){if(e.tag===13){var t=yc(e,134217728);if(t!==null){var r=Ns();Vo(t,e,134217728,r)}BR(e,134217728)}};tz=function(e){if(e.tag===13){var t=Tu(e),r=yc(e,t);if(r!==null){var n=Ns();Vo(r,e,t,n)}BR(e,t)}};rz=function(){return Jr};nz=function(e,t){var r=Jr;try{return Jr=e,t()}finally{Jr=r}};Wk=function(e,t,r){switch(t){case"input":if(Ik(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=RS(n);if(!a)throw Error(ot(90));DU(n),Ik(n,a)}}}break;case"textarea":IU(e,r);break;case"select":t=r.value,t!=null&&am(e,!!r.multiple,t,!1)}};WU=MR;VU=hf;var Doe={usingClientEntryPoint:!1,Events:[qx,Wh,RS,UU,zU,MR]},k0={findFiberByHostInstance:$d,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Moe={bundleType:k0.bundleType,version:k0.version,rendererPackageName:k0.rendererPackageName,rendererConfig:k0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ac.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=GU(e),e===null?null:e.stateNode},findFiberByHostInstance:k0.findFiberByHostInstance||Ooe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mb.isDisabled&&mb.supportsFiber)try{TS=mb.inject(Moe),_l=mb}catch{}}Mi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Doe;Mi.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zR(t))throw Error(ot(200));return Poe(e,t,null,r)};Mi.createRoot=function(e,t){if(!zR(e))throw Error(ot(299));var r=!1,n="",a=EW;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=LR(e,1,!1,null,null,r,!1,n,a),e[xc]=t.current,ov(e.nodeType===8?e.parentNode:e),new UR(t)};Mi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ot(188)):(e=Object.keys(e).join(","),Error(ot(268,e)));return e=GU(t),e=e===null?null:e.stateNode,e};Mi.flushSync=function(e){return hf(e)};Mi.hydrate=function(e,t,r){if(!zS(t))throw Error(ot(200));return WS(null,e,t,!0,r)};Mi.hydrateRoot=function(e,t,r){if(!zR(e))throw Error(ot(405));var n=r!=null&&r.hydratedSources||null,a=!1,s="",o=EW;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=jW(t,null,e,1,r??null,a,!1,s,o),e[xc]=t.current,ov(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new US(t)};Mi.render=function(e,t,r){if(!zS(t))throw Error(ot(200));return WS(null,e,t,!1,r)};Mi.unmountComponentAtNode=function(e){if(!zS(e))throw Error(ot(40));return e._reactRootContainer?(hf(function(){WS(null,null,e,!1,function(){e._reactRootContainer=null,e[xc]=null})}),!0):!1};Mi.unstable_batchedUpdates=MR;Mi.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!zS(r))throw Error(ot(200));if(e==null||e._reactInternals===void 0)throw Error(ot(38));return WS(e,t,r,!1,n)};Mi.version="18.3.1-next-f1338f8080-20240426";function NW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NW)}catch(e){console.error(e)}}NW(),NU.exports=Mi;var oo=NU.exports;const VS=zr(oo);var CW,z$=oo;CW=z$.createRoot,z$.hydrateRoot;var HS=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},qS=typeof window>"u"||"Deno"in globalThis;function Eo(){}function Ioe(e,t){return typeof e=="function"?e(t):e}function $oe(e){return typeof e=="number"&&e>=0&&e!==1/0}function Foe(e,t){return Math.max(e+(t||0)-Date.now(),0)}function W$(e,t){return typeof e=="function"?e(t):e}function Loe(e,t){return typeof e=="function"?e(t):e}function V$(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:s,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==WR(o,t.options))return!1}else if(!vv(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||s&&!s(t))}function H$(e,t){const{exact:r,status:n,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(gv(t.options.mutationKey)!==gv(s))return!1}else if(!vv(t.options.mutationKey,s))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function WR(e,t){return((t==null?void 0:t.queryKeyHashFn)||gv)(e)}function gv(e){return JSON.stringify(e,(t,r)=>_T(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function vv(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>vv(e[r],t[r])):!1}function kW(e,t){if(e===t)return e;const r=q$(e)&&q$(t);if(r||_T(e)&&_T(t)){const n=r?e:Object.keys(e),a=n.length,s=r?t:Object.keys(t),o=s.length,l=r?[]:{};let c=0;for(let u=0;u<o;u++){const d=r?u:s[u];(!r&&n.includes(d)||r)&&e[d]===void 0&&t[d]===void 0?(l[d]=void 0,c++):(l[d]=kW(e[d],t[d]),l[d]===e[d]&&e[d]!==void 0&&c++)}return a===o&&c===a?e:l}return t}function q$(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function _T(e){if(!G$(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!G$(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function G$(e){return Object.prototype.toString.call(e)==="[object Object]"}function Boe(e){return new Promise(t=>{setTimeout(t,e)})}function Uoe(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?kW(e,t):t}function zoe(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Woe(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var VR=Symbol();function TW(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===VR?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var qd,fu,Mm,iU,Voe=(iU=class extends HS{constructor(){super();Vr(this,qd);Vr(this,fu);Vr(this,Mm);sr(this,Mm,t=>{if(!qS&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){He(this,fu)||this.setEventListener(He(this,Mm))}onUnsubscribe(){var t;this.hasListeners()||((t=He(this,fu))==null||t.call(this),sr(this,fu,void 0))}setEventListener(t){var r;sr(this,Mm,t),(r=He(this,fu))==null||r.call(this),sr(this,fu,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){He(this,qd)!==t&&(sr(this,qd,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof He(this,qd)=="boolean"?He(this,qd):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},qd=new WeakMap,fu=new WeakMap,Mm=new WeakMap,iU),AW=new Voe,Im,hu,$m,oU,Hoe=(oU=class extends HS{constructor(){super();Vr(this,Im,!0);Vr(this,hu);Vr(this,$m);sr(this,$m,t=>{if(!qS&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){He(this,hu)||this.setEventListener(He(this,$m))}onUnsubscribe(){var t;this.hasListeners()||((t=He(this,hu))==null||t.call(this),sr(this,hu,void 0))}setEventListener(t){var r;sr(this,$m,t),(r=He(this,hu))==null||r.call(this),sr(this,hu,t(this.setOnline.bind(this)))}setOnline(t){He(this,Im)!==t&&(sr(this,Im,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return He(this,Im)}},Im=new WeakMap,hu=new WeakMap,$m=new WeakMap,oU),Sw=new Hoe;function qoe(){let e,t;const r=new Promise((a,s)=>{e=a,t=s});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function Goe(e){return Math.min(1e3*2**e,3e4)}function PW(e){return(e??"online")==="online"?Sw.isOnline():!0}var OW=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ME(e){return e instanceof OW}function RW(e){let t=!1,r=0,n=!1,a;const s=qoe(),o=m=>{var g;n||(h(new OW(m)),(g=e.abort)==null||g.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>AW.isFocused()&&(e.networkMode==="always"||Sw.isOnline())&&e.canRun(),d=()=>PW(e.networkMode)&&e.canRun(),f=m=>{var g;n||(n=!0,(g=e.onSuccess)==null||g.call(e,m),a==null||a(),s.resolve(m))},h=m=>{var g;n||(n=!0,(g=e.onError)==null||g.call(e,m),a==null||a(),s.reject(m))},p=()=>new Promise(m=>{var g;a=b=>{(n||u())&&m(b)},(g=e.onPause)==null||g.call(e)}).then(()=>{var m;a=void 0,n||(m=e.onContinue)==null||m.call(e)}),v=()=>{if(n)return;let m;const g=r===0?e.initialPromise:void 0;try{m=g??e.fn()}catch(b){m=Promise.reject(b)}Promise.resolve(m).then(f).catch(b=>{var E;if(n)return;const y=e.retry??(qS?0:3),w=e.retryDelay??Goe,_=typeof w=="function"?w(r,b):w,S=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,b);if(t||!S){h(b);return}r++,(E=e.onFail)==null||E.call(e,r,b),Boe(_).then(()=>u()?void 0:p()).then(()=>{t?h(b):v()})})};return{promise:s,cancel:o,continue:()=>(a==null||a(),s),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():p().then(v),s)}}var Koe=e=>setTimeout(e,0);function Xoe(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=Koe;const s=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var bs=Xoe(),Gd,lU,DW=(lU=class{constructor(){Vr(this,Gd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$oe(this.gcTime)&&sr(this,Gd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(qS?1/0:5*60*1e3))}clearGcTimeout(){He(this,Gd)&&(clearTimeout(He(this,Gd)),sr(this,Gd,void 0))}},Gd=new WeakMap,lU),Fm,Lm,qi,Kd,Ka,Ux,Xd,Co,Vl,cU,Yoe=(cU=class extends DW{constructor(t){super();Vr(this,Co);Vr(this,Fm);Vr(this,Lm);Vr(this,qi);Vr(this,Kd);Vr(this,Ka);Vr(this,Ux);Vr(this,Xd);sr(this,Xd,!1),sr(this,Ux,t.defaultOptions),this.setOptions(t.options),this.observers=[],sr(this,Kd,t.client),sr(this,qi,He(this,Kd).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,sr(this,Fm,Joe(this.options)),this.state=t.state??He(this,Fm),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=He(this,Ka))==null?void 0:t.promise}setOptions(t){this.options={...He(this,Ux),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&He(this,qi).remove(this)}setData(t,r){const n=Uoe(this.state.data,t,this.options);return Wa(this,Co,Vl).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Wa(this,Co,Vl).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=He(this,Ka))==null?void 0:n.promise;return(a=He(this,Ka))==null||a.cancel(t),r?r.then(Eo).catch(Eo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(He(this,Fm))}isActive(){return this.observers.some(t=>Loe(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===VR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!Foe(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=He(this,Ka))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=He(this,Ka))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),He(this,qi).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(He(this,Ka)&&(He(this,Xd)?He(this,Ka).cancel({revert:!0}):He(this,Ka).cancelRetry()),this.scheduleGc()),He(this,qi).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Wa(this,Co,Vl).call(this,{type:"invalidate"})}fetch(t,r){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(He(this,Ka))return He(this,Ka).continueRetry(),He(this,Ka).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,a=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(sr(this,Xd,!0),n.signal)})},s=()=>{const f=TW(this.options,r),h={client:He(this,Kd),queryKey:this.queryKey,meta:this.meta};return a(h),sr(this,Xd,!1),this.options.persister?this.options.persister(f,h,this):f(h)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:He(this,Kd),state:this.state,fetchFn:s};a(o),(c=this.options.behavior)==null||c.onFetch(o,this),sr(this,Lm,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&Wa(this,Co,Vl).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const l=f=>{var h,p,v,m;ME(f)&&f.silent||Wa(this,Co,Vl).call(this,{type:"error",error:f}),ME(f)||((p=(h=He(this,qi).config).onError)==null||p.call(h,f,this),(m=(v=He(this,qi).config).onSettled)==null||m.call(v,this.state.data,f,this)),this.scheduleGc()};return sr(this,Ka,RW({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var h,p,v,m;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(g){l(g);return}(p=(h=He(this,qi).config).onSuccess)==null||p.call(h,f,this),(m=(v=He(this,qi).config).onSettled)==null||m.call(v,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,h)=>{Wa(this,Co,Vl).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{Wa(this,Co,Vl).call(this,{type:"pause"})},onContinue:()=>{Wa(this,Co,Vl).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),He(this,Ka).start()}},Fm=new WeakMap,Lm=new WeakMap,qi=new WeakMap,Kd=new WeakMap,Ka=new WeakMap,Ux=new WeakMap,Xd=new WeakMap,Co=new WeakSet,Vl=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Zoe(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return ME(a)&&a.revert&&He(this,Lm)?{...He(this,Lm),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),bs.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),He(this,qi).notify({query:this,type:"updated",action:t})})},cU);function Zoe(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:PW(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Joe(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ml,uU,Qoe=(uU=class extends HS{constructor(t={}){super();Vr(this,ml);this.config=t,sr(this,ml,new Map)}build(t,r,n){const a=r.queryKey,s=r.queryHash??WR(a,r);let o=this.get(s);return o||(o=new Yoe({client:t,queryKey:a,queryHash:s,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){He(this,ml).has(t.queryHash)||(He(this,ml).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=He(this,ml).get(t.queryHash);r&&(t.destroy(),r===t&&He(this,ml).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){bs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return He(this,ml).get(t)}getAll(){return[...He(this,ml).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>V$(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>V$(t,n)):r}notify(t){bs.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){bs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){bs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ml=new WeakMap,uU),pl,ps,Yd,gl,Gc,dU,ele=(dU=class extends DW{constructor(t){super();Vr(this,gl);Vr(this,pl);Vr(this,ps);Vr(this,Yd);this.mutationId=t.mutationId,sr(this,ps,t.mutationCache),sr(this,pl,[]),this.state=t.state||tle(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){He(this,pl).includes(t)||(He(this,pl).push(t),this.clearGcTimeout(),He(this,ps).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){sr(this,pl,He(this,pl).filter(r=>r!==t)),this.scheduleGc(),He(this,ps).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){He(this,pl).length||(this.state.status==="pending"?this.scheduleGc():He(this,ps).remove(this))}continue(){var t;return((t=He(this,Yd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,l,c,u,d,f,h,p,v,m,g,b,y,w,_,S,E,j,N;const r=()=>{Wa(this,gl,Gc).call(this,{type:"continue"})};sr(this,Yd,RW({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,C)=>{Wa(this,gl,Gc).call(this,{type:"failed",failureCount:k,error:C})},onPause:()=>{Wa(this,gl,Gc).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>He(this,ps).canRun(this)}));const n=this.state.status==="pending",a=!He(this,Yd).canStart();try{if(n)r();else{Wa(this,gl,Gc).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(s=He(this,ps).config).onMutate)==null?void 0:o.call(s,t,this));const C=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));C!==this.state.context&&Wa(this,gl,Gc).call(this,{type:"pending",context:C,variables:t,isPaused:a})}const k=await He(this,Yd).start();return await((d=(u=He(this,ps).config).onSuccess)==null?void 0:d.call(u,k,t,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,k,t,this.state.context)),await((v=(p=He(this,ps).config).onSettled)==null?void 0:v.call(p,k,null,this.state.variables,this.state.context,this)),await((g=(m=this.options).onSettled)==null?void 0:g.call(m,k,null,t,this.state.context)),Wa(this,gl,Gc).call(this,{type:"success",data:k}),k}catch(k){try{throw await((y=(b=He(this,ps).config).onError)==null?void 0:y.call(b,k,t,this.state.context,this)),await((_=(w=this.options).onError)==null?void 0:_.call(w,k,t,this.state.context)),await((E=(S=He(this,ps).config).onSettled)==null?void 0:E.call(S,void 0,k,this.state.variables,this.state.context,this)),await((N=(j=this.options).onSettled)==null?void 0:N.call(j,void 0,k,t,this.state.context)),k}finally{Wa(this,gl,Gc).call(this,{type:"error",error:k})}}finally{He(this,ps).runNext(this)}}},pl=new WeakMap,ps=new WeakMap,Yd=new WeakMap,gl=new WeakSet,Gc=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),bs.batch(()=>{He(this,pl).forEach(n=>{n.onMutationUpdate(t)}),He(this,ps).notify({mutation:this,type:"updated",action:t})})},dU);function tle(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Jl,ko,zx,fU,rle=(fU=class extends HS{constructor(t={}){super();Vr(this,Jl);Vr(this,ko);Vr(this,zx);this.config=t,sr(this,Jl,new Set),sr(this,ko,new Map),sr(this,zx,0)}build(t,r,n){const a=new ele({mutationCache:this,mutationId:++Zy(this,zx)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){He(this,Jl).add(t);const r=pb(t);if(typeof r=="string"){const n=He(this,ko).get(r);n?n.push(t):He(this,ko).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(He(this,Jl).delete(t)){const r=pb(t);if(typeof r=="string"){const n=He(this,ko).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&He(this,ko).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=pb(t);if(typeof r=="string"){const n=He(this,ko).get(r),a=n==null?void 0:n.find(s=>s.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=pb(t);if(typeof r=="string"){const a=(n=He(this,ko).get(r))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){bs.batch(()=>{He(this,Jl).forEach(t=>{this.notify({type:"removed",mutation:t})}),He(this,Jl).clear(),He(this,ko).clear()})}getAll(){return Array.from(He(this,Jl))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>H$(r,n))}findAll(t={}){return this.getAll().filter(r=>H$(t,r))}notify(t){bs.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return bs.batch(()=>Promise.all(t.map(r=>r.continue().catch(Eo))))}},Jl=new WeakMap,ko=new WeakMap,zx=new WeakMap,fU);function pb(e){var t;return(t=e.options.scope)==null?void 0:t.id}function K$(e){return{onFetch:(t,r)=>{var d,f,h,p,v;const n=t.options,a=(h=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,s=((p=t.state.data)==null?void 0:p.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let m=!1;const g=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},b=TW(t.options,t.fetchOptions),y=async(w,_,S)=>{if(m)return Promise.reject();if(_==null&&w.pages.length)return Promise.resolve(w);const E={client:t.client,queryKey:t.queryKey,pageParam:_,direction:S?"backward":"forward",meta:t.options.meta};g(E);const j=await b(E),{maxPages:N}=t.options,k=S?Woe:zoe;return{pages:k(w.pages,j,N),pageParams:k(w.pageParams,_,N)}};if(a&&s.length){const w=a==="backward",_=w?nle:X$,S={pages:s,pageParams:o},E=_(n,S);l=await y(S,E,w)}else{const w=e??s.length;do{const _=c===0?o[0]??n.initialPageParam:X$(n,l);if(c>0&&_==null)break;l=await y(l,_),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var m,g;return(g=(m=t.options).persister)==null?void 0:g.call(m,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function X$(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function nle(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Dn,mu,pu,Bm,Um,gu,zm,Wm,hU,ale=(hU=class{constructor(e={}){Vr(this,Dn);Vr(this,mu);Vr(this,pu);Vr(this,Bm);Vr(this,Um);Vr(this,gu);Vr(this,zm);Vr(this,Wm);sr(this,Dn,e.queryCache||new Qoe),sr(this,mu,e.mutationCache||new rle),sr(this,pu,e.defaultOptions||{}),sr(this,Bm,new Map),sr(this,Um,new Map),sr(this,gu,0)}mount(){Zy(this,gu)._++,He(this,gu)===1&&(sr(this,zm,AW.subscribe(async e=>{e&&(await this.resumePausedMutations(),He(this,Dn).onFocus())})),sr(this,Wm,Sw.subscribe(async e=>{e&&(await this.resumePausedMutations(),He(this,Dn).onOnline())})))}unmount(){var e,t;Zy(this,gu)._--,He(this,gu)===0&&((e=He(this,zm))==null||e.call(this),sr(this,zm,void 0),(t=He(this,Wm))==null||t.call(this),sr(this,Wm,void 0))}isFetching(e){return He(this,Dn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return He(this,mu).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=He(this,Dn).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=He(this,Dn).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(W$(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return He(this,Dn).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=He(this,Dn).get(n.queryHash),s=a==null?void 0:a.state.data,o=Ioe(t,s);if(o!==void 0)return He(this,Dn).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return bs.batch(()=>He(this,Dn).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=He(this,Dn).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=He(this,Dn);bs.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=He(this,Dn);return bs.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=bs.batch(()=>He(this,Dn).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Eo).catch(Eo)}invalidateQueries(e,t={}){return bs.batch(()=>(He(this,Dn).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=bs.batch(()=>He(this,Dn).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let s=a.fetch(void 0,r);return r.throwOnError||(s=s.catch(Eo)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(Eo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=He(this,Dn).build(this,t);return r.isStaleByTime(W$(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Eo).catch(Eo)}fetchInfiniteQuery(e){return e.behavior=K$(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Eo).catch(Eo)}ensureInfiniteQueryData(e){return e.behavior=K$(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Sw.isOnline()?He(this,mu).resumePausedMutations():Promise.resolve()}getQueryCache(){return He(this,Dn)}getMutationCache(){return He(this,mu)}getDefaultOptions(){return He(this,pu)}setDefaultOptions(e){sr(this,pu,e)}setQueryDefaults(e,t){He(this,Bm).set(gv(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...He(this,Bm).values()],r={};return t.forEach(n=>{vv(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){He(this,Um).set(gv(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...He(this,Um).values()],r={};return t.forEach(n=>{vv(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...He(this,pu).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=WR(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===VR&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...He(this,pu).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){He(this,Dn).clear(),He(this,mu).clear()}},Dn=new WeakMap,mu=new WeakMap,pu=new WeakMap,Bm=new WeakMap,Um=new WeakMap,gu=new WeakMap,zm=new WeakMap,Wm=new WeakMap,hU),sle=x.createContext(void 0),ile=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(sle.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xv(){return xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xv.apply(this,arguments)}var yu;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(yu||(yu={}));const Y$="popstate";function ole(e){e===void 0&&(e={});function t(n,a){let{pathname:s,search:o,hash:l}=n.location;return ST("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:jw(a)}return cle(t,r,null,e)}function qn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function MW(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function lle(){return Math.random().toString(36).substr(2,8)}function Z$(e,t){return{usr:e.state,key:e.key,idx:t}}function ST(e,t,r,n){return r===void 0&&(r=null),xv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Lp(t):t,{state:r,key:t&&t.key||n||lle()})}function jw(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Lp(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function cle(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:s=!1}=n,o=a.history,l=yu.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(xv({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=yu.Pop;let g=d(),b=g==null?null:g-u;u=g,c&&c({action:l,location:m.location,delta:b})}function h(g,b){l=yu.Push;let y=ST(m.location,g,b);u=d()+1;let w=Z$(y,u),_=m.createHref(y);try{o.pushState(w,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(_)}s&&c&&c({action:l,location:m.location,delta:1})}function p(g,b){l=yu.Replace;let y=ST(m.location,g,b);u=d();let w=Z$(y,u),_=m.createHref(y);o.replaceState(w,"",_),s&&c&&c({action:l,location:m.location,delta:0})}function v(g){let b=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof g=="string"?g:jw(g);return y=y.replace(/ $/,"%20"),qn(b,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,b)}let m={get action(){return l},get location(){return e(a,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Y$,f),c=g,()=>{a.removeEventListener(Y$,f),c=null}},createHref(g){return t(a,g)},createURL:v,encodeLocation(g){let b=v(g);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:p,go(g){return o.go(g)}};return m}var J$;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(J$||(J$={}));function ule(e,t,r){return r===void 0&&(r="/"),dle(e,t,r,!1)}function dle(e,t,r,n){let a=typeof t=="string"?Lp(t):t,s=HR(a.pathname||"/",r);if(s==null)return null;let o=IW(e);fle(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Sle(s);l=wle(o[c],u,n)}return l}function IW(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(qn(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Pu([n,c.relativePath]),d=r.concat(c);s.children&&s.children.length>0&&(qn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),IW(s.children,t,d,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:yle(u,s.index),routesMeta:d})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let c of $W(s.path))a(s,o,c)}),t}function $W(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let o=$W(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function fle(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ble(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const hle=/^:[\w-]+$/,mle=3,ple=2,gle=1,vle=10,xle=-2,Q$=e=>e==="*";function yle(e,t){let r=e.split("/"),n=r.length;return r.some(Q$)&&(n+=xle),t&&(n+=ple),r.filter(a=>!Q$(a)).reduce((a,s)=>a+(hle.test(s)?mle:s===""?gle:vle),n)}function ble(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function wle(e,t,r){let{routesMeta:n}=e,a={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?t:t.slice(s.length)||"/",f=e3({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=e3({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Pu([s,f.pathname]),pathnameBase:Cle(Pu([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=Pu([s,f.pathnameBase]))}return o}function e3(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=_le(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let m=l[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const v=l[f];return p&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function _le(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),MW(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Sle(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return MW(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function HR(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function jle(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Lp(e):e;return{pathname:r?r.startsWith("/")?r:Ele(r,t):t,search:kle(n),hash:Tle(a)}}function Ele(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function IE(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Nle(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function qR(e,t){let r=Nle(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function GR(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Lp(e):(a=xv({},e),qn(!a.pathname||!a.pathname.includes("?"),IE("?","pathname","search",a)),qn(!a.pathname||!a.pathname.includes("#"),IE("#","pathname","hash",a)),qn(!a.search||!a.search.includes("#"),IE("#","search","hash",a)));let s=e===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=jle(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Pu=e=>e.join("/").replace(/\/\/+/g,"/"),Cle=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kle=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Tle=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ale(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const FW=["post","put","patch","delete"];new Set(FW);const Ple=["get",...FW];new Set(Ple);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yv(){return yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yv.apply(this,arguments)}const KR=x.createContext(null),Ole=x.createContext(null),rd=x.createContext(null),GS=x.createContext(null),Pc=x.createContext({outlet:null,matches:[],isDataRoute:!1}),LW=x.createContext(null);function Rle(e,t){let{relative:r}=t===void 0?{}:t;Bp()||qn(!1);let{basename:n,navigator:a}=x.useContext(rd),{hash:s,pathname:o,search:l}=UW(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Pu([n,o])),a.createHref({pathname:c,search:l,hash:s})}function Bp(){return x.useContext(GS)!=null}function nd(){return Bp()||qn(!1),x.useContext(GS).location}function BW(e){x.useContext(rd).static||x.useLayoutEffect(e)}function Kn(){let{isDataRoute:e}=x.useContext(Pc);return e?Gle():Dle()}function Dle(){Bp()||qn(!1);let e=x.useContext(KR),{basename:t,future:r,navigator:n}=x.useContext(rd),{matches:a}=x.useContext(Pc),{pathname:s}=nd(),o=JSON.stringify(qR(a,r.v7_relativeSplatPath)),l=x.useRef(!1);return BW(()=>{l.current=!0}),x.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=GR(u,JSON.parse(o),s,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Pu([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,s,e])}function Mle(){let{matches:e}=x.useContext(Pc),t=e[e.length-1];return t?t.params:{}}function UW(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=x.useContext(rd),{matches:a}=x.useContext(Pc),{pathname:s}=nd(),o=JSON.stringify(qR(a,n.v7_relativeSplatPath));return x.useMemo(()=>GR(e,JSON.parse(o),s,r==="path"),[e,o,s,r])}function Ile(e,t){return $le(e,t)}function $le(e,t,r,n){Bp()||qn(!1);let{navigator:a}=x.useContext(rd),{matches:s}=x.useContext(Pc),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=nd(),d;if(t){var f;let g=typeof t=="string"?Lp(t):t;c==="/"||(f=g.pathname)!=null&&f.startsWith(c)||qn(!1),d=g}else d=u;let h=d.pathname||"/",p=h;if(c!=="/"){let g=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(g.length).join("/")}let v=ule(e,{pathname:p}),m=zle(v&&v.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:Pu([c,a.encodeLocation?a.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Pu([c,a.encodeLocation?a.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,r,n);return t&&m?x.createElement(GS.Provider,{value:{location:yv({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:yu.Pop}},m):m}function Fle(){let e=qle(),t=Ale(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),r?x.createElement("pre",{style:a},r):null,null)}const Lle=x.createElement(Fle,null);class Ble extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?x.createElement(Pc.Provider,{value:this.props.routeContext},x.createElement(LW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ule(e){let{routeContext:t,match:r,children:n}=e,a=x.useContext(KR);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(Pc.Provider,{value:t},n)}function zle(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var s;if(!r)return null;if(r.errors)e=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||qn(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:p}=r,v=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let p,v=!1,m=null,g=null;r&&(p=l&&f.route.id?l[f.route.id]:void 0,m=f.route.errorElement||Lle,c&&(u<0&&h===0?(v=!0,g=null):u===h&&(v=!0,g=f.route.hydrateFallbackElement||null)));let b=t.concat(o.slice(0,h+1)),y=()=>{let w;return p?w=m:v?w=g:f.route.Component?w=x.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,x.createElement(Ule,{match:f,routeContext:{outlet:d,matches:b,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?x.createElement(Ble,{location:r.location,revalidation:r.revalidation,component:m,error:p,children:y(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):y()},null)}var zW=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(zW||{}),Ew=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ew||{});function Wle(e){let t=x.useContext(KR);return t||qn(!1),t}function Vle(e){let t=x.useContext(Ole);return t||qn(!1),t}function Hle(e){let t=x.useContext(Pc);return t||qn(!1),t}function WW(e){let t=Hle(),r=t.matches[t.matches.length-1];return r.route.id||qn(!1),r.route.id}function qle(){var e;let t=x.useContext(LW),r=Vle(Ew.UseRouteError),n=WW(Ew.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Gle(){let{router:e}=Wle(zW.UseNavigateStable),t=WW(Ew.UseNavigateStable),r=x.useRef(!1);return BW(()=>{r.current=!0}),x.useCallback(function(a,s){s===void 0&&(s={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,yv({fromRouteId:t},s)))},[e,t])}function t3(e){let{to:t,replace:r,state:n,relative:a}=e;Bp()||qn(!1);let{future:s,static:o}=x.useContext(rd),{matches:l}=x.useContext(Pc),{pathname:c}=nd(),u=Kn(),d=GR(t,qR(l,s.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return x.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function On(e){qn(!1)}function Kle(e){let{basename:t="/",children:r=null,location:n,navigationType:a=yu.Pop,navigator:s,static:o=!1,future:l}=e;Bp()&&qn(!1);let c=t.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:c,navigator:s,static:o,future:yv({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof n=="string"&&(n=Lp(n));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:v="default"}=n,m=x.useMemo(()=>{let g=HR(d,c);return g==null?null:{location:{pathname:g,search:f,hash:h,state:p,key:v},navigationType:a}},[c,d,f,h,p,v,a]);return m==null?null:x.createElement(rd.Provider,{value:u},x.createElement(GS.Provider,{children:r,value:m}))}function Xle(e){let{children:t,location:r}=e;return Ile(jT(t),r)}new Promise(()=>{});function jT(e,t){t===void 0&&(t=[]);let r=[];return x.Children.forEach(e,(n,a)=>{if(!x.isValidElement(n))return;let s=[...t,a];if(n.type===x.Fragment){r.push.apply(r,jT(n.props.children,s));return}n.type!==On&&qn(!1),!n.props.index||!n.props.children||qn(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=jT(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ET(){return ET=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ET.apply(this,arguments)}function Yle(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Zle(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Jle(e,t){return e.button===0&&(!t||t==="_self")&&!Zle(e)}function Nw(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function Qle(e,t){let r=Nw(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(s=>{r.append(a,s)})}),r}const ece=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],tce="6";try{window.__reactRouterVersion=tce}catch{}const rce="startTransition",r3=Vf[rce];function nce(e){let{basename:t,children:r,future:n,window:a}=e,s=x.useRef();s.current==null&&(s.current=ole({window:a,v5Compat:!0}));let o=s.current,[l,c]=x.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=x.useCallback(f=>{u&&r3?r3(()=>c(f)):c(f)},[c,u]);return x.useLayoutEffect(()=>o.listen(d),[o,d]),x.createElement(Kle,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const ace=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,en=x.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=Yle(t,ece),{basename:p}=x.useContext(rd),v,m=!1;if(typeof u=="string"&&sce.test(u)&&(v=u,ace))try{let w=new URL(window.location.href),_=u.startsWith("//")?new URL(w.protocol+u):new URL(u),S=HR(_.pathname,p);_.origin===w.origin&&S!=null?u=S+_.search+_.hash:m=!0}catch{}let g=Rle(u,{relative:a}),b=ice(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function y(w){n&&n(w),w.defaultPrevented||b(w)}return x.createElement("a",ET({},h,{href:v||g,onClick:m||s?n:y,ref:r,target:c}))});var n3;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(n3||(n3={}));var a3;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(a3||(a3={}));function ice(e,t){let{target:r,replace:n,state:a,preventScrollReset:s,relative:o,viewTransition:l}=t===void 0?{}:t,c=Kn(),u=nd(),d=UW(e,{relative:o});return x.useCallback(f=>{if(Jle(f,r)){f.preventDefault();let h=n!==void 0?n:jw(u)===jw(d);c(e,{replace:h,state:a,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,d,n,a,r,e,s,o,l])}function XR(e){let t=x.useRef(Nw(e)),r=x.useRef(!1),n=nd(),a=x.useMemo(()=>Qle(n.search,r.current?null:t.current),[n.search]),s=Kn(),o=x.useCallback((l,c)=>{const u=Nw(typeof l=="function"?l(a):l);r.current=!0,s("?"+u,c)},[s,a]);return[a,o]}function At(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function oce(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function ad(...e){return t=>e.forEach(r=>oce(r,t))}function Pr(...e){return x.useCallback(ad(...e),e)}function lce(e,t){const r=x.createContext(t),n=s=>{const{children:o,...l}=s,c=x.useMemo(()=>l,Object.values(l));return i.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(s){const o=x.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[n,a]}function lo(e,t=[]){let r=[];function n(s,o){const l=x.createContext(o),c=r.length;r=[...r,o];const u=f=>{var b;const{scope:h,children:p,...v}=f,m=((b=h==null?void 0:h[e])==null?void 0:b[c])||l,g=x.useMemo(()=>v,Object.values(v));return i.jsx(m.Provider,{value:g,children:p})};u.displayName=s+"Provider";function d(f,h){var m;const p=((m=h==null?void 0:h[e])==null?void 0:m[c])||l,v=x.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[u,d]}const a=()=>{const s=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,cce(a,...t)]}function cce(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var VW=x.forwardRef((e,t)=>{const{children:r,...n}=e,a=x.Children.toArray(r),s=a.find(dce);if(s){const o=s.props.children,l=a.map(c=>c===s?x.Children.count(o)>1?x.Children.only(null):x.isValidElement(o)?o.props.children:null:c);return i.jsx(NT,{...n,ref:t,children:x.isValidElement(o)?x.cloneElement(o,void 0,l):null})}return i.jsx(NT,{...n,ref:t,children:r})});VW.displayName="Slot";var NT=x.forwardRef((e,t)=>{const{children:r,...n}=e;if(x.isValidElement(r)){const a=hce(r);return x.cloneElement(r,{...fce(n,r.props),ref:t?ad(t,a):a})}return x.Children.count(r)>1?x.Children.only(null):null});NT.displayName="SlotClone";var uce=({children:e})=>i.jsx(i.Fragment,{children:e});function dce(e){return x.isValidElement(e)&&e.type===uce}function fce(e,t){const r={...t};for(const n in t){const a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...l)=>{s(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...s}:n==="className"&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}function hce(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var mce=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],zt=mce.reduce((e,t)=>{const r=x.forwardRef((n,a)=>{const{asChild:s,...o}=n,l=s?VW:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function HW(e,t){e&&oo.flushSync(()=>e.dispatchEvent(t))}function ti(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function pce(e,t=globalThis==null?void 0:globalThis.document){const r=ti(e);x.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var gce="DismissableLayer",CT="dismissableLayer.update",vce="dismissableLayer.pointerDownOutside",xce="dismissableLayer.focusOutside",s3,qW=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Up=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...c}=e,u=x.useContext(qW),[d,f]=x.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=x.useState({}),v=Pr(t,j=>f(j)),m=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=m.indexOf(g),y=d?m.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,_=y>=b,S=bce(j=>{const N=j.target,k=[...u.branches].some(C=>C.contains(N));!_||k||(a==null||a(j),o==null||o(j),j.defaultPrevented||l==null||l())},h),E=wce(j=>{const N=j.target;[...u.branches].some(C=>C.contains(N))||(s==null||s(j),o==null||o(j),j.defaultPrevented||l==null||l())},h);return pce(j=>{y===u.layers.size-1&&(n==null||n(j),!j.defaultPrevented&&l&&(j.preventDefault(),l()))},h),x.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(s3=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),i3(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=s3)}},[d,h,r,u]),x.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),i3())},[d,u]),x.useEffect(()=>{const j=()=>p({});return document.addEventListener(CT,j),()=>document.removeEventListener(CT,j)},[]),i.jsx(zt.div,{...c,ref:v,style:{pointerEvents:w?_?"auto":"none":void 0,...e.style},onFocusCapture:At(e.onFocusCapture,E.onFocusCapture),onBlurCapture:At(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:At(e.onPointerDownCapture,S.onPointerDownCapture)})});Up.displayName=gce;var yce="DismissableLayerBranch",GW=x.forwardRef((e,t)=>{const r=x.useContext(qW),n=x.useRef(null),a=Pr(t,n);return x.useEffect(()=>{const s=n.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),i.jsx(zt.div,{...e,ref:a})});GW.displayName=yce;function bce(e,t=globalThis==null?void 0:globalThis.document){const r=ti(e),n=x.useRef(!1),a=x.useRef(()=>{});return x.useEffect(()=>{const s=l=>{if(l.target&&!n.current){let c=function(){KW(vce,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function wce(e,t=globalThis==null?void 0:globalThis.document){const r=ti(e),n=x.useRef(!1);return x.useEffect(()=>{const a=s=>{s.target&&!n.current&&KW(xce,r,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function i3(){const e=new CustomEvent(CT);document.dispatchEvent(e)}function KW(e,t,r,{discrete:n}){const a=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?HW(a,s):a.dispatchEvent(s)}var _ce=Up,Sce=GW,La=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},jce=Vf.useId||(()=>{}),Ece=0;function Ho(e){const[t,r]=x.useState(jce());return La(()=>{r(n=>n??String(Ece++))},[e]),t?`radix-${t}`:""}const Nce=["top","right","bottom","left"],Bu=Math.min,hi=Math.max,Cw=Math.round,gb=Math.floor,Uu=e=>({x:e,y:e}),Cce={left:"right",right:"left",bottom:"top",top:"bottom"},kce={start:"end",end:"start"};function kT(e,t,r){return hi(e,Bu(t,r))}function wc(e,t){return typeof e=="function"?e(t):e}function _c(e){return e.split("-")[0]}function zp(e){return e.split("-")[1]}function YR(e){return e==="x"?"y":"x"}function ZR(e){return e==="y"?"height":"width"}function zu(e){return["top","bottom"].includes(_c(e))?"y":"x"}function JR(e){return YR(zu(e))}function Tce(e,t,r){r===void 0&&(r=!1);const n=zp(e),a=JR(e),s=ZR(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=kw(o)),[o,kw(o)]}function Ace(e){const t=kw(e);return[TT(e),t,TT(t)]}function TT(e){return e.replace(/start|end/g,t=>kce[t])}function Pce(e,t,r){const n=["left","right"],a=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:n:t?n:a;case"left":case"right":return t?s:o;default:return[]}}function Oce(e,t,r,n){const a=zp(e);let s=Pce(_c(e),r==="start",n);return a&&(s=s.map(o=>o+"-"+a),t&&(s=s.concat(s.map(TT)))),s}function kw(e){return e.replace(/left|right|bottom|top/g,t=>Cce[t])}function Rce(e){return{top:0,right:0,bottom:0,left:0,...e}}function XW(e){return typeof e!="number"?Rce(e):{top:e,right:e,bottom:e,left:e}}function Tw(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function o3(e,t,r){let{reference:n,floating:a}=e;const s=zu(t),o=JR(t),l=ZR(o),c=_c(t),u=s==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,h=n[l]/2-a[l]/2;let p;switch(c){case"top":p={x:d,y:n.y-a.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-a.width,y:f};break;default:p={x:n.x,y:n.y}}switch(zp(t)){case"start":p[o]-=h*(r&&u?-1:1);break;case"end":p[o]+=h*(r&&u?-1:1);break}return p}const Dce=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:s=[],platform:o}=r,l=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=o3(u,n,c),h=n,p={},v=0;for(let m=0;m<l.length;m++){const{name:g,fn:b}=l[m],{x:y,y:w,data:_,reset:S}=await b({x:d,y:f,initialPlacement:n,placement:h,strategy:a,middlewareData:p,rects:u,platform:o,elements:{reference:e,floating:t}});d=y??d,f=w??f,p={...p,[g]:{...p[g],..._}},S&&v<=50&&(v++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):S.rects),{x:d,y:f}=o3(u,h,c)),m=-1)}return{x:d,y:f,placement:h,strategy:a,middlewareData:p}};async function bv(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:s,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=wc(t,e),v=XW(p),g=l[h?f==="floating"?"reference":"floating":f],b=Tw(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(g)))==null||r?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),_=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},S=Tw(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:w,strategy:c}):y);return{top:(b.top-S.top+v.top)/_.y,bottom:(S.bottom-b.bottom+v.bottom)/_.y,left:(b.left-S.left+v.left)/_.x,right:(S.right-b.right+v.right)/_.x}}const Mce=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:s,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=wc(e,t)||{};if(u==null)return{};const f=XW(d),h={x:r,y:n},p=JR(a),v=ZR(p),m=await o.getDimensions(u),g=p==="y",b=g?"top":"left",y=g?"bottom":"right",w=g?"clientHeight":"clientWidth",_=s.reference[v]+s.reference[p]-h[p]-s.floating[v],S=h[p]-s.reference[p],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let j=E?E[w]:0;(!j||!await(o.isElement==null?void 0:o.isElement(E)))&&(j=l.floating[w]||s.floating[v]);const N=_/2-S/2,k=j/2-m[v]/2-1,C=Bu(f[b],k),T=Bu(f[y],k),A=C,B=j-m[v]-T,R=j/2-m[v]/2+N,P=kT(A,R,B),D=!c.arrow&&zp(a)!=null&&R!==P&&s.reference[v]/2-(R<A?C:T)-m[v]/2<0,U=D?R<A?R-A:R-B:0;return{[p]:h[p]+U,data:{[p]:P,centerOffset:R-P-U,...D&&{alignmentOffset:U}},reset:D}}}),Ice=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:s,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:m=!0,...g}=wc(e,t);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const b=_c(a),y=zu(l),w=_c(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=h||(w||!m?[kw(l)]:Ace(l)),E=v!=="none";!h&&E&&S.push(...Oce(l,m,v,_));const j=[l,...S],N=await bv(t,g),k=[];let C=((n=s.flip)==null?void 0:n.overflows)||[];if(d&&k.push(N[b]),f){const R=Tce(a,o,_);k.push(N[R[0]],N[R[1]])}if(C=[...C,{placement:a,overflows:k}],!k.every(R=>R<=0)){var T,A;const R=(((T=s.flip)==null?void 0:T.index)||0)+1,P=j[R];if(P)return{data:{index:R,overflows:C},reset:{placement:P}};let D=(A=C.filter(U=>U.overflows[0]<=0).sort((U,M)=>U.overflows[1]-M.overflows[1])[0])==null?void 0:A.placement;if(!D)switch(p){case"bestFit":{var B;const U=(B=C.filter(M=>{if(E){const F=zu(M.placement);return F===y||F==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(F=>F>0).reduce((F,K)=>F+K,0)]).sort((M,F)=>M[1]-F[1])[0])==null?void 0:B[0];U&&(D=U);break}case"initialPlacement":D=l;break}if(a!==D)return{reset:{placement:D}}}return{}}}};function l3(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function c3(e){return Nce.some(t=>e[t]>=0)}const $ce=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=wc(e,t);switch(n){case"referenceHidden":{const s=await bv(t,{...a,elementContext:"reference"}),o=l3(s,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:c3(o)}}}case"escaped":{const s=await bv(t,{...a,altBoundary:!0}),o=l3(s,r.floating);return{data:{escapedOffsets:o,escaped:c3(o)}}}default:return{}}}}};async function Fce(e,t){const{placement:r,platform:n,elements:a}=e,s=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=_c(r),l=zp(r),c=zu(r)==="y",u=["left","top"].includes(o)?-1:1,d=s&&c?-1:1,f=wc(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*d,y:h*u}:{x:h*u,y:p*d}}const Lce=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:s,placement:o,middlewareData:l}=t,c=await Fce(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:s+c.y,data:{...c,placement:o}}}}},Bce=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:g=>{let{x:b,y}=g;return{x:b,y}}},...c}=wc(e,t),u={x:r,y:n},d=await bv(t,c),f=zu(_c(a)),h=YR(f);let p=u[h],v=u[f];if(s){const g=h==="y"?"top":"left",b=h==="y"?"bottom":"right",y=p+d[g],w=p-d[b];p=kT(y,p,w)}if(o){const g=f==="y"?"top":"left",b=f==="y"?"bottom":"right",y=v+d[g],w=v-d[b];v=kT(y,v,w)}const m=l.fn({...t,[h]:p,[f]:v});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[h]:s,[f]:o}}}}}},Uce=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:s,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=wc(e,t),d={x:r,y:n},f=zu(a),h=YR(f);let p=d[h],v=d[f];const m=wc(l,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const w=h==="y"?"height":"width",_=s.reference[h]-s.floating[w]+g.mainAxis,S=s.reference[h]+s.reference[w]-g.mainAxis;p<_?p=_:p>S&&(p=S)}if(u){var b,y;const w=h==="y"?"width":"height",_=["top","left"].includes(_c(a)),S=s.reference[f]-s.floating[w]+(_&&((b=o.offset)==null?void 0:b[f])||0)+(_?0:g.crossAxis),E=s.reference[f]+s.reference[w]+(_?0:((y=o.offset)==null?void 0:y[f])||0)-(_?g.crossAxis:0);v<S?v=S:v>E&&(v=E)}return{[h]:p,[f]:v}}}},zce=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:s,platform:o,elements:l}=t,{apply:c=()=>{},...u}=wc(e,t),d=await bv(t,u),f=_c(a),h=zp(a),p=zu(a)==="y",{width:v,height:m}=s.floating;let g,b;f==="top"||f==="bottom"?(g=f,b=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=f,g=h==="end"?"top":"bottom");const y=m-d.top-d.bottom,w=v-d.left-d.right,_=Bu(m-d[g],y),S=Bu(v-d[b],w),E=!t.middlewareData.shift;let j=_,N=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(N=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(j=y),E&&!h){const C=hi(d.left,0),T=hi(d.right,0),A=hi(d.top,0),B=hi(d.bottom,0);p?N=v-2*(C!==0||T!==0?C+T:hi(d.left,d.right)):j=m-2*(A!==0||B!==0?A+B:hi(d.top,d.bottom))}await c({...t,availableWidth:N,availableHeight:j});const k=await o.getDimensions(l.floating);return v!==k.width||m!==k.height?{reset:{rects:!0}}:{}}}};function KS(){return typeof window<"u"}function Wp(e){return YW(e)?(e.nodeName||"").toLowerCase():"#document"}function _i(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Rl(e){var t;return(t=(YW(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function YW(e){return KS()?e instanceof Node||e instanceof _i(e).Node:!1}function Jo(e){return KS()?e instanceof Element||e instanceof _i(e).Element:!1}function kl(e){return KS()?e instanceof HTMLElement||e instanceof _i(e).HTMLElement:!1}function u3(e){return!KS()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof _i(e).ShadowRoot}function Kx(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Qo(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function Wce(e){return["table","td","th"].includes(Wp(e))}function XS(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function QR(e){const t=e4(),r=Jo(e)?Qo(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function Vce(e){let t=Wu(e);for(;kl(t)&&!Zm(t);){if(QR(t))return t;if(XS(t))return null;t=Wu(t)}return null}function e4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Zm(e){return["html","body","#document"].includes(Wp(e))}function Qo(e){return _i(e).getComputedStyle(e)}function YS(e){return Jo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Wu(e){if(Wp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||u3(e)&&e.host||Rl(e);return u3(t)?t.host:t}function ZW(e){const t=Wu(e);return Zm(t)?e.ownerDocument?e.ownerDocument.body:e.body:kl(t)&&Kx(t)?t:ZW(t)}function wv(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=ZW(e),s=a===((n=e.ownerDocument)==null?void 0:n.body),o=_i(a);if(s){const l=AT(o);return t.concat(o,o.visualViewport||[],Kx(a)?a:[],l&&r?wv(l):[])}return t.concat(a,wv(a,[],r))}function AT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function JW(e){const t=Qo(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=kl(e),s=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=Cw(r)!==s||Cw(n)!==o;return l&&(r=s,n=o),{width:r,height:n,$:l}}function t4(e){return Jo(e)?e:e.contextElement}function um(e){const t=t4(e);if(!kl(t))return Uu(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:s}=JW(t);let o=(s?Cw(r.width):r.width)/n,l=(s?Cw(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Hce=Uu(0);function QW(e){const t=_i(e);return!e4()||!t.visualViewport?Hce:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function qce(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==_i(e)?!1:t}function mf(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),s=t4(e);let o=Uu(1);t&&(n?Jo(n)&&(o=um(n)):o=um(e));const l=qce(s,r,n)?QW(s):Uu(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,f=a.height/o.y;if(s){const h=_i(s),p=n&&Jo(n)?_i(n):n;let v=h,m=AT(v);for(;m&&n&&p!==v;){const g=um(m),b=m.getBoundingClientRect(),y=Qo(m),w=b.left+(m.clientLeft+parseFloat(y.paddingLeft))*g.x,_=b.top+(m.clientTop+parseFloat(y.paddingTop))*g.y;c*=g.x,u*=g.y,d*=g.x,f*=g.y,c+=w,u+=_,v=_i(m),m=AT(v)}}return Tw({width:d,height:f,x:c,y:u})}function Gce(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const s=a==="fixed",o=Rl(n),l=t?XS(t.floating):!1;if(n===o||l&&s)return r;let c={scrollLeft:0,scrollTop:0},u=Uu(1);const d=Uu(0),f=kl(n);if((f||!f&&!s)&&((Wp(n)!=="body"||Kx(o))&&(c=YS(n)),kl(n))){const h=mf(n);u=um(n),d.x=h.x+n.clientLeft,d.y=h.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x,y:r.y*u.y-c.scrollTop*u.y+d.y}}function Kce(e){return Array.from(e.getClientRects())}function PT(e,t){const r=YS(e).scrollLeft;return t?t.left+r:mf(Rl(e)).left+r}function Xce(e){const t=Rl(e),r=YS(e),n=e.ownerDocument.body,a=hi(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=hi(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+PT(e);const l=-r.scrollTop;return Qo(n).direction==="rtl"&&(o+=hi(t.clientWidth,n.clientWidth)-a),{width:a,height:s,x:o,y:l}}function Yce(e,t){const r=_i(e),n=Rl(e),a=r.visualViewport;let s=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){s=a.width,o=a.height;const u=e4();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:s,height:o,x:l,y:c}}function Zce(e,t){const r=mf(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,s=kl(e)?um(e):Uu(1),o=e.clientWidth*s.x,l=e.clientHeight*s.y,c=a*s.x,u=n*s.y;return{width:o,height:l,x:c,y:u}}function d3(e,t,r){let n;if(t==="viewport")n=Yce(e,r);else if(t==="document")n=Xce(Rl(e));else if(Jo(t))n=Zce(t,r);else{const a=QW(e);n={...t,x:t.x-a.x,y:t.y-a.y}}return Tw(n)}function eV(e,t){const r=Wu(e);return r===t||!Jo(r)||Zm(r)?!1:Qo(r).position==="fixed"||eV(r,t)}function Jce(e,t){const r=t.get(e);if(r)return r;let n=wv(e,[],!1).filter(l=>Jo(l)&&Wp(l)!=="body"),a=null;const s=Qo(e).position==="fixed";let o=s?Wu(e):e;for(;Jo(o)&&!Zm(o);){const l=Qo(o),c=QR(o);!c&&l.position==="fixed"&&(a=null),(s?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Kx(o)&&!c&&eV(e,o))?n=n.filter(d=>d!==o):a=l,o=Wu(o)}return t.set(e,n),n}function Qce(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?XS(t)?[]:Jce(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const f=d3(t,d,a);return u.top=hi(f.top,u.top),u.right=Bu(f.right,u.right),u.bottom=Bu(f.bottom,u.bottom),u.left=hi(f.left,u.left),u},d3(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function eue(e){const{width:t,height:r}=JW(e);return{width:t,height:r}}function tue(e,t,r){const n=kl(t),a=Rl(t),s=r==="fixed",o=mf(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const c=Uu(0);if(n||!n&&!s)if((Wp(t)!=="body"||Kx(a))&&(l=YS(t)),n){const p=mf(t,!0,s,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else a&&(c.x=PT(a));let u=0,d=0;if(a&&!n&&!s){const p=a.getBoundingClientRect();d=p.top+l.scrollTop,u=p.left+l.scrollLeft-PT(a,p)}const f=o.left+l.scrollLeft-c.x-u,h=o.top+l.scrollTop-c.y-d;return{x:f,y:h,width:o.width,height:o.height}}function $E(e){return Qo(e).position==="static"}function f3(e,t){if(!kl(e)||Qo(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Rl(e)===r&&(r=r.ownerDocument.body),r}function tV(e,t){const r=_i(e);if(XS(e))return r;if(!kl(e)){let a=Wu(e);for(;a&&!Zm(a);){if(Jo(a)&&!$E(a))return a;a=Wu(a)}return r}let n=f3(e,t);for(;n&&Wce(n)&&$E(n);)n=f3(n,t);return n&&Zm(n)&&$E(n)&&!QR(n)?r:n||Vce(e)||r}const rue=async function(e){const t=this.getOffsetParent||tV,r=this.getDimensions,n=await r(e.floating);return{reference:tue(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function nue(e){return Qo(e).direction==="rtl"}const aue={convertOffsetParentRelativeRectToViewportRelativeRect:Gce,getDocumentElement:Rl,getClippingRect:Qce,getOffsetParent:tV,getElementRects:rue,getClientRects:Kce,getDimensions:eue,getScale:um,isElement:Jo,isRTL:nue};function sue(e,t){let r=null,n;const a=Rl(e);function s(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const{left:u,top:d,width:f,height:h}=e.getBoundingClientRect();if(l||t(),!f||!h)return;const p=gb(d),v=gb(a.clientWidth-(u+f)),m=gb(a.clientHeight-(d+h)),g=gb(u),y={rootMargin:-p+"px "+-v+"px "+-m+"px "+-g+"px",threshold:hi(0,Bu(1,c))||1};let w=!0;function _(S){const E=S[0].intersectionRatio;if(E!==c){if(!w)return o();E?o(!1,E):n=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{r=new IntersectionObserver(_,{...y,root:a.ownerDocument})}catch{r=new IntersectionObserver(_,y)}r.observe(e)}return o(!0),s}function rV(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=t4(e),d=a||s?[...u?wv(u):[],...wv(t)]:[];d.forEach(b=>{a&&b.addEventListener("scroll",r,{passive:!0}),s&&b.addEventListener("resize",r)});const f=u&&l?sue(u,r):null;let h=-1,p=null;o&&(p=new ResizeObserver(b=>{let[y]=b;y&&y.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),r()}),u&&!c&&p.observe(u),p.observe(t));let v,m=c?mf(e):null;c&&g();function g(){const b=mf(e);m&&(b.x!==m.x||b.y!==m.y||b.width!==m.width||b.height!==m.height)&&r(),m=b,v=requestAnimationFrame(g)}return r(),()=>{var b;d.forEach(y=>{a&&y.removeEventListener("scroll",r),s&&y.removeEventListener("resize",r)}),f==null||f(),(b=p)==null||b.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const iue=Lce,oue=Bce,lue=Ice,cue=zce,uue=$ce,h3=Mce,due=Uce,fue=(e,t,r)=>{const n=new Map,a={platform:aue,...r},s={...a.platform,_c:n};return Dce(e,t,{...a,platform:s})};var B1=typeof document<"u"?x.useLayoutEffect:x.useEffect;function Aw(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Aw(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const s=a[n];if(!(s==="_owner"&&e.$$typeof)&&!Aw(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function nV(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function m3(e,t){const r=nV(e);return Math.round(t*r)/r}function FE(e){const t=x.useRef(e);return B1(()=>{t.current=e}),t}function aV(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=x.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=x.useState(n);Aw(h,n)||p(n);const[v,m]=x.useState(null),[g,b]=x.useState(null),y=x.useCallback(M=>{M!==E.current&&(E.current=M,m(M))},[]),w=x.useCallback(M=>{M!==j.current&&(j.current=M,b(M))},[]),_=s||v,S=o||g,E=x.useRef(null),j=x.useRef(null),N=x.useRef(d),k=c!=null,C=FE(c),T=FE(a),A=FE(u),B=x.useCallback(()=>{if(!E.current||!j.current)return;const M={placement:t,strategy:r,middleware:h};T.current&&(M.platform=T.current),fue(E.current,j.current,M).then(F=>{const K={...F,isPositioned:A.current!==!1};R.current&&!Aw(N.current,K)&&(N.current=K,oo.flushSync(()=>{f(K)}))})},[h,t,r,T,A]);B1(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[u]);const R=x.useRef(!1);B1(()=>(R.current=!0,()=>{R.current=!1}),[]),B1(()=>{if(_&&(E.current=_),S&&(j.current=S),_&&S){if(C.current)return C.current(_,S,B);B()}},[_,S,B,C,k]);const P=x.useMemo(()=>({reference:E,floating:j,setReference:y,setFloating:w}),[y,w]),D=x.useMemo(()=>({reference:_,floating:S}),[_,S]),U=x.useMemo(()=>{const M={position:r,left:0,top:0};if(!D.floating)return M;const F=m3(D.floating,d.x),K=m3(D.floating,d.y);return l?{...M,transform:"translate("+F+"px, "+K+"px)",...nV(D.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:F,top:K}},[r,l,D.floating,d.x,d.y]);return x.useMemo(()=>({...d,update:B,refs:P,elements:D,floatingStyles:U}),[d,B,P,D,U])}const hue=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?h3({element:n.current,padding:a}).fn(r):{}:n?h3({element:n,padding:a}).fn(r):{}}}},sV=(e,t)=>({...iue(e),options:[e,t]}),iV=(e,t)=>({...oue(e),options:[e,t]}),oV=(e,t)=>({...due(e),options:[e,t]}),lV=(e,t)=>({...lue(e),options:[e,t]}),cV=(e,t)=>({...cue(e),options:[e,t]}),uV=(e,t)=>({...uue(e),options:[e,t]}),dV=(e,t)=>({...hue(e),options:[e,t]});var mue="Arrow",fV=x.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...s}=e;return i.jsx(zt.svg,{...s,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});fV.displayName=mue;var pue=fV;function gue(e,t=[]){let r=[];function n(s,o){const l=x.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:h,children:p,...v}=f,m=(h==null?void 0:h[e][c])||l,g=x.useMemo(()=>v,Object.values(v));return i.jsx(m.Provider,{value:g,children:p})}function d(f,h){const p=(h==null?void 0:h[e][c])||l,v=x.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,d]}const a=()=>{const s=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,vue(a,...t)]}function vue(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function ZS(e){const[t,r]=x.useState(void 0);return La(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const s=a[0];let o,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var r4="Popper",[hV,Vp]=gue(r4),[xue,mV]=hV(r4),pV=e=>{const{__scopePopper:t,children:r}=e,[n,a]=x.useState(null);return i.jsx(xue,{scope:t,anchor:n,onAnchorChange:a,children:r})};pV.displayName=r4;var gV="PopperAnchor",vV=x.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,s=mV(gV,r),o=x.useRef(null),l=Pr(t,o);return x.useEffect(()=>{s.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:i.jsx(zt.div,{...a,ref:l})});vV.displayName=gV;var n4="PopperContent",[yue,bue]=hV(n4),xV=x.forwardRef((e,t)=>{var q,Z,I,Q,ve,z;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:v,...m}=e,g=mV(n4,r),[b,y]=x.useState(null),w=Pr(t,we=>y(we)),[_,S]=x.useState(null),E=ZS(_),j=(E==null?void 0:E.width)??0,N=(E==null?void 0:E.height)??0,k=n+(s!=="center"?"-"+s:""),C=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},T=Array.isArray(u)?u:[u],A=T.length>0,B={padding:C,boundary:T.filter(_ue),altBoundary:A},{refs:R,floatingStyles:P,placement:D,isPositioned:U,middlewareData:M}=aV({strategy:"fixed",placement:k,whileElementsMounted:(...we)=>rV(...we,{animationFrame:p==="always"}),elements:{reference:g.anchor},middleware:[sV({mainAxis:a+N,alignmentAxis:o}),c&&iV({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?oV():void 0,...B}),c&&lV({...B}),cV({...B,apply:({elements:we,rects:Re,availableWidth:Pe,availableHeight:De})=>{const{width:Ne,height:J}=Re.reference,Y=we.floating.style;Y.setProperty("--radix-popper-available-width",`${Pe}px`),Y.setProperty("--radix-popper-available-height",`${De}px`),Y.setProperty("--radix-popper-anchor-width",`${Ne}px`),Y.setProperty("--radix-popper-anchor-height",`${J}px`)}}),_&&dV({element:_,padding:l}),Sue({arrowWidth:j,arrowHeight:N}),h&&uV({strategy:"referenceHidden",...B})]}),[F,K]=wV(D),X=ti(v);La(()=>{U&&(X==null||X())},[U,X]);const O=(q=M.arrow)==null?void 0:q.x,W=(Z=M.arrow)==null?void 0:Z.y,L=((I=M.arrow)==null?void 0:I.centerOffset)!==0,[H,ee]=x.useState();return La(()=>{b&&ee(window.getComputedStyle(b).zIndex)},[b]),i.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...P,transform:U?P.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[(Q=M.transformOrigin)==null?void 0:Q.x,(ve=M.transformOrigin)==null?void 0:ve.y].join(" "),...((z=M.hide)==null?void 0:z.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(yue,{scope:r,placedSide:F,onArrowChange:S,arrowX:O,arrowY:W,shouldHideArrow:L,children:i.jsx(zt.div,{"data-side":F,"data-align":K,...m,ref:w,style:{...m.style,animation:U?void 0:"none"}})})})});xV.displayName=n4;var yV="PopperArrow",wue={top:"bottom",right:"left",bottom:"top",left:"right"},bV=x.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,s=bue(yV,n),o=wue[s.placedSide];return i.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:i.jsx(pue,{...a,ref:r,style:{...a.style,display:"block"}})})});bV.displayName=yV;function _ue(e){return e!==null}var Sue=e=>({name:"transformOrigin",options:e,fn(t){var g,b,y;const{placement:r,rects:n,middlewareData:a}=t,o=((g=a.arrow)==null?void 0:g.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=wV(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(((b=a.arrow)==null?void 0:b.x)??0)+l/2,p=(((y=a.arrow)==null?void 0:y.y)??0)+c/2;let v="",m="";return u==="bottom"?(v=o?f:`${h}px`,m=`${-c}px`):u==="top"?(v=o?f:`${h}px`,m=`${n.floating.height+c}px`):u==="right"?(v=`${-c}px`,m=o?f:`${p}px`):u==="left"&&(v=`${n.floating.width+c}px`,m=o?f:`${p}px`),{data:{x:v,y:m}}}});function wV(e){const[t,r="center"]=e.split("-");return[t,r]}var a4=pV,JS=vV,s4=xV,i4=bV,jue="Portal",Xx=x.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,s]=x.useState(!1);La(()=>s(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?VS.createPortal(i.jsx(zt.div,{...n,ref:t}),o):null});Xx.displayName=jue;function Eue(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var rl=e=>{const{present:t,children:r}=e,n=Nue(t),a=typeof r=="function"?r({present:n.isPresent}):x.Children.only(r),s=Pr(n.ref,Cue(a));return typeof r=="function"||n.isPresent?x.cloneElement(a,{ref:s}):null};rl.displayName="Presence";function Nue(e){const[t,r]=x.useState(),n=x.useRef({}),a=x.useRef(e),s=x.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Eue(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=vb(n.current);s.current=l==="mounted"?u:"none"},[l]),La(()=>{const u=n.current,d=a.current;if(d!==e){const h=s.current,p=vb(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),La(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=p=>{const m=vb(n.current).includes(p.animationName);if(p.target===t&&m&&(c("ANIMATION_END"),!a.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},h=p=>{p.target===t&&(s.current=vb(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function vb(e){return(e==null?void 0:e.animationName)||"none"}function Cue(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var kue=x.forwardRef((e,t)=>{const{children:r,...n}=e,a=x.Children.toArray(r),s=a.find(Tue);if(s){const o=s.props.children,l=a.map(c=>c===s?x.Children.count(o)>1?x.Children.only(null):x.isValidElement(o)?o.props.children:null:c);return i.jsx(OT,{...n,ref:t,children:x.isValidElement(o)?x.cloneElement(o,void 0,l):null})}return i.jsx(OT,{...n,ref:t,children:r})});kue.displayName="Slot";var OT=x.forwardRef((e,t)=>{const{children:r,...n}=e;if(x.isValidElement(r)){const a=Pue(r);return x.cloneElement(r,{...Aue(n,r.props),ref:t?ad(t,a):a})}return x.Children.count(r)>1?x.Children.only(null):null});OT.displayName="SlotClone";var _V=({children:e})=>i.jsx(i.Fragment,{children:e});function Tue(e){return x.isValidElement(e)&&e.type===_V}function Aue(e,t){const r={...t};for(const n in t){const a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...l)=>{s(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...s}:n==="className"&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}function Pue(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Ci({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,a]=Oue({defaultProp:t,onChange:r}),s=e!==void 0,o=s?e:n,l=ti(r),c=x.useCallback(u=>{if(s){const f=typeof u=="function"?u(e):u;f!==e&&l(f)}else a(u)},[s,e,a,l]);return[o,c]}function Oue({defaultProp:e,onChange:t}){const r=x.useState(e),[n]=r,a=x.useRef(n),s=ti(t);return x.useEffect(()=>{a.current!==n&&(s(n),a.current=n)},[n,a,s]),r}var Rue="VisuallyHidden",Yx=x.forwardRef((e,t)=>i.jsx(zt.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Yx.displayName=Rue;var Due=Yx,[QS,klt]=lo("Tooltip",[Vp]),ej=Vp(),SV="TooltipProvider",Mue=700,RT="tooltip.open",[Iue,o4]=QS(SV),jV=e=>{const{__scopeTooltip:t,delayDuration:r=Mue,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:s}=e,[o,l]=x.useState(!0),c=x.useRef(!1),u=x.useRef(0);return x.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),i.jsx(Iue,{scope:t,isOpenDelayed:o,delayDuration:r,onOpen:x.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:x.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:x.useCallback(d=>{c.current=d},[]),disableHoverableContent:a,children:s})};jV.displayName=SV;var tj="Tooltip",[$ue,rj]=QS(tj),EV=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:a=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:l}=e,c=o4(tj,e.__scopeTooltip),u=ej(t),[d,f]=x.useState(null),h=Ho(),p=x.useRef(0),v=o??c.disableHoverableContent,m=l??c.delayDuration,g=x.useRef(!1),[b=!1,y]=Ci({prop:n,defaultProp:a,onChange:j=>{j?(c.onOpen(),document.dispatchEvent(new CustomEvent(RT))):c.onClose(),s==null||s(j)}}),w=x.useMemo(()=>b?g.current?"delayed-open":"instant-open":"closed",[b]),_=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,g.current=!1,y(!0)},[y]),S=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y(!1)},[y]),E=x.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{g.current=!0,y(!0),p.current=0},m)},[m,y]);return x.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),i.jsx(a4,{...u,children:i.jsx($ue,{scope:t,contentId:h,open:b,stateAttribute:w,trigger:d,onTriggerChange:f,onTriggerEnter:x.useCallback(()=>{c.isOpenDelayed?E():_()},[c.isOpenDelayed,E,_]),onTriggerLeave:x.useCallback(()=>{v?S():(window.clearTimeout(p.current),p.current=0)},[S,v]),onOpen:_,onClose:S,disableHoverableContent:v,children:r})})};EV.displayName=tj;var DT="TooltipTrigger",NV=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=rj(DT,r),s=o4(DT,r),o=ej(r),l=x.useRef(null),c=Pr(t,l,a.onTriggerChange),u=x.useRef(!1),d=x.useRef(!1),f=x.useCallback(()=>u.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),i.jsx(JS,{asChild:!0,...o,children:i.jsx(zt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:At(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:At(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:At(e.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:At(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:At(e.onBlur,a.onClose),onClick:At(e.onClick,a.onClose)})})});NV.displayName=DT;var Fue="TooltipPortal",[Tlt,Lue]=QS(Fue,{forceMount:void 0}),Jm="TooltipContent",CV=x.forwardRef((e,t)=>{const r=Lue(Jm,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...s}=e,o=rj(Jm,e.__scopeTooltip);return i.jsx(rl,{present:n||o.open,children:o.disableHoverableContent?i.jsx(kV,{side:a,...s,ref:t}):i.jsx(Bue,{side:a,...s,ref:t})})}),Bue=x.forwardRef((e,t)=>{const r=rj(Jm,e.__scopeTooltip),n=o4(Jm,e.__scopeTooltip),a=x.useRef(null),s=Pr(t,a),[o,l]=x.useState(null),{trigger:c,onClose:u}=r,d=a.current,{onPointerInTransitChange:f}=n,h=x.useCallback(()=>{l(null),f(!1)},[f]),p=x.useCallback((v,m)=>{const g=v.currentTarget,b={x:v.clientX,y:v.clientY},y=Vue(b,g.getBoundingClientRect()),w=Hue(b,y),_=que(m.getBoundingClientRect()),S=Kue([...w,..._]);l(S),f(!0)},[f]);return x.useEffect(()=>()=>h(),[h]),x.useEffect(()=>{if(c&&d){const v=g=>p(g,d),m=g=>p(g,c);return c.addEventListener("pointerleave",v),d.addEventListener("pointerleave",m),()=>{c.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",m)}}},[c,d,p,h]),x.useEffect(()=>{if(o){const v=m=>{const g=m.target,b={x:m.clientX,y:m.clientY},y=(c==null?void 0:c.contains(g))||(d==null?void 0:d.contains(g)),w=!Gue(b,o);y?h():w&&(h(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,d,o,u,h]),i.jsx(kV,{...e,ref:s})}),[Uue,zue]=QS(tj,{isInside:!1}),kV=x.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:s,onPointerDownOutside:o,...l}=e,c=rj(Jm,r),u=ej(r),{onClose:d}=c;return x.useEffect(()=>(document.addEventListener(RT,d),()=>document.removeEventListener(RT,d)),[d]),x.useEffect(()=>{if(c.trigger){const f=h=>{const p=h.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),i.jsx(Up,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:i.jsxs(s4,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(_V,{children:n}),i.jsx(Uue,{scope:r,isInside:!0,children:i.jsx(Due,{id:c.contentId,role:"tooltip",children:a||n})})]})})});CV.displayName=Jm;var TV="TooltipArrow",Wue=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=ej(r);return zue(TV,r).isInside?null:i.jsx(i4,{...a,...n,ref:t})});Wue.displayName=TV;function Vue(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,n,a,s)){case s:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Hue(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function que(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function Gue(e,t){const{x:r,y:n}=e;let a=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s].x,c=t[s].y,u=t[o].x,d=t[o].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(a=!a)}return a}function Kue(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),Xue(t)}function Xue(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const s=r[r.length-1],o=r[r.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var Yue=jV,Zue=EV,Jue=NV,AV=CV;function PV(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=PV(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function hr(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=PV(e))&&(n&&(n+=" "),n+=t);return n}const l4="-",Que=e=>{const t=tde(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(l4);return l[0]===""&&l.length!==1&&l.shift(),OV(l,t)||ede(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},OV=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?OV(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const s=e.join(l4);return(o=t.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},p3=/^\[(.+)\]$/,ede=e=>{if(p3.test(e)){const t=p3.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},tde=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return nde(Object.entries(e.classGroups),r).forEach(([s,o])=>{MT(o,n,s,t)}),n},MT=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const s=a===""?t:g3(t,a);s.classGroupId=r;return}if(typeof a=="function"){if(rde(a)){MT(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([s,o])=>{MT(o,g3(t,s),r,n)})})},g3=(e,t)=>{let r=e;return t.split(l4).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},rde=e=>e.isThemeGetter,nde=(e,t)=>t?e.map(([r,n])=>{const a=n.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[t+o,l])):s);return[r,a]}):e,ade=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(s,o)=>{r.set(s,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(s){let o=r.get(s);if(o!==void 0)return o;if((o=n.get(s))!==void 0)return a(s,o),o},set(s,o){r.has(s)?r.set(s,o):a(s,o)}}},RV="!",sde=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],s=t.length,o=l=>{const c=[];let u=0,d=0,f;for(let g=0;g<l.length;g++){let b=l[g];if(u===0){if(b===a&&(n||l.slice(g,g+s)===t)){c.push(l.slice(d,g)),d=g+s;continue}if(b==="/"){f=g;continue}}b==="["?u++:b==="]"&&u--}const h=c.length===0?l:l.substring(d),p=h.startsWith(RV),v=p?h.substring(1):h,m=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:m}};return r?l=>r({className:l,parseClassName:o}):o},ide=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},ode=e=>({cache:ade(e.cacheSize),parseClassName:sde(e),...Que(e)}),lde=/\s+/,cde=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,s=[],o=e.trim().split(lde);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:p}=r(u);let v=!!p,m=n(v?h.substring(0,p):h);if(!m){if(!v){l=u+(l.length>0?" "+l:l);continue}if(m=n(h),!m){l=u+(l.length>0?" "+l:l);continue}v=!1}const g=ide(d).join(":"),b=f?g+RV:g,y=b+m;if(s.includes(y))continue;s.push(y);const w=a(m,v);for(let _=0;_<w.length;++_){const S=w[_];s.push(b+S)}l=u+(l.length>0?" "+l:l)}return l};function ude(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=DV(t))&&(n&&(n+=" "),n+=r);return n}const DV=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=DV(e[n]))&&(r&&(r+=" "),r+=t);return r};function dde(e,...t){let r,n,a,s=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return r=ode(u),n=r.cache.get,a=r.cache.set,s=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=cde(c,r);return a(c,d),d}return function(){return s(ude.apply(null,arguments))}}const hn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},MV=/^\[(?:([a-z-]+):)?(.+)\]$/i,fde=/^\d+\/\d+$/,hde=new Set(["px","full","screen"]),mde=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pde=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gde=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,vde=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xde=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ll=e=>dm(e)||hde.has(e)||fde.test(e),zc=e=>Hp(e,"length",Nde),dm=e=>!!e&&!Number.isNaN(Number(e)),LE=e=>Hp(e,"number",dm),T0=e=>!!e&&Number.isInteger(Number(e)),yde=e=>e.endsWith("%")&&dm(e.slice(0,-1)),cr=e=>MV.test(e),Wc=e=>mde.test(e),bde=new Set(["length","size","percentage"]),wde=e=>Hp(e,bde,IV),_de=e=>Hp(e,"position",IV),Sde=new Set(["image","url"]),jde=e=>Hp(e,Sde,kde),Ede=e=>Hp(e,"",Cde),A0=()=>!0,Hp=(e,t,r)=>{const n=MV.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},Nde=e=>pde.test(e)&&!gde.test(e),IV=()=>!1,Cde=e=>vde.test(e),kde=e=>xde.test(e),Tde=()=>{const e=hn("colors"),t=hn("spacing"),r=hn("blur"),n=hn("brightness"),a=hn("borderColor"),s=hn("borderRadius"),o=hn("borderSpacing"),l=hn("borderWidth"),c=hn("contrast"),u=hn("grayscale"),d=hn("hueRotate"),f=hn("invert"),h=hn("gap"),p=hn("gradientColorStops"),v=hn("gradientColorStopPositions"),m=hn("inset"),g=hn("margin"),b=hn("opacity"),y=hn("padding"),w=hn("saturate"),_=hn("scale"),S=hn("sepia"),E=hn("skew"),j=hn("space"),N=hn("translate"),k=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",cr,t],A=()=>[cr,t],B=()=>["",Ll,zc],R=()=>["auto",dm,cr],P=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],D=()=>["solid","dashed","dotted","double","none"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",cr],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[dm,cr];return{cacheSize:500,separator:":",theme:{colors:[A0],spacing:[Ll,zc],blur:["none","",Wc,cr],brightness:X(),borderColor:[e],borderRadius:["none","","full",Wc,cr],borderSpacing:A(),borderWidth:B(),contrast:X(),grayscale:F(),hueRotate:X(),invert:F(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[yde,zc],inset:T(),margin:T(),opacity:X(),padding:A(),saturate:X(),scale:X(),sepia:F(),skew:X(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",cr]}],container:["container"],columns:[{columns:[Wc]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...P(),cr]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",T0,cr]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",cr]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",T0,cr]}],"grid-cols":[{"grid-cols":[A0]}],"col-start-end":[{col:["auto",{span:["full",T0,cr]},cr]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[A0]}],"row-start-end":[{row:["auto",{span:[T0,cr]},cr]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",cr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",cr]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",cr,t]}],"min-w":[{"min-w":[cr,t,"min","max","fit"]}],"max-w":[{"max-w":[cr,t,"none","full","min","max","fit","prose",{screen:[Wc]},Wc]}],h:[{h:[cr,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[cr,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[cr,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[cr,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Wc,zc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",LE]}],"font-family":[{font:[A0]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",cr]}],"line-clamp":[{"line-clamp":["none",dm,LE]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ll,cr]}],"list-image":[{"list-image":["none",cr]}],"list-style-type":[{list:["none","disc","decimal",cr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...D(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ll,zc]}],"underline-offset":[{"underline-offset":["auto",Ll,cr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",cr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",cr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...P(),_de]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",wde]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},jde]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...D(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:D()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...D()]}],"outline-offset":[{"outline-offset":[Ll,cr]}],"outline-w":[{outline:[Ll,zc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Ll,zc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Wc,Ede]}],"shadow-color":[{shadow:[A0]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...U(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Wc,cr]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",cr]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",cr]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",cr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[T0,cr]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",cr]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",cr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",cr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ll,zc,LE]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Ade=dde(Tde);function Ue(...e){return Ade(hr(e))}function Pde(e){if(!e)return"";const t=e.trim().split(/\s+/);return t.length===1&&t[0].length>0?t[0].substring(0,2).toUpperCase():t.length>=2?(t[0][0]+(t[1][0]||"")).toUpperCase():""}const Ode=(e,t)=>{if(!e)return"";let r=e;for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]!==void 0){const a=new RegExp(`\\{${n}\\}`,"g");r=r.replace(a,String(t[n]))}return r};function Rde(e){const t=e.replace(/\D/g,"");return t.length===11&&(t[0]==="7"||t[0]==="8")?`+7 (${t.slice(1,4)}) ${t.slice(4,7)}-${t.slice(7,9)}-${t.slice(9,11)}`:t.length===10?`+7 (${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,8)}-${t.slice(8,10)}`:e}const jn=Yue,En=Zue,Nn=Jue,yn=x.forwardRef(({className:e,sideOffset:t=4,...r},n)=>i.jsx(AV,{ref:n,sideOffset:t,className:Ue("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));yn.displayName=AV.displayName;const Dde=1,Mde=1e6;let BE=0;function Ide(){return BE=(BE+1)%Number.MAX_SAFE_INTEGER,BE.toString()}const UE=new Map,v3=e=>{if(UE.has(e))return;const t=setTimeout(()=>{UE.delete(e),jg({type:"REMOVE_TOAST",toastId:e})},Mde);UE.set(e,t)},$de=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Dde)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?v3(r):e.toasts.forEach(n=>{v3(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},U1=[];let z1={toasts:[]};function jg(e){z1=$de(z1,e),U1.forEach(t=>{t(z1)})}function Ae({...e}){const t=Ide(),r=a=>jg({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>jg({type:"DISMISS_TOAST",toastId:t});return jg({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function co(){const[e,t]=x.useState(z1);return x.useEffect(()=>(U1.push(t),()=>{const r=U1.indexOf(t);r>-1&&U1.splice(r,1)}),[e]),{...e,toast:Ae,dismiss:r=>jg({type:"DISMISS_TOAST",toastId:r})}}function Fde(e,t=[]){let r=[];function n(s,o){const l=x.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:h,children:p,...v}=f,m=(h==null?void 0:h[e][c])||l,g=x.useMemo(()=>v,Object.values(v));return i.jsx(m.Provider,{value:g,children:p})}function d(f,h){const p=(h==null?void 0:h[e][c])||l,v=x.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,d]}const a=()=>{const s=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,Lde(a,...t)]}function Lde(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var IT=x.forwardRef((e,t)=>{const{children:r,...n}=e,a=x.Children.toArray(r),s=a.find(Ude);if(s){const o=s.props.children,l=a.map(c=>c===s?x.Children.count(o)>1?x.Children.only(null):x.isValidElement(o)?o.props.children:null:c);return i.jsx($T,{...n,ref:t,children:x.isValidElement(o)?x.cloneElement(o,void 0,l):null})}return i.jsx($T,{...n,ref:t,children:r})});IT.displayName="Slot";var $T=x.forwardRef((e,t)=>{const{children:r,...n}=e;if(x.isValidElement(r)){const a=Wde(r);return x.cloneElement(r,{...zde(n,r.props),ref:t?ad(t,a):a})}return x.Children.count(r)>1?x.Children.only(null):null});$T.displayName="SlotClone";var Bde=({children:e})=>i.jsx(i.Fragment,{children:e});function Ude(e){return x.isValidElement(e)&&e.type===Bde}function zde(e,t){const r={...t};for(const n in t){const a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...l)=>{s(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...s}:n==="className"&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}function Wde(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function nj(e){const t=e+"CollectionProvider",[r,n]=Fde(t),[a,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:m}=p,g=G.useRef(null),b=G.useRef(new Map).current;return i.jsx(a,{scope:v,itemMap:b,collectionRef:g,children:m})};o.displayName=t;const l=e+"CollectionSlot",c=G.forwardRef((p,v)=>{const{scope:m,children:g}=p,b=s(l,m),y=Pr(v,b.collectionRef);return i.jsx(IT,{ref:y,children:g})});c.displayName=l;const u=e+"CollectionItemSlot",d="data-radix-collection-item",f=G.forwardRef((p,v)=>{const{scope:m,children:g,...b}=p,y=G.useRef(null),w=Pr(v,y),_=s(u,m);return G.useEffect(()=>(_.itemMap.set(y,{ref:y,...b}),()=>void _.itemMap.delete(y))),i.jsx(IT,{[d]:"",ref:w,children:g})});f.displayName=u;function h(p){const v=s(e+"CollectionConsumer",p);return G.useCallback(()=>{const g=v.collectionRef.current;if(!g)return[];const b=Array.from(g.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((_,S)=>b.indexOf(_.ref.current)-b.indexOf(S.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},h,n]}var c4="ToastProvider",[u4,Vde,Hde]=nj("Toast"),[$V,Alt]=lo("Toast",[Hde]),[qde,aj]=$V(c4),FV=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:s=50,children:o}=e,[l,c]=x.useState(null),[u,d]=x.useState(0),f=x.useRef(!1),h=x.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${c4}\`. Expected non-empty \`string\`.`),i.jsx(u4.Provider,{scope:t,children:i.jsx(qde,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:s,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:x.useCallback(()=>d(p=>p+1),[]),onToastRemove:x.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};FV.displayName=c4;var LV="ToastViewport",Gde=["F8"],FT="toast.viewportPause",LT="toast.viewportResume",BV=x.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=Gde,label:a="Notifications ({hotkey})",...s}=e,o=aj(LV,r),l=Vde(r),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),f=x.useRef(null),h=Pr(t,f,o.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;x.useEffect(()=>{const g=b=>{var w;n.length!==0&&n.every(_=>b[_]||b.code===_)&&((w=f.current)==null||w.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[n]),x.useEffect(()=>{const g=c.current,b=f.current;if(v&&g&&b){const y=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(FT);b.dispatchEvent(E),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(LT);b.dispatchEvent(E),o.isClosePausedRef.current=!1}},_=E=>{!g.contains(E.relatedTarget)&&w()},S=()=>{g.contains(document.activeElement)||w()};return g.addEventListener("focusin",y),g.addEventListener("focusout",_),g.addEventListener("pointermove",y),g.addEventListener("pointerleave",S),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{g.removeEventListener("focusin",y),g.removeEventListener("focusout",_),g.removeEventListener("pointermove",y),g.removeEventListener("pointerleave",S),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[v,o.isClosePausedRef]);const m=x.useCallback(({tabbingDirection:g})=>{const y=l().map(w=>{const _=w.ref.current,S=[_,...ife(_)];return g==="forwards"?S:S.reverse()});return(g==="forwards"?y.reverse():y).flat()},[l]);return x.useEffect(()=>{const g=f.current;if(g){const b=y=>{var S,E,j;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const N=document.activeElement,k=y.shiftKey;if(y.target===g&&k){(S=u.current)==null||S.focus();return}const A=m({tabbingDirection:k?"backwards":"forwards"}),B=A.findIndex(R=>R===N);zE(A.slice(B+1))?y.preventDefault():k?(E=u.current)==null||E.focus():(j=d.current)==null||j.focus()}};return g.addEventListener("keydown",b),()=>g.removeEventListener("keydown",b)}},[l,m]),i.jsxs(Sce,{ref:c,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&i.jsx(BT,{ref:u,onFocusFromOutsideViewport:()=>{const g=m({tabbingDirection:"forwards"});zE(g)}}),i.jsx(u4.Slot,{scope:r,children:i.jsx(zt.ol,{tabIndex:-1,...s,ref:h})}),v&&i.jsx(BT,{ref:d,onFocusFromOutsideViewport:()=>{const g=m({tabbingDirection:"backwards"});zE(g)}})]})});BV.displayName=LV;var UV="ToastFocusProxy",BT=x.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,s=aj(UV,r);return i.jsx(Yx,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(l))&&n()}})});BT.displayName=UV;var sj="Toast",Kde="toast.swipeStart",Xde="toast.swipeMove",Yde="toast.swipeCancel",Zde="toast.swipeEnd",zV=x.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:s,...o}=e,[l=!0,c]=Ci({prop:n,defaultProp:a,onChange:s});return i.jsx(rl,{present:r||l,children:i.jsx(efe,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:ti(e.onPause),onResume:ti(e.onResume),onSwipeStart:At(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:At(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:At(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:At(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});zV.displayName=sj;var[Jde,Qde]=$V(sj,{onClose(){}}),efe=x.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:s,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:p,...v}=e,m=aj(sj,r),[g,b]=x.useState(null),y=Pr(t,R=>b(R)),w=x.useRef(null),_=x.useRef(null),S=a||m.duration,E=x.useRef(0),j=x.useRef(S),N=x.useRef(0),{onToastAdd:k,onToastRemove:C}=m,T=ti(()=>{var P;(g==null?void 0:g.contains(document.activeElement))&&((P=m.viewport)==null||P.focus()),o()}),A=x.useCallback(R=>{!R||R===1/0||(window.clearTimeout(N.current),E.current=new Date().getTime(),N.current=window.setTimeout(T,R))},[T]);x.useEffect(()=>{const R=m.viewport;if(R){const P=()=>{A(j.current),u==null||u()},D=()=>{const U=new Date().getTime()-E.current;j.current=j.current-U,window.clearTimeout(N.current),c==null||c()};return R.addEventListener(FT,D),R.addEventListener(LT,P),()=>{R.removeEventListener(FT,D),R.removeEventListener(LT,P)}}},[m.viewport,S,c,u,A]),x.useEffect(()=>{s&&!m.isClosePausedRef.current&&A(S)},[s,S,m.isClosePausedRef,A]),x.useEffect(()=>(k(),()=>C()),[k,C]);const B=x.useMemo(()=>g?XV(g):null,[g]);return m.viewport?i.jsxs(i.Fragment,{children:[B&&i.jsx(tfe,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:B}),i.jsx(Jde,{scope:r,onClose:T,children:oo.createPortal(i.jsx(u4.ItemSlot,{scope:r,children:i.jsx(_ce,{asChild:!0,onEscapeKeyDown:At(l,()=>{m.isFocusedToastEscapeKeyDownRef.current||T(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(zt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...v,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:At(e.onKeyDown,R=>{R.key==="Escape"&&(l==null||l(R.nativeEvent),R.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:At(e.onPointerDown,R=>{R.button===0&&(w.current={x:R.clientX,y:R.clientY})}),onPointerMove:At(e.onPointerMove,R=>{if(!w.current)return;const P=R.clientX-w.current.x,D=R.clientY-w.current.y,U=!!_.current,M=["left","right"].includes(m.swipeDirection),F=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,K=M?F(0,P):0,X=M?0:F(0,D),O=R.pointerType==="touch"?10:2,W={x:K,y:X},L={originalEvent:R,delta:W};U?(_.current=W,xb(Xde,f,L,{discrete:!1})):x3(W,m.swipeDirection,O)?(_.current=W,xb(Kde,d,L,{discrete:!1}),R.target.setPointerCapture(R.pointerId)):(Math.abs(P)>O||Math.abs(D)>O)&&(w.current=null)}),onPointerUp:At(e.onPointerUp,R=>{const P=_.current,D=R.target;if(D.hasPointerCapture(R.pointerId)&&D.releasePointerCapture(R.pointerId),_.current=null,w.current=null,P){const U=R.currentTarget,M={originalEvent:R,delta:P};x3(P,m.swipeDirection,m.swipeThreshold)?xb(Zde,p,M,{discrete:!0}):xb(Yde,h,M,{discrete:!0}),U.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),tfe=e=>{const{__scopeToast:t,children:r,...n}=e,a=aj(sj,t),[s,o]=x.useState(!1),[l,c]=x.useState(!1);return afe(()=>o(!0)),x.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(Xx,{asChild:!0,children:i.jsx(Yx,{...n,children:s&&i.jsxs(i.Fragment,{children:[a.label," ",r]})})})},rfe="ToastTitle",WV=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(zt.div,{...n,ref:t})});WV.displayName=rfe;var nfe="ToastDescription",VV=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(zt.div,{...n,ref:t})});VV.displayName=nfe;var HV="ToastAction",qV=x.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?i.jsx(KV,{altText:r,asChild:!0,children:i.jsx(d4,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${HV}\`. Expected non-empty \`string\`.`),null)});qV.displayName=HV;var GV="ToastClose",d4=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=Qde(GV,r);return i.jsx(KV,{asChild:!0,children:i.jsx(zt.button,{type:"button",...n,ref:t,onClick:At(e.onClick,a.onClose)})})});d4.displayName=GV;var KV=x.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return i.jsx(zt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function XV(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),sfe(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",s=n.dataset.radixToastAnnounceExclude==="";if(!a)if(s){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...XV(n))}}),t}function xb(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?HW(a,s):a.dispatchEvent(s)}var x3=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),s=n>a;return t==="left"||t==="right"?s&&n>r:!s&&a>r};function afe(e=()=>{}){const t=ti(e);La(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function sfe(e){return e.nodeType===e.ELEMENT_NODE}function ife(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function zE(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var ofe=FV,YV=BV,ZV=zV,JV=WV,QV=VV,eH=qV,tH=d4;const y3=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,b3=hr,qp=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return b3(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:s}=t,o=Object.keys(a).map(u=>{const d=r==null?void 0:r[u],f=s==null?void 0:s[u];if(d===null)return null;const h=y3(d)||y3(f);return a[u][h]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...p}=d;return Object.entries(p).every(v=>{let[m,g]=v;return Array.isArray(g)?g.includes({...s,...l}[m]):{...s,...l}[m]===g})?[...u,f,h]:u},[]);return b3(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lfe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rH=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cfe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ufe=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:o,...l},c)=>x.createElement("svg",{ref:c,...cfe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:rH("lucide",a),...l},[...o.map(([u,d])=>x.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=(e,t)=>{const r=x.forwardRef(({className:n,...a},s)=>x.createElement(ufe,{ref:s,iconNode:t,className:rH(`lucide-${lfe(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dfe=bt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=bt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=bt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ffe=bt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=bt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hfe=bt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=bt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mfe=bt("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=bt("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=bt("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=bt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pfe=bt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gfe=bt("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vfe=bt("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=bt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=bt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=bt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=bt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xfe=bt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yfe=bt("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=bt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=bt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=bt("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bfe=bt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=bt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wfe=bt("Clock10",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 8 10",key:"atfzqc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=bt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _fe=bt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=bt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sfe=bt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=bt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=bt("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=bt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=bt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=bt("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=bt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jfe=bt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Efe=bt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=bt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=bt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nfe=bt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=bt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=bt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cfe=bt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=bt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=bt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=bt("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=bt("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=bt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=bt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=bt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kfe=bt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=bt("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=bt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=bt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=bt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=bt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tfe=bt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Afe=bt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=bt("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pfe=bt("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=bt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=bt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ofe=bt("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=bt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rfe=bt("TicketX",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"m9.5 14.5 5-5",key:"qviqfa"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=bt("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=bt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=bt("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=bt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dfe=bt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=bt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=bt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=bt("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=bt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=bt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Mfe=ofe,cH=x.forwardRef(({className:e,...t},r)=>i.jsx(YV,{ref:r,className:Ue("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));cH.displayName=YV.displayName;const Ife=qp("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),uH=x.forwardRef(({className:e,variant:t,...r},n)=>i.jsx(ZV,{ref:n,className:Ue(Ife({variant:t}),e),...r}));uH.displayName=ZV.displayName;const $fe=x.forwardRef(({className:e,...t},r)=>i.jsx(eH,{ref:r,className:Ue("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));$fe.displayName=eH.displayName;const dH=x.forwardRef(({className:e,...t},r)=>i.jsx(tH,{ref:r,className:Ue("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(Oc,{className:"h-4 w-4"})}));dH.displayName=tH.displayName;const fH=x.forwardRef(({className:e,...t},r)=>i.jsx(JV,{ref:r,className:Ue("text-sm font-semibold",e),...t}));fH.displayName=JV.displayName;const hH=x.forwardRef(({className:e,...t},r)=>i.jsx(QV,{ref:r,className:Ue("text-sm opacity-90",e),...t}));hH.displayName=QV.displayName;function Ffe(){const{toasts:e}=co();return i.jsxs(Mfe,{children:[e.map(function({id:t,title:r,description:n,action:a,...s}){return i.jsxs(uH,{...s,children:[i.jsxs("div",{className:"grid gap-1",children:[r&&i.jsx(fH,{children:r}),n&&i.jsx(hH,{children:n})]}),a,i.jsx(dH,{})]},t)}),i.jsx(cH,{})]})}var j3=["light","dark"],Lfe="(prefers-color-scheme: dark)",Bfe=x.createContext(void 0),Ufe={setTheme:e=>{},themes:[]},zfe=()=>{var e;return(e=x.useContext(Bfe))!=null?e:Ufe};x.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:s,value:o,attrs:l,nonce:c})=>{let u=s==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=a?j3.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(v,m=!1,g=!0)=>{let b=o?o[v]:v,y=m?v+"|| ''":`'${b}'`,w="";return a&&g&&!m&&j3.includes(v)&&(w+=`d.style.colorScheme = '${v}';`),r==="class"?m||b?w+=`c.add(${y})`:w+="null":b&&(w+=`d[s](n,${y})`),w},p=e?`!function(){${d}${h(e)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${Lfe}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${u?"":"else{"+h(s,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${f}}catch(t){}}();`;return x.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var Wfe=e=>{switch(e){case"success":return qfe;case"info":return Kfe;case"warning":return Gfe;case"error":return Xfe;default:return null}},Vfe=Array(12).fill(0),Hfe=({visible:e})=>G.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},G.createElement("div",{className:"sonner-spinner"},Vfe.map((t,r)=>G.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),qfe=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Gfe=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Kfe=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Xfe=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Yfe=()=>{let[e,t]=G.useState(document.hidden);return G.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},GT=1,Zfe=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:GT++,s=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return s?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0;return n.then(async s=>{if(Qfe(s)&&!s.ok){a=!1;let o=typeof t.error=="function"?await t.error(`HTTP error! status: ${s.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${s.status}`):t.description;this.create({id:r,type:"error",message:o,description:l})}else if(t.success!==void 0){a=!1;let o=typeof t.success=="function"?await t.success(s):t.success,l=typeof t.description=="function"?await t.description(s):t.description;this.create({id:r,type:"success",message:o,description:l})}}).catch(async s=>{if(t.error!==void 0){a=!1;let o=typeof t.error=="function"?await t.error(s):t.error,l=typeof t.description=="function"?await t.description(s):t.description;this.create({id:r,type:"error",message:o,description:l})}}).finally(()=>{var s;a&&(this.dismiss(r),r=void 0),(s=t.finally)==null||s.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||GT++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},ui=new Zfe,Jfe=(e,t)=>{let r=(t==null?void 0:t.id)||GT++;return ui.addToast({title:e,...t,id:r}),r},Qfe=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",ehe=Jfe,the=()=>ui.toasts;Object.assign(ehe,{success:ui.success,info:ui.info,warning:ui.warning,error:ui.error,custom:ui.custom,message:ui.message,promise:ui.promise,dismiss:ui.dismiss,loading:ui.loading},{getHistory:the});function rhe(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}rhe(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function yb(e){return e.label!==void 0}var nhe=3,ahe="32px",she=4e3,ihe=356,ohe=14,lhe=20,che=200;function uhe(...e){return e.filter(Boolean).join(" ")}var dhe=e=>{var t,r,n,a,s,o,l,c,u,d;let{invert:f,toast:h,unstyled:p,interacting:v,setHeights:m,visibleToasts:g,heights:b,index:y,toasts:w,expanded:_,removeToast:S,defaultRichColors:E,closeButton:j,style:N,cancelButtonStyle:k,actionButtonStyle:C,className:T="",descriptionClassName:A="",duration:B,position:R,gap:P,loadingIcon:D,expandByDefault:U,classNames:M,icons:F,closeButtonAriaLabel:K="Close toast",pauseWhenPageIsHidden:X,cn:O}=e,[W,L]=G.useState(!1),[H,ee]=G.useState(!1),[q,Z]=G.useState(!1),[I,Q]=G.useState(!1),[ve,z]=G.useState(0),[we,Re]=G.useState(0),Pe=G.useRef(null),De=G.useRef(null),Ne=y===0,J=y+1<=g,Y=h.type,ae=h.dismissible!==!1,ge=h.className||"",Se=h.descriptionClassName||"",te=G.useMemo(()=>b.findIndex(Ze=>Ze.toastId===h.id)||0,[b,h.id]),me=G.useMemo(()=>{var Ze;return(Ze=h.closeButton)!=null?Ze:j},[h.closeButton,j]),ke=G.useMemo(()=>h.duration||B||she,[h.duration,B]),he=G.useRef(0),et=G.useRef(0),nt=G.useRef(0),Oe=G.useRef(null),[Ye,ye]=R.split("-"),le=G.useMemo(()=>b.reduce((Ze,ct,St)=>St>=te?Ze:Ze+ct.height,0),[b,te]),_e=Yfe(),Be=h.invert||f,Ie=Y==="loading";et.current=G.useMemo(()=>te*P+le,[te,le]),G.useEffect(()=>{L(!0)},[]),G.useLayoutEffect(()=>{if(!W)return;let Ze=De.current,ct=Ze.style.height;Ze.style.height="auto";let St=Ze.getBoundingClientRect().height;Ze.style.height=ct,Re(St),m(ie=>ie.find(be=>be.toastId===h.id)?ie.map(be=>be.toastId===h.id?{...be,height:St}:be):[{toastId:h.id,height:St,position:h.position},...ie])},[W,h.title,h.description,m,h.id]);let it=G.useCallback(()=>{ee(!0),z(et.current),m(Ze=>Ze.filter(ct=>ct.toastId!==h.id)),setTimeout(()=>{S(h)},che)},[h,S,m,et]);G.useEffect(()=>{if(h.promise&&Y==="loading"||h.duration===1/0||h.type==="loading")return;let Ze,ct=ke;return _||v||X&&_e?(()=>{if(nt.current<he.current){let St=new Date().getTime()-he.current;ct=ct-St}nt.current=new Date().getTime()})():ct!==1/0&&(he.current=new Date().getTime(),Ze=setTimeout(()=>{var St;(St=h.onAutoClose)==null||St.call(h,h),it()},ct)),()=>clearTimeout(Ze)},[_,v,U,h,ke,it,h.promise,Y,X,_e]),G.useEffect(()=>{let Ze=De.current;if(Ze){let ct=Ze.getBoundingClientRect().height;return Re(ct),m(St=>[{toastId:h.id,height:ct,position:h.position},...St]),()=>m(St=>St.filter(ie=>ie.toastId!==h.id))}},[m,h.id]),G.useEffect(()=>{h.delete&&it()},[it,h.delete]);function tt(){return F!=null&&F.loading?G.createElement("div",{className:"sonner-loader","data-visible":Y==="loading"},F.loading):D?G.createElement("div",{className:"sonner-loader","data-visible":Y==="loading"},D):G.createElement(Hfe,{visible:Y==="loading"})}return G.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:De,className:O(T,ge,M==null?void 0:M.toast,(t=h==null?void 0:h.classNames)==null?void 0:t.toast,M==null?void 0:M.default,M==null?void 0:M[Y],(r=h==null?void 0:h.classNames)==null?void 0:r[Y]),"data-sonner-toast":"","data-rich-colors":(n=h.richColors)!=null?n:E,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":W,"data-promise":!!h.promise,"data-removed":H,"data-visible":J,"data-y-position":Ye,"data-x-position":ye,"data-index":y,"data-front":Ne,"data-swiping":q,"data-dismissible":ae,"data-type":Y,"data-invert":Be,"data-swipe-out":I,"data-expanded":!!(_||U&&W),style:{"--index":y,"--toasts-before":y,"--z-index":w.length-y,"--offset":`${H?ve:et.current}px`,"--initial-height":U?"auto":`${we}px`,...N,...h.style},onPointerDown:Ze=>{Ie||!ae||(Pe.current=new Date,z(et.current),Ze.target.setPointerCapture(Ze.pointerId),Ze.target.tagName!=="BUTTON"&&(Z(!0),Oe.current={x:Ze.clientX,y:Ze.clientY}))},onPointerUp:()=>{var Ze,ct,St,ie;if(I||!ae)return;Oe.current=null;let be=Number(((Ze=De.current)==null?void 0:Ze.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Je=new Date().getTime()-((ct=Pe.current)==null?void 0:ct.getTime()),Et=Math.abs(be)/Je;if(Math.abs(be)>=lhe||Et>.11){z(et.current),(St=h.onDismiss)==null||St.call(h,h),it(),Q(!0);return}(ie=De.current)==null||ie.style.setProperty("--swipe-amount","0px"),Z(!1)},onPointerMove:Ze=>{var ct;if(!Oe.current||!ae)return;let St=Ze.clientY-Oe.current.y,ie=Ze.clientX-Oe.current.x,be=(Ye==="top"?Math.min:Math.max)(0,St),Je=Ze.pointerType==="touch"?10:2;Math.abs(be)>Je?(ct=De.current)==null||ct.style.setProperty("--swipe-amount",`${St}px`):Math.abs(ie)>Je&&(Oe.current=null)}},me&&!h.jsx?G.createElement("button",{"aria-label":K,"data-disabled":Ie,"data-close-button":!0,onClick:Ie||!ae?()=>{}:()=>{var Ze;it(),(Ze=h.onDismiss)==null||Ze.call(h,h)},className:O(M==null?void 0:M.closeButton,(a=h==null?void 0:h.classNames)==null?void 0:a.closeButton)},G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||G.isValidElement(h.title)?h.jsx||h.title:G.createElement(G.Fragment,null,Y||h.icon||h.promise?G.createElement("div",{"data-icon":"",className:O(M==null?void 0:M.icon,(s=h==null?void 0:h.classNames)==null?void 0:s.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||tt():null,h.type!=="loading"?h.icon||(F==null?void 0:F[Y])||Wfe(Y):null):null,G.createElement("div",{"data-content":"",className:O(M==null?void 0:M.content,(o=h==null?void 0:h.classNames)==null?void 0:o.content)},G.createElement("div",{"data-title":"",className:O(M==null?void 0:M.title,(l=h==null?void 0:h.classNames)==null?void 0:l.title)},h.title),h.description?G.createElement("div",{"data-description":"",className:O(A,Se,M==null?void 0:M.description,(c=h==null?void 0:h.classNames)==null?void 0:c.description)},h.description):null),G.isValidElement(h.cancel)?h.cancel:h.cancel&&yb(h.cancel)?G.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||k,onClick:Ze=>{var ct,St;yb(h.cancel)&&ae&&((St=(ct=h.cancel).onClick)==null||St.call(ct,Ze),it())},className:O(M==null?void 0:M.cancelButton,(u=h==null?void 0:h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,G.isValidElement(h.action)?h.action:h.action&&yb(h.action)?G.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||C,onClick:Ze=>{var ct,St;yb(h.action)&&(Ze.defaultPrevented||((St=(ct=h.action).onClick)==null||St.call(ct,Ze),it()))},className:O(M==null?void 0:M.actionButton,(d=h==null?void 0:h.classNames)==null?void 0:d.actionButton)},h.action.label):null))};function E3(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var fhe=e=>{let{invert:t,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:a,closeButton:s,className:o,offset:l,theme:c="light",richColors:u,duration:d,style:f,visibleToasts:h=nhe,toastOptions:p,dir:v=E3(),gap:m=ohe,loadingIcon:g,icons:b,containerAriaLabel:y="Notifications",pauseWhenPageIsHidden:w,cn:_=uhe}=e,[S,E]=G.useState([]),j=G.useMemo(()=>Array.from(new Set([r].concat(S.filter(X=>X.position).map(X=>X.position)))),[S,r]),[N,k]=G.useState([]),[C,T]=G.useState(!1),[A,B]=G.useState(!1),[R,P]=G.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=G.useRef(null),U=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=G.useRef(null),F=G.useRef(!1),K=G.useCallback(X=>{var O;(O=S.find(W=>W.id===X.id))!=null&&O.delete||ui.dismiss(X.id),E(W=>W.filter(({id:L})=>L!==X.id))},[S]);return G.useEffect(()=>ui.subscribe(X=>{if(X.dismiss){E(O=>O.map(W=>W.id===X.id?{...W,delete:!0}:W));return}setTimeout(()=>{VS.flushSync(()=>{E(O=>{let W=O.findIndex(L=>L.id===X.id);return W!==-1?[...O.slice(0,W),{...O[W],...X},...O.slice(W+1)]:[X,...O]})})})}),[]),G.useEffect(()=>{if(c!=="system"){P(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?P("dark"):P("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:X})=>{P(X?"dark":"light")})},[c]),G.useEffect(()=>{S.length<=1&&T(!1)},[S]),G.useEffect(()=>{let X=O=>{var W,L;n.every(H=>O[H]||O.code===H)&&(T(!0),(W=D.current)==null||W.focus()),O.code==="Escape"&&(document.activeElement===D.current||(L=D.current)!=null&&L.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[n]),G.useEffect(()=>{if(D.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,F.current=!1)}},[D.current]),S.length?G.createElement("section",{"aria-label":`${y} ${U}`,tabIndex:-1},j.map((X,O)=>{var W;let[L,H]=X.split("-");return G.createElement("ol",{key:X,dir:v==="auto"?E3():v,tabIndex:-1,ref:D,className:o,"data-sonner-toaster":!0,"data-theme":R,"data-y-position":L,"data-x-position":H,style:{"--front-toast-height":`${((W=N[0])==null?void 0:W.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||ahe,"--width":`${ihe}px`,"--gap":`${m}px`,...f},onBlur:ee=>{F.current&&!ee.currentTarget.contains(ee.relatedTarget)&&(F.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||F.current||(F.current=!0,M.current=ee.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{A||T(!1)},onPointerDown:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},S.filter(ee=>!ee.position&&O===0||ee.position===X).map((ee,q)=>{var Z,I;return G.createElement(dhe,{key:ee.id,icons:b,index:q,toast:ee,defaultRichColors:u,duration:(Z=p==null?void 0:p.duration)!=null?Z:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:t,visibleToasts:h,closeButton:(I=p==null?void 0:p.closeButton)!=null?I:s,interacting:A,position:X,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:K,toasts:S.filter(Q=>Q.position==ee.position),heights:N.filter(Q=>Q.position==ee.position),setHeights:k,expandByDefault:a,gap:m,loadingIcon:g,expanded:C,pauseWhenPageIsHidden:w,cn:_})}))})):null};const hhe=({...e})=>{const{theme:t="system"}=zfe();return i.jsx(fhe,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},N3=e=>{let t;const r=new Set,n=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(p=>p(t,h))}},a=()=>t,l={setState:n,getState:a,getInitialState:()=>c,subscribe:u=>(r.add(u),()=>r.delete(u))},c=t=e(n,a,l);return l},mhe=e=>e?N3(e):N3,phe=e=>e;function ghe(e,t=phe){const r=G.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return G.useDebugValue(r),r}const C3=e=>{const t=mhe(e),r=n=>ghe(t,n);return Object.assign(r,t),r},uo=e=>e?C3(e):C3,k3={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdtYWp6eW5kYXZycXZqY2NvanVzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0OTM1NjEsImV4cCI6MjA2MTA2OTU2MX0.BryyXcZIgCKBfgVky2TouD2Ru1gO9Hrd5QyJ7c7vUdk",VITE_SUPABASE_URL:"https://gmajzyndavrqvjccojus.supabase.co"},KT=new Map,bb=e=>{const t=KT.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([r,n])=>[r,n.getState()])):{}},vhe=(e,t,r)=>{if(e===void 0)return{type:"untracked",connection:t.connect(r)};const n=KT.get(r.name);if(n)return{type:"tracked",store:e,...n};const a={connection:t.connect(r),stores:{}};return KT.set(r.name,a),{type:"tracked",store:e,...a}},xhe=(e,t={})=>(r,n,a)=>{const{enabled:s,anonymousActionType:o,store:l,...c}=t;let u;try{u=(s??(k3?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return e(r,n,a);const{connection:d,...f}=vhe(l,u,c);let h=!0;a.setState=(m,g,b)=>{const y=r(m,g);if(!h)return y;const w=b===void 0?{type:o||"anonymous"}:typeof b=="string"?{type:b}:b;return l===void 0?(d==null||d.send(w,n()),y):(d==null||d.send({...w,type:`${l}/${w.type}`},{...bb(c.name),[l]:a.getState()}),y)};const p=(...m)=>{const g=h;h=!1,r(...m),h=g},v=e(a.setState,n,a);if(f.type==="untracked"?d==null||d.init(v):(f.stores[f.store]=a,d==null||d.init(Object.fromEntries(Object.entries(f.stores).map(([m,g])=>[m,m===f.store?v:g.getState()])))),a.dispatchFromDevtools&&typeof a.dispatch=="function"){let m=!1;const g=a.dispatch;a.dispatch=(...b)=>{(k3?"production":void 0)!=="production"&&b[0].type==="__setState"&&!m&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),m=!0),g(...b)}}return d.subscribe(m=>{var g;switch(m.type){case"ACTION":if(typeof m.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return VE(m.payload,b=>{if(b.type==="__setState"){if(l===void 0){p(b.state);return}Object.keys(b.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const y=b.state[l];if(y==null)return;JSON.stringify(a.getState())!==JSON.stringify(y)&&p(y);return}a.dispatchFromDevtools&&typeof a.dispatch=="function"&&a.dispatch(b)});case"DISPATCH":switch(m.payload.type){case"RESET":return p(v),l===void 0?d==null?void 0:d.init(a.getState()):d==null?void 0:d.init(bb(c.name));case"COMMIT":if(l===void 0){d==null||d.init(a.getState());return}return d==null?void 0:d.init(bb(c.name));case"ROLLBACK":return VE(m.state,b=>{if(l===void 0){p(b),d==null||d.init(a.getState());return}p(b[l]),d==null||d.init(bb(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return VE(m.state,b=>{if(l===void 0){p(b);return}JSON.stringify(a.getState())!==JSON.stringify(b[l])&&p(b[l])});case"IMPORT_STATE":{const{nextLiftedState:b}=m.payload,y=(g=b.computedStates.slice(-1)[0])==null?void 0:g.state;if(!y)return;p(l===void 0?y:y[l]),d==null||d.send(null,b);return}case"PAUSE_RECORDING":return h=!h}return}}),v},Gf=xhe,VE=(e,t)=>{let r;try{r=JSON.parse(e)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}r!==void 0&&t(r)};function mH(e,t){let r;try{r=e()}catch{return}return{getItem:a=>{var s;const o=c=>c===null?null:JSON.parse(c,void 0),l=(s=r.getItem(a))!=null?s:null;return l instanceof Promise?l.then(o):o(l)},setItem:(a,s)=>r.setItem(a,JSON.stringify(s,void 0)),removeItem:a=>r.removeItem(a)}}const XT=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return XT(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return XT(n)(r)}}}},yhe=(e,t)=>(r,n,a)=>{let s={storage:mH(()=>localStorage),partialize:m=>m,version:0,merge:(m,g)=>({...g,...m}),...t},o=!1;const l=new Set,c=new Set;let u=s.storage;if(!u)return e((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...m)},n,a);const d=()=>{const m=s.partialize({...n()});return u.setItem(s.name,{state:m,version:s.version})},f=a.setState;a.setState=(m,g)=>{f(m,g),d()};const h=e((...m)=>{r(...m),d()},n,a);a.getInitialState=()=>h;let p;const v=()=>{var m,g;if(!u)return;o=!1,l.forEach(y=>{var w;return y((w=n())!=null?w:h)});const b=((g=s.onRehydrateStorage)==null?void 0:g.call(s,(m=n())!=null?m:h))||void 0;return XT(u.getItem.bind(u))(s.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==s.version){if(s.migrate){const w=s.migrate(y.state,y.version);return w instanceof Promise?w.then(_=>[!0,_]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var w;const[_,S]=y;if(p=s.merge(S,(w=n())!=null?w:h),r(p,!0),_)return d()}).then(()=>{b==null||b(p,void 0),p=n(),o=!0,c.forEach(y=>y(p))}).catch(y=>{b==null||b(void 0,y)})};return a.persist={setOptions:m=>{s={...s,...m},m.storage&&(u=m.storage)},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:m=>(l.add(m),()=>{l.delete(m)}),onFinishHydration:m=>(c.add(m),()=>{c.delete(m)})},s.skipHydration||v(),p||h},Kf=yhe,bhe="modulepreload",whe=function(e){return"/"+e},T3={},qo=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=whe(c),c in T3)return;T3[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":bhe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},_he=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>qo(async()=>{const{default:n}=await Promise.resolve().then(()=>Yp);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class h4 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class She extends h4{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class jhe extends h4{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ehe extends h4{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var YT;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(YT||(YT={}));var Nhe=function(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Che{constructor(t,{headers:r={},customFetch:n,region:a=YT.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=_he(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Nhe(this,void 0,void 0,function*(){try{const{headers:a,method:s,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${t}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:u}).catch(v=>{throw new She(v)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new jhe(d);if(!d.ok)throw new Ehe(d);let h=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield d.json():h==="application/octet-stream"?p=yield d.blob():h==="text/event-stream"?p=d:h==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(a){return{data:null,error:a}}})}}var qs={},m4={},cj={},Qx={},uj={},dj={},khe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Qm=khe();const The=Qm.fetch,pH=Qm.fetch.bind(Qm),gH=Qm.Headers,Ahe=Qm.Request,Phe=Qm.Response,Yp=Object.freeze(Object.defineProperty({__proto__:null,Headers:gH,Request:Ahe,Response:Phe,default:pH,fetch:The},Symbol.toStringTag,{value:"Module"})),Ohe=mU(Yp);var fj={};Object.defineProperty(fj,"__esModule",{value:!0});let Rhe=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};fj.default=Rhe;var vH=wa&&wa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dj,"__esModule",{value:!0});const Dhe=vH(Ohe),Mhe=vH(fj);let Ihe=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Dhe.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,l,c;let u=null,d=null,f=null,h=s.status,p=s.statusText;if(s.ok){if(this.method!=="HEAD"){const b=await s.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=b:d=JSON.parse(b))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");m&&g&&g.length>1&&(f=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const m=await s.text();try{u=JSON.parse(m),Array.isArray(u)&&s.status===404&&(d=[],u=null,h=200,p="OK")}catch{s.status===404&&m===""?(h=204,p="No Content"):u={message:m}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&this.shouldThrowOnError)throw new Mhe.default(u)}return{error:u,data:d,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(a=a.catch(s=>{var o,l,c;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};dj.default=Ihe;var $he=wa&&wa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uj,"__esModule",{value:!0});const Fhe=$he(dj);let Lhe=class extends Fhe.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:s=a}={}){const o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const s=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:s=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};uj.default=Lhe;var Bhe=wa&&wa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qx,"__esModule",{value:!0});const Uhe=Bhe(uj);let zhe=class extends Uhe.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let s="";a==="plain"?s="pl":a==="phrase"?s="ph":a==="websearch"&&(s="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Qx.default=zhe;var Whe=wa&&wa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cj,"__esModule",{value:!0});const P0=Whe(Qx);let Vhe=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=r,this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new P0.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const a="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new P0.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:s=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new P0.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new P0.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new P0.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};cj.default=Vhe;var hj={},mj={};Object.defineProperty(mj,"__esModule",{value:!0});mj.version=void 0;mj.version="0.0.0-automated";Object.defineProperty(hj,"__esModule",{value:!0});hj.DEFAULT_HEADERS=void 0;const Hhe=mj;hj.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Hhe.version}`};var xH=wa&&wa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(m4,"__esModule",{value:!0});const qhe=xH(cj),Ghe=xH(Qx),Khe=hj;let Xhe=class yH{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},Khe.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new qhe.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new yH(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:s}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||a?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=r);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new Ghe.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};m4.default=Xhe;var Zp=wa&&wa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qs,"__esModule",{value:!0});qs.PostgrestError=qs.PostgrestBuilder=qs.PostgrestTransformBuilder=qs.PostgrestFilterBuilder=qs.PostgrestQueryBuilder=qs.PostgrestClient=void 0;const bH=Zp(m4);qs.PostgrestClient=bH.default;const wH=Zp(cj);qs.PostgrestQueryBuilder=wH.default;const _H=Zp(Qx);qs.PostgrestFilterBuilder=_H.default;const SH=Zp(uj);qs.PostgrestTransformBuilder=SH.default;const jH=Zp(dj);qs.PostgrestBuilder=jH.default;const EH=Zp(fj);qs.PostgrestError=EH.default;var Yhe=qs.default={PostgrestClient:bH.default,PostgrestQueryBuilder:wH.default,PostgrestFilterBuilder:_H.default,PostgrestTransformBuilder:SH.default,PostgrestBuilder:jH.default,PostgrestError:EH.default};const{PostgrestClient:Zhe,PostgrestQueryBuilder:Ilt,PostgrestFilterBuilder:$lt,PostgrestTransformBuilder:Flt,PostgrestBuilder:Llt,PostgrestError:Blt}=Yhe,Jhe="2.11.2",Qhe={"X-Client-Info":`realtime-js/${Jhe}`},eme="1.0.0",NH=1e4,tme=1e3;var fm;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(fm||(fm={}));var li;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(li||(li={}));var Ao;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ao||(Ao={}));var ZT;(function(e){e.websocket="websocket"})(ZT||(ZT={}));var Pd;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Pd||(Pd={}));class rme{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),s=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+s));o=o+s;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class CH{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var an;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(an||(an={}));const A3=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((s,o)=>(s[o]=nme(o,e,t,a),s),{})},nme=(e,t,r,n)=>{const a=t.find(l=>l.name===e),s=a==null?void 0:a.type,o=r[e];return s&&!n.includes(s)?kH(s,o):JT(o)},kH=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return ome(t,r)}switch(e){case an.bool:return ame(t);case an.float4:case an.float8:case an.int2:case an.int4:case an.int8:case an.numeric:case an.oid:return sme(t);case an.json:case an.jsonb:return ime(t);case an.timestamp:return lme(t);case an.abstime:case an.date:case an.daterange:case an.int4range:case an.int8range:case an.money:case an.reltime:case an.text:case an.time:case an.timestamptz:case an.timetz:case an.tsrange:case an.tstzrange:return JT(t);default:return JT(t)}},JT=e=>e,ame=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},sme=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ime=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ome=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const o=e.slice(1,r);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>kH(t,l))}return e},lme=e=>typeof e=="string"?e.replace(" ","T"):e,TH=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class HE{constructor(t,r,n={},a=NH){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var P3;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(P3||(P3={}));class Eg{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Eg.syncState(this.state,a,s,o),this.pendingDiffs.forEach(c=>{this.state=Eg.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Eg.syncDiff(this.state,a,s,o),l())}),this.onJoin((a,s,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:o})}),this.onLeave((a,s,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const s=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(s,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=s[u];if(f){const h=d.map(g=>g.presence_ref),p=f.map(g=>g.presence_ref),v=d.filter(g=>p.indexOf(g.presence_ref)<0),m=f.filter(g=>h.indexOf(g.presence_ref)<0);v.length>0&&(l[u]=v),m.length>0&&(c[u]=m)}else l[u]=d}),this.syncDiff(s,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:s,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(s,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var O3;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(O3||(O3={}));var R3;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(R3||(R3={}));var Gl;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Gl||(Gl={}));class p4{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=li.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new HE(this,Ao.join,this.params,this.timeout),this.rejoinTimer=new CH(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=li.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=li.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=li.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=li.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ao.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new Eg(this),this.broadcastEndpointURL=TH(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:l}}=this.params;this._onError(d=>t==null?void 0:t(Gl.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(Gl.CLOSED));const c={},u={broadcast:s,presence:o,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(Gl.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,v=[];for(let m=0;m<p;m++){const g=h[m],{filter:{event:b,schema:y,table:w,filter:_}}=g,S=d&&d[m];if(S&&S.event===b&&S.schema===y&&S.table===w&&S.filter===_)v.push(Object.assign(Object.assign({},g),{id:S.id}));else{this.unsubscribe(),t==null||t(Gl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Gl.SUBSCRIBED);return}}).receive("error",d=>{t==null||t(Gl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Gl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=li.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ao.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const a=new HE(this,Ao.leave,{},t);a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(t,r,n){const a=new AbortController,s=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(s),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new HE(this,t,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,s;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Ao;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var v,m,g;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((g=(m=p.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(p=>p.callback(h,n)):(s=this.bindings[o])===null||s===void 0||s.filter(p=>{var v,m,g,b,y,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,S=(v=p.filter)===null||v===void 0?void 0:v.event;return _&&((m=r.ids)===null||m===void 0?void 0:m.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((g=r.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const _=(y=(b=p==null?void 0:p.filter)===null||b===void 0?void 0:b.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:m,table:g,commit_timestamp:b,type:y,errors:w}=v;h=Object.assign(Object.assign({},{schema:m,table:g,commit_timestamp:b,eventType:y,new:{},old:{},errors:w}),this._getPayloadRecords(v))}p.callback(h,n)})}_isClosed(){return this.state===li.closed}_isJoined(){return this.state===li.joined}_isJoining(){return this.state===li.joining}_isLeaving(){return this.state===li.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),s={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&p4.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ao.close,{},t)}_onError(t){this._on(Ao.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=li.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=A3(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=A3(t.columns,t.old_record)),r}}const cme=()=>{},ume=typeof WebSocket<"u",dme=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fme{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Qhe,this.params={},this.timeout=NH,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=cme,this.conn=null,this.sendBuffer=[],this.serializer=new rme,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...l)=>qo(async()=>{const{default:c}=await Promise.resolve().then(()=>Yp);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${ZT.websocket}`,this.httpEndpoint=TH(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(s,o)=>o(JSON.stringify(s)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new CH(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(ume){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new hme(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),qo(async()=>{const{default:t}=await import("./browser-CG1u-Fjh.js").then(r=>r.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:eme}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case fm.connecting:return Pd.Connecting;case fm.open:return Pd.Open;case fm.closing:return Pd.Closing;default:return Pd.Closed}}isConnected(){return this.connectionState()===Pd.Open}channel(t,r={config:{}}){const n=new p4(`realtime:${t}`,r,this);return this.channels.push(n),n}push(t){const{topic:r,event:n,payload:a,ref:s}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${s})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(a=>{r&&a.updateJoinPayload({access_token:r}),a.joinedOnce&&a._isJoined()&&a._push(Ao.access_token,{access_token:r})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(tme,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:a,payload:s,ref:o}=r;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${a} ${o&&"("+o+")"||""}`,s),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(a,s,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ao.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([dme],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class hme{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=fm.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class g4 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function pa(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class mme extends g4{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class QT extends g4{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var pme=function(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const AH=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>qo(async()=>{const{default:n}=await Promise.resolve().then(()=>Yp);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},gme=()=>pme(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qo(()=>Promise.resolve().then(()=>Yp),void 0)).Response:Response}),eA=e=>{if(Array.isArray(e))return e.map(r=>eA(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[a]=eA(n)}),t};var Xf=function(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const qE=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),vme=(e,t,r)=>Xf(void 0,void 0,void 0,function*(){const n=yield gme();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new mme(qE(a),e.status||500))}).catch(a=>{t(new QT(qE(a),a))}):t(new QT(qE(e),e))}),xme=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function ey(e,t,r,n,a,s){return Xf(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,xme(t,n,a,s)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>vme(c,l,n))})})}function $w(e,t,r,n){return Xf(this,void 0,void 0,function*(){return ey(e,"GET",t,r,n)})}function ru(e,t,r,n,a){return Xf(this,void 0,void 0,function*(){return ey(e,"POST",t,n,a,r)})}function yme(e,t,r,n,a){return Xf(this,void 0,void 0,function*(){return ey(e,"PUT",t,n,a,r)})}function bme(e,t,r,n){return Xf(this,void 0,void 0,function*(){return ey(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function PH(e,t,r,n,a){return Xf(this,void 0,void 0,function*(){return ey(e,"DELETE",t,n,a,r)})}var Ls=function(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const wme={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},D3={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _me{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=AH(a)}uploadOrUpdate(t,r,n,a){return Ls(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},D3),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:s,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield f.json();return f.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(pa(s))return{data:null,error:s};throw s}})}upload(t,r,n){return Ls(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Ls(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:D3.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),h=yield f.json();return f.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(pa(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Ls(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const s=yield ru(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new g4("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(pa(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ls(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ls(this,void 0,void 0,function*(){try{return{data:yield ru(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(pa(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Ls(this,void 0,void 0,function*(){try{return{data:{path:(yield ru(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(pa(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Ls(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),s=yield ru(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(a){if(pa(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Ls(this,void 0,void 0,function*(){try{const a=yield ru(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(a){if(pa(a))return{data:null,error:a};throw a}})}download(t,r){return Ls(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=s?`?${s}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield $w(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(pa(l))return{data:null,error:l};throw l}})}info(t){return Ls(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield $w(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:eA(n),error:null}}catch(n){if(pa(n))return{data:null,error:n};throw n}})}exists(t){return Ls(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield bme(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(pa(n)&&n instanceof QT){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&a.push(s);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Ls(this,void 0,void 0,function*(){try{return{data:yield PH(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(pa(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ls(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},wme),r),{prefix:t||""});return{data:yield ru(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(pa(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Sme="2.7.1",jme={"X-Client-Info":`storage-js/${Sme}`};var ph=function(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Eme{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},jme),r),this.fetch=AH(n)}listBuckets(){return ph(this,void 0,void 0,function*(){try{return{data:yield $w(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(pa(t))return{data:null,error:t};throw t}})}getBucket(t){return ph(this,void 0,void 0,function*(){try{return{data:yield $w(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(pa(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return ph(this,void 0,void 0,function*(){try{return{data:yield ru(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(pa(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return ph(this,void 0,void 0,function*(){try{return{data:yield yme(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(pa(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ph(this,void 0,void 0,function*(){try{return{data:yield ru(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(pa(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ph(this,void 0,void 0,function*(){try{return{data:yield PH(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(pa(r))return{data:null,error:r};throw r}})}}class Nme extends Eme{constructor(t,r={},n){super(t,r,n)}from(t){return new _me(this.url,this.headers,t,this.fetch)}}const Cme="2.49.4";let rg="";typeof Deno<"u"?rg="deno":typeof document<"u"?rg="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rg="react-native":rg="node";const kme={"X-Client-Info":`supabase-js-${rg}/${Cme}`},Tme={headers:kme},Ame={schema:"public"},Pme={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ome={};var Rme=function(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Dme=e=>{let t;return e?t=e:typeof fetch>"u"?t=pH:t=fetch,(...r)=>t(...r)},Mme=()=>typeof Headers>"u"?gH:Headers,Ime=(e,t,r)=>{const n=Dme(r),a=Mme();return(s,o)=>Rme(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(s,Object.assign(Object.assign({},o),{headers:u}))})};var $me=function(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function Fme(e){return e.replace(/\/$/,"")}function Lme(e,t){const{db:r,auth:n,realtime:a,global:s}=e,{db:o,auth:l,realtime:c,global:u}=t,d={db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),a),global:Object.assign(Object.assign({},u),s),accessToken:()=>$me(this,void 0,void 0,function*(){return""})};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}const OH="2.69.1",Dh=30*1e3,tA=3,GE=tA*Dh,Bme="http://localhost:9999",Ume="supabase.auth.token",zme={"X-Client-Info":`gotrue-js/${OH}`},rA="X-Supabase-Api-Version",RH={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Wme=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Vme=6e5;class v4 extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function dr(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Hme extends v4{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function qme(e){return dr(e)&&e.name==="AuthApiError"}class DH extends v4{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class sd extends v4{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Kc extends sd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Gme(e){return dr(e)&&e.name==="AuthSessionMissingError"}class KE extends sd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class wb extends sd{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class _b extends sd{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Kme(e){return dr(e)&&e.name==="AuthImplicitGrantRedirectError"}class M3 extends sd{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class nA extends sd{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function XE(e){return dr(e)&&e.name==="AuthRetryableFetchError"}class I3 extends sd{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Ng extends sd{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const $3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),F3=` 	
\r=`.split(""),Xme=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<F3.length;t+=1)e[F3[t].charCodeAt(0)]=-2;for(let t=0;t<$3.length;t+=1)e[$3[t].charCodeAt(0)]=t;return e})();function MH(e,t,r){const n=Xme[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function L3(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=o=>{Jme(o,n,r)};for(let o=0;o<e.length;o+=1)MH(e.charCodeAt(o),a,s);return t.join("")}function Yme(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Zme(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Yme(n,t)}}function Jme(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Qme(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)MH(e.charCodeAt(a),r,n);return new Uint8Array(t)}function epe(e){const t=[];return Zme(e,r=>t.push(r)),new Uint8Array(t)}function tpe(e){return Math.round(Date.now()/1e3)+e}function rpe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ul=()=>typeof window<"u"&&typeof document<"u",xd={tested:!1,writable:!1},Cg=()=>{if(!ul())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xd.tested)return xd.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),xd.tested=!0,xd.writable=!0}catch{xd.tested=!0,xd.writable=!1}return xd.writable};function npe(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,s)=>{t[s]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const IH=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>qo(async()=>{const{default:n}=await Promise.resolve().then(()=>Yp);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},ape=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",$H=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Sb=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},jb=async(e,t)=>{await e.removeItem(t)};class pj{constructor(){this.promise=new pj.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}pj.promiseConstructor=Promise;function YE(e){const t=e.split(".");if(t.length!==3)throw new Ng("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Wme.test(t[n]))throw new Ng("JWT not in base64url format");return{header:JSON.parse(L3(t[0])),payload:JSON.parse(L3(t[1])),signature:Qme(t[2]),raw:{header:t[0],payload:t[1]}}}async function spe(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ipe(e,t){return new Promise((n,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){n(o);return}}catch(o){if(!t(s,o)){a(o);return}}})()})}function ope(e){return("0"+e.toString(16)).substr(-2)}function lpe(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let s=0;s<56;s++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,ope).join("")}async function cpe(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function upe(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await cpe(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gh(e,t,r=!1){const n=lpe();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await $H(e,`${t}-code-verifier`,a);const s=await upe(n);return[s,n===s?"plain":"s256"]}const dpe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fpe(e){const t=e.headers.get(rA);if(!t||!t.match(dpe))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function hpe(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function mpe(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var ppe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const Ed=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),gpe=[502,503,504];async function B3(e){var t;if(!ape(e))throw new nA(Ed(e),0);if(gpe.includes(e.status))throw new nA(Ed(e),e.status);let r;try{r=await e.json()}catch(s){throw new DH(Ed(s),s)}let n;const a=fpe(e);if(a&&a.getTime()>=RH["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new I3(Ed(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Kc}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new I3(Ed(r),e.status,r.weak_password.reasons);throw new Hme(Ed(r),e.status||500,n)}const vpe=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Er(e,t,r,n){var a;const s=Object.assign({},n==null?void 0:n.headers);s[rA]||(s[rA]=RH["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await xpe(e,t,r+l,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function xpe(e,t,r,n,a,s){const o=vpe(t,n,a,s);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new nA(Ed(c),0)}if(l.ok||await B3(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await B3(c)}}function Xc(e){var t;let r=null;_pe(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=tpe(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function U3(e){const t=Xc(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ou(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function ype(e){return{data:e,error:null}}function bpe(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s}=e,o=ppe(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function wpe(e){return e}function _pe(e){return e.access_token&&e.refresh_token&&e.expires_in}var Spe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class jpe{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=IH(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r="global"){try{return await Er(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Er(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ou})}catch(n){if(dr(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Spe(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Er(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:bpe,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(dr(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Er(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ou})}catch(r){if(dr(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,s,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Er(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:wpe});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const m=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);u[`${g}Page`]=m}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(dr(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){try{return await Er(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ou})}catch(r){if(dr(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){try{return await Er(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:ou})}catch(n){if(dr(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){try{return await Er(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:ou})}catch(n){if(dr(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:r,error:n}=await Er(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(dr(r))return{data:null,error:r};throw r}}async _deleteFactor(t){try{return{data:await Er(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}}}const Epe={getItem:e=>Cg()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Cg()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Cg()&&globalThis.localStorage.removeItem(e)}};function z3(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Npe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const vh={debug:!!(globalThis&&Cg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class FH extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Cpe extends FH{}async function kpe(e,t,r){vh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),vh.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){vh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{vh.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw vh.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Cpe(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(vh.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Npe();const Tpe={url:Bme,storageKey:Ume,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zme,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function W3(e,t,r){return await r()}class Cv{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Cv.nextInstanceID,Cv.nextInstanceID+=1,this.instanceID>0&&ul()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Tpe),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new jpe({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=IH(a.fetch),this.lock=a.lock||W3,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ul()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=kpe:this.lock=W3,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Cg()?this.storage=Epe:(this.memoryStorage={},this.storage=z3(this.memoryStorage)):(this.memoryStorage={},this.storage=z3(this.memoryStorage)),ul()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${OH}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=npe(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ul()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Kme(s)){const c=(t=s.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return dr(r)?{error:r}:{error:new DH("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const s=await Er(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Xc}),{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(dr(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var r,n,a;try{let s;if("email"in t){const{email:d,password:f,options:h}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await gh(this.storage,this.storageKey)),s=await Er(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:v},xform:Xc})}else if("phone"in t){const{phone:d,password:f,options:h}=t;s=await Er(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Xc})}else throw new wb("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(dr(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let r;if("email"in t){const{email:s,password:o,options:l}=t;r=await Er(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:U3})}else if("phone"in t){const{phone:s,password:o,options:l}=t;r=await Er(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:U3})}else throw new wb("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new KE}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(dr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const r=await Sb(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:s,error:o}=await Er(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Xc});if(await jb(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new KE}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:o})}catch(s){if(dr(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:s,nonce:o}=t,l=await Er(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Xc}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new KE}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(dr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,s,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await gh(this.storage,this.storageKey));const{error:f}=await Er(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Er(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new wb("You must provide either an email or phone number.")}catch(l){if(dr(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,s;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,s=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Er(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:Xc});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(dr(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await gh(this.storage,this.storageKey)),await Er(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:ype})}catch(s){if(dr(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Kc;const{error:a}=await Er(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(dr(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:s}=t,{error:o}=await Er(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:s}=t,{data:o,error:l}=await Er(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new wb("You must provide either an email or phone number and a type")}catch(r){if(dr(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Sb(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<GE:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Er(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ou}):await this._useSession(async r=>{var n,a,s;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kc}:await Er(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:ou})})}catch(r){if(dr(r))return Gme(r)&&(await this._removeSession(),await jb(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:s}=n;if(s)throw s;if(!a.session)throw new Kc;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await gh(this.storage,this.storageKey));const{data:u,error:d}=await Er(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:ou});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(dr(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Kc;const r=Date.now()/1e3;let n=r,a=!0,s=null;const{payload:o}=YE(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(dr(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Kc;const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(dr(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ul())throw new _b("No browser detected.");if(t.error||t.error_description||t.error_code)throw new _b(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new M3("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _b("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new M3("No code detected.");const{data:y,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:s,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!s||!l||!o||!u)throw new _b("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const p=h-d;p*1e3<=Dh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const v=h-f;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,d);const{data:m,error:g}=await this._getUser(s);if(g)throw g;const b={provider_token:n,provider_refresh_token:a,access_token:s,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:t.type},error:null}}catch(n){if(dr(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Sb(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s)return{error:s};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(qme(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await jb(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=rpe(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:s},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await gh(this.storage,this.storageKey,!0));try{return await Er(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(dr(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async s=>{var o,l,c,u,d;const{data:f,error:h}=s;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Er(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return ul()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(dr(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:s,error:o}=r;if(o)throw o;return await Er(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(dr(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await ipe(async a=>(a>0&&await spe(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Er(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Xc})),(a,s)=>{const o=200*Math.pow(2,a);return s&&XE(s)&&Date.now()+o-n<Dh})}catch(n){if(this._debug(r,"error",n),dr(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ul()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Sb(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const a=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<GE;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${GE}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:s}=await this._callRefreshToken(n.refresh_token);s&&(console.error(s),XE(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Kc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new pj;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new Kc;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(a,"error",s),dr(s)){const o={session:null,error:s};return XE(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await $H(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await jb(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ul()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Dh);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Dh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Dh}ms, refresh threshold is ${tA} ticks`),a<=tA&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof FH)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ul()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await gh(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);a.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;return s?{data:null,error:s}:await Er(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(dr(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:s,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await Er(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(dr(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s)return{data:null,error:s};const{data:o,error:l}=await Er(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(dr(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;return s?{data:null,error:s}:await Er(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(dr(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:s}=t;if(s)return{data:null,error:s};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=YE(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n||(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+Vme>Date.now()))return n;const{data:a,error:s}=await Er(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!a.keys||a.keys.length===0)throw new Ng("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),n=a.keys.find(o=>o.kid===t),!n)throw new Ng("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};n=p.session.access_token}const{header:a,payload:s,signature:o,raw:{header:l,payload:c}}=YE(n);if(hpe(s.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:s,header:a,signature:o},error:null}}const u=mpe(a.alg),d=await this.fetchJwk(a.kid,r),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,epe(`${l}.${c}`)))throw new Ng("Invalid JWT signature");return{data:{claims:s,header:a,signature:o},error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}}}Cv.nextInstanceID=0;const Ape=Cv;class Ppe extends Ape{constructor(t){super(t)}}var Ope=function(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Rpe{constructor(t,r,n){var a,s,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=Fme(t);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Ame,realtime:Ome,auth:Object.assign(Object.assign({},Pme),{storageKey:c}),global:Tme},d=Lme(n??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Ime(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Zhe(`${l}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Che(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Nme(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Ope(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:s,flowType:o,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ppe({url:this.authUrl,headers:Object.assign(Object.assign({},f),u),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new fme(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const gj=(e,t,r)=>new Rpe(e,t,r),LH="https://gmajzyndavrqvjccojus.supabase.co",Dpe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdtYWp6eW5kYXZycXZqY2NvanVzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0OTM1NjEsImV4cCI6MjA2MTA2OTU2MX0.BryyXcZIgCKBfgVky2TouD2Ru1gO9Hrd5QyJ7c7vUdk",ue=gj(LH,Dpe),Mpe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdtYWp6eW5kYXZycXZqY2NvanVzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0NTQ5MzU2MSwiZXhwIjoyMDYxMDY5NTYxfQ.I-IwOAQWhihEzmUSguxVEcS_58T9c-ncfUcGcPu7JdA";gj(LH,Mpe);async function qa(e){try{const{data:t,error:r}=await e;return r?(console.error("Ошибка Supabase:",r),{data:null,error:{message:r.message||"Произошла ошибка при выполнении запроса",status:r.status||500}}):{data:t,error:null}}catch(t){const r=t;return console.error("Исключение при обращении к Supabase:",r),{data:null,error:{message:r.message||"Произошла неизвестная ошибка",status:500}}}}class V3 extends Error{constructor(r,n=400){super(r);Yy(this,"status");this.name="ApiError",this.status=n}}const xh=e=>{if(e.error)throw new V3(e.error.message);if(!e.data)throw new V3("Нет данных в ответе сервера");return e.data};class x4{static getEnabledProviders(){return this.PROVIDERS.filter(t=>t.enabled)}static generateQRData(t){return{salonId:t,timestamp:Date.now(),source:"qr"}}static createQRUrl(t){const r=window.location.origin,n=this.generateQRData(t),a=new URLSearchParams({salon:t,source:"qr",t:n.timestamp.toString()});return`${r}/auth/${t}?${a.toString()}`}static async signInWithProvider(t,r,n="direct"){try{const a=`${window.location.origin}/auth/callback?salon=${r}&source=${n}`,{data:s,error:o}=await ue.auth.signInWithOAuth({provider:t,options:{redirectTo:a,queryParams:{salon_id:r,auth_source:n}}});return o?{success:!1,error:`Ошибка авторизации через ${t}: ${o.message}`}:{success:!0}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Неизвестная ошибка"}}}static async signInAsGuest(t){try{const{data:r,error:n}=await ue.rpc("create_guest_user",{p_name:t.name,p_phone:t.phone,p_salon_id:t.salonId});return n?{success:!1,error:`Ошибка создания гостевого аккаунта: ${n.message}`}:{success:!0,user:{id:r.user_id,name:t.name,phone:t.phone}}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Ошибка создания гостевого аккаунта"}}}static async checkExistingSession(){var t,r;try{const{data:{session:n},error:a}=await ue.auth.getSession();return a?{success:!1,error:a.message}:n!=null&&n.user?{success:!0,session:n,user:{id:n.user.id,email:n.user.email,name:((t=n.user.user_metadata)==null?void 0:t.full_name)||n.user.email||"Пользователь",avatar:(r=n.user.user_metadata)==null?void 0:r.avatar_url}}:{success:!1}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Ошибка проверки сессии"}}}static async signOut(){try{const{error:t}=await ue.auth.signOut();return t?{success:!1,error:t.message}:{success:!0}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Ошибка выхода"}}}static async saveSalonBinding(t){try{const{error:r}=await ue.rpc("save_salon_booking",{p_salon_id:t});return r?(console.error("Ошибка сохранения привязки к салону:",r),!1):!0}catch(r){return console.error("Исключение при сохранении привязки:",r),!1}}static async getSalonInfo(t){try{const{data:r,error:n}=await ue.from("salons").select("id, name, address, phone, logo_url").eq("id",t).single();if(n)throw n;return r}catch(r){return console.error("Ошибка получения информации о салоне:",r),null}}}Yy(x4,"PROVIDERS",[{id:"google",name:"Google",icon:"🔍",color:"bg-red-500 hover:bg-red-600",enabled:!0},{id:"vkontakte",name:"ВКонтакте",icon:"🔵",color:"bg-blue-600 hover:bg-blue-700",enabled:!0},{id:"yandex",name:"Яндекс",icon:"🟡",color:"bg-yellow-400 hover:bg-yellow-500 text-black",enabled:!0},{id:"telegram",name:"Telegram",icon:"✈️",color:"bg-blue-500 hover:bg-blue-600",enabled:!1}]);const H3=x4,Ru={async getAll(){const{data:e,error:t}=await ue.from("specialists").select("*");if(t)throw console.error("Ошибка при получении специалистов:",t),t;return e||[]},async getById(e){const{data:t,error:r}=await ue.from("specialists").select("*").eq("profile_id",e).single();if(r)throw console.error(`Ошибка при получении специалиста с ID ${e}:`,r),r;return t},async create(e){const{data:t,error:r}=await ue.from("specialists").insert([e]).select().single();if(r)throw console.error("Ошибка при создании специалиста:",r),r;return t},async update(e,t){const{data:r,error:n}=await ue.from("specialists").update(t).eq("id",e).select().single();if(n)throw console.error(`Ошибка при обновлении специалиста с ID ${e}:`,n),n;return r},async delete(e){const{error:t}=await ue.from("specialists").delete().eq("id",e);if(t)throw console.error(`Ошибка при удалении специалиста с ID ${e}:`,t),t},async search(e){const{data:t,error:r}=await ue.from("specialists").select("*").or(`name.ilike.%${e}%,specialization.ilike.%${e}%`);if(r)throw console.error(`Ошибка при поиске специалистов по запросу "${e}":`,r),r;return t||[]},async getReviewsByStaff(e){const{data:t,error:r}=await ue.from("staff_reviews").select("*, clients(full_name)").eq("staff_id",e).order("created_at",{ascending:!1});if(r)throw console.error("Ошибка при получении отзывов:",r),r;return(t||[]).map(n=>{var s;const a=n;return{...a,client_name:((s=a.clients)==null?void 0:s.full_name)||void 0}})},async addReview(e){const{data:t,error:r}=await ue.from("staff_reviews").insert([e]).select().single();if(r)throw console.error("Ошибка при добавлении отзыва:",r),r;return t},async getAverageRating(e){const{data:t,error:r}=await ue.from("staff_reviews").select("rating").eq("staff_id",e);if(r)throw console.error("Ошибка при получении рейтинга:",r),r;if(!t||t.length===0)return 0;const n=t.reduce((a,s)=>a+(s.rating||0),0);return Math.round(n/t.length*10)/10}},ei=uo()(Kf((e,t)=>({token:null,userRole:null,isAuthenticated:!1,isLoading:!1,error:null,user:null,profile:null,specialist:null,login:(r,n)=>{e({token:n,userRole:r,isAuthenticated:!0,error:null})},loginWithCredentials:async r=>{var n;e({isLoading:!0,error:null});try{const{data:a,error:s}=await ue.auth.signInWithPassword({email:r.username,password:r.password});if(s||!a.user)return e({isLoading:!1,error:(s==null?void 0:s.message)||"Ошибка входа"}),!1;const{data:o,error:l}=await ue.from("profiles").select("*").eq("id",a.user.id).limit(1),c=(o==null?void 0:o[0])||null;let u=null;c&&(u=await Ru.getById(c.id));let d=null;return c&&c.role==="admin"?d="admin":c&&c.role==="specialist"?d="specialist":c&&c.role==="client"?d="client":u?d="specialist":d="client",e({token:(n=a.session)==null?void 0:n.access_token,user:a.user,profile:c,specialist:u,userRole:d,isAuthenticated:!0,isLoading:!1,error:null}),!0}catch(a){return e({isLoading:!1,error:a instanceof Error?a.message:"Ошибка при входе в систему"}),!1}},logout:()=>{H3.logout(),e({token:null,userRole:null,isAuthenticated:!1,error:null})},checkAuth:()=>{const{token:r}=t(),n=!!r;let a=t().userRole;return n&&!a&&(a=H3.getCurrentUserRole()),e({isAuthenticated:n,userRole:n?a:null}),n},setUserRole:r=>{e({userRole:r})},clearError:()=>{e({error:null})}}),{name:"beauty-track-auth-storage",storage:mH(()=>localStorage),partialize:e=>({token:e.token,userRole:e.userRole,isAuthenticated:e.isAuthenticated,user:e.user,profile:e.profile,specialist:e.specialist})}));function jl({className:e,...t}){return i.jsx("div",{className:Ue("animate-pulse rounded-md bg-muted",e),...t})}const oi=({children:e,allowedRoles:t})=>{const r=ei(s=>s.isAuthenticated),n=ei(s=>s.userRole);return ei(s=>s.isLoading)?i.jsxs("div",{className:"flex items-center justify-center h-screen",children:[i.jsx(jl,{className:"h-12 w-12 rounded-full"}),i.jsxs("div",{className:"ml-4 space-y-2",children:[i.jsx(jl,{className:"h-4 w-[250px]"}),i.jsx(jl,{className:"h-4 w-[200px]"})]})]}):r?!Array.isArray(t)||!t.includes(n)?i.jsx(t3,{to:"/",replace:!0}):i.jsx(i.Fragment,{children:e}):(console.log("ProtectedRoute: Not authenticated, redirecting to /login"),i.jsx(t3,{to:"/login",replace:!0}))},BH=x.createContext(void 0),Ba=()=>{const e=x.useContext(BH);if(e===void 0)throw new Error("useBranch must be used within a BranchProvider");return e},UH=({children:e})=>{const[t,r]=x.useState([]),[n,a]=x.useState(null),[s,o]=x.useState(!0),[l,c]=x.useState([]),[u,d]=x.useState(null),[f,h]=x.useState(!0);x.useEffect(()=>{(async()=>{try{o(!0);const{data:j,error:N}=await ue.from("branches").select("*").order("created_at",{ascending:!1});if(N)throw N;const k=(j||[]).map(T=>({id:T.id,name:T.name,address:T.address||"",phone:T.phone||"",email:T.email||"",description:T.description||"",image:T.image||"",is_active:T.is_active??!0,created_at:T.created_at,color:T.color||"#FFB6C1"}));r(k);const C=localStorage.getItem("currentBranchId");if(C){const T=k.find(A=>A.id===C);T&&a(T)}}catch(j){console.error("Error loading branches:",j)}finally{o(!1)}})()},[]),x.useEffect(()=>{(async()=>{try{h(!0);const{data:j,error:N}=await ue.from("studios").select("*").order("created_at",{ascending:!1});if(N)throw N;const k=(j||[]).map(T=>({id:T.id,name:T.name,address:T.address||"",phone:T.phone||"",email:T.email||"",description:T.description||"",image:T.image||"",is_active:T.is_active??!0,created_at:T.created_at,color:T.color||"#FFB6C1",branch_id:T.branch_id}));c(k);const C=localStorage.getItem("currentStudioId");if(C){const T=k.find(A=>A.id===C);T&&d(T)}}catch(j){console.error("Error loading studios:",j)}finally{h(!1)}})()},[]);const S={branches:t,currentBranch:n,setBranches:r,setCurrentBranch:E=>{a(E),E?localStorage.setItem("currentBranchId",E.id):localStorage.removeItem("currentBranchId")},addBranch:async E=>{try{const{data:j,error:N}=await ue.from("branches").insert([E]).select().single();if(N)throw N;const k={id:j.id,name:j.name,address:j.address||"",phone:j.phone||"",email:j.email||"",description:j.description||"",image:j.image||"",is_active:j.is_active??!0,created_at:j.created_at,color:j.color||"#FFB6C1"};r(C=>[k,...C])}catch(j){throw console.error("Error adding branch:",j),j}},updateBranch:async(E,j)=>{try{const{data:N,error:k}=await ue.from("branches").update(j).eq("id",E).select().single();if(k)throw k;const C={id:N.id,name:N.name,address:N.address||"",phone:N.phone||"",email:N.email||"",description:N.description||"",image:N.image||"",is_active:N.is_active??!0,created_at:N.created_at,color:N.color||"#FFB6C1"};r(T=>T.map(A=>A.id===E?C:A)),(n==null?void 0:n.id)===E&&a(C)}catch(N){throw console.error("Error updating branch:",N),N}},deleteBranch:async E=>{try{const{error:j}=await ue.from("branches").delete().eq("id",E);if(j)throw j;r(N=>N.filter(k=>k.id!==E)),(n==null?void 0:n.id)===E&&(a(null),localStorage.removeItem("currentBranchId"))}catch(j){throw console.error("Error deleting branch:",j),j}},studios:l,currentStudio:u,setStudios:c,setCurrentStudio:E=>{d(E),E?localStorage.setItem("currentStudioId",E.id):localStorage.removeItem("currentStudioId")},addStudio:async E=>{try{const{data:j,error:N}=await ue.from("studios").insert([E]).select().single();if(N)throw N;const k={id:j.id,name:j.name,address:j.address||"",phone:j.phone||"",email:j.email||"",description:j.description||"",image:j.image||"",is_active:j.is_active??!0,created_at:j.created_at,color:j.color||"#FFB6C1",branch_id:j.branch_id};c(C=>[k,...C])}catch(j){throw console.error("Error adding studio:",j),j}},updateStudio:async(E,j)=>{try{const{data:N,error:k}=await ue.from("studios").update(j).eq("id",E).select().single();if(k)throw k;const C={id:N.id,name:N.name,address:N.address||"",phone:N.phone||"",email:N.email||"",description:N.description||"",image:N.image||"",is_active:N.is_active??!0,created_at:N.created_at,color:N.color||"#FFB6C1",branch_id:N.branch_id};c(T=>T.map(A=>A.id===E?C:A)),(u==null?void 0:u.id)===E&&d(C)}catch(N){throw console.error("Error updating studio:",N),N}},deleteStudio:async E=>{try{const{error:j}=await ue.from("studios").delete().eq("id",E);if(j)throw j;c(N=>N.filter(k=>k.id!==E)),(u==null?void 0:u.id)===E&&(d(null),localStorage.removeItem("currentStudioId"))}catch(j){throw console.error("Error deleting studio:",j),j}},isLoading:s,isLoadingStudios:f};return i.jsx(BH.Provider,{value:S,children:e})};function q3(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ipe(...e){return t=>{let r=!1;const n=e.map(a=>{const s=q3(a,t);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let a=0;a<n.length;a++){const s=n[a];typeof s=="function"?s():q3(e[a],null)}}}}function zH(e){const t=$pe(e),r=x.forwardRef((n,a)=>{const{children:s,...o}=n,l=x.Children.toArray(s),c=l.find(Lpe);if(c){const u=c.props.children,d=l.map(f=>f===c?x.Children.count(u)>1?x.Children.only(null):x.isValidElement(u)?u.props.children:null:f);return i.jsx(t,{...o,ref:a,children:x.isValidElement(u)?x.cloneElement(u,void 0,d):null})}return i.jsx(t,{...o,ref:a,children:s})});return r.displayName=`${e}.Slot`,r}var WH=zH("Slot");function $pe(e){const t=x.forwardRef((r,n)=>{const{children:a,...s}=r;if(x.isValidElement(a)){const o=Upe(a),l=Bpe(s,a.props);return a.type!==x.Fragment&&(l.ref=n?Ipe(n,o):o),x.cloneElement(a,l)}return x.Children.count(a)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Fpe=Symbol("radix.slottable");function Lpe(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Fpe}function Bpe(e,t){const r={...t};for(const n in t){const a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...l)=>{s(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...s}:n==="className"&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}function Upe(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const ty=qp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ne=x.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},s)=>{const o=n?WH:"button";return i.jsx(o,{className:Ue(ty({variant:t,size:r,className:e})),ref:s,...a})});ne.displayName="Button";function Ir(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function G3(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function vj(...e){return t=>{let r=!1;const n=e.map(a=>{const s=G3(a,t);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let a=0;a<n.length;a++){const s=n[a];typeof s=="function"?s():G3(e[a],null)}}}}function ri(...e){return x.useCallback(vj(...e),e)}function ry(e,t=[]){let r=[];function n(s,o){const l=x.createContext(o),c=r.length;r=[...r,o];const u=f=>{var b;const{scope:h,children:p,...v}=f,m=((b=h==null?void 0:h[e])==null?void 0:b[c])||l,g=x.useMemo(()=>v,Object.values(v));return i.jsx(m.Provider,{value:g,children:p})};u.displayName=s+"Provider";function d(f,h){var m;const p=((m=h==null?void 0:h[e])==null?void 0:m[c])||l,v=x.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[u,d]}const a=()=>{const s=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,zpe(a,...t)]}function zpe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var Hu=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},Wpe=Vf[" useInsertionEffect ".trim().toString()]||Hu;function VH({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,s,o]=Vpe({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const d=x.useRef(e!==void 0);x.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=x.useCallback(d=>{var f;if(l){const h=Hpe(d)?d(e):d;h!==e&&((f=o.current)==null||f.call(o,h))}else s(d)},[l,e,s,o]);return[c,u]}function Vpe({defaultProp:e,onChange:t}){const[r,n]=x.useState(e),a=x.useRef(r),s=x.useRef(t);return Wpe(()=>{s.current=t},[t]),x.useEffect(()=>{var o;a.current!==r&&((o=s.current)==null||o.call(s,r),a.current=r)},[r,a]),[r,n,s]}function Hpe(e){return typeof e=="function"}function Fw(e){const t=qpe(e),r=x.forwardRef((n,a)=>{const{children:s,...o}=n,l=x.Children.toArray(s),c=l.find(Kpe);if(c){const u=c.props.children,d=l.map(f=>f===c?x.Children.count(u)>1?x.Children.only(null):x.isValidElement(u)?u.props.children:null:f);return i.jsx(t,{...o,ref:a,children:x.isValidElement(u)?x.cloneElement(u,void 0,d):null})}return i.jsx(t,{...o,ref:a,children:s})});return r.displayName=`${e}.Slot`,r}function qpe(e){const t=x.forwardRef((r,n)=>{const{children:a,...s}=r;if(x.isValidElement(a)){const o=Ype(a),l=Xpe(s,a.props);return a.type!==x.Fragment&&(l.ref=n?vj(n,o):o),x.cloneElement(a,l)}return x.Children.count(a)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Gpe=Symbol("radix.slottable");function Kpe(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Gpe}function Xpe(e,t){const r={...t};for(const n in t){const a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...l)=>{const c=s(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...s}:n==="className"&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}function Ype(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Zpe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$s=Zpe.reduce((e,t)=>{const r=Fw(`Primitive.${t}`),n=x.forwardRef((a,s)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function HH(e,t){e&&oo.flushSync(()=>e.dispatchEvent(t))}function qH(e){const t=e+"CollectionProvider",[r,n]=ry(t),[a,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:g,children:b}=m,y=G.useRef(null),w=G.useRef(new Map).current;return i.jsx(a,{scope:g,itemMap:w,collectionRef:y,children:b})};o.displayName=t;const l=e+"CollectionSlot",c=Fw(l),u=G.forwardRef((m,g)=>{const{scope:b,children:y}=m,w=s(l,b),_=ri(g,w.collectionRef);return i.jsx(c,{ref:_,children:y})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=Fw(d),p=G.forwardRef((m,g)=>{const{scope:b,children:y,...w}=m,_=G.useRef(null),S=ri(g,_),E=s(d,b);return G.useEffect(()=>(E.itemMap.set(_,{ref:_,...w}),()=>void E.itemMap.delete(_))),i.jsx(h,{[f]:"",ref:S,children:y})});p.displayName=d;function v(m){const g=s(e+"CollectionConsumer",m);return G.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(g.itemMap.values()).sort((E,j)=>w.indexOf(E.ref.current)-w.indexOf(j.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},v,n]}var Jpe=x.createContext(void 0);function GH(e){const t=x.useContext(Jpe);return e||t||"ltr"}function Sc(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function Qpe(e,t=globalThis==null?void 0:globalThis.document){const r=Sc(e);x.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var e0e="DismissableLayer",aA="dismissableLayer.update",t0e="dismissableLayer.pointerDownOutside",r0e="dismissableLayer.focusOutside",K3,KH=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),XH=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...c}=e,u=x.useContext(KH),[d,f]=x.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=x.useState({}),v=ri(t,j=>f(j)),m=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=m.indexOf(g),y=d?m.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,_=y>=b,S=s0e(j=>{const N=j.target,k=[...u.branches].some(C=>C.contains(N));!_||k||(a==null||a(j),o==null||o(j),j.defaultPrevented||l==null||l())},h),E=i0e(j=>{const N=j.target;[...u.branches].some(C=>C.contains(N))||(s==null||s(j),o==null||o(j),j.defaultPrevented||l==null||l())},h);return Qpe(j=>{y===u.layers.size-1&&(n==null||n(j),!j.defaultPrevented&&l&&(j.preventDefault(),l()))},h),x.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(K3=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),X3(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=K3)}},[d,h,r,u]),x.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),X3())},[d,u]),x.useEffect(()=>{const j=()=>p({});return document.addEventListener(aA,j),()=>document.removeEventListener(aA,j)},[]),i.jsx($s.div,{...c,ref:v,style:{pointerEvents:w?_?"auto":"none":void 0,...e.style},onFocusCapture:Ir(e.onFocusCapture,E.onFocusCapture),onBlurCapture:Ir(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Ir(e.onPointerDownCapture,S.onPointerDownCapture)})});XH.displayName=e0e;var n0e="DismissableLayerBranch",a0e=x.forwardRef((e,t)=>{const r=x.useContext(KH),n=x.useRef(null),a=ri(t,n);return x.useEffect(()=>{const s=n.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),i.jsx($s.div,{...e,ref:a})});a0e.displayName=n0e;function s0e(e,t=globalThis==null?void 0:globalThis.document){const r=Sc(e),n=x.useRef(!1),a=x.useRef(()=>{});return x.useEffect(()=>{const s=l=>{if(l.target&&!n.current){let c=function(){YH(t0e,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function i0e(e,t=globalThis==null?void 0:globalThis.document){const r=Sc(e),n=x.useRef(!1);return x.useEffect(()=>{const a=s=>{s.target&&!n.current&&YH(r0e,r,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function X3(){const e=new CustomEvent(aA);document.dispatchEvent(e)}function YH(e,t,r,{discrete:n}){const a=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?HH(a,s):a.dispatchEvent(s)}var ZE=0;function o0e(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Y3()),document.body.insertAdjacentElement("beforeend",e[1]??Y3()),ZE++,()=>{ZE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ZE--}},[])}function Y3(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var JE="focusScope.autoFocusOnMount",QE="focusScope.autoFocusOnUnmount",Z3={bubbles:!1,cancelable:!0},l0e="FocusScope",ZH=x.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...o}=e,[l,c]=x.useState(null),u=Sc(a),d=Sc(s),f=x.useRef(null),h=ri(t,m=>c(m)),p=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(n){let m=function(w){if(p.paused||!l)return;const _=w.target;l.contains(_)?f.current=_:Yc(f.current,{select:!0})},g=function(w){if(p.paused||!l)return;const _=w.relatedTarget;_!==null&&(l.contains(_)||Yc(f.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&Yc(l)};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const y=new MutationObserver(b);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),y.disconnect()}}},[n,l,p.paused]),x.useEffect(()=>{if(l){Q3.add(p);const m=document.activeElement;if(!l.contains(m)){const b=new CustomEvent(JE,Z3);l.addEventListener(JE,u),l.dispatchEvent(b),b.defaultPrevented||(c0e(m0e(JH(l)),{select:!0}),document.activeElement===m&&Yc(l))}return()=>{l.removeEventListener(JE,u),setTimeout(()=>{const b=new CustomEvent(QE,Z3);l.addEventListener(QE,d),l.dispatchEvent(b),b.defaultPrevented||Yc(m??document.body,{select:!0}),l.removeEventListener(QE,d),Q3.remove(p)},0)}}},[l,u,d,p]);const v=x.useCallback(m=>{if(!r&&!n||p.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(g&&b){const y=m.currentTarget,[w,_]=u0e(y);w&&_?!m.shiftKey&&b===_?(m.preventDefault(),r&&Yc(w,{select:!0})):m.shiftKey&&b===w&&(m.preventDefault(),r&&Yc(_,{select:!0})):b===y&&m.preventDefault()}},[r,n,p.paused]);return i.jsx($s.div,{tabIndex:-1,...o,ref:h,onKeyDown:v})});ZH.displayName=l0e;function c0e(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Yc(n,{select:t}),document.activeElement!==r)return}function u0e(e){const t=JH(e),r=J3(t,e),n=J3(t.reverse(),e);return[r,n]}function JH(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function J3(e,t){for(const r of e)if(!d0e(r,{upTo:t}))return r}function d0e(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function f0e(e){return e instanceof HTMLInputElement&&"select"in e}function Yc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&f0e(e)&&t&&e.select()}}var Q3=h0e();function h0e(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=eF(e,t),e.unshift(t)},remove(t){var r;e=eF(e,t),(r=e[0])==null||r.resume()}}}function eF(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function m0e(e){return e.filter(t=>t.tagName!=="A")}var p0e=Vf[" useId ".trim().toString()]||(()=>{}),g0e=0;function sA(e){const[t,r]=x.useState(p0e());return Hu(()=>{r(n=>n??String(g0e++))},[e]),t?`radix-${t}`:""}var v0e="Arrow",QH=x.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...s}=e;return i.jsx($s.svg,{...s,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});QH.displayName=v0e;var x0e=QH;function y0e(e){const[t,r]=x.useState(void 0);return Hu(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const s=a[0];let o,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var y4="Popper",[eq,tq]=ry(y4),[b0e,rq]=eq(y4),nq=e=>{const{__scopePopper:t,children:r}=e,[n,a]=x.useState(null);return i.jsx(b0e,{scope:t,anchor:n,onAnchorChange:a,children:r})};nq.displayName=y4;var aq="PopperAnchor",sq=x.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,s=rq(aq,r),o=x.useRef(null),l=ri(t,o);return x.useEffect(()=>{s.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:i.jsx($s.div,{...a,ref:l})});sq.displayName=aq;var b4="PopperContent",[w0e,_0e]=eq(b4),iq=x.forwardRef((e,t)=>{var q,Z,I,Q,ve,z;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:v,...m}=e,g=rq(b4,r),[b,y]=x.useState(null),w=ri(t,we=>y(we)),[_,S]=x.useState(null),E=y0e(_),j=(E==null?void 0:E.width)??0,N=(E==null?void 0:E.height)??0,k=n+(s!=="center"?"-"+s:""),C=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},T=Array.isArray(u)?u:[u],A=T.length>0,B={padding:C,boundary:T.filter(j0e),altBoundary:A},{refs:R,floatingStyles:P,placement:D,isPositioned:U,middlewareData:M}=aV({strategy:"fixed",placement:k,whileElementsMounted:(...we)=>rV(...we,{animationFrame:p==="always"}),elements:{reference:g.anchor},middleware:[sV({mainAxis:a+N,alignmentAxis:o}),c&&iV({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?oV():void 0,...B}),c&&lV({...B}),cV({...B,apply:({elements:we,rects:Re,availableWidth:Pe,availableHeight:De})=>{const{width:Ne,height:J}=Re.reference,Y=we.floating.style;Y.setProperty("--radix-popper-available-width",`${Pe}px`),Y.setProperty("--radix-popper-available-height",`${De}px`),Y.setProperty("--radix-popper-anchor-width",`${Ne}px`),Y.setProperty("--radix-popper-anchor-height",`${J}px`)}}),_&&dV({element:_,padding:l}),E0e({arrowWidth:j,arrowHeight:N}),h&&uV({strategy:"referenceHidden",...B})]}),[F,K]=cq(D),X=Sc(v);Hu(()=>{U&&(X==null||X())},[U,X]);const O=(q=M.arrow)==null?void 0:q.x,W=(Z=M.arrow)==null?void 0:Z.y,L=((I=M.arrow)==null?void 0:I.centerOffset)!==0,[H,ee]=x.useState();return Hu(()=>{b&&ee(window.getComputedStyle(b).zIndex)},[b]),i.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...P,transform:U?P.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[(Q=M.transformOrigin)==null?void 0:Q.x,(ve=M.transformOrigin)==null?void 0:ve.y].join(" "),...((z=M.hide)==null?void 0:z.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(w0e,{scope:r,placedSide:F,onArrowChange:S,arrowX:O,arrowY:W,shouldHideArrow:L,children:i.jsx($s.div,{"data-side":F,"data-align":K,...m,ref:w,style:{...m.style,animation:U?void 0:"none"}})})})});iq.displayName=b4;var oq="PopperArrow",S0e={top:"bottom",right:"left",bottom:"top",left:"right"},lq=x.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,s=_0e(oq,n),o=S0e[s.placedSide];return i.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:i.jsx(x0e,{...a,ref:r,style:{...a.style,display:"block"}})})});lq.displayName=oq;function j0e(e){return e!==null}var E0e=e=>({name:"transformOrigin",options:e,fn(t){var g,b,y;const{placement:r,rects:n,middlewareData:a}=t,o=((g=a.arrow)==null?void 0:g.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=cq(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(((b=a.arrow)==null?void 0:b.x)??0)+l/2,p=(((y=a.arrow)==null?void 0:y.y)??0)+c/2;let v="",m="";return u==="bottom"?(v=o?f:`${h}px`,m=`${-c}px`):u==="top"?(v=o?f:`${h}px`,m=`${n.floating.height+c}px`):u==="right"?(v=`${-c}px`,m=o?f:`${p}px`):u==="left"&&(v=`${n.floating.width+c}px`,m=o?f:`${p}px`),{data:{x:v,y:m}}}});function cq(e){const[t,r="center"]=e.split("-");return[t,r]}var N0e=nq,C0e=sq,k0e=iq,T0e=lq,A0e="Portal",uq=x.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,s]=x.useState(!1);Hu(()=>s(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?VS.createPortal(i.jsx($s.div,{...n,ref:t}),o):null});uq.displayName=A0e;function P0e(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var ny=e=>{const{present:t,children:r}=e,n=O0e(t),a=typeof r=="function"?r({present:n.isPresent}):x.Children.only(r),s=ri(n.ref,R0e(a));return typeof r=="function"||n.isPresent?x.cloneElement(a,{ref:s}):null};ny.displayName="Presence";function O0e(e){const[t,r]=x.useState(),n=x.useRef(null),a=x.useRef(e),s=x.useRef("none"),o=e?"mounted":"unmounted",[l,c]=P0e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=Eb(n.current);s.current=l==="mounted"?u:"none"},[l]),Hu(()=>{const u=n.current,d=a.current;if(d!==e){const h=s.current,p=Eb(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Hu(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=p=>{const m=Eb(n.current).includes(p.animationName);if(p.target===t&&m&&(c("ANIMATION_END"),!a.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},h=p=>{p.target===t&&(s.current=Eb(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Eb(e){return(e==null?void 0:e.animationName)||"none"}function R0e(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var eN="rovingFocusGroup.onEntryFocus",D0e={bubbles:!1,cancelable:!0},ay="RovingFocusGroup",[iA,dq,M0e]=qH(ay),[I0e,fq]=ry(ay,[M0e]),[$0e,F0e]=I0e(ay),hq=x.forwardRef((e,t)=>i.jsx(iA.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(iA.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(L0e,{...e,ref:t})})}));hq.displayName=ay;var L0e=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=x.useRef(null),p=ri(t,h),v=GH(s),[m,g]=VH({prop:o,defaultProp:l??null,onChange:c,caller:ay}),[b,y]=x.useState(!1),w=Sc(u),_=dq(r),S=x.useRef(!1),[E,j]=x.useState(0);return x.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(eN,w),()=>N.removeEventListener(eN,w)},[w]),i.jsx($0e,{scope:r,orientation:n,dir:v,loop:a,currentTabStopId:m,onItemFocus:x.useCallback(N=>g(N),[g]),onItemShiftTab:x.useCallback(()=>y(!0),[]),onFocusableItemAdd:x.useCallback(()=>j(N=>N+1),[]),onFocusableItemRemove:x.useCallback(()=>j(N=>N-1),[]),children:i.jsx($s.div,{tabIndex:b||E===0?-1:0,"data-orientation":n,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:Ir(e.onMouseDown,()=>{S.current=!0}),onFocus:Ir(e.onFocus,N=>{const k=!S.current;if(N.target===N.currentTarget&&k&&!b){const C=new CustomEvent(eN,D0e);if(N.currentTarget.dispatchEvent(C),!C.defaultPrevented){const T=_().filter(D=>D.focusable),A=T.find(D=>D.active),B=T.find(D=>D.id===m),P=[A,B,...T].filter(Boolean).map(D=>D.ref.current);gq(P,d)}}S.current=!1}),onBlur:Ir(e.onBlur,()=>y(!1))})})}),mq="RovingFocusGroupItem",pq=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:s,children:o,...l}=e,c=sA(),u=s||c,d=F0e(mq,r),f=d.currentTabStopId===u,h=dq(r),{onFocusableItemAdd:p,onFocusableItemRemove:v,currentTabStopId:m}=d;return x.useEffect(()=>{if(n)return p(),()=>v()},[n,p,v]),i.jsx(iA.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:i.jsx($s.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Ir(e.onMouseDown,g=>{n?d.onItemFocus(u):g.preventDefault()}),onFocus:Ir(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Ir(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){d.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const b=z0e(g,d.orientation,d.dir);if(b!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let w=h().filter(_=>_.focusable).map(_=>_.ref.current);if(b==="last")w.reverse();else if(b==="prev"||b==="next"){b==="prev"&&w.reverse();const _=w.indexOf(g.currentTarget);w=d.loop?W0e(w,_+1):w.slice(_+1)}setTimeout(()=>gq(w))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:m!=null}):o})})});pq.displayName=mq;var B0e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function U0e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function z0e(e,t,r){const n=U0e(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return B0e[n]}function gq(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function W0e(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var V0e=hq,H0e=pq,q0e=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},yh=new WeakMap,Nb=new WeakMap,Cb={},tN=0,vq=function(e){return e&&(e.host||vq(e.parentNode))},G0e=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=vq(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},K0e=function(e,t,r,n){var a=G0e(t,Array.isArray(e)?e:[e]);Cb[r]||(Cb[r]=new WeakMap);var s=Cb[r],o=[],l=new Set,c=new Set(a),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))d(h);else try{var p=h.getAttribute(n),v=p!==null&&p!=="false",m=(yh.get(h)||0)+1,g=(s.get(h)||0)+1;yh.set(h,m),s.set(h,g),o.push(h),m===1&&v&&Nb.set(h,!0),g===1&&h.setAttribute(r,"true"),v||h.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return d(t),l.clear(),tN++,function(){o.forEach(function(f){var h=yh.get(f)-1,p=s.get(f)-1;yh.set(f,h),s.set(f,p),h||(Nb.has(f)||f.removeAttribute(n),Nb.delete(f)),p||f.removeAttribute(r)}),tN--,tN||(yh=new WeakMap,yh=new WeakMap,Nb=new WeakMap,Cb={})}},sy=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=q0e(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),K0e(n,a,r,"aria-hidden")):function(){return null}},oA=function(e,t){return oA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},oA(e,t)};function X0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");oA(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var vr=function(){return vr=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},vr.apply(this,arguments)};function xj(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function w4(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}var hm="right-scroll-bar-position",mm="width-before-scroll-bar",Y0e="with-scroll-bars-hidden",Z0e="--removed-body-scroll-bar-size";function rN(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function J0e(e,t){var r=x.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var Q0e=typeof window<"u"?x.useLayoutEffect:x.useEffect,tF=new WeakMap;function _4(e,t){var r=J0e(null,function(n){return e.forEach(function(a){return rN(a,n)})});return Q0e(function(){var n=tF.get(r);if(n){var a=new Set(n),s=new Set(e),o=r.current;a.forEach(function(l){s.has(l)||rN(l,null)}),s.forEach(function(l){a.has(l)||rN(l,o)})}tF.set(r,e)},[e]),r}function ege(e){return e}function tge(e,t){t===void 0&&(t=ege);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(s){var o=t(s,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(n=!0;r.length;){var o=r;r=[],o.forEach(s)}r={push:function(l){return s(l)},filter:function(){return r}}},assignMedium:function(s){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(s),o=r}var c=function(){var d=o;o=[],d.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return a}function S4(e){e===void 0&&(e={});var t=tge(null);return t.options=vr({async:!0,ssr:!1},e),t}var xq=function(e){var t=e.sideCar,r=xj(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return x.createElement(n,vr({},r))};xq.isSideCarExport=!0;function j4(e,t){return e.useMedium(t),xq}var yq=S4(),nN=function(){},yj=x.forwardRef(function(e,t){var r=x.useRef(null),n=x.useState({onScrollCapture:nN,onWheelCapture:nN,onTouchMoveCapture:nN}),a=n[0],s=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,p=e.noRelative,v=e.noIsolation,m=e.inert,g=e.allowPinchZoom,b=e.as,y=b===void 0?"div":b,w=e.gapMode,_=xj(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,E=_4([r,t]),j=vr(vr({},_),a);return x.createElement(x.Fragment,null,d&&x.createElement(S,{sideCar:yq,removeScrollBar:u,shards:f,noRelative:p,noIsolation:v,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:r,gapMode:w}),o?x.cloneElement(x.Children.only(l),vr(vr({},j),{ref:E})):x.createElement(y,vr({},j,{className:c,ref:E}),l))});yj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yj.classNames={fullWidth:mm,zeroRight:hm};var rge=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function nge(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=rge();return t&&e.setAttribute("nonce",t),e}function age(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function sge(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var ige=function(){var e=0,t=null;return{add:function(r){e==0&&(t=nge())&&(age(t,r),sge(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},oge=function(){var e=ige();return function(t,r){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},bj=function(){var e=oge(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},lge={left:0,top:0,right:0,gap:0},aN=function(e){return parseInt(e||"",10)||0},cge=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[aN(r),aN(n),aN(a)]},uge=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return lge;var t=cge(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},dge=bj(),pm="data-scroll-locked",fge=function(e,t,r,n){var a=e.left,s=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Y0e,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(pm,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hm,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(mm,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(hm," .").concat(hm,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(mm," .").concat(mm,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(pm,`] {
    `).concat(Z0e,": ").concat(l,`px;
  }
`)},rF=function(){var e=parseInt(document.body.getAttribute(pm)||"0",10);return isFinite(e)?e:0},hge=function(){x.useEffect(function(){return document.body.setAttribute(pm,(rF()+1).toString()),function(){var e=rF()-1;e<=0?document.body.removeAttribute(pm):document.body.setAttribute(pm,e.toString())}},[])},E4=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;hge();var s=x.useMemo(function(){return uge(a)},[a]);return x.createElement(dge,{styles:fge(s,!t,a,r?"":"!important")})},lA=!1;if(typeof window<"u")try{var kb=Object.defineProperty({},"passive",{get:function(){return lA=!0,!0}});window.addEventListener("test",kb,kb),window.removeEventListener("test",kb,kb)}catch{lA=!1}var bh=lA?{passive:!1}:!1,mge=function(e){return e.tagName==="TEXTAREA"},bq=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!mge(e)&&r[t]==="visible")},pge=function(e){return bq(e,"overflowY")},gge=function(e){return bq(e,"overflowX")},nF=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=wq(e,n);if(a){var s=_q(e,n),o=s[1],l=s[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},vge=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},xge=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},wq=function(e,t){return e==="v"?pge(t):gge(t)},_q=function(e,t){return e==="v"?vge(t):xge(t)},yge=function(e,t){return e==="h"&&t==="rtl"?-1:1},bge=function(e,t,r,n,a){var s=yge(e,window.getComputedStyle(t).direction),o=s*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{var p=_q(e,l),v=p[0],m=p[1],g=p[2],b=m-g-s*v;(v||b)&&wq(e,l)&&(f+=b,h+=v),l=l.parentNode.host||l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(f)<1||!a)||!d&&(Math.abs(h)<1||!a))&&(u=!0),u},Tb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},aF=function(e){return[e.deltaX,e.deltaY]},sF=function(e){return e&&"current"in e?e.current:e},wge=function(e,t){return e[0]===t[0]&&e[1]===t[1]},_ge=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Sge=0,wh=[];function jge(e){var t=x.useRef([]),r=x.useRef([0,0]),n=x.useRef(),a=x.useState(Sge++)[0],s=x.useState(bj)[0],o=x.useRef(e);x.useEffect(function(){o.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var m=w4([e.lockRef.current],(e.shards||[]).map(sF),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=x.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var b=Tb(m),y=r.current,w="deltaX"in m?m.deltaX:y[0]-b[0],_="deltaY"in m?m.deltaY:y[1]-b[1],S,E=m.target,j=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in m&&j==="h"&&E.type==="range")return!1;var N=nF(j,E);if(!N)return!0;if(N?S=j:(S=j==="v"?"h":"v",N=nF(j,E)),!N)return!1;if(!n.current&&"changedTouches"in m&&(w||_)&&(n.current=S),!S)return!0;var k=n.current||S;return bge(k,g,m,k==="h"?w:_,!0)},[]),c=x.useCallback(function(m){var g=m;if(!(!wh.length||wh[wh.length-1]!==s)){var b="deltaY"in g?aF(g):Tb(g),y=t.current.filter(function(S){return S.name===g.type&&(S.target===g.target||g.target===S.shadowParent)&&wge(S.delta,b)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(sF).filter(Boolean).filter(function(S){return S.contains(g.target)}),_=w.length>0?l(g,w[0]):!o.current.noIsolation;_&&g.cancelable&&g.preventDefault()}}},[]),u=x.useCallback(function(m,g,b,y){var w={name:m,delta:g,target:b,should:y,shadowParent:Ege(b)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(_){return _!==w})},1)},[]),d=x.useCallback(function(m){r.current=Tb(m),n.current=void 0},[]),f=x.useCallback(function(m){u(m.type,aF(m),m.target,l(m,e.lockRef.current))},[]),h=x.useCallback(function(m){u(m.type,Tb(m),m.target,l(m,e.lockRef.current))},[]);x.useEffect(function(){return wh.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,bh),document.addEventListener("touchmove",c,bh),document.addEventListener("touchstart",d,bh),function(){wh=wh.filter(function(m){return m!==s}),document.removeEventListener("wheel",c,bh),document.removeEventListener("touchmove",c,bh),document.removeEventListener("touchstart",d,bh)}},[]);var p=e.removeScrollBar,v=e.inert;return x.createElement(x.Fragment,null,v?x.createElement(s,{styles:_ge(a)}):null,p?x.createElement(E4,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Ege(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Nge=j4(yq,jge);var Sq=x.forwardRef(function(e,t){return x.createElement(yj,vr({},e,{ref:t,sideCar:Nge}))});Sq.classNames=yj.classNames;var cA=["Enter"," "],Cge=["ArrowDown","PageUp","Home"],jq=["ArrowUp","PageDown","End"],kge=[...Cge,...jq],Tge={ltr:[...cA,"ArrowRight"],rtl:[...cA,"ArrowLeft"]},Age={ltr:["ArrowLeft"],rtl:["ArrowRight"]},iy="Menu",[kv,Pge,Oge]=qH(iy),[Yf,Eq]=ry(iy,[Oge,tq,fq]),wj=tq(),Nq=fq(),[Rge,Zf]=Yf(iy),[Dge,oy]=Yf(iy),Cq=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:s,modal:o=!0}=e,l=wj(t),[c,u]=x.useState(null),d=x.useRef(!1),f=Sc(s),h=GH(a);return x.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),i.jsx(N0e,{...l,children:i.jsx(Rge,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:u,children:i.jsx(Dge,{scope:t,onClose:x.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:o,children:n})})})};Cq.displayName=iy;var Mge="MenuAnchor",N4=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=wj(r);return i.jsx(C0e,{...a,...n,ref:t})});N4.displayName=Mge;var C4="MenuPortal",[Ige,kq]=Yf(C4,{forceMount:void 0}),Tq=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,s=Zf(C4,t);return i.jsx(Ige,{scope:t,forceMount:r,children:i.jsx(ny,{present:r||s.open,children:i.jsx(uq,{asChild:!0,container:a,children:n})})})};Tq.displayName=C4;var eo="MenuContent",[$ge,k4]=Yf(eo),Aq=x.forwardRef((e,t)=>{const r=kq(eo,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,s=Zf(eo,e.__scopeMenu),o=oy(eo,e.__scopeMenu);return i.jsx(kv.Provider,{scope:e.__scopeMenu,children:i.jsx(ny,{present:n||s.open,children:i.jsx(kv.Slot,{scope:e.__scopeMenu,children:o.modal?i.jsx(Fge,{...a,ref:t}):i.jsx(Lge,{...a,ref:t})})})})}),Fge=x.forwardRef((e,t)=>{const r=Zf(eo,e.__scopeMenu),n=x.useRef(null),a=ri(t,n);return x.useEffect(()=>{const s=n.current;if(s)return sy(s)},[]),i.jsx(T4,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Ir(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Lge=x.forwardRef((e,t)=>{const r=Zf(eo,e.__scopeMenu);return i.jsx(T4,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Bge=Fw("MenuContent.ScrollLock"),T4=x.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:p,disableOutsideScroll:v,...m}=e,g=Zf(eo,r),b=oy(eo,r),y=wj(r),w=Nq(r),_=Pge(r),[S,E]=x.useState(null),j=x.useRef(null),N=ri(t,j,g.onContentChange),k=x.useRef(0),C=x.useRef(""),T=x.useRef(0),A=x.useRef(null),B=x.useRef("right"),R=x.useRef(0),P=v?Sq:x.Fragment,D=v?{as:Bge,allowPinchZoom:!0}:void 0,U=F=>{var q,Z;const K=C.current+F,X=_().filter(I=>!I.disabled),O=document.activeElement,W=(q=X.find(I=>I.ref.current===O))==null?void 0:q.textValue,L=X.map(I=>I.textValue),H=Jge(L,K,W),ee=(Z=X.find(I=>I.textValue===H))==null?void 0:Z.ref.current;(function I(Q){C.current=Q,window.clearTimeout(k.current),Q!==""&&(k.current=window.setTimeout(()=>I(""),1e3))})(K),ee&&setTimeout(()=>ee.focus())};x.useEffect(()=>()=>window.clearTimeout(k.current),[]),o0e();const M=x.useCallback(F=>{var X,O;return B.current===((X=A.current)==null?void 0:X.side)&&eve(F,(O=A.current)==null?void 0:O.area)},[]);return i.jsx($ge,{scope:r,searchRef:C,onItemEnter:x.useCallback(F=>{M(F)&&F.preventDefault()},[M]),onItemLeave:x.useCallback(F=>{var K;M(F)||((K=j.current)==null||K.focus(),E(null))},[M]),onTriggerLeave:x.useCallback(F=>{M(F)&&F.preventDefault()},[M]),pointerGraceTimerRef:T,onPointerGraceIntentChange:x.useCallback(F=>{A.current=F},[]),children:i.jsx(P,{...D,children:i.jsx(ZH,{asChild:!0,trapped:a,onMountAutoFocus:Ir(s,F=>{var K;F.preventDefault(),(K=j.current)==null||K.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(XH,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:p,children:i.jsx(V0e,{asChild:!0,...w,dir:b.dir,orientation:"vertical",loop:n,currentTabStopId:S,onCurrentTabStopIdChange:E,onEntryFocus:Ir(c,F=>{b.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(k0e,{role:"menu","aria-orientation":"vertical","data-state":qq(g.open),"data-radix-menu-content":"",dir:b.dir,...y,...m,ref:N,style:{outline:"none",...m.style},onKeyDown:Ir(m.onKeyDown,F=>{const X=F.target.closest("[data-radix-menu-content]")===F.currentTarget,O=F.ctrlKey||F.altKey||F.metaKey,W=F.key.length===1;X&&(F.key==="Tab"&&F.preventDefault(),!O&&W&&U(F.key));const L=j.current;if(F.target!==L||!kge.includes(F.key))return;F.preventDefault();const ee=_().filter(q=>!q.disabled).map(q=>q.ref.current);jq.includes(F.key)&&ee.reverse(),Yge(ee)}),onBlur:Ir(e.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(k.current),C.current="")}),onPointerMove:Ir(e.onPointerMove,Tv(F=>{const K=F.target,X=R.current!==F.clientX;if(F.currentTarget.contains(K)&&X){const O=F.clientX>R.current?"right":"left";B.current=O,R.current=F.clientX}}))})})})})})})});Aq.displayName=eo;var Uge="MenuGroup",A4=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx($s.div,{role:"group",...n,ref:t})});A4.displayName=Uge;var zge="MenuLabel",Pq=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx($s.div,{...n,ref:t})});Pq.displayName=zge;var Lw="MenuItem",iF="menu.itemSelect",_j=x.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,s=x.useRef(null),o=oy(Lw,e.__scopeMenu),l=k4(Lw,e.__scopeMenu),c=ri(t,s),u=x.useRef(!1),d=()=>{const f=s.current;if(!r&&f){const h=new CustomEvent(iF,{bubbles:!0,cancelable:!0});f.addEventListener(iF,p=>n==null?void 0:n(p),{once:!0}),HH(f,h),h.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(Oq,{...a,ref:c,disabled:r,onClick:Ir(e.onClick,d),onPointerDown:f=>{var h;(h=e.onPointerDown)==null||h.call(e,f),u.current=!0},onPointerUp:Ir(e.onPointerUp,f=>{var h;u.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:Ir(e.onKeyDown,f=>{const h=l.searchRef.current!=="";r||h&&f.key===" "||cA.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});_j.displayName=Lw;var Oq=x.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...s}=e,o=k4(Lw,r),l=Nq(r),c=x.useRef(null),u=ri(t,c),[d,f]=x.useState(!1),[h,p]=x.useState("");return x.useEffect(()=>{const v=c.current;v&&p((v.textContent??"").trim())},[s.children]),i.jsx(kv.ItemSlot,{scope:r,disabled:n,textValue:a??h,children:i.jsx(H0e,{asChild:!0,...l,focusable:!n,children:i.jsx($s.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...s,ref:u,onPointerMove:Ir(e.onPointerMove,Tv(v=>{n?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ir(e.onPointerLeave,Tv(v=>o.onItemLeave(v))),onFocus:Ir(e.onFocus,()=>f(!0)),onBlur:Ir(e.onBlur,()=>f(!1))})})})}),Wge="MenuCheckboxItem",Rq=x.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return i.jsx(Fq,{scope:e.__scopeMenu,checked:r,children:i.jsx(_j,{role:"menuitemcheckbox","aria-checked":Bw(r)?"mixed":r,...a,ref:t,"data-state":O4(r),onSelect:Ir(a.onSelect,()=>n==null?void 0:n(Bw(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Rq.displayName=Wge;var Dq="MenuRadioGroup",[Vge,Hge]=Yf(Dq,{value:void 0,onValueChange:()=>{}}),Mq=x.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,s=Sc(n);return i.jsx(Vge,{scope:e.__scopeMenu,value:r,onValueChange:s,children:i.jsx(A4,{...a,ref:t})})});Mq.displayName=Dq;var Iq="MenuRadioItem",$q=x.forwardRef((e,t)=>{const{value:r,...n}=e,a=Hge(Iq,e.__scopeMenu),s=r===a.value;return i.jsx(Fq,{scope:e.__scopeMenu,checked:s,children:i.jsx(_j,{role:"menuitemradio","aria-checked":s,...n,ref:t,"data-state":O4(s),onSelect:Ir(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});$q.displayName=Iq;var P4="MenuItemIndicator",[Fq,qge]=Yf(P4,{checked:!1}),Lq=x.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,s=qge(P4,r);return i.jsx(ny,{present:n||Bw(s.checked)||s.checked===!0,children:i.jsx($s.span,{...a,ref:t,"data-state":O4(s.checked)})})});Lq.displayName=P4;var Gge="MenuSeparator",Bq=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx($s.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});Bq.displayName=Gge;var Kge="MenuArrow",Uq=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=wj(r);return i.jsx(T0e,{...a,...n,ref:t})});Uq.displayName=Kge;var Xge="MenuSub",[Ult,zq]=Yf(Xge),ng="MenuSubTrigger",Wq=x.forwardRef((e,t)=>{const r=Zf(ng,e.__scopeMenu),n=oy(ng,e.__scopeMenu),a=zq(ng,e.__scopeMenu),s=k4(ng,e.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=s,u={__scopeMenu:e.__scopeMenu},d=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>d,[d]),x.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),i.jsx(N4,{asChild:!0,...u,children:i.jsx(Oq,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":qq(r.open),...e,ref:vj(t,a.onTriggerChange),onClick:f=>{var h;(h=e.onClick)==null||h.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Ir(e.onPointerMove,Tv(f=>{s.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:Ir(e.onPointerLeave,Tv(f=>{var p,v;d();const h=(p=r.content)==null?void 0:p.getBoundingClientRect();if(h){const m=(v=r.content)==null?void 0:v.dataset.side,g=m==="right",b=g?-5:5,y=h[g?"left":"right"],w=h[g?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+b,y:f.clientY},{x:y,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:y,y:h.bottom}],side:m}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Ir(e.onKeyDown,f=>{var p;const h=s.searchRef.current!=="";e.disabled||h&&f.key===" "||Tge[n.dir].includes(f.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),f.preventDefault())})})})});Wq.displayName=ng;var Vq="MenuSubContent",Hq=x.forwardRef((e,t)=>{const r=kq(eo,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,s=Zf(eo,e.__scopeMenu),o=oy(eo,e.__scopeMenu),l=zq(Vq,e.__scopeMenu),c=x.useRef(null),u=ri(t,c);return i.jsx(kv.Provider,{scope:e.__scopeMenu,children:i.jsx(ny,{present:n||s.open,children:i.jsx(kv.Slot,{scope:e.__scopeMenu,children:i.jsx(T4,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Ir(e.onFocusOutside,d=>{d.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Ir(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Ir(e.onKeyDown,d=>{var p;const f=d.currentTarget.contains(d.target),h=Age[o.dir].includes(d.key);f&&h&&(s.onOpenChange(!1),(p=l.trigger)==null||p.focus(),d.preventDefault())})})})})})});Hq.displayName=Vq;function qq(e){return e?"open":"closed"}function Bw(e){return e==="indeterminate"}function O4(e){return Bw(e)?"indeterminate":e?"checked":"unchecked"}function Yge(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function Zge(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function Jge(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let o=Zge(e,Math.max(s,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function Qge(e,t){const{x:r,y:n}=e;let a=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s],c=t[o],u=l.x,d=l.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function eve(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return Qge(r,t)}function Tv(e){return t=>t.pointerType==="mouse"?e(t):void 0}var tve=Cq,rve=N4,nve=Tq,ave=Aq,sve=A4,ive=Pq,ove=_j,lve=Rq,cve=Mq,uve=$q,dve=Lq,fve=Bq,hve=Uq,mve=Wq,pve=Hq,Sj="DropdownMenu",[gve,zlt]=ry(Sj,[Eq]),Fs=Eq(),[vve,Gq]=gve(Sj),Kq=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:s,onOpenChange:o,modal:l=!0}=e,c=Fs(t),u=x.useRef(null),[d,f]=VH({prop:a,defaultProp:s??!1,onChange:o,caller:Sj});return i.jsx(vve,{scope:t,triggerId:sA(),triggerRef:u,contentId:sA(),open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(h=>!h),[f]),modal:l,children:i.jsx(tve,{...c,open:d,onOpenChange:f,dir:n,modal:l,children:r})})};Kq.displayName=Sj;var Xq="DropdownMenuTrigger",Yq=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,s=Gq(Xq,r),o=Fs(r);return i.jsx(rve,{asChild:!0,...o,children:i.jsx($s.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:vj(t,s.triggerRef),onPointerDown:Ir(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:Ir(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Yq.displayName=Xq;var xve="DropdownMenuPortal",Zq=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Fs(t);return i.jsx(nve,{...n,...r})};Zq.displayName=xve;var Jq="DropdownMenuContent",Qq=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Gq(Jq,r),s=Fs(r),o=x.useRef(!1);return i.jsx(ave,{id:a.contentId,"aria-labelledby":a.triggerId,...s,...n,ref:t,onCloseAutoFocus:Ir(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ir(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Qq.displayName=Jq;var yve="DropdownMenuGroup",bve=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Fs(r);return i.jsx(sve,{...a,...n,ref:t})});bve.displayName=yve;var wve="DropdownMenuLabel",eG=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Fs(r);return i.jsx(ive,{...a,...n,ref:t})});eG.displayName=wve;var _ve="DropdownMenuItem",tG=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Fs(r);return i.jsx(ove,{...a,...n,ref:t})});tG.displayName=_ve;var Sve="DropdownMenuCheckboxItem",rG=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Fs(r);return i.jsx(lve,{...a,...n,ref:t})});rG.displayName=Sve;var jve="DropdownMenuRadioGroup",Eve=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Fs(r);return i.jsx(cve,{...a,...n,ref:t})});Eve.displayName=jve;var Nve="DropdownMenuRadioItem",nG=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Fs(r);return i.jsx(uve,{...a,...n,ref:t})});nG.displayName=Nve;var Cve="DropdownMenuItemIndicator",aG=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Fs(r);return i.jsx(dve,{...a,...n,ref:t})});aG.displayName=Cve;var kve="DropdownMenuSeparator",sG=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Fs(r);return i.jsx(fve,{...a,...n,ref:t})});sG.displayName=kve;var Tve="DropdownMenuArrow",Ave=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Fs(r);return i.jsx(hve,{...a,...n,ref:t})});Ave.displayName=Tve;var Pve="DropdownMenuSubTrigger",iG=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Fs(r);return i.jsx(mve,{...a,...n,ref:t})});iG.displayName=Pve;var Ove="DropdownMenuSubContent",oG=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Fs(r);return i.jsx(pve,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oG.displayName=Ove;var Rve=Kq,Dve=Yq,Mve=Zq,lG=Qq,cG=eG,uG=tG,dG=rG,fG=nG,hG=aG,mG=sG,pG=iG,gG=oG;const vG=Rve,xG=Dve,Ive=x.forwardRef(({className:e,inset:t,children:r,...n},a)=>i.jsxs(pG,{ref:a,className:Ue("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,i.jsx(Ou,{className:"ml-auto h-4 w-4"})]}));Ive.displayName=pG.displayName;const $ve=x.forwardRef(({className:e,...t},r)=>i.jsx(gG,{ref:r,className:Ue("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));$ve.displayName=gG.displayName;const R4=x.forwardRef(({className:e,sideOffset:t=4,...r},n)=>i.jsx(Mve,{children:i.jsx(lG,{ref:n,sideOffset:t,className:Ue("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));R4.displayName=lG.displayName;const gm=x.forwardRef(({className:e,inset:t,...r},n)=>i.jsx(uG,{ref:n,className:Ue("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));gm.displayName=uG.displayName;const Fve=x.forwardRef(({className:e,children:t,checked:r,...n},a)=>i.jsxs(dG,{ref:a,className:Ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(hG,{children:i.jsx(Zx,{className:"h-4 w-4"})})}),t]}));Fve.displayName=dG.displayName;const Lve=x.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(fG,{ref:n,className:Ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(hG,{children:i.jsx(aH,{className:"h-2 w-2 fill-current"})})}),t]}));Lve.displayName=fG.displayName;const D4=x.forwardRef(({className:e,inset:t,...r},n)=>i.jsx(cG,{ref:n,className:Ue("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));D4.displayName=cG.displayName;const M4=x.forwardRef(({className:e,...t},r)=>i.jsx(mG,{ref:r,className:Ue("-mx-1 my-1 h-px bg-muted",e),...t}));M4.displayName=mG.displayName;function xr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ni(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function bn(e,t){const r=xr(e);return isNaN(t)?ni(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function Ti(e,t){const r=xr(e);if(isNaN(t))return ni(e,NaN);if(!t)return r;const n=r.getDate(),a=ni(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const s=a.getDate();return n>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}function Bve(e,t){const r=+xr(e);return ni(e,r+t)}const I4=6048e5,Uve=864e5,$4=6e4,yG=36e5;let zve={};function ly(){return zve}function Vn(e,t){var l,c,u,d;const r=ly(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=xr(e),s=a.getDay(),o=(s<n?7:0)+s-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function xf(e){return Vn(e,{weekStartsOn:1})}function bG(e){const t=xr(e),r=t.getFullYear(),n=ni(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=xf(n),s=ni(e,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=xf(s);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function ep(e){const t=xr(e);return t.setHours(0,0,0,0),t}function Uw(e){const t=xr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Lo(e,t){const r=ep(e),n=ep(t),a=+r-Uw(r),s=+n-Uw(n);return Math.round((a-s)/Uve)}function Wve(e){const t=bG(e),r=ni(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),xf(r)}function Qd(e,t){return Bve(e,t*$4)}function uA(e,t){const r=t*7;return bn(e,r)}function Vve(e,t){return Ti(e,t*12)}function Hve(e){let t;return e.forEach(function(r){const n=xr(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function qve(e){let t;return e.forEach(r=>{const n=xr(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function Ra(e,t){const r=ep(e),n=ep(t);return+r==+n}function F4(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function wG(e){if(!F4(e)&&typeof e!="number")return!1;const t=xr(e);return!isNaN(Number(t))}function Av(e,t){const r=xr(e),n=xr(t),a=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return a*12+s}function Gve(e,t,r){const n=Vn(e,r),a=Vn(t,r),s=+n-Uw(n),o=+a-Uw(a);return Math.round((s-o)/I4)}function Kve(e,t){const r=xr(e),n=xr(t),a=oF(r,n),s=Math.abs(Lo(r,n));r.setDate(r.getDate()-a*s);const o=+(oF(r,n)===-a),l=a*(s-o);return l===0?0:l}function oF(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function jj(e){const t=xr(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Cs(e){const t=xr(e);return t.setDate(1),t.setHours(0,0,0,0),t}function _G(e){const t=xr(e),r=ni(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function yf(e,t){var l,c,u,d;const r=ly(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=xr(e),s=a.getDay(),o=(s<n?-7:0)+6-(s-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function SG(e){return yf(e,{weekStartsOn:1})}const Xve={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Yve=(e,t,r)=>{let n;const a=Xve[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function vm(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Zve={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Jve={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Qve={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},exe={date:vm({formats:Zve,defaultWidth:"full"}),time:vm({formats:Jve,defaultWidth:"full"}),dateTime:vm({formats:Qve,defaultWidth:"full"})},txe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},rxe=(e,t,r,n)=>txe[e];function xl(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const nxe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},axe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},sxe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ixe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oxe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},lxe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cxe=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},uxe={ordinalNumber:cxe,era:xl({values:nxe,defaultWidth:"wide"}),quarter:xl({values:axe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:xl({values:sxe,defaultWidth:"wide"}),day:xl({values:ixe,defaultWidth:"wide"}),dayPeriod:xl({values:oxe,defaultWidth:"wide",formattingValues:lxe,defaultFormattingWidth:"wide"})};function yl(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?fxe(l,f=>f.test(o)):dxe(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function dxe(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function fxe(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function jG(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const hxe=/^(\d+)(th|st|nd|rd)?/i,mxe=/\d+/i,pxe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},gxe={any:[/^b/i,/^(a|c)/i]},vxe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},xxe={any:[/1/i,/2/i,/3/i,/4/i]},yxe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},bxe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},wxe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_xe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Sxe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},jxe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Exe={ordinalNumber:jG({matchPattern:hxe,parsePattern:mxe,valueCallback:e=>parseInt(e,10)}),era:yl({matchPatterns:pxe,defaultMatchWidth:"wide",parsePatterns:gxe,defaultParseWidth:"any"}),quarter:yl({matchPatterns:vxe,defaultMatchWidth:"wide",parsePatterns:xxe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:yl({matchPatterns:yxe,defaultMatchWidth:"wide",parsePatterns:bxe,defaultParseWidth:"any"}),day:yl({matchPatterns:wxe,defaultMatchWidth:"wide",parsePatterns:_xe,defaultParseWidth:"any"}),dayPeriod:yl({matchPatterns:Sxe,defaultMatchWidth:"any",parsePatterns:jxe,defaultParseWidth:"any"})},EG={code:"en-US",formatDistance:Yve,formatLong:exe,formatRelative:rxe,localize:uxe,match:Exe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Nxe(e){const t=xr(e);return Lo(t,_G(t))+1}function NG(e){const t=xr(e),r=+xf(t)-+Wve(t);return Math.round(r/I4)+1}function CG(e,t){var d,f,h,p;const r=xr(e),n=r.getFullYear(),a=ly(),s=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(h=a.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=ni(e,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=Vn(o,t),c=ni(e,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=Vn(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function Cxe(e,t){var l,c,u,d;const r=ly(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=CG(e,t),s=ni(e,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),Vn(s,t)}function kG(e,t){const r=xr(e),n=+Vn(r,t)-+Cxe(r,t);return Math.round(n/I4)+1}function Yr(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Vc={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Yr(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Yr(r+1,2)},d(e,t){return Yr(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Yr(e.getHours()%12||12,t.length)},H(e,t){return Yr(e.getHours(),t.length)},m(e,t){return Yr(e.getMinutes(),t.length)},s(e,t){return Yr(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Yr(a,t.length)}},_h={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},lF={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Vc.y(e,t)},Y:function(e,t,r,n){const a=CG(e,n),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return Yr(o,2)}return t==="Yo"?r.ordinalNumber(s,{unit:"year"}):Yr(s,t.length)},R:function(e,t){const r=bG(e);return Yr(r,t.length)},u:function(e,t){const r=e.getFullYear();return Yr(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Yr(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Yr(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Vc.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Yr(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=kG(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Yr(a,t.length)},I:function(e,t,r){const n=NG(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Yr(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Vc.d(e,t)},D:function(e,t,r){const n=Nxe(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Yr(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Yr(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Yr(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return Yr(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=_h.noon:n===0?a=_h.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=_h.evening:n>=12?a=_h.afternoon:n>=4?a=_h.morning:a=_h.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Vc.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Vc.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Yr(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Yr(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Vc.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Vc.s(e,t)},S:function(e,t){return Vc.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return uF(n);case"XXXX":case"XX":return Nd(n);case"XXXXX":case"XXX":default:return Nd(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return uF(n);case"xxxx":case"xx":return Nd(n);case"xxxxx":case"xxx":default:return Nd(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+cF(n,":");case"OOOO":default:return"GMT"+Nd(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+cF(n,":");case"zzzz":default:return"GMT"+Nd(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Yr(n,t.length)},T:function(e,t,r){const n=e.getTime();return Yr(n,t.length)}};function cF(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+t+Yr(s,2)}function uF(e,t){return e%60===0?(e>0?"-":"+")+Yr(Math.abs(e)/60,2):Nd(e,t)}function Nd(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Yr(Math.trunc(n/60),2),s=Yr(n%60,2);return r+a+t+s}const dF=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},TG=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},kxe=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return dF(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",dF(n,t)).replace("{{time}}",TG(a,t))},Txe={p:TG,P:kxe},Axe=/^D+$/,Pxe=/^Y+$/,Oxe=["D","DD","YY","YYYY"];function Rxe(e){return Axe.test(e)}function Dxe(e){return Pxe.test(e)}function Mxe(e,t,r){const n=Ixe(e,t,r);if(console.warn(n),Oxe.includes(e))throw new RangeError(n)}function Ixe(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $xe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fxe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lxe=/^'([^]*?)'?$/,Bxe=/''/g,Uxe=/[a-zA-Z]/;function Me(e,t,r){var d,f,h,p,v,m,g,b;const n=ly(),a=(r==null?void 0:r.locale)??n.locale??EG,s=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((m=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:m.weekStartsOn)??n.weekStartsOn??((b=(g=n.locale)==null?void 0:g.options)==null?void 0:b.weekStartsOn)??0,l=xr(e);if(!wG(l))throw new RangeError("Invalid time value");let c=t.match(Fxe).map(y=>{const w=y[0];if(w==="p"||w==="P"){const _=Txe[w];return _(y,a.formatLong)}return y}).join("").match($xe).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const w=y[0];if(w==="'")return{isToken:!1,value:zxe(y)};if(lF[w])return{isToken:!0,value:y};if(w.match(Uxe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(y=>{if(!y.isToken)return y.value;const w=y.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&Dxe(w)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&Rxe(w))&&Mxe(w,t,String(e));const _=lF[w[0]];return _(l,w,a.localize,u)}).join("")}function zxe(e){const t=e.match(Lxe);return t?t[1].replace(Bxe,"'"):e}function Wxe(e){const t=xr(e),r=t.getFullYear(),n=t.getMonth(),a=ni(e,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function Vxe(e){return Math.trunc(+xr(e)/1e3)}function Hxe(e){const t=xr(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function qxe(e,t){return Gve(Hxe(e),Cs(e),t)+1}function Du(e,t){const r=xr(e),n=xr(t);return r.getTime()>n.getTime()}function ef(e,t){const r=xr(e),n=xr(t);return+r<+n}function xm(e,t){const r=xr(e),n=xr(t);return+r==+n}function fF(e,t,r){const n=Vn(e,r),a=Vn(t,r);return+n==+a}function L4(e,t){const r=xr(e),n=xr(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Gxe(e,t){const r=xr(e),n=xr(t);return r.getFullYear()===n.getFullYear()}function tf(e,t){return bn(e,-t)}function O0(e,t){const n=Zxe(e);let a;if(n.date){const c=Jxe(n.date,2);a=Qxe(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const s=a.getTime();let o=0,l;if(n.time&&(o=eye(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(l=tye(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(s+o),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(s+o+l)}const Ab={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Kxe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Xxe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Yxe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Zxe(e){const t={},r=e.split(Ab.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],Ab.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Ab.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const a=Ab.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function Jxe(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?a:s*100,restDateString:e.slice((n[1]||n[2]).length)}}function Qxe(e,t){if(t===null)return new Date(NaN);const r=e.match(Kxe);if(!r)return new Date(NaN);const n=!!r[4],a=R0(r[1]),s=R0(r[2])-1,o=R0(r[3]),l=R0(r[4]),c=R0(r[5])-1;if(n)return iye(t,l,c)?rye(t,l,c):new Date(NaN);{const u=new Date(0);return!aye(t,s,o)||!sye(t,a)?new Date(NaN):(u.setUTCFullYear(t,s,Math.max(a,o)),u)}}function R0(e){return e?parseInt(e):1}function eye(e){const t=e.match(Xxe);if(!t)return NaN;const r=sN(t[1]),n=sN(t[2]),a=sN(t[3]);return oye(r,n,a)?r*yG+n*$4+a*1e3:NaN}function sN(e){return e&&parseFloat(e.replace(",","."))||0}function tye(e){if(e==="Z")return 0;const t=e.match(Yxe);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return lye(n,a)?r*(n*yG+a*$4):NaN}function rye(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const a=n.getUTCDay()||7,s=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+s),n}const nye=[31,null,31,30,31,30,31,31,30,31,30,31];function AG(e){return e%400===0||e%4===0&&e%100!==0}function aye(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(nye[t]||(AG(e)?29:28))}function sye(e,t){return t>=1&&t<=(AG(e)?366:365)}function iye(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function oye(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function lye(e,t){return t>=0&&t<=59}function iN(e,t){const r=xr(e),n=r.getFullYear(),a=r.getDate(),s=ni(e,0);s.setFullYear(n,t,15),s.setHours(0,0,0,0);const o=Wxe(s);return r.setMonth(t,Math.min(a,o)),r}function hF(e,t){const r=xr(e);return isNaN(+r)?ni(e,NaN):(r.setFullYear(t),r)}function cye(e,t){return Ti(e,-t)}function V1(e){return e?/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e):!1}function zw(e){return e?V1(e)?null:"Невалидный формат ID":"ID не может быть пустым"}const Pv={async getSettings(e){const{data:t,error:r}=await ue.from("notification_settings").select("*").eq("user_id",e);if(r)throw r;return t||[]},async getSetting({userId:e,eventType:t,channel:r,transport:n}){let a=ue.from("notification_settings").select("*").eq("user_id",e).eq("event_type",t).eq("channel",r);n&&(a=a.eq("transport",n));const{data:s,error:o}=await a.maybeSingle();if(o)throw o;return s||null},async setSetting(e){try{const t=await Pv.getSetting({userId:e.user_id,eventType:e.event_type,channel:e.channel,transport:e.transport});if(t){const{data:r,error:n}=await ue.from("notification_settings").update({enabled:e.enabled,template:e.template||t.template,dispatch_mode:e.dispatch_mode}).eq("id",t.id).select().single();if(n)throw n;return r}else{const r=uye(e.event_type),{data:n,error:a}=await ue.from("notification_settings").insert([{...e,dispatch_mode:e.dispatch_mode||"auto",template:e.template||r}]).select().single();if(a)throw a;return n}}catch(t){throw console.error("Ошибка при работе с notification_settings:",t),t}},async deleteSetting(e){const{error:t}=await ue.from("notification_settings").delete().eq("id",e);if(t)throw t},async disableSettingsForChannel(e,t){const{error:r}=await ue.from("notification_settings").update({enabled:!1}).eq("user_id",e).eq("channel",t);if(r)throw console.error(`Error disabling settings for channel ${t}:`,r),r;console.log(`All settings for channel ${t} disabled for user ${e}`)}};function uye(e){return{online_booking:"Здравствуйте, {name}! Ваша онлайн-запись принята на {date} в {time}.",admin_booking:"Здравствуйте, {name}! Вас записали на {date} в {time}. Ждём вас!",booking_rescheduled:"{name}, ваша запись перенесена на {date} в {time}. Если не подходит — свяжитесь с нами.",booking_cancelled:"{name}, ваша запись отменена. Если это ошибка — свяжитесь с нами.",visit_reminder:"{name}, напоминаем о визите {date} в {time}. Ждём вас!",visit_confirmation:'{name}, подтвердите, пожалуйста, визит {date} в {time}. Ответьте "Да" или "Нет".',review_tip_request:"{name}, спасибо за визит! Оставьте, пожалуйста, отзыв и чаевые по ссылке: {review_link}",repeat_invite:"{name}, будем рады видеть вас снова! Запишитесь на повторный визит: {booking_link}"}[e]||`Шаблон для события ${e}`}const dA={async sendNotification(e){var t,r,n;try{if(console.log("Начало отправки уведомления (v2):",e),!e.client_id)return console.error("Ошибка отправки уведомления: отсутствует ID клиента"),{success:!1,errors:[{message:"Отсутствует ID клиента"}]};const{data:a,error:s}=await ue.from("clients").select("id, phone, email, full_name").eq("id",e.client_id).single();if(s||!a)return console.error("Ошибка получения данных клиента:",s),{success:!1,errors:[{message:"Ошибка получения данных клиента или клиент не найден",details:s}]};console.log("Данные клиента получены:",a);const{data:o,error:l}=await ue.from("notification_settings").select("*").eq("event_type",e.type).eq("enabled",!0);if(l)return console.error("Ошибка получения настроек уведомлений:",l),{success:!1,errors:[{message:"Ошибка получения настроек уведомлений",details:l}]};if(!o||o.length===0)return console.log(`Нет активных настроек для события ${e.type}. Уведомление не будет отправлено.`),await this.logNotification({user_id:e.user_id||"system",event_type:e.type,client_id:e.client_id,appointment_id:e.appointment_id,channel:"system",transport:"none",recipient_contact:a.phone||a.email||a.id,message:"No active notification settings for this event type.",status:"skipped_no_settings"}),{success:!0};console.log("Настройки уведомлений для события получены:",o);const{data:c,error:u}=await ue.from("integrations").select("id, provider, is_active, user_id, token, access_token, settings").eq("provider","wazzup");if(u)return console.error("Ошибка получения интеграций:",u),{success:!1,errors:[{message:"Ошибка получения интеграций",details:u}]};const d=(c==null?void 0:c.filter(m=>m.is_active))||[];console.log("Активные интеграции Wazzup:",d.map(m=>{var g,b;return{id:m.id,user_id:m.user_id,transport:(g=m.settings)==null?void 0:g.transport,channel_id:(b=m.settings)==null?void 0:b.channel_id}}));const f=[];let h=!1,p=!1;const v={name:a.full_name||"Клиент",date:e.date||"",time:e.time||"",master:e.master||"",service:e.service||"",price:e.price!==void 0?String(e.price):"",client_phone:a.phone||"",client_email:a.email||"",...e};console.log("Данные для шаблона:",v);for(const m of o){console.log(`Обработка базовой настройки для канала ${m.channel} (транспорт: ${m.transport||"N/A"})`);const g=await Pv.getSetting({userId:m.user_id,eventType:m.event_type,channel:m.channel,transport:m.transport});if(!g||!g.enabled){console.log(`Детальная настройка не найдена или выключена для ${m.event_type} -> ${m.channel}. Пропускаем.`);continue}const b=g.dispatch_mode||"auto";console.log(`Режим отправки для ${g.event_type} -> ${g.channel}: ${b}`);const y=d.find(_=>{var N,k,C,T;const S=(k=(N=_.settings)==null?void 0:N.transport)==null?void 0:k.toLowerCase(),E=(C=g.transport)==null?void 0:C.toLowerCase(),j=(T=g.channel)==null?void 0:T.toLowerCase();return j==="telegram"&&(E==="tgapi"||E==="telegram")?S==="tgapi"||S==="telegram":j==="whatsapp"&&(E==="wamessages"||E==="whatsapp")?S==="wamessages"||S==="whatsapp":j==="vk"&&(E==="vk"||E==="vkontakte")?S==="vk"||S==="vkontakte":!E&&j===S});if(!y){console.warn(`Не найдена активная Wazzup интеграция для настройки: канал ${g.channel}, транспорт ${g.transport}`),await this.logNotification({user_id:g.user_id,event_type:e.type,client_id:e.client_id,appointment_id:e.appointment_id,channel:g.channel,transport:g.transport||"N/A",recipient_contact:a.phone||a.email||a.id,message:this.applyTemplate(g.template||"",v),status:"error_no_integration"}),f.push({message:`No active Wazzup integration for ${g.channel} (${g.transport||"N/A"})`});continue}console.log("Найдена подходящая интеграция Wazzup:",{id:y.id,user_id:y.user_id,transport:(t=y.settings)==null?void 0:t.transport});const w=this.applyTemplate(g.template||"",v);if(b==="manual_review"){console.log(`Уведомление для ${g.channel} требует ручного подтверждения. Сохранение в очередь.`);try{const{error:_}=await ue.from("manual_notifications_queue").insert([{user_id:g.user_id,client_id:a.id,client_name:a.full_name,appointment_id:e.appointment_id,event_type:e.type,channel:g.channel,transport:g.transport,recipient_contact:a.phone,message_template:g.template,generated_message_text:w,status:"pending_review"}]);if(_)throw _;p=!0,await this.logNotification({user_id:g.user_id,event_type:e.type,client_id:e.client_id,appointment_id:e.appointment_id,channel:g.channel,transport:g.transport||"N/A",recipient_contact:a.phone,message:w,status:"pending_review"}),console.log("Уведомление добавлено в очередь на ручное подтверждение.")}catch(_){const S=_;console.error("Ошибка сохранения уведомления в очередь manual_notifications_queue:",S),f.push({message:`Ошибка сохранения в очередь: ${S.message}`}),await this.logNotification({user_id:g.user_id,event_type:e.type,client_id:e.client_id,appointment_id:e.appointment_id,channel:g.channel,transport:g.transport||"N/A",recipient_contact:a.phone,message:w,status:"error_queueing"})}}else{console.log(`Автоматическая отправка для ${g.channel}.`);try{const{msgType:_}=this.mapTransport(g.transport),S=this.formatPhoneNumber(a.phone||"");if(!S)throw new Error("Не удалось отформатировать номер телефона клиента или он отсутствует.");console.log(`Отправка Wazzup: channelId=${(r=y.settings)==null?void 0:r.channel_id}, chatType=${_}, chatId=${S}`),await this.sendWazzupMessage({channelId:((n=y.settings)==null?void 0:n.channel_id)||"",chatType:_,chatId:S,text:w}),h=!0,await this.logNotification({user_id:g.user_id,event_type:e.type,client_id:e.client_id,appointment_id:e.appointment_id,channel:g.channel,transport:g.transport||"N/A",recipient_contact:a.phone,message:w,status:"sent"}),console.log("Сообщение успешно отправлено автоматически и залогировано.")}catch(_){const S=_;console.error(`Ошибка автоматической отправки по каналу ${g.channel}:`,S),f.push({message:S.message||`Ошибка отправки по каналу ${g.channel}`,details:S}),await this.logNotification({user_id:g.user_id,event_type:e.type,client_id:e.client_id,appointment_id:e.appointment_id,channel:g.channel,transport:g.transport||"N/A",recipient_contact:a.phone,message:w,status:"error"})}}}return f.length>0?(console.log("При отправке уведомлений возникли ошибки:",f),{success:h||p,errors:f}):{success:!0}}catch(a){const s=a;return console.error("Глобальная ошибка в sendNotification:",s),{success:!1,errors:[{message:s.message||"Неизвестная глобальная ошибка",details:s}]}}},async getWazzupIntegrationsWithTokensInfo(){const{data:e,error:t}=await ue.from("integrations").select("id, user_id, provider, token, access_token, settings, is_active").eq("provider","wazzup").eq("is_active",!0);return t?(console.error("Ошибка при загрузке интеграций:",t),[]):(console.log("Найдено",e.length,"интеграций Wazzup"),e.forEach((r,n)=>{var c,u,d;const a=!!r.token&&typeof r.token=="string"&&r.token.trim().length>0,s=!!r.access_token&&typeof r.access_token=="string"&&r.access_token.trim().length>0,o=r.token?`${r.token.substring(0,4)}...${r.token.substring(r.token.length-4)} (${r.token.length} символов)`:"отсутствует",l=r.access_token?`${r.access_token.substring(0,4)}...${r.access_token.substring(r.access_token.length-4)} (${r.access_token.length} символов)`:"отсутствует";console.log(`Интеграция #${n+1} (${r.id}):`),console.log(`  - token: ${o}`),console.log(`  - access_token: ${l}`),console.log(`  - hasToken: ${a}, hasAccessToken: ${s}`),console.log(`  - transport: ${(c=r.settings)==null?void 0:c.transport}`),console.log(`  - channel_id: ${(d=(u=r.settings)==null?void 0:u.channel_id)==null?void 0:d.substring(0,8)}...`)}),e)},async sendMessageViaWazzupAPI(e){try{const t={channelId:e.channelId,chatType:e.chatType||"whatsapp",text:e.text};(e.chatType||"whatsapp")==="whatsapp"?t.chatId=e.chatId:(e.chatType||"").toLowerCase()==="telegram"?t.phone=e.chatId:(e.chatType||"").toLowerCase()==="vk"&&(t.chatId=e.chatId),console.log("[Wazzup] Подготовлен запрос:",{endpoint:"https://api.wazzup24.com/v3/message",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ***"},body:t});const r=await this.getWazzupIntegrationsWithTokensInfo();if(r.length===0)return console.error("Интеграции Wazzup не найдены"),{success:!1,error:"Интеграции Wazzup не найдены"};const n=r.find(d=>d.settings&&typeof d.settings=="object"&&"channel_id"in d.settings&&d.settings.channel_id===e.channelId);if(!n)return console.error(`[Wazzup] Интеграция с channel_id ${e.channelId} не найдена`),{success:!1,error:`Интеграция Wazzup с channel_id ${e.channelId} не найдена`};const a=n.token||n.access_token;if(console.log(`[Wazzup] Интеграция ${n.id}:`,{hasToken:!!n.token,hasAccessToken:!!n.access_token,token:a?`${a.substring(0,4)}...${a.substring(a.length-4)}`:"отсутствует",tokensRaw:{token:typeof n.token=="string"?n.token.length:0,access_token:typeof n.access_token=="string"?n.access_token.length:0}}),!a)return console.error(`[Wazzup] Токен отсутствует в интеграции ${n.id}`),{success:!1,error:"Токен для Wazzup API не найден"};console.log(`[Wazzup] Используем токен: ${a.substring(0,4)}...${a.substring(a.length-4)}`);const s=a.trim();s!==a&&console.warn("[Wazzup] Токен содержал пробелы или непечатаемые символы, которые были удалены");let o,l=null,c,u;try{o=await fetch("https://api.wazzup24.com/v3/message",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(t)}),c=o.status;const d=await o.text();try{l=JSON.parse(d)}catch{l=d}if(!o.ok){if(typeof l=="object"&&l!==null){const f=l;u=`${f.status||""} ${f.error||""}: ${f.description||"Нет описания"}`}else u=String(l);return console.error("[Wazzup] Ошибка при отправке:",{status:c,error:u,response:l}),{success:!1,error:`Ошибка Wazzup API: ${u}`}}return console.log("[Wazzup] Ответ Wazzup API:",{status:c,response:l}),typeof l=="object"&&l!==null?{success:!0,...l}:{success:!0}}catch(d){const f=d;return console.error("[Wazzup] Исключение при отправке:",f),{success:!1,error:f.message}}}catch(t){const r=t;return console.error("Ошибка отправки через Wazzup API (catch):",r),{success:!1,error:r.message}}},async sendWazzupMessage(e){try{const t={channelId:e.channelId,chatId:e.chatId,chatType:e.chatType,text:e.text};console.log("Подготовлен запрос к Wazzup API:",{...t,channelId:e.channelId.substring(0,6)+"..."});const{data:r,error:n}=await ue.from("integrations").select("*").eq("provider","wazzup").eq("is_active",!0);if(n)throw new Error(`Не удалось получить интеграции Wazzup: ${n.message}`);if(!r||r.length===0)throw new Error("Нет активных интеграций Wazzup");console.log(`Найдено ${r.length} интеграций Wazzup`);const a=r.find(u=>u.settings&&typeof u.settings=="object"&&"channel_id"in u.settings&&u.settings.channel_id===e.channelId);if(!a)throw new Error(`Интеграция Wazzup с channel_id ${e.channelId} не найдена`);const s=a.token||a.access_token;if(console.log(`Интеграция ${a.id}:`,{hasToken:!!a.token,hasAccessToken:!!a.access_token,token:s?`${s.substring(0,4)}...${s.substring(s.length-4)}`:"отсутствует",tokensRaw:{token:typeof a.token=="string"?a.token.length:0,access_token:typeof a.access_token=="string"?a.access_token.length:0}}),!s)throw console.error(`Токен отсутствует в интеграции ${a.id}`),new Error("Токен для Wazzup API не найден");console.log(`Используем токен для Wazzup API: ${s.substring(0,4)}...${s.substring(s.length-4)}`);const o=s.trim();o!==s&&console.warn("Токен содержал пробелы или непечатаемые символы, которые были удалены");const l=await fetch("https://api.wazzup24.com/v3/message",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(t)});if(!l.ok){const u=await l.text();let d=u;try{const f=JSON.parse(u);d=`${f.status} ${f.error}: ${f.description||"Нет описания"}`}catch{}throw new Error(`Ошибка при отправке через Wazzup API: ${d}`)}const c=await l.json();return console.log("Сообщение успешно отправлено через Wazzup API:",c),c}catch(t){const r=t;throw console.error("Ошибка отправки через Wazzup API:",r),r}},applyTemplate(e,t){let r=e;for(const[n,a]of Object.entries(t))r=r.replace(new RegExp(`{${n}}`,"g"),String(a));return r},formatPhoneNumber(e){const t=e.replace(/\D/g,"");return t.startsWith("8")&&t.length===11?"7"+t.substring(1):t.length===10?"7"+t:t},async sendTestNotification(e,t){var r,n,a,s,o,l,c,u,d;if(console.log(`Отправка тестового уведомления на ${e} через ${t}`),!e)return{success:!1,message:"Не указан номер телефона для отправки"};try{const f=await this.checkWazzupChannelsState();if(!f.success)return{success:!1,message:"Ошибка проверки каналов: "+f.message,details:{channelsCount:f.channels.length}};if(f.activeChannels===0)return{success:!1,message:"Нет активных каналов для отправки уведомлений. Проверьте настройки каналов в кабинете Wazzup.",details:{channels:f.channels.map(C=>({id:C.channelId,transport:C.transport,state:C.state}))}};const{data:h,error:p}=await ue.from("integrations").select("*").eq("provider","wazzup").eq("is_active",!0);if(p||!h||h.length===0)return{success:!1,message:p?`Ошибка получения интеграций: ${p.message}`:"Активные интеграции не найдены"};console.log("Найдены интеграции:",h);const v=t==="whatsapp"?"wamessages":t==="telegram"?"tgapi":"vk";console.log(`Для канала ${t} используем transport: ${v}`);const m=h.filter(C=>{var T;return((T=C.settings)==null?void 0:T.transport)===v});if(m.length===0)return{success:!1,message:`Для канала ${t} не найдены активные интеграции. Проверьте настройки интеграций.`,details:{availableIntegrations:h.map(C=>({id:C.id,transport:C.transport}))}};const g=m[0];console.log("Выбрана интеграция:",{id:g.id,transport:(r=g.settings)==null?void 0:r.transport,channel_id:(n=g.settings)==null?void 0:n.channel_id,has_token:!!(g.token||g.access_token)});const b=typeof g.token=="string"&&g.token.trim().length>0,y=typeof g.access_token=="string"&&g.access_token.trim().length>0;if(!b&&!y)return{success:!1,message:"В интеграции отсутствует токен. Необходимо добавить токен в настройках интеграции."};const w=f.channels.find(C=>{var T;return C.channelId===((T=g.settings)==null?void 0:T.channel_id)});if(!w)return{success:!1,message:`Канал с ID ${(a=g.settings)==null?void 0:a.channel_id} не найден среди доступных каналов. Проверьте настройки интеграции.`,details:{integration_channel_id:(s=g.settings)==null?void 0:s.channel_id,available_channels:f.channels.map(C=>({id:C.channelId,transport:C.transport,state:C.state}))}};if(w.state!=="active")return{success:!1,message:`Канал с ID ${(o=g.settings)==null?void 0:o.channel_id} не активен (статус: ${w.state}). Активируйте канал в кабинете Wazzup.`};const _=this.formatPhoneNumber(e);if(console.log(`Форматированный номер: ${_}`),!_)return{success:!1,message:"Некорректный формат номера телефона"};const E=this.mapTransport((l=g.settings)==null?void 0:l.transport).msgType;console.log(`Используем chatType=${E} для отправки через Wazzup API`);const N=`Тестовое сообщение от BeautyTrack. Система уведомлений работает корректно. Время отправки: ${new Date().toLocaleString()}`,k=await this.sendMessageViaWazzupAPI({channelId:(c=g.settings)==null?void 0:c.channel_id,chatId:_,chatType:E,text:N});return k&&(k.success||k.messageId)?(await this.logNotification({user_id:g.user_id,client_id:null,appointment_id:null,event_type:"test_notification",channel:t,transport:(u=g.settings)==null?void 0:u.transport,recipient_contact:_,message:N,status:"sent"}),{success:!0,message:"Тестовое сообщение успешно отправлено",details:{messageId:k.messageId,chatId:k.chatId}}):(await this.logNotification({user_id:g.user_id,client_id:null,appointment_id:null,event_type:"test_notification",channel:t,transport:(d=g.settings)==null?void 0:d.transport,recipient_contact:_,message:(k==null?void 0:k.error)||"Детали ошибки не были получены от API",status:"error"}),{success:!1,message:"Ошибка отправки тестового сообщения: "+((k==null?void 0:k.error)||"неизвестная ошибка от API"),details:k})}catch(f){return console.error("Исключение при отправке тестового уведомления:",f),{success:!1,message:"Исключение при отправке: "+(f instanceof Error?f.message:String(f))}}},async logNotification(e){try{const t={...e,id:crypto.randomUUID(),created_at:new Date().toISOString()},{error:r}=await ue.from("notification_logs").insert(t);r&&console.error("Ошибка при сохранении лога уведомления:",r)}catch(t){console.error("Ошибка при логировании уведомления:",t)}},async checkWazzupIntegrations(){try{const{data:e,error:t}=await ue.from("integrations").select("*").eq("provider","wazzup");return t?{success:!1,error:`Ошибка получения интеграций: ${t.message}`}:!e||e.length===0?{success:!1,error:"Интеграции Wazzup не найдены"}:{success:!0,integrations:e.map(n=>{const a={...n,diagnosis:{hasSettings:!!n.settings,settingsType:typeof n.settings,isSettingsObject:n.settings&&typeof n.settings=="object",hasChannelId:!1,hasTransport:!1,channelId:null,transport:null,hasToken:!!(n.access_token||n.token),isActive:n.is_active}};return n.settings&&typeof n.settings=="object"&&(a.diagnosis.hasChannelId="channel_id"in n.settings,a.diagnosis.hasTransport="transport"in n.settings,a.diagnosis.hasChannelId&&(a.diagnosis.channelId=n.settings.channel_id),a.diagnosis.hasTransport&&(a.diagnosis.transport=n.settings.transport)),a})}}catch(e){const t=e;return{success:!1,error:`Ошибка при диагностике интеграций: ${t.message}`,message:`Ошибка при диагностике интеграций: ${t.message}`}}},mapTransport(e){return console.log(`mapTransport вызван с аргументом: "${e}"`),e?e==="whatsapp"||e==="wamessages"?(console.log(`mapTransport: определен WhatsApp тип (${e} -> whatsapp)`),{msgType:"whatsapp",channelType:e}):e==="telegram"||e==="tgapi"?(console.log(`mapTransport: определен Telegram тип (${e} -> telegram)`),{msgType:"telegram",channelType:e}):e==="vk"||e==="vkontakte"?(console.log(`mapTransport: определен VK тип (${e} -> vk)`),{msgType:"vk",channelType:e}):(console.log(`mapTransport: неизвестный транспорт "${e}", используем whatsapp по умолчанию`),{msgType:"whatsapp",channelType:e}):(console.log("mapTransport: транспорт не указан, используем whatsapp по умолчанию"),{msgType:"whatsapp",channelType:void 0})},async getWazzupChannels(){try{const{data:e,error:t}=await ue.from("integrations").select("id, token, access_token, settings").eq("provider","wazzup").eq("is_active",!0);if(t)return console.error("Ошибка при получении интеграций Wazzup:",t.message),[];if(!e||e.length===0)return console.log("Активные интеграции Wazzup не найдены"),[];console.log(`Найдено ${e.length} интеграций Wazzup`);const r=e[0],n=typeof r.token=="string"&&r.token.trim().length>0,a=typeof r.access_token=="string"&&r.access_token.trim().length>0,s=n?r.token:a?r.access_token:null;if(!s)return console.error("Ошибка: Токен не найден в интеграции Wazzup"),[];console.log("Запрашиваем список каналов из API Wazzup...");const o=await fetch("https://api.wazzup24.com/v3/channels",{method:"GET",headers:{Authorization:`Bearer ${s.trim()}`}});if(!o.ok){const u=await o.text();return console.error(`Ошибка получения каналов (${o.status}):`,u),[]}const l=await o.json();return console.log(`Получено ${l.length} каналов из API Wazzup`),l.map(u=>{var f;const d=e.find(h=>{var p;return((p=h.settings)==null?void 0:p.channel_id)===u.channelId});return{...u,integrationId:(d==null?void 0:d.id)||null,integrationExists:!!d,integrationActive:!!((f=d==null?void 0:d.settings)!=null&&f.is_active)}})}catch(e){return console.error("Исключение при получении каналов Wazzup:",e),[]}},async checkWazzupChannelsState(){try{const e=await this.getWazzupChannels();if(e.length===0)return{success:!1,channels:[],activeChannels:0,inactiveChannels:0,message:"Каналы Wazzup не найдены"};const t=e.filter(s=>s.state==="active").length,r=e.length-t,n=e.filter(s=>!s.integrationExists);let a=`Найдено ${e.length} каналов, активных: ${t}`;return n.length>0&&(a+=`. ${n.length} каналов не имеют соответствующих интеграций`),t===0&&(a+=". Внимание: нет активных каналов! Уведомления не будут отправляться."),{success:t>0,channels:e,activeChannels:t,inactiveChannels:r,message:a}}catch(e){return{success:!1,channels:[],activeChannels:0,inactiveChannels:0,message:`Ошибка при проверке каналов: ${e instanceof Error?e.message:String(e)}`}}},async sendRoutedNotification(e){var b,y,w,_,S,E,j,N;const t="N/A",{id:r,user_id:n,client_id:a,recipient_contact:s,channel:o,transport:l,generated_message_text:c,event_type:u,appointment_id:d}=e;if(console.log("[Campaigns][sendRoutedNotification] Параметры:",{campaignId:t,queueId:r,user_id:n,client_id:a,recipient_contact:s,itemChannel:o,itemTransport:l,event_type:u,appointment_id:d,generated_message_text:c}),!n)return console.error(`[sendRoutedNotification] User ID is missing for queue item ${r}`),{success:!1,error:"User ID missing in queue item"};if(!s)return console.warn(`[sendRoutedNotification] Recipient contact is missing for queue item ID: ${r}.`),await this.logNotification({user_id:n,event_type:u,client_id:a,appointment_id:d,channel:o,transport:l||"N/A",recipient_contact:"missing",message:c,status:"error_missing_contact"}),{success:!1,error:"Recipient contact missing",statusToLog:"error_missing_contact"};if(!/^\d{11}$/.test(s))return console.error(`[sendRoutedNotification] Некорректный формат номера: ${s} (campaignId: ${t}, client_id: ${a})`),await this.logNotification({user_id:n,event_type:u,client_id:a,appointment_id:d,channel:o,transport:l||"N/A",recipient_contact:s,message:c,status:"error_invalid_phone",error_details:`Некорректный формат номера: ${s}`}),{success:!1,error:"Некорректный формат номера",statusToLog:"error_invalid_phone"};const{data:h,error:p}=await ue.from("integrations").select("id, provider, is_active, user_id, token, access_token, settings").eq("user_id",n).eq("provider","wazzup").eq("is_active",!0);if(p)return console.error(`[sendRoutedNotification] Error fetching Wazzup integrations for user ${n}:`,p),await this.logNotification({user_id:n,event_type:u,client_id:a,appointment_id:d,channel:o,transport:l||"N/A",recipient_contact:s,message:c,status:"error",error_details:`Error fetching integrations: ${p.message}`}),{success:!1,error:`Error fetching integrations: ${p.message}`,statusToLog:"error"};if(!h||h.length===0)return console.warn(`[sendRoutedNotification] No active Wazzup integrations found for user ${n}.`),await this.logNotification({user_id:n,event_type:u,client_id:a,appointment_id:d,channel:o,transport:l||"N/A",recipient_contact:s,message:c,status:"error_no_integration"}),{success:!1,error:"No active Wazzup integrations",statusToLog:"error_no_integration"};const v=h.find(k=>{var B,R,P;const C=(R=(B=k.settings)==null?void 0:B.transport)==null?void 0:R.toLowerCase(),T=(P=k.settings)==null?void 0:P.channel_id,A=o==null?void 0:o.toLowerCase();return T?A==="whatsapp"&&(C==="wamessages"||C==="whatsapp")||A==="telegram"&&(C==="tgapi"||C==="telegram")?!0:A==="vk"&&(C==="vk"||C==="vkontakte"):!1});if(!v)return console.error(`[sendRoutedNotification] Не найдена интеграция для channel: ${o}, transport: ${l}, campaignId: ${t}, client_id: ${a}`),await this.logNotification({user_id:n,event_type:u,client_id:a,appointment_id:d,channel:o,transport:l||"N/A",recipient_contact:s,message:c,status:"error_no_integration",error_details:`Не найдена интеграция для channel: ${o}, transport: ${l}`}),{success:!1,error:"Не найдена интеграция",statusToLog:"error_no_integration"};const m=v.token?`${v.token.substring(0,4)}...${v.token.substring(v.token.length-4)}`:"отсутствует";console.log("[Campaigns][sendRoutedNotification] Найдена интеграция:",{integrationId:v.id,settings:v.settings,token:m,hasToken:!!v.token,hasAccessToken:!!v.access_token});const g=(b=v.settings)==null?void 0:b.channel_id;if(!g)return console.error(`[sendRoutedNotification] channel_id отсутствует в интеграции (integrationId: ${v.id}, campaignId: ${t}, client_id: ${a})`),await this.logNotification({user_id:n,event_type:u,client_id:a,appointment_id:d,channel:o,transport:l||"N/A",recipient_contact:s,message:c,status:"error_no_channel_id",error_details:`channel_id отсутствует в интеграции (integrationId: ${v.id})`}),{success:!1,error:"channel_id отсутствует",statusToLog:"error_no_channel_id"};try{const k={chatId:s,text:c,chatType:((y=v.settings)==null?void 0:y.transport)==="wamessages"||((w=v.settings)==null?void 0:w.transport)==="whatsapp"?"whatsapp":((_=v.settings)==null?void 0:_.transport)==="vk"||((S=v.settings)==null?void 0:S.transport)==="vkontakte"?"vk":"telegram",channelId:g,phone:((E=v.settings)==null?void 0:E.transport)==="wamessages"||((j=v.settings)==null?void 0:j.transport)==="whatsapp"?s:void 0};console.log("[Campaigns][sendRoutedNotification] Отправка через Wazzup API с параметрами:",k);const C=await this.sendMessageViaWazzupAPI(k);if(console.log("[Campaigns][sendRoutedNotification] Результат Wazzup API:",C),C.success&&C.messageId)return await this.logNotification({user_id:n,event_type:u,client_id:a,appointment_id:d,channel:o,transport:l||"N/A",recipient_contact:s,message:c,status:"sent",message_id:String(C.messageId),integration_id:v.id}),{success:!0,messageId:String(C.messageId),statusToLog:"sent"};let T="Unknown Wazzup API error";if(C.error)T=C.error;else if(C.data){const A=C.data;typeof A.message=="string"?T=A.message:typeof A.error=="string"?T=A.error:typeof((N=A.error)==null?void 0:N.message)=="string"?T=A.error.message:typeof C.data=="string"?T=C.data:T=JSON.stringify(C.data)}return console.error(`[Campaigns][sendRoutedNotification] Ошибка отправки через Wazzup для queue item ${r}:`,T),await this.logNotification({user_id:n,event_type:u,client_id:a,appointment_id:d,channel:o,transport:l||"N/A",recipient_contact:s,message:c,status:"error",error_details:`Wazzup API Error: ${T}`,integration_id:v.id}),{success:!1,error:`Wazzup API Error: ${T}`,statusToLog:"error"}}catch(k){return console.error("[Campaigns][sendRoutedNotification] Исключение при отправке через Wazzup API:",k),await this.logNotification({user_id:n,event_type:u,client_id:a,appointment_id:d,channel:o,transport:l||"N/A",recipient_contact:s,message:c,status:"error",error_details:`Exception: ${k instanceof Error?k.message:String(k)}`,integration_id:v.id}),{success:!1,error:`Exception: ${k instanceof Error?k.message:String(k)}`,statusToLog:"error"}}}},Pb="appointments",ll=e=>{const t=e==null?void 0:e.client,r=e==null?void 0:e.specialist,n=e==null?void 0:e.service;return{id:(e==null?void 0:e.id)??"",appointment_number:(e==null?void 0:e.appointment_number)??null,client_id:(e==null?void 0:e.client_id)??null,specialist_id:(e==null?void 0:e.specialist_id)??null,service_id:(e==null?void 0:e.service_id)??null,date:(e==null?void 0:e.date)??"",time:(e==null?void 0:e.start_time)??"",start_time:(e==null?void 0:e.start_time)??"",end_time:(e==null?void 0:e.end_time)??"",status:(e==null?void 0:e.status)??"pending",notes:(e==null?void 0:e.notes)??null,price:(e==null?void 0:e.price)??0,created_at:(e==null?void 0:e.created_at)??new Date().toISOString(),updated_at:(e==null?void 0:e.updated_at)??new Date().toISOString(),client_name:(t==null?void 0:t.full_name)??(e==null?void 0:e.client_name)??"N/A",client_phone:(t==null?void 0:t.phone)??(e==null?void 0:e.client_phone)??"",client_email:(t==null?void 0:t.email)??(e==null?void 0:e.client_email)??"",specialist_name:(r==null?void 0:r.name)??(r==null?void 0:r.full_name)??"Не указан",specialist_avatar_url:(r==null?void 0:r.photo_url)??(r==null?void 0:r.avatar_url)??"",duration:(e==null?void 0:e.duration)??void 0,service:n?{id:String(n.id??(e==null?void 0:e.service_id)??""),name:n.name??"Услуга",price:n.price??0,duration:n.duration??0}:void 0,client:t?{id:String(t.id??(e==null?void 0:e.client_id)??""),name:t.full_name??"Клиент"}:void 0,specialist:r?{id:String(r.id??(e==null?void 0:e.specialist_id)??""),name:r.name??r.full_name??"Специалист",avatar_url:r.photo_url}:void 0,bonuses_spent:(e==null?void 0:e.bonuses_spent)??null,final_price:(e==null?void 0:e.final_price)??null,abonement_used_id:(e==null?void 0:e.abonement_used_id)??null,discount_percent:(e==null?void 0:e.discount_percent)??null,loyalty_program_name:(e==null?void 0:e.loyalty_program_name)??null}},rs={async getAllAppointments(e={}){var t;try{console.log("getAllAppointments параметры:",{specialistId:e.specialistId,dateFrom:e.dateFrom,dateTo:e.dateTo,status:e.status});let r=ue.from("appointments").select(`
        *,
        appointment_number,
        service:service_id(id, name, duration, price),
        specialist:specialist_id(name, photo_url),
        client:client_id(full_name, phone, email)
      `);if(e.status&&(Array.isArray(e.status)?r=r.in("status",e.status):r=r.eq("status",e.status)),e.clientId&&(r=r.eq("client_id",e.clientId)),e.specialistId&&(r=r.eq("specialist_id",e.specialistId)),e.dateFrom){const o=typeof e.dateFrom=="string"?e.dateFrom:Me(e.dateFrom,"yyyy-MM-dd");r=r.gte("date",o)}if(e.dateTo){const o=typeof e.dateTo=="string"?e.dateTo:Me(e.dateTo,"yyyy-MM-dd");r=r.lte("date",o)}const{data:n,error:a}=await r;if(a)throw console.error("Ошибка при получении записей:",a),a;const s=[];for(const o of n||[])try{const l=ll(o);if(!((t=l.service)!=null&&t.duration)&&l.service_id){const{data:c}=await ue.from("services").select("duration, name, price").eq("id",l.service_id).single();c&&(l.service={id:String(l.service_id),name:c.name||"Услуга",duration:c.duration,price:c.price})}l.service&&typeof l.service.duration=="number"&&s.push(l)}catch(l){console.error("Ошибка при обработке записи:",l)}return s}catch(r){throw console.error("Ошибка в appointmentService.getAllAppointments:",r),r}},async getAppointmentById(e){if(!e)throw console.error("[APPOINTMENT] getAppointmentById: ID не указан"),new Error("ID не указан");if(!V1(e))throw console.error(`[APPOINTMENT] getAppointmentById: Некорректный UUID: ${e}`),new Error("Некорректный UUID записи");console.log(`[APPOINTMENT] Запрос записи по ID: ${e}`);try{const{data:t,error:r}=await ue.from(Pb).select(`
          *,
          service:service_id(id, name, duration, price),
          specialist:specialist_id(name, photo_url),
          client:client_id(full_name, phone, email)
        `).eq("id",e).single();if(r)throw console.error(`[APPOINTMENT] Ошибка при получении записи по ID ${e}:`,r),new Error(`Ошибка при получении записи: ${r.message}`);return console.log("[APPOINTMENT] Успешно получена запись:",t),ll(t)}catch(t){console.error(`[APPOINTMENT] Исключение при получении записи по ID ${e}:`,t);const r=t instanceof Error?t.message:"Неизвестная ошибка";throw new Error(`Не удалось загрузить запись: ${r}`)}},addMinutesToTime(e,t){const[r,n]=e.split(":").map(Number),a=new Date(2e3,0,1,r,n),s=Qd(a,t);return Me(s,"HH:mm")},async createAppointment(e){const t=await ue.from("services").select("duration, price").eq("id",e.service_id).single(),r=xh(t),n={client_id:e.client_id||null,specialist_id:e.specialist_id,service_id:e.service_id,date:e.date,start_time:e.time,end_time:this.addMinutesToTime(e.time,r.duration),status:"pending",notes:e.notes||null,price:r.price,client_name:e.client_name,client_phone:e.client_phone,client_email:e.client_email};console.log("Создаём запись с данными:",n);const{data:a,error:s}=await ue.from("appointments").insert([n]).select("*, service:service_id(*), specialist:specialist_id(*), client:client_id(*)").single();if(s)throw console.error("Ошибка при создании записи:",s),new Error(`Не удалось создать запись: ${s.message}`);return console.log("Запись успешно создана:",a),ll(a)},async updateAppointmentStatus(e,t){var r,n,a,s;try{if(!e)throw new Error("ID записи не может быть пустым");const o={status:t},{data:l,error:c}=await ue.from("appointments").update(o).eq("id",String(e)).select("*, service:service_id(*), specialist:specialist_id(*), client:client_id(*)").single();if(c)throw c;const u=l?ll(l):null;if(t==="confirmed"&&u)try{await dA.sendNotification({type:u.source==="online"?"online_booking":"admin_booking",recipient:"client",client_id:String(u.client_id),appointment_id:String(u.id),date:u.date,time:u.start_time,master:((r=u.specialist)==null?void 0:r.name)||"",service:((n=u.service)==null?void 0:n.name)||""})}catch(d){console.error("Ошибка отправки уведомления:",d)}if(t==="cancelled"&&u)try{console.log("Начинаем процесс отправки уведомления об отмене:",u.id);const d={type:"booking_cancelled",recipient:"client",client_id:String(u.client_id),appointment_id:String(u.id),date:u.date,time:u.start_time,master:((a=u.specialist)==null?void 0:a.name)||"",service:((s=u.service)==null?void 0:s.name)||""};console.log("Отправляем данные для уведомления:",d),await dA.sendNotification(d),console.log("Результат отправки уведомления об отмене:")}catch(d){console.error("Ошибка отправки уведомления об отмене:",d)}if(t==="completed"&&u)try{await this.applyBonusForAppointment(String(u.id),String(u.client_id))}catch(d){console.error("Ошибка начисления бонусов:",d)}return u}catch(o){throw console.error("Ошибка обновления статуса записи:",o),o}},async updateAppointment(e,t){console.log("[appointmentService.updateAppointment] Начало. ID:",e,"Данные для обновления:",JSON.stringify(t));const r=["client_id","client_name","client_phone","client_email","specialist_id","service_id","date","start_time","notes","final_price","discount_percent","updated_at","end_time"],n={};let a;if(t.service_id){console.log("[appointmentService.updateAppointment] Обновляется service_id, получаем duration для:",t.service_id);const u=await ue.from("services").select("duration").eq("id",t.service_id).single(),d=xh(u);d&&typeof d.duration=="number"&&(a=d.duration,console.log("[appointmentService.updateAppointment] Получена duration:",a))}t.date&&(n.date=t.date),t.time&&(n.start_time=t.time,typeof a=="number"?(n.end_time=this.addMinutesToTime(t.time,a),console.log("[appointmentService.updateAppointment] Рассчитано end_time:",n.end_time)):(n.end_time=t.time,console.log("[appointmentService.updateAppointment] end_time (fallback):",n.end_time))),t.specialist_id&&(n.specialist_id=t.specialist_id),t.service_id&&(n.service_id=t.service_id),t.notes!==void 0&&(n.notes=t.notes),t.client_name&&(n.client_name=t.client_name),t.client_phone&&(n.client_phone=t.client_phone),t.client_email&&(n.client_email=t.client_email),t.final_price!==void 0&&(n.final_price=t.final_price),t.discount_percent!==void 0&&(n.discount_percent=t.discount_percent),n.updated_at=new Date().toISOString();const s=Object.fromEntries(Object.entries(n).filter(([u])=>r.includes(u)));console.log("[appointmentService.updateAppointment] Отфильтрованные данные для Supabase:",JSON.stringify(s));const{data:o,error:l}=await ue.from("appointments").update(s).eq("id",e).select("*, service:service_id(*), specialist:specialist_id(*), client:client_id(*)").single();if(console.log("[appointmentService.updateAppointment] Ответ от Supabase (update):",JSON.stringify(o)),l)throw console.error("[appointmentService.updateAppointment] Ошибка при обновлении записи (до handleApiResponse):",l),new Error(`Не удалось обновить запись: ${l.message}`);if(!o)throw console.error("[appointmentService.updateAppointment] Нет данных в ответе Supabase после обновления (до handleApiResponse)."),new Error("Не удалось получить обновлённую запись после обновления.");const c=ll(o);return console.log("[appointmentService.updateAppointment] Результат после handleApiResponse:",JSON.stringify(c)),c},async deleteAppointment(e){const t=await ue.from("appointments").delete().eq("id",e);xh(t)},async getClientAppointments(e){const{data:t,error:r}=await ue.from(Pb).select("*, service:service_id(*), specialist:specialist_id(*), client:client_id(*)").eq("client_id",e).order("date",{ascending:!0}).order("start_time",{ascending:!0});if(r)throw r;return(t||[]).map(ll)},async getSpecialistAppointments(e){const{data:t,error:r}=await ue.from(Pb).select("*, service:service_id(*), specialist:specialist_id(*), client:client_id(*)").eq("specialist_id",e).order("date",{ascending:!0}).order("start_time",{ascending:!0});if(r)throw r;return(t||[]).map(ll)},async checkSpecialistAvailability(e,t,r,n,a){if(!e||!V1(e))return console.error(`[SPECIALIST AVAILABILITY] Некорректный UUID специалиста: ${e}`),!1;console.log(`[SPECIALIST AVAILABILITY] Проверка доступности специалиста ID=${e}, дата=${t}, время=${r}, длительность=${n}`);let s=ue.from("appointments").select("id, start_time, end_time, status").eq("specialist_id",e).eq("date",t).not("status","eq","cancelled");a&&(s=s.not("id","eq",a));const o=await s,l=xh(o),c=this.addMinutesToTime(r,n);for(const u of l){const d=u.start_time,f=u.end_time;if(r>=d&&r<f||c>d&&c<=f||r<=d&&c>=f||r>=d&&c<=f)return console.log(`[SPECIALIST AVAILABILITY] Найдено пересечение с записью ${u.id}`),!1}try{console.log(`[SPECIALIST AVAILABILITY] Запрос информации о специалисте ID=${e}`);const u=await ue.from("specialists").select("work_schedule").eq("id",e).single();if(u.error)return console.error("[SPECIALIST AVAILABILITY] Ошибка при получении данных специалиста:",u.error),!1;const d=xh(u);console.log("[SPECIALIST AVAILABILITY] Получены данные специалиста:",d);const f={0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday"},h=new Date(t),p=f[h.getDay()];let v=!0,m="09:00",g="18:00";if(d.work_schedule&&d.work_schedule[p]){const b=d.work_schedule[p];v=b.isWorkingDay!==!1,m=b.start,g=b.end}return v?!m||!g?(console.error("[SPECIALIST AVAILABILITY] Не заданы рабочие часы специалиста"),!1):r<m||c>g?(console.log(`[SPECIALIST AVAILABILITY] Время записи выходит за рамки рабочих часов (${m}-${g})`),!1):(console.log("[SPECIALIST AVAILABILITY] Время доступно для записи"),!0):(console.log(`[SPECIALIST AVAILABILITY] Специалист не работает в этот день (${t}, ${p})`),!1)}catch(u){return console.error("[SPECIALIST AVAILABILITY] Исключение при проверке доступности специалиста:",u),!1}},async getClientProcedureHistory(e){console.log(`[appointmentService] Запрос истории процедур для клиента ID: ${e}`);const{data:t,error:r}=await ue.from("procedure_history_view").select("*").eq("client_id",e).order("date",{ascending:!1});if(r)throw console.error(`[appointmentService] Ошибка при получении истории процедур клиента ${e}:`,r),r;return console.log(`[appointmentService] Получена история процедур для клиента ${e}:`,t),t||[]},async getAppointmentsByClientId(e){console.log(`[appointmentService] Запрос записей для клиента ID: ${e}`);const{data:t,error:r}=await ue.from("procedure_history_view").select("*").eq("client_id",e).order("date",{ascending:!1}).order("start_time",{ascending:!1});if(r)throw r;return(t||[]).map(n=>ll(n))},async createAppointmentWithBonus(e,t){if(!await qo(()=>Promise.resolve().then(()=>ON),void 0).then(d=>d.clientService.getClientById(e.client_id)))throw new Error("Клиент не найден");const n=await ue.from("services").select("duration, price").eq("id",e.service_id).single(),a=xh(n);if(t>a.price)throw new Error("Бонусов больше, чем стоимость услуги");const s={client_id:e.client_id||null,specialist_id:e.specialist_id,service_id:e.service_id,date:e.date,start_time:e.time,end_time:this.addMinutesToTime(e.time,a.duration),status:"pending",notes:e.notes||null,price:a.price,client_name:e.client_name,client_phone:e.client_phone,client_email:e.client_email,bonuses_spent:t,payment_type:"bonus"},{data:o,error:l}=await ue.from("appointments").insert([s]).select("*, service:service_id(*), specialist:specialist_id(*), client:client_id(*)").single();if(l)throw new Error("Ошибка создания записи: "+l.message);const{error:c}=await ue.from("bonus_transactions").insert({client_id:e.client_id,appointment_id:o.id,amount:-t,type:"spend",description:`Оплата услуги бонусами (запись #${o.id})`});if(c)throw await ue.from("appointments").delete().eq("id",o.id),new Error("Ошибка создания транзакции бонусов: "+c.message);if(!await qo(()=>Promise.resolve().then(()=>ON),void 0).then(d=>d.clientService.addBonusPoints(e.client_id,-t)))throw await ue.from("bonus_transactions").delete().eq("appointment_id",o.id),await ue.from("appointments").delete().eq("id",o.id),new Error("Ошибка списания бонусов у клиента");return ll(o)},async applyBonusesToAppointment(e,t,r){if(console.log("[applyBonusesToAppointment] Called with",{appointmentId:e,clientId:t,bonusesToDeduct:r}),r<0)return{success:!1,message:"Bonus amount to deduct cannot be negative."};const{data:n,error:a}=await ue.rpc("apply_bonuses_to_appointment_v2",{p_appointment_id:e,p_client_id:t,p_bonuses_to_deduct:r});if(a)return console.error("Error calling apply_bonuses_to_appointment_v2 RPC:",a),{success:!1,message:`Database error: ${a.message}`};const s=n;return console.log("[applyBonusesToAppointment] RPC response:",s),s&&s.success&&s.updated_appointment?{...s}:s&&!s.success?s:{success:!1,message:"Unexpected response from server."}},async applySubscription({appointmentId:e,subscriptionId:t}){const{data:r,error:n}=await ue.from("loyalty_user_states").select("*").eq("id",t).single();if(n||!r)throw new Error("Абонемент не найден");if(r.subscription_visits_left<=0)throw new Error("Нет доступных визитов");const{data:a,error:s}=await ue.from("appointments").select("client_id").eq("id",e).single();if(s)throw new Error("Не удалось получить данные о записи");try{const{clientService:c}=await qo(async()=>{const{clientService:u}=await Promise.resolve().then(()=>ON);return{clientService:u}},void 0);console.log("Отменены бонусы, ранее начисленные по записи (при применении абонемента) - функционал clearBonusTransactionsForAppointment временно отключен"),Ae({title:"Бонусы отменены (условно)",description:"Бонусы не начисляются при использовании абонемента",variant:"default"})}catch(c){console.error("Ошибка при отмене бонусов:",c)}const{error:o}=await ue.from("appointments").update({abonement_used_id:t}).eq("id",e);if(o)throw new Error("Не удалось обновить запись");const{error:l}=await ue.from("loyalty_user_states").update({subscription_visits_left:r.subscription_visits_left-1}).eq("id",t);if(l)throw new Error("Не удалось уменьшить количество визитов");return!0},async applyBonusForAppointment(e,t){var r,n;try{const a=await this.getAppointmentById(e);if(a.abonement_used_id)return console.log(`Бонусы не начисляются: запись ${e} оплачена абонементом ${a.abonement_used_id}`),{success:!1,error:"Бонусы не начисляются по абонементу"};const s=await fetch("https://gmajzyndavrqvjccojus.supabase.co/functions/v1/apply-bonus",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdtYWp6eW5kYXZycXZqY2NvanVzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0OTM1NjEsImV4cCI6MjA2MTA2OTU2MX0.BryyXcZIgCKBfgVky2TouD2Ru1gO9Hrd5QyJ7c7vUdk"},body:JSON.stringify({appointment_id:e,client_id:t})});if(!s.ok){const l=await s.json();throw new Error(l.error||`Ошибка ${s.status}: ${s.statusText}`)}const o=await s.json();return console.log("[BONUS RESULT]",{success:o.success,bonus:o.bonus,formula:o.formula,basePrice:o.basePrice,finalPrice:o.finalPrice,newBalance:o.newBalance}),o.success&&o.bonus&&Ae({title:"Бонусы начислены",description:`Начислено ${o.bonus} бонусов!`}),o}catch(a){return console.error("Ошибка начисления бонусов:",a instanceof Error?a.message:void 0),a instanceof Error&&!((r=a.message)!=null&&r.includes("Процедура не найдена"))&&!((n=a.message)!=null&&n.includes("Процедура не завершена"))&&Ae({title:"Ошибка начисления бонусов",description:a instanceof Error?a.message:"Неизвестная ошибка",variant:"destructive"}),{success:!1,error:a instanceof Error?a.message:void 0}}},async updateAppointmentPriceAndDuration(e,t){if(!V1(e)){const r="Некорректный ID записи для обновления цены/длительности.";throw console.error(`[UpdatePriceDuration] ${r}`,{appointmentId:e}),Ae({title:"Ошибка",description:r,variant:"destructive"}),new Error(r)}console.log("[UpdatePriceDuration] Обновление записи:",{appointmentId:e,updates:t});try{const{data:r,error:n}=await ue.from(Pb).update(t).eq("id",e).select("*, service:services!inner(id, name, duration, price), specialist:specialists!inner(id, name, photo_url), client:clients!inner(id, full_name, phone, email)").single();if(n)throw console.error("[UpdatePriceDuration] Ошибка обновления записи в Supabase:",n),Ae({title:"Ошибка",description:"Не удалось обновить детали записи.",variant:"destructive"}),n;if(!r)return console.error("[UpdatePriceDuration] Запись не найдена после обновления."),Ae({title:"Ошибка",description:"Обновленная запись не найдена.",variant:"destructive"}),null;console.log("[UpdatePriceDuration] Запись успешно обновлена в Supabase:",r);const a=ll(r);if(a.status==="completed"){console.log("[UpdatePriceDuration] Запись завершена, требуется пересчет бонусов.");try{console.log("[UpdatePriceDuration] Попытка начислить бонусы заново."),this.applyBonusForAppointment?(await this.applyBonusForAppointment(e,String(a.client_id)),Ae({title:"Бонусы",description:"Запрос на пересчет бонусов отправлен. Существующие бонусы не были отменены автоматически.",variant:"default"})):(console.error("[UpdatePriceDuration] Функция applyBonusForAppointment не найдена в this."),Ae({title:"Ошибка конфигурации",description:"Функция начисления бонусов не найдена.",variant:"destructive"}))}catch(s){console.error("[UpdatePriceDuration] Ошибка при попытке пересчета бонусов:",s),Ae({title:"Ошибка бонусов",description:"Не удалось инициировать пересчет бонусов.",variant:"destructive"})}}return Ae({title:"Успех",description:"Детали записи успешно обновлены.",variant:"default"}),a}catch(r){throw console.error("[UpdatePriceDuration] Непредвиденная ошибка:",r),r instanceof Error?r:new Error("Произошла неизвестная ошибка при обновлении записи.")}}},PG=Object.freeze(Object.defineProperty({__proto__:null,appointmentService:rs},Symbol.toStringTag,{value:"Module"})),qu=uo()(Kf((e,t)=>({appointments:[],selectedAppointment:null,loading:!1,error:null,fetchAppointments:async r=>{e({loading:!0,error:null});try{const n=await rs.getAllAppointments(r);console.log("Загружено записей:",n.length),e({appointments:n,loading:!1})}catch(n){console.error("Ошибка в хранилище при загрузке записей:",n),e({error:n instanceof Error?n.message:"Ошибка при загрузке записей",loading:!1,appointments:[]}),console.warn("При ошибке загрузки из БД можно использовать тестовые данные, разкомментировав соответствующий код")}},createAppointment:async r=>{e({loading:!0,error:null});try{const n=await rs.createAppointment(r);e({appointments:[...t().appointments,n],selectedAppointment:n,loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Ошибка при создании записи",loading:!1})}},updateAppointmentStatus:async(r,n)=>{var a;e({loading:!0,error:null});try{const s=await rs.updateAppointmentStatus(r,n),o=t().appointments.map(l=>l.id===r?s:l);e({appointments:o,selectedAppointment:((a=t().selectedAppointment)==null?void 0:a.id)===r?s:t().selectedAppointment,loading:!1}),await t().fetchAppointments()}catch(s){e({error:s instanceof Error?s.message:"Ошибка при обновлении статуса записи",loading:!1})}},updateAppointment:async(r,n)=>{var a;e({loading:!0,error:null});try{const s=await rs.updateAppointment(r,n),o=t().appointments.map(l=>l.id===r?s:l);e({appointments:o,selectedAppointment:((a=t().selectedAppointment)==null?void 0:a.id)===r?s:t().selectedAppointment,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Ошибка при обновлении записи",loading:!1})}},deleteAppointment:async r=>{var n;e({loading:!0,error:null});try{await rs.deleteAppointment(r);const a=t().appointments.filter(s=>s.id!==r);e({appointments:a,selectedAppointment:((n=t().selectedAppointment)==null?void 0:n.id)===r?null:t().selectedAppointment,loading:!1})}catch(a){e({error:a instanceof Error?a.message:"Ошибка при удалении записи",loading:!1})}},selectAppointment:r=>{e({selectedAppointment:r})},clearError:()=>e({error:null}),fetchLastNotificationStatus:async r=>{e(n=>({appointments:n.appointments.map(a=>a.id===r?{...a,isLoadingNotificationStatus:!0}:a)}));try{const{data:n,error:a}=await window.supabase.from("notification_logs").select("status, event_type, created_at, error_details").eq("appointment_id",r).order("created_at",{ascending:!1}).limit(1).single();e(s=>({appointments:s.appointments.map(o=>o.id===r?{...o,lastNotificationStatus:n==null?void 0:n.status,lastNotificationEventType:n==null?void 0:n.event_type,lastNotificationCreatedAt:n==null?void 0:n.created_at,lastNotificationErrorDetails:n==null?void 0:n.error_details,isLoadingNotificationStatus:!1}:o)}))}catch{e(a=>({appointments:a.appointments.map(s=>s.id===r?{...s,isLoadingNotificationStatus:!1,lastNotificationStatus:"error_fetching"}:s)}))}}}),{name:"beauty-track-appointments-storage",partialize:e=>({appointments:e.appointments,selectedAppointment:e.selectedAppointment})}));var OG=Symbol.for("immer-nothing"),mF=Symbol.for("immer-draftable"),Ai=Symbol.for("immer-state");function Do(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var tp=Object.getPrototypeOf;function rp(e){return!!e&&!!e[Ai]}function bf(e){var t;return e?RG(e)||Array.isArray(e)||!!e[mF]||!!((t=e.constructor)!=null&&t[mF])||Nj(e)||Cj(e):!1}var dye=Object.prototype.constructor.toString();function RG(e){if(!e||typeof e!="object")return!1;const t=tp(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===dye}function Ww(e,t){Ej(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function Ej(e){const t=e[Ai];return t?t.type_:Array.isArray(e)?1:Nj(e)?2:Cj(e)?3:0}function fA(e,t){return Ej(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function DG(e,t,r){const n=Ej(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function fye(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Nj(e){return e instanceof Map}function Cj(e){return e instanceof Set}function Cd(e){return e.copy_||e.base_}function hA(e,t){if(Nj(e))return new Map(e);if(Cj(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=RG(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Ai];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(tp(e),n)}else{const n=tp(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function B4(e,t=!1){return kj(e)||rp(e)||!bf(e)||(Ej(e)>1&&(e.set=e.add=e.clear=e.delete=hye),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>B4(n,!0))),e}function hye(){Do(2)}function kj(e){return Object.isFrozen(e)}var mye={};function wf(e){const t=mye[e];return t||Do(0,e),t}var Ov;function MG(){return Ov}function pye(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function pF(e,t){t&&(wf("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function mA(e){pA(e),e.drafts_.forEach(gye),e.drafts_=null}function pA(e){e===Ov&&(Ov=e.parent_)}function gF(e){return Ov=pye(Ov,e)}function gye(e){const t=e[Ai];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function vF(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Ai].modified_&&(mA(t),Do(4)),bf(e)&&(e=Vw(t,e),t.parent_||Hw(t,e)),t.patches_&&wf("Patches").generateReplacementPatches_(r[Ai].base_,e,t.patches_,t.inversePatches_)):e=Vw(t,r,[]),mA(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==OG?e:void 0}function Vw(e,t,r){if(kj(t))return t;const n=t[Ai];if(!n)return Ww(t,(a,s)=>xF(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Hw(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,o=!1;n.type_===3&&(s=new Set(a),a.clear(),o=!0),Ww(s,(l,c)=>xF(e,n,a,l,c,r,o)),Hw(e,a,!1),r&&e.patches_&&wf("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function xF(e,t,r,n,a,s,o){if(rp(a)){const l=s&&t&&t.type_!==3&&!fA(t.assigned_,n)?s.concat(n):void 0,c=Vw(e,a,l);if(DG(r,n,c),rp(c))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(bf(a)&&!kj(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Vw(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Hw(e,a)}}function Hw(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&B4(t,r)}function vye(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:MG(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=U4;r&&(a=[n],s=Rv);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var U4={get(e,t){if(t===Ai)return e;const r=Cd(e);if(!fA(r,t))return xye(e,r,t);const n=r[t];return e.finalized_||!bf(n)?n:n===oN(e.base_,t)?(lN(e),e.copy_[t]=vA(n,e)):n},has(e,t){return t in Cd(e)},ownKeys(e){return Reflect.ownKeys(Cd(e))},set(e,t,r){const n=IG(Cd(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=oN(Cd(e),t),s=a==null?void 0:a[Ai];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(fye(r,a)&&(r!==void 0||fA(e.base_,t)))return!0;lN(e),gA(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return oN(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,lN(e),gA(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Cd(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Do(11)},getPrototypeOf(e){return tp(e.base_)},setPrototypeOf(){Do(12)}},Rv={};Ww(U4,(e,t)=>{Rv[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Rv.deleteProperty=function(e,t){return Rv.set.call(this,e,t,void 0)};Rv.set=function(e,t,r){return U4.set.call(this,e[0],t,r,e[0])};function oN(e,t){const r=e[Ai];return(r?Cd(r):e)[t]}function xye(e,t,r){var a;const n=IG(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function IG(e,t){if(!(t in e))return;let r=tp(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=tp(r)}}function gA(e){e.modified_||(e.modified_=!0,e.parent_&&gA(e.parent_))}function lN(e){e.copy_||(e.copy_=hA(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var yye=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const o=this;return function(c=s,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Do(6),n!==void 0&&typeof n!="function"&&Do(7);let a;if(bf(t)){const s=gF(this),o=vA(t,void 0);let l=!0;try{a=r(o),l=!1}finally{l?mA(s):pA(s)}return pF(s,n),vF(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===OG&&(a=void 0),this.autoFreeze_&&B4(a,!0),n){const s=[],o=[];wf("Patches").generateReplacementPatches_(t,a,s,o),n(s,o)}return a}else Do(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,a;return[this.produce(t,r,(o,l)=>{n=o,a=l}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){bf(e)||Do(8),rp(e)&&(e=bye(e));const t=gF(this),r=vA(e,void 0);return r[Ai].isManual_=!0,pA(t),r}finishDraft(e,t){const r=e&&e[Ai];(!r||!r.isManual_)&&Do(9);const{scope_:n}=r;return pF(n,t),vF(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=wf("Patches").applyPatches_;return rp(e)?n(e,t):this.produce(e,a=>n(a,t))}};function vA(e,t){const r=Nj(e)?wf("MapSet").proxyMap_(e,t):Cj(e)?wf("MapSet").proxySet_(e,t):vye(e,t);return(t?t.scope_:MG()).drafts_.push(r),r}function bye(e){return rp(e)||Do(10,e),$G(e)}function $G(e){if(!bf(e)||kj(e))return e;const t=e[Ai];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=hA(e,t.scope_.immer_.useStrictShallowCopy_)}else r=hA(e,!0);return Ww(r,(n,a)=>{DG(r,n,$G(a))}),t&&(t.finalized_=!1),r}var Pi=new yye,wye=Pi.produce;Pi.produceWithPatches.bind(Pi);Pi.setAutoFreeze.bind(Pi);Pi.setUseStrictShallowCopy.bind(Pi);Pi.applyPatches.bind(Pi);Pi.createDraft.bind(Pi);Pi.finishDraft.bind(Pi);const _ye=e=>(t,r,n)=>(n.setState=(a,s,...o)=>{const l=typeof a=="function"?wye(a):a;return t(l,s,...o)},e(n.setState,r,n)),Jp=_ye,Na=[];for(let e=0;e<256;++e)Na.push((e+256).toString(16).slice(1));function Sye(e,t=0){return(Na[e[t+0]]+Na[e[t+1]]+Na[e[t+2]]+Na[e[t+3]]+"-"+Na[e[t+4]]+Na[e[t+5]]+"-"+Na[e[t+6]]+Na[e[t+7]]+"-"+Na[e[t+8]]+Na[e[t+9]]+"-"+Na[e[t+10]]+Na[e[t+11]]+Na[e[t+12]]+Na[e[t+13]]+Na[e[t+14]]+Na[e[t+15]]).toLowerCase()}let cN;const jye=new Uint8Array(16);function Eye(){if(!cN){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");cN=crypto.getRandomValues.bind(crypto)}return cN(jye)}const Nye=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),yF={randomUUID:Nye};function FG(e,t,r){var a;if(yF.randomUUID&&!t&&!e)return yF.randomUUID();e=e||{};const n=e.random??((a=e.rng)==null?void 0:a.call(e))??Eye();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Sye(n)}const bF="specialists",Ob="staff_working_days_overrides",Mn={async getAllStaff(){console.log("[staffService] Запрос всех специалистов...");try{const{data:e,error:t}=await ue.from(bF).select("*");if(t)return console.error("[staffService] Ошибка при получении специалистов:",t),[];const r=e.map(n=>{const a=n.work_schedule?Object.keys(n.work_schedule):[],s=a.length>0&&n.work_schedule[a[0]]?n.work_schedule[a[0]]:{start:"09:00",end:"18:00"},o=n.work_days&&n.work_days.length>0?n.work_days:a;return{...n,full_name:n.name,avatar_url:n.photo_url,work_days:o,work_hours:s,services:Array.isArray(n.services)?n.services:[],appointments_count:n.appointments_count||0,total_revenue:n.total_revenue||0}});return console.log("[staffService] Специалисты успешно загружены:",r.length),r}catch(e){return console.error("[staffService] Исключение при получении специалистов:",e),[]}},async getStaffById(e){try{const{data:t,error:r}=await ue.from("specialists").select("*").eq("id",e).single();return r?(console.error("Error fetching specialist by ID:",r),null):{...t,full_name:t.name}}catch(t){return console.error("Exception when fetching specialist by ID:",t),null}},async createStaff(e){console.log("[staffService] Создание нового специалиста с данными:",e);try{if(!e.full_name||!e.specialization)return console.error("[staffService] Ошибка при создании специалиста: Отсутствуют обязательные поля"),null;const t=FG();let r={};if(e.work_days&&e.work_days.length>0&&e.work_hours){const l={};e.work_days.forEach(c=>{l[c]={start:e.work_hours.start,end:e.work_hours.end}}),r=l}else e.work_schedule&&(r=e.work_schedule);const n={id:t,name:e.full_name,specialization:e.specialization,bio:e.bio||null,experience_years:e.experience_years||0,photo_url:e.avatar_url||null,is_active:e.is_active??!0,work_schedule:Object.keys(r).length>0?r:null,phone:e.phone||null,email:e.email||null};console.log("[staffService] Отправляем данные в Supabase:",n);const{data:a,error:s}=await ue.from("specialists").insert(n).select().single();return s?(console.error("[staffService] Ошибка при создании специалиста:",s),console.error("[staffService] Детали ошибки:",{code:s.code,message:s.message,details:s.details,hint:s.hint,fullError:JSON.stringify(s)}),(s.code==="23505"||s.message.includes("duplicate key value"))&&console.error("[staffService] Ошибка дублирования ключа:",s.details),null):a?(console.log("[staffService] Специалист успешно создан:",a),{...a,full_name:a.name,work_days:e.work_days||Object.keys(a.work_schedule||{}),work_hours:e.work_hours||Object.values(a.work_schedule||{})[0]||{start:"09:00",end:"18:00"}}):(console.error("[staffService] Специалист не был создан: нет данных в ответе"),null)}catch(t){return console.error("[staffService] Исключение при создании специалиста:",t),null}},async updateStaff(e,t){try{console.log(`[staffService] Обновление специалиста ${e} с данными:`,t);let r={};if(t.work_days&&t.work_days.length>0&&t.work_hours){const l={};t.work_days.forEach(c=>{l[c]={start:t.work_hours.start,end:t.work_hours.end}}),r=l}else t.work_schedule&&(r=t.work_schedule);const n={};if(t.full_name!==void 0&&(n.name=t.full_name),t.specialization!==void 0&&(n.specialization=t.specialization),t.bio!==void 0&&(n.bio=t.bio||null),t.experience_years!==void 0&&(n.experience_years=t.experience_years===null?null:t.experience_years),t.avatar_url!==void 0&&(n.photo_url=t.avatar_url||null),t.is_active!==void 0&&(n.is_active=t.is_active??!0),Object.keys(r).length>0&&(n.work_schedule=r),t.phone!==void 0&&(n.phone=t.phone||null),t.email!==void 0&&(n.email=t.email),t.profile_id!==void 0&&(n.profile_id=t.profile_id),Object.keys(n).forEach(l=>{const c=n[l];if(c===void 0){delete n[l];return}if(Array.isArray(c)&&c.length===0){delete n[l];return}if(c!==null&&typeof c=="object"&&!Array.isArray(c)&&Object.keys(c).length===0){delete n[l];return}}),Object.keys(n).forEach(l=>{if(Array.isArray(n[l])&&l==="services"&&(n[l]=n[l].map(c=>String(c))),l==="work_schedule"&&n[l]!==null){const c=n[l];Object.keys(c).forEach(u=>{const d=c[u];(typeof d!="object"||d===null||!("start"in d)||!("end"in d))&&delete c[u]}),Object.keys(c).length===0&&delete n[l]}}),console.log("[staffService] Отправляем финальные данные для обновления в Supabase:",n),Object.keys(n).length===0)return console.log("[staffService] Нет данных для обновления, пропускаем запрос к Supabase"),await this.getStaffById(e);const{data:a,error:s}=await ue.from("specialists").update(n).eq("id",e).select().single();return s?(console.error("[staffService] Ошибка при обновлении специалиста:",s),console.error("[staffService] Детали ошибки:",{code:s.code,message:s.message,details:s.details,hint:s.hint}),null):(console.log("[staffService] Специалист успешно обновлен:",a),{...a,full_name:a.name,work_days:Object.keys(a.work_schedule||{}),work_hours:t.work_hours||Object.values(a.work_schedule||{})[0]||{start:"09:00",end:"18:00"}})}catch(r){return console.error("[staffService] Исключение при обновлении специалиста:",r),null}},async deleteStaff(e){try{const t=!isNaN(Number(e))&&e!=="";console.log(`[staffService] Удаление специалиста, id: ${e}, тип: ${t?"числовой":"UUID"}`);const n=await ue.from(bF).delete().eq("id",t?Number(e):String(e));if(n.error)throw console.error(`[staffService] Ошибка Supabase при удалении специалиста: ${n.error.message}`),new Error(n.error.message);console.log(`[staffService] Специалист успешно удален, id: ${e}`)}catch(t){throw console.error(`[staffService] Ошибка при удалении специалиста с id ${e}:`,t),t}},async getStaffBySpecialization(e){try{const{data:t,error:r}=await ue.from("specialists").select("*").eq("specialization",e).eq("is_active",!0);return r?(console.error("Error fetching specialists by specialization:",r),[]):t.map(a=>({...a,full_name:a.name}))}catch(t){return console.error("Exception when fetching specialists by specialization:",t),[]}},async searchStaffByName(e){try{const{data:t,error:r}=await ue.from("specialists").select("*").ilike("name",`%${e}%`).eq("is_active",!0);return r?(console.error("Error searching specialists by name:",r),[]):t.map(a=>({...a,full_name:a.name}))}catch(t){return console.error("Exception when searching specialists by name:",t),[]}},async getStaffByServiceId(e){try{const{data:t,error:r}=await ue.from("specialist_services").select("specialist_id").eq("service_id",e);if(r)return console.error("Error fetching specialist_services:",r),[];if(!t||t.length===0)return[];const n=t.map(l=>l.specialist_id);console.log("Found specialist IDs for service:",n);const{data:a,error:s}=await ue.from("specialists").select("*").in("id",n);return s?(console.error("Error fetching specialists by service ID:",s),[]):a.map(l=>({...l,full_name:l.name}))}catch(t){return console.error("Error fetching specialists by service ID:",t),[]}},async fetchOverrides(e){const{data:t,error:r}=await ue.from(Ob).select("*").eq("staff_id",e);return r?(console.error("[staffService] Ошибка при получении overrides:",r),[]):t||[]},async fetchOverridesByStudio(e){const{data:t,error:r}=await ue.rpc("get_overrides_by_studio_secure",{target_studio_id:e});return r?(console.error("[staffService] Ошибка при получении overrides студии:",r),[]):t||[]},async addOverride(e){const{data:t,error:r}=await ue.from(Ob).insert([e]).select().single();if(r)throw new Error(r.message);return t},async updateOverride(e){const{id:t,...r}=e;r.is_working_day===!1&&(r.start_time=null,r.end_time=null);const{data:n,error:a}=await ue.from(Ob).update(r).eq("id",t).select().single();if(a)throw new Error(a.message);return n},async deleteOverride(e){const{error:t}=await ue.from(Ob).delete().eq("id",e);if(t)throw new Error(t.message)}},LG={async loginWithEmail(e,t){const{data:r,error:n}=await ue.auth.signInWithPassword({email:e,password:t});if(n)throw n;return r},async register(e,t,r){const{data:n,error:a}=await ue.auth.signUp({email:e,password:t,options:{data:r}});if(a)throw a;return n},async logout(){const{error:e}=await ue.auth.signOut();if(e)throw e},async getCurrentUser(){const{data:e,error:t}=await ue.auth.getUser();if(t)throw t;return e==null?void 0:e.user},async updateUserData(e){const{data:t,error:r}=await ue.auth.updateUser({data:e});if(r)throw r;return t}},BG={async getAllSpecialists(){const{data:e,error:t}=await ue.from("specialists").select("*");if(t)throw t;return e||[]},async getSpecialistById(e){const{data:t,error:r}=await ue.from("specialists").select("*").eq("id",e).single();if(r)throw r;return t},async getSpecialistsBySpecialization(e){const{data:t,error:r}=await ue.from("specialists").select("*").eq("specialization",e);if(r)throw r;return t||[]},async getSpecialistsByStudioId(e){try{const{data:t,error:r}=await ue.rpc("get_specialists_by_studio_secure",{target_studio_id:e});if(r)throw console.warn(`[Security] Попытка доступа к студии ${e}:`,r.message),new Error("Доступ к данным студии запрещен");return t||[]}catch(t){throw console.error("[Security] Ошибка при получении специалистов студии:",t),t}}},Oa=uo()(Gf(Jp(Kf((e,t)=>({specialists:[],selectedSpecialist:null,filteredSpecialists:[],loading:!1,error:null,overrides:{},fetchSpecialists:async()=>{try{e({loading:!0,error:null}),console.log("Начинаем загрузку специалистов");const r=await Mn.getAllStaff();console.log("Загружены специалисты:",r);const n=await Promise.all(r.map(async s=>{const o=await Mn.fetchOverrides(s.id);return{staffId:s.id,overrides:o}})),a=r.map(s=>{const o=n.find(c=>c.staffId===s.id),l={};if(o&&o.overrides)for(const c of o.overrides)c.date&&(c.is_working_day===!1?l[c.date]={start:"00:00",end:"00:00",isWorkingDay:!1}:c.start_time&&c.end_time&&(l[c.date]={start:c.start_time,end:c.end_time,isWorkingDay:!0}));return{...s,workingHours:l}});e({specialists:a,filteredSpecialists:a,loading:!1})}catch(r){console.error("Ошибка при загрузке специалистов:",r),e({error:r instanceof Error?r.message:"Ошибка при загрузке списка специалистов",loading:!1})}},getSpecialistById:async r=>{try{e({loading:!0,error:null});const n=await Mn.getStaffById(r);e({selectedSpecialist:n,loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Ошибка при загрузке данных специалиста",loading:!1})}},createSpecialist:async r=>{try{e({loading:!0,error:null});const n=await Mn.createStaff(r),a=[...t().specialists,n];e({specialists:a,filteredSpecialists:a,loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Ошибка при создании специалиста",loading:!1})}},updateSpecialist:async(r,n)=>{var a;try{e({loading:!0,error:null});const s=await Mn.updateStaff(r,n),o=t().specialists.map(l=>l.id===r?s:l);e({specialists:o,filteredSpecialists:t().filteredSpecialists.map(l=>l.id===r?s:l),selectedSpecialist:((a=t().selectedSpecialist)==null?void 0:a.id)===r?s:t().selectedSpecialist,loading:!1})}catch(s){e({error:s instanceof Error?s.message:"Ошибка при обновлении данных специалиста",loading:!1})}},deleteSpecialist:async r=>{var n;try{e({loading:!0,error:null}),await Mn.deleteStaff(r);const a=t().specialists.filter(s=>s.id!==r);e({specialists:a,filteredSpecialists:t().filteredSpecialists.filter(s=>s.id!==r),selectedSpecialist:((n=t().selectedSpecialist)==null?void 0:n.id)===r?null:t().selectedSpecialist,loading:!1})}catch(a){e({error:a instanceof Error?a.message:"Ошибка при удалении специалиста",loading:!1})}},filterSpecialistsByName:r=>{if(!r){e({filteredSpecialists:t().specialists});return}const n=t().specialists.filter(a=>(a.full_name||a.name||"").toLowerCase().includes(r.toLowerCase()));e({filteredSpecialists:n})},filterSpecialistsBySpecialization:r=>{if(!r||r==="Все специализации"){e({filteredSpecialists:t().specialists});return}const n=t().specialists.filter(a=>a.specialization===r);e({filteredSpecialists:n})},filterSpecialistsByStudio:r=>{if(!r){e({filteredSpecialists:[]});return}const n=t().specialists.filter(a=>a.studio_id===r);e({filteredSpecialists:n})},resetFilters:()=>{e({filteredSpecialists:t().specialists})},clearError:()=>{e({error:null})},loadOverrides:async r=>{try{const n=await Mn.fetchOverrides(r);e(a=>({overrides:{...a.overrides,[r]:n}}))}catch(n){console.error("Ошибка при загрузке overrides:",n)}},addOverride:async(r,n)=>{try{const a=await Mn.addOverride(n);e(s=>({overrides:{...s.overrides,[r]:[...s.overrides[r]||[],a]}}))}catch(a){throw console.error("Ошибка при добавлении override:",a),a}},updateOverride:async(r,n)=>{try{const a=await Mn.updateOverride(n);e(s=>({overrides:{...s.overrides,[r]:(s.overrides[r]||[]).map(o=>o.id===a.id?a:o)}}))}catch(a){throw console.error("Ошибка при обновлении override:",a),a}},deleteOverride:async(r,n)=>{try{await Mn.deleteOverride(n),e(a=>({overrides:{...a.overrides,[r]:(a.overrides[r]||[]).filter(s=>s.id!==n)}}))}catch(a){console.error("Ошибка при удалении override:",a)}},fetchSpecialistsByStudioId:async r=>{e({loading:!0,error:null});try{const n=await BG.getSpecialistsByStudioId(r),a=await Mn.fetchOverridesByStudio(r),s={};a.forEach(l=>{s[l.staff_id]||(s[l.staff_id]=[]),s[l.staff_id].push(l)});const o=n.map(l=>{const c=s[l.id]||[],u={};return c.forEach(d=>{d.date&&(d.is_working_day===!1?u[d.date]={start:"00:00",end:"00:00",isWorkingDay:!1}:d.start_time&&d.end_time&&(u[d.date]={start:d.start_time,end:d.end_time,isWorkingDay:!0}))}),{...l,workingHours:u}});e({specialists:o,filteredSpecialists:o,overrides:{...t().overrides,...s},loading:!1})}catch(n){console.error("Ошибка при загрузке специалистов студии:",n),e({error:n instanceof Error?n.message:"Неизвестная ошибка",loading:!1})}}}),{name:"staff-storage",partialize:e=>({specialists:e.specialists,selectedSpecialist:e.selectedSpecialist,overrides:e.overrides})})))),cy=()=>{const[e,t]=x.useState(!1),{logout:r}=ei(),n=Kn(),a=nd(),s=()=>{r(),n("/login")};x.useEffect(()=>{t(!1)},[a.pathname]);const o=[{path:"/appointments",label:"Записи",icon:i.jsx(Qa,{className:"h-5 w-5 text-primary"})},{path:"/staff",label:"Мастера",icon:i.jsx(gf,{className:"h-5 w-5 text-primary"})},{path:"/clients",label:"Клиенты",icon:i.jsx(Vu,{className:"h-5 w-5 text-primary"})},{path:"/procedures",label:"Процедуры",icon:i.jsx(jv,{className:"h-5 w-5 text-primary"})},{path:"/admin",label:"Панель",icon:i.jsx(gfe,{className:"h-5 w-5 text-primary"})}];return i.jsxs("header",{className:"fixed top-0 left-0 right-0 bg-white/80 backdrop-blur-md z-50 border-b border-beauty-100",children:[i.jsxs("div",{className:"container mx-auto flex justify-between items-center py-4",children:[i.jsx("div",{className:"flex items-center",children:i.jsxs(en,{to:"/",className:"flex items-center",children:[i.jsx("span",{className:"text-2xl font-semibold beauty-gradient-text",children:"BeautyTrack"}),i.jsx("span",{className:"ml-2 px-2 py-1 bg-beauty-50 text-beauty-600 text-xs rounded-md",children:"Администратор"})]})}),i.jsx("nav",{className:"hidden md:flex items-center space-x-2",children:o.map(l=>i.jsxs(en,{to:l.path,className:Ue("flex items-center px-3 py-2 rounded-md transition-colors",a.pathname===l.path?"bg-primary/10 text-primary":"text-primary/80 hover:bg-primary/10 hover:text-primary"),children:[l.icon,i.jsx("span",{className:"ml-2",children:l.label})]},l.path))}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(ne,{variant:"ghost",size:"icon",className:"text-primary hover:text-primary/80 hover:bg-primary/10",children:i.jsx(ij,{className:"h-5 w-5"})}),i.jsxs(vG,{children:[i.jsx(xG,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"icon",className:"text-primary hover:text-primary/80 hover:bg-primary/10",children:i.jsx(jv,{className:"h-5 w-5"})})}),i.jsxs(R4,{align:"end",children:[i.jsx(D4,{children:"Настройки"}),i.jsx(M4,{}),i.jsx(gm,{onClick:()=>n("/admin/settings"),children:"Общие настройки"}),i.jsx(gm,{onClick:()=>n("/admin/profile"),children:"Профиль"})]})]}),i.jsx(ne,{variant:"ghost",size:"icon",className:"ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",onClick:s,"aria-label":"Выйти",children:i.jsx(Nfe,{className:"h-5 w-5"})}),i.jsx(ne,{variant:"ghost",size:"icon",className:"md:hidden text-primary hover:text-primary/80 hover:bg-primary/10",onClick:()=>t(!e),children:e?i.jsx(Oc,{className:"h-5 w-5"}):i.jsx(Cfe,{className:"h-5 w-5"})})]})]}),e&&i.jsx("div",{className:"md:hidden border-t border-beauty-100 bg-white",children:i.jsx("div",{className:"container py-3",children:i.jsx("nav",{className:"flex flex-col space-y-2",children:o.map(l=>i.jsxs(en,{to:l.path,className:Ue("flex items-center px-3 py-2 rounded-md transition-colors",a.pathname===l.path?"bg-primary/10 text-primary":"text-primary/80 hover:bg-primary/10 hover:text-primary"),children:[l.icon,i.jsx("span",{className:"ml-2",children:l.label})]},l.path))})})})]})};var UG={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wF=G.createContext&&G.createContext(UG),Cye=["attr","size","title"];function kye(e,t){if(e==null)return{};var r=Tye(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Tye(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function qw(){return qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qw.apply(this,arguments)}function _F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_F(Object(r),!0).forEach(function(n){Aye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_F(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Aye(e,t,r){return t=Pye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pye(e){var t=Oye(e,"string");return typeof t=="symbol"?t:t+""}function Oye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zG(e){return e&&e.map((t,r)=>G.createElement(t.tag,Gw({key:r},t.attr),zG(t.child)))}function uy(e){return t=>G.createElement(Rye,qw({attr:Gw({},e.attr)},t),zG(e.child))}function Rye(e){var t=r=>{var{attr:n,size:a,title:s}=e,o=kye(e,Cye),l=a||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),G.createElement("svg",qw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:Gw(Gw({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&G.createElement("title",null,s),e.children)};return wF!==void 0?G.createElement(wF.Consumer,null,r=>t(r)):t(UG)}function Dye(e){return uy({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"},child:[]}]})(e)}function Mye(e){return uy({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"},child:[]}]})(e)}function WG(e){return uy({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M545 117.7c3.7-12.5 0-21.7-17.8-21.7h-58.9c-15 0-21.9 7.9-25.6 16.7 0 0-30 73.1-72.4 120.5-13.7 13.7-20 18.1-27.5 18.1-3.7 0-9.4-4.4-9.4-16.9V117.7c0-15-4.2-21.7-16.6-21.7h-92.6c-9.4 0-15 7-15 13.5 0 14.2 21.2 17.5 23.4 57.5v86.8c0 19-3.4 22.5-10.9 22.5-20 0-68.6-73.4-97.4-157.4-5.8-16.3-11.5-22.9-26.6-22.9H38.8c-16.8 0-20.2 7.9-20.2 16.7 0 15.6 20 93.1 93.1 195.5C160.4 378.1 229 416 291.4 416c37.5 0 42.1-8.4 42.1-22.9 0-66.8-3.4-73.1 15.4-73.1 8.7 0 23.7 4.4 58.7 38.1 40 40 46.6 57.9 69 57.9h58.9c16.8 0 25.3-8.4 20.4-25-11.2-34.9-86.9-106.7-90.3-111.5-8.7-11.2-6.2-16.2 0-26.2.1-.1 72-101.3 79.4-135.6z"},child:[]}]})(e)}function VG(e){return uy({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(e)}function Iye(e){return uy({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13.5 2C13.5 2.44425 13.3069 2.84339 13 3.11805V5H18C19.6569 5 21 6.34315 21 8V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V8C3 6.34315 4.34315 5 6 5H11V3.11805C10.6931 2.84339 10.5 2.44425 10.5 2C10.5 1.17157 11.1716 0.5 12 0.5C12.8284 0.5 13.5 1.17157 13.5 2ZM6 7C5.44772 7 5 7.44772 5 8V18C5 18.5523 5.44772 19 6 19H18C18.5523 19 19 18.5523 19 18V8C19 7.44772 18.5523 7 18 7H13H11H6ZM2 10H0V16H2V10ZM22 10H24V16H22V10ZM9 14.5C9.82843 14.5 10.5 13.8284 10.5 13C10.5 12.1716 9.82843 11.5 9 11.5C8.17157 11.5 7.5 12.1716 7.5 13C7.5 13.8284 8.17157 14.5 9 14.5ZM15 14.5C15.8284 14.5 16.5 13.8284 16.5 13C16.5 12.1716 15.8284 11.5 15 11.5C14.1716 11.5 13.5 12.1716 13.5 13C13.5 13.8284 14.1716 14.5 15 14.5Z"},child:[]}]})(e)}const $e=G.forwardRef(({className:e,type:t,...r},n)=>i.jsx("input",{type:t,className:Ue("flex h-10 w-full rounded-md border border-beauty-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-beauty-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-beauty-400 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-beauty-800 dark:bg-beauty-950 dark:ring-offset-beauty-950 dark:placeholder:text-beauty-400 dark:focus-visible:ring-beauty-300",e),ref:n,...r}));$e.displayName="Input";const $ye=({source:e,clientName:t,clientPhone:r,webhookUrl:n,initialMessage:a="Привет! Я бьюти-бот салона BeautyTrack. Чем могу помочь вам сегодня? Хотите записаться на услугу или узнать о нашем салоне?",className:s="",onAdminTask:o})=>{const[l,c]=x.useState(()=>a?[{id:"welcome",text:a,sender:"bot",timestamp:new Date,status:"received"}]:[]),[u,d]=x.useState(""),[f,h]=x.useState(!1),p=x.useRef(null),v=x.useRef(null),m=Kn();x.useEffect(()=>{b()},[l]);const g=j=>{if(j.type==="navigate")setTimeout(()=>{m(j.target)},500);else if(j.type==="admin_task")o?o(j.task):(console.log("Получена команда admin_task, но обработчик не определен:",j.task),Ae({title:"Выполнение задачи",description:`Выполняю задачу: ${j.task}`}));else if(j.type==="notify"){const{appointmentId:N,clientId:k,message:C}=j.params;Ae({title:"Уведомление",description:C||`Отправляю уведомление ${N?"о записи":""} ${k?"клиенту":""}`,duration:3e3})}},b=()=>{var j;(j=p.current)==null||j.scrollIntoView({behavior:"smooth"})},y=j=>{const N=/\[([^\]]+)\]/g;return j.replace(N,'<a href="#" class="text-beauty-600 underline">$1</a>')},w=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.floor(Math.random()*1e9)}`,_=async j=>{if(!j.trim())return;const N=w(),k={id:N,text:j,sender:"user",timestamp:new Date,status:"sending"};c(C=>[...C,k]),d(""),h(!0);try{const C=n||localStorage.getItem("beautybot_webhook_url")||"https://expert9.app.n8n.cloud/webhook-test/beautybot";if(!C||C.includes("your-n8n-instance.com"))throw new Error("Не указан действительный webhook URL. Пожалуйста, настройте URL в разделе настроек бота.");if(!t||!r&&e!=="admin"){const B={id:w(),text:"Для отправки сообщения требуется указать имя и телефон клиента. Пожалуйста, проверьте настройки.",sender:"bot",timestamp:new Date,status:"received"};c(R=>[...R,B]),c(R=>R.map(P=>P.id===N?{...P,status:"error",error:"Недостаточно данных клиента"}:P));return}const T=await fetch(C,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:e,clientName:t,clientPhone:r,message:j,timestamp:new Date().toISOString()})}),A=T.headers.get("content-type");if(console.log("Тип содержимого ответа:",A),!T.ok)throw T.status===500?new Error("Ошибка на сервере. Возможно, n8n возвращает ошибку или webhook неправильно настроен. Проверьте логи n8n."):new Error(`Ошибка: ${T.status} ${T.statusText}`);c(B=>B.map(R=>R.id===N?{...R,status:"sent"}:R));try{const B=await T.text();if(console.log("Полученный текст ответа:",B),!B||B.trim()===""){console.error("Получен пустой ответ от сервера");const P={id:w(),text:"Получен пустой ответ от сервера. Убедитесь, что в n8n настроен 'Respond to Webhook' node и он возвращает непустой JSON с полем 'reply'.",sender:"bot",timestamp:new Date,status:"received"};c(D=>[...D,P]);return}const R=JSON.parse(B);if(console.log("Получен ответ от сервера:",R),R&&R.reply){const P={id:w(),text:R.reply,sender:"bot",timestamp:new Date,status:"received",command:R.command};c(D=>[...D,P]),R.command&&g(R.command)}else{console.error("Ответ сервера не содержит поле reply:",R);const P={id:w(),text:"Получен ответ от сервера, но в нем отсутствует поле 'reply'. Проверьте формат ответа в n8n. Ответ должен содержать JSON с полем 'reply'.",sender:"bot",timestamp:new Date,status:"received"};c(D=>[...D,P])}}catch(B){console.error("Ошибка при парсинге JSON ответа:",B);const R={id:w(),text:"Сообщение отправлено, но ответ сервера не удалось обработать. Проверьте формат ответа в n8n. Сервер должен возвращать корректный JSON с полем 'reply'.",sender:"bot",timestamp:new Date,status:"received"};c(P=>[...P,R])}}catch(C){console.error("Ошибка при отправке сообщения:",C),c(A=>A.map(B=>B.id===N?{...B,status:"error",error:C instanceof Error?C.message:"Ошибка отправки"}:B)),Ae({title:"Ошибка отправки",description:C instanceof Error?C.message:"Не удалось отправить сообщение. Проверьте соединение и webhook URL.",variant:"destructive"});const T={id:w(),text:`Произошла ошибка при обработке вашего запроса. ${C instanceof Error?C.message:"Проверьте настройки webhook в n8n."}`,sender:"bot",timestamp:new Date,status:"received"};c(A=>[...A,T])}finally{h(!1)}},S=j=>{const N=l.find(k=>k.id===j);N&&(c(k=>k.filter(C=>C.id!==j)),_(N.text))},E=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),_(u))};return i.jsxs("div",{className:Ue("h-[500px] flex flex-col border rounded-lg p-0 overflow-hidden",s),children:[i.jsx("div",{className:"bg-beauty-500 text-white p-2 text-center font-medium text-sm",children:"Beauty Track Ассистент"}),i.jsxs("div",{className:"flex-1 p-3 overflow-y-auto space-y-3",children:[l.map(j=>i.jsx("div",{className:Ue("flex",j.sender==="user"?"justify-end":"justify-start"),children:i.jsxs("div",{className:Ue("max-w-xs sm:max-w-sm md:max-w-md rounded-lg p-3",j.sender==="user"?"bg-beauty-100 text-beauty-950 rounded-br-none":"bg-beauty-500 text-white rounded-bl-none"),children:[j.status==="error"&&i.jsxs("div",{className:"mb-1 text-xs text-beauty-600 dark:text-beauty-400 flex items-center space-x-1",children:[i.jsx("span",{children:"⚠️ Ошибка"}),i.jsx(ne,{variant:"link",size:"sm",className:"h-auto p-0 text-xs underline",onClick:()=>S(j.id),children:"Повторить"})]}),i.jsx("div",{className:"text-sm",dangerouslySetInnerHTML:{__html:y(j.text)}}),i.jsxs("div",{className:"mt-1 text-[10px] opacity-70 flex justify-end",children:[Me(j.timestamp,"HH:mm"),j.status==="sending"&&i.jsx("span",{className:"ml-1",children:"⏱️"})]})]})},j.id)),i.jsx("div",{ref:p})]}),i.jsx("div",{className:Ue("p-4 border-t border-beauty-100",s),children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx($e,{ref:v,value:u,onChange:j=>d(j.target.value),onKeyDown:E,placeholder:"Напишите сообщение...",className:"flex-grow bg-beauty-50 border-beauty-200 focus-visible:ring-beauty-400 placeholder:text-beauty-500",disabled:f}),i.jsxs(ne,{onClick:()=>_(u),disabled:f||!u.trim(),className:"bg-beauty-500 hover:bg-beauty-600",children:[f?i.jsx(ki,{className:"h-4 w-4 animate-spin text-primary"}):i.jsx(VT,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"sr-only",children:"Отправить"})]})]})})]})};var uN="focusScope.autoFocusOnMount",dN="focusScope.autoFocusOnUnmount",SF={bubbles:!1,cancelable:!0},Fye="FocusScope",Tj=x.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...o}=e,[l,c]=x.useState(null),u=ti(a),d=ti(s),f=x.useRef(null),h=Pr(t,m=>c(m)),p=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(n){let m=function(w){if(p.paused||!l)return;const _=w.target;l.contains(_)?f.current=_:Zc(f.current,{select:!0})},g=function(w){if(p.paused||!l)return;const _=w.relatedTarget;_!==null&&(l.contains(_)||Zc(f.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&Zc(l)};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const y=new MutationObserver(b);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),y.disconnect()}}},[n,l,p.paused]),x.useEffect(()=>{if(l){EF.add(p);const m=document.activeElement;if(!l.contains(m)){const b=new CustomEvent(uN,SF);l.addEventListener(uN,u),l.dispatchEvent(b),b.defaultPrevented||(Lye(Vye(HG(l)),{select:!0}),document.activeElement===m&&Zc(l))}return()=>{l.removeEventListener(uN,u),setTimeout(()=>{const b=new CustomEvent(dN,SF);l.addEventListener(dN,d),l.dispatchEvent(b),b.defaultPrevented||Zc(m??document.body,{select:!0}),l.removeEventListener(dN,d),EF.remove(p)},0)}}},[l,u,d,p]);const v=x.useCallback(m=>{if(!r&&!n||p.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(g&&b){const y=m.currentTarget,[w,_]=Bye(y);w&&_?!m.shiftKey&&b===_?(m.preventDefault(),r&&Zc(w,{select:!0})):m.shiftKey&&b===w&&(m.preventDefault(),r&&Zc(_,{select:!0})):b===y&&m.preventDefault()}},[r,n,p.paused]);return i.jsx(zt.div,{tabIndex:-1,...o,ref:h,onKeyDown:v})});Tj.displayName=Fye;function Lye(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Zc(n,{select:t}),document.activeElement!==r)return}function Bye(e){const t=HG(e),r=jF(t,e),n=jF(t.reverse(),e);return[r,n]}function HG(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function jF(e,t){for(const r of e)if(!Uye(r,{upTo:t}))return r}function Uye(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function zye(e){return e instanceof HTMLInputElement&&"select"in e}function Zc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&zye(e)&&t&&e.select()}}var EF=Wye();function Wye(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=NF(e,t),e.unshift(t)},remove(t){var r;e=NF(e,t),(r=e[0])==null||r.resume()}}}function NF(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Vye(e){return e.filter(t=>t.tagName!=="A")}var fN=0;function z4(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??CF()),document.body.insertAdjacentElement("beforeend",e[1]??CF()),fN++,()=>{fN===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),fN--}},[])}function CF(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var qG=S4(),hN=function(){},Aj=x.forwardRef(function(e,t){var r=x.useRef(null),n=x.useState({onScrollCapture:hN,onWheelCapture:hN,onTouchMoveCapture:hN}),a=n[0],s=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,p=e.noIsolation,v=e.inert,m=e.allowPinchZoom,g=e.as,b=g===void 0?"div":g,y=e.gapMode,w=xj(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,S=_4([r,t]),E=vr(vr({},w),a);return x.createElement(x.Fragment,null,d&&x.createElement(_,{sideCar:qG,removeScrollBar:u,shards:f,noIsolation:p,inert:v,setCallbacks:s,allowPinchZoom:!!m,lockRef:r,gapMode:y}),o?x.cloneElement(x.Children.only(l),vr(vr({},E),{ref:S})):x.createElement(b,vr({},E,{className:c,ref:S}),l))});Aj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Aj.classNames={fullWidth:mm,zeroRight:hm};var xA=!1;if(typeof window<"u")try{var Rb=Object.defineProperty({},"passive",{get:function(){return xA=!0,!0}});window.addEventListener("test",Rb,Rb),window.removeEventListener("test",Rb,Rb)}catch{xA=!1}var Sh=xA?{passive:!1}:!1,Hye=function(e){return e.tagName==="TEXTAREA"},GG=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Hye(e)&&r[t]==="visible")},qye=function(e){return GG(e,"overflowY")},Gye=function(e){return GG(e,"overflowX")},kF=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=KG(e,n);if(a){var s=XG(e,n),o=s[1],l=s[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Kye=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Xye=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},KG=function(e,t){return e==="v"?qye(t):Gye(t)},XG=function(e,t){return e==="v"?Kye(t):Xye(t)},Yye=function(e,t){return e==="h"&&t==="rtl"?-1:1},Zye=function(e,t,r,n,a){var s=Yye(e,window.getComputedStyle(t).direction),o=s*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{var p=XG(e,l),v=p[0],m=p[1],g=p[2],b=m-g-s*v;(v||b)&&KG(e,l)&&(f+=b,h+=v),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(f)<1||!a)||!d&&(Math.abs(h)<1||!a))&&(u=!0),u},Db=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},TF=function(e){return[e.deltaX,e.deltaY]},AF=function(e){return e&&"current"in e?e.current:e},Jye=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Qye=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ebe=0,jh=[];function tbe(e){var t=x.useRef([]),r=x.useRef([0,0]),n=x.useRef(),a=x.useState(ebe++)[0],s=x.useState(bj)[0],o=x.useRef(e);x.useEffect(function(){o.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var m=w4([e.lockRef.current],(e.shards||[]).map(AF),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=x.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var b=Db(m),y=r.current,w="deltaX"in m?m.deltaX:y[0]-b[0],_="deltaY"in m?m.deltaY:y[1]-b[1],S,E=m.target,j=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in m&&j==="h"&&E.type==="range")return!1;var N=kF(j,E);if(!N)return!0;if(N?S=j:(S=j==="v"?"h":"v",N=kF(j,E)),!N)return!1;if(!n.current&&"changedTouches"in m&&(w||_)&&(n.current=S),!S)return!0;var k=n.current||S;return Zye(k,g,m,k==="h"?w:_,!0)},[]),c=x.useCallback(function(m){var g=m;if(!(!jh.length||jh[jh.length-1]!==s)){var b="deltaY"in g?TF(g):Db(g),y=t.current.filter(function(S){return S.name===g.type&&(S.target===g.target||g.target===S.shadowParent)&&Jye(S.delta,b)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(AF).filter(Boolean).filter(function(S){return S.contains(g.target)}),_=w.length>0?l(g,w[0]):!o.current.noIsolation;_&&g.cancelable&&g.preventDefault()}}},[]),u=x.useCallback(function(m,g,b,y){var w={name:m,delta:g,target:b,should:y,shadowParent:rbe(b)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(_){return _!==w})},1)},[]),d=x.useCallback(function(m){r.current=Db(m),n.current=void 0},[]),f=x.useCallback(function(m){u(m.type,TF(m),m.target,l(m,e.lockRef.current))},[]),h=x.useCallback(function(m){u(m.type,Db(m),m.target,l(m,e.lockRef.current))},[]);x.useEffect(function(){return jh.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Sh),document.addEventListener("touchmove",c,Sh),document.addEventListener("touchstart",d,Sh),function(){jh=jh.filter(function(m){return m!==s}),document.removeEventListener("wheel",c,Sh),document.removeEventListener("touchmove",c,Sh),document.removeEventListener("touchstart",d,Sh)}},[]);var p=e.removeScrollBar,v=e.inert;return x.createElement(x.Fragment,null,v?x.createElement(s,{styles:Qye(a)}):null,p?x.createElement(E4,{gapMode:e.gapMode}):null)}function rbe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const nbe=j4(qG,tbe);var Pj=x.forwardRef(function(e,t){return x.createElement(Aj,vr({},e,{ref:t,sideCar:nbe}))});Pj.classNames=Aj.classNames;var YG=x.forwardRef((e,t)=>{const{children:r,...n}=e,a=x.Children.toArray(r),s=a.find(sbe);if(s){const o=s.props.children,l=a.map(c=>c===s?x.Children.count(o)>1?x.Children.only(null):x.isValidElement(o)?o.props.children:null:c);return i.jsx(yA,{...n,ref:t,children:x.isValidElement(o)?x.cloneElement(o,void 0,l):null})}return i.jsx(yA,{...n,ref:t,children:r})});YG.displayName="Slot";var yA=x.forwardRef((e,t)=>{const{children:r,...n}=e;if(x.isValidElement(r)){const a=obe(r);return x.cloneElement(r,{...ibe(n,r.props),ref:t?ad(t,a):a})}return x.Children.count(r)>1?x.Children.only(null):null});yA.displayName="SlotClone";var abe=({children:e})=>i.jsx(i.Fragment,{children:e});function sbe(e){return x.isValidElement(e)&&e.type===abe}function ibe(e,t){const r={...t};for(const n in t){const a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...l)=>{s(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...s}:n==="className"&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}function obe(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var W4="Dialog",[ZG,JG]=lo(W4),[lbe,nl]=ZG(W4),QG=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:s,modal:o=!0}=e,l=x.useRef(null),c=x.useRef(null),[u=!1,d]=Ci({prop:n,defaultProp:a,onChange:s});return i.jsx(lbe,{scope:t,triggerRef:l,contentRef:c,contentId:Ho(),titleId:Ho(),descriptionId:Ho(),open:u,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};QG.displayName=W4;var eK="DialogTrigger",tK=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=nl(eK,r),s=Pr(t,a.triggerRef);return i.jsx(zt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":q4(a.open),...n,ref:s,onClick:At(e.onClick,a.onOpenToggle)})});tK.displayName=eK;var V4="DialogPortal",[cbe,rK]=ZG(V4,{forceMount:void 0}),nK=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,s=nl(V4,t);return i.jsx(cbe,{scope:t,forceMount:r,children:x.Children.map(n,o=>i.jsx(rl,{present:r||s.open,children:i.jsx(Xx,{asChild:!0,container:a,children:o})}))})};nK.displayName=V4;var Kw="DialogOverlay",aK=x.forwardRef((e,t)=>{const r=rK(Kw,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,s=nl(Kw,e.__scopeDialog);return s.modal?i.jsx(rl,{present:n||s.open,children:i.jsx(ube,{...a,ref:t})}):null});aK.displayName=Kw;var ube=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=nl(Kw,r);return i.jsx(Pj,{as:YG,allowPinchZoom:!0,shards:[a.contentRef],children:i.jsx(zt.div,{"data-state":q4(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),_f="DialogContent",sK=x.forwardRef((e,t)=>{const r=rK(_f,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,s=nl(_f,e.__scopeDialog);return i.jsx(rl,{present:n||s.open,children:s.modal?i.jsx(dbe,{...a,ref:t}):i.jsx(fbe,{...a,ref:t})})});sK.displayName=_f;var dbe=x.forwardRef((e,t)=>{const r=nl(_f,e.__scopeDialog),n=x.useRef(null),a=Pr(t,r.contentRef,n);return x.useEffect(()=>{const s=n.current;if(s)return sy(s)},[]),i.jsx(iK,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:At(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:At(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:At(e.onFocusOutside,s=>s.preventDefault())})}),fbe=x.forwardRef((e,t)=>{const r=nl(_f,e.__scopeDialog),n=x.useRef(!1),a=x.useRef(!1);return i.jsx(iK,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),s.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),iK=x.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:s,...o}=e,l=nl(_f,r),c=x.useRef(null),u=Pr(t,c);return z4(),i.jsxs(i.Fragment,{children:[i.jsx(Tj,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:s,children:i.jsx(Up,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":q4(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(mbe,{titleId:l.titleId}),i.jsx(gbe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),H4="DialogTitle",oK=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=nl(H4,r);return i.jsx(zt.h2,{id:a.titleId,...n,ref:t})});oK.displayName=H4;var lK="DialogDescription",cK=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=nl(lK,r);return i.jsx(zt.p,{id:a.descriptionId,...n,ref:t})});cK.displayName=lK;var uK="DialogClose",dK=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=nl(uK,r);return i.jsx(zt.button,{type:"button",...n,ref:t,onClick:At(e.onClick,()=>a.onOpenChange(!1))})});dK.displayName=uK;function q4(e){return e?"open":"closed"}var fK="DialogTitleWarning",[hbe,hK]=lce(fK,{contentName:_f,titleName:H4,docsSlug:"dialog"}),mbe=({titleId:e})=>{const t=hK(fK),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return x.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},pbe="DialogDescriptionWarning",gbe=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${hK(pbe).contentName}}.`;return x.useEffect(()=>{var s;const a=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},G4=QG,K4=tK,X4=nK,dy=aK,fy=sK,hy=oK,my=cK,Oj=dK;const qt=G4,Dv=K4,vbe=X4,xbe=Oj,mK=x.forwardRef(({className:e,...t},r)=>i.jsx(dy,{ref:r,className:Ue("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));mK.displayName=dy.displayName;const Wt=x.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(vbe,{children:[i.jsx(mK,{}),i.jsx(fy,{ref:n,className:Ue("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:t})]}));Wt.displayName=fy.displayName;const Gt=({className:e,...t})=>i.jsx("div",{className:Ue("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Gt.displayName="DialogHeader";const or=({className:e,...t})=>i.jsx("div",{className:Ue("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});or.displayName="DialogFooter";const Vt=x.forwardRef(({className:e,...t},r)=>i.jsx(hy,{ref:r,className:Ue("text-lg font-semibold leading-none tracking-tight",e),...t}));Vt.displayName=hy.displayName;const fr=x.forwardRef(({className:e,...t},r)=>i.jsx(my,{ref:r,className:Ue("text-sm text-muted-foreground",e),...t}));fr.displayName=my.displayName;const Sf=uo()(Gf((e,t)=>({integrations:[],whatsapp:null,telegram:null,wazzupTelegram:null,wazzupWhatsApp:null,wazzupVK:null,isLoading:!1,error:null,isDemoMode:!1,loadIntegrations:async()=>{var r,n,a,s,o;console.log("🔄 Загрузка интеграций..."),e({isLoading:!0,error:null});try{const{data:l}=await ue.auth.getSession(),c=(n=(r=l.session)==null?void 0:r.user)==null?void 0:n.id;if(!c){e({integrations:[],isLoading:!1});return}const{data:u,error:d}=await ue.from("integrations").select("*").eq("user_id",c);if(d)throw new Error(d.message);const f=u;console.log("Загружено интеграций:",f.length,f);const h=f.find(y=>y.provider==="whatsapp"&&y.is_active)||f.find(y=>y.provider==="whatsapp")||f.find(y=>{var w,_;return y.provider==="wazzup"&&(((w=y.settings)==null?void 0:w.transport)==="whatsapp"||((_=y.settings)==null?void 0:_.transport)==="wamessages")&&y.is_active})||f.find(y=>{var w,_;return y.provider==="wazzup"&&(((w=y.settings)==null?void 0:w.transport)==="whatsapp"||((_=y.settings)==null?void 0:_.transport)==="wamessages")})||null,p=f.find(y=>{var w,_;return y.provider==="wazzup"&&(((w=y.settings)==null?void 0:w.transport)==="telegram"||((_=y.settings)==null?void 0:_.transport)==="tgapi")&&y.is_active})||f.find(y=>{var w,_;return y.provider==="wazzup"&&(((w=y.settings)==null?void 0:w.transport)==="telegram"||((_=y.settings)==null?void 0:_.transport)==="tgapi")})||null,v=f.find(y=>{var w,_;return y.provider==="wazzup"&&(((w=y.settings)==null?void 0:w.transport)==="whatsapp"||((_=y.settings)==null?void 0:_.transport)==="wamessages")&&y.is_active})||f.find(y=>{var w,_;return y.provider==="wazzup"&&(((w=y.settings)==null?void 0:w.transport)==="whatsapp"||((_=y.settings)==null?void 0:_.transport)==="wamessages")})||null,m=f.find(y=>{var w,_;return y.provider==="wazzup"&&(((w=y.settings)==null?void 0:w.transport)==="vk"||((_=y.settings)==null?void 0:_.transport)==="vkontakte")&&y.is_active})||f.find(y=>{var w,_;return y.provider==="wazzup"&&(((w=y.settings)==null?void 0:w.transport)==="vk"||((_=y.settings)==null?void 0:_.transport)==="vkontakte")})||null,g=p,b=(h==null?void 0:h.provider)==="whatsapp"?h:v;console.log("Найдены интеграции:",{whatsapp:h?{id:h.id,provider:h.provider,is_active:h.is_active}:null,wazzupWhatsApp:v?{id:v.id,provider:v.provider,transport:(a=v.settings)==null?void 0:a.transport,is_active:v.is_active}:null,useAsWhatsApp:b?{id:b.id,provider:b.provider,is_active:b.is_active}:null,wazzupTelegram:p?{id:p.id,provider:p.provider,transport:(s=p.settings)==null?void 0:s.transport,is_active:p.is_active}:null,useAsTelegram:g?{id:g.id,provider:g.provider,is_active:g.is_active}:null,wazzupVK:m?{id:m.id,provider:m.provider,transport:(o=m.settings)==null?void 0:o.transport,is_active:m.is_active}:null}),e({integrations:f,whatsapp:b,telegram:g,wazzupTelegram:p,wazzupWhatsApp:v,wazzupVK:m,isLoading:!1})}catch(l){const c=l instanceof Error?l.message:"Ошибка при загрузке интеграций";e({error:c,isLoading:!1})}},connectMessenger:async(r,n,a)=>{var s,o;e({isLoading:!0,error:null});try{const{data:l}=await ue.auth.getSession(),c=(o=(s=l.session)==null?void 0:s.user)==null?void 0:o.id;if(!c)throw new Error("Пользователь не авторизован");let u;if(r.startsWith("wazzup_")&&(a!=null&&a.channelId)?u=t().integrations.find(d=>{var f;return d.provider==="wazzup"&&((f=d.settings)==null?void 0:f.channel_id)===a.channelId}):r==="vk"||r==="vkontakte"||r==="wazzup_vk"?u=t().integrations.find(d=>{var f,h;return d.provider==="wazzup"&&(((f=d.settings)==null?void 0:f.transport)==="vk"||((h=d.settings)==null?void 0:h.transport)==="vkontakte")}):u=t().integrations.find(d=>d.provider===r),u){const{error:d}=await ue.from("integrations").update({token:n,is_active:!0}).eq("id",u.id);if(d)throw new Error(d.message)}else{const d={user_id:c,provider:r.startsWith("wazzup_")?"wazzup":r,token:n,is_active:!0,settings:{booking_confirmation:!1,appointment_reminder:!1,review_request:!1}};r.startsWith("wazzup_")&&(a!=null&&a.channelId)?d.settings={...d.settings,channel_id:a.channelId,transport:(a==null?void 0:a.transport)||"",plain_id:(a==null?void 0:a.plainId)||""}:(r==="vk"||r==="vkontakte"||r==="wazzup_vk")&&(d.settings={...d.settings,channel_id:a==null?void 0:a.channelId,transport:"vk",plain_id:(a==null?void 0:a.plainId)||""}),console.log("integrationData:",d);const{error:f}=await ue.from("integrations").insert(d);if(f)throw console.error("Ошибка при сохранении интеграции в Supabase:",f),new Error(f.message)}await t().loadIntegrations()}catch(l){const c=l instanceof Error?l.message:"Ошибка при подключении мессенджера";throw e({error:c,isLoading:!1}),l}},disconnectMessenger:async r=>{e({isLoading:!0,error:null});try{console.log(`Отключаем мессенджер: ${r}`);let n;if(r==="whatsapp"?n=t().whatsapp:r==="telegram"?n=t().wazzupTelegram:r==="vk"||r==="vkontakte"||r==="wazzup_vk"?n=t().wazzupVK:n=t().integrations.find(o=>o.provider===r),console.log("Найдена интеграция для отключения:",n),!n)throw new Error("Интеграция не найдена");const a=n.id;console.log(`Выполняем запрос к Supabase для отключения интеграции с ID: ${a}`);const{error:s}=await ue.from("integrations").update({is_active:!1}).eq("id",a);if(s)throw console.error("Ошибка при выполнении запроса к Supabase:",s),new Error(s.message);console.log("Интеграция успешно отключена в Supabase"),await t().loadIntegrations()}catch(n){const a=n instanceof Error?n.message:"Ошибка при отключении мессенджера";throw console.error("Ошибка отключения мессенджера:",a),e({error:a,isLoading:!1}),n}},updateSettings:async(r,n)=>{e({isLoading:!0,error:null});try{const a=t().integrations.find(l=>l.provider===r);if(!a)throw new Error("Интеграция не найдена");const s={...a.settings,...n},{error:o}=await ue.from("integrations").update({settings:s}).eq("id",a.id);if(o)throw new Error(o.message);e({integrations:t().integrations.map(l=>l.id===a.id?{...l,settings:s}:l),whatsapp:a.provider==="whatsapp"?{...a,settings:s}:t().whatsapp,telegram:a.provider==="telegram"?{...a,settings:s}:t().telegram,isLoading:!1})}catch(a){const s=a instanceof Error?a.message:"Ошибка при обновлении настроек";e({error:s,isLoading:!1})}}}))),ybe=()=>{const[e,t]=x.useState(""),r=Kn(),[n,a]=x.useState(!1),[s,o]=x.useState(null),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,h]=x.useState(null),[p,v]=x.useState(null),[m,g]=x.useState(null),b=Sf(N=>N.wazzupVK);x.useEffect(()=>{const N=localStorage.getItem("beautybot_webhook_url");N&&t(N);const k=setTimeout(()=>{const C=document.getElementById("chat-bot-button");C&&!n&&!l&&(C.classList.add("animate-pulse"),setTimeout(()=>{C.classList.remove("animate-pulse")},3e3))},2e3);return()=>clearTimeout(k)},[n,l]),x.useEffect(()=>{Sf.getState().loadIntegrations()},[]);const y=N=>{console.log("Admin task requested:",N),Ae({title:"Административная задача",description:`Задача "${N}" была запрошена.`})},w={whatsapp:"https://demo.wazzup24.com/iframe/whatsapp",vk:"https://demo.wazzup24.com/iframe/vk",telegram:"https://demo.wazzup24.com/iframe/telegram"},_=()=>{a(!0);const N=document.getElementById("chat-bot-button");N&&N.classList.remove("animate-pulse")},S="f4f2cf666f6d4fdc879c5a24740d473c",E=async N=>{var k,C,T,A,B,R;if(o(N),a(!1),v(null),h(null),g(null),N==="vk"){if(!((k=b==null?void 0:b.settings)!=null&&k.plain_id)){v("Не найден VK канал в интеграции. Проверьте настройки интеграции Wazzup."),o(N),c(!0);return}d(!0),v(null),h(null);const{data:P}=await ue.auth.getUser(),D=((T=(C=P==null?void 0:P.user)==null?void 0:C.user_metadata)==null?void 0:T.full_name)||((A=P==null?void 0:P.user)==null?void 0:A.email)||"BeautyTrack User",U="8050",M={user:{id:U,name:D},scope:"global",filter:[{chatType:"vk",chatId:b.settings.plain_id}]},F=b.token,X={request:{token:F,tokenMatches:F===S,expectedToken:S,plain_id:b.settings.plain_id,channel_id:b.settings.channel_id,user_id_in_request:U,crm_user_id_initiator:((B=P==null?void 0:P.user)==null?void 0:B.id)||"unknown",user_name_in_request:D,requestBody:M},response:{}};try{const O=await fetch("https://api.wazzup24.com/v3/iframe",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${F}`},body:JSON.stringify(M)});X.response.status=O.status,X.response.statusText=O.statusText,X.response.headers={},O.headers.forEach((L,H)=>{X.response.headers[H]=L});const W=await O.text();try{X.response.body=JSON.parse(W)}catch{X.response.body=W}if(!O.ok){let L=`Ошибка Wazzup API: ${O.statusText}`;if(typeof X.response.body=="object"&&X.response.body!==null){const H=X.response.body;H.error&&H.description?L=`Ошибка Wazzup: ${H.error} - ${H.description}`:H.message&&(L=`Ошибка Wazzup: ${H.message}`)}else typeof X.response.body=="string"&&X.response.body.trim()!==""&&(L=`Ответ Wazzup (статус ${O.status}): ${X.response.body}`);throw new Error(L)}if(!((R=X.response.body)!=null&&R.url))throw new Error("Некорректный ответ Wazzup API: отсутствует URL в ответе.");h(X.response.body.url)}catch(O){const W=O instanceof Error?O.message:String(O)||"Ошибка интеграции с Wazzup";v(W)}finally{g(X),d(!1),c(!0)}}else if(N==="beautybot")o("beautybot"),c(!0);else{const P=w[N];P?h(P):v(`Канал "${N}" не настроен или ссылка на iframe отсутствует.`),c(!0)}},j=()=>{c(!1),o(null),h(null),d(!1),v(null)};return i.jsxs(i.Fragment,{children:[i.jsx(ne,{id:"chat-bot-button",onClick:_,className:Ue("fixed bottom-6 right-6 z-50 bg-primary hover:bg-primary/90 text-primary-foreground rounded-full p-3 shadow-lg transition-all duration-300"),"aria-label":"Открыть чат",children:i.jsx(Yh,{className:"h-6 w-6"})}),i.jsx(qt,{open:n,onOpenChange:N=>{a(N)},children:i.jsxs(Wt,{className:"sm:max-w-md",children:[i.jsx(Gt,{children:i.jsx(Vt,{children:"Выберите канал для чата"})}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 py-6 place-items-center mx-auto",children:[i.jsxs(ne,{variant:"outline",className:"flex flex-col items-center justify-center h-28 w-28 sm:h-32 sm:w-32 p-3 aspect-square focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:()=>E("whatsapp"),children:[i.jsx(VG,{className:"w-6 h-6 sm:w-8 sm:h-8 text-[#25D366]"}),i.jsx("span",{className:"text-sm font-medium mt-1",children:"WhatsApp"})]}),i.jsxs(ne,{variant:"outline",className:"flex flex-col items-center justify-center h-28 w-28 sm:h-32 sm:w-32 p-3 aspect-square focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:()=>E("vk"),children:[i.jsx(WG,{className:"w-6 h-6 sm:w-8 sm:h-8 text-[#0077FF]"}),i.jsx("span",{className:"text-sm font-medium mt-1",children:"VK"})]}),i.jsxs(ne,{variant:"outline",className:"flex flex-col items-center justify-center h-28 w-28 sm:h-32 sm:w-32 p-3 aspect-square focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:()=>E("telegram"),children:[i.jsx(Dye,{className:"w-8 h-8 sm:w-8 sm:h-8 text-[#2AABEE]"}),i.jsx("span",{className:"text-sm font-medium mt-1",children:"Telegram"})]}),i.jsxs(ne,{variant:"outline",className:"flex flex-col items-center justify-center h-28 w-28 sm:h-32 sm:w-32 p-3 aspect-square focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:()=>E("beautybot"),children:[i.jsx(Iye,{className:"w-6 h-6 sm:w-8 sm:h-8 text-[#9333EA]"}),i.jsx("span",{className:"text-sm font-medium mt-1",children:"BeautyBot"})]})]}),i.jsx(or,{className:"sm:justify-start",children:i.jsx(ne,{type:"button",variant:"secondary",onClick:()=>a(!1),className:"w-full",children:"Закрыть"})})]})}),i.jsx(qt,{open:l,onOpenChange:j,children:i.jsxs(Wt,{className:"p-0 max-w-[90vw] sm:max-w-lg h-[70vh] flex flex-col gap-0 overflow-hidden",children:[i.jsxs(Gt,{className:"p-4 border-b flex-row items-center justify-between space-y-0",children:[i.jsx(Vt,{className:"capitalize",children:s==="beautybot"?"BeautyBot Ассистент":s?`Чат ${s}`:"Чат"}),i.jsx(ne,{variant:"ghost",size:"icon",onClick:j,className:"rounded-full",children:i.jsx(Oc,{className:"h-4 w-4"})})]}),u&&i.jsxs("div",{className:"flex-grow flex items-center justify-center",children:[i.jsx(HT,{className:"h-12 w-12 animate-spin text-primary"}),i.jsx("p",{className:"ml-3 text-muted-foreground",children:"Загрузка чата..."})]}),p&&i.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center p-4 space-y-3",children:[i.jsx(Yh,{className:"h-16 w-16 text-destructive/50"}),i.jsx("p",{className:"text-center text-destructive font-medium",children:"Ошибка загрузки чата"}),i.jsx("p",{className:"text-center text-sm text-muted-foreground max-w-xs",children:p})]}),!u&&!p&&s==="beautybot"&&e&&i.jsx("div",{className:"flex-grow overflow-y-auto",children:i.jsx($ye,{webhookUrl:e,onAdminTask:y,source:"floating_button",clientName:null,clientPhone:null})}),!u&&!p&&s==="beautybot"&&!e&&i.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center p-4 space-y-3",children:[i.jsx(Yh,{className:"h-16 w-16 text-destructive/50"}),i.jsx("p",{className:"text-center text-destructive font-medium",children:"BeautyBot не настроен"}),i.jsx("p",{className:"text-center text-sm text-muted-foreground max-w-xs",children:"URL для Webhook не указан. Перейдите в настройки интеграций, чтобы настроить BeautyBot."}),i.jsx(ne,{onClick:()=>{j(),r("/admin")},children:"Перейти к настройкам"})]}),!u&&!p&&f&&s!=="beautybot"&&i.jsx("iframe",{src:f,className:"w-full h-full border-0 flex-grow",title:`${s} chat`}),!u&&!p&&!f&&s&&s!=="beautybot"&&i.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center p-4 space-y-3",children:[i.jsx(Yh,{className:"h-16 w-16 text-muted-foreground/30"}),i.jsx("p",{className:"text-center text-muted-foreground",children:"Не удалось загрузить содержимое чата."})]})]})})]})},al=()=>{const e=new Date().getFullYear();return i.jsx("footer",{className:"bg-beauty-50 py-12 border-t border-beauty-100",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold beauty-gradient-text mb-4",children:"BeautyTrack"}),i.jsx("p",{className:"text-beauty-800 mb-4",children:"Professional beauty procedure tracking and management platform for cosmetic specialists and their clients."})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-beauty-900 mb-4",children:"Features"}),i.jsxs("ul",{className:"space-y-2",children:[i.jsx("li",{children:i.jsx(en,{to:"/appointments",className:"text-beauty-700 hover:text-beauty-500",children:"Appointment Scheduling"})}),i.jsx("li",{children:i.jsx(en,{to:"/procedures",className:"text-beauty-700 hover:text-beauty-500",children:"Procedure Tracking"})}),i.jsx("li",{children:i.jsx(en,{to:"/recommendations",className:"text-beauty-700 hover:text-beauty-500",children:"Personalized Recommendations"})}),i.jsx("li",{children:i.jsx(en,{to:"/integrations",className:"text-beauty-700 hover:text-beauty-500",children:"CRM Integrations"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-beauty-900 mb-4",children:"Company"}),i.jsxs("ul",{className:"space-y-2",children:[i.jsx("li",{children:i.jsx(en,{to:"/about",className:"text-beauty-700 hover:text-beauty-500",children:"About Us"})}),i.jsx("li",{children:i.jsx(en,{to:"/contact",className:"text-beauty-700 hover:text-beauty-500",children:"Contact"})}),i.jsx("li",{children:i.jsx(en,{to:"/careers",className:"text-beauty-700 hover:text-beauty-500",children:"Careers"})}),i.jsx("li",{children:i.jsx(en,{to:"/blog",className:"text-beauty-700 hover:text-beauty-500",children:"Blog"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-beauty-900 mb-4",children:"Legal"}),i.jsxs("ul",{className:"space-y-2",children:[i.jsx("li",{children:i.jsx(en,{to:"/terms",className:"text-beauty-700 hover:text-beauty-500",children:"Terms of Service"})}),i.jsx("li",{children:i.jsx(en,{to:"/privacy",className:"text-beauty-700 hover:text-beauty-500",children:"Privacy Policy"})}),i.jsx("li",{children:i.jsx(en,{to:"/cookies",className:"text-beauty-700 hover:text-beauty-500",children:"Cookie Policy"})})]})]})]}),i.jsxs("div",{className:"border-t border-beauty-200 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center",children:[i.jsxs("p",{className:"text-beauty-700 text-sm",children:["© ",e," BeautyTrack. All rights reserved."]}),i.jsxs("div",{className:"flex space-x-4 mt-4 md:mt-0",children:[i.jsx("a",{href:"https://instagram.com",className:"text-beauty-700 hover:text-beauty-500",target:"_blank",rel:"noreferrer",children:"Instagram"}),i.jsx("a",{href:"https://facebook.com",className:"text-beauty-700 hover:text-beauty-500",target:"_blank",rel:"noreferrer",children:"Facebook"}),i.jsx("a",{href:"https://twitter.com",className:"text-beauty-700 hover:text-beauty-500",target:"_blank",rel:"noreferrer",children:"Twitter"})]})]})]})})},Bl=({children:e})=>i.jsxs("div",{className:"flex flex-col min-h-screen",children:[" ",i.jsx(cy,{}),i.jsxs("main",{className:"flex-grow mt-16 md:mt-20",children:[" ",i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[" ",e]})]}),i.jsx(al,{}),i.jsx(ybe,{})]}),bbe=()=>{const e=Kn(),t=()=>{e("/login")};return i.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white/80 backdrop-blur-md z-50 border-b border-beauty-100",children:i.jsxs("div",{className:"container mx-auto flex justify-between items-center py-4",children:[i.jsx(en,{to:"/",className:"flex items-center",children:i.jsx("span",{className:"text-2xl font-semibold beauty-gradient-text",children:"BeautyTrack"})}),i.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[i.jsx(en,{to:"#features",className:"text-beauty-900 hover:text-beauty-600 transition-colors",children:"Возможности"}),i.jsx(en,{to:"#testimonials",className:"text-beauty-900 hover:text-beauty-600 transition-colors",children:"Отзывы"}),i.jsx(en,{to:"#pricing",className:"text-beauty-900 hover:text-beauty-600 transition-colors",children:"Цены"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(ne,{variant:"outline",onClick:t,className:"text-primary border-primary hover:bg-primary/10",children:"Войти"}),i.jsx(ne,{className:"bg-primary text-primary-foreground hover:bg-primary/90",onClick:t,children:"Регистрация"})]})]})})},wbe=()=>i.jsx("section",{className:"py-12 bg-beauty-50",children:i.jsxs("div",{className:"container mx-auto px-4 text-center",children:[i.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:[i.jsx("span",{className:"beauty-gradient-text",children:"Три роли"})," в системе"]}),i.jsx("p",{className:"text-xl text-beauty-800 mb-12 max-w-3xl mx-auto",children:"BeautyTrack предоставляет специализированный интерфейс для каждого участника процесса"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[i.jsx("div",{className:"bg-beauty-50 w-16 h-16 rounded-full flex items-center justify-center mb-4 mx-auto",children:i.jsx(Tfe,{className:"text-beauty-600 h-8 w-8"})}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Администратор"}),i.jsx("p",{className:"text-beauty-700 mb-4",children:"Полное управление салоном, персоналом, клиентами, услугами и маркетингом."}),i.jsxs("ul",{className:"text-left text-beauty-700 space-y-2 mb-6",children:[i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-beauty-500 mr-2",children:"✓"}),"Управление мастерами"]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-beauty-500 mr-2",children:"✓"}),"CRM система для клиентов"]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-beauty-500 mr-2",children:"✓"}),"Маркетинг и лояльность"]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-beauty-500 mr-2",children:"✓"}),"Интеграции с другими сервисами"]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[i.jsx("div",{className:"bg-beauty-50 w-16 h-16 rounded-full flex items-center justify-center mb-4 mx-auto",children:i.jsx(gf,{className:"text-beauty-600 h-8 w-8"})}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Мастер"}),i.jsx("p",{className:"text-beauty-700 mb-4",children:"Персональный кабинет специалиста с доступом к расписанию, клиентам и статистике."}),i.jsxs("ul",{className:"text-left text-beauty-700 space-y-2 mb-6",children:[i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-beauty-500 mr-2",children:"✓"}),"Личное расписание"]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-beauty-500 mr-2",children:"✓"}),"Карточки клиентов"]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-beauty-500 mr-2",children:"✓"}),"Статистика дохода"]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-beauty-500 mr-2",children:"✓"}),"Отзывы и рейтинг"]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[i.jsx("div",{className:"bg-beauty-50 w-16 h-16 rounded-full flex items-center justify-center mb-4 mx-auto",children:i.jsx(Ro,{className:"text-beauty-600 h-8 w-8"})}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Клиент"}),i.jsx("p",{className:"text-beauty-700 mb-4",children:"Личный кабинет клиента с историей визитов, бонусами и онлайн-записью."}),i.jsxs("ul",{className:"text-left text-beauty-700 space-y-2 mb-6",children:[i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-beauty-500 mr-2",children:"✓"}),"Онлайн-запись на услуги"]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-beauty-500 mr-2",children:"✓"}),"История посещений"]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-beauty-500 mr-2",children:"✓"}),"Бонусы и скидки"]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-beauty-500 mr-2",children:"✓"}),"Чат с мастером"]})]})]})]})]})}),_be=()=>{const e=[{icon:i.jsx(Qa,{className:"text-beauty-500 h-6 w-6"}),title:"Онлайн запись",description:"Удобная система онлайн-записи для клиентов с автоматическими уведомлениями и напоминаниями."},{icon:i.jsx(Vu,{className:"text-beauty-500 h-6 w-6"}),title:"CRM для клиентов",description:"Полная база данных клиентов с историей визитов, предпочтениями и возможностью коммуникации."},{icon:i.jsx(gf,{className:"text-beauty-500 h-6 w-6"}),title:"Управление мастерами",description:"Гибкий график работы, личный кабинет, учет доходов и рейтинги для специалистов салона."},{icon:i.jsx(Kp,{className:"text-beauty-500 h-6 w-6"}),title:"Программы лояльности",description:"Гибкие программы лояльности с бонусами, скидками, подарками и специальными акциями для клиентов."},{icon:i.jsx(ij,{className:"text-beauty-500 h-6 w-6"}),title:"Уведомления",description:"Автоматические уведомления о записях, днях рождения и акциях через Email, SMS и мессенджеры."},{icon:i.jsx(lj,{className:"text-beauty-500 h-6 w-6"}),title:"Управление услугами",description:"Полная настройка каталога услуг с ценами, длительностью и привязкой к конкретным специалистам."},{icon:i.jsx(Yh,{className:"text-beauty-500 h-6 w-6"}),title:"Коммуникация",description:"Встроенный чат с клиентами и интеграция с популярными мессенджерами (Telegram, WhatsApp)."},{icon:i.jsx(Nv,{className:"text-beauty-500 h-6 w-6"}),title:"Отзывы клиентов",description:"Автоматический запрос отзывов после посещения и система оценки работы специалистов."},{icon:i.jsx(W1,{className:"text-beauty-500 h-6 w-6"}),title:"Абонементы",description:"Создание и продажа абонементов на услуги с гибкими условиями использования и сроком действия."}];return i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((t,r)=>i.jsxs("div",{className:"bg-beauty-50 p-6 rounded-xl",children:[i.jsx("div",{className:"bg-white w-12 h-12 rounded-full flex items-center justify-center mb-4 shadow-sm",children:t.icon}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.title}),i.jsx("p",{className:"text-beauty-700",children:t.description})]},r))})},Sbe=()=>i.jsx("section",{id:"features",className:"py-16 bg-white",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-12 text-center",children:[i.jsx("span",{className:"beauty-gradient-text",children:"Все возможности"})," платформы BeautyTrack"]}),i.jsx(_be,{})]})}),jbe=()=>i.jsx("section",{className:"min-h-[90vh] flex flex-col justify-center pt-16 pb-12",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"flex flex-col lg:flex-row items-center",children:[i.jsxs("div",{className:"w-full lg:w-1/2 mb-10 lg:mb-0 pr-0 lg:pr-10 animate-fade-in",children:[i.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold mb-6 leading-tight",children:[i.jsx("span",{className:"beauty-gradient-text",children:"BeautyTrack"}),i.jsx("br",{}),i.jsx("span",{className:"text-beauty-900",children:"Your beauty procedures, organized"})]}),i.jsx("p",{className:"text-lg md:text-xl text-beauty-800 mb-8 max-w-xl",children:"All-in-one platform for cosmetologists and their clients. Schedule appointments, track procedures, and get personalized beauty recommendations."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx(ne,{className:"bg-primary text-primary-foreground hover:bg-primary/90 text-white px-8 py-6 text-lg",asChild:!0,children:i.jsx(en,{to:"/register",children:"Get Started"})}),i.jsx(ne,{variant:"outline",className:"border-primary text-primary hover:bg-primary/10 px-8 py-6 text-lg",asChild:!0,children:i.jsx(en,{to:"/demo",children:"Book a Demo"})})]})]}),i.jsx("div",{className:"w-full lg:w-1/2 relative animate-fade-in",style:{animationDelay:"0.3s"},children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute -top-6 -left-6 w-full h-full rounded-3xl bg-lavender-300 animate-bounce-slow",style:{animationDelay:"0.5s"}}),i.jsx("div",{className:"absolute -bottom-6 -right-6 w-full h-full rounded-3xl bg-beauty-300 animate-bounce-slow"}),i.jsx("div",{className:"relative rounded-3xl overflow-hidden border-4 border-white shadow-xl",children:i.jsx("img",{src:"https://images.unsplash.com/photo-1570172619644-dfd03ed5d881?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1740&q=80",alt:"BeautyTrack in action",className:"w-full h-auto object-cover aspect-[4/3]"})})]})})]})})}),qe=x.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Ue("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));qe.displayName="Card";const ht=x.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Ue("flex flex-col space-y-1.5 p-6",e),...t}));ht.displayName="CardHeader";const gt=x.forwardRef(({className:e,...t},r)=>i.jsx("h3",{ref:r,className:Ue("text-2xl font-semibold leading-none tracking-tight",e),...t}));gt.displayName="CardTitle";const da=x.forwardRef(({className:e,...t},r)=>i.jsx("p",{ref:r,className:Ue("text-sm text-muted-foreground",e),...t}));da.displayName="CardDescription";const Ge=x.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Ue("p-6 pt-0",e),...t}));Ge.displayName="CardContent";const Go=x.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Ue("flex items-center p-6 pt-0",e),...t}));Go.displayName="CardFooter";const Ebe=()=>i.jsx("section",{className:"py-20",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"flex flex-col lg:flex-row items-center",children:[i.jsx("div",{className:"w-full lg:w-1/2 mb-10 lg:mb-0",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute -top-4 -left-4 w-64 h-64 rounded-full bg-lavender-100"}),i.jsx("div",{className:"absolute -bottom-4 -right-4 w-40 h-40 rounded-full bg-beauty-100"}),i.jsx(qe,{className:"relative border-beauty-200 shadow-xl overflow-hidden",children:i.jsxs(Ge,{className:"p-0",children:[i.jsxs("div",{className:"bg-beauty-500 text-white p-4",children:[i.jsx("h3",{className:"text-xl font-semibold",children:"Appointment Calendar"}),i.jsx("p",{className:"text-beauty-50",children:"April 2025"})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((e,t)=>i.jsx("div",{className:"text-center text-beauty-600 font-medium",children:e},t))}),i.jsx("div",{className:"grid grid-cols-7 gap-2",children:Array.from({length:30},(e,t)=>t+1).map(e=>i.jsx(ne,{variant:e===15?"default":e===22||e===8?"secondary":"ghost",className:`
                            h-12 w-full rounded-md text-sm font-medium
                            ${e===15?"bg-beauty-500 hover:bg-beauty-600 text-white":""}
                            ${e===22||e===8?"bg-teal-500 hover:bg-teal-600 text-white":""}
                          `,children:e},e))}),i.jsxs("div",{className:"mt-6 space-y-3",children:[i.jsxs("div",{className:"flex items-center p-2 rounded-md bg-beauty-50 border border-beauty-200",children:[i.jsx("div",{className:"w-2 h-8 bg-beauty-500 rounded-full mr-3"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-beauty-900",children:"15 Apr • 14:30"}),i.jsx("p",{className:"text-sm text-beauty-700",children:"Facial Treatment - Anna K."})]})]}),i.jsxs("div",{className:"flex items-center p-2 rounded-md bg-teal-50 border border-teal-200",children:[i.jsx("div",{className:"w-2 h-8 bg-teal-500 rounded-full mr-3"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-teal-900",children:"22 Apr • 10:00"}),i.jsx("p",{className:"text-sm text-teal-700",children:"Skin Consultation - Maria S."})]})]})]})]})]})})]})}),i.jsxs("div",{className:"w-full lg:w-1/2 lg:pl-16",children:[i.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:[i.jsx("span",{className:"beauty-gradient-text",children:"Simplified"})," Appointment Management"]}),i.jsx("p",{className:"text-xl text-beauty-800 mb-8",children:"Let clients book appointments online while you maintain full control of your schedule. Reduce no-shows with automated reminders and manage your calendar with ease."}),i.jsx("ul",{className:"space-y-4 mb-8",children:["Online booking system with customizable availability","Automated appointment reminders via SMS and email","Calendar sync with Google Calendar and iCloud","Client self-service rescheduling options","Custom appointment types and durations"].map((e,t)=>i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"mr-3 mt-1 text-beauty-500",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})})}),i.jsx("span",{className:"text-beauty-800",children:e})]},t))}),i.jsx(ne,{className:"bg-beauty-500 hover:bg-beauty-600 text-white px-8 py-6 text-lg",children:"Try Appointment Scheduler"})]})]})})});function Nbe(e,t=[]){let r=[];function n(s,o){const l=x.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:h,children:p,...v}=f,m=(h==null?void 0:h[e][c])||l,g=x.useMemo(()=>v,Object.values(v));return i.jsx(m.Provider,{value:g,children:p})}function d(f,h){const p=(h==null?void 0:h[e][c])||l,v=x.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,d]}const a=()=>{const s=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,Cbe(a,...t)]}function Cbe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var Y4="Progress",Z4=100,[kbe,Wlt]=Nbe(Y4),[Tbe,Abe]=kbe(Y4),pK=x.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:s=Pbe,...o}=e;(a||a===0)&&!PF(a)&&console.error(Obe(`${a}`,"Progress"));const l=PF(a)?a:Z4;n!==null&&!OF(n,l)&&console.error(Rbe(`${n}`,"Progress"));const c=OF(n,l)?n:null,u=Xw(c)?s(c,l):void 0;return i.jsx(Tbe,{scope:r,value:c,max:l,children:i.jsx(zt.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Xw(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":xK(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});pK.displayName=Y4;var gK="ProgressIndicator",vK=x.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=Abe(gK,r);return i.jsx(zt.div,{"data-state":xK(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});vK.displayName=gK;function Pbe(e,t){return`${Math.round(e/t*100)}%`}function xK(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Xw(e){return typeof e=="number"}function PF(e){return Xw(e)&&!isNaN(e)&&e>0}function OF(e,t){return Xw(e)&&!isNaN(e)&&e<=t&&e>=0}function Obe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Z4}\`.`}function Rbe(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Z4} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var yK=pK,Dbe=vK;const nc=x.forwardRef(({className:e,value:t,...r},n)=>i.jsx(yK,{ref:n,className:Ue("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:i.jsx(Dbe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));nc.displayName=yK.displayName;const Mbe=[{name:"Hyaluronic Acid Filler",date:"12 Mar 2025",next:"12 Sep 2025",progress:30,status:"Active",color:"beauty",composition:"Juvederm Ultra XC 1ml",parameters:"Lateral cheek injection, deep dermal placement",photos:!0},{name:"Botulinum Toxin",date:"23 Jan 2025",next:"23 Apr 2025",progress:70,status:"Schedule Soon",color:"teal",composition:"Botox 24 units",parameters:"Glabellar: 10u, Frontalis: 8u, Crow's feet: 6u",photos:!0},{name:"Chemical Peel",date:"05 Apr 2025",next:"05 Jun 2025",progress:20,status:"Active",color:"lavender",composition:"Glycolic Acid 30% pH 3.2",parameters:"Application time: 5 minutes, single layer",photos:!1}],Ibe=()=>i.jsx("section",{className:"py-20 bg-white",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"flex flex-col lg:flex-row-reverse items-center",children:[i.jsx("div",{className:"w-full lg:w-1/2 mb-10 lg:mb-0 lg:pl-16",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:["Complete ",i.jsx("span",{className:"beauty-gradient-text",children:"Treatment Tracking"})]}),i.jsx("p",{className:"text-xl text-beauty-800 mb-8",children:"Keep detailed records of all cosmetic procedures, products used, and results achieved. Plan follow-ups based on procedure type and client needs."}),i.jsx("div",{className:"space-y-4",children:Mbe.map((e,t)=>i.jsx(qe,{className:"border-beauty-100 overflow-hidden",children:i.jsxs(Ge,{className:"p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h4",{className:"font-medium text-beauty-900",children:e.name}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.color==="beauty"?"bg-beauty-100 text-beauty-700":e.color==="teal"?"bg-teal-100 text-teal-700":"bg-lavender-100 text-lavender-700"}`,children:e.status})]}),i.jsxs("div",{className:"flex justify-between text-sm text-beauty-600 mb-2",children:[i.jsxs("span",{children:["Last treatment: ",e.date]}),i.jsxs("span",{children:["Next due: ",e.next]})]}),i.jsx(nc,{value:e.progress,className:`h-2 mb-3 ${e.color==="beauty"?"bg-beauty-100 [&>div]:bg-beauty-500":e.color==="teal"?"bg-teal-100 [&>div]:bg-teal-500":"bg-lavender-100 [&>div]:bg-lavender-500"}`}),i.jsxs("div",{className:"mt-3 text-xs text-beauty-700",children:[i.jsxs("div",{className:"flex items-center mb-1",children:[i.jsx(dfe,{className:"h-3 w-3 mr-1"}),i.jsx("span",{className:"font-medium",children:"Composition:"}),i.jsx("span",{className:"ml-1",children:e.composition})]}),i.jsxs("div",{className:"flex items-center mb-1",children:[i.jsx(pfe,{className:"h-3 w-3 mr-1"}),i.jsx("span",{className:"font-medium",children:"Parameters:"}),i.jsx("span",{className:"ml-1",children:e.parameters})]}),e.photos&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(_3,{className:"h-3 w-3 mr-1"}),i.jsx("span",{className:"font-medium",children:"Photos available"})]})]}),i.jsxs("div",{className:"flex justify-between mt-3",children:[i.jsxs(ne,{variant:"outline",size:"sm",className:"text-xs flex items-center",children:[i.jsx(Qa,{className:"h-3 w-3 mr-1"})," Add to calendar"]}),i.jsx(ne,{size:"sm",className:"text-xs bg-beauty-500 hover:bg-beauty-600",children:"View Details"})]})]})},t))}),i.jsx(ne,{className:"bg-beauty-500 hover:bg-beauty-600 text-white mt-4",children:"View All Treatments"})]})}),i.jsx("div",{className:"w-full lg:w-1/2 lg:pr-16",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute -top-4 -right-4 w-64 h-64 rounded-full bg-beauty-100"}),i.jsx("div",{className:"absolute -bottom-4 -left-4 w-40 h-40 rounded-full bg-lavender-100"}),i.jsx(qe,{className:"relative border-beauty-200 shadow-xl overflow-hidden",children:i.jsxs(Ge,{className:"p-0",children:[i.jsxs("div",{className:"bg-teal-500 text-white p-4",children:[i.jsx("h3",{className:"text-xl font-semibold",children:"Client Treatment History"}),i.jsx("p",{className:"text-teal-50",children:"Elena Petrova"}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-teal-100",children:"Skin Type:"}),i.jsx("span",{className:"ml-1 text-white font-medium",children:"III (Fitzpatrick)"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-teal-100",children:"Skin Condition:"}),i.jsx("span",{className:"ml-1 text-white font-medium",children:"Combination"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-teal-100",children:"Allergies:"}),i.jsx("span",{className:"ml-1 text-white font-medium",children:"Lidocaine"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-teal-100",children:"Medical Notes:"}),i.jsx("span",{className:"ml-1 text-white font-medium",children:"Hypertension"})]})]})]}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"space-y-6",children:[{date:"April 5, 2025",title:"Chemical Peel",details:"Glycolic acid 30%, application time 5 minutes",composition:"Glycolic Acid 30% pH 3.2",parameters:"Application time: 5 minutes, single layer",skinReaction:"Slight tingling, mild erythema",recommendations:"Avoid sun exposure, use SPF 50, gentle cleanser only",photos:!0,notes:"Client reported slight tingling but no discomfort. Skin appeared slightly red immediately after procedure."},{date:"January 23, 2025",title:"Botulinum Toxin",details:"24 units total - forehead (10), glabella (8), crow's feet (6)",composition:"Botox 24 units",parameters:"Glabellar: 10u, Frontalis: 8u, Crow's feet: 6u",skinReaction:"Minimal erythema at injection sites",recommendations:"No facial massage for 24h, no exercise for 4h",photos:!0,notes:"Follow-up showed excellent results after 14 days. Client very satisfied with reduced appearance of fine lines."},{date:"October 15, 2024",title:"Hyaluronic Acid Filler",details:"1ml Juvederm Volift, nasolabial folds",composition:"Juvederm Ultra XC 1ml",parameters:"Lateral cheek injection, deep dermal placement",skinReaction:"Minimal bruising, swelling expected 24-48h",recommendations:"Cold compress for swelling, avoid makeup 12h",photos:!0,notes:"Client reported minimal bruising that resolved within 5 days. Results maintained well at 3-month check."}].map((e,t)=>i.jsxs("div",{className:"border-l-2 border-teal-300 pl-4 relative",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-teal-500 absolute -left-[7px] top-[6px]"}),i.jsx("p",{className:"text-sm text-beauty-600",children:e.date}),i.jsx("h4",{className:"font-medium text-beauty-900 mt-1",children:e.title}),i.jsxs("div",{className:"text-xs text-beauty-800 mt-1",children:[i.jsxs("div",{className:"mb-1",children:[i.jsx("span",{className:"font-medium",children:"Composition:"})," ",e.composition]}),i.jsxs("div",{className:"mb-1",children:[i.jsx("span",{className:"font-medium",children:"Parameters:"})," ",e.parameters]}),i.jsxs("div",{className:"mb-1",children:[i.jsx("span",{className:"font-medium",children:"Skin Reaction:"})," ",e.skinReaction]}),i.jsxs("div",{className:"mb-1",children:[i.jsx("span",{className:"font-medium",children:"Recommendations:"})," ",e.recommendations]}),e.photos&&i.jsxs("div",{className:"flex items-center text-beauty-600 mt-1",children:[i.jsx(_3,{className:"h-3 w-3 mr-1"}),i.jsx("span",{children:"Before/After photos available"})]})]}),i.jsx("p",{className:"text-sm text-beauty-700 mt-2 italic",children:e.notes}),i.jsx("div",{className:"flex justify-end mt-2",children:i.jsx(ne,{size:"sm",variant:"outline",className:"text-xs",children:"View Details"})})]},t))})})]})})]})})]})})}),$be=()=>i.jsx("section",{className:"py-20 bg-beauty-50",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:[i.jsx("span",{className:"beauty-gradient-text",children:"Seamless Integrations"})," With Your Tools"]}),i.jsx("p",{className:"text-xl text-beauty-800 max-w-3xl mx-auto",children:"BeautyTrack connects with the CRM systems and tools you already use, creating a unified workflow for your beauty business."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:[i.jsx(qe,{className:"border-beauty-100 hover:border-beauty-300 transition-all hover:shadow-md",children:i.jsxs(Ge,{className:"p-6 flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-24 h-24 bg-white rounded-full shadow-md flex items-center justify-center mb-6",children:i.jsx("img",{src:"https://crm-hunter.com/upload/resize_cache/webp/upload/medialibrary/35e/35e62864ef2893928d1f3fadf5912550.webp",alt:"AmoCRM",className:"w-16 h-16 object-contain"})}),i.jsx("h3",{className:"text-xl font-semibold mb-3 text-beauty-900",children:"AmoCRM"}),i.jsx("p",{className:"text-beauty-700 mb-6",children:"Synchronize client data, appointments, and sales between BeautyTrack and AmoCRM for streamlined lead management."}),i.jsx(ne,{variant:"outline",className:"border-primary text-primary hover:bg-primary/10 mt-auto",children:"Connect AmoCRM"})]})}),i.jsx(qe,{className:"border-beauty-100 hover:border-beauty-300 transition-all hover:shadow-md",children:i.jsxs(Ge,{className:"p-6 flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-24 h-24 bg-white rounded-full shadow-md flex items-center justify-center mb-6",children:i.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Bitrix24_logo.svg/1200px-Bitrix24_logo.svg.png",alt:"Bitrix24",className:"w-16 h-16 object-contain"})}),i.jsx("h3",{className:"text-xl font-semibold mb-3 text-beauty-900",children:"Bitrix24"}),i.jsx("p",{className:"text-beauty-700 mb-6",children:"Connect your Bitrix24 account to manage client relationships, tasks, and documents directly from BeautyTrack."}),i.jsx(ne,{variant:"outline",className:"border-primary text-primary hover:bg-primary/10 mt-auto",children:"Connect Bitrix24"})]})}),i.jsx(qe,{className:"border-beauty-100 hover:border-beauty-300 transition-all hover:shadow-md",children:i.jsxs(Ge,{className:"p-6 flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-24 h-24 bg-white rounded-full shadow-md flex items-center justify-center mb-6",children:i.jsx("img",{src:"https://seeklogo.com/images/G/google-calendar-logo-84E650FB4D-seeklogo.com.png",alt:"Google Calendar",className:"w-16 h-16 object-contain"})}),i.jsx("h3",{className:"text-xl font-semibold mb-3 text-beauty-900",children:"Google Calendar"}),i.jsx("p",{className:"text-beauty-700 mb-6",children:"Two-way sync with Google Calendar to manage all your appointments in one place, avoiding double bookings."}),i.jsx(ne,{variant:"outline",className:"border-primary text-primary hover:bg-primary/10 mt-auto",children:"Connect Google Calendar"})]})})]}),i.jsx("div",{className:"text-center",children:i.jsx(ne,{className:"bg-primary text-primary-foreground hover:bg-primary/90 text-white px-8 py-6 text-lg",children:"Explore All Integrations"})})]})}),Fbe=[{quote:"BeautyTrack transformed how I manage my beauty salon. Client tracking and appointment scheduling have never been easier!",author:"Marina Ivanova",role:"Beauty Salon Owner",avatar:"https://randomuser.me/api/portraits/women/45.jpg"},{quote:"As a cosmetic dermatologist, I need precise records of procedures and products. BeautyTrack makes this simple while looking professional.",author:"Dr. Elena Petrova",role:"Cosmetic Dermatologist",avatar:"https://randomuser.me/api/portraits/women/65.jpg"},{quote:"The integration with AmoCRM was seamless. Now I have my client data synced across all my business tools. Highly recommend!",author:"Olga Smirnova",role:"Cosmetologist",avatar:"https://randomuser.me/api/portraits/women/22.jpg"}],Lbe=()=>i.jsx("section",{className:"py-20 bg-white",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:["Loved by ",i.jsx("span",{className:"beauty-gradient-text",children:"Beauty Professionals"})]}),i.jsx("p",{className:"text-xl text-beauty-800 max-w-3xl mx-auto",children:"See what cosmetologists, salon owners, and beauty specialists are saying about BeautyTrack."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:Fbe.map((e,t)=>i.jsx(qe,{className:"border-beauty-100 hover:border-beauty-200 transition-all",children:i.jsxs(Ge,{className:"p-6 flex flex-col",children:[i.jsx("div",{className:"mb-6",children:[1,2,3,4,5].map(r=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"#FF3388",className:"inline-block mr-1",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})},r))}),i.jsxs("p",{className:"text-beauty-800 italic mb-6",children:['"',e.quote,'"']}),i.jsxs("div",{className:"flex items-center mt-auto",children:[i.jsx("img",{src:e.avatar,alt:e.author,className:"w-12 h-12 rounded-full object-cover mr-4"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-beauty-900",children:e.author}),i.jsx("p",{className:"text-sm text-beauty-600",children:e.role})]})]})]})},t))})]})}),Bbe=()=>i.jsxs("section",{className:"py-20 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 beauty-gradient opacity-10"}),i.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 rounded-full bg-beauty-100 blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 rounded-full bg-lavender-100 blur-3xl"}),i.jsx("div",{className:"container mx-auto px-4 relative",children:i.jsxs("div",{className:"bg-white border border-beauty-100 rounded-3xl p-8 md:p-12 shadow-xl max-w-4xl mx-auto text-center",children:[i.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:["Ready to transform your ",i.jsx("span",{className:"beauty-gradient-text",children:"beauty business?"})]}),i.jsx("p",{className:"text-xl text-beauty-800 mb-8 max-w-2xl mx-auto",children:"Start tracking procedures, managing appointments, and growing your client relationships with BeautyTrack today."}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[i.jsx(ne,{className:"bg-beauty-500 hover:bg-beauty-600 text-white px-8 py-6 text-lg",asChild:!0,children:i.jsx(en,{to:"/register",children:"Start Free Trial"})}),i.jsx(ne,{variant:"outline",className:"border-beauty-500 text-beauty-500 hover:bg-beauty-50 px-8 py-6 text-lg",asChild:!0,children:i.jsx(en,{to:"/demo",children:"Schedule a Demo"})})]}),i.jsx("p",{className:"text-beauty-700 mt-6",children:"No credit card required. 14-day free trial."})]})})]}),Ube=()=>i.jsxs("div",{className:"min-h-screen flex flex-col",children:[i.jsx(bbe,{}),i.jsxs("main",{className:"flex-grow mt-16",children:[i.jsx(jbe,{}),i.jsx(Sbe,{}),i.jsx(wbe,{}),i.jsx(Ebe,{}),i.jsx(Ibe,{}),i.jsx($be,{}),i.jsx(Lbe,{}),i.jsx(Bbe,{})]}),i.jsx(al,{})]});var bK=x.forwardRef((e,t)=>{const{children:r,...n}=e,a=x.Children.toArray(r),s=a.find(Wbe);if(s){const o=s.props.children,l=a.map(c=>c===s?x.Children.count(o)>1?x.Children.only(null):x.isValidElement(o)?o.props.children:null:c);return i.jsx(bA,{...n,ref:t,children:x.isValidElement(o)?x.cloneElement(o,void 0,l):null})}return i.jsx(bA,{...n,ref:t,children:r})});bK.displayName="Slot";var bA=x.forwardRef((e,t)=>{const{children:r,...n}=e;if(x.isValidElement(r)){const a=Hbe(r);return x.cloneElement(r,{...Vbe(n,r.props),ref:t?ad(t,a):a})}return x.Children.count(r)>1?x.Children.only(null):null});bA.displayName="SlotClone";var zbe=({children:e})=>i.jsx(i.Fragment,{children:e});function Wbe(e){return x.isValidElement(e)&&e.type===zbe}function Vbe(e,t){const r={...t};for(const n in t){const a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...l)=>{s(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...s}:n==="className"&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}function Hbe(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var J4="Popover",[wK,Vlt]=lo(J4,[Vp]),py=Vp(),[qbe,id]=wK(J4),_K=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:s,modal:o=!1}=e,l=py(t),c=x.useRef(null),[u,d]=x.useState(!1),[f=!1,h]=Ci({prop:n,defaultProp:a,onChange:s});return i.jsx(a4,{...l,children:i.jsx(qbe,{scope:t,contentId:Ho(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:u,onCustomAnchorAdd:x.useCallback(()=>d(!0),[]),onCustomAnchorRemove:x.useCallback(()=>d(!1),[]),modal:o,children:r})})};_K.displayName=J4;var SK="PopoverAnchor",Gbe=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=id(SK,r),s=py(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return x.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(JS,{...s,...n,ref:t})});Gbe.displayName=SK;var jK="PopoverTrigger",EK=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=id(jK,r),s=py(r),o=Pr(t,a.triggerRef),l=i.jsx(zt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":AK(a.open),...n,ref:o,onClick:At(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:i.jsx(JS,{asChild:!0,...s,children:l})});EK.displayName=jK;var Q4="PopoverPortal",[Kbe,Xbe]=wK(Q4,{forceMount:void 0}),NK=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,s=id(Q4,t);return i.jsx(Kbe,{scope:t,forceMount:r,children:i.jsx(rl,{present:r||s.open,children:i.jsx(Xx,{asChild:!0,container:a,children:n})})})};NK.displayName=Q4;var np="PopoverContent",CK=x.forwardRef((e,t)=>{const r=Xbe(np,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,s=id(np,e.__scopePopover);return i.jsx(rl,{present:n||s.open,children:s.modal?i.jsx(Ybe,{...a,ref:t}):i.jsx(Zbe,{...a,ref:t})})});CK.displayName=np;var Ybe=x.forwardRef((e,t)=>{const r=id(np,e.__scopePopover),n=x.useRef(null),a=Pr(t,n),s=x.useRef(!1);return x.useEffect(()=>{const o=n.current;if(o)return sy(o)},[]),i.jsx(Pj,{as:bK,allowPinchZoom:!0,children:i.jsx(kK,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:At(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),s.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:At(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:At(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Zbe=x.forwardRef((e,t)=>{const r=id(np,e.__scopePopover),n=x.useRef(!1),a=x.useRef(!1);return i.jsx(kK,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),s.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),kK=x.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,h=id(np,r),p=py(r);return z4(),i.jsx(Tj,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:s,children:i.jsx(Up,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:i.jsx(s4,{"data-state":AK(h.open),role:"dialog",id:h.contentId,...p,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),TK="PopoverClose",Jbe=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=id(TK,r);return i.jsx(zt.button,{type:"button",...n,ref:t,onClick:At(e.onClick,()=>a.onOpenChange(!1))})});Jbe.displayName=TK;var Qbe="PopoverArrow",e1e=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=py(r);return i.jsx(i4,{...a,...n,ref:t})});e1e.displayName=Qbe;function AK(e){return e?"open":"closed"}var t1e=_K,r1e=EK,n1e=NK,PK=CK;const pi=t1e,gi=r1e,Ks=x.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>i.jsx(n1e,{children:i.jsx(PK,{ref:a,align:t,sideOffset:r,className:Ue("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Ks.displayName=PK.displayName;const a1e=qp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-admin-badge text-admin-badge-foreground hover:bg-admin-badge hover:text-admin-primary",secondary:"border-transparent bg-admin-badge text-admin-badge-foreground hover:bg-admin-badge hover:text-admin-primary",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-admin-badge-foreground hover:bg-admin-badge hover:text-admin-primary",success:"border-transparent bg-green-500 text-white hover:bg-green-500/80",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-500/80"}},defaultVariants:{variant:"default"}});function $t({className:e,variant:t,...r}){return i.jsx("div",{className:Ue(a1e({variant:t}),e),...r})}function s1e(){const{branches:e,studios:t,currentBranch:r,currentStudio:n,setCurrentBranch:a,setCurrentStudio:s}=Ba();if(!e||e.length<=1)return null;const o=e.filter(c=>c.is_active),l=t.filter(c=>c.branch_id===(r==null?void 0:r.id)&&c.is_active);return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(pi,{children:[i.jsx(gi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",size:"sm",className:"h-8 px-2 gap-1",children:[i.jsx(UT,{className:"h-3.5 w-3.5"}),i.jsx("span",{className:"max-w-[100px] truncate hidden sm:inline-block",children:(r==null?void 0:r.name)||"Выберите филиал"}),i.jsx(pf,{className:"h-3.5 w-3.5 opacity-50"})]})}),i.jsxs(Ks,{className:"w-[220px] p-0",children:[i.jsxs("div",{className:"px-4 py-2 border-b",children:[i.jsx("h4",{className:"font-medium text-sm",children:"Филиалы"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Выберите филиал для работы"})]}),i.jsx("div",{className:"p-2",children:o.map(c=>i.jsxs(ne,{variant:"ghost",className:`w-full justify-start text-left mb-1 ${(r==null?void 0:r.id)===c.id?"bg-accent":""}`,onClick:()=>{a(c),s(null)},children:[i.jsx("div",{className:`w-2 h-full mr-2 bg-${c.color}-500 rounded-full`}),i.jsxs("div",{children:[i.jsx("span",{className:"block",children:c.name}),i.jsx("span",{className:"block text-xs text-muted-foreground",children:c.address.split(",")[0]})]}),(r==null?void 0:r.id)===c.id&&i.jsx($t,{variant:"outline",className:"ml-auto text-xs bg-accent-foreground/10",children:"Активен"})]},c.id))}),i.jsx("div",{className:"p-2 border-t",children:i.jsx(ne,{variant:"ghost",size:"sm",className:"w-full justify-start text-left",onClick:()=>window.location.href="/branches",children:"Управление филиалами"})})]})]}),r&&l.length>0&&i.jsxs(pi,{children:[i.jsx(gi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",size:"sm",className:"h-8 px-2 gap-1",children:[i.jsx(Ofe,{className:"h-3.5 w-3.5"}),i.jsx("span",{className:"max-w-[100px] truncate hidden sm:inline-block",children:(n==null?void 0:n.name)||"Выберите студию"}),i.jsx(pf,{className:"h-3.5 w-3.5 opacity-50"})]})}),i.jsxs(Ks,{className:"w-[220px] p-0",children:[i.jsxs("div",{className:"px-4 py-2 border-b",children:[i.jsx("h4",{className:"font-medium text-sm",children:"Студии"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Выберите студию для работы"})]}),i.jsx("div",{className:"p-2",children:l.map(c=>{var u;return i.jsxs(ne,{variant:"ghost",className:`w-full justify-start text-left mb-1 ${(n==null?void 0:n.id)===c.id?"bg-accent":""}`,onClick:()=>s(c),children:[i.jsxs("div",{children:[i.jsx("span",{className:"block",children:c.name}),i.jsx("span",{className:"block text-xs text-muted-foreground",children:((u=c.address)==null?void 0:u.split(",")[0])||"Адрес не указан"})]}),(n==null?void 0:n.id)===c.id&&i.jsx($t,{variant:"outline",className:"ml-auto text-xs bg-accent-foreground/10",children:"Активна"})]},c.id)})})]})]})]})}const od=()=>{const e=Kn(),{toast:t}=co(),{isAuthenticated:r,userRole:n}=ei(),a=async()=>{try{const{error:s}=await ue.auth.signOut();if(s)throw s;t({title:"Выход",description:"Вы успешно вышли из системы."}),e("/")}catch(s){console.error("Error logging out:",s),t({title:"Ошибка",description:"Не удалось выйти из системы.",variant:"destructive"})}};return i.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white/80 backdrop-blur-md z-50 border-b border-beauty-100",children:i.jsxs("div",{className:"container mx-auto flex justify-between items-center py-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("span",{className:"flex items-center cursor-pointer select-none",onClick:()=>e(r?n==="admin"?"/admin":n==="specialist"?"/specialist/dashboard":n==="client"?"/client/dashboard":"/":"/"),tabIndex:0,role:"button","aria-label":"BeautyTrack — перейти в кабинет",onKeyDown:s=>{if(s.key==="Enter"||s.key===" ")return e(r?n==="admin"?"/admin":n==="specialist"?"/specialist/dashboard":n==="client"?"/client/dashboard":"/":"/")},children:[i.jsx("span",{className:"text-2xl font-semibold beauty-gradient-text",children:"BeautyTrack"}),r&&n&&i.jsxs("span",{className:"ml-2 px-2 py-1 bg-beauty-50 text-beauty-600 text-xs rounded-md",children:[n==="admin"&&"Администратор",n==="specialist"&&"Мастер",n==="client"&&"Клиент"]})]}),r&&i.jsx(s1e,{})]}),i.jsx("div",{className:"flex items-center space-x-3",children:r?i.jsxs(i.Fragment,{children:[i.jsx(ne,{variant:"ghost",size:"icon",className:"text-primary hover:text-primary/80 hover:bg-primary/10",children:i.jsx(ij,{className:"h-5 w-5"})}),i.jsxs(vG,{children:[i.jsx(xG,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"icon",className:"text-primary hover:text-primary/80 hover:bg-primary/10",children:i.jsx(Ro,{className:"h-5 w-5"})})}),i.jsxs(R4,{align:"end",children:[i.jsx(D4,{children:"Мой аккаунт"}),i.jsx(M4,{}),i.jsx(gm,{onClick:()=>e("/settings"),children:"Настройки"}),n==="specialist"&&i.jsxs(i.Fragment,{children:[i.jsx(gm,{onClick:()=>e("/specialist/schedule"),children:"Расписание"}),i.jsx(gm,{onClick:()=>e("/specialist/profile"),children:"Мой профиль"})]})]})]}),i.jsx(ne,{variant:"outline",size:"sm",onClick:a,children:"Выйти"})]}):i.jsxs(i.Fragment,{children:[i.jsx(ne,{variant:"outline",onClick:()=>e("/login"),children:"Войти"}),i.jsx(ne,{className:"bg-beauty-500 hover:bg-beauty-600",onClick:()=>e("/login"),children:"Регистрация"})]})})]})})};function uc(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function eD(e,t=[]){let r=[];function n(s,o){const l=x.createContext(o),c=r.length;r=[...r,o];const u=f=>{var b;const{scope:h,children:p,...v}=f,m=((b=h==null?void 0:h[e])==null?void 0:b[c])||l,g=x.useMemo(()=>v,Object.values(v));return i.jsx(m.Provider,{value:g,children:p})};u.displayName=s+"Provider";function d(f,h){var m;const p=((m=h==null?void 0:h[e])==null?void 0:m[c])||l,v=x.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[u,d]}const a=()=>{const s=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,i1e(a,...t)]}function i1e(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function RF(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function OK(...e){return t=>{let r=!1;const n=e.map(a=>{const s=RF(a,t);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let a=0;a<n.length;a++){const s=n[a];typeof s=="function"?s():RF(e[a],null)}}}}function Yw(...e){return x.useCallback(OK(...e),e)}function wA(e){const t=o1e(e),r=x.forwardRef((n,a)=>{const{children:s,...o}=n,l=x.Children.toArray(s),c=l.find(c1e);if(c){const u=c.props.children,d=l.map(f=>f===c?x.Children.count(u)>1?x.Children.only(null):x.isValidElement(u)?u.props.children:null:f);return i.jsx(t,{...o,ref:a,children:x.isValidElement(u)?x.cloneElement(u,void 0,d):null})}return i.jsx(t,{...o,ref:a,children:s})});return r.displayName=`${e}.Slot`,r}function o1e(e){const t=x.forwardRef((r,n)=>{const{children:a,...s}=r;if(x.isValidElement(a)){const o=d1e(a),l=u1e(s,a.props);return a.type!==x.Fragment&&(l.ref=n?OK(n,o):o),x.cloneElement(a,l)}return x.Children.count(a)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var l1e=Symbol("radix.slottable");function c1e(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===l1e}function u1e(e,t){const r={...t};for(const n in t){const a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...l)=>{const c=s(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...s}:n==="className"&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}function d1e(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function f1e(e){const t=e+"CollectionProvider",[r,n]=eD(t),[a,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:g,children:b}=m,y=G.useRef(null),w=G.useRef(new Map).current;return i.jsx(a,{scope:g,itemMap:w,collectionRef:y,children:b})};o.displayName=t;const l=e+"CollectionSlot",c=wA(l),u=G.forwardRef((m,g)=>{const{scope:b,children:y}=m,w=s(l,b),_=Yw(g,w.collectionRef);return i.jsx(c,{ref:_,children:y})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=wA(d),p=G.forwardRef((m,g)=>{const{scope:b,children:y,...w}=m,_=G.useRef(null),S=Yw(g,_),E=s(d,b);return G.useEffect(()=>(E.itemMap.set(_,{ref:_,...w}),()=>void E.itemMap.delete(_))),i.jsx(h,{[f]:"",ref:S,children:y})});p.displayName=d;function v(m){const g=s(e+"CollectionConsumer",m);return G.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(g.itemMap.values()).sort((E,j)=>w.indexOf(E.ref.current)-w.indexOf(j.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},v,n]}var Zw=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},h1e=Vf[" useId ".trim().toString()]||(()=>{}),m1e=0;function RK(e){const[t,r]=x.useState(h1e());return Zw(()=>{e||r(n=>n??String(m1e++))},[e]),e||(t?`radix-${t}`:"")}var p1e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qp=p1e.reduce((e,t)=>{const r=wA(`Primitive.${t}`),n=x.forwardRef((a,s)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function g1e(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var v1e=Vf[" useInsertionEffect ".trim().toString()]||Zw;function DK({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,s,o]=x1e({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const d=x.useRef(e!==void 0);x.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=x.useCallback(d=>{var f;if(l){const h=y1e(d)?d(e):d;h!==e&&((f=o.current)==null||f.call(o,h))}else s(d)},[l,e,s,o]);return[c,u]}function x1e({defaultProp:e,onChange:t}){const[r,n]=x.useState(e),a=x.useRef(r),s=x.useRef(t);return v1e(()=>{s.current=t},[t]),x.useEffect(()=>{var o;a.current!==r&&((o=s.current)==null||o.call(s,r),a.current=r)},[r,a]),[r,n,s]}function y1e(e){return typeof e=="function"}var b1e=x.createContext(void 0);function MK(e){const t=x.useContext(b1e);return e||t||"ltr"}var mN="rovingFocusGroup.onEntryFocus",w1e={bubbles:!1,cancelable:!0},gy="RovingFocusGroup",[_A,IK,_1e]=f1e(gy),[S1e,$K]=eD(gy,[_1e]),[j1e,E1e]=S1e(gy),FK=x.forwardRef((e,t)=>i.jsx(_A.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(_A.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(N1e,{...e,ref:t})})}));FK.displayName=gy;var N1e=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=x.useRef(null),p=Yw(t,h),v=MK(s),[m,g]=DK({prop:o,defaultProp:l??null,onChange:c,caller:gy}),[b,y]=x.useState(!1),w=g1e(u),_=IK(r),S=x.useRef(!1),[E,j]=x.useState(0);return x.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(mN,w),()=>N.removeEventListener(mN,w)},[w]),i.jsx(j1e,{scope:r,orientation:n,dir:v,loop:a,currentTabStopId:m,onItemFocus:x.useCallback(N=>g(N),[g]),onItemShiftTab:x.useCallback(()=>y(!0),[]),onFocusableItemAdd:x.useCallback(()=>j(N=>N+1),[]),onFocusableItemRemove:x.useCallback(()=>j(N=>N-1),[]),children:i.jsx(Qp.div,{tabIndex:b||E===0?-1:0,"data-orientation":n,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:uc(e.onMouseDown,()=>{S.current=!0}),onFocus:uc(e.onFocus,N=>{const k=!S.current;if(N.target===N.currentTarget&&k&&!b){const C=new CustomEvent(mN,w1e);if(N.currentTarget.dispatchEvent(C),!C.defaultPrevented){const T=_().filter(D=>D.focusable),A=T.find(D=>D.active),B=T.find(D=>D.id===m),P=[A,B,...T].filter(Boolean).map(D=>D.ref.current);UK(P,d)}}S.current=!1}),onBlur:uc(e.onBlur,()=>y(!1))})})}),LK="RovingFocusGroupItem",BK=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:s,children:o,...l}=e,c=RK(),u=s||c,d=E1e(LK,r),f=d.currentTabStopId===u,h=IK(r),{onFocusableItemAdd:p,onFocusableItemRemove:v,currentTabStopId:m}=d;return x.useEffect(()=>{if(n)return p(),()=>v()},[n,p,v]),i.jsx(_A.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:i.jsx(Qp.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:uc(e.onMouseDown,g=>{n?d.onItemFocus(u):g.preventDefault()}),onFocus:uc(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:uc(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){d.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const b=T1e(g,d.orientation,d.dir);if(b!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let w=h().filter(_=>_.focusable).map(_=>_.ref.current);if(b==="last")w.reverse();else if(b==="prev"||b==="next"){b==="prev"&&w.reverse();const _=w.indexOf(g.currentTarget);w=d.loop?A1e(w,_+1):w.slice(_+1)}setTimeout(()=>UK(w))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:m!=null}):o})})});BK.displayName=LK;var C1e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function k1e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function T1e(e,t,r){const n=k1e(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return C1e[n]}function UK(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function A1e(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var P1e=FK,O1e=BK;function R1e(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var zK=e=>{const{present:t,children:r}=e,n=D1e(t),a=typeof r=="function"?r({present:n.isPresent}):x.Children.only(r),s=Yw(n.ref,M1e(a));return typeof r=="function"||n.isPresent?x.cloneElement(a,{ref:s}):null};zK.displayName="Presence";function D1e(e){const[t,r]=x.useState(),n=x.useRef(null),a=x.useRef(e),s=x.useRef("none"),o=e?"mounted":"unmounted",[l,c]=R1e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=Mb(n.current);s.current=l==="mounted"?u:"none"},[l]),Zw(()=>{const u=n.current,d=a.current;if(d!==e){const h=s.current,p=Mb(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Zw(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=p=>{const m=Mb(n.current).includes(p.animationName);if(p.target===t&&m&&(c("ANIMATION_END"),!a.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},h=p=>{p.target===t&&(s.current=Mb(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Mb(e){return(e==null?void 0:e.animationName)||"none"}function M1e(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Rj="Tabs",[I1e,Hlt]=eD(Rj,[$K]),WK=$K(),[$1e,tD]=I1e(Rj),VK=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=MK(l),[f,h]=DK({prop:n,onChange:a,defaultProp:s??"",caller:Rj});return i.jsx($1e,{scope:r,baseId:RK(),value:f,onValueChange:h,orientation:o,dir:d,activationMode:c,children:i.jsx(Qp.div,{dir:d,"data-orientation":o,...u,ref:t})})});VK.displayName=Rj;var HK="TabsList",qK=x.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,s=tD(HK,r),o=WK(r);return i.jsx(P1e,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:n,children:i.jsx(Qp.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:t})})});qK.displayName=HK;var GK="TabsTrigger",KK=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...s}=e,o=tD(GK,r),l=WK(r),c=ZK(o.baseId,n),u=JK(o.baseId,n),d=n===o.value;return i.jsx(O1e,{asChild:!0,...l,focusable:!a,active:d,children:i.jsx(Qp.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...s,ref:t,onMouseDown:uc(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:uc(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:uc(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!a&&f&&o.onValueChange(n)})})})});KK.displayName=GK;var XK="TabsContent",YK=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:s,...o}=e,l=tD(XK,r),c=ZK(l.baseId,n),u=JK(l.baseId,n),d=n===l.value,f=x.useRef(d);return x.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),i.jsx(zK,{present:a||d,children:({present:h})=>i.jsx(Qp.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&s})})});YK.displayName=XK;function ZK(e,t){return`${e}-trigger-${t}`}function JK(e,t){return`${e}-content-${t}`}var F1e=VK,QK=qK,eX=KK,tX=YK;const fa=F1e,ta=x.forwardRef(({className:e,...t},r)=>i.jsx(QK,{ref:r,className:Ue("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ta.displayName=QK.displayName;const Tt=x.forwardRef(({className:e,...t},r)=>i.jsx(eX,{ref:r,className:Ue("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Tt.displayName=eX.displayName;const Ft=x.forwardRef(({className:e,...t},r)=>i.jsx(tX,{ref:r,className:Ue("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ft.displayName=tX.displayName;var vy=e=>e.type==="checkbox",Bd=e=>e instanceof Date,xs=e=>e==null;const rX=e=>typeof e=="object";var Gn=e=>!xs(e)&&!Array.isArray(e)&&rX(e)&&!Bd(e),nX=e=>Gn(e)&&e.target?vy(e.target)?e.target.checked:e.target.value:e,L1e=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,aX=(e,t)=>e.has(L1e(t)),B1e=e=>{const t=e.constructor&&e.constructor.prototype;return Gn(t)&&t.hasOwnProperty("isPrototypeOf")},rD=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function zs(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(rD&&(e instanceof Blob||e instanceof FileList))&&(r||Gn(e)))if(t=r?[]:{},!r&&!B1e(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=zs(e[n]));else return e;return t}var Dj=e=>Array.isArray(e)?e.filter(Boolean):[],$n=e=>e===void 0,mt=(e,t,r)=>{if(!t||!Gn(e))return r;const n=Dj(t.split(/[,[\].]+?/)).reduce((a,s)=>xs(a)?a:a[s],e);return $n(n)||n===e?$n(e[t])?r:e[t]:n},Gi=e=>typeof e=="boolean",nD=e=>/^\w*$/.test(e),sX=e=>Dj(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Kr=(e,t,r)=>{let n=-1;const a=nD(t)?[t]:sX(t),s=a.length,o=s-1;for(;++n<s;){const l=a[n];let c=r;if(n!==o){const u=e[l];c=Gn(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(l==="__proto__")return;e[l]=c,e=e[l]}return e};const Jw={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Mo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ul={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},iX=G.createContext(null),Mj=()=>G.useContext(iX),U1e=e=>{const{children:t,...r}=e;return G.createElement(iX.Provider,{value:r},t)};var oX=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const o=s;return t._proxyFormState[o]!==Mo.all&&(t._proxyFormState[o]=!n||Mo.all),r&&(r[o]=!0),e[o]}});return a},Ws=e=>Gn(e)&&!Object.keys(e).length,lX=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return Ws(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(o=>t[o]===(!n||Mo.all))},kg=e=>Array.isArray(e)?e:[e],cX=(e,t,r)=>!e||!t||e===t||kg(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n)));function aD(e){const t=G.useRef(e);t.current=e,G.useEffect(()=>{const r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}function z1e(e){const t=Mj(),{control:r=t.control,disabled:n,name:a,exact:s}=e||{},[o,l]=G.useState(r._formState),c=G.useRef(!0),u=G.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=G.useRef(a);return d.current=a,aD({disabled:n,next:f=>c.current&&cX(d.current,f.name,s)&&lX(f,u.current,r._updateFormState)&&l({...r._formState,...f}),subject:r._subjects.state}),G.useEffect(()=>(c.current=!0,u.current.isValid&&r._updateValid(!0),()=>{c.current=!1}),[r]),oX(o,r,u.current,!1)}var bl=e=>typeof e=="string",uX=(e,t,r,n,a)=>bl(e)?(n&&t.watch.add(e),mt(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),mt(r,s))):(n&&(t.watchAll=!0),r);function W1e(e){const t=Mj(),{control:r=t.control,name:n,defaultValue:a,disabled:s,exact:o}=e||{},l=G.useRef(n);l.current=n,aD({disabled:s,subject:r._subjects.values,next:d=>{cX(l.current,d.name,o)&&u(zs(uX(l.current,r._names,d.values||r._formValues,!1,a)))}});const[c,u]=G.useState(r._getWatch(n,a));return G.useEffect(()=>r._removeUnmounted()),c}function V1e(e){const t=Mj(),{name:r,disabled:n,control:a=t.control,shouldUnregister:s}=e,o=aX(a._names.array,r),l=W1e({control:a,name:r,defaultValue:mt(a._formValues,r,mt(a._defaultValues,r,e.defaultValue)),exact:!0}),c=z1e({control:a,name:r,exact:!0}),u=G.useRef(a.register(r,{...e.rules,value:l,...Gi(e.disabled)?{disabled:e.disabled}:{}}));return G.useEffect(()=>{const d=a._options.shouldUnregister||s,f=(h,p)=>{const v=mt(a._fields,h);v&&v._f&&(v._f.mount=p)};if(f(r,!0),d){const h=zs(mt(a._options.defaultValues,r));Kr(a._defaultValues,r,h),$n(mt(a._formValues,r))&&Kr(a._formValues,r,h)}return()=>{(o?d&&!a._state.action:d)?a.unregister(r):f(r,!1)}},[r,a,o,s]),G.useEffect(()=>{mt(a._fields,r)&&a._updateDisabledField({disabled:n,fields:a._fields,name:r,value:mt(a._fields,r)._f.value})},[n,r,a]),{field:{name:r,value:l,...Gi(n)||c.disabled?{disabled:c.disabled||n}:{},onChange:G.useCallback(d=>u.current.onChange({target:{value:nX(d),name:r},type:Jw.CHANGE}),[r]),onBlur:G.useCallback(()=>u.current.onBlur({target:{value:mt(a._formValues,r),name:r},type:Jw.BLUR}),[r,a]),ref:G.useCallback(d=>{const f=mt(a._fields,r);f&&d&&(f._f.ref={focus:()=>d.focus(),select:()=>d.select(),setCustomValidity:h=>d.setCustomValidity(h),reportValidity:()=>d.reportValidity()})},[a._fields,r])},formState:c,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!mt(c.errors,r)},isDirty:{enumerable:!0,get:()=>!!mt(c.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!mt(c.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!mt(c.validatingFields,r)},error:{enumerable:!0,get:()=>mt(c.errors,r)}})}}const H1e=e=>e.render(V1e(e));var dX=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},DF=e=>({isOnSubmit:!e||e===Mo.onSubmit,isOnBlur:e===Mo.onBlur,isOnChange:e===Mo.onChange,isOnAll:e===Mo.all,isOnTouch:e===Mo.onTouched}),MF=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Tg=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=mt(e,a);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(Tg(l,t))break}else if(Gn(l)&&Tg(l,t))break}}};var q1e=(e,t,r)=>{const n=kg(mt(e,r));return Kr(n,"root",t[r]),Kr(e,r,n),e},sD=e=>e.type==="file",ac=e=>typeof e=="function",Qw=e=>{if(!rD)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},H1=e=>bl(e),iD=e=>e.type==="radio",e_=e=>e instanceof RegExp;const IF={value:!1,isValid:!1},$F={value:!0,isValid:!0};var fX=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!$n(e[0].attributes.value)?$n(e[0].value)||e[0].value===""?$F:{value:e[0].value,isValid:!0}:$F:IF}return IF};const FF={isValid:!1,value:null};var hX=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,FF):FF;function LF(e,t,r="validate"){if(H1(e)||Array.isArray(e)&&e.every(H1)||Gi(e)&&!e)return{type:r,message:H1(e)?e:"",ref:t}}var Eh=e=>Gn(e)&&!e_(e)?e:{value:e,message:""},BF=async(e,t,r,n,a)=>{const{ref:s,refs:o,required:l,maxLength:c,minLength:u,min:d,max:f,pattern:h,validate:p,name:v,valueAsNumber:m,mount:g,disabled:b}=e._f,y=mt(t,v);if(!g||b)return{};const w=o?o[0]:s,_=A=>{n&&w.reportValidity&&(w.setCustomValidity(Gi(A)?"":A||""),w.reportValidity())},S={},E=iD(s),j=vy(s),N=E||j,k=(m||sD(s))&&$n(s.value)&&$n(y)||Qw(s)&&s.value===""||y===""||Array.isArray(y)&&!y.length,C=dX.bind(null,v,r,S),T=(A,B,R,P=Ul.maxLength,D=Ul.minLength)=>{const U=A?B:R;S[v]={type:A?P:D,message:U,ref:s,...C(A?P:D,U)}};if(a?!Array.isArray(y)||!y.length:l&&(!N&&(k||xs(y))||Gi(y)&&!y||j&&!fX(o).isValid||E&&!hX(o).isValid)){const{value:A,message:B}=H1(l)?{value:!!l,message:l}:Eh(l);if(A&&(S[v]={type:Ul.required,message:B,ref:w,...C(Ul.required,B)},!r))return _(B),S}if(!k&&(!xs(d)||!xs(f))){let A,B;const R=Eh(f),P=Eh(d);if(!xs(y)&&!isNaN(y)){const D=s.valueAsNumber||y&&+y;xs(R.value)||(A=D>R.value),xs(P.value)||(B=D<P.value)}else{const D=s.valueAsDate||new Date(y),U=K=>new Date(new Date().toDateString()+" "+K),M=s.type=="time",F=s.type=="week";bl(R.value)&&y&&(A=M?U(y)>U(R.value):F?y>R.value:D>new Date(R.value)),bl(P.value)&&y&&(B=M?U(y)<U(P.value):F?y<P.value:D<new Date(P.value))}if((A||B)&&(T(!!A,R.message,P.message,Ul.max,Ul.min),!r))return _(S[v].message),S}if((c||u)&&!k&&(bl(y)||a&&Array.isArray(y))){const A=Eh(c),B=Eh(u),R=!xs(A.value)&&y.length>+A.value,P=!xs(B.value)&&y.length<+B.value;if((R||P)&&(T(R,A.message,B.message),!r))return _(S[v].message),S}if(h&&!k&&bl(y)){const{value:A,message:B}=Eh(h);if(e_(A)&&!y.match(A)&&(S[v]={type:Ul.pattern,message:B,ref:s,...C(Ul.pattern,B)},!r))return _(B),S}if(p){if(ac(p)){const A=await p(y,t),B=LF(A,w);if(B&&(S[v]={...B,...C(Ul.validate,B.message)},!r))return _(B.message),S}else if(Gn(p)){let A={};for(const B in p){if(!Ws(A)&&!r)break;const R=LF(await p[B](y,t),w,B);R&&(A={...R,...C(B,R.message)},_(R.message),r&&(S[v]=A))}if(!Ws(A)&&(S[v]={ref:w,...A},!r))return S}}return _(!0),S};function G1e(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=$n(e)?n++:e[t[n++]];return e}function K1e(e){for(const t in e)if(e.hasOwnProperty(t)&&!$n(e[t]))return!1;return!0}function aa(e,t){const r=Array.isArray(t)?t:nD(t)?[t]:sX(t),n=r.length===1?e:G1e(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(Gn(n)&&Ws(n)||Array.isArray(n)&&K1e(n))&&aa(e,r.slice(0,-1)),e}var pN=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},SA=e=>xs(e)||!rX(e);function lu(e,t){if(SA(e)||SA(t))return e===t;if(Bd(e)&&Bd(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const a of r){const s=e[a];if(!n.includes(a))return!1;if(a!=="ref"){const o=t[a];if(Bd(s)&&Bd(o)||Gn(s)&&Gn(o)||Array.isArray(s)&&Array.isArray(o)?!lu(s,o):s!==o)return!1}}return!0}var mX=e=>e.type==="select-multiple",X1e=e=>iD(e)||vy(e),gN=e=>Qw(e)&&e.isConnected,pX=e=>{for(const t in e)if(ac(e[t]))return!0;return!1};function t_(e,t={}){const r=Array.isArray(e);if(Gn(e)||r)for(const n in e)Array.isArray(e[n])||Gn(e[n])&&!pX(e[n])?(t[n]=Array.isArray(e[n])?[]:{},t_(e[n],t[n])):xs(e[n])||(t[n]=!0);return t}function gX(e,t,r){const n=Array.isArray(e);if(Gn(e)||n)for(const a in e)Array.isArray(e[a])||Gn(e[a])&&!pX(e[a])?$n(t)||SA(r[a])?r[a]=Array.isArray(e[a])?t_(e[a],[]):{...t_(e[a])}:gX(e[a],xs(t)?{}:t[a],r[a]):r[a]=!lu(e[a],t[a]);return r}var D0=(e,t)=>gX(e,t,t_(t)),vX=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>$n(e)?e:t?e===""?NaN:e&&+e:r&&bl(e)?new Date(e):n?n(e):e;function vN(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return sD(t)?t.files:iD(t)?hX(e.refs).value:mX(t)?[...t.selectedOptions].map(({value:r})=>r):vy(t)?fX(e.refs).value:vX($n(t.value)?e.ref.value:t.value,e)}var Y1e=(e,t,r,n)=>{const a={};for(const s of e){const o=mt(t,s);o&&Kr(a,s,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},M0=e=>$n(e)?e:e_(e)?e.source:Gn(e)?e_(e.value)?e.value.source:e.value:e;const UF="AsyncFunction";var Z1e=e=>(!e||!e.validate)&&!!(ac(e.validate)&&e.validate.constructor.name===UF||Gn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===UF)),J1e=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function zF(e,t,r){const n=mt(e,r);if(n||nD(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),o=mt(t,s),l=mt(e,s);if(o&&!Array.isArray(o)&&r!==s)return{name:r};if(l&&l.type)return{name:s,error:l};a.pop()}return{name:r}}var Q1e=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,ewe=(e,t)=>!Dj(mt(e,t)).length&&aa(e,t);const twe={mode:Mo.onSubmit,reValidateMode:Mo.onChange,shouldFocusError:!0};function rwe(e={}){let t={...twe,...e},r={submitCount:0,isDirty:!1,isLoading:ac(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Gn(t.defaultValues)||Gn(t.values)?zs(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:zs(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={values:pN(),array:pN(),state:pN()},h=DF(t.mode),p=DF(t.reValidateMode),v=t.criteriaMode===Mo.all,m=J=>Y=>{clearTimeout(u),u=setTimeout(J,Y)},g=async J=>{if(!e.disabled&&(d.isValid||J)){const Y=t.resolver?Ws((await N()).errors):await C(n,!0);Y!==r.isValid&&f.state.next({isValid:Y})}},b=(J,Y)=>{!e.disabled&&(d.isValidating||d.validatingFields)&&((J||Array.from(l.mount)).forEach(ae=>{ae&&(Y?Kr(r.validatingFields,ae,Y):aa(r.validatingFields,ae))}),f.state.next({validatingFields:r.validatingFields,isValidating:!Ws(r.validatingFields)}))},y=(J,Y=[],ae,ge,Se=!0,te=!0)=>{if(ge&&ae&&!e.disabled){if(o.action=!0,te&&Array.isArray(mt(n,J))){const me=ae(mt(n,J),ge.argA,ge.argB);Se&&Kr(n,J,me)}if(te&&Array.isArray(mt(r.errors,J))){const me=ae(mt(r.errors,J),ge.argA,ge.argB);Se&&Kr(r.errors,J,me),ewe(r.errors,J)}if(d.touchedFields&&te&&Array.isArray(mt(r.touchedFields,J))){const me=ae(mt(r.touchedFields,J),ge.argA,ge.argB);Se&&Kr(r.touchedFields,J,me)}d.dirtyFields&&(r.dirtyFields=D0(a,s)),f.state.next({name:J,isDirty:A(J,Y),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Kr(s,J,Y)},w=(J,Y)=>{Kr(r.errors,J,Y),f.state.next({errors:r.errors})},_=J=>{r.errors=J,f.state.next({errors:r.errors,isValid:!1})},S=(J,Y,ae,ge)=>{const Se=mt(n,J);if(Se){const te=mt(s,J,$n(ae)?mt(a,J):ae);$n(te)||ge&&ge.defaultChecked||Y?Kr(s,J,Y?te:vN(Se._f)):P(J,te),o.mount&&g()}},E=(J,Y,ae,ge,Se)=>{let te=!1,me=!1;const ke={name:J};if(!e.disabled){const he=!!(mt(n,J)&&mt(n,J)._f&&mt(n,J)._f.disabled);if(!ae||ge){d.isDirty&&(me=r.isDirty,r.isDirty=ke.isDirty=A(),te=me!==ke.isDirty);const et=he||lu(mt(a,J),Y);me=!!(!he&&mt(r.dirtyFields,J)),et||he?aa(r.dirtyFields,J):Kr(r.dirtyFields,J,!0),ke.dirtyFields=r.dirtyFields,te=te||d.dirtyFields&&me!==!et}if(ae){const et=mt(r.touchedFields,J);et||(Kr(r.touchedFields,J,ae),ke.touchedFields=r.touchedFields,te=te||d.touchedFields&&et!==ae)}te&&Se&&f.state.next(ke)}return te?ke:{}},j=(J,Y,ae,ge)=>{const Se=mt(r.errors,J),te=d.isValid&&Gi(Y)&&r.isValid!==Y;if(e.delayError&&ae?(c=m(()=>w(J,ae)),c(e.delayError)):(clearTimeout(u),c=null,ae?Kr(r.errors,J,ae):aa(r.errors,J)),(ae?!lu(Se,ae):Se)||!Ws(ge)||te){const me={...ge,...te&&Gi(Y)?{isValid:Y}:{},errors:r.errors,name:J};r={...r,...me},f.state.next(me)}},N=async J=>{b(J,!0);const Y=await t.resolver(s,t.context,Y1e(J||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(J),Y},k=async J=>{const{errors:Y}=await N(J);if(J)for(const ae of J){const ge=mt(Y,ae);ge?Kr(r.errors,ae,ge):aa(r.errors,ae)}else r.errors=Y;return Y},C=async(J,Y,ae={valid:!0})=>{for(const ge in J){const Se=J[ge];if(Se){const{_f:te,...me}=Se;if(te){const ke=l.array.has(te.name),he=Se._f&&Z1e(Se._f);he&&d.validatingFields&&b([ge],!0);const et=await BF(Se,s,v,t.shouldUseNativeValidation&&!Y,ke);if(he&&d.validatingFields&&b([ge]),et[te.name]&&(ae.valid=!1,Y))break;!Y&&(mt(et,te.name)?ke?q1e(r.errors,et,te.name):Kr(r.errors,te.name,et[te.name]):aa(r.errors,te.name))}!Ws(me)&&await C(me,Y,ae)}}return ae.valid},T=()=>{for(const J of l.unMount){const Y=mt(n,J);Y&&(Y._f.refs?Y._f.refs.every(ae=>!gN(ae)):!gN(Y._f.ref))&&ee(J)}l.unMount=new Set},A=(J,Y)=>!e.disabled&&(J&&Y&&Kr(s,J,Y),!lu(X(),a)),B=(J,Y,ae)=>uX(J,l,{...o.mount?s:$n(Y)?a:bl(J)?{[J]:Y}:Y},ae,Y),R=J=>Dj(mt(o.mount?s:a,J,e.shouldUnregister?mt(a,J,[]):[])),P=(J,Y,ae={})=>{const ge=mt(n,J);let Se=Y;if(ge){const te=ge._f;te&&(!te.disabled&&Kr(s,J,vX(Y,te)),Se=Qw(te.ref)&&xs(Y)?"":Y,mX(te.ref)?[...te.ref.options].forEach(me=>me.selected=Se.includes(me.value)):te.refs?vy(te.ref)?te.refs.length>1?te.refs.forEach(me=>(!me.defaultChecked||!me.disabled)&&(me.checked=Array.isArray(Se)?!!Se.find(ke=>ke===me.value):Se===me.value)):te.refs[0]&&(te.refs[0].checked=!!Se):te.refs.forEach(me=>me.checked=me.value===Se):sD(te.ref)?te.ref.value="":(te.ref.value=Se,te.ref.type||f.values.next({name:J,values:{...s}})))}(ae.shouldDirty||ae.shouldTouch)&&E(J,Se,ae.shouldTouch,ae.shouldDirty,!0),ae.shouldValidate&&K(J)},D=(J,Y,ae)=>{for(const ge in Y){const Se=Y[ge],te=`${J}.${ge}`,me=mt(n,te);(l.array.has(J)||Gn(Se)||me&&!me._f)&&!Bd(Se)?D(te,Se,ae):P(te,Se,ae)}},U=(J,Y,ae={})=>{const ge=mt(n,J),Se=l.array.has(J),te=zs(Y);Kr(s,J,te),Se?(f.array.next({name:J,values:{...s}}),(d.isDirty||d.dirtyFields)&&ae.shouldDirty&&f.state.next({name:J,dirtyFields:D0(a,s),isDirty:A(J,te)})):ge&&!ge._f&&!xs(te)?D(J,te,ae):P(J,te,ae),MF(J,l)&&f.state.next({...r}),f.values.next({name:o.mount?J:void 0,values:{...s}})},M=async J=>{o.mount=!0;const Y=J.target;let ae=Y.name,ge=!0;const Se=mt(n,ae),te=()=>Y.type?vN(Se._f):nX(J),me=ke=>{ge=Number.isNaN(ke)||Bd(ke)&&isNaN(ke.getTime())||lu(ke,mt(s,ae,ke))};if(Se){let ke,he;const et=te(),nt=J.type===Jw.BLUR||J.type===Jw.FOCUS_OUT,Oe=!J1e(Se._f)&&!t.resolver&&!mt(r.errors,ae)&&!Se._f.deps||Q1e(nt,mt(r.touchedFields,ae),r.isSubmitted,p,h),Ye=MF(ae,l,nt);Kr(s,ae,et),nt?(Se._f.onBlur&&Se._f.onBlur(J),c&&c(0)):Se._f.onChange&&Se._f.onChange(J);const ye=E(ae,et,nt,!1),le=!Ws(ye)||Ye;if(!nt&&f.values.next({name:ae,type:J.type,values:{...s}}),Oe)return d.isValid&&(e.mode==="onBlur"?nt&&g():g()),le&&f.state.next({name:ae,...Ye?{}:ye});if(!nt&&Ye&&f.state.next({...r}),t.resolver){const{errors:_e}=await N([ae]);if(me(et),ge){const Be=zF(r.errors,n,ae),Ie=zF(_e,n,Be.name||ae);ke=Ie.error,ae=Ie.name,he=Ws(_e)}}else b([ae],!0),ke=(await BF(Se,s,v,t.shouldUseNativeValidation))[ae],b([ae]),me(et),ge&&(ke?he=!1:d.isValid&&(he=await C(n,!0)));ge&&(Se._f.deps&&K(Se._f.deps),j(ae,he,ke,ye))}},F=(J,Y)=>{if(mt(r.errors,Y)&&J.focus)return J.focus(),1},K=async(J,Y={})=>{let ae,ge;const Se=kg(J);if(t.resolver){const te=await k($n(J)?J:Se);ae=Ws(te),ge=J?!Se.some(me=>mt(te,me)):ae}else J?(ge=(await Promise.all(Se.map(async te=>{const me=mt(n,te);return await C(me&&me._f?{[te]:me}:me)}))).every(Boolean),!(!ge&&!r.isValid)&&g()):ge=ae=await C(n);return f.state.next({...!bl(J)||d.isValid&&ae!==r.isValid?{}:{name:J},...t.resolver||!J?{isValid:ae}:{},errors:r.errors}),Y.shouldFocus&&!ge&&Tg(n,F,J?Se:l.mount),ge},X=J=>{const Y={...o.mount?s:a};return $n(J)?Y:bl(J)?mt(Y,J):J.map(ae=>mt(Y,ae))},O=(J,Y)=>({invalid:!!mt((Y||r).errors,J),isDirty:!!mt((Y||r).dirtyFields,J),error:mt((Y||r).errors,J),isValidating:!!mt(r.validatingFields,J),isTouched:!!mt((Y||r).touchedFields,J)}),W=J=>{J&&kg(J).forEach(Y=>aa(r.errors,Y)),f.state.next({errors:J?r.errors:{}})},L=(J,Y,ae)=>{const ge=(mt(n,J,{_f:{}})._f||{}).ref,Se=mt(r.errors,J)||{},{ref:te,message:me,type:ke,...he}=Se;Kr(r.errors,J,{...he,...Y,ref:ge}),f.state.next({name:J,errors:r.errors,isValid:!1}),ae&&ae.shouldFocus&&ge&&ge.focus&&ge.focus()},H=(J,Y)=>ac(J)?f.values.subscribe({next:ae=>J(B(void 0,Y),ae)}):B(J,Y,!0),ee=(J,Y={})=>{for(const ae of J?kg(J):l.mount)l.mount.delete(ae),l.array.delete(ae),Y.keepValue||(aa(n,ae),aa(s,ae)),!Y.keepError&&aa(r.errors,ae),!Y.keepDirty&&aa(r.dirtyFields,ae),!Y.keepTouched&&aa(r.touchedFields,ae),!Y.keepIsValidating&&aa(r.validatingFields,ae),!t.shouldUnregister&&!Y.keepDefaultValue&&aa(a,ae);f.values.next({values:{...s}}),f.state.next({...r,...Y.keepDirty?{isDirty:A()}:{}}),!Y.keepIsValid&&g()},q=({disabled:J,name:Y,field:ae,fields:ge,value:Se})=>{if(Gi(J)&&o.mount||J){const te=J?void 0:$n(Se)?vN(ae?ae._f:mt(ge,Y)._f):Se;Kr(s,Y,te),E(Y,te,!1,!1,!0)}},Z=(J,Y={})=>{let ae=mt(n,J);const ge=Gi(Y.disabled)||Gi(e.disabled);return Kr(n,J,{...ae||{},_f:{...ae&&ae._f?ae._f:{ref:{name:J}},name:J,mount:!0,...Y}}),l.mount.add(J),ae?q({field:ae,disabled:Gi(Y.disabled)?Y.disabled:e.disabled,name:J,value:Y.value}):S(J,!0,Y.value),{...ge?{disabled:Y.disabled||e.disabled}:{},...t.progressive?{required:!!Y.required,min:M0(Y.min),max:M0(Y.max),minLength:M0(Y.minLength),maxLength:M0(Y.maxLength),pattern:M0(Y.pattern)}:{},name:J,onChange:M,onBlur:M,ref:Se=>{if(Se){Z(J,Y),ae=mt(n,J);const te=$n(Se.value)&&Se.querySelectorAll&&Se.querySelectorAll("input,select,textarea")[0]||Se,me=X1e(te),ke=ae._f.refs||[];if(me?ke.find(he=>he===te):te===ae._f.ref)return;Kr(n,J,{_f:{...ae._f,...me?{refs:[...ke.filter(gN),te,...Array.isArray(mt(a,J))?[{}]:[]],ref:{type:te.type,name:J}}:{ref:te}}}),S(J,!1,void 0,te)}else ae=mt(n,J,{}),ae._f&&(ae._f.mount=!1),(t.shouldUnregister||Y.shouldUnregister)&&!(aX(l.array,J)&&o.action)&&l.unMount.add(J)}}},I=()=>t.shouldFocusError&&Tg(n,F,l.mount),Q=J=>{Gi(J)&&(f.state.next({disabled:J}),Tg(n,(Y,ae)=>{const ge=mt(n,ae);ge&&(Y.disabled=ge._f.disabled||J,Array.isArray(ge._f.refs)&&ge._f.refs.forEach(Se=>{Se.disabled=ge._f.disabled||J}))},0,!1))},ve=(J,Y)=>async ae=>{let ge;ae&&(ae.preventDefault&&ae.preventDefault(),ae.persist&&ae.persist());let Se=zs(s);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:te,values:me}=await N();r.errors=te,Se=me}else await C(n);if(aa(r.errors,"root"),Ws(r.errors)){f.state.next({errors:{}});try{await J(Se,ae)}catch(te){ge=te}}else Y&&await Y({...r.errors},ae),I(),setTimeout(I);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ws(r.errors)&&!ge,submitCount:r.submitCount+1,errors:r.errors}),ge)throw ge},z=(J,Y={})=>{mt(n,J)&&($n(Y.defaultValue)?U(J,zs(mt(a,J))):(U(J,Y.defaultValue),Kr(a,J,zs(Y.defaultValue))),Y.keepTouched||aa(r.touchedFields,J),Y.keepDirty||(aa(r.dirtyFields,J),r.isDirty=Y.defaultValue?A(J,zs(mt(a,J))):A()),Y.keepError||(aa(r.errors,J),d.isValid&&g()),f.state.next({...r}))},we=(J,Y={})=>{const ae=J?zs(J):a,ge=zs(ae),Se=Ws(J),te=Se?a:ge;if(Y.keepDefaultValues||(a=ae),!Y.keepValues){if(Y.keepDirtyValues){const me=new Set([...l.mount,...Object.keys(D0(a,s))]);for(const ke of Array.from(me))mt(r.dirtyFields,ke)?Kr(te,ke,mt(s,ke)):U(ke,mt(te,ke))}else{if(rD&&$n(J))for(const me of l.mount){const ke=mt(n,me);if(ke&&ke._f){const he=Array.isArray(ke._f.refs)?ke._f.refs[0]:ke._f.ref;if(Qw(he)){const et=he.closest("form");if(et){et.reset();break}}}}n={}}s=e.shouldUnregister?Y.keepDefaultValues?zs(a):{}:zs(te),f.array.next({values:{...te}}),f.values.next({values:{...te}})}l={mount:Y.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!Y.keepIsValid||!!Y.keepDirtyValues,o.watch=!!e.shouldUnregister,f.state.next({submitCount:Y.keepSubmitCount?r.submitCount:0,isDirty:Se?!1:Y.keepDirty?r.isDirty:!!(Y.keepDefaultValues&&!lu(J,a)),isSubmitted:Y.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Se?{}:Y.keepDirtyValues?Y.keepDefaultValues&&s?D0(a,s):r.dirtyFields:Y.keepDefaultValues&&J?D0(a,J):Y.keepDirty?r.dirtyFields:{},touchedFields:Y.keepTouched?r.touchedFields:{},errors:Y.keepErrors?r.errors:{},isSubmitSuccessful:Y.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Re=(J,Y)=>we(ac(J)?J(s):J,Y);return{control:{register:Z,unregister:ee,getFieldState:O,handleSubmit:ve,setError:L,_executeSchema:N,_getWatch:B,_getDirty:A,_updateValid:g,_removeUnmounted:T,_updateFieldArray:y,_updateDisabledField:q,_getFieldArray:R,_reset:we,_resetDefaultValues:()=>ac(t.defaultValues)&&t.defaultValues().then(J=>{Re(J,t.resetOptions),f.state.next({isLoading:!1})}),_updateFormState:J=>{r={...r,...J}},_disableForm:Q,_subjects:f,_proxyFormState:d,_setErrors:_,get _fields(){return n},get _formValues(){return s},get _state(){return o},set _state(J){o=J},get _defaultValues(){return a},get _names(){return l},set _names(J){l=J},get _formState(){return r},set _formState(J){r=J},get _options(){return t},set _options(J){t={...t,...J}}},trigger:K,register:Z,handleSubmit:ve,watch:H,setValue:U,getValues:X,reset:Re,resetField:z,clearErrors:W,unregister:ee,setError:L,setFocus:(J,Y={})=>{const ae=mt(n,J),ge=ae&&ae._f;if(ge){const Se=ge.refs?ge.refs[0]:ge.ref;Se.focus&&(Se.focus(),Y.shouldSelect&&Se.select())}},getFieldState:O}}function jf(e={}){const t=G.useRef(),r=G.useRef(),[n,a]=G.useState({isDirty:!1,isValidating:!1,isLoading:ac(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:ac(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...rwe(e),formState:n});const s=t.current.control;return s._options=e,aD({subject:s._subjects.state,next:o=>{lX(o,s._proxyFormState,s._updateFormState,!0)&&a({...s._formState})}}),G.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),G.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==n.isDirty&&s._subjects.state.next({isDirty:o})}},[s,n.isDirty]),G.useEffect(()=>{e.values&&!lu(e.values,r.current)?(s._reset(e.values,s._options.resetOptions),r.current=e.values,a(o=>({...o}))):s._resetDefaultValues()},[e.values,s]),G.useEffect(()=>{e.errors&&s._setErrors(e.errors)},[e.errors,s]),G.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),G.useEffect(()=>{e.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[e.shouldUnregister,s]),G.useEffect(()=>{t.current&&(t.current.watch=t.current.watch.bind({}))},[n]),t.current.formState=oX(n,s),t.current}var nwe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],awe=nwe.reduce((e,t)=>{const r=zH(`Primitive.${t}`),n=x.forwardRef((a,s)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),swe="Label",xX=x.forwardRef((e,t)=>i.jsx(awe.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));xX.displayName=swe;var yX=xX;const iwe=qp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Xe=x.forwardRef(({className:e,...t},r)=>i.jsx(yX,{ref:r,className:Ue(iwe(),e),...t}));Xe.displayName=yX.displayName;const dc=U1e,bX=G.createContext({}),Or=({...e})=>i.jsx(bX.Provider,{value:{name:e.name},children:i.jsx(H1e,{...e})}),Ij=()=>{const e=G.useContext(bX),t=G.useContext(wX),{getFieldState:r,formState:n}=Mj(),a=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:s}=t;return{id:s,name:e.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...a}},wX=G.createContext({}),Nr=G.forwardRef(({className:e,...t},r)=>{const n=G.useId();return i.jsx(wX.Provider,{value:{id:n},children:i.jsx("div",{ref:r,className:Ue("space-y-2",e),...t})})});Nr.displayName="FormItem";const Cr=G.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:a}=Ij();return i.jsx(Xe,{ref:r,className:Ue(n&&"text-red-500 dark:text-red-900",e),htmlFor:a,...t})});Cr.displayName="FormLabel";const br=G.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:s}=Ij();return i.jsx(WH,{ref:t,id:n,"aria-describedby":r?`${a} ${s}`:`${a}`,"aria-invalid":!!r,...e})});br.displayName="FormControl";const ag=G.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=Ij();return i.jsx("p",{ref:r,id:n,className:Ue("text-sm text-beauty-500",e),...t})});ag.displayName="FormDescription";const kr=G.forwardRef(({className:e,children:t,...r},n)=>{const{error:a,formMessageId:s}=Ij(),o=a?String(a==null?void 0:a.message):t;return o?i.jsx("p",{ref:n,id:s,className:Ue("text-sm font-medium text-red-500",e),...r,children:o}):null});kr.displayName="FormMessage";const WF=(e,t,r)=>{if(e&&"reportValidity"in e){const n=mt(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},_X=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?WF(n.ref,r,e):n.refs&&n.refs.forEach(a=>WF(a,r,e))}},owe=(e,t)=>{t.shouldUseNativeValidation&&_X(e,t);const r={};for(const n in e){const a=mt(t.fields,n),s=Object.assign(e[n]||{},{ref:a&&a.ref});if(lwe(t.names||Object.keys(e),n)){const o=Object.assign({},mt(r,n));Kr(o,"root",s),Kr(r,n,o)}else Kr(r,n,s)}return r},lwe=(e,t)=>e.some(r=>r.startsWith(t+"."));var cwe=function(e,t){for(var r={};e.length;){var n=e[0],a=n.code,s=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:s,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return e.push(f)})}),t){var c=r[o].types,u=c&&c[n.code];r[o]=dX(o,t,r,a,u?[].concat(u,n.message):n.message)}e.shift()}return r},Ef=function(e,t,r){return r===void 0&&(r={}),function(n,a,s){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(u){return s.shouldUseNativeValidation&&_X({},s),{errors:{},values:r.raw?n:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:owe(cwe(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}},Mr;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const s={};for(const o of a)s[o]=o;return s},e.getValidEnumValues=a=>{const s=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of s)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(s){return a[s]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const s=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&s.push(o);return s},e.find=(a,s)=>{for(const o of a)if(s(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function n(a,s=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}e.joinValues=n,e.jsonStringifyReplacer=(a,s)=>typeof s=="bigint"?s.toString():s})(Mr||(Mr={}));var jA;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(jA||(jA={}));const jt=Mr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Yl=e=>{switch(typeof e){case"undefined":return jt.undefined;case"string":return jt.string;case"number":return isNaN(e)?jt.nan:jt.number;case"boolean":return jt.boolean;case"function":return jt.function;case"bigint":return jt.bigint;case"symbol":return jt.symbol;case"object":return Array.isArray(e)?jt.array:e===null?jt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?jt.promise:typeof Map<"u"&&e instanceof Map?jt.map:typeof Set<"u"&&e instanceof Set?jt.set:typeof Date<"u"&&e instanceof Date?jt.date:jt.object;default:return jt.unknown}},st=Mr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),uwe=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class ji extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(s){return s.message},n={_errors:[]},a=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return a(this),n}static assert(t){if(!(t instanceof ji))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Mr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ji.create=e=>new ji(e);const ap=(e,t)=>{let r;switch(e.code){case st.invalid_type:e.received===jt.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case st.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Mr.jsonStringifyReplacer)}`;break;case st.unrecognized_keys:r=`Unrecognized key(s) in object: ${Mr.joinValues(e.keys,", ")}`;break;case st.invalid_union:r="Invalid input";break;case st.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Mr.joinValues(e.options)}`;break;case st.invalid_enum_value:r=`Invalid enum value. Expected ${Mr.joinValues(e.options)}, received '${e.received}'`;break;case st.invalid_arguments:r="Invalid function arguments";break;case st.invalid_return_type:r="Invalid function return type";break;case st.invalid_date:r="Invalid date";break;case st.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Mr.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case st.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case st.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case st.custom:r="Invalid input";break;case st.invalid_intersection_types:r="Intersection results could not be merged";break;case st.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case st.not_finite:r="Number must be finite";break;default:r=t.defaultError,Mr.assertNever(e)}return{message:r}};let SX=ap;function dwe(e){SX=e}function r_(){return SX}const n_=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,s=[...r,...a.path||[]],o={...a,path:s};if(a.message!==void 0)return{...a,path:s,message:a.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:t,defaultError:l}).message;return{...a,path:s,message:l}},fwe=[];function wt(e,t){const r=r_(),n=n_({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===ap?void 0:ap].filter(a=>!!a)});e.common.issues.push(n)}class cs{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return Jt;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const s=await a.key,o=await a.value;n.push({key:s,value:o})}return cs.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:s,value:o}=a;if(s.status==="aborted"||o.status==="aborted")return Jt;s.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[s.value]=o.value)}return{status:t.value,value:n}}}const Jt=Object.freeze({status:"aborted"}),Zh=e=>({status:"dirty",value:e}),Os=e=>({status:"valid",value:e}),EA=e=>e.status==="aborted",NA=e=>e.status==="dirty",Nf=e=>e.status==="valid",Mv=e=>typeof Promise<"u"&&e instanceof Promise;function a_(e,t,r,n){if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function jX(e,t,r,n,a){if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r}var Ot;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Ot||(Ot={}));var sg,ig;class Tl{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const VF=(e,t)=>{if(Nf(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ji(e.common.issues);return this._error=r,this._error}}};function lr(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{var c,u;const{message:d}=e;return o.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??n)!==null&&c!==void 0?c:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:l.defaultError}},description:a}}class mr{get description(){return this._def.description}_getType(t){return Yl(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Yl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new cs,ctx:{common:t.parent.common,data:t.data,parsedType:Yl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Mv(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;const a={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Yl(t)},s=this._parseSync({data:t,path:a.path,parent:a});return VF(a,s)}"~validate"(t){var r,n;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Yl(t)};if(!this["~standard"].async)try{const s=this._parseSync({data:t,path:[],parent:a});return Nf(s)?{value:s.value}:{issues:a.common.issues}}catch(s){!((n=(r=s==null?void 0:s.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(s=>Nf(s)?{value:s.value}:{issues:a.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Yl(t)},a=this._parse({data:t,path:n.path,parent:n}),s=await(Mv(a)?a:Promise.resolve(a));return VF(n,s)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,s)=>{const o=t(a),l=()=>s.addIssue({code:st.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new el({schema:this,typeName:Kt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return El.create(this,this._def)}nullable(){return Yu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ko.create(this)}promise(){return ip.create(this,this._def)}or(t){return Lv.create([this,t],this._def)}and(t){return Bv.create(this,t,this._def)}transform(t){return new el({...lr(this._def),schema:this,typeName:Kt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new Hv({...lr(this._def),innerType:this,defaultValue:r,typeName:Kt.ZodDefault})}brand(){return new oD({typeName:Kt.ZodBranded,type:this,...lr(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new qv({...lr(this._def),innerType:this,catchValue:r,typeName:Kt.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return xy.create(this,t)}readonly(){return Gv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const hwe=/^c[^\s-]{8,}$/i,mwe=/^[0-9a-z]+$/,pwe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,gwe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,vwe=/^[a-z0-9_-]{21}$/i,xwe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ywe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,bwe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,wwe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let xN;const _we=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Swe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,jwe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ewe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Nwe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Cwe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,EX="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",kwe=new RegExp(`^${EX}$`);function NX(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function Twe(e){return new RegExp(`^${NX(e)}$`)}function CX(e){let t=`${EX}T${NX(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function Awe(e,t){return!!((t==="v4"||!t)&&_we.test(e)||(t==="v6"||!t)&&jwe.test(e))}function Pwe(e,t){if(!xwe.test(e))return!1;try{const[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function Owe(e,t){return!!((t==="v4"||!t)&&Swe.test(e)||(t==="v6"||!t)&&Ewe.test(e))}class Bo extends mr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==jt.string){const s=this._getOrReturnCtx(t);return wt(s,{code:st.invalid_type,expected:jt.string,received:s.parsedType}),Jt}const n=new cs;let a;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(a=this._getOrReturnCtx(t,a),wt(a,{code:st.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")t.data.length>s.value&&(a=this._getOrReturnCtx(t,a),wt(a,{code:st.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const o=t.data.length>s.value,l=t.data.length<s.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?wt(a,{code:st.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&wt(a,{code:st.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")bwe.test(t.data)||(a=this._getOrReturnCtx(t,a),wt(a,{validation:"email",code:st.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")xN||(xN=new RegExp(wwe,"u")),xN.test(t.data)||(a=this._getOrReturnCtx(t,a),wt(a,{validation:"emoji",code:st.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")gwe.test(t.data)||(a=this._getOrReturnCtx(t,a),wt(a,{validation:"uuid",code:st.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")vwe.test(t.data)||(a=this._getOrReturnCtx(t,a),wt(a,{validation:"nanoid",code:st.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")hwe.test(t.data)||(a=this._getOrReturnCtx(t,a),wt(a,{validation:"cuid",code:st.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")mwe.test(t.data)||(a=this._getOrReturnCtx(t,a),wt(a,{validation:"cuid2",code:st.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")pwe.test(t.data)||(a=this._getOrReturnCtx(t,a),wt(a,{validation:"ulid",code:st.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),wt(a,{validation:"url",code:st.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),wt(a,{validation:"regex",code:st.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(a=this._getOrReturnCtx(t,a),wt(a,{code:st.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(a=this._getOrReturnCtx(t,a),wt(a,{code:st.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(a=this._getOrReturnCtx(t,a),wt(a,{code:st.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?CX(s).test(t.data)||(a=this._getOrReturnCtx(t,a),wt(a,{code:st.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?kwe.test(t.data)||(a=this._getOrReturnCtx(t,a),wt(a,{code:st.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?Twe(s).test(t.data)||(a=this._getOrReturnCtx(t,a),wt(a,{code:st.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?ywe.test(t.data)||(a=this._getOrReturnCtx(t,a),wt(a,{validation:"duration",code:st.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?Awe(t.data,s.version)||(a=this._getOrReturnCtx(t,a),wt(a,{validation:"ip",code:st.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?Pwe(t.data,s.alg)||(a=this._getOrReturnCtx(t,a),wt(a,{validation:"jwt",code:st.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?Owe(t.data,s.version)||(a=this._getOrReturnCtx(t,a),wt(a,{validation:"cidr",code:st.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?Nwe.test(t.data)||(a=this._getOrReturnCtx(t,a),wt(a,{validation:"base64",code:st.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?Cwe.test(t.data)||(a=this._getOrReturnCtx(t,a),wt(a,{validation:"base64url",code:st.invalid_string,message:s.message}),n.dirty()):Mr.assertNever(s);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:st.invalid_string,...Ot.errToObj(n)})}_addCheck(t){return new Bo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ot.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ot.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ot.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ot.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ot.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ot.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ot.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ot.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ot.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ot.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ot.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ot.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ot.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...Ot.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Ot.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Ot.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Ot.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Ot.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Ot.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Ot.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Ot.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Ot.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Ot.errToObj(r)})}nonempty(t){return this.min(1,Ot.errToObj(t))}trim(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Bo.create=e=>{var t;return new Bo({checks:[],typeName:Kt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...lr(e)})};function Rwe(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,s=parseInt(e.toFixed(a).replace(".","")),o=parseInt(t.toFixed(a).replace(".",""));return s%o/Math.pow(10,a)}class Gu extends mr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==jt.number){const s=this._getOrReturnCtx(t);return wt(s,{code:st.invalid_type,expected:jt.number,received:s.parsedType}),Jt}let n;const a=new cs;for(const s of this._def.checks)s.kind==="int"?Mr.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),wt(n,{code:st.invalid_type,expected:"integer",received:"float",message:s.message}),a.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),wt(n,{code:st.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),wt(n,{code:st.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="multipleOf"?Rwe(t.data,s.value)!==0&&(n=this._getOrReturnCtx(t,n),wt(n,{code:st.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),wt(n,{code:st.not_finite,message:s.message}),a.dirty()):Mr.assertNever(s);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Ot.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ot.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ot.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ot.toString(r))}setLimit(t,r,n,a){return new Gu({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ot.toString(a)}]})}_addCheck(t){return new Gu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ot.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ot.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ot.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ot.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ot.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ot.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Ot.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ot.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ot.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Mr.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Gu.create=e=>new Gu({checks:[],typeName:Kt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...lr(e)});class Ku extends mr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==jt.bigint)return this._getInvalidInput(t);let n;const a=new cs;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),wt(n,{code:st.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),wt(n,{code:st.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),wt(n,{code:st.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):Mr.assertNever(s);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return wt(r,{code:st.invalid_type,expected:jt.bigint,received:r.parsedType}),Jt}gte(t,r){return this.setLimit("min",t,!0,Ot.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ot.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ot.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ot.toString(r))}setLimit(t,r,n,a){return new Ku({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ot.toString(a)}]})}_addCheck(t){return new Ku({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ot.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ot.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ot.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ot.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ot.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Ku.create=e=>{var t;return new Ku({checks:[],typeName:Kt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...lr(e)})};class Iv extends mr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==jt.boolean){const n=this._getOrReturnCtx(t);return wt(n,{code:st.invalid_type,expected:jt.boolean,received:n.parsedType}),Jt}return Os(t.data)}}Iv.create=e=>new Iv({typeName:Kt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...lr(e)});class Cf extends mr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==jt.date){const s=this._getOrReturnCtx(t);return wt(s,{code:st.invalid_type,expected:jt.date,received:s.parsedType}),Jt}if(isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return wt(s,{code:st.invalid_date}),Jt}const n=new cs;let a;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(a=this._getOrReturnCtx(t,a),wt(a,{code:st.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(a=this._getOrReturnCtx(t,a),wt(a,{code:st.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):Mr.assertNever(s);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Cf({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Ot.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Ot.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Cf.create=e=>new Cf({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Kt.ZodDate,...lr(e)});class s_ extends mr{_parse(t){if(this._getType(t)!==jt.symbol){const n=this._getOrReturnCtx(t);return wt(n,{code:st.invalid_type,expected:jt.symbol,received:n.parsedType}),Jt}return Os(t.data)}}s_.create=e=>new s_({typeName:Kt.ZodSymbol,...lr(e)});class $v extends mr{_parse(t){if(this._getType(t)!==jt.undefined){const n=this._getOrReturnCtx(t);return wt(n,{code:st.invalid_type,expected:jt.undefined,received:n.parsedType}),Jt}return Os(t.data)}}$v.create=e=>new $v({typeName:Kt.ZodUndefined,...lr(e)});class Fv extends mr{_parse(t){if(this._getType(t)!==jt.null){const n=this._getOrReturnCtx(t);return wt(n,{code:st.invalid_type,expected:jt.null,received:n.parsedType}),Jt}return Os(t.data)}}Fv.create=e=>new Fv({typeName:Kt.ZodNull,...lr(e)});class sp extends mr{constructor(){super(...arguments),this._any=!0}_parse(t){return Os(t.data)}}sp.create=e=>new sp({typeName:Kt.ZodAny,...lr(e)});class rf extends mr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Os(t.data)}}rf.create=e=>new rf({typeName:Kt.ZodUnknown,...lr(e)});class jc extends mr{_parse(t){const r=this._getOrReturnCtx(t);return wt(r,{code:st.invalid_type,expected:jt.never,received:r.parsedType}),Jt}}jc.create=e=>new jc({typeName:Kt.ZodNever,...lr(e)});class i_ extends mr{_parse(t){if(this._getType(t)!==jt.undefined){const n=this._getOrReturnCtx(t);return wt(n,{code:st.invalid_type,expected:jt.void,received:n.parsedType}),Jt}return Os(t.data)}}i_.create=e=>new i_({typeName:Kt.ZodVoid,...lr(e)});class Ko extends mr{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==jt.array)return wt(r,{code:st.invalid_type,expected:jt.array,received:r.parsedType}),Jt;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(wt(r,{code:o?st.too_big:st.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(wt(r,{code:st.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(wt(r,{code:st.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new Tl(r,o,r.path,l)))).then(o=>cs.mergeArray(n,o));const s=[...r.data].map((o,l)=>a.type._parseSync(new Tl(r,o,r.path,l)));return cs.mergeArray(n,s)}get element(){return this._def.type}min(t,r){return new Ko({...this._def,minLength:{value:t,message:Ot.toString(r)}})}max(t,r){return new Ko({...this._def,maxLength:{value:t,message:Ot.toString(r)}})}length(t,r){return new Ko({...this._def,exactLength:{value:t,message:Ot.toString(r)}})}nonempty(t){return this.min(1,t)}}Ko.create=(e,t)=>new Ko({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Kt.ZodArray,...lr(t)});function Mh(e){if(e instanceof Cn){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=El.create(Mh(n))}return new Cn({...e._def,shape:()=>t})}else return e instanceof Ko?new Ko({...e._def,type:Mh(e.element)}):e instanceof El?El.create(Mh(e.unwrap())):e instanceof Yu?Yu.create(Mh(e.unwrap())):e instanceof Al?Al.create(e.items.map(t=>Mh(t))):e}class Cn extends mr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Mr.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==jt.object){const u=this._getOrReturnCtx(t);return wt(u,{code:st.invalid_type,expected:jt.object,received:u.parsedType}),Jt}const{status:n,ctx:a}=this._processInputParams(t),{shape:s,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof jc&&this._def.unknownKeys==="strip"))for(const u in a.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=s[u],f=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Tl(a,f,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof jc){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")l.length>0&&(wt(a,{code:st.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Tl(a,f,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,h=await d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>cs.mergeObjectSync(n,u)):cs.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return Ot.errToObj,new Cn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var a,s,o,l;const c=(o=(s=(a=this._def).errorMap)===null||s===void 0?void 0:s.call(a,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=Ot.errToObj(t).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new Cn({...this._def,unknownKeys:"strip"})}passthrough(){return new Cn({...this._def,unknownKeys:"passthrough"})}extend(t){return new Cn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Cn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Kt.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Cn({...this._def,catchall:t})}pick(t){const r={};return Mr.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Cn({...this._def,shape:()=>r})}omit(t){const r={};return Mr.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new Cn({...this._def,shape:()=>r})}deepPartial(){return Mh(this)}partial(t){const r={};return Mr.objectKeys(this.shape).forEach(n=>{const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}),new Cn({...this._def,shape:()=>r})}required(t){const r={};return Mr.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof El;)s=s._def.innerType;r[n]=s}}),new Cn({...this._def,shape:()=>r})}keyof(){return kX(Mr.objectKeys(this.shape))}}Cn.create=(e,t)=>new Cn({shape:()=>e,unknownKeys:"strip",catchall:jc.create(),typeName:Kt.ZodObject,...lr(t)});Cn.strictCreate=(e,t)=>new Cn({shape:()=>e,unknownKeys:"strict",catchall:jc.create(),typeName:Kt.ZodObject,...lr(t)});Cn.lazycreate=(e,t)=>new Cn({shape:e,unknownKeys:"strip",catchall:jc.create(),typeName:Kt.ZodObject,...lr(t)});class Lv extends mr{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=s.map(l=>new ji(l.ctx.common.issues));return wt(r,{code:st.invalid_union,unionErrors:o}),Jt}if(r.common.async)return Promise.all(n.map(async s=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let s;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const l=o.map(c=>new ji(c));return wt(r,{code:st.invalid_union,unionErrors:l}),Jt}}get options(){return this._def.options}}Lv.create=(e,t)=>new Lv({options:e,typeName:Kt.ZodUnion,...lr(t)});const Hl=e=>e instanceof zv?Hl(e.schema):e instanceof el?Hl(e.innerType()):e instanceof Wv?[e.value]:e instanceof Xu?e.options:e instanceof Vv?Mr.objectValues(e.enum):e instanceof Hv?Hl(e._def.innerType):e instanceof $v?[void 0]:e instanceof Fv?[null]:e instanceof El?[void 0,...Hl(e.unwrap())]:e instanceof Yu?[null,...Hl(e.unwrap())]:e instanceof oD||e instanceof Gv?Hl(e.unwrap()):e instanceof qv?Hl(e._def.innerType):[];class $j extends mr{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==jt.object)return wt(r,{code:st.invalid_type,expected:jt.object,received:r.parsedType}),Jt;const n=this.discriminator,a=r.data[n],s=this.optionsMap.get(a);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(wt(r,{code:st.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Jt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){const a=new Map;for(const s of r){const o=Hl(s.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const l of o){if(a.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);a.set(l,s)}}return new $j({typeName:Kt.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:a,...lr(n)})}}function CA(e,t){const r=Yl(e),n=Yl(t);if(e===t)return{valid:!0,data:e};if(r===jt.object&&n===jt.object){const a=Mr.objectKeys(t),s=Mr.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of s){const c=CA(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===jt.array&&n===jt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let s=0;s<e.length;s++){const o=e[s],l=t[s],c=CA(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===jt.date&&n===jt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Bv extends mr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(s,o)=>{if(EA(s)||EA(o))return Jt;const l=CA(s.value,o.value);return l.valid?((NA(s)||NA(o))&&r.dirty(),{status:r.value,value:l.data}):(wt(n,{code:st.invalid_intersection_types}),Jt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,o])=>a(s,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Bv.create=(e,t,r)=>new Bv({left:e,right:t,typeName:Kt.ZodIntersection,...lr(r)});class Al extends mr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==jt.array)return wt(n,{code:st.invalid_type,expected:jt.array,received:n.parsedType}),Jt;if(n.data.length<this._def.items.length)return wt(n,{code:st.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Jt;!this._def.rest&&n.data.length>this._def.items.length&&(wt(n,{code:st.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Tl(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>cs.mergeArray(r,o)):cs.mergeArray(r,s)}get items(){return this._def.items}rest(t){return new Al({...this._def,rest:t})}}Al.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Al({items:e,typeName:Kt.ZodTuple,rest:null,...lr(t)})};class Uv extends mr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==jt.object)return wt(n,{code:st.invalid_type,expected:jt.object,received:n.parsedType}),Jt;const a=[],s=this._def.keyType,o=this._def.valueType;for(const l in n.data)a.push({key:s._parse(new Tl(n,l,n.path,l)),value:o._parse(new Tl(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?cs.mergeObjectAsync(r,a):cs.mergeObjectSync(r,a)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof mr?new Uv({keyType:t,valueType:r,typeName:Kt.ZodRecord,...lr(n)}):new Uv({keyType:Bo.create(),valueType:t,typeName:Kt.ZodRecord,...lr(r)})}}class o_ extends mr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==jt.map)return wt(n,{code:st.invalid_type,expected:jt.map,received:n.parsedType}),Jt;const a=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map(([l,c],u)=>({key:a._parse(new Tl(n,l,n.path,[u,"key"])),value:s._parse(new Tl(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Jt;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Jt;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}o_.create=(e,t,r)=>new o_({valueType:t,keyType:e,typeName:Kt.ZodMap,...lr(r)});class kf extends mr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==jt.set)return wt(n,{code:st.invalid_type,expected:jt.set,received:n.parsedType}),Jt;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(wt(n,{code:st.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(wt(n,{code:st.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const s=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Jt;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>s._parse(new Tl(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new kf({...this._def,minSize:{value:t,message:Ot.toString(r)}})}max(t,r){return new kf({...this._def,maxSize:{value:t,message:Ot.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}kf.create=(e,t)=>new kf({valueType:e,minSize:null,maxSize:null,typeName:Kt.ZodSet,...lr(t)});class ym extends mr{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==jt.function)return wt(r,{code:st.invalid_type,expected:jt.function,received:r.parsedType}),Jt;function n(l,c){return n_({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,r_(),ap].filter(u=>!!u),issueData:{code:st.invalid_arguments,argumentsError:c}})}function a(l,c){return n_({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,r_(),ap].filter(u=>!!u),issueData:{code:st.invalid_return_type,returnTypeError:c}})}const s={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof ip){const l=this;return Os(async function(...c){const u=new ji([]),d=await l._def.args.parseAsync(c,s).catch(p=>{throw u.addIssue(n(c,p)),u}),f=await Reflect.apply(o,this,d);return await l._def.returns._def.type.parseAsync(f,s).catch(p=>{throw u.addIssue(a(f,p)),u})})}else{const l=this;return Os(function(...c){const u=l._def.args.safeParse(c,s);if(!u.success)throw new ji([n(c,u.error)]);const d=Reflect.apply(o,this,u.data),f=l._def.returns.safeParse(d,s);if(!f.success)throw new ji([a(d,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new ym({...this._def,args:Al.create(t).rest(rf.create())})}returns(t){return new ym({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new ym({args:t||Al.create([]).rest(rf.create()),returns:r||rf.create(),typeName:Kt.ZodFunction,...lr(n)})}}class zv extends mr{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}zv.create=(e,t)=>new zv({getter:e,typeName:Kt.ZodLazy,...lr(t)});class Wv extends mr{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return wt(r,{received:r.data,code:st.invalid_literal,expected:this._def.value}),Jt}return{status:"valid",value:t.data}}get value(){return this._def.value}}Wv.create=(e,t)=>new Wv({value:e,typeName:Kt.ZodLiteral,...lr(t)});function kX(e,t){return new Xu({values:e,typeName:Kt.ZodEnum,...lr(t)})}class Xu extends mr{constructor(){super(...arguments),sg.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return wt(r,{expected:Mr.joinValues(n),received:r.parsedType,code:st.invalid_type}),Jt}if(a_(this,sg)||jX(this,sg,new Set(this._def.values)),!a_(this,sg).has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return wt(r,{received:r.data,code:st.invalid_enum_value,options:n}),Jt}return Os(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Xu.create(t,{...this._def,...r})}exclude(t,r=this._def){return Xu.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}sg=new WeakMap;Xu.create=kX;class Vv extends mr{constructor(){super(...arguments),ig.set(this,void 0)}_parse(t){const r=Mr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==jt.string&&n.parsedType!==jt.number){const a=Mr.objectValues(r);return wt(n,{expected:Mr.joinValues(a),received:n.parsedType,code:st.invalid_type}),Jt}if(a_(this,ig)||jX(this,ig,new Set(Mr.getValidEnumValues(this._def.values))),!a_(this,ig).has(t.data)){const a=Mr.objectValues(r);return wt(n,{received:n.data,code:st.invalid_enum_value,options:a}),Jt}return Os(t.data)}get enum(){return this._def.values}}ig=new WeakMap;Vv.create=(e,t)=>new Vv({values:e,typeName:Kt.ZodNativeEnum,...lr(t)});class ip extends mr{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==jt.promise&&r.common.async===!1)return wt(r,{code:st.invalid_type,expected:jt.promise,received:r.parsedType}),Jt;const n=r.parsedType===jt.promise?r.data:Promise.resolve(r.data);return Os(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}ip.create=(e,t)=>new ip({type:e,typeName:Kt.ZodPromise,...lr(t)});class el extends mr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Kt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,s={addIssue:o=>{wt(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),a.type==="preprocess"){const o=a.transform(n.data,s);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return Jt;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?Jt:c.status==="dirty"||r.value==="dirty"?Zh(c.value):c});{if(r.value==="aborted")return Jt;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?Jt:l.status==="dirty"||r.value==="dirty"?Zh(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,s);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Jt:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Jt:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Nf(o))return o;const l=a.transform(o.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Nf(o)?Promise.resolve(a.transform(o.value,s)).then(l=>({status:r.value,value:l})):o);Mr.assertNever(a)}}el.create=(e,t,r)=>new el({schema:e,typeName:Kt.ZodEffects,effect:t,...lr(r)});el.createWithPreprocess=(e,t,r)=>new el({schema:t,effect:{type:"preprocess",transform:e},typeName:Kt.ZodEffects,...lr(r)});class El extends mr{_parse(t){return this._getType(t)===jt.undefined?Os(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}El.create=(e,t)=>new El({innerType:e,typeName:Kt.ZodOptional,...lr(t)});class Yu extends mr{_parse(t){return this._getType(t)===jt.null?Os(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Yu.create=(e,t)=>new Yu({innerType:e,typeName:Kt.ZodNullable,...lr(t)});class Hv extends mr{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===jt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Hv.create=(e,t)=>new Hv({innerType:e,typeName:Kt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...lr(t)});class qv extends mr{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Mv(a)?a.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ji(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ji(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}qv.create=(e,t)=>new qv({innerType:e,typeName:Kt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...lr(t)});class l_ extends mr{_parse(t){if(this._getType(t)!==jt.nan){const n=this._getOrReturnCtx(t);return wt(n,{code:st.invalid_type,expected:jt.nan,received:n.parsedType}),Jt}return{status:"valid",value:t.data}}}l_.create=e=>new l_({typeName:Kt.ZodNaN,...lr(e)});const Dwe=Symbol("zod_brand");class oD extends mr{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class xy extends mr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Jt:s.status==="dirty"?(r.dirty(),Zh(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Jt:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new xy({in:t,out:r,typeName:Kt.ZodPipeline})}}class Gv extends mr{_parse(t){const r=this._def.innerType._parse(t),n=a=>(Nf(a)&&(a.value=Object.freeze(a.value)),a);return Mv(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}Gv.create=(e,t)=>new Gv({innerType:e,typeName:Kt.ZodReadonly,...lr(t)});function HF(e,t){const r=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof r=="string"?{message:r}:r}function TX(e,t={},r){return e?sp.create().superRefine((n,a)=>{var s,o;const l=e(n);if(l instanceof Promise)return l.then(c=>{var u,d;if(!c){const f=HF(t,n),h=(d=(u=f.fatal)!==null&&u!==void 0?u:r)!==null&&d!==void 0?d:!0;a.addIssue({code:"custom",...f,fatal:h})}});if(!l){const c=HF(t,n),u=(o=(s=c.fatal)!==null&&s!==void 0?s:r)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...c,fatal:u})}}):sp.create()}const Mwe={object:Cn.lazycreate};var Kt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Kt||(Kt={}));const Iwe=(e,t={message:`Input not instance of ${e.name}`})=>TX(r=>r instanceof e,t),sa=Bo.create,AX=Gu.create,$we=l_.create,Fwe=Ku.create,PX=Iv.create,Lwe=Cf.create,Bwe=s_.create,Uwe=$v.create,zwe=Fv.create,Wwe=sp.create,Vwe=rf.create,Hwe=jc.create,qwe=i_.create,Gwe=Ko.create,lD=Cn.create,Kwe=Cn.strictCreate,Xwe=Lv.create,Ywe=$j.create,Zwe=Bv.create,Jwe=Al.create,Qwe=Uv.create,e_e=o_.create,t_e=kf.create,r_e=ym.create,n_e=zv.create,a_e=Wv.create,cD=Xu.create,s_e=Vv.create,i_e=ip.create,qF=el.create,o_e=El.create,l_e=Yu.create,c_e=el.createWithPreprocess,u_e=xy.create,d_e=()=>sa().optional(),f_e=()=>AX().optional(),h_e=()=>PX().optional(),uD={string:e=>Bo.create({...e,coerce:!0}),number:e=>Gu.create({...e,coerce:!0}),boolean:e=>Iv.create({...e,coerce:!0}),bigint:e=>Ku.create({...e,coerce:!0}),date:e=>Cf.create({...e,coerce:!0})},m_e=Jt;var ln=Object.freeze({__proto__:null,defaultErrorMap:ap,setErrorMap:dwe,getErrorMap:r_,makeIssue:n_,EMPTY_PATH:fwe,addIssueToContext:wt,ParseStatus:cs,INVALID:Jt,DIRTY:Zh,OK:Os,isAborted:EA,isDirty:NA,isValid:Nf,isAsync:Mv,get util(){return Mr},get objectUtil(){return jA},ZodParsedType:jt,getParsedType:Yl,ZodType:mr,datetimeRegex:CX,ZodString:Bo,ZodNumber:Gu,ZodBigInt:Ku,ZodBoolean:Iv,ZodDate:Cf,ZodSymbol:s_,ZodUndefined:$v,ZodNull:Fv,ZodAny:sp,ZodUnknown:rf,ZodNever:jc,ZodVoid:i_,ZodArray:Ko,ZodObject:Cn,ZodUnion:Lv,ZodDiscriminatedUnion:$j,ZodIntersection:Bv,ZodTuple:Al,ZodRecord:Uv,ZodMap:o_,ZodSet:kf,ZodFunction:ym,ZodLazy:zv,ZodLiteral:Wv,ZodEnum:Xu,ZodNativeEnum:Vv,ZodPromise:ip,ZodEffects:el,ZodTransformer:el,ZodOptional:El,ZodNullable:Yu,ZodDefault:Hv,ZodCatch:qv,ZodNaN:l_,BRAND:Dwe,ZodBranded:oD,ZodPipeline:xy,ZodReadonly:Gv,custom:TX,Schema:mr,ZodSchema:mr,late:Mwe,get ZodFirstPartyTypeKind(){return Kt},coerce:uD,any:Wwe,array:Gwe,bigint:Fwe,boolean:PX,date:Lwe,discriminatedUnion:Ywe,effect:qF,enum:cD,function:r_e,instanceof:Iwe,intersection:Zwe,lazy:n_e,literal:a_e,map:e_e,nan:$we,nativeEnum:s_e,never:Hwe,null:zwe,nullable:l_e,number:AX,object:lD,oboolean:h_e,onumber:f_e,optional:o_e,ostring:d_e,pipeline:u_e,preprocess:c_e,promise:i_e,record:Qwe,set:t_e,strictObject:Kwe,string:sa,symbol:Bwe,transformer:qF,tuple:Jwe,undefined:Uwe,union:Xwe,unknown:Vwe,void:qwe,NEVER:m_e,ZodIssueCode:st,quotelessJson:uwe,ZodError:ji});const p_e=ln.object({username:ln.string().min(3,{message:"Имя пользователя должно быть не менее 3 символов"}),password:ln.string().min(5,{message:"Пароль должен быть не менее 5 символов"})}),g_e=()=>{const e=Kn(),{toast:t}=co(),[r,n]=x.useState("client"),[a,s]=x.useState(null),{loginWithCredentials:o,userRole:l}=ei(),c=jf({resolver:Ef(p_e),defaultValues:{username:"",password:""}}),u=async d=>{s(null);const{username:f,password:h}=d;try{if(await o({username:f,password:h}))switch(t({title:"Успешный вход",description:"Добро пожаловать!"}),ei.getState().userRole){case"admin":e("/admin");break;case"specialist":e("/specialist/dashboard");break;case"client":e("/client/dashboard");break;default:e("/")}else s("Ошибка аутентификации. Попробуйте еще раз.")}catch(p){s("Ошибка аутентификации. Попробуйте еще раз."),console.error("Auth error:",p)}};return i.jsx("div",{className:"mt-8",children:i.jsxs(fa,{value:r,onValueChange:d=>n(d),children:[i.jsxs(ta,{className:"grid w-full grid-cols-3",children:[i.jsxs(Tt,{value:"client",className:"flex items-center gap-2",children:[i.jsx(Ro,{className:"h-4 w-4"}),i.jsx("span",{children:"Клиент"})]}),i.jsxs(Tt,{value:"specialist",className:"flex items-center gap-2",children:[i.jsx(gf,{className:"h-4 w-4"}),i.jsx("span",{children:"Специалист"})]}),i.jsxs(Tt,{value:"admin",className:"flex items-center gap-2",children:[i.jsx(Afe,{className:"h-4 w-4"}),i.jsx("span",{children:"Администратор"})]})]}),i.jsx(Ft,{value:"client",children:i.jsxs(qe,{children:[i.jsxs(ht,{children:[i.jsx(gt,{children:"Вход для клиентов"}),i.jsx(da,{children:"Получите доступ к своим записям, истории посещений и специальным предложениям"})]}),i.jsx(Ge,{children:i.jsx(dc,{...c,children:i.jsxs("form",{onSubmit:c.handleSubmit(u),className:"space-y-4",children:[i.jsx(Or,{control:c.control,name:"username",render:({field:d})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Логин"}),i.jsx(br,{children:i.jsx($e,{placeholder:"Введите ваш логин",...d})}),i.jsx(kr,{})]})}),i.jsx(Or,{control:c.control,name:"password",render:({field:d})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Пароль"}),i.jsx(br,{children:i.jsx($e,{type:"password",placeholder:"Введите ваш пароль",...d})}),i.jsx(kr,{})]})}),a&&i.jsx("div",{className:"text-red-500 text-sm",children:a}),i.jsx(ne,{type:"submit",className:"w-full bg-beauty-500 hover:bg-beauty-600",children:"Войти как клиент"})]})})}),i.jsx(Go,{className:"flex flex-col",children:i.jsxs("div",{className:"text-sm text-beauty-600 mt-2",children:[i.jsx("p",{className:"mb-1",children:"Демо-аккаунты:"}),i.jsx("p",{className:"mb-1",children:"• Логин: client / Пароль: client123"}),i.jsx("p",{children:"• Логин: user / Пароль: user123"})]})})]})}),i.jsx(Ft,{value:"specialist",children:i.jsxs(qe,{children:[i.jsxs(ht,{children:[i.jsx(gt,{children:"Вход для специалистов"}),i.jsx(da,{children:"Управляйте своим расписанием, клиентами и записями"})]}),i.jsx(Ge,{children:i.jsx(dc,{...c,children:i.jsxs("form",{onSubmit:c.handleSubmit(u),className:"space-y-4",children:[i.jsx(Or,{control:c.control,name:"username",render:({field:d})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Логин"}),i.jsx(br,{children:i.jsx($e,{placeholder:"Введите ваш логин",...d})}),i.jsx(kr,{})]})}),i.jsx(Or,{control:c.control,name:"password",render:({field:d})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Пароль"}),i.jsx(br,{children:i.jsx($e,{type:"password",placeholder:"Введите ваш пароль",...d})}),i.jsx(kr,{})]})}),a&&i.jsx("div",{className:"text-red-500 text-sm",children:a}),i.jsx(ne,{type:"submit",className:"w-full bg-beauty-500 hover:bg-beauty-600",children:"Войти как специалист"})]})})}),i.jsx(Go,{className:"flex flex-col",children:i.jsxs("div",{className:"text-sm text-beauty-600 mt-2",children:[i.jsx("p",{className:"mb-1",children:"Демо-аккаунты:"}),i.jsx("p",{className:"mb-1",children:"• Логин: stylist / Пароль: style123"}),i.jsx("p",{children:"• Логин: massage / Пароль: relax123"})]})})]})}),i.jsx(Ft,{value:"admin",children:i.jsxs(qe,{children:[i.jsxs(ht,{children:[i.jsx(gt,{children:"Вход для администраторов"}),i.jsx(da,{children:"Получите полный доступ к управлению салоном, услугами и персоналом"})]}),i.jsx(Ge,{children:i.jsx(dc,{...c,children:i.jsxs("form",{onSubmit:c.handleSubmit(u),className:"space-y-4",children:[i.jsx(Or,{control:c.control,name:"username",render:({field:d})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Логин"}),i.jsx(br,{children:i.jsx($e,{placeholder:"Введите ваш логин",...d})}),i.jsx(kr,{})]})}),i.jsx(Or,{control:c.control,name:"password",render:({field:d})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Пароль"}),i.jsx(br,{children:i.jsx($e,{type:"password",placeholder:"Введите ваш пароль",...d})}),i.jsx(kr,{})]})}),a&&i.jsx("div",{className:"text-red-500 text-sm",children:a}),i.jsx(ne,{type:"submit",className:"w-full bg-beauty-500 hover:bg-beauty-600",children:"Войти как администратор"})]})})}),i.jsx(Go,{className:"flex flex-col",children:i.jsx("div",{className:"text-sm text-beauty-600 mt-2",children:i.jsx("p",{children:"• Логин: admin / Пароль: admin123"})})})]})})]})})},v_e=()=>i.jsxs("div",{className:"min-h-screen flex flex-col",children:[i.jsx(od,{}),i.jsx("main",{className:"flex-grow mt-24 mb-12",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold mb-4 beauty-gradient-text text-center",children:"Вход в систему"}),i.jsx("p",{className:"text-center text-beauty-700 mb-8",children:"Выберите тип учетной записи для входа в BeautyTrack"}),i.jsxs("div",{className:"bg-pink-50 border-l-4 border-pink-500 p-4 mb-8 rounded-md",children:[i.jsx("h3",{className:"text-pink-500 font-medium mb-2",children:"Демо-аккаунты:"}),i.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[i.jsxs("li",{children:["Логин: ",i.jsx("span",{className:"font-mono",children:"client"})," / Пароль: ",i.jsx("span",{className:"font-mono",children:"client123"})]}),i.jsxs("li",{children:["Логин: ",i.jsx("span",{className:"font-mono",children:"demo@example.com"})," / Пароль: ",i.jsx("span",{className:"font-mono",children:"demo123"})]}),i.jsxs("li",{children:["Логин: ",i.jsx("span",{className:"font-mono",children:"user"})," / Пароль: ",i.jsx("span",{className:"font-mono",children:"user123"})]})]})]}),i.jsx(g_e,{}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx(en,{to:"/reset-password",className:"text-beauty-500 hover:underline",children:"Забыли пароль?"})}),i.jsx("div",{className:"mt-12 text-center",children:i.jsxs("p",{className:"text-beauty-700",children:["Еще нет учетной записи?"," ",i.jsx(en,{to:"/register",className:"text-beauty-500 hover:underline",children:"Зарегистрируйтесь"})]})})]})})}),i.jsx(al,{})]}),rn=x.forwardRef(({className:e,...t},r)=>i.jsx("textarea",{className:Ue("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));rn.displayName="Textarea";var GF=1,x_e=.9,y_e=.8,b_e=.17,yN=.1,bN=.999,w_e=.9999,__e=.99,S_e=/[\\\/_+.#"@\[\(\{&]/,j_e=/[\\\/_+.#"@\[\(\{&]/g,E_e=/[\s-]/,OX=/[\s-]/g;function kA(e,t,r,n,a,s,o){if(s===t.length)return a===e.length?GF:__e;var l=`${a},${s}`;if(o[l]!==void 0)return o[l];for(var c=n.charAt(s),u=r.indexOf(c,a),d=0,f,h,p,v;u>=0;)f=kA(e,t,r,n,u+1,s+1,o),f>d&&(u===a?f*=GF:S_e.test(e.charAt(u-1))?(f*=y_e,p=e.slice(a,u-1).match(j_e),p&&a>0&&(f*=Math.pow(bN,p.length))):E_e.test(e.charAt(u-1))?(f*=x_e,v=e.slice(a,u-1).match(OX),v&&a>0&&(f*=Math.pow(bN,v.length))):(f*=b_e,a>0&&(f*=Math.pow(bN,u-a))),e.charAt(u)!==t.charAt(s)&&(f*=w_e)),(f<yN&&r.charAt(u-1)===n.charAt(s+1)||n.charAt(s+1)===n.charAt(s)&&r.charAt(u-1)!==n.charAt(s))&&(h=kA(e,t,r,n,u+1,s+2,o),h*yN>f&&(f=h*yN)),f>d&&(d=f),u=r.indexOf(c,u+1);return o[l]=d,d}function KF(e){return e.toLowerCase().replace(OX," ")}function N_e(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,kA(e,t,KF(e),KF(t),0,0,{})}function Rs(){return Rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rs.apply(null,arguments)}function bm(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function C_e(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function RX(...e){return t=>e.forEach(r=>C_e(r,t))}function yy(...e){return x.useCallback(RX(...e),e)}function k_e(e,t=[]){let r=[];function n(s,o){const l=x.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:h,children:p,...v}=f,m=(h==null?void 0:h[e][c])||l,g=x.useMemo(()=>v,Object.values(v));return x.createElement(m.Provider,{value:g},p)}function d(f,h){const p=(h==null?void 0:h[e][c])||l,v=x.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,d]}const a=()=>{const s=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,T_e(a,...t)]}function T_e(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}const TA=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},A_e=Vf.useId||(()=>{});let P_e=0;function wN(e){const[t,r]=x.useState(A_e());return TA(()=>{e||r(n=>n??String(P_e++))},[e]),e||(t?`radix-${t}`:"")}function Tf(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function O_e({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,a]=R_e({defaultProp:t,onChange:r}),s=e!==void 0,o=s?e:n,l=Tf(r),c=x.useCallback(u=>{if(s){const f=typeof u=="function"?u(e):u;f!==e&&l(f)}else a(u)},[s,e,a,l]);return[o,c]}function R_e({defaultProp:e,onChange:t}){const r=x.useState(e),[n]=r,a=x.useRef(n),s=Tf(t);return x.useEffect(()=>{a.current!==n&&(s(n),a.current=n)},[n,a,s]),r}const dD=x.forwardRef((e,t)=>{const{children:r,...n}=e,a=x.Children.toArray(r),s=a.find(M_e);if(s){const o=s.props.children,l=a.map(c=>c===s?x.Children.count(o)>1?x.Children.only(null):x.isValidElement(o)?o.props.children:null:c);return x.createElement(AA,Rs({},n,{ref:t}),x.isValidElement(o)?x.cloneElement(o,void 0,l):null)}return x.createElement(AA,Rs({},n,{ref:t}),r)});dD.displayName="Slot";const AA=x.forwardRef((e,t)=>{const{children:r,...n}=e;return x.isValidElement(r)?x.cloneElement(r,{...I_e(n,r.props),ref:t?RX(t,r.ref):r.ref}):x.Children.count(r)>1?x.Children.only(null):null});AA.displayName="SlotClone";const D_e=({children:e})=>x.createElement(x.Fragment,null,e);function M_e(e){return x.isValidElement(e)&&e.type===D_e}function I_e(e,t){const r={...t};for(const n in t){const a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...l)=>{s(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...s}:n==="className"&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}const $_e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],fo=$_e.reduce((e,t)=>{const r=x.forwardRef((n,a)=>{const{asChild:s,...o}=n,l=s?dD:t;return x.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),x.createElement(l,Rs({},o,{ref:a}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function F_e(e,t){e&&oo.flushSync(()=>e.dispatchEvent(t))}function L_e(e,t=globalThis==null?void 0:globalThis.document){const r=Tf(e);x.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n),()=>t.removeEventListener("keydown",n)},[r,t])}const PA="dismissableLayer.update",B_e="dismissableLayer.pointerDownOutside",U_e="dismissableLayer.focusOutside";let XF;const z_e=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),W_e=x.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...u}=e,d=x.useContext(z_e),[f,h]=x.useState(null),p=(r=f==null?void 0:f.ownerDocument)!==null&&r!==void 0?r:globalThis==null?void 0:globalThis.document,[,v]=x.useState({}),m=yy(t,N=>h(N)),g=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),w=f?g.indexOf(f):-1,_=d.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,E=V_e(N=>{const k=N.target,C=[...d.branches].some(T=>T.contains(k));!S||C||(s==null||s(N),l==null||l(N),N.defaultPrevented||c==null||c())},p),j=H_e(N=>{const k=N.target;[...d.branches].some(T=>T.contains(k))||(o==null||o(N),l==null||l(N),N.defaultPrevented||c==null||c())},p);return L_e(N=>{w===d.layers.size-1&&(a==null||a(N),!N.defaultPrevented&&c&&(N.preventDefault(),c()))},p),x.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(XF=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),YF(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=XF)}},[f,p,n,d]),x.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),YF())},[f,d]),x.useEffect(()=>{const N=()=>v({});return document.addEventListener(PA,N),()=>document.removeEventListener(PA,N)},[]),x.createElement(fo.div,Rs({},u,{ref:m,style:{pointerEvents:_?S?"auto":"none":void 0,...e.style},onFocusCapture:bm(e.onFocusCapture,j.onFocusCapture),onBlurCapture:bm(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:bm(e.onPointerDownCapture,E.onPointerDownCapture)}))});function V_e(e,t=globalThis==null?void 0:globalThis.document){const r=Tf(e),n=x.useRef(!1),a=x.useRef(()=>{});return x.useEffect(()=>{const s=l=>{if(l.target&&!n.current){let u=function(){DX(B_e,r,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=u,t.addEventListener("click",a.current,{once:!0})):u()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function H_e(e,t=globalThis==null?void 0:globalThis.document){const r=Tf(e),n=x.useRef(!1);return x.useEffect(()=>{const a=s=>{s.target&&!n.current&&DX(U_e,r,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function YF(){const e=new CustomEvent(PA);document.dispatchEvent(e)}function DX(e,t,r,{discrete:n}){const a=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?F_e(a,s):a.dispatchEvent(s)}const _N="focusScope.autoFocusOnMount",SN="focusScope.autoFocusOnUnmount",ZF={bubbles:!1,cancelable:!0},q_e=x.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...o}=e,[l,c]=x.useState(null),u=Tf(a),d=Tf(s),f=x.useRef(null),h=yy(t,m=>c(m)),p=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(n){let m=function(w){if(p.paused||!l)return;const _=w.target;l.contains(_)?f.current=_:Jc(f.current,{select:!0})},g=function(w){if(p.paused||!l)return;const _=w.relatedTarget;_!==null&&(l.contains(_)||Jc(f.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&Jc(l)};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const y=new MutationObserver(b);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),y.disconnect()}}},[n,l,p.paused]),x.useEffect(()=>{if(l){QF.add(p);const m=document.activeElement;if(!l.contains(m)){const b=new CustomEvent(_N,ZF);l.addEventListener(_N,u),l.dispatchEvent(b),b.defaultPrevented||(G_e(J_e(MX(l)),{select:!0}),document.activeElement===m&&Jc(l))}return()=>{l.removeEventListener(_N,u),setTimeout(()=>{const b=new CustomEvent(SN,ZF);l.addEventListener(SN,d),l.dispatchEvent(b),b.defaultPrevented||Jc(m??document.body,{select:!0}),l.removeEventListener(SN,d),QF.remove(p)},0)}}},[l,u,d,p]);const v=x.useCallback(m=>{if(!r&&!n||p.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(g&&b){const y=m.currentTarget,[w,_]=K_e(y);w&&_?!m.shiftKey&&b===_?(m.preventDefault(),r&&Jc(w,{select:!0})):m.shiftKey&&b===w&&(m.preventDefault(),r&&Jc(_,{select:!0})):b===y&&m.preventDefault()}},[r,n,p.paused]);return x.createElement(fo.div,Rs({tabIndex:-1},o,{ref:h,onKeyDown:v}))});function G_e(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Jc(n,{select:t}),document.activeElement!==r)return}function K_e(e){const t=MX(e),r=JF(t,e),n=JF(t.reverse(),e);return[r,n]}function MX(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function JF(e,t){for(const r of e)if(!X_e(r,{upTo:t}))return r}function X_e(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Y_e(e){return e instanceof HTMLInputElement&&"select"in e}function Jc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Y_e(e)&&t&&e.select()}}const QF=Z_e();function Z_e(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=e5(e,t),e.unshift(t)},remove(t){var r;e=e5(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function e5(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function J_e(e){return e.filter(t=>t.tagName!=="A")}const Q_e=x.forwardRef((e,t)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...a}=e;return n?VS.createPortal(x.createElement(fo.div,Rs({},a,{ref:t})),n):null});function eSe(e,t){return x.useReducer((r,n)=>{const a=t[r][n];return a??r},e)}const Fj=e=>{const{present:t,children:r}=e,n=tSe(t),a=typeof r=="function"?r({present:n.isPresent}):x.Children.only(r),s=yy(n.ref,a.ref);return typeof r=="function"||n.isPresent?x.cloneElement(a,{ref:s}):null};Fj.displayName="Presence";function tSe(e){const[t,r]=x.useState(),n=x.useRef({}),a=x.useRef(e),s=x.useRef("none"),o=e?"mounted":"unmounted",[l,c]=eSe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=Ib(n.current);s.current=l==="mounted"?u:"none"},[l]),TA(()=>{const u=n.current,d=a.current;if(d!==e){const h=s.current,p=Ib(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),TA(()=>{if(t){const u=f=>{const p=Ib(n.current).includes(f.animationName);f.target===t&&p&&oo.flushSync(()=>c("ANIMATION_END"))},d=f=>{f.target===t&&(s.current=Ib(n.current))};return t.addEventListener("animationstart",d),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{t.removeEventListener("animationstart",d),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Ib(e){return(e==null?void 0:e.animationName)||"none"}let jN=0;function rSe(){x.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:t5()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:t5()),jN++,()=>{jN===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),jN--}},[])}function t5(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var IX=S4(),EN=function(){},Lj=x.forwardRef(function(e,t){var r=x.useRef(null),n=x.useState({onScrollCapture:EN,onWheelCapture:EN,onTouchMoveCapture:EN}),a=n[0],s=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,p=e.noIsolation,v=e.inert,m=e.allowPinchZoom,g=e.as,b=g===void 0?"div":g,y=xj(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,_=_4([r,t]),S=vr(vr({},y),a);return x.createElement(x.Fragment,null,d&&x.createElement(w,{sideCar:IX,removeScrollBar:u,shards:f,noIsolation:p,inert:v,setCallbacks:s,allowPinchZoom:!!m,lockRef:r}),o?x.cloneElement(x.Children.only(l),vr(vr({},S),{ref:_})):x.createElement(b,vr({},S,{className:c,ref:_}),l))});Lj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Lj.classNames={fullWidth:mm,zeroRight:hm};var OA=!1;if(typeof window<"u")try{var $b=Object.defineProperty({},"passive",{get:function(){return OA=!0,!0}});window.addEventListener("test",$b,$b),window.removeEventListener("test",$b,$b)}catch{OA=!1}var Nh=OA?{passive:!1}:!1,nSe=function(e){return e.tagName==="TEXTAREA"},$X=function(e,t){var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!nSe(e)&&r[t]==="visible")},aSe=function(e){return $X(e,"overflowY")},sSe=function(e){return $X(e,"overflowX")},r5=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=FX(e,r);if(n){var a=LX(e,r),s=a[1],o=a[2];if(s>o)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},iSe=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},oSe=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},FX=function(e,t){return e==="v"?aSe(t):sSe(t)},LX=function(e,t){return e==="v"?iSe(t):oSe(t)},lSe=function(e,t){return e==="h"&&t==="rtl"?-1:1},cSe=function(e,t,r,n,a){var s=lSe(e,window.getComputedStyle(t).direction),o=s*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{var p=LX(e,l),v=p[0],m=p[1],g=p[2],b=m-g-s*v;(v||b)&&FX(e,l)&&(f+=b,h+=v),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(f===0||!a)||!d&&(h===0||!a))&&(u=!0),u},Fb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},n5=function(e){return[e.deltaX,e.deltaY]},a5=function(e){return e&&"current"in e?e.current:e},uSe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},dSe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},fSe=0,Ch=[];function hSe(e){var t=x.useRef([]),r=x.useRef([0,0]),n=x.useRef(),a=x.useState(fSe++)[0],s=x.useState(function(){return bj()})[0],o=x.useRef(e);x.useEffect(function(){o.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var m=w4([e.lockRef.current],(e.shards||[]).map(a5),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=x.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var b=Fb(m),y=r.current,w="deltaX"in m?m.deltaX:y[0]-b[0],_="deltaY"in m?m.deltaY:y[1]-b[1],S,E=m.target,j=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in m&&j==="h"&&E.type==="range")return!1;var N=r5(j,E);if(!N)return!0;if(N?S=j:(S=j==="v"?"h":"v",N=r5(j,E)),!N)return!1;if(!n.current&&"changedTouches"in m&&(w||_)&&(n.current=S),!S)return!0;var k=n.current||S;return cSe(k,g,m,k==="h"?w:_,!0)},[]),c=x.useCallback(function(m){var g=m;if(!(!Ch.length||Ch[Ch.length-1]!==s)){var b="deltaY"in g?n5(g):Fb(g),y=t.current.filter(function(S){return S.name===g.type&&S.target===g.target&&uSe(S.delta,b)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(a5).filter(Boolean).filter(function(S){return S.contains(g.target)}),_=w.length>0?l(g,w[0]):!o.current.noIsolation;_&&g.cancelable&&g.preventDefault()}}},[]),u=x.useCallback(function(m,g,b,y){var w={name:m,delta:g,target:b,should:y};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(_){return _!==w})},1)},[]),d=x.useCallback(function(m){r.current=Fb(m),n.current=void 0},[]),f=x.useCallback(function(m){u(m.type,n5(m),m.target,l(m,e.lockRef.current))},[]),h=x.useCallback(function(m){u(m.type,Fb(m),m.target,l(m,e.lockRef.current))},[]);x.useEffect(function(){return Ch.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Nh),document.addEventListener("touchmove",c,Nh),document.addEventListener("touchstart",d,Nh),function(){Ch=Ch.filter(function(m){return m!==s}),document.removeEventListener("wheel",c,Nh),document.removeEventListener("touchmove",c,Nh),document.removeEventListener("touchstart",d,Nh)}},[]);var p=e.removeScrollBar,v=e.inert;return x.createElement(x.Fragment,null,v?x.createElement(s,{styles:dSe(a)}):null,p?x.createElement(E4,{gapMode:"margin"}):null)}const mSe=j4(IX,hSe);var BX=x.forwardRef(function(e,t){return x.createElement(Lj,vr({},e,{ref:t,sideCar:mSe}))});BX.classNames=Lj.classNames;const UX="Dialog",[zX,qlt]=k_e(UX),[pSe,Jf]=zX(UX),gSe=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:s,modal:o=!0}=e,l=x.useRef(null),c=x.useRef(null),[u=!1,d]=O_e({prop:n,defaultProp:a,onChange:s});return x.createElement(pSe,{scope:t,triggerRef:l,contentRef:c,contentId:wN(),titleId:wN(),descriptionId:wN(),open:u,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(f=>!f),[d]),modal:o},r)},WX="DialogPortal",[vSe,VX]=zX(WX,{forceMount:void 0}),xSe=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,s=Jf(WX,t);return x.createElement(vSe,{scope:t,forceMount:r},x.Children.map(n,o=>x.createElement(Fj,{present:r||s.open},x.createElement(Q_e,{asChild:!0,container:a},o))))},RA="DialogOverlay",ySe=x.forwardRef((e,t)=>{const r=VX(RA,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,s=Jf(RA,e.__scopeDialog);return s.modal?x.createElement(Fj,{present:n||s.open},x.createElement(bSe,Rs({},a,{ref:t}))):null}),bSe=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Jf(RA,r);return x.createElement(BX,{as:dD,allowPinchZoom:!0,shards:[a.contentRef]},x.createElement(fo.div,Rs({"data-state":qX(a.open)},n,{ref:t,style:{pointerEvents:"auto",...n.style}})))}),Kv="DialogContent",wSe=x.forwardRef((e,t)=>{const r=VX(Kv,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,s=Jf(Kv,e.__scopeDialog);return x.createElement(Fj,{present:n||s.open},s.modal?x.createElement(_Se,Rs({},a,{ref:t})):x.createElement(SSe,Rs({},a,{ref:t})))}),_Se=x.forwardRef((e,t)=>{const r=Jf(Kv,e.__scopeDialog),n=x.useRef(null),a=yy(t,r.contentRef,n);return x.useEffect(()=>{const s=n.current;if(s)return sy(s)},[]),x.createElement(HX,Rs({},e,{ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:bm(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=r.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:bm(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:bm(e.onFocusOutside,s=>s.preventDefault())}))}),SSe=x.forwardRef((e,t)=>{const r=Jf(Kv,e.__scopeDialog),n=x.useRef(!1),a=x.useRef(!1);return x.createElement(HX,Rs({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=e.onCloseAutoFocus)===null||o===void 0||o.call(e,s),!s.defaultPrevented){var l;n.current||(l=r.triggerRef.current)===null||l===void 0||l.focus(),s.preventDefault()}n.current=!1,a.current=!1},onInteractOutside:s=>{var o,l;(o=e.onInteractOutside)===null||o===void 0||o.call(e,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=s.target;((l=r.triggerRef.current)===null||l===void 0?void 0:l.contains(c))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}}))}),HX=x.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:s,...o}=e,l=Jf(Kv,r),c=x.useRef(null),u=yy(t,c);return rSe(),x.createElement(x.Fragment,null,x.createElement(q_e,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:s},x.createElement(W_e,Rs({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":qX(l.open)},o,{ref:u,onDismiss:()=>l.onOpenChange(!1)}))),!1)});function qX(e){return e?"open":"closed"}const jSe=gSe,ESe=xSe,NSe=ySe,CSe=wSe;var I0='[cmdk-group=""]',NN='[cmdk-group-items=""]',kSe='[cmdk-group-heading=""]',fD='[cmdk-item=""]',s5=`${fD}:not([aria-disabled="true"])`,DA="cmdk-item-select",Od="data-value",TSe=(e,t,r)=>N_e(e,t,r),GX=x.createContext(void 0),by=()=>x.useContext(GX),KX=x.createContext(void 0),hD=()=>x.useContext(KX),XX=x.createContext(void 0),YX=x.forwardRef((e,t)=>{let r=Ih(()=>{var O,W;return{search:"",value:(W=(O=e.value)!=null?O:e.defaultValue)!=null?W:"",filtered:{count:0,items:new Map,groups:new Set}}}),n=Ih(()=>new Set),a=Ih(()=>new Map),s=Ih(()=>new Map),o=Ih(()=>new Set),l=ZX(e),{label:c,children:u,value:d,onValueChange:f,filter:h,shouldFilter:p,loop:v,disablePointerSelection:m=!1,vimBindings:g=!0,...b}=e,y=x.useId(),w=x.useId(),_=x.useId(),S=x.useRef(null),E=BSe();Af(()=>{if(d!==void 0){let O=d.trim();r.current.value=O,j.emit()}},[d]),Af(()=>{E(6,B)},[]);let j=x.useMemo(()=>({subscribe:O=>(o.current.add(O),()=>o.current.delete(O)),snapshot:()=>r.current,setState:(O,W,L)=>{var H,ee,q;if(!Object.is(r.current[O],W)){if(r.current[O]=W,O==="search")A(),C(),E(1,T);else if(O==="value"&&(L||E(5,B),((H=l.current)==null?void 0:H.value)!==void 0)){let Z=W??"";(q=(ee=l.current).onValueChange)==null||q.call(ee,Z);return}j.emit()}},emit:()=>{o.current.forEach(O=>O())}}),[]),N=x.useMemo(()=>({value:(O,W,L)=>{var H;W!==((H=s.current.get(O))==null?void 0:H.value)&&(s.current.set(O,{value:W,keywords:L}),r.current.filtered.items.set(O,k(W,L)),E(2,()=>{C(),j.emit()}))},item:(O,W)=>(n.current.add(O),W&&(a.current.has(W)?a.current.get(W).add(O):a.current.set(W,new Set([O]))),E(3,()=>{A(),C(),r.current.value||T(),j.emit()}),()=>{s.current.delete(O),n.current.delete(O),r.current.filtered.items.delete(O);let L=R();E(4,()=>{A(),(L==null?void 0:L.getAttribute("id"))===O&&T(),j.emit()})}),group:O=>(a.current.has(O)||a.current.set(O,new Set),()=>{s.current.delete(O),a.current.delete(O)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],disablePointerSelection:m,listId:y,inputId:_,labelId:w,listInnerRef:S}),[]);function k(O,W){var L,H;let ee=(H=(L=l.current)==null?void 0:L.filter)!=null?H:TSe;return O?ee(O,r.current.search,W):0}function C(){if(!r.current.search||l.current.shouldFilter===!1)return;let O=r.current.filtered.items,W=[];r.current.filtered.groups.forEach(H=>{let ee=a.current.get(H),q=0;ee.forEach(Z=>{let I=O.get(Z);q=Math.max(I,q)}),W.push([H,q])});let L=S.current;P().sort((H,ee)=>{var q,Z;let I=H.getAttribute("id"),Q=ee.getAttribute("id");return((q=O.get(Q))!=null?q:0)-((Z=O.get(I))!=null?Z:0)}).forEach(H=>{let ee=H.closest(NN);ee?ee.appendChild(H.parentElement===ee?H:H.closest(`${NN} > *`)):L.appendChild(H.parentElement===L?H:H.closest(`${NN} > *`))}),W.sort((H,ee)=>ee[1]-H[1]).forEach(H=>{let ee=S.current.querySelector(`${I0}[${Od}="${encodeURIComponent(H[0])}"]`);ee==null||ee.parentElement.appendChild(ee)})}function T(){let O=P().find(L=>L.getAttribute("aria-disabled")!=="true"),W=O==null?void 0:O.getAttribute(Od);j.setState("value",W||void 0)}function A(){var O,W,L,H;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let ee=0;for(let q of n.current){let Z=(W=(O=s.current.get(q))==null?void 0:O.value)!=null?W:"",I=(H=(L=s.current.get(q))==null?void 0:L.keywords)!=null?H:[],Q=k(Z,I);r.current.filtered.items.set(q,Q),Q>0&&ee++}for(let[q,Z]of a.current)for(let I of Z)if(r.current.filtered.items.get(I)>0){r.current.filtered.groups.add(q);break}r.current.filtered.count=ee}function B(){var O,W,L;let H=R();H&&(((O=H.parentElement)==null?void 0:O.firstChild)===H&&((L=(W=H.closest(I0))==null?void 0:W.querySelector(kSe))==null||L.scrollIntoView({block:"nearest"})),H.scrollIntoView({block:"nearest"}))}function R(){var O;return(O=S.current)==null?void 0:O.querySelector(`${fD}[aria-selected="true"]`)}function P(){var O;return Array.from((O=S.current)==null?void 0:O.querySelectorAll(s5))}function D(O){let W=P()[O];W&&j.setState("value",W.getAttribute(Od))}function U(O){var W;let L=R(),H=P(),ee=H.findIndex(Z=>Z===L),q=H[ee+O];(W=l.current)!=null&&W.loop&&(q=ee+O<0?H[H.length-1]:ee+O===H.length?H[0]:H[ee+O]),q&&j.setState("value",q.getAttribute(Od))}function M(O){let W=R(),L=W==null?void 0:W.closest(I0),H;for(;L&&!H;)L=O>0?FSe(L,I0):LSe(L,I0),H=L==null?void 0:L.querySelector(s5);H?j.setState("value",H.getAttribute(Od)):U(O)}let F=()=>D(P().length-1),K=O=>{O.preventDefault(),O.metaKey?F():O.altKey?M(1):U(1)},X=O=>{O.preventDefault(),O.metaKey?D(0):O.altKey?M(-1):U(-1)};return x.createElement(fo.div,{ref:t,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:O=>{var W;if((W=b.onKeyDown)==null||W.call(b,O),!O.defaultPrevented)switch(O.key){case"n":case"j":{g&&O.ctrlKey&&K(O);break}case"ArrowDown":{K(O);break}case"p":case"k":{g&&O.ctrlKey&&X(O);break}case"ArrowUp":{X(O);break}case"Home":{O.preventDefault(),D(0);break}case"End":{O.preventDefault(),F();break}case"Enter":if(!O.nativeEvent.isComposing&&O.keyCode!==229){O.preventDefault();let L=R();if(L){let H=new Event(DA);L.dispatchEvent(H)}}}}},x.createElement("label",{"cmdk-label":"",htmlFor:N.inputId,id:N.labelId,style:zSe},c),Bj(e,O=>x.createElement(KX.Provider,{value:j},x.createElement(GX.Provider,{value:N},O))))}),ASe=x.forwardRef((e,t)=>{var r,n;let a=x.useId(),s=x.useRef(null),o=x.useContext(XX),l=by(),c=ZX(e),u=(n=(r=c.current)==null?void 0:r.forceMount)!=null?n:o==null?void 0:o.forceMount;Af(()=>{if(!u)return l.item(a,o==null?void 0:o.id)},[u]);let d=JX(a,s,[e.value,e.children,s],e.keywords),f=hD(),h=Pf(E=>E.value&&E.value===d.current),p=Pf(E=>u||l.filter()===!1?!0:E.search?E.filtered.items.get(a)>0:!0);x.useEffect(()=>{let E=s.current;if(!(!E||e.disabled))return E.addEventListener(DA,v),()=>E.removeEventListener(DA,v)},[p,e.onSelect,e.disabled]);function v(){var E,j;m(),(j=(E=c.current).onSelect)==null||j.call(E,d.current)}function m(){f.setState("value",d.current,!0)}if(!p)return null;let{disabled:g,value:b,onSelect:y,forceMount:w,keywords:_,...S}=e;return x.createElement(fo.div,{ref:Xv([s,t]),...S,id:a,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!h,"data-disabled":!!g,"data-selected":!!h,onPointerMove:g||l.disablePointerSelection?void 0:m,onClick:g?void 0:v},e.children)}),PSe=x.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:a,...s}=e,o=x.useId(),l=x.useRef(null),c=x.useRef(null),u=x.useId(),d=by(),f=Pf(p=>a||d.filter()===!1?!0:p.search?p.filtered.groups.has(o):!0);Af(()=>d.group(o),[]),JX(o,l,[e.value,e.heading,c]);let h=x.useMemo(()=>({id:o,forceMount:a}),[a]);return x.createElement(fo.div,{ref:Xv([l,t]),...s,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&x.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),Bj(e,p=>x.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},x.createElement(XX.Provider,{value:h},p))))}),OSe=x.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,a=x.useRef(null),s=Pf(o=>!o.search);return!r&&!s?null:x.createElement(fo.div,{ref:Xv([a,t]),...n,"cmdk-separator":"",role:"separator"})}),RSe=x.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,a=e.value!=null,s=hD(),o=Pf(d=>d.search),l=Pf(d=>d.value),c=by(),u=x.useMemo(()=>{var d;let f=(d=c.listInnerRef.current)==null?void 0:d.querySelector(`${fD}[${Od}="${encodeURIComponent(l)}"]`);return f==null?void 0:f.getAttribute("id")},[]);return x.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),x.createElement(fo.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":u,id:c.inputId,type:"text",value:a?e.value:o,onChange:d=>{a||s.setState("search",d.target.value),r==null||r(d.target.value)}})}),DSe=x.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...a}=e,s=x.useRef(null),o=x.useRef(null),l=by();return x.useEffect(()=>{if(o.current&&s.current){let c=o.current,u=s.current,d,f=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let h=c.offsetHeight;u.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return f.observe(c),()=>{cancelAnimationFrame(d),f.unobserve(c)}}},[]),x.createElement(fo.div,{ref:Xv([s,t]),...a,"cmdk-list":"",role:"listbox","aria-label":n,id:l.listId},Bj(e,c=>x.createElement("div",{ref:Xv([o,l.listInnerRef]),"cmdk-list-sizer":""},c)))}),MSe=x.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:s,container:o,...l}=e;return x.createElement(jSe,{open:r,onOpenChange:n},x.createElement(ESe,{container:o},x.createElement(NSe,{"cmdk-overlay":"",className:a}),x.createElement(CSe,{"aria-label":e.label,"cmdk-dialog":"",className:s},x.createElement(YX,{ref:t,...l}))))}),ISe=x.forwardRef((e,t)=>Pf(r=>r.filtered.count===0)?x.createElement(fo.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),$Se=x.forwardRef((e,t)=>{let{progress:r,children:n,label:a="Loading...",...s}=e;return x.createElement(fo.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Bj(e,o=>x.createElement("div",{"aria-hidden":!0},o)))}),ai=Object.assign(YX,{List:DSe,Item:ASe,Input:RSe,Group:PSe,Separator:OSe,Dialog:MSe,Empty:ISe,Loading:$Se});function FSe(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function LSe(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function ZX(e){let t=x.useRef(e);return Af(()=>{t.current=e}),t}var Af=typeof window>"u"?x.useEffect:x.useLayoutEffect;function Ih(e){let t=x.useRef();return t.current===void 0&&(t.current=e()),t}function Xv(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}function Pf(e){let t=hD(),r=()=>e(t.snapshot());return x.useSyncExternalStore(t.subscribe,r,r)}function JX(e,t,r,n=[]){let a=x.useRef(),s=by();return Af(()=>{var o;let l=(()=>{var u;for(let d of r){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():a.current}})(),c=n.map(u=>u.trim());s.value(e,l,c),(o=t.current)==null||o.setAttribute(Od,l),a.current=l}),a}var BSe=()=>{let[e,t]=x.useState(),r=Ih(()=>new Map);return Af(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,a)=>{r.current.set(n,a),t({})}};function USe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Bj({asChild:e,children:t},r){return e&&x.isValidElement(t)?x.cloneElement(USe(t),{ref:t.ref},r(t.props.children)):r(t)}var zSe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Uj=x.forwardRef(({className:e,...t},r)=>i.jsx(ai,{ref:r,className:Ue("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));Uj.displayName=ai.displayName;const zj=x.forwardRef(({className:e,...t},r)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(oj,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(ai.Input,{ref:r,className:Ue("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));zj.displayName=ai.Input.displayName;const Wj=x.forwardRef(({className:e,...t},r)=>i.jsx(ai.List,{ref:r,className:Ue("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));Wj.displayName=ai.List.displayName;const Vj=x.forwardRef((e,t)=>i.jsx(ai.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Vj.displayName=ai.Empty.displayName;const Hj=x.forwardRef(({className:e,...t},r)=>i.jsx(ai.Group,{ref:r,className:Ue("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));Hj.displayName=ai.Group.displayName;const WSe=x.forwardRef(({className:e,...t},r)=>i.jsx(ai.Separator,{ref:r,className:Ue("-mx-1 h-px bg-border",e),...t}));WSe.displayName=ai.Separator.displayName;const qj=x.forwardRef(({className:e,...t},r)=>i.jsx(ai.Item,{ref:r,className:Ue("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));qj.displayName=ai.Item.displayName;function $0(e,t){if(e.one!==void 0&&t===1)return e.one;const r=t%10,n=t%100;return r===1&&n!==11?e.singularNominative.replace("{{count}}",String(t)):r>=2&&r<=4&&(n<10||n>20)?e.singularGenitive.replace("{{count}}",String(t)):e.pluralGenitive.replace("{{count}}",String(t))}function hs(e){return(t,r)=>r!=null&&r.addSuffix?r.comparison&&r.comparison>0?e.future?$0(e.future,t):"через "+$0(e.regular,t):e.past?$0(e.past,t):$0(e.regular,t)+" назад":$0(e.regular,t)}const VSe={lessThanXSeconds:hs({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:hs({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:(e,t)=>t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"через полминуты":"полминуты назад":"полминуты",lessThanXMinutes:hs({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:hs({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:hs({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:hs({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:hs({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:hs({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:hs({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:hs({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:hs({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:hs({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:hs({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:hs({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:hs({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},HSe=(e,t,r)=>VSe[e](t,r),qSe={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},GSe={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},KSe={any:"{{date}}, {{time}}"},XSe={date:vm({formats:qSe,defaultWidth:"full"}),time:vm({formats:GSe,defaultWidth:"full"}),dateTime:vm({formats:KSe,defaultWidth:"any"})},mD=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function YSe(e){const t=mD[e];switch(e){case 0:return"'в прошлое "+t+" в' p";case 1:case 2:case 4:return"'в прошлый "+t+" в' p";case 3:case 5:case 6:return"'в прошлую "+t+" в' p"}}function i5(e){const t=mD[e];return e===2?"'во "+t+" в' p":"'в "+t+" в' p"}function ZSe(e){const t=mD[e];switch(e){case 0:return"'в следующее "+t+" в' p";case 1:case 2:case 4:return"'в следующий "+t+" в' p";case 3:case 5:case 6:return"'в следующую "+t+" в' p"}}const JSe={lastWeek:(e,t,r)=>{const n=e.getDay();return fF(e,t,r)?i5(n):YSe(n)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:(e,t,r)=>{const n=e.getDay();return fF(e,t,r)?i5(n):ZSe(n)},other:"P"},QSe=(e,t,r,n)=>{const a=JSe[e];return typeof a=="function"?a(t,r,n):a},eje={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},tje={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},rje={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},nje={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},aje={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},sje={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},ije={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},oje=(e,t)=>{const r=Number(e),n=t==null?void 0:t.unit;let a;return n==="date"?a="-е":n==="week"||n==="minute"||n==="second"?a="-я":a="-й",r+a},lje={ordinalNumber:oje,era:xl({values:eje,defaultWidth:"wide"}),quarter:xl({values:tje,defaultWidth:"wide",argumentCallback:e=>e-1}),month:xl({values:rje,defaultWidth:"wide",formattingValues:nje,defaultFormattingWidth:"wide"}),day:xl({values:aje,defaultWidth:"wide"}),dayPeriod:xl({values:sje,defaultWidth:"any",formattingValues:ije,defaultFormattingWidth:"wide"})},cje=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,uje=/\d+/i,dje={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},fje={any:[/^д/i,/^н/i]},hje={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},mje={any:[/1/i,/2/i,/3/i,/4/i]},pje={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},gje={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},vje={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},xje={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},yje={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},bje={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},wje={ordinalNumber:jG({matchPattern:cje,parsePattern:uje,valueCallback:e=>parseInt(e,10)}),era:yl({matchPatterns:dje,defaultMatchWidth:"wide",parsePatterns:fje,defaultParseWidth:"any"}),quarter:yl({matchPatterns:hje,defaultMatchWidth:"wide",parsePatterns:mje,defaultParseWidth:"any",valueCallback:e=>e+1}),month:yl({matchPatterns:pje,defaultMatchWidth:"wide",parsePatterns:gje,defaultParseWidth:"any"}),day:yl({matchPatterns:vje,defaultMatchWidth:"wide",parsePatterns:xje,defaultParseWidth:"any"}),dayPeriod:yl({matchPatterns:yje,defaultMatchWidth:"wide",parsePatterns:bje,defaultParseWidth:"any"})},Da={code:"ru",formatDistance:HSe,formatLong:XSe,formatRelative:QSe,localize:lje,match:wje,options:{weekStartsOn:1,firstWeekContainsDate:1}};var Yt=function(){return Yt=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Yt.apply(this,arguments)};function _je(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function QX(e,t,r){for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function wy(e){return e.mode==="multiple"}function _y(e){return e.mode==="range"}function Gj(e){return e.mode==="single"}var Sje={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function jje(e,t){return Me(e,"LLLL y",t)}function Eje(e,t){return Me(e,"d",t)}function Nje(e,t){return Me(e,"LLLL",t)}function Cje(e){return"".concat(e)}function kje(e,t){return Me(e,"cccccc",t)}function Tje(e,t){return Me(e,"yyyy",t)}var Aje=Object.freeze({__proto__:null,formatCaption:jje,formatDay:Eje,formatMonthCaption:Nje,formatWeekNumber:Cje,formatWeekdayName:kje,formatYearCaption:Tje}),Pje=function(e,t,r){return Me(e,"do MMMM (EEEE)",r)},Oje=function(){return"Month: "},Rje=function(){return"Go to next month"},Dje=function(){return"Go to previous month"},Mje=function(e,t){return Me(e,"cccc",t)},Ije=function(e){return"Week n. ".concat(e)},$je=function(){return"Year: "},Fje=Object.freeze({__proto__:null,labelDay:Pje,labelMonthDropdown:Oje,labelNext:Rje,labelPrevious:Dje,labelWeekNumber:Ije,labelWeekday:Mje,labelYearDropdown:$je});function Lje(){var e="buttons",t=Sje,r=EG,n={},a={},s=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:Aje,labels:Fje,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:s,styles:o,today:l,mode:"default"}}function Bje(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,s=e.fromDate,o=e.toDate;return n?s=Cs(n):t&&(s=new Date(t,0,1)),a?o=jj(a):r&&(o=new Date(r,11,31)),{fromDate:s?ep(s):void 0,toDate:o?ep(o):void 0}}var eY=x.createContext(void 0);function Uje(e){var t,r=e.initialProps,n=Lje(),a=Bje(r),s=a.fromDate,o=a.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!s||!o)&&(l="buttons");var c;(Gj(r)||wy(r)||_y(r))&&(c=r.onSelect);var u=Yt(Yt(Yt({},n),r),{captionLayout:l,classNames:Yt(Yt({},n.classNames),r.classNames),components:Yt({},r.components),formatters:Yt(Yt({},n.formatters),r.formatters),fromDate:s,labels:Yt(Yt({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Yt(Yt({},n.modifiers),r.modifiers),modifiersClassNames:Yt(Yt({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Yt(Yt({},n.styles),r.styles),toDate:o});return i.jsx(eY.Provider,{value:u,children:e.children})}function fn(){var e=x.useContext(eY);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function tY(e){var t=fn(),r=t.locale,n=t.classNames,a=t.styles,s=t.formatters.formatCaption;return i.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:r})})}function zje(e){return i.jsx("svg",Yt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:i.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function rY(e){var t,r,n=e.onChange,a=e.value,s=e.children,o=e.caption,l=e.className,c=e.style,u=fn(),d=(r=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:zje;return i.jsxs("div",{className:l,style:c,children:[i.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),i.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:n,children:s}),i.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,i.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function Wje(e){var t,r=fn(),n=r.fromDate,a=r.toDate,s=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return i.jsx(i.Fragment,{});if(!a)return i.jsx(i.Fragment,{});var f=[];if(Gxe(n,a))for(var h=Cs(n),p=n.getMonth();p<=a.getMonth();p++)f.push(iN(h,p));else for(var h=Cs(new Date),p=0;p<=11;p++)f.push(iN(h,p));var v=function(g){var b=Number(g.target.value),y=iN(Cs(e.displayMonth),b);e.onChange(y)},m=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:rY;return i.jsx(m,{name:"months","aria-label":d(),className:c.dropdown_month,style:s.dropdown_month,onChange:v,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:f.map(function(g){return i.jsx("option",{value:g.getMonth(),children:l(g,{locale:o})},g.getMonth())})})}function Vje(e){var t,r=e.displayMonth,n=fn(),a=n.fromDate,s=n.toDate,o=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,h=[];if(!a)return i.jsx(i.Fragment,{});if(!s)return i.jsx(i.Fragment,{});for(var p=a.getFullYear(),v=s.getFullYear(),m=p;m<=v;m++)h.push(hF(_G(new Date),m));var g=function(y){var w=hF(Cs(r),Number(y.target.value));e.onChange(w)},b=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:rY;return i.jsx(b,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:g,value:r.getFullYear(),caption:d(r,{locale:o}),children:h.map(function(y){return i.jsx("option",{value:y.getFullYear(),children:d(y,{locale:o})},y.getFullYear())})})}function Hje(e,t){var r=x.useState(e),n=r[0],a=r[1],s=t===void 0?n:t;return[s,a]}function qje(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,s=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(s&&Av(s,a)<0){var u=-1*(c-1);a=Ti(s,u)}return o&&Av(a,o)<0&&(a=o),Cs(a)}function Gje(){var e=fn(),t=qje(e),r=Hje(t,e.month),n=r[0],a=r[1],s=function(o){var l;if(!e.disableNavigation){var c=Cs(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[n,s]}function Kje(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=Cs(e),s=Cs(Ti(a,n)),o=Av(s,a),l=[],c=0;c<o;c++){var u=Ti(a,c);l.push(u)}return r&&(l=l.reverse()),l}function Xje(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,s=a===void 0?1:a,o=n?s:1,l=Cs(e);if(!r)return Ti(l,o);var c=Av(r,e);if(!(c<s))return Ti(l,o)}}function Yje(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,s=a===void 0?1:a,o=n?s:1,l=Cs(e);if(!r)return Ti(l,-o);var c=Av(l,r);if(!(c<=0))return Ti(l,-o)}}var nY=x.createContext(void 0);function Zje(e){var t=fn(),r=Gje(),n=r[0],a=r[1],s=Kje(n,t),o=Xje(n,t),l=Yje(n,t),c=function(f){return s.some(function(h){return L4(f,h)})},u=function(f,h){c(f)||(h&&ef(f,h)?a(Ti(f,1+t.numberOfMonths*-1)):a(f))},d={currentMonth:n,displayMonths:s,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return i.jsx(nY.Provider,{value:d,children:e.children})}function e0(){var e=x.useContext(nY);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function o5(e){var t,r=fn(),n=r.classNames,a=r.styles,s=r.components,o=e0().goToMonth,l=function(d){o(Ti(d,e.displayIndex?-e.displayIndex:0))},c=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:tY,u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth});return i.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[i.jsx("div",{className:n.vhidden,children:u}),i.jsx(Wje,{onChange:l,displayMonth:e.displayMonth}),i.jsx(Vje,{onChange:l,displayMonth:e.displayMonth})]})}function Jje(e){return i.jsx("svg",Yt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Qje(e){return i.jsx("svg",Yt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var c_=x.forwardRef(function(e,t){var r=fn(),n=r.classNames,a=r.styles,s=[n.button_reset,n.button];e.className&&s.push(e.className);var o=s.join(" "),l=Yt(Yt({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),i.jsx("button",Yt({},e,{ref:t,type:"button",className:o,style:l}))});function e2e(e){var t,r,n=fn(),a=n.dir,s=n.locale,o=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return i.jsx(i.Fragment,{});var h=u(e.previousMonth,{locale:s}),p=[o.nav_button,o.nav_button_previous].join(" "),v=d(e.nextMonth,{locale:s}),m=[o.nav_button,o.nav_button_next].join(" "),g=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:Qje,b=(r=f==null?void 0:f.IconLeft)!==null&&r!==void 0?r:Jje;return i.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&i.jsx(c_,{name:"previous-month","aria-label":h,className:p,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?i.jsx(g,{className:o.nav_icon,style:l.nav_icon}):i.jsx(b,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&i.jsx(c_,{name:"next-month","aria-label":v,className:m,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?i.jsx(b,{className:o.nav_icon,style:l.nav_icon}):i.jsx(g,{className:o.nav_icon,style:l.nav_icon})})]})}function l5(e){var t=fn().numberOfMonths,r=e0(),n=r.previousMonth,a=r.nextMonth,s=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(v){return L4(e.displayMonth,v)}),c=l===0,u=l===o.length-1,d=t>1&&(c||!u),f=t>1&&(u||!c),h=function(){n&&s(n)},p=function(){a&&s(a)};return i.jsx(e2e,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:f,nextMonth:a,previousMonth:n,onPreviousClick:h,onNextClick:p})}function t2e(e){var t,r=fn(),n=r.classNames,a=r.disableNavigation,s=r.styles,o=r.captionLayout,l=r.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:tY,u;return a?u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=i.jsx(o5,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=i.jsxs(i.Fragment,{children:[i.jsx(o5,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),i.jsx(l5,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=i.jsxs(i.Fragment,{children:[i.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(l5,{displayMonth:e.displayMonth,id:e.id})]}),i.jsx("div",{className:n.caption,style:s.caption,children:u})}function r2e(e){var t=fn(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?i.jsx("tfoot",{className:a,style:n.tfoot,children:i.jsx("tr",{children:i.jsx("td",{colSpan:8,children:r})})}):i.jsx(i.Fragment,{})}function n2e(e,t,r){for(var n=r?xf(new Date):Vn(new Date,{locale:e,weekStartsOn:t}),a=[],s=0;s<7;s++){var o=bn(n,s);a.push(o)}return a}function a2e(){var e=fn(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,s=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=n2e(a,s,o);return i.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&i.jsx("td",{style:r.head_cell,className:t.head_cell}),u.map(function(d,f){return i.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(d,{locale:a}),children:l(d,{locale:a})},f)})]})}function s2e(){var e,t=fn(),r=t.classNames,n=t.styles,a=t.components,s=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:a2e;return i.jsx("thead",{style:n.head,className:r.head,children:i.jsx(s,{})})}function i2e(e){var t=fn(),r=t.locale,n=t.formatters.formatDay;return i.jsx(i.Fragment,{children:n(e.date,{locale:r})})}var pD=x.createContext(void 0);function o2e(e){if(!wy(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return i.jsx(pD.Provider,{value:t,children:e.children})}return i.jsx(l2e,{initialProps:e.initialProps,children:e.children})}function l2e(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,s=t.max,o=function(u,d,f){var h,p;(h=t.onDayClick)===null||h===void 0||h.call(t,u,d,f);var v=!!(d.selected&&a&&(n==null?void 0:n.length)===a);if(!v){var m=!!(!d.selected&&s&&(n==null?void 0:n.length)===s);if(!m){var g=n?QX([],n):[];if(d.selected){var b=g.findIndex(function(y){return Ra(u,y)});g.splice(b,1)}else g.push(u);(p=t.onSelect)===null||p===void 0||p.call(t,g,u,d,f)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=s&&n.length>s-1,f=n.some(function(h){return Ra(h,u)});return!!(d&&!f)});var c={selected:n,onDayClick:o,modifiers:l};return i.jsx(pD.Provider,{value:c,children:r})}function gD(){var e=x.useContext(pD);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function c2e(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?Ra(a,e)&&Ra(n,e)?void 0:Ra(a,e)?{from:a,to:void 0}:Ra(n,e)?void 0:Du(n,e)?{from:e,to:a}:{from:n,to:e}:a?Du(e,a)?{from:a,to:e}:{from:e,to:a}:n?ef(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var vD=x.createContext(void 0);function u2e(e){if(!_y(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return i.jsx(vD.Provider,{value:t,children:e.children})}return i.jsx(d2e,{initialProps:e.initialProps,children:e.children})}function d2e(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},s=a.from,o=a.to,l=t.min,c=t.max,u=function(p,v,m){var g,b;(g=t.onDayClick)===null||g===void 0||g.call(t,p,v,m);var y=c2e(p,n);(b=t.onSelect)===null||b===void 0||b.call(t,y,p,v,m)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(d.range_start=[s],o?(d.range_end=[o],Ra(s,o)||(d.range_middle=[{after:s,before:o}])):d.range_end=[s]):o&&(d.range_start=[o],d.range_end=[o]),l&&(s&&!o&&d.disabled.push({after:tf(s,l-1),before:bn(s,l-1)}),s&&o&&d.disabled.push({after:s,before:bn(s,l-1)}),!s&&o&&d.disabled.push({after:tf(o,l-1),before:bn(o,l-1)})),c){if(s&&!o&&(d.disabled.push({before:bn(s,-c+1)}),d.disabled.push({after:bn(s,c-1)})),s&&o){var f=Lo(o,s)+1,h=c-f;d.disabled.push({before:tf(s,h)}),d.disabled.push({after:bn(o,h)})}!s&&o&&(d.disabled.push({before:bn(o,-c+1)}),d.disabled.push({after:bn(o,c-1)}))}return i.jsx(vD.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function xD(){var e=x.useContext(vD);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function q1(e){return Array.isArray(e)?QX([],e):e!==void 0?[e]:[]}function f2e(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=q1(a)}),t}var tl;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(tl||(tl={}));var h2e=tl.Selected,zl=tl.Disabled,m2e=tl.Hidden,p2e=tl.Today,CN=tl.RangeEnd,kN=tl.RangeMiddle,TN=tl.RangeStart,g2e=tl.Outside;function v2e(e,t,r){var n,a=(n={},n[h2e]=q1(e.selected),n[zl]=q1(e.disabled),n[m2e]=q1(e.hidden),n[p2e]=[e.today],n[CN]=[],n[kN]=[],n[TN]=[],n[g2e]=[],n);return e.fromDate&&a[zl].push({before:e.fromDate}),e.toDate&&a[zl].push({after:e.toDate}),wy(e)?a[zl]=a[zl].concat(t.modifiers[zl]):_y(e)&&(a[zl]=a[zl].concat(r.modifiers[zl]),a[TN]=r.modifiers[TN],a[kN]=r.modifiers[kN],a[CN]=r.modifiers[CN]),a}var aY=x.createContext(void 0);function x2e(e){var t=fn(),r=gD(),n=xD(),a=v2e(t,r,n),s=f2e(t.modifiers),o=Yt(Yt({},a),s);return i.jsx(aY.Provider,{value:o,children:e.children})}function sY(){var e=x.useContext(aY);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function y2e(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function b2e(e){return!!(e&&typeof e=="object"&&"from"in e)}function w2e(e){return!!(e&&typeof e=="object"&&"after"in e)}function _2e(e){return!!(e&&typeof e=="object"&&"before"in e)}function S2e(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function j2e(e,t){var r,n=t.from,a=t.to;if(n&&a){var s=Lo(a,n)<0;s&&(r=[a,n],n=r[0],a=r[1]);var o=Lo(e,n)>=0&&Lo(a,e)>=0;return o}return a?Ra(a,e):n?Ra(n,e):!1}function E2e(e){return F4(e)}function N2e(e){return Array.isArray(e)&&e.every(F4)}function C2e(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(E2e(r))return Ra(e,r);if(N2e(r))return r.includes(e);if(b2e(r))return j2e(e,r);if(S2e(r))return r.dayOfWeek.includes(e.getDay());if(y2e(r)){var n=Lo(r.before,e),a=Lo(r.after,e),s=n>0,o=a<0,l=Du(r.before,r.after);return l?o&&s:s||o}return w2e(r)?Lo(e,r.after)>0:_2e(r)?Lo(r.before,e)>0:typeof r=="function"?r(e):!1})}function yD(e,t,r){var n=Object.keys(t).reduce(function(s,o){var l=t[o];return C2e(e,l)&&s.push(o),s},[]),a={};return n.forEach(function(s){return a[s]=!0}),r&&!L4(e,r)&&(a.outside=!0),a}function k2e(e,t){for(var r=Cs(e[0]),n=jj(e[e.length-1]),a,s,o=r;o<=n;){var l=yD(o,t),c=!l.disabled&&!l.hidden;if(!c){o=bn(o,1);continue}if(l.selected)return o;l.today&&!s&&(s=o),a||(a=o),o=bn(o,1)}return s||a}var T2e=365;function iY(e,t){var r=t.moveBy,n=t.direction,a=t.context,s=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,u=a.fromDate,d=a.toDate,f=a.locale,h={day:bn,week:uA,month:Ti,year:Vve,startOfWeek:function(g){return a.ISOWeek?xf(g):Vn(g,{locale:f,weekStartsOn:c})},endOfWeek:function(g){return a.ISOWeek?SG(g):yf(g,{locale:f,weekStartsOn:c})}},p=h[r](e,n==="after"?1:-1);n==="before"&&u?p=Hve([u,p]):n==="after"&&d&&(p=qve([d,p]));var v=!0;if(s){var m=yD(p,s);v=!m.disabled&&!m.hidden}return v?p:l.count>T2e?l.lastFocused:iY(p,{moveBy:r,direction:n,context:a,modifiers:s,retry:Yt(Yt({},l),{count:l.count+1})})}var oY=x.createContext(void 0);function A2e(e){var t=e0(),r=sY(),n=x.useState(),a=n[0],s=n[1],o=x.useState(),l=o[0],c=o[1],u=k2e(t.displayMonths,r),d=a??(l&&t.isDateDisplayed(l))?l:u,f=function(){c(a),s(void 0)},h=function(g){s(g)},p=fn(),v=function(g,b){if(a){var y=iY(a,{moveBy:g,direction:b,context:p,modifiers:r});Ra(a,y)||(t.goToDate(y,a),h(y))}},m={focusedDay:a,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return v("day","after")},focusDayBefore:function(){return v("day","before")},focusWeekAfter:function(){return v("week","after")},focusWeekBefore:function(){return v("week","before")},focusMonthBefore:function(){return v("month","before")},focusMonthAfter:function(){return v("month","after")},focusYearBefore:function(){return v("year","before")},focusYearAfter:function(){return v("year","after")},focusStartOfWeek:function(){return v("startOfWeek","before")},focusEndOfWeek:function(){return v("endOfWeek","after")}};return i.jsx(oY.Provider,{value:m,children:e.children})}function bD(){var e=x.useContext(oY);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function P2e(e,t){var r=sY(),n=yD(e,r,t);return n}var wD=x.createContext(void 0);function O2e(e){if(!Gj(e.initialProps)){var t={selected:void 0};return i.jsx(wD.Provider,{value:t,children:e.children})}return i.jsx(R2e,{initialProps:e.initialProps,children:e.children})}function R2e(e){var t=e.initialProps,r=e.children,n=function(s,o,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,s,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,s,o,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,s,s,o,l)},a={selected:t.selected,onDayClick:n};return i.jsx(wD.Provider,{value:a,children:r})}function lY(){var e=x.useContext(wD);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function D2e(e,t){var r=fn(),n=lY(),a=gD(),s=xD(),o=bD(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,h=o.focus,p=o.focusMonthBefore,v=o.focusMonthAfter,m=o.focusYearBefore,g=o.focusYearAfter,b=o.focusStartOfWeek,y=o.focusEndOfWeek,w=function(U){var M,F,K,X;Gj(r)?(M=n.onDayClick)===null||M===void 0||M.call(n,e,t,U):wy(r)?(F=a.onDayClick)===null||F===void 0||F.call(a,e,t,U):_y(r)?(K=s.onDayClick)===null||K===void 0||K.call(s,e,t,U):(X=r.onDayClick)===null||X===void 0||X.call(r,e,t,U)},_=function(U){var M;h(e),(M=r.onDayFocus)===null||M===void 0||M.call(r,e,t,U)},S=function(U){var M;f(),(M=r.onDayBlur)===null||M===void 0||M.call(r,e,t,U)},E=function(U){var M;(M=r.onDayMouseEnter)===null||M===void 0||M.call(r,e,t,U)},j=function(U){var M;(M=r.onDayMouseLeave)===null||M===void 0||M.call(r,e,t,U)},N=function(U){var M;(M=r.onDayPointerEnter)===null||M===void 0||M.call(r,e,t,U)},k=function(U){var M;(M=r.onDayPointerLeave)===null||M===void 0||M.call(r,e,t,U)},C=function(U){var M;(M=r.onDayTouchCancel)===null||M===void 0||M.call(r,e,t,U)},T=function(U){var M;(M=r.onDayTouchEnd)===null||M===void 0||M.call(r,e,t,U)},A=function(U){var M;(M=r.onDayTouchMove)===null||M===void 0||M.call(r,e,t,U)},B=function(U){var M;(M=r.onDayTouchStart)===null||M===void 0||M.call(r,e,t,U)},R=function(U){var M;(M=r.onDayKeyUp)===null||M===void 0||M.call(r,e,t,U)},P=function(U){var M;switch(U.key){case"ArrowLeft":U.preventDefault(),U.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":U.preventDefault(),U.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":U.preventDefault(),U.stopPropagation(),u();break;case"ArrowUp":U.preventDefault(),U.stopPropagation(),d();break;case"PageUp":U.preventDefault(),U.stopPropagation(),U.shiftKey?m():p();break;case"PageDown":U.preventDefault(),U.stopPropagation(),U.shiftKey?g():v();break;case"Home":U.preventDefault(),U.stopPropagation(),b();break;case"End":U.preventDefault(),U.stopPropagation(),y();break}(M=r.onDayKeyDown)===null||M===void 0||M.call(r,e,t,U)},D={onClick:w,onFocus:_,onBlur:S,onKeyDown:P,onKeyUp:R,onMouseEnter:E,onMouseLeave:j,onPointerEnter:N,onPointerLeave:k,onTouchCancel:C,onTouchEnd:T,onTouchMove:A,onTouchStart:B};return D}function M2e(){var e=fn(),t=lY(),r=gD(),n=xD(),a=Gj(e)?t.selected:wy(e)?r.selected:_y(e)?n.selected:void 0;return a}function I2e(e){return Object.values(tl).includes(e)}function $2e(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(I2e(n)){var s=e.classNames["day_".concat(n)];s&&r.push(s)}}),r}function F2e(e,t){var r=Yt({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=Yt(Yt({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function L2e(e,t,r){var n,a,s,o=fn(),l=bD(),c=P2e(e,t),u=D2e(e,c),d=M2e(),f=!!(o.onDayClick||o.mode!=="default");x.useEffect(function(){var E;c.outside||l.focusedDay&&f&&Ra(l.focusedDay,e)&&((E=r.current)===null||E===void 0||E.focus())},[l.focusedDay,e,r,f,c.outside]);var h=$2e(o,c).join(" "),p=F2e(o,c),v=!!(c.outside&&!o.showOutsideDays||c.hidden),m=(s=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&s!==void 0?s:i2e,g=i.jsx(m,{date:e,displayMonth:t,activeModifiers:c}),b={style:p,className:h,children:g,role:"gridcell"},y=l.focusTarget&&Ra(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&Ra(l.focusedDay,e),_=Yt(Yt(Yt({},b),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=w||y?0:-1,n)),u),S={isButton:f,isHidden:v,activeModifiers:c,selectedDays:d,buttonProps:_,divProps:b};return S}function B2e(e){var t=x.useRef(null),r=L2e(e.date,e.displayMonth,t);return r.isHidden?i.jsx("div",{role:"gridcell"}):r.isButton?i.jsx(c_,Yt({name:"day",ref:t},r.buttonProps)):i.jsx("div",Yt({},r.divProps))}function U2e(e){var t=e.number,r=e.dates,n=fn(),a=n.onWeekNumberClick,s=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!a)return i.jsx("span",{className:o.weeknumber,style:s.weeknumber,children:d});var f=c(Number(t),{locale:l}),h=function(p){a(t,r,p)};return i.jsx(c_,{name:"week-number","aria-label":f,className:o.weeknumber,style:s.weeknumber,onClick:h,children:d})}function z2e(e){var t,r,n=fn(),a=n.styles,s=n.classNames,o=n.showWeekNumber,l=n.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:B2e,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:U2e,d;return o&&(d=i.jsx("td",{className:s.cell,style:a.cell,children:i.jsx(u,{number:e.weekNumber,dates:e.dates})})),i.jsxs("tr",{className:s.row,style:a.row,children:[d,e.dates.map(function(f){return i.jsx("td",{className:s.cell,style:a.cell,role:"presentation",children:i.jsx(c,{displayMonth:e.displayMonth,date:f})},Vxe(f))})]})}function c5(e,t,r){for(var n=r!=null&&r.ISOWeek?SG(t):yf(t,r),a=r!=null&&r.ISOWeek?xf(e):Vn(e,r),s=Lo(n,a),o=[],l=0;l<=s;l++)o.push(bn(a,l));var c=o.reduce(function(u,d){var f=r!=null&&r.ISOWeek?NG(d):kG(d,r),h=u.find(function(p){return p.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function W2e(e,t){var r=c5(Cs(e),jj(e),t);if(t!=null&&t.useFixedWeeks){var n=qxe(e,t);if(n<6){var a=r[r.length-1],s=a.dates[a.dates.length-1],o=uA(s,6-n),l=c5(uA(s,1),o,t);r.push.apply(r,l)}}return r}function V2e(e){var t,r,n,a=fn(),s=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,d=a.components,f=a.weekStartsOn,h=a.firstWeekContainsDate,p=a.ISOWeek,v=W2e(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:s,weekStartsOn:f,firstWeekContainsDate:h}),m=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:s2e,g=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:z2e,b=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:r2e;return i.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&i.jsx(m,{}),i.jsx("tbody",{className:o.tbody,style:l.tbody,children:v.map(function(y){return i.jsx(g,{displayMonth:e.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),i.jsx(b,{displayMonth:e.displayMonth})]})}function H2e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var q2e=H2e()?x.useLayoutEffect:x.useEffect,AN=!1,G2e=0;function u5(){return"react-day-picker-".concat(++G2e)}function K2e(e){var t,r=e??(AN?u5():null),n=x.useState(r),a=n[0],s=n[1];return q2e(function(){a===null&&s(u5())},[]),x.useEffect(function(){AN===!1&&(AN=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function X2e(e){var t,r,n=fn(),a=n.dir,s=n.classNames,o=n.styles,l=n.components,c=e0().displayMonths,u=K2e(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[s.month],h=o.month,p=e.displayIndex===0,v=e.displayIndex===c.length-1,m=!p&&!v;a==="rtl"&&(t=[p,v],v=t[0],p=t[1]),p&&(f.push(s.caption_start),h=Yt(Yt({},h),o.caption_start)),v&&(f.push(s.caption_end),h=Yt(Yt({},h),o.caption_end)),m&&(f.push(s.caption_between),h=Yt(Yt({},h),o.caption_between));var g=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:t2e;return i.jsxs("div",{className:f.join(" "),style:h,children:[i.jsx(g,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(V2e,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function Y2e(e){var t=fn(),r=t.classNames,n=t.styles;return i.jsx("div",{className:r.months,style:n.months,children:e.children})}function Z2e(e){var t,r,n=e.initialProps,a=fn(),s=bD(),o=e0(),l=x.useState(!1),c=l[0],u=l[1];x.useEffect(function(){a.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),u(!0)))},[a.initialFocus,c,s.focus,s.focusTarget,s]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var f=Yt(Yt({},a.styles.root),a.style),h=Object.keys(n).filter(function(v){return v.startsWith("data-")}).reduce(function(v,m){var g;return Yt(Yt({},v),(g={},g[m]=n[m],g))},{}),p=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:Y2e;return i.jsx("div",Yt({className:d.join(" "),style:f,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:i.jsx(p,{children:o.displayMonths.map(function(v,m){return i.jsx(X2e,{displayIndex:m,displayMonth:v},m)})})}))}function J2e(e){var t=e.children,r=_je(e,["children"]);return i.jsx(Uje,{initialProps:r,children:i.jsx(Zje,{children:i.jsx(O2e,{initialProps:r,children:i.jsx(o2e,{initialProps:r,children:i.jsx(u2e,{initialProps:r,children:i.jsx(x2e,{children:i.jsx(A2e,{children:t})})})})})})})}function Q2e(e){return i.jsx(J2e,Yt({},e,{children:i.jsx(Z2e,{initialProps:e})}))}const eEe=e=>{const{goToMonth:t,nextMonth:r,previousMonth:n}=e0();return i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("button",{type:"button",disabled:!n,onClick:()=>n&&t(n),className:"h-7 w-7 flex items-center justify-center bg-transparent p-0 opacity-50 hover:opacity-100 disabled:opacity-20","aria-label":"Предыдущий месяц",children:i.jsx(_v,{className:"h-4 w-4"})}),i.jsx("span",{className:"font-bold text-lg select-none",children:Me(e.displayMonth,"LLLL yyyy",{locale:Da})}),i.jsx("button",{type:"button",disabled:!r,onClick:()=>r&&t(r),className:"h-7 w-7 flex items-center justify-center bg-transparent p-0 opacity-50 hover:opacity-100 disabled:opacity-20","aria-label":"Следующий месяц",children:i.jsx(Ou,{className:"h-4 w-4"})})]})};function Rc({className:e,classNames:t,showOutsideDays:r=!0,size:n="sm",...a}){const s=n==="lg"?"w-[420px]":"w-80";return i.jsx(Q2e,{showOutsideDays:r,locale:Da,weekStartsOn:1,className:Ue("p-3 block",s,e),classNames:{months:"flex flex-col w-full",month:"w-full",caption:Ue("mb-2",n==="lg"?"mb-4":"mb-2"),caption_label:Ue("font-bold text-gray-900",n==="lg"?"text-2xl":"text-lg"),table:"w-full border-collapse",head_row:"flex",head_cell:Ue("text-gray-500 font-medium uppercase text-center",n==="lg"?"w-14 text-xl":"w-10 text-base"),row:"flex w-full mt-1",cell:Ue("text-center p-0 relative",n==="lg"?"h-14 w-14 text-lg":"h-10 w-10 text-base"),day:Ue(ty({variant:"ghost"}),"transition-colors font-medium rounded-xl",n==="lg"?"h-14 w-14":"h-10 w-10","hover:bg-beauty-100 aria-selected:opacity-100"),day_selected:"bg-beauty-500 text-white font-bold rounded-xl",day_today:"border border-beauty-500 text-beauty-500 font-bold",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"bg-beauty-100",day_hidden:"invisible",...t},components:{Caption:eEe},...a})}Rc.displayName="Calendar";function cY(e,t,r=[]){return r.length>=t?e(...r.slice(0,t).reverse()):(...n)=>cY(e,t,r.concat(n))}const og=cY(Me,3),ks=x.forwardRef(({className:e,...t},r)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:r,className:Ue("w-full caption-bottom text-sm",e),...t})}));ks.displayName="Table";const Ts=x.forwardRef(({className:e,...t},r)=>i.jsx("thead",{ref:r,className:Ue("[&_tr]:border-b",e),...t}));Ts.displayName="TableHeader";const As=x.forwardRef(({className:e,...t},r)=>i.jsx("tbody",{ref:r,className:Ue("[&_tr:last-child]:border-0",e),...t}));As.displayName="TableBody";const tEe=x.forwardRef(({className:e,...t},r)=>i.jsx("tfoot",{ref:r,className:Ue("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));tEe.displayName="TableFooter";const Lr=x.forwardRef(({className:e,...t},r)=>i.jsx("tr",{ref:r,className:Ue("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Lr.displayName="TableRow";const pt=x.forwardRef(({className:e,...t},r)=>i.jsx("th",{ref:r,className:Ue("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));pt.displayName="TableHead";const dt=x.forwardRef(({className:e,...t},r)=>i.jsx("td",{ref:r,className:Ue("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));dt.displayName="TableCell";const rEe=x.forwardRef(({className:e,...t},r)=>i.jsx("caption",{ref:r,className:Ue("mt-4 text-sm text-muted-foreground",e),...t}));rEe.displayName="TableCaption";function d5(e,[t,r]){return Math.min(r,Math.max(t,e))}var nEe=x.createContext(void 0);function Kj(e){const t=x.useContext(nEe);return e||t||"ltr"}var uY=x.forwardRef((e,t)=>{const{children:r,...n}=e,a=x.Children.toArray(r),s=a.find(sEe);if(s){const o=s.props.children,l=a.map(c=>c===s?x.Children.count(o)>1?x.Children.only(null):x.isValidElement(o)?o.props.children:null:c);return i.jsx(MA,{...n,ref:t,children:x.isValidElement(o)?x.cloneElement(o,void 0,l):null})}return i.jsx(MA,{...n,ref:t,children:r})});uY.displayName="Slot";var MA=x.forwardRef((e,t)=>{const{children:r,...n}=e;if(x.isValidElement(r)){const a=oEe(r);return x.cloneElement(r,{...iEe(n,r.props),ref:t?ad(t,a):a})}return x.Children.count(r)>1?x.Children.only(null):null});MA.displayName="SlotClone";var aEe=({children:e})=>i.jsx(i.Fragment,{children:e});function sEe(e){return x.isValidElement(e)&&e.type===aEe}function iEe(e,t){const r={...t};for(const n in t){const a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...l)=>{s(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...s}:n==="className"&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}function oEe(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Xj(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var lEe=[" ","Enter","ArrowUp","ArrowDown"],cEe=[" ","Enter"],Sy="Select",[Yj,Zj,uEe]=nj(Sy),[t0,Glt]=lo(Sy,[uEe,Vp]),Jj=Vp(),[dEe,ld]=t0(Sy),[fEe,hEe]=t0(Sy),dY=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:s,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:p,form:v}=e,m=Jj(t),[g,b]=x.useState(null),[y,w]=x.useState(null),[_,S]=x.useState(!1),E=Kj(u),[j=!1,N]=Ci({prop:n,defaultProp:a,onChange:s}),[k,C]=Ci({prop:o,defaultProp:l,onChange:c}),T=x.useRef(null),A=g?v||!!g.closest("form"):!0,[B,R]=x.useState(new Set),P=Array.from(B).map(D=>D.props.value).join(";");return i.jsx(a4,{...m,children:i.jsxs(dEe,{required:p,scope:t,trigger:g,onTriggerChange:b,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:S,contentId:Ho(),value:k,onValueChange:C,open:j,onOpenChange:N,dir:E,triggerPointerDownPosRef:T,disabled:h,children:[i.jsx(Yj.Provider,{scope:t,children:i.jsx(fEe,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(D=>{R(U=>new Set(U).add(D))},[]),onNativeOptionRemove:x.useCallback(D=>{R(U=>{const M=new Set(U);return M.delete(D),M})},[]),children:r})}),A?i.jsxs(IY,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:f,value:k,onChange:D=>C(D.target.value),disabled:h,form:v,children:[k===void 0?i.jsx("option",{value:""}):null,Array.from(B)]},P):null]})})};dY.displayName=Sy;var fY="SelectTrigger",hY=x.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,s=Jj(r),o=ld(fY,r),l=o.disabled||n,c=Pr(t,o.onTriggerChange),u=Zj(r),d=x.useRef("touch"),[f,h,p]=$Y(m=>{const g=u().filter(w=>!w.disabled),b=g.find(w=>w.value===o.value),y=FY(g,m,b);y!==void 0&&o.onValueChange(y.value)}),v=m=>{l||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return i.jsx(JS,{asChild:!0,...s,children:i.jsx(zt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":MY(o.value)?"":void 0,...a,ref:c,onClick:At(a.onClick,m=>{m.currentTarget.focus(),d.current!=="mouse"&&v(m)}),onPointerDown:At(a.onPointerDown,m=>{d.current=m.pointerType;const g=m.target;g.hasPointerCapture(m.pointerId)&&g.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(v(m),m.preventDefault())}),onKeyDown:At(a.onKeyDown,m=>{const g=f.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&h(m.key),!(g&&m.key===" ")&&lEe.includes(m.key)&&(v(),m.preventDefault())})})})});hY.displayName=fY;var mY="SelectValue",pY=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:s,placeholder:o="",...l}=e,c=ld(mY,r),{onValueNodeHasChildrenChange:u}=c,d=s!==void 0,f=Pr(t,c.onValueNodeChange);return La(()=>{u(d)},[u,d]),i.jsx(zt.span,{...l,ref:f,style:{pointerEvents:"none"},children:MY(c.value)?i.jsx(i.Fragment,{children:o}):s})});pY.displayName=mY;var mEe="SelectIcon",gY=x.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return i.jsx(zt.span,{"aria-hidden":!0,...a,ref:t,children:n||"▼"})});gY.displayName=mEe;var pEe="SelectPortal",vY=e=>i.jsx(Xx,{asChild:!0,...e});vY.displayName=pEe;var Of="SelectContent",xY=x.forwardRef((e,t)=>{const r=ld(Of,e.__scopeSelect),[n,a]=x.useState();if(La(()=>{a(new DocumentFragment)},[]),!r.open){const s=n;return s?oo.createPortal(i.jsx(yY,{scope:e.__scopeSelect,children:i.jsx(Yj.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),s):null}return i.jsx(bY,{...e,ref:t})});xY.displayName=Of;var So=10,[yY,cd]=t0(Of),gEe="SelectContentImpl",bY=x.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:v,hideWhenDetached:m,avoidCollisions:g,...b}=e,y=ld(Of,r),[w,_]=x.useState(null),[S,E]=x.useState(null),j=Pr(t,q=>_(q)),[N,k]=x.useState(null),[C,T]=x.useState(null),A=Zj(r),[B,R]=x.useState(!1),P=x.useRef(!1);x.useEffect(()=>{if(w)return sy(w)},[w]),z4();const D=x.useCallback(q=>{const[Z,...I]=A().map(z=>z.ref.current),[Q]=I.slice(-1),ve=document.activeElement;for(const z of q)if(z===ve||(z==null||z.scrollIntoView({block:"nearest"}),z===Z&&S&&(S.scrollTop=0),z===Q&&S&&(S.scrollTop=S.scrollHeight),z==null||z.focus(),document.activeElement!==ve))return},[A,S]),U=x.useCallback(()=>D([N,w]),[D,N,w]);x.useEffect(()=>{B&&U()},[B,U]);const{onOpenChange:M,triggerPointerDownPosRef:F}=y;x.useEffect(()=>{if(w){let q={x:0,y:0};const Z=Q=>{var ve,z;q={x:Math.abs(Math.round(Q.pageX)-(((ve=F.current)==null?void 0:ve.x)??0)),y:Math.abs(Math.round(Q.pageY)-(((z=F.current)==null?void 0:z.y)??0))}},I=Q=>{q.x<=10&&q.y<=10?Q.preventDefault():w.contains(Q.target)||M(!1),document.removeEventListener("pointermove",Z),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",Z),document.addEventListener("pointerup",I,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Z),document.removeEventListener("pointerup",I,{capture:!0})}}},[w,M,F]),x.useEffect(()=>{const q=()=>M(!1);return window.addEventListener("blur",q),window.addEventListener("resize",q),()=>{window.removeEventListener("blur",q),window.removeEventListener("resize",q)}},[M]);const[K,X]=$Y(q=>{const Z=A().filter(ve=>!ve.disabled),I=Z.find(ve=>ve.ref.current===document.activeElement),Q=FY(Z,q,I);Q&&setTimeout(()=>Q.ref.current.focus())}),O=x.useCallback((q,Z,I)=>{const Q=!P.current&&!I;(y.value!==void 0&&y.value===Z||Q)&&(k(q),Q&&(P.current=!0))},[y.value]),W=x.useCallback(()=>w==null?void 0:w.focus(),[w]),L=x.useCallback((q,Z,I)=>{const Q=!P.current&&!I;(y.value!==void 0&&y.value===Z||Q)&&T(q)},[y.value]),H=n==="popper"?IA:wY,ee=H===IA?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:v,hideWhenDetached:m,avoidCollisions:g}:{};return i.jsx(yY,{scope:r,content:w,viewport:S,onViewportChange:E,itemRefCallback:O,selectedItem:N,onItemLeave:W,itemTextRefCallback:L,focusSelectedItem:U,selectedItemText:C,position:n,isPositioned:B,searchRef:K,children:i.jsx(Pj,{as:uY,allowPinchZoom:!0,children:i.jsx(Tj,{asChild:!0,trapped:y.open,onMountAutoFocus:q=>{q.preventDefault()},onUnmountAutoFocus:At(a,q=>{var Z;(Z=y.trigger)==null||Z.focus({preventScroll:!0}),q.preventDefault()}),children:i.jsx(Up,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:q=>q.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:i.jsx(H,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:q=>q.preventDefault(),...b,...ee,onPlaced:()=>R(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:At(b.onKeyDown,q=>{const Z=q.ctrlKey||q.altKey||q.metaKey;if(q.key==="Tab"&&q.preventDefault(),!Z&&q.key.length===1&&X(q.key),["ArrowUp","ArrowDown","Home","End"].includes(q.key)){let Q=A().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);if(["ArrowUp","End"].includes(q.key)&&(Q=Q.slice().reverse()),["ArrowUp","ArrowDown"].includes(q.key)){const ve=q.target,z=Q.indexOf(ve);Q=Q.slice(z+1)}setTimeout(()=>D(Q)),q.preventDefault()}})})})})})})});bY.displayName=gEe;var vEe="SelectItemAlignedPosition",wY=x.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,s=ld(Of,r),o=cd(Of,r),[l,c]=x.useState(null),[u,d]=x.useState(null),f=Pr(t,j=>d(j)),h=Zj(r),p=x.useRef(!1),v=x.useRef(!0),{viewport:m,selectedItem:g,selectedItemText:b,focusSelectedItem:y}=o,w=x.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&u&&m&&g&&b){const j=s.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),k=s.valueNode.getBoundingClientRect(),C=b.getBoundingClientRect();if(s.dir!=="rtl"){const ve=C.left-N.left,z=k.left-ve,we=j.left-z,Re=j.width+we,Pe=Math.max(Re,N.width),De=window.innerWidth-So,Ne=d5(z,[So,Math.max(So,De-Pe)]);l.style.minWidth=Re+"px",l.style.left=Ne+"px"}else{const ve=N.right-C.right,z=window.innerWidth-k.right-ve,we=window.innerWidth-j.right-z,Re=j.width+we,Pe=Math.max(Re,N.width),De=window.innerWidth-So,Ne=d5(z,[So,Math.max(So,De-Pe)]);l.style.minWidth=Re+"px",l.style.right=Ne+"px"}const T=h(),A=window.innerHeight-So*2,B=m.scrollHeight,R=window.getComputedStyle(u),P=parseInt(R.borderTopWidth,10),D=parseInt(R.paddingTop,10),U=parseInt(R.borderBottomWidth,10),M=parseInt(R.paddingBottom,10),F=P+D+B+M+U,K=Math.min(g.offsetHeight*5,F),X=window.getComputedStyle(m),O=parseInt(X.paddingTop,10),W=parseInt(X.paddingBottom,10),L=j.top+j.height/2-So,H=A-L,ee=g.offsetHeight/2,q=g.offsetTop+ee,Z=P+D+q,I=F-Z;if(Z<=L){const ve=T.length>0&&g===T[T.length-1].ref.current;l.style.bottom="0px";const z=u.clientHeight-m.offsetTop-m.offsetHeight,we=Math.max(H,ee+(ve?W:0)+z+U),Re=Z+we;l.style.height=Re+"px"}else{const ve=T.length>0&&g===T[0].ref.current;l.style.top="0px";const we=Math.max(L,P+m.offsetTop+(ve?O:0)+ee)+I;l.style.height=we+"px",m.scrollTop=Z-L+m.offsetTop}l.style.margin=`${So}px 0`,l.style.minHeight=K+"px",l.style.maxHeight=A+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[h,s.trigger,s.valueNode,l,u,m,g,b,s.dir,n]);La(()=>w(),[w]);const[_,S]=x.useState();La(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const E=x.useCallback(j=>{j&&v.current===!0&&(w(),y==null||y(),v.current=!1)},[w,y]);return i.jsx(yEe,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:i.jsx(zt.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});wY.displayName=vEe;var xEe="SelectPopperPosition",IA=x.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=So,...s}=e,o=Jj(r);return i.jsx(s4,{...o,...s,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});IA.displayName=xEe;var[yEe,_D]=t0(Of,{}),$A="SelectViewport",_Y=x.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,s=cd($A,r),o=_D($A,r),l=Pr(t,s.onViewportChange),c=x.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),i.jsx(Yj.Slot,{scope:r,children:i.jsx(zt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:At(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const p=Math.abs(c.current-d.scrollTop);if(p>0){const v=window.innerHeight-So*2,m=parseFloat(f.style.minHeight),g=parseFloat(f.style.height),b=Math.max(m,g);if(b<v){const y=b+p,w=Math.min(v,y),_=y-w;f.style.height=w+"px",f.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});_Y.displayName=$A;var SY="SelectGroup",[bEe,wEe]=t0(SY),_Ee=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Ho();return i.jsx(bEe,{scope:r,id:a,children:i.jsx(zt.div,{role:"group","aria-labelledby":a,...n,ref:t})})});_Ee.displayName=SY;var jY="SelectLabel",EY=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=wEe(jY,r);return i.jsx(zt.div,{id:a.id,...n,ref:t})});EY.displayName=jY;var u_="SelectItem",[SEe,NY]=t0(u_),CY=x.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:s,...o}=e,l=ld(u_,r),c=cd(u_,r),u=l.value===n,[d,f]=x.useState(s??""),[h,p]=x.useState(!1),v=Pr(t,y=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,y,n,a)}),m=Ho(),g=x.useRef("touch"),b=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(SEe,{scope:r,value:n,disabled:a,textId:m,isSelected:u,onItemTextChange:x.useCallback(y=>{f(w=>w||((y==null?void 0:y.textContent)??"").trim())},[]),children:i.jsx(Yj.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:i.jsx(zt.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:At(o.onFocus,()=>p(!0)),onBlur:At(o.onBlur,()=>p(!1)),onClick:At(o.onClick,()=>{g.current!=="mouse"&&b()}),onPointerUp:At(o.onPointerUp,()=>{g.current==="mouse"&&b()}),onPointerDown:At(o.onPointerDown,y=>{g.current=y.pointerType}),onPointerMove:At(o.onPointerMove,y=>{var w;g.current=y.pointerType,a?(w=c.onItemLeave)==null||w.call(c):g.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:At(o.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:At(o.onKeyDown,y=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&y.key===" "||(cEe.includes(y.key)&&b(),y.key===" "&&y.preventDefault())})})})})});CY.displayName=u_;var lg="SelectItemText",kY=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...s}=e,o=ld(lg,r),l=cd(lg,r),c=NY(lg,r),u=hEe(lg,r),[d,f]=x.useState(null),h=Pr(t,b=>f(b),c.onItemTextChange,b=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,b,c.value,c.disabled)}),p=d==null?void 0:d.textContent,v=x.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:g}=u;return La(()=>(m(v),()=>g(v)),[m,g,v]),i.jsxs(i.Fragment,{children:[i.jsx(zt.span,{id:c.textId,...s,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?oo.createPortal(s.children,o.valueNode):null]})});kY.displayName=lg;var TY="SelectItemIndicator",AY=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return NY(TY,r).isSelected?i.jsx(zt.span,{"aria-hidden":!0,...n,ref:t}):null});AY.displayName=TY;var FA="SelectScrollUpButton",PY=x.forwardRef((e,t)=>{const r=cd(FA,e.__scopeSelect),n=_D(FA,e.__scopeSelect),[a,s]=x.useState(!1),o=Pr(t,n.onScrollButtonChange);return La(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;s(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?i.jsx(RY,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});PY.displayName=FA;var LA="SelectScrollDownButton",OY=x.forwardRef((e,t)=>{const r=cd(LA,e.__scopeSelect),n=_D(LA,e.__scopeSelect),[a,s]=x.useState(!1),o=Pr(t,n.onScrollButtonChange);return La(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;s(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?i.jsx(RY,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});OY.displayName=LA;var RY=x.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,s=cd("SelectScrollButton",r),o=x.useRef(null),l=Zj(r),c=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>c(),[c]),La(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(zt.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:At(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:At(a.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:At(a.onPointerLeave,()=>{c()})})}),jEe="SelectSeparator",DY=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return i.jsx(zt.div,{"aria-hidden":!0,...n,ref:t})});DY.displayName=jEe;var BA="SelectArrow",EEe=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Jj(r),s=ld(BA,r),o=cd(BA,r);return s.open&&o.position==="popper"?i.jsx(i4,{...a,...n,ref:t}):null});EEe.displayName=BA;function MY(e){return e===""||e===void 0}var IY=x.forwardRef((e,t)=>{const{value:r,...n}=e,a=x.useRef(null),s=Pr(t,a),o=Xj(r);return x.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&d){const f=new Event("change",{bubbles:!0});d.call(l,r),l.dispatchEvent(f)}},[o,r]),i.jsx(Yx,{asChild:!0,children:i.jsx("select",{...n,ref:s,defaultValue:r})})});IY.displayName="BubbleSelect";function $Y(e){const t=ti(e),r=x.useRef(""),n=x.useRef(0),a=x.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),s=x.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,s]}function FY(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let o=NEe(e,Math.max(s,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function NEe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var CEe=dY,LY=hY,kEe=pY,TEe=gY,AEe=vY,BY=xY,PEe=_Y,UY=EY,zY=CY,OEe=kY,REe=AY,WY=PY,VY=OY,HY=DY;const Tr=CEe,Ar=kEe,wr=x.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(LY,{ref:n,className:Ue("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,i.jsx(TEe,{asChild:!0,children:i.jsx(pf,{className:"h-4 w-4 opacity-50"})})]}));wr.displayName=LY.displayName;const qY=x.forwardRef(({className:e,...t},r)=>i.jsx(WY,{ref:r,className:Ue("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(xfe,{className:"h-4 w-4"})}));qY.displayName=WY.displayName;const GY=x.forwardRef(({className:e,...t},r)=>i.jsx(VY,{ref:r,className:Ue("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(pf,{className:"h-4 w-4"})}));GY.displayName=VY.displayName;const _r=x.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>i.jsx(AEe,{children:i.jsxs(BY,{ref:a,className:Ue("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[i.jsx(qY,{}),i.jsx(PEe,{className:Ue("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(GY,{})]})}));_r.displayName=BY.displayName;const DEe=x.forwardRef(({className:e,...t},r)=>i.jsx(UY,{ref:r,className:Ue("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));DEe.displayName=UY.displayName;const _t=x.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(zY,{ref:n,className:Ue("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(REe,{children:i.jsx(Zx,{className:"h-4 w-4"})})}),i.jsx(OEe,{children:t})]}));_t.displayName=zY.displayName;const MEe=x.forwardRef(({className:e,...t},r)=>i.jsx(HY,{ref:r,className:Ue("-mx-1 my-1 h-px bg-muted",e),...t}));MEe.displayName=HY.displayName;const Hc="clients",PN="avatars";function IEe(e){if(!e||/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=e.match(/^(\d{2})\.(\d{2})\.(\d{4})$/);if(t){const[,r,n,a]=t;return`${a}-${n}-${r}`}return e}const pr={async getAllClients(){try{const{data:e,error:t}=await ue.from("clients_with_bonus").select(`
          id,
          user_id,
          full_name,
          email,
          phone,
          avatar_url,
          birthdate,
          notes,
          preferences,
          tags,
          calculated_bonus_points,
          last_visit,
          is_active,
          created_at,
          updated_at
        `);if(t)throw console.error("Ошибка получения клиентов:",t),new Error(t.message);return e}catch(e){throw console.error("Исключение при получении списка клиентов:",e),e}},async getAllClientsByStudio(e){try{console.log("Загружаем клиентов для студии:",e);const{data:t,error:r}=await ue.rpc("get_clients_by_studio",{studio_id_param:e});if(r)throw console.error("Ошибка получения клиентов по студии:",r),new Error(r.message);return console.log("Получены клиенты по студии:",(t==null?void 0:t.length)||0),t}catch(t){throw console.error("Исключение при получении списка клиентов по студии:",t),t}},async getClientById(e){try{const{data:t,error:r}=await ue.from(Hc).select(`
          id,
          user_id,
          full_name,
          email,
          phone,
          avatar_url,
          birthdate,
          notes,
          preferences,
          tags,
          calculated_bonus_points,
          last_visit,
          is_active,
          created_at,
          updated_at,
          disable_notifications
        `).eq("id",e).single();return r?(console.error("Ошибка получения клиента по ID:",r),null):t}catch(t){return console.error("Исключение при получении клиента по ID:",t),null}},async createClient(e){console.log("[DEBUG] clientService.createClient вызван с:",e);try{const t=e.birthdate?IEe(e.birthdate):null,r={full_name:e.full_name,phone:e.phone,email:e.email||null,avatar_url:e.avatar_url||null,birthdate:t,notes:e.notes||null,is_active:!1};e.user_id&&(r.user_id=e.user_id),e.preferences&&(r.preferences=e.preferences),e.tags&&(r.tags=e.tags),console.log("[clientService] Данные для вставки:",r);const{data:n,error:a}=await ue.from(Hc).insert(r).select(`
          id,
          user_id,
          full_name,
          email,
          phone,
          avatar_url,
          birthdate,
          notes,
          preferences,
          tags,
          last_visit,
          is_active,
          created_at,
          updated_at,
          disable_notifications
        `).single();if(a)throw console.error("Ошибка создания клиента:",a),new Error(`Ошибка Supabase: ${a.message} (Details: ${a.details}, Hint: ${a.hint}, Code: ${a.code})`);return console.log("Клиент успешно создан:",n),n}catch(t){throw console.error("Ошибка в clientService.createClient:",t),t}},async updateClient(e,t){try{const{data:r,error:n}=await ue.from(Hc).update({full_name:t.full_name,email:t.email,phone:t.phone,avatar_url:t.avatar_url,birthdate:t.birthdate,notes:t.notes,preferences:t.preferences,tags:t.tags,is_active:t.is_active,disable_notifications:t.disable_notifications}).eq("id",e).select(`
          id,
          user_id,
          full_name,
          email,
          phone,
          avatar_url,
          birthdate,
          notes,
          preferences,
          tags,
          last_visit,
          is_active,
          created_at,
          updated_at,
          disable_notifications
        `).single();return n?(console.error("Ошибка обновления клиента:",n),null):r}catch(r){return console.error("Исключение при обновлении клиента:",r),null}},async deleteClient(e){try{const{error:t}=await ue.from(Hc).delete().eq("id",e);if(t)throw console.error("Ошибка при удалении клиента:",t),t;console.log(`Клиент с ID ${e} успешно удален.`)}catch(t){throw console.error("Исключение при удалении клиента:",t),t}},async searchClientsByName(e){try{const{data:t,error:r}=await ue.from(Hc).select(`
          id,
          user_id,
          full_name,
          email,
          phone,
          avatar_url,
          birthdate,
          notes,
          preferences,
          tags,
          calculated_bonus_points,
          last_visit,
          is_active,
          created_at,
          updated_at,
          disable_notifications
        `).ilike("full_name",`%${e}%`).eq("is_active",!0);return r?(console.error("Ошибка поиска клиентов по имени:",r),[]):t}catch(t){return console.error("Исключение при поиске клиентов по имени:",t),[]}},async searchClientsByPhone(e){try{const{data:t,error:r}=await ue.from(Hc).select(`
          id,
          user_id,
          full_name,
          email,
          phone,
          avatar_url,
          birthdate,
          notes,
          preferences,
          tags,
          calculated_bonus_points,
          last_visit,
          is_active,
          created_at,
          updated_at,
          disable_notifications
        `).ilike("phone",`%${e}%`).eq("is_active",!0);return r?(console.error("Ошибка поиска клиентов по телефону:",r),[]):t}catch(t){return console.error("Исключение при поиске клиентов по телефону:",t),[]}},async filterClients(e){try{let t=ue.from(Hc).select(`
          id, user_id, full_name, email, phone, avatar_url, birthdate,
          notes, preferences, tags, calculated_bonus_points, last_visit, is_active,
          created_at, updated_at, disable_notifications
        `).eq("is_active",!0);if(e.search&&(t=t.or(`full_name.ilike.%${e.search}%,phone.ilike.%${e.search}%,email.ilike.%${e.search}%`)),e.tags&&e.tags.length>0&&(t=t.contains("tags",e.tags)),e.sortBy){const a=e.sortBy==="name"?"full_name":e.sortBy==="lastVisit"?"last_visit":"created_at",s=e.sortOrder||"desc";t=t.order(a,{ascending:s==="asc"})}else t=t.order("full_name",{ascending:!0});const{data:r,error:n}=await t;return n?(console.error("Ошибка фильтрации клиентов:",n),[]):r}catch(t){return console.error("Исключение при фильтрации клиентов:",t),[]}},async getClientsByBirthdayMonth(e){try{const{data:t,error:r}=await ue.from(Hc).select(`
          id,
          user_id,
          full_name,
          email,
          phone,
          avatar_url,
          birthdate,
          notes,
          preferences,
          tags,
          calculated_bonus_points,
          last_visit,
          is_active,
          created_at,
          updated_at,
          disable_notifications
        `).eq("is_active",!0).filter("birthdate","not.is",null);return r?(console.error("Ошибка получения клиентов по месяцу рождения:",r),[]):t.filter(a=>a.birthdate?new Date(a.birthdate).getMonth()+1===e:!1)}catch(t){return console.error("Исключение при получении клиентов по месяцу рождения:",t),[]}},async uploadClientAvatar(e){try{const t=e.name.split(".").pop(),r=`${FG()}.${t}`,n=`public/${r}`;console.log(`Загрузка файла: ${r} в бакет ${PN}`);const{error:a}=await ue.storage.from(PN).upload(n,e,{cacheControl:"3600",upsert:!1});if(a)throw console.error("Ошибка загрузки файла в Supabase Storage:",a),a;console.log(`Файл ${r} успешно загружен.`);const{data:s}=ue.storage.from(PN).getPublicUrl(n);if(!s||!s.publicUrl)throw console.error("Не удалось получить публичный URL для файла:",n),new Error("Не удалось получить публичный URL для файла");return console.log(`Публичный URL файла: ${s.publicUrl}`),s.publicUrl}catch(t){return console.error("Исключение при загрузке аватара клиента:",t),null}},async getClientTags(e){return[]},async addTagToClient(e,t){},async removeTagFromClient(e,t){},async getAllTags(){return[]},async searchClients(e){return[]},async getUpcomingBirthdays(e=7){const t=new Date,r=t.getMonth()+1,n=t.getDate(),a=new Date;a.setDate(t.getDate()+e);const s=a.getMonth()+1,o=a.getDate(),{data:l,error:c}=await ue.from("clients").select("*");if(c)throw console.error("Error fetching clients:",c),c;return l.filter(d=>{if(!d.birthdate)return!1;try{const[,f,h]=d.birthdate.split("-").map(Number);let p=!1;return r===s?f===r&&h>=n&&h<=o&&(p=!0):s>r?(f===r&&h>=n&&(p=!0),f===s&&h<=o&&(p=!0),f>r&&f<s&&(p=!0)):(f===r&&h>=n&&(p=!0),f===s&&h<=o&&(p=!0),(f>r||f<s)&&(p=!0)),p}catch(f){return console.error(`Error parsing birthdate for client ${d.id}: ${d.birthdate}`,f),!1}}).sort((d,f)=>{const[,h,p]=d.birthdate.split("-").map(Number),[,v,m]=f.birthdate.split("-").map(Number);return h!==v?h-v:p-m})},async addBonusPoints(e,t,r,n){try{if(console.log("[BONUS] Начисление бонусов:",{clientId:e,amount:t,appointmentId:r,comment:n}),!e||t<=0)return console.error("[BONUS] Невалидные параметры:",{clientId:e,amount:t}),{success:!1,error:"Невалидные параметры"};if(r){const{data:d,error:f}=await ue.from("loyalty_transactions").select("id, value, date, type").eq("appointment_id",String(r)).eq("user_id",String(e)).eq("type","accrual");if(f)console.error("[BONUS] Ошибка при проверке существующих транзакций:",f);else if(d&&d.length>0)return console.log(`[BONUS] Уже существуют транзакции (${d.length}) по записи ${r}:`,d),{success:!1,error:"Бонусы уже были начислены за эту запись"}}const{data:a,error:s}=await ue.from("clients").select("id, calculated_bonus_points").eq("id",e).single();if(s)return console.error("[BONUS] Ошибка при получении клиента:",s),{success:!1,error:s.message};const o=(a==null?void 0:a.calculated_bonus_points)||0,l=o+t,{data:c,error:u}=await ue.from("loyalty_transactions").insert({user_id:e,type:"accrual",value:t,appointment_id:r,comment:n||"Начисление бонусов",date:new Date().toISOString(),created_at:new Date().toISOString()});return console.log("[BONUS] Результат создания транзакции:",{data:c,error:u,params:{user_id:e,type:"accrual",value:t,appointment_id:r}}),u?(console.error("[BONUS] Ошибка при создании транзакции:",u),await ue.from("clients").update({calculated_bonus_points:o}).eq("id",e),{success:!1,error:u.message}):(console.log(`[BONUS] Успешно начислено ${t} бонусов клиенту ${e}`),{success:!0})}catch(a){return console.error("[BONUS] Ошибка при начислении бонусов:",a),{success:!1,error:a}}},async createClientDiscount(e){const{clientId:t,discountPercent:r,maxUsages:n,validTo:a,comment:s}=e;if(!t||!r||!n||!a)throw new Error("Не все параметры для создания скидки заданы");const o=new Date().toISOString().slice(0,10),{data:l,error:c}=await ue.from("client_discounts").insert([{client_id:t,discount_percent:r,max_usages:n,valid_from:o,valid_to:a,comment:s||null}]).select("*").single();if(c)throw c;return l},async getClientDiscounts(e){if(!e)return[];const{data:t,error:r}=await ue.from("client_discounts").select("*").eq("client_id",e).order("valid_to",{ascending:!0});if(r)throw r;return t||[]},async getDiscountsForClients(e){if(!e.length)return[];const{data:t,error:r}=await ue.from("client_discounts").select("*").in("client_id",e).order("valid_to",{ascending:!0});if(r)throw r;return t||[]},async getBonusHistory(e){var n;const t=String(e),r=[];try{console.debug(`[BonusHistory] Fetching ALL loyalty_transactions for client ${t}...`);const{data:a,error:s}=await ue.from("loyalty_transactions").select("id, date, value, comment, expiry_date, type, appointment_id, created_at").eq("user_id",t).order("created_at",{ascending:!1});if(s)throw s;if(console.debug(`[BonusHistory] Loyalty Transactions (all types): ${(a==null?void 0:a.length)||0} found`),a)for(const o of a){let l=null,c=null;const u=o.type==="accrual"?"начислено":o.type==="spend"?"списано":o.type;if(o.appointment_id&&zw(o.appointment_id)===null)try{const{data:f}=await ue.from("appointments").select("appointment_number, services (name)").eq("id",o.appointment_id).single();if(l=(f==null?void 0:f.appointment_number)??null,f!=null&&f.services)if(Array.isArray(f.services)&&f.services.length>0)c=((n=f.services[0])==null?void 0:n.name)??"Услуга";else if(typeof f.services=="object"&&f.services!==null&&"name"in f.services){const h=f.services;c=typeof h.name=="string"?h.name:"Услуга"}else c="Услуга"}catch(f){console.warn(`[BonusHistory] Failed to fetch appointment_number/service_name for tx.appointment_id ${o.appointment_id}:`,f)}else o.appointment_id&&console.warn(`[BonusHistory] Skipping invalid or missing appointment_id in transaction: ${o.appointment_id}`);let d=o.comment||"";u==="списано"&&c&&l&&(d=`Списание за "${c}"`),r.push({id:o.id,date:o.date||"",type:u,amount:o.value||0,description:d,expiry_date:o.expiry_date,sortTime:o.created_at,appointment_number:l,appointment_id:o.appointment_id,formulaAmount:o.value})}}catch(a){return console.error("[BONUS] Ошибка при получении истории бонусов:",a),[]}return r},async getAutoGreetingSettings(e){const{data:t,error:r}=await ue.from("auto_greetings_settings").select("*").eq("user_id",e).single();if(r&&r.code!=="PGRST116")throw console.error("Error fetching auto greeting settings:",r),r;return t?{enabled:t.enabled??!0,template_bonus:t.template_bonus??"Дорогой(ая) {name}, поздравляем Вас с днем рождения! В подарок дарим Вам {bonus} бонусных баллов. Ждем Вас в нашем салоне!",template_discount:t.template_discount??"Дорогой(ая) {name}, поздравляем Вас с днем рождения! В подарок дарим Вам скидку {discount}% на наши услуги. Скидка действует {valid_days} дней и может быть использована {usages} раз. Ждем Вас в нашем салоне!",template_no_gift:t.template_no_gift??"",send_time:t.send_time??"10:00",gift_type:t.gift_type??"bonus",bonus_amount:t.bonus_amount??0,discount_percent:t.discount_percent??void 0,discount_usages:t.discount_usages??0,discount_valid_days:t.discount_valid_days??void 0,timezone:t.timezone??void 0,id:t.id,user_id:t.user_id}:null},async upsertAutoGreetingSettings(e,t){const{data:r,error:n}=await ue.from("auto_greetings_settings").upsert({...t,user_id:e},{onConflict:"user_id"});if(n)throw console.error("Error upserting auto greeting settings:",n),n;console.log("Auto greeting settings upserted:",r)},async getTodayAutoGreetingStatus(e,t){const r=new Date().toISOString().slice(0,10),{data:n,error:a}=await ue.from("auto_greetings_log").select("status").eq("user_id",e).eq("client_id",t).gte("sent_at",r).lte("sent_at",r+"T23:59:59.999Z").order("sent_at",{ascending:!1}).limit(1).single();if(a&&a.code!=="PGRST116")throw a;return n?n.status:"pending"},async addBonusPointsWithExpiry(e,t,r,n){try{if(console.log("[addBonusPointsWithExpiry] Входные параметры:",{clientId:e,amount:t,expiryDate:r,comment:n}),!e||typeof e!="string"||e.length<10)return console.error("[addBonusPointsWithExpiry] Невалидный clientId:",e),{success:!1,error:"Невалидный clientId"};if(t<=0)return console.error("[addBonusPointsWithExpiry] Невалидное количество бонусов:",t),{success:!1,error:"Невалидное количество бонусов"};const{data:a,error:s}=await ue.from("clients").select("id").eq("id",e).single();if(s||!a)return console.error("[addBonusPointsWithExpiry] Ошибка при получении клиента:",s),{success:!1,error:(s==null?void 0:s.message)||"Клиент не найден"};const{data:o,error:l}=await ue.from("loyalty_transactions").insert({user_id:e,type:"accrual",value:t,comment:n||"Начисление бонусов",date:new Date().toISOString(),created_at:new Date().toISOString(),...r?{expiry_date:r}:{}});return l?(console.error("[addBonusPointsWithExpiry] Ошибка при создании транзакции:",l),{success:!1,error:l.message}):(console.log(`[addBonusPointsWithExpiry] Успешно начислено ${t} бонусов клиенту ${e}`),{success:!0})}catch(a){return console.error("[addBonusPointsWithExpiry] Неизвестная ошибка:",a),{success:!1,error:a}}},async getExpiringBonuses(e){const t=String(e),r=zw(t);if(r)return console.error("[getExpiringBonuses] Невалидный clientId:",t,r),[];try{const{data:n,error:a}=await ue.from("loyalty_transactions").select("*").eq("user_id",t).eq("type","accrual").gt("value",0).not("expiry_date","is",null).order("expiry_date",{ascending:!0});return a?(console.error("[getExpiringBonuses] Ошибка при получении сгораемых бонусов:",a),[]):n}catch(n){return console.error("[getExpiringBonuses] Исключение при получении сгораемых бонусов:",n),[]}}},ON=Object.freeze(Object.defineProperty({__proto__:null,clientService:pr},Symbol.toStringTag,{value:"Module"})),$Ee=(e,t)=>{const r=new Date(e),n=new Date(t);return Math.abs((r.getTime()-n.getTime())/(1e3*60*60*24))},f5=e=>{const t=new Date(e);return Math.floor((new Date().getTime()-t.getTime())/(1e3*60*60*24))},FEe=e=>{const t=new Date(e),r=new Date;return t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()},LEe=(e,t)=>{const r=new Date(e);return(new Date().getTime()-r.getTime())/(1e3*60*60*24)<=t};function BEe(e,t,r,n){if(!e)return null;const a=t.filter(f=>String(f.client_id)===String(e.id)&&f.status==="completed").sort((f,h)=>new Date(h.date).getTime()-new Date(f.date).getTime());if(a.length===0)return null;const o=(e.tags||[]).includes("VIP")||a.length>=10,c=r.filter(f=>String(f.user_id)===String(e.id)).some(f=>(f.subscription_visits_left||0)>0),d=((n==null?void 0:n[e.id])||[]).length>0;return a.length===1?"Новый":a.length>=2&&FEe(a[0].date)?"Повторный":a.some(f=>LEe(f.date,30))?"Активный":a.length>=2&&$Ee(a[0].date,a[1].date)>60?"Вернувшийся":a.length>0&&f5(a[0].date)>180?"Потерянный":a.length>0&&f5(a[0].date)>60?"Неактивный":o?"VIP":c?"С абонементом":d?"С индивидуальной скидкой":null}var SD="Checkbox",[UEe,Klt]=lo(SD),[zEe,WEe]=UEe(SD),KY=x.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,p]=x.useState(null),v=Pr(t,_=>p(_)),m=x.useRef(!1),g=h?d||!!h.closest("form"):!0,[b=!1,y]=Ci({prop:a,defaultProp:s,onChange:u}),w=x.useRef(b);return x.useEffect(()=>{const _=h==null?void 0:h.form;if(_){const S=()=>y(w.current);return _.addEventListener("reset",S),()=>_.removeEventListener("reset",S)}},[h,y]),i.jsxs(zEe,{scope:r,state:b,disabled:l,children:[i.jsx(zt.button,{type:"button",role:"checkbox","aria-checked":Mu(b)?"mixed":b,"aria-required":o,"data-state":ZY(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:v,onKeyDown:At(e.onKeyDown,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:At(e.onClick,_=>{y(S=>Mu(S)?!0:!S),g&&(m.current=_.isPropagationStopped(),m.current||_.stopPropagation())})}),g&&i.jsx(VEe,{control:h,bubbles:!m.current,name:n,value:c,checked:b,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"},defaultChecked:Mu(s)?!1:s})]})});KY.displayName=SD;var XY="CheckboxIndicator",YY=x.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,s=WEe(XY,r);return i.jsx(rl,{present:n||Mu(s.state)||s.state===!0,children:i.jsx(zt.span,{"data-state":ZY(s.state),"data-disabled":s.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});YY.displayName=XY;var VEe=e=>{const{control:t,checked:r,bubbles:n=!0,defaultChecked:a,...s}=e,o=x.useRef(null),l=Xj(r),c=ZS(t);x.useEffect(()=>{const d=o.current,f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==r&&p){const v=new Event("click",{bubbles:n});d.indeterminate=Mu(r),p.call(d,Mu(r)?!1:r),d.dispatchEvent(v)}},[l,r,n]);const u=x.useRef(Mu(r)?!1:r);return i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??u.current,...s,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Mu(e){return e==="indeterminate"}function ZY(e){return Mu(e)?"indeterminate":e?"checked":"unchecked"}var JY=KY,HEe=YY;const Hn=x.forwardRef(({className:e,...t},r)=>i.jsx(JY,{ref:r,className:Ue("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(HEe,{className:Ue("flex items-center justify-center text-current"),children:i.jsx(Zx,{className:"h-4 w-4"})})}));Hn.displayName=JY.displayName;var jD="Collapsible",[qEe,QY]=lo(jD),[GEe,ED]=qEe(jD),eZ=x.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:s,onOpenChange:o,...l}=e,[c=!1,u]=Ci({prop:n,defaultProp:a,onChange:o});return i.jsx(GEe,{scope:r,disabled:s,contentId:Ho(),open:c,onOpenToggle:x.useCallback(()=>u(d=>!d),[u]),children:i.jsx(zt.div,{"data-state":CD(c),"data-disabled":s?"":void 0,...l,ref:t})})});eZ.displayName=jD;var tZ="CollapsibleTrigger",rZ=x.forwardRef((e,t)=>{const{__scopeCollapsible:r,...n}=e,a=ED(tZ,r);return i.jsx(zt.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":CD(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:t,onClick:At(e.onClick,a.onOpenToggle)})});rZ.displayName=tZ;var ND="CollapsibleContent",nZ=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=ED(ND,e.__scopeCollapsible);return i.jsx(rl,{present:r||a.open,children:({present:s})=>i.jsx(KEe,{...n,ref:t,present:s})})});nZ.displayName=ND;var KEe=x.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:n,children:a,...s}=e,o=ED(ND,r),[l,c]=x.useState(n),u=x.useRef(null),d=Pr(t,u),f=x.useRef(0),h=f.current,p=x.useRef(0),v=p.current,m=o.open||l,g=x.useRef(m),b=x.useRef();return x.useEffect(()=>{const y=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(y)},[]),La(()=>{const y=u.current;if(y){b.current=b.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const w=y.getBoundingClientRect();f.current=w.height,p.current=w.width,g.current||(y.style.transitionDuration=b.current.transitionDuration,y.style.animationName=b.current.animationName),c(n)}},[o.open,n]),i.jsx(zt.div,{"data-state":CD(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!m,...s,ref:d,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:m&&a})});function CD(e){return e?"open":"closed"}var XEe=eZ,YEe=rZ,ZEe=nZ,Dc="Accordion",JEe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[kD,QEe,eNe]=nj(Dc),[Qj,Xlt]=lo(Dc,[eNe,QY]),TD=QY(),aZ=G.forwardRef((e,t)=>{const{type:r,...n}=e,a=n,s=n;return i.jsx(kD.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?i.jsx(aNe,{...s,ref:t}):i.jsx(nNe,{...a,ref:t})})});aZ.displayName=Dc;var[sZ,tNe]=Qj(Dc),[iZ,rNe]=Qj(Dc,{collapsible:!1}),nNe=G.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},collapsible:s=!1,...o}=e,[l,c]=Ci({prop:r,defaultProp:n,onChange:a});return i.jsx(sZ,{scope:e.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:G.useCallback(()=>s&&c(""),[s,c]),children:i.jsx(iZ,{scope:e.__scopeAccordion,collapsible:s,children:i.jsx(oZ,{...o,ref:t})})})}),aNe=G.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...s}=e,[o=[],l]=Ci({prop:r,defaultProp:n,onChange:a}),c=G.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=G.useCallback(d=>l((f=[])=>f.filter(h=>h!==d)),[l]);return i.jsx(sZ,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:i.jsx(iZ,{scope:e.__scopeAccordion,collapsible:!0,children:i.jsx(oZ,{...s,ref:t})})})}),[sNe,e2]=Qj(Dc),oZ=G.forwardRef((e,t)=>{const{__scopeAccordion:r,disabled:n,dir:a,orientation:s="vertical",...o}=e,l=G.useRef(null),c=Pr(l,t),u=QEe(r),f=Kj(a)==="ltr",h=At(e.onKeyDown,p=>{var N;if(!JEe.includes(p.key))return;const v=p.target,m=u().filter(k=>{var C;return!((C=k.ref.current)!=null&&C.disabled)}),g=m.findIndex(k=>k.ref.current===v),b=m.length;if(g===-1)return;p.preventDefault();let y=g;const w=0,_=b-1,S=()=>{y=g+1,y>_&&(y=w)},E=()=>{y=g-1,y<w&&(y=_)};switch(p.key){case"Home":y=w;break;case"End":y=_;break;case"ArrowRight":s==="horizontal"&&(f?S():E());break;case"ArrowDown":s==="vertical"&&S();break;case"ArrowLeft":s==="horizontal"&&(f?E():S());break;case"ArrowUp":s==="vertical"&&E();break}const j=y%b;(N=m[j].ref.current)==null||N.focus()});return i.jsx(sNe,{scope:r,disabled:n,direction:a,orientation:s,children:i.jsx(kD.Slot,{scope:r,children:i.jsx(zt.div,{...o,"data-orientation":s,ref:c,onKeyDown:n?void 0:h})})})}),d_="AccordionItem",[iNe,AD]=Qj(d_),lZ=G.forwardRef((e,t)=>{const{__scopeAccordion:r,value:n,...a}=e,s=e2(d_,r),o=tNe(d_,r),l=TD(r),c=Ho(),u=n&&o.value.includes(n)||!1,d=s.disabled||e.disabled;return i.jsx(iNe,{scope:r,open:u,disabled:d,triggerId:c,children:i.jsx(XEe,{"data-orientation":s.orientation,"data-state":mZ(u),...l,...a,ref:t,disabled:d,open:u,onOpenChange:f=>{f?o.onItemOpen(n):o.onItemClose(n)}})})});lZ.displayName=d_;var cZ="AccordionHeader",uZ=G.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,a=e2(Dc,r),s=AD(cZ,r);return i.jsx(zt.h3,{"data-orientation":a.orientation,"data-state":mZ(s.open),"data-disabled":s.disabled?"":void 0,...n,ref:t})});uZ.displayName=cZ;var UA="AccordionTrigger",dZ=G.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,a=e2(Dc,r),s=AD(UA,r),o=rNe(UA,r),l=TD(r);return i.jsx(kD.ItemSlot,{scope:r,children:i.jsx(YEe,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:s.triggerId,...l,...n,ref:t})})});dZ.displayName=UA;var fZ="AccordionContent",hZ=G.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,a=e2(Dc,r),s=AD(fZ,r),o=TD(r);return i.jsx(ZEe,{role:"region","aria-labelledby":s.triggerId,"data-orientation":a.orientation,...o,...n,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});hZ.displayName=fZ;function mZ(e){return e?"open":"closed"}var oNe=aZ,lNe=lZ,cNe=uZ,pZ=dZ,gZ=hZ;const G1=oNe,Ag=x.forwardRef(({className:e,...t},r)=>i.jsx(lNe,{ref:r,className:Ue("border-b",e),...t}));Ag.displayName="AccordionItem";const Pg=x.forwardRef(({className:e,children:t,...r},n)=>i.jsx(cNe,{className:"flex",children:i.jsxs(pZ,{ref:n,className:Ue("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,i.jsx(pf,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Pg.displayName=pZ.displayName;const Og=x.forwardRef(({className:e,children:t,...r},n)=>i.jsx(gZ,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:i.jsx("div",{className:Ue("pb-4 pt-0",e),children:t})}));Og.displayName=gZ.displayName;const uNe=qp("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Rf=x.forwardRef(({className:e,variant:t,...r},n)=>i.jsx("div",{ref:n,role:"alert",className:Ue(uNe({variant:t}),e),...r}));Rf.displayName="Alert";const dNe=x.forwardRef(({className:e,...t},r)=>i.jsx("h5",{ref:r,className:Ue("mb-1 font-medium leading-none tracking-tight",e),...t}));dNe.displayName="AlertTitle";const Df=x.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Ue("text-sm [&_p]:leading-relaxed",e),...t}));Df.displayName="AlertDescription";const h5=[{group:"Уведомление клиента при записи",items:[{key:"online_booking",label:"Онлайн-запись",description:"Отправлять сообщение клиенту при смене статуса онлайн-записи на 'подтверждена'"},{key:"admin_booking",label:"Обычная запись",description:"Отправлять сообщение клиенту при смене статуса записи, созданной администратором, на 'подтверждена'"},{key:"booking_rescheduled",label:"Запись перенесена",description:"Оповещать клиента при изменении времени или даты визита"},{key:"booking_cancelled",label:"Запись отменена",description:"Оповещать клиента об отмене записи"}]},{group:"Напоминание клиенту о визите",items:[{key:"visit_reminder",label:"Обычная запись",description:"Стандартное напоминание за день/час до визита"},{key:"visit_confirmation",label:"С запросом подтверждения визита",description:"Напоминание с просьбой подтвердить или отменить визит"}]},{group:"Уведомление клиента после визита",items:[{key:"review_tip_request",label:"Запрос отзыва и чаевых",description:"Отправлять запрос отзыва и чаевых после визита"},{key:"repeat_invite",label:"Приглашение на повторный визит",description:"Приглашать клиента записаться снова через X дней после визита"}]}],fNe={online_booking:"Здравствуйте, {name}! Ваша онлайн-запись принята на {date} в {time}.",admin_booking:"Здравствуйте, {name}! Вас записали на {date} в {time}. Ждём вас!",booking_rescheduled:"{name}, ваша запись перенесена на {date} в {time}. Если не подходит — свяжитесь с нами.",booking_cancelled:"{name}, ваша запись отменена. Если это ошибка — свяжитесь с нами.",visit_reminder:"{name}, напоминаем о визите {date} в {time}. Ждём вас!",visit_confirmation:"{name}, подтвердите, пожалуйста, визит {date} в {time}. Ответьте 'Да' или 'Нет'.",review_tip_request:"{name}, спасибо за визит! Оставьте, пожалуйста, отзыв и чаевые по ссылке: {review_link}",repeat_invite:"{name}, будем рады видеть вас снова! Запишитесь на повторный визит: {booking_link}"},hNe=()=>{const{toast:e}=co(),{loadIntegrations:t,whatsapp:r,telegram:n,isLoading:a,error:s}=Sf(),[o,l]=x.useState(!1),[c,u]=x.useState(null),[d,f]=x.useState(""),[h,p]=x.useState(fNe),[v,m]=x.useState({}),[g,b]=x.useState(!1),[y,w]=x.useState(null);x.useEffect(()=>{t().catch(N=>{e({variant:"destructive",title:"Ошибка загрузки",description:"Не удалось загрузить интеграции. Пожалуйста, попробуйте позже."})})},[t,e]);const _=!!(r!=null&&r.is_active||n!=null&&n.is_active);x.useEffect(()=>{(async()=>{var C;const{data:N,error:k}=await ue.auth.getUser();(C=N==null?void 0:N.user)!=null&&C.id&&w(N.user.id)})()},[]),x.useEffect(()=>{!y||!_||(async()=>{try{b(!0);const N=await Pv.getSettings(y),k={};N.forEach(C=>{k[`${C.event_type}_${C.channel}`]=C.enabled}),m(k)}catch{}finally{b(!1)}})()},[y,_]);const S=async(N,k,C)=>{if(y){m(T=>({...T,[`${N}_${k}`]:C}));try{await Pv.setSetting({user_id:y,event_type:N,channel:k,enabled:C}),e({title:"Настройка сохранена",description:`Сценарий ${N} (${k}) ${C?"включён":"выключен"}`})}catch{e({variant:"destructive",title:"Ошибка",description:"Не удалось сохранить настройку"})}}},E=N=>{u(N),f(h[N]||""),l(!0)},j=()=>{c&&(p(N=>({...N,[c]:d})),e({title:"Шаблон сохранён",description:"Шаблон сообщения успешно обновлён"})),l(!1)};return i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx(gt,{children:"Настройки автоматических сообщений"})}),i.jsxs(Ge,{children:[a?i.jsx("div",{className:"text-center py-8",children:"Загрузка интеграций..."}):s?i.jsxs(Rf,{variant:"destructive",className:"mb-4",children:[i.jsx(rc,{className:"h-4 w-4"}),i.jsx(Df,{children:s})]}):i.jsxs("div",{className:"p-6 bg-gray-50 rounded-lg",children:[!_&&i.jsxs(Rf,{className:"mb-6",children:[i.jsx(rc,{className:"h-4 w-4"}),i.jsx(Df,{children:'Для использования этих настроек, пожалуйста, подключите хотя бы один мессенджер в разделе "Интеграции"'})]}),i.jsx("div",{className:"space-y-8",children:h5.map((N,k)=>i.jsxs("div",{className:`pb-6 ${k<h5.length-1?"border-b border-beauty-200":""}`,children:[i.jsx("div",{className:"text-lg font-semibold mb-4 text-beauty-800",children:N.group}),i.jsx("div",{className:"space-y-5 pl-2",children:N.items.map(C=>i.jsxs("div",{className:"flex items-center justify-between gap-2 hover:bg-beauty-50 p-2 rounded-md -ml-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-beauty-900",children:C.label}),i.jsx("div",{className:"text-sm text-beauty-600",children:C.description})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[(r==null?void 0:r.is_active)&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Hn,{id:`${C.key}-whatsapp`,disabled:!_||g,checked:!!v[`${C.key}_whatsapp`],onCheckedChange:T=>S(C.key,"whatsapp",!!T),className:"data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600"}),i.jsx("label",{htmlFor:`${C.key}-whatsapp`,className:"flex items-center",children:i.jsx(VG,{className:"h-4 w-4 text-green-600"})})]}),(n==null?void 0:n.is_active)&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Hn,{id:`${C.key}-telegram`,disabled:!_||g,checked:!!v[`${C.key}_telegram`],onCheckedChange:T=>S(C.key,"telegram",!!T),className:"data-[state=checked]:bg-blue-500 data-[state=checked]:border-blue-500"}),i.jsx("label",{htmlFor:`${C.key}-telegram`,className:"flex items-center",children:i.jsx(Mye,{className:"h-4 w-4 text-blue-500"})})]})]}),i.jsx(ne,{variant:"outline",size:"sm",onClick:()=>E(C.key),disabled:!_,children:"Редактировать шаблон"})]})]},C.key))})]},N.group))})]}),i.jsx(qt,{open:o,onOpenChange:l,children:i.jsxs(Wt,{className:"sm:max-w-[500px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Редактировать шаблон сообщения"}),i.jsxs(fr,{children:["Используйте переменные: ","{name}",", ","{date}",", ","{time}",", ","{review_link}",", ","{booking_link}"]})]}),i.jsx(rn,{value:d,onChange:N=>f(N.target.value),rows:5,className:"w-full"}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:()=>l(!1),children:"Отмена"}),i.jsx(ne,{onClick:j,children:"Сохранить"})]})]})})]})]})},mNe=G.forwardRef((e,t)=>{const[r,n]=x.useState([]),[a,s]=x.useState(!0),[o,l]=x.useState(!1),[c,u]=x.useState({}),[d,f]=x.useState([]),[h,p]=x.useState(!1),v=async()=>{s(!0);try{const{data:y,error:w}=await ue.from("campaigns").select("*").order("created_at",{ascending:!1});w?(console.error("Error fetching campaign history:",w),Ae({title:"Ошибка загрузки истории",description:w.message,variant:"destructive"}),n([])):n(y||[])}catch(y){Ae({title:"Ошибка загрузки истории",description:y.message,variant:"destructive"}),n([])}finally{s(!1)}};G.useImperativeHandle(t,()=>({openClearHistoryDialog:()=>p(!0),fetchCampaignHistory:v})),x.useEffect(()=>{v()},[]);const m=y=>{u(w=>({...w,[y]:!w[y]}))},g=y=>{if(!y)return"Неизвестный";const w=d.find(_=>_.id===y);return w?w.full_name:`ID: ${y.substring(0,6)}...`},b=async()=>{l(!0);try{const{error:y}=await ue.from("campaigns").delete().neq("id","0");if(y)throw y;n([]),Ae({title:"История рассылок очищена",description:"Все записи были успешно удалены."})}catch(y){console.error("Error clearing campaign history:",y),Ae({title:"Ошибка при очистке истории",description:y.message||"Не удалось удалить записи.",variant:"destructive"})}finally{p(!1),l(!1)}};return a&&r.length===0?i.jsxs("div",{className:"flex justify-center items-center h-32",children:[i.jsx(WT,{className:"h-6 w-6 animate-spin text-muted-foreground"})," ",i.jsx("span",{className:"ml-2 text-muted-foreground",children:"Загрузка истории..."})]}):!r.length&&!a?i.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[i.jsx(Sv,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),"История рассылок пуста."]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-4",children:r.map(y=>{var j;const w=y.scheduled_at?new Date(y.scheduled_at):new Date(y.created_at);y.status==="sent"||y.status;const _=y.status==="failed"||y.status==="partial_error";y.status==="processing"||y.status,y.status;let S=y.status,E="default";switch(y.status){case"sent":case"completed":S="Отправлено",E="success";break;case"failed":case"partial_error":S="Ошибка",E="destructive";break;case"processing":S="В обработке",E="warning";break;case"pending":S="В очереди",E="secondary";break;case"scheduled":S="Запланировано",E="outline";break;case"draft":S="Черновик",E="default";break;default:S=y.status}return i.jsxs(qe,{className:`bg-white shadow-sm rounded-lg overflow-hidden ${_?"border-red-200":"border-gray-200"}`,children:[i.jsx(ht,{className:"px-4 py-3 border-b bg-gray-50",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx(gt,{className:"text-md font-semibold text-gray-800",children:y.title||"Без названия"}),i.jsxs(da,{className:"text-xs text-gray-500",children:["Канал: ",i.jsx("span",{className:"font-medium text-gray-700",children:y.channel||"N/A"})]})]}),i.jsx($t,{variant:E,className:"whitespace-nowrap text-xs",children:S})]})}),i.jsxs(Ge,{className:"p-4 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Дата события: "}),i.jsx("span",{className:"text-gray-700 font-medium",children:og({locale:Da},"dd.MM.yyyy HH:mm")(w)})]}),y.user_id&&i.jsxs("div",{className:"md:text-right",children:[i.jsx("span",{className:"text-gray-500",children:"Ответственный: "}),i.jsx($t,{variant:"outline",className:"text-xs bg-pink-50 border-pink-200 text-pink-700",children:g(y.user_id)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Получателей: "}),i.jsx("span",{className:"text-gray-700 font-medium",children:y.sent_count!==void 0&&y.failed_count!==void 0?y.sent_count+y.failed_count:"N/A"})]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Текст сообщения:"}),i.jsx("div",{className:`mt-1 p-2 rounded bg-gray-50 text-gray-700 border border-gray-200 text-xs leading-relaxed cursor-pointer ${c[y.id]?"":"max-h-10 overflow-hidden prose-sm"}`,onClick:()=>m(y.id),children:i.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:y.message||"Нет текста"})}),!c[y.id]&&(y.message||"").split(`
`).length>2&&i.jsx("button",{onClick:()=>m(y.id),className:"text-xs text-pink-600 hover:underline mt-1",children:"Показать полностью"}),c[y.id]&&i.jsx("button",{onClick:()=>m(y.id),className:"text-xs text-pink-600 hover:underline mt-1",children:"Свернуть"})]}),_&&y.error_details&&i.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-700",children:[i.jsx("strong",{children:"Ошибка:"})," ",typeof y.error_details=="string"?y.error_details:((j=y.error_details)==null?void 0:j.message)||JSON.stringify(y.error_details)]})]})]},y.id)})}),i.jsx(qt,{open:h,onOpenChange:p,children:i.jsxs(Wt,{className:"sm:max-w-md",children:[i.jsxs(Gt,{children:[i.jsxs(Vt,{className:"flex items-center",children:[i.jsx(Dfe,{className:"h-6 w-6 mr-2 text-red-500 flex-shrink-0"}),"Подтвердите очистку"]}),i.jsx(fr,{className:"pt-2",children:"Вы уверены, что хотите удалить всю историю рассылок? Это действие необратимо, и все записи будут удалены навсегда."})]}),i.jsxs(or,{className:"mt-6 flex sm:flex-row flex-col-reverse gap-2 sm:gap-0 justify-end",children:[i.jsx(ne,{variant:"outline",onClick:()=>p(!1),className:"w-full sm:w-auto",disabled:o,children:"Отмена"}),i.jsx(ne,{variant:"destructive",onClick:b,disabled:o,className:"w-full sm:w-auto",children:o?i.jsxs(i.Fragment,{children:[i.jsx(WT,{className:"h-4 w-4 mr-2 animate-spin"})," Очистка..."]}):i.jsxs(i.Fragment,{children:[i.jsx(vf,{className:"h-4 w-4 mr-2"})," Очистить историю"]})})]})]})})]})}),pNe=()=>{var Fi;const[e,t]=x.useState([]),[r,n]=x.useState(""),[a,s]=x.useState(""),[o,l]=x.useState(""),[c,u]=x.useState(!1),[d,f]=x.useState(new Date),[h,p]=x.useState("12:00"),[v,m]=x.useState("UTC+3"),[g,b]=x.useState(!1),[y,w]=x.useState(""),[_,S]=x.useState(!1),E=["😊","❤️","🎉","👍","✨","🌸","💯","🙏","🤗","🥰","✅","🔥","💋","💁‍♀️","🌺","💅","👑","🎁","🌈","💫"],[j,N]=x.useState(!1),[k,C]=x.useState("Поздравляем с Днем Рождения, {name}! Дарим Вам {bonus} бонусов!"),[T,A]=x.useState("С Днем Рождения, {name}! Ваша скидка {discount}% на {usages} посещений в течение {valid_days} дней!"),[B,R]=x.useState("Дорогой(ая) {name}, от всей души поздравляем Вас с днем рождения! Желаем счастья, здоровья и всего наилучшего!"),[P,D]=x.useState(!0),[U,M]=x.useState("10:00"),[F,K]=x.useState("500"),[X,O]=x.useState("bonus"),[W,L]=x.useState("5"),[H,ee]=x.useState("0"),[q,Z]=x.useState("7"),[I,Q]=x.useState("UTC+4"),[ve,z]=x.useState(!1),[we,Re]=x.useState("20"),[Pe,De]=x.useState(!1),[Ne,J]=x.useState("20"),[Y,ae]=x.useState([]),[ge,Se]=x.useState(!1),[te,me]=x.useState("20"),[ke,he]=x.useState([]),[et,nt]=x.useState([]),[Oe,Ye]=x.useState(null),[ye,le]=x.useState([]),[_e,Be]=x.useState(!1),[Ie,it]=x.useState(null),[tt,Ze]=x.useState([]),[ct,St]=x.useState([]),[ie,be]=x.useState(!1),[Je,Et]=x.useState(!1),[Ke,Pt]=x.useState(null),[Ht,pe]=x.useState([]),[ze,yt]=x.useState([]),[Rt,er]=x.useState(!1),[Dt,ar]=x.useState([]),[qr,V]=x.useState(!1),[oe,re]=x.useState({}),[se,ce]=x.useState(!1);x.useState(15);const[fe,Ce]=x.useState(!1),[Fe,Ee]=x.useState([]),[je,Te]=x.useState(!1),[Qe,lt]=x.useState(""),[xt,at]=x.useState(""),[vt,Ut]=x.useState(""),[Wr,Gr]=x.useState(null),[Un,Ua]=x.useState(!1),[za,$i]=x.useState(null),[vo,Bc]=x.useState(!1);x.useState(!1),x.useState(null),x.useState(!1),x.useState(null),x.useState(!1);const[ii,uh]=x.useState(!1),dh=x.useRef(null),fh=async xe=>{V(!0),ar([]);try{if(!(Oe!=null&&Oe.id))return;const Ve=await pr.getUpcomingBirthdays(xe);ar(Ve||[])}catch(Ve){console.error("Error fetching upcoming birthdays:",Ve),Ae({title:"Ошибка загрузки дней рождения",description:Ve.message||"Не удалось получить список именинников.",variant:"destructive"}),ar([])}finally{V(!1)}},Wy=x.useMemo(()=>{const xe=new Set;return et.forEach(Ve=>(Ve.tags||[]).forEach(ut=>xe.add(ut))),Array.from(xe).sort()},[et]),iE=["Новый","Повторный","Активный","Вернувшийся","Потерянный","Неактивный","VIP","С абонементом","С индивидуальной скидкой"];x.useEffect(()=>{(async()=>{const{data:ut,error:It}=await ue.from("clients").select("id, full_name, phone, tags").order("full_name",{ascending:!0});!It&&ut?nt(ut.map(Bt=>({id:Bt.id,name:Bt.full_name||"Имя не указано",phone:Bt.phone,tags:Bt.tags||[]}))):It&&(console.error("Error fetching clients:",It),Ae({title:"Ошибка загрузки клиентов",description:It.message,variant:"destructive"}))})(),(async()=>{const{data:{user:ut}}=await ue.auth.getUser();ut&&Ye({id:ut.id})})()},[]),x.useEffect(()=>{Be(!0),(async()=>{const{data:Ve,error:ut}=await ue.from("integrations").select("id, provider, settings").eq("is_active",!0);if(!ut&&Ve){const It=Ve.filter(gr=>{var Xr,xo;const nr=(xo=(Xr=gr.settings)==null?void 0:Xr.transport)==null?void 0:xo.toLowerCase();return nr==="wamessages"||nr==="whatsapp"||nr==="tgapi"||nr==="telegram"}),Bt=Array.from(new Set(It.map(gr=>{var nr,Xr;return((Xr=(nr=gr.settings)==null?void 0:nr.transport)==null?void 0:Xr.toLowerCase())||"unknown"}))).filter(gr=>gr!=="unknown");le(Bt.map(gr=>({value:gr,label:gr==="wamessages"||gr==="whatsapp"?"WhatsApp":"Telegram"}))),Bt.length===1&&l(Bt[0])}else ut&&(console.error("Error fetching channels:",ut),Ae({title:"Ошибка загрузки каналов",description:ut.message,variant:"destructive"}));Be(!1)})()},[]),x.useEffect(()=>{Oe!=null&&Oe.id&&(async()=>{var xe,Ve,ut,It;try{const Bt=await pr.getAutoGreetingSettings(Oe.id);Bt&&(D(Bt.enabled??!0),C(Bt.template_bonus??"Поздравляем с Днем Рождения, {name}! Дарим Вам {bonus} бонусов!"),A(Bt.template_discount??"С Днем Рождения, {name}! Ваша скидка {discount}% на {usages} посещений в течение {valid_days} дней!"),R(Bt.template_no_gift??"Дорогой(ая) {name}, от всей души поздравляем Вас с днем рождения! Желаем счастья, здоровья и всего наилучшего!"),M(Bt.send_time??"10:00"),O(Bt.gift_type??"bonus"),K(((xe=Bt.bonus_amount)==null?void 0:xe.toString())??"500"),L(((Ve=Bt.discount_percent)==null?void 0:Ve.toString())??"5"),ee(((ut=Bt.discount_usages)==null?void 0:ut.toString())??"0"),Z(((It=Bt.discount_valid_days)==null?void 0:It.toString())??"7"),Q(Bt.timezone??"UTC+4"))}catch(Bt){Ae({title:"Ошибка загрузки настроек автопоздравлений",description:Bt.message,variant:"destructive"})}})()},[Oe]),x.useEffect(()=>{if(!(Oe!=null&&Oe.id)||!Dt.length){re({});return}let xe=!1;return ce(!0),(async()=>{const Ve={};await Promise.all(Dt.map(async ut=>{try{const It=await pr.getTodayAutoGreetingStatus(Oe.id,String(ut.id));Ve[ut.id]=It}catch(It){console.error(`Error fetching status for client ${ut.id}:`,It),Ve[ut.id]="pending"}})),xe||(re(Ve),ce(!1))})(),()=>{xe=!0,ce(!1)}},[Oe==null?void 0:Oe.id,Dt]);const Vy=xe=>{n(Ve=>Ve+xe),S(!1)},oE=async()=>{if(!r){Ae({title:"Ошибка",description:"Сообщение не может быть пустым.",variant:"destructive"});return}if(e.length===0){Ae({title:"Ошибка",description:"Выберите хотя бы одного клиента.",variant:"destructive"});return}if(!o){Ae({title:"Ошибка",description:"Выберите канал для рассылки.",variant:"destructive"});return}if(!d){Ae({title:"Ошибка",description:"Выберите дату для планирования.",variant:"destructive"});return}const[xe,Ve]=h.split(":").map(Number),ut=new Date(d);ut.setHours(xe,Ve,0,0);const It=ut.toISOString(),Bt={user_id:Oe==null?void 0:Oe.id,title:a||`Рассылка от ${new Date().toLocaleString()}`,message:r,channel:o,client_ids:e,status:"scheduled",scheduled_at:It,timezone:v};try{const{data:gr,error:nr}=await ue.from("campaigns").insert([Bt]).select().single();if(nr)throw nr;gr&&(Ae({title:"Рассылка запланирована",description:`Рассылка "${gr.title}" запланирована на ${og({locale:Da},"dd.MM.yyyy HH:mm")(ut)}.

Все запланированные рассылки можно посмотреть во вкладке "История".`}),de(),s(""),n(""),t([]),l(ye.length>0?ye[0].value:""),f(void 0),p("12:00"),u(!1))}catch(gr){const nr=gr;console.error("Error scheduling campaign:",nr),Ae({title:"Ошибка планирования",description:nr.message||"Не удалось запланировать рассылку.",variant:"destructive"})}};x.useEffect(()=>{const xe=async()=>{er(!0);try{const[Ve,ut,It,Bt]=await Promise.all([ue.from("appointments").select("client_id, status, date"),ue.from("client_discounts").select("*"),ue.from("loyalty_user_states").select("id, user_id, program_id, subscription_visits_left, expires_at"),ue.from("loyalty_transactions").select("id, user_id, type, value, expiry_date").in("type",["earn","adjust","manual_add","birthday_bonus","accrual"]).gt("value",0).not("expiry_date","is",null)]);if(Ve.error)throw Ve.error;if(ut.error)throw ut.error;if(It.error)throw It.error;if(Bt.error)throw Bt.error;pe(Ve.data||[]),yt(ut.data||[]),ae(It.data||[]),he((Bt.data||[]).map(gr=>({...gr,created_at:gr.created_at||""})))}catch(Ve){console.error("Error fetching data for filters:",Ve),Ae({title:"Ошибка загрузки данных для фильтров",description:typeof Ve=="string"?Ve:(Ve==null?void 0:Ve.message)||"Неизвестная ошибка",variant:"destructive"})}finally{er(!1)}};Oe!=null&&Oe.id?xe():(pe([]),yt([]),ae([]),he([]),er(!1))},[Oe]);const hh=x.useMemo(()=>ze.reduce((xe,Ve)=>(Ve.client_id&&(xe[Ve.client_id]||(xe[Ve.client_id]=[]),xe[Ve.client_id].push(Ve)),xe),{}),[ze]),il=x.useMemo(()=>Y.reduce((xe,Ve)=>(Ve.user_id&&(xe[Ve.user_id]||(xe[Ve.user_id]=[]),xe[Ve.user_id].push(Ve)),xe),{}),[Y]),Hy=x.useMemo(()=>ke.reduce((xe,Ve)=>(Ve.user_id&&(xe[Ve.user_id]||(xe[Ve.user_id]=[]),xe[Ve.user_id].push(Ve)),xe),{}),[ke]),pd=x.useMemo(()=>{Rt&&(Ie||tt.length>0);const xe=new Date;return et.filter(Ve=>{if(Ie&&BEe({id:Ve.id,name:Ve.name,phone:Ve.phone,tags:Ve.tags},Ht,il[Ve.id]||[],hh)!==Ie)return!1;if(tt.length>0){const ut=Ve.tags||[];if(!tt.some(It=>ut.includes(It)))return!1}if(y){const ut=y.toLowerCase();if(!Ve.name.toLowerCase().includes(ut)&&!(Ve.phone||"").toLowerCase().includes(ut))return!1}return!(ve&&Number(we)>0&&!(hh[Ve.id]||[]).some(Bt=>{if(!Bt.valid_to)return!1;const nr=(new Date(Bt.valid_to).getTime()-xe.getTime())/(1e3*60*60*24);return nr>=0&&nr<=Number(we)})||Pe&&Number(Ne)>0&&!(il[Ve.id]||[]).some(Bt=>{if(!Bt.expires_at)return!1;const nr=(new Date(Bt.expires_at).getTime()-xe.getTime())/(1e3*60*60*24);return nr>=0&&nr<=Number(Ne)})||ge&&Number(te)>0&&!(Hy[Ve.id]||[]).some(Bt=>{if(!Bt.expiry_date||Bt.value<=0)return!1;const nr=(new Date(Bt.expiry_date).getTime()-xe.getTime())/(1e3*60*60*24);return nr>=0&&nr<=Number(te)}))})},[et,Ie,tt,y,Ht,hh,il,Hy,Rt,ve,we,Pe,Ne,ge,te]),qy=()=>e.length===0?"Никто не выбран":e.length>3?`Выбрано: ${e.length} клиентов`:e.map(xe=>{var Ve;return((Ve=et.find(ut=>ut.id===xe))==null?void 0:Ve.name)||"Неизвестный"}).join(", "),b0=xe=>{t(Ve=>Ve.includes(xe)?Ve.filter(ut=>ut!==xe):[...Ve,xe])},Gy=async()=>{if(Oe!=null&&Oe.id)try{await pr.upsertAutoGreetingSettings(Oe.id,{enabled:P,template_bonus:k,template_discount:T,template_no_gift:B,send_time:U,gift_type:X,bonus_amount:X==="bonus"?Number(F)||0:void 0,discount_percent:X==="discount"&&Number(W)||void 0,discount_usages:X==="discount"?Number(H)||0:void 0,discount_valid_days:X==="discount"&&Number(q)||void 0,timezone:I}),Ae({title:"Настройки сохранены",description:`Автоматические поздравления ${P?"включены":"отключены"}`}),N(!1)}catch(xe){Ae({title:"Ошибка сохранения настроек",description:xe.message,variant:"destructive"})}},Ky=async()=>{if(!a||!r||!o||e.length===0){Ae({title:"Ошибка",description:"Заполните все поля: заголовок, сообщение, канал и выберите клиентов для отправки рассылки.",variant:"destructive"});return}if(!Oe){Ae({title:"Ошибка",description:"Не удалось определить пользователя.",variant:"destructive"});return}const xe={user_id:Oe.id,title:a,message:r,channel:o,client_ids:e,status:"processing"};try{const{data:Ve,error:ut}=await ue.from("campaigns").insert([xe]).select().single();if(ut)throw ut;if(Ve){Ae({title:"Рассылка создана",description:`Рассылка "${Ve.title}" поставлена в очередь на отправку.`}),de();const{error:It}=await ue.functions.invoke("send-campaign-messages",{body:{campaignId:Ve.id}});It?(console.error("Error invoking send-campaign-messages function:",It),await ue.from("campaigns").update({status:"failed",error_details:{message:It.message}}).eq("id",Ve.id),Ae({title:"Ошибка запуска отправки",description:`Не удалось запустить обработку рассылки: ${It.message}`,variant:"destructive"}),de()):Ae({title:"Отправка запущена",description:`Обработка рассылки "${Ve.title}" началась.`}),s(""),n(""),t([]),l(ye.length>0?ye[0].value:"")}}catch(Ve){const ut=Ve;console.error("Error sending campaign:",ut),Ae({title:"Ошибка отправки рассылки",description:ut.message||"Произошла неизвестная ошибка.",variant:"destructive"}),ut.details&&console.error("Details:",ut.details)}},de=async()=>{if(be(!0),!(Oe!=null&&Oe.id)){be(!1);return}const{data:xe,error:Ve}=await ue.from("campaigns").select("*").eq("user_id",Oe.id).order("created_at",{ascending:!1});Ve?(console.error("Error fetching campaign history:",Ve),Ae({title:"Ошибка загрузки истории",description:Ve.message,variant:"destructive"}),St([])):St(xe||[]),be(!1)};x.useEffect(()=>{Oe!=null&&Oe.id&&de()},[Oe]);const We=[{value:"UTC+3",label:"Москва (UTC+3)"},{value:"UTC+4",label:"Самара, Астрахань (UTC+4)"},{value:"UTC+5",label:"Екатеринбург (UTC+5)"},{value:"UTC+7",label:"Новосибирск (UTC+7)"},{value:"UTC+8",label:"Иркутск (UTC+8)"},{value:"UTC+9",label:"Якутск (UTC+9)"},{value:"UTC+10",label:"Владивосток (UTC+10)"}],rt=async()=>{if(Oe!=null&&Oe.id){Te(!0);try{const{data:xe,error:Ve}=await ue.from("message_templates").select("*").eq("user_id",Oe.id).order("created_at",{ascending:!1});if(Ve)throw Ve;Ee(xe||[])}catch(xe){const Ve=xe instanceof Error?xe.message:"Произошла неизвестная ошибка";Ae({title:"Ошибка загрузки шаблонов",description:Ve,variant:"destructive"})}finally{Te(!1)}}};x.useEffect(()=>{Oe!=null&&Oe.id&&(rt(),fh(30))},[Oe]);const kt=()=>{Ut(r),at(a),lt(""),Gr(null),Ce(!0)},Mt=async()=>{if(Oe!=null&&Oe.id){if(!Qe.trim()||!vt.trim()||!xt.trim()){Ae({title:"Ошибка",description:"Название, заголовок и текст шаблона не могут быть пустыми.",variant:"destructive"});return}Te(!0);try{if(Wr){const{error:xe}=await ue.from("message_templates").update({name:Qe.trim(),title:xt.trim(),content:vt.trim(),user_id:Oe.id}).eq("id",Wr.id).eq("user_id",Oe.id);if(xe)throw xe;Ae({title:"Шаблон обновлен"})}else{const{error:xe}=await ue.from("message_templates").insert([{name:Qe.trim(),title:xt.trim(),content:vt.trim(),user_id:Oe.id}]);if(xe)if(xe.code==="23505")Ae({title:"Ошибка сохранения",description:"Шаблон с таким именем уже существует.",variant:"destructive"});else throw xe;else Ae({title:"Шаблон сохранен"})}rt(),lt(""),at(""),Gr(null)}catch(xe){const Ve=xe instanceof Error?xe.message:"Произошла неизвестная ошибка";Ae({title:"Ошибка сохранения шаблона",description:Ve,variant:"destructive"})}finally{Te(!1)}}},Lt=xe=>{Gr(xe),lt(xe.name),at(xe.title||""),Ut(xe.content)},xn=async()=>{if(!(!za||!(Oe!=null&&Oe.id))){Te(!0);try{const{error:xe}=await ue.from("message_templates").delete().eq("id",za.id).eq("user_id",Oe.id);if(xe)throw xe;Ae({title:"Шаблон удален"}),rt(),Ua(!1),$i(null)}catch(xe){const Ve=xe instanceof Error?xe.message:"Произошла неизвестная ошибка";Ae({title:"Ошибка удаления шаблона",description:Ve,variant:"destructive"})}finally{Te(!1)}}},Ea=xe=>{$i(xe),Ua(!0)},Xn=(xe,Ve)=>{const ut={date:new Date().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),time:new Date().toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})},It=Ode(xe,ut);n(It),s(Ve),Ce(!1)},fs=xe=>{Ut(Ve=>Ve+xe),Bc(!1)},gd=xe=>{X==="bonus"?C(Ve=>Ve+xe):X==="discount"?A(Ve=>Ve+xe):R(Ve=>Ve+xe),uh(!1)};return i.jsxs(fa,{defaultValue:"campaigns",className:"w-full",children:[i.jsxs(ta,{className:"mb-6",children:[i.jsxs(Tt,{value:"campaigns",children:[i.jsx(VT,{className:"w-4 h-4 mr-2"}),"Создать рассылку"]}),i.jsxs(Tt,{value:"history",children:[i.jsx(jfe,{className:"w-4 h-4 mr-2"}),"История"]}),i.jsxs(Tt,{value:"auto_greetings",children:[i.jsx(Kp,{className:"w-4 h-4 mr-2"}),"Авто-поздравления"]}),i.jsxs(Tt,{value:"auto_notifications",children:[i.jsx(ij,{className:"w-4 h-4 mr-2"}),"Автооповещения"]})]}),i.jsx(Ft,{value:"campaigns",children:i.jsxs(qe,{children:[i.jsxs(ht,{children:[i.jsx(gt,{children:"Создать новую рассылку"}),i.jsx(da,{children:"Выберите клиентов, канал и составьте сообщение для отправки."})]}),i.jsxs(Ge,{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Xe,{htmlFor:"clients",children:["Клиенты (",e.length,")"]}),i.jsxs(qt,{open:g,onOpenChange:b,children:[i.jsx(Dv,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[i.jsx(Vu,{className:"mr-2 h-4 w-4"}),qy()]})}),i.jsxs(Wt,{className:"sm:max-w-[425px] md:max-w-[600px] lg:max-w-[800px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Выберите клиентов"}),i.jsxs(fr,{children:["Используйте поиск для фильтрации. Выбранные клиенты: ",e.length]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-2 items-center",children:[i.jsxs(Tr,{value:Ie??"all",onValueChange:xe=>it(xe==="all"?null:xe),children:[i.jsx(wr,{className:"w-44",children:i.jsx(Ar,{placeholder:"Статус клиента"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"all",children:"Все статусы"}),iE.map(xe=>i.jsx(_t,{value:xe,children:xe},xe))]})]}),i.jsxs(pi,{children:[i.jsx(gi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:"flex items-center gap-2",children:[i.jsx(lj,{className:"h-4 w-4"}),tt.length>0?`Теги (${tt.length})`:"Теги",i.jsx(pf,{className:"h-4 w-4"})]})}),i.jsxs(Ks,{className:"w-56 p-2",children:[i.jsx("div",{className:"font-medium mb-2",children:"Теги клиентов"}),i.jsxs("div",{className:"flex flex-col gap-1 max-h-48 overflow-auto",children:[Wy.length===0&&i.jsx("div",{className:"text-muted-foreground text-sm",children:"Нет тегов"}),Wy.map(xe=>i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx(Hn,{checked:tt.includes(xe),onCheckedChange:Ve=>{Ze(ut=>Ve?[...ut,xe]:ut.filter(It=>It!==xe))}}),i.jsx("span",{children:xe})]},xe))]}),tt.length>0&&i.jsx(ne,{variant:"ghost",size:"sm",className:"mt-2",onClick:()=>Ze([]),children:"Сбросить"})]})]}),i.jsx(ne,{variant:"outline",size:"sm",className:"ml-2",onClick:()=>{const xe=pd.map(ut=>ut.id),Ve=xe.every(ut=>e.includes(ut))&&xe.length>0;t(Ve?e.filter(ut=>!xe.includes(ut)):Array.from(new Set([...e,...xe])))},disabled:pd.length===0,children:(()=>{const xe=pd.map(ut=>ut.id);return xe.every(ut=>e.includes(ut))&&xe.length>0?"Снять выделение":"Добавить всех"})()})]}),i.jsx(G1,{type:"single",collapsible:!0,className:"w-full mb-2",children:i.jsxs(Ag,{value:"expiry-filters",className:"border-b-0",children:[i.jsxs(Pg,{className:"text-sm hover:no-underline justify-start py-2 text-muted-foreground font-medium",children:[i.jsx(HT,{className:"mr-2 h-4 w-4"}),"Фильтры по срокам действия"]}),i.jsx(Og,{className:"pt-1 pb-2",children:i.jsxs("div",{className:"flex flex-col gap-3 p-2 border rounded-md bg-muted/50",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Hn,{checked:ve,onCheckedChange:xe=>z(!!xe),id:"filterByDiscountExpiryModal"}),i.jsx(Xe,{htmlFor:"filterByDiscountExpiryModal",className:"text-xs cursor-pointer",children:"Скидка сгорает в ближайшие"}),i.jsx($e,{type:"number",min:1,max:365,value:we,onChange:xe=>Re(xe.target.value),className:"w-16 h-7 px-1 text-xs"}),i.jsx("span",{className:"text-xs",children:"дней"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Hn,{checked:Pe,onCheckedChange:xe=>De(!!xe),id:"filterBySubscriptionExpiryModal"}),i.jsx(Xe,{htmlFor:"filterBySubscriptionExpiryModal",className:"text-xs cursor-pointer",children:"Абонемент сгорает в ближайшие"}),i.jsx($e,{type:"number",min:1,max:365,value:Ne,onChange:xe=>J(xe.target.value),className:"w-16 h-7 px-1 text-xs"}),i.jsx("span",{className:"text-xs",children:"дней"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Hn,{checked:ge,onCheckedChange:xe=>Se(!!xe),id:"filterByBonusExpiryModal"}),i.jsx(Xe,{htmlFor:"filterByBonusExpiryModal",className:"text-xs cursor-pointer",children:"Бонусы сгорают в ближайшие"}),i.jsx($e,{type:"number",min:1,max:365,value:te,onChange:xe=>me(xe.target.value),className:"w-16 h-7 px-1 text-xs"}),i.jsx("span",{className:"text-xs",children:"дней"})]})]})})]})}),i.jsxs(Uj,{className:"rounded-lg border shadow-md",children:[i.jsx(zj,{value:y,onValueChange:w,placeholder:"Поиск по имени или телефону..."}),i.jsxs(Wj,{children:[i.jsx(Vj,{children:"Клиенты не найдены."}),i.jsx(Hj,{heading:"Список клиентов",children:pd.map(xe=>i.jsxs(qj,{onSelect:()=>b0(xe.id),className:"flex items-center justify-between",children:[i.jsxs("div",{children:[xe.name,xe.phone&&i.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",xe.phone,")"]})]}),e.includes(xe.id)&&i.jsx(Zx,{className:"h-4 w-4 text-primary"})]},xe.id))})]})]}),i.jsx(or,{children:i.jsx(ne,{onClick:()=>b(!1),children:"Готово"})})]})]}),e.length>0&&i.jsxs("div",{className:"mt-2 space-x-1 space-y-1",children:[e.slice(0,5).map(xe=>{const Ve=et.find(ut=>ut.id===xe);return Ve?i.jsxs($t,{variant:"secondary",className:"mr-1",children:[Ve.name,i.jsx(ne,{variant:"ghost",size:"icon",className:"h-4 w-4 ml-1 p-0",onClick:()=>b0(xe),children:i.jsx(Oc,{className:"h-3 w-3"})})]},xe):null}),e.length>5&&i.jsxs($t,{variant:"outline",children:["...и еще ",e.length-5]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"channel",children:"Канал"}),i.jsxs(Tr,{onValueChange:l,value:o,disabled:_e,children:[i.jsx(wr,{id:"channel",children:i.jsx(Ar,{placeholder:_e?"Загрузка каналов...":"Выберите канал"})}),i.jsx(_r,{children:ye.length>0?ye.map(xe=>i.jsx(_t,{value:xe.value,children:xe.label},xe.value)):i.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"Нет активных каналов"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"campaignTitle",children:"Заголовок рассылки (для истории)"}),i.jsx($e,{id:"campaignTitle",placeholder:"Например, 'Акция на маникюр - Июль'",value:a,onChange:xe=>s(xe.target.value)})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(Xe,{htmlFor:"campaignMessage",children:"Текст сообщения"}),i.jsxs(ne,{variant:"outline",size:"sm",onClick:kt,children:[i.jsx(tg,{className:"mr-2 h-4 w-4"}),"Шаблоны"]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(rn,{id:"campaignMessage",placeholder:"Введите текст вашего сообщения...",value:r,onChange:xe=>n(xe.target.value),rows:6,className:"pr-10"}),i.jsxs(pi,{open:_,onOpenChange:S,children:[i.jsx(gi,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"icon",className:"absolute right-2 bottom-2 h-8 w-8",children:i.jsx(W1,{className:"h-5 w-5"})})}),i.jsx(Ks,{className:"w-auto p-0",children:i.jsx("div",{className:"grid grid-cols-5 gap-1 p-2",children:E.map(xe=>i.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>Vy(xe),className:"text-xl",children:xe},xe))})})]})]}),i.jsx(G1,{type:"single",collapsible:!0,className:"w-full mt-1",children:i.jsxs(Ag,{value:"template-variables-campaign",className:"border-none",children:[i.jsx(Pg,{className:"text-xs hover:no-underline justify-start py-1 text-muted-foreground",children:i.jsx("span",{className:"font-normal",children:"Доступные переменные для шаблона"})}),i.jsx(Og,{className:"pt-1 pb-0",children:i.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 bg-muted p-2 rounded-md",children:[i.jsxs("div",{children:[i.jsx("b",{children:"{name}"})," — имя клиента."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{upcoming_appointment_date}"})," — дата ближайшей предстоящей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{upcoming_appointment_time}"})," — время ближайшей предстоящей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{upcoming_specialist_name}"})," — имя специалиста по ближ. предстоящей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{upcoming_service_name}"})," — название услуги по ближ. предстоящей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{past_appointment_date}"})," — дата последней прошедшей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{past_appointment_time}"})," — время последней прошедшей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{past_specialist_name}"})," — имя специалиста по последней прошедшей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{past_service_name}"})," — название услуги по последней прошедшей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{review_link}"})," — ссылка на страницу оставления отзыва."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{booking_link}"})," — ссылка на страницу онлайн-записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{client_bonus_balance}"})," — текущий бонусный баланс клиента."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{client_discount_value}"})," — текущая индивидуальная скидка клиента."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{client_discount_expiry_date}"})," — дата сгорания инд. скидки клиента."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{client_bonus_expiry_date}"})," — дата сгорания бонусов клиента (если есть)."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{client_subscription_expiry_date}"})," — дата сгорания абонемента клиента."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{client_subscription_visits_remaining}"})," — ост. посещений по абонементу."]})]})})]})})]})]}),i.jsxs(Go,{className:"flex justify-between",children:[i.jsxs(qt,{open:c,onOpenChange:u,children:[i.jsx(Dv,{asChild:!0,children:i.jsxs(ne,{variant:"outline",children:[i.jsx(Ow,{className:"mr-2 h-4 w-4"}),"Запланировать"]})}),i.jsxs(Wt,{className:"sm:max-w-[425px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Запланировать рассылку"}),i.jsx(fr,{children:"Выберите дату и время для автоматической отправки."})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"schedule-date",className:"text-right",children:"Дата"}),i.jsxs(pi,{children:[i.jsx(gi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:Ue("col-span-3 justify-start text-left font-normal",!d&&"text-muted-foreground"),children:[i.jsx(Ow,{className:"mr-2 h-4 w-4"}),d?og({locale:Da},"PPP")(d):i.jsx("span",{children:"Выберите дату"})]})}),i.jsx(Ks,{className:"w-auto p-0",children:i.jsx(Rc,{mode:"single",selected:d,onSelect:f,initialFocus:!0})})]})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"schedule-time",className:"text-right",children:"Время"}),i.jsx($e,{id:"schedule-time",type:"time",value:h,onChange:xe=>p(xe.target.value),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"campaign-timezone-select",className:"text-right",children:"Часовой пояс"}),i.jsxs(Tr,{value:v,onValueChange:m,children:[i.jsx(wr,{id:"campaign-timezone-select",className:"col-span-3",children:i.jsx(Ar,{placeholder:"Выберите часовой пояс"})}),i.jsx(_r,{children:We.map(xe=>i.jsx(_t,{value:xe.value,children:xe.label},xe.value))})]})]})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:()=>u(!1),children:"Отмена"}),i.jsx(ne,{onClick:oE,children:"Запланировать"})]})]})]}),i.jsxs(ne,{onClick:Ky,children:[i.jsx(VT,{className:"mr-2 h-4 w-4"}),"Отправить сейчас"]})]})]})}),i.jsx(Ft,{value:"history",children:i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx(gt,{children:"История рассылок"}),i.jsx(da,{children:"Просмотр ранее созданных и отправленных кампаний."})]}),i.jsxs(ne,{variant:"destructive",onClick:()=>{var xe;return(xe=dh.current)==null?void 0:xe.openClearHistoryDialog()},children:[i.jsx(vf,{className:"h-4 w-4 mr-2"}),"Очистить историю"]})]})}),i.jsx(Ge,{children:i.jsx(mNe,{ref:dh})})]})}),i.jsx(qt,{open:Je,onOpenChange:Et,children:i.jsxs(Wt,{className:"sm:max-w-lg",children:[i.jsxs(Gt,{children:[i.jsxs(Vt,{children:["Детали кампании: ",Ke==null?void 0:Ke.title]}),i.jsx(fr,{children:"Подробная информация о выбранной рассылке."})]}),Ke&&i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Сообщение:"})," ",i.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:Ke.message})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Канал:"})," ",i.jsx($t,{variant:"outline",children:Ke.channel})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Статус:"})," ",i.jsx($t,{variant:Ke.status==="sent"||Ke.status==="completed"?"success":Ke.status==="scheduled"?"outline":Ke.status==="pending"||Ke.status==="processing"?"secondary":Ke.status==="failed"||Ke.status==="partial_error"?"destructive":"default",children:Ke.status})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Кол-во клиентов:"})," ",((Fi=Ke.client_ids)==null?void 0:Fi.length)||0]}),Ke.scheduled_at&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Запланировано на:"})," ",og({locale:Da},"dd.MM.yyyy HH:mm")(new Date(Ke.scheduled_at))]}),Ke.created_at&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Создано:"})," ",og({locale:Da},"dd.MM.yyyy HH:mm")(new Date(Ke.created_at))]}),Ke.sent_count!==void 0&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Успешно отправлено:"})," ",Ke.sent_count]}),Ke.failed_count!==void 0&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Не удалось отправить:"})," ",Ke.failed_count]}),Ke.error_details&&i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Детали ошибок:"}),i.jsx("pre",{className:"mt-1 p-2 bg-muted rounded-md text-xs overflow-x-auto",children:typeof Ke.error_details=="string"?Ke.error_details:JSON.stringify(Ke.error_details,null,2)})]})]}),i.jsx(or,{children:i.jsx(ne,{variant:"outline",onClick:()=>Et(!1),children:"Закрыть"})})]})}),i.jsxs(Ft,{value:"auto_greetings",children:[i.jsxs(qe,{children:[i.jsxs(ht,{children:[i.jsx(gt,{children:"Автоматические поздравления"}),i.jsx(da,{children:"Настройте автоматическую отправку поздравлений клиентам."})]}),i.jsxs(Ge,{children:[Oe&&i.jsxs("div",{className:"mb-6 p-4 border rounded-lg shadow-sm bg-slate-50",children:[i.jsx("h4",{className:"text-md font-semibold mb-3 text-gray-700",children:"Текущие настройки автопоздравлений:"}),i.jsxs("div",{className:"space-y-1.5 text-sm text-gray-600",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-medium",children:"Статус:"}),i.jsx($t,{variant:P?"success":"outline",className:P?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600",children:P?"Активно":"Неактивно"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-medium",children:"Время отправки:"}),i.jsx("span",{children:U||"Не указано"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-medium",children:"Тип подарка:"}),i.jsx("span",{className:"capitalize",children:X==="bonus"?"Бонус":X==="discount"?"Скидка":X==="none"?"Без подарка":"Не указан"})]}),X==="bonus"&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-medium",children:"Бонусных баллов:"}),i.jsx("span",{children:F||"0"})]}),X==="discount"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-medium",children:"Процент скидки:"}),i.jsxs("span",{children:[W||"0","%"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-medium",children:"Кол-во применений:"}),i.jsx("span",{children:H==="0"||!H?"Неограниченно":`${H}`})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-medium",children:"Срок действия скидки:"}),i.jsxs("span",{children:[q||"0"," дней"]})]})]}),X==="none"&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-medium",children:"Текст поздравления:"}),i.jsx("span",{children:B||"Не указан"})]}),P&&i.jsxs("div",{className:"pt-2",children:[i.jsxs("p",{className:"font-medium",children:['Текущий шаблон для "',X==="bonus"?"Бонуса":X==="discount"?"Скидки":"Поздравления без подарка",'":']}),i.jsx("p",{className:"text-xs text-muted-foreground p-2 border rounded-md bg-background whitespace-pre-wrap mt-1",children:X==="bonus"?k:X==="discount"?T:B})]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"font-semibold",children:"Ближайшие дни рождения"}),i.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>fh(30),disabled:qr,children:[i.jsx(Si,{className:"mr-2 h-4 w-4"}),"Обновить"]})]}),qr?i.jsxs("div",{className:"flex justify-center items-center h-20 text-muted-foreground",children:[i.jsx(Si,{className:"mr-2 h-5 w-5 animate-spin"})," Загрузка..."]}):Dt.length===0?i.jsx("p",{className:"text-center text-muted-foreground",children:"Нет ближайших дней рождения."}):i.jsxs(ks,{children:[i.jsx(Ts,{children:i.jsxs(Lr,{children:[i.jsx(pt,{children:"Клиент"}),i.jsx(pt,{children:"Дата рождения"}),i.jsx(pt,{children:"Телефон"}),i.jsx(pt,{children:"Статус"})]})}),i.jsx(As,{children:Dt.map(xe=>{const Ve=xe.birthdate?new Date(xe.birthdate):null,ut=Ve&&!isNaN(Ve.getTime())?Ve.toLocaleDateString("ru-RU"):"-";return i.jsxs(Lr,{children:[i.jsx(dt,{children:xe.full_name}),i.jsx(dt,{children:ut}),i.jsx(dt,{children:xe.phone?Rde(xe.phone):"-"}),i.jsx(dt,{children:se&&oe[xe.id]===void 0?i.jsx($t,{variant:"outline",className:"animate-pulse",children:"Загрузка..."}):i.jsxs($t,{variant:oe[xe.id]==="sent"?"success":oe[xe.id]==="failed"?"destructive":oe[xe.id]==="skipped"?"secondary":"outline",children:[oe[xe.id]==="sent"&&"Отправлено",oe[xe.id]==="failed"&&"Ошибка",oe[xe.id]==="skipped"&&"Пропущено",oe[xe.id]==="pending"&&"Ожидает",!oe[xe.id]&&"Ожидает"]})})]},xe.id)})})]})]}),i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{children:"Автопоздравления"}),i.jsx("input",{type:"checkbox",checked:P,onChange:xe=>D(xe.target.checked)})]}),i.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>N(!0),children:[i.jsx(HT,{className:"mr-2 h-4 w-4"})," Настроить"]})]})]})]}),i.jsx(qt,{open:j,onOpenChange:N,children:i.jsxs(Wt,{className:"sm:max-w-md",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Настройки автопоздравлений"}),i.jsx(fr,{children:"Укажите шаблон сообщения, время и тип подарка."})]}),i.jsxs("div",{className:"space-y-4 py-2",children:[i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"greetingTemplate",children:"Шаблон сообщения"}),i.jsxs("div",{className:"relative",children:[" ",i.jsx(rn,{id:"greetingTemplate",value:X==="bonus"?k:X==="discount"?T:B,onChange:xe=>{X==="bonus"?C(xe.target.value):X==="discount"?A(xe.target.value):R(xe.target.value)},rows:5,className:"pr-10"}),i.jsxs(pi,{open:ii,onOpenChange:uh,children:[i.jsx(gi,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"icon",className:"absolute right-2 bottom-2 h-8 w-8",children:i.jsx(W1,{className:"h-5 w-5"})})}),i.jsx(Ks,{className:"w-auto p-0",children:i.jsxs("div",{className:"grid grid-cols-5 gap-1 p-2",children:[" ",E.map(xe=>i.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>gd(xe),className:"text-xl",children:xe},xe))]})})]})]})]}),i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"autoGreetingTime",children:"Время отправки"}),i.jsx($e,{id:"autoGreetingTime",type:"time",value:U,onChange:xe=>M(xe.target.value)})]}),i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"autoGreetingTimezone",children:"Часовой пояс"}),i.jsxs(Tr,{value:I,onValueChange:Q,children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите часовой пояс"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"UTC+3",children:"Москва (UTC+3)"}),i.jsx(_t,{value:"UTC+4",children:"Самара, Астрахань (UTC+4)"}),i.jsx(_t,{value:"UTC+5",children:"Екатеринбург (UTC+5)"}),i.jsx(_t,{value:"UTC+7",children:"Новосибирск (UTC+7)"}),i.jsx(_t,{value:"UTC+8",children:"Иркутск (UTC+8)"}),i.jsx(_t,{value:"UTC+9",children:"Якутск (UTC+9)"}),i.jsx(_t,{value:"UTC+10",children:"Владивосток (UTC+10)"}),i.jsx(_t,{value:"UTC",children:"UTC (Гринвич)"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{children:"Тип подарка"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(ne,{variant:X==="bonus"?"default":"outline",onClick:()=>O("bonus"),children:"Бонус"}),i.jsx(ne,{variant:X==="discount"?"default":"outline",onClick:()=>O("discount"),children:"Скидка"}),i.jsx(ne,{variant:X==="none"?"default":"outline",onClick:()=>O("none"),children:"Без подарка"})," "]})]}),X==="bonus"&&i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"autoGreetingBonus",children:"Бонусные баллы"}),i.jsx($e,{id:"autoGreetingBonus",type:"number",min:0,value:F,onChange:xe=>K(xe.target.value)})]}),X==="discount"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"autoGreetingDiscountPercent",children:"Скидка (%)"}),i.jsx($e,{id:"autoGreetingDiscountPercent",type:"number",min:1,max:100,value:W,onChange:xe=>L(xe.target.value)})]}),i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"autoGreetingDiscountUsages",children:"Кол-во применений (0 = неогр.)"}),i.jsx($e,{id:"autoGreetingDiscountUsages",type:"number",min:0,value:H,onChange:xe=>ee(xe.target.value)})]}),i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"autoGreetingDiscountValidDays",children:"Срок действия скидки (дней)"}),i.jsx($e,{id:"autoGreetingDiscountValidDays",type:"number",min:1,value:q,onChange:xe=>Z(xe.target.value)})]})]})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:()=>N(!1),children:"Отмена"}),i.jsx(ne,{onClick:Gy,children:"Сохранить"})]})]})})]}),i.jsx(qt,{open:fe,onOpenChange:Ce,children:i.jsxs(Wt,{className:"sm:max-w-2xl md:max-w-3xl lg:max-w-4xl max-h-[80vh] flex flex-col",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Шаблоны сообщений"}),i.jsx(fr,{children:Wr?"Отредактируйте существующий шаблон или ":"Создайте новый шаблон или выберите существующий для использования."})]}),i.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 space-y-6 py-4",children:[i.jsxs(qe,{className:"shadow-md",children:[i.jsx(ht,{children:i.jsx(gt,{className:"text-lg",children:Wr?"Редактировать шаблон":"Создать новый шаблон"})}),i.jsxs(Ge,{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"templateName",children:"Название шаблона"}),i.jsx($e,{id:"templateName",value:Qe,onChange:xe=>lt(xe.target.value),placeholder:"Например, 'Приветственное сообщение'"})]}),i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"templateTitle",children:"Заголовок сообщения"}),i.jsx($e,{id:"templateTitle",value:xt,onChange:xe=>at(xe.target.value),placeholder:"Введите заголовок для рассылки"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Xe,{htmlFor:"templateContent",children:"Текст шаблона"}),i.jsx(rn,{id:"templateContent",value:vt,onChange:xe=>Ut(xe.target.value),rows:5,placeholder:"Введите текст вашего шаблона здесь...",className:"pr-10"}),i.jsxs(pi,{open:vo,onOpenChange:Bc,children:[i.jsx(gi,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"icon",className:"absolute right-2 bottom-2 h-8 w-8",children:i.jsx(W1,{className:"h-5 w-5"})})}),i.jsx(Ks,{className:"w-auto p-0",children:i.jsx("div",{className:"grid grid-cols-5 gap-1 p-2",children:E.map(xe=>i.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>fs(xe),className:"text-xl",children:xe},xe))})})]})]}),i.jsx(G1,{type:"single",collapsible:!0,className:"w-full mt-1",children:i.jsxs(Ag,{value:"template-variables-modal",className:"border-none",children:[i.jsx(Pg,{className:"text-xs hover:no-underline justify-start py-1 text-muted-foreground",children:i.jsx("span",{className:"font-normal",children:"Доступные переменные для шаблона"})}),i.jsx(Og,{className:"pt-1 pb-0",children:i.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 bg-muted p-2 rounded-md",children:[i.jsxs("div",{children:[i.jsx("b",{children:"{name}"})," — имя клиента."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{upcoming_appointment_date}"})," — дата ближайшей предстоящей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{upcoming_appointment_time}"})," — время ближайшей предстоящей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{upcoming_specialist_name}"})," — имя специалиста по ближ. предстоящей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{upcoming_service_name}"})," — название услуги по ближ. предстоящей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{past_appointment_date}"})," — дата последней прошедшей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{past_appointment_time}"})," — время последней прошедшей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{past_specialist_name}"})," — имя специалиста по последней прошедшей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{past_service_name}"})," — название услуги по последней прошедшей записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{review_link}"})," — ссылка на страницу оставления отзыва."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{booking_link}"})," — ссылка на страницу онлайн-записи."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{client_bonus_balance}"})," — текущий бонусный баланс клиента."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{client_discount_value}"})," — текущая индивидуальная скидка клиента."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{client_discount_expiry_date}"})," — дата сгорания инд. скидки клиента."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{client_bonus_expiry_date}"})," — дата сгорания бонусов клиента (если есть)."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{client_subscription_expiry_date}"})," — дата сгорания абонемента клиента."]}),i.jsxs("div",{children:[i.jsx("b",{children:"{client_subscription_visits_remaining}"})," — ост. посещений по абонементу."]})]})})]})})]}),i.jsxs(Go,{className:"flex justify-end gap-2",children:[Wr&&i.jsx(ne,{variant:"outline",onClick:()=>{Gr(null),lt(""),at(a),Ut(r)},children:"Отменить редактирование"}),i.jsx(ne,{onClick:Mt,disabled:je,children:je?"Сохранение...":Wr?"Обновить шаблон":"Сохранить шаблон"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-semibold mb-3",children:"Сохраненные шаблоны"}),je&&i.jsx("p",{children:"Загрузка шаблонов..."}),!je&&Fe.length===0&&i.jsx("p",{className:"text-muted-foreground",children:"У вас еще нет сохраненных шаблонов."}),!je&&Fe.length>0&&i.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-1",children:Fe.map(xe=>i.jsxs(qe,{className:"bg-slate-50/70 hover:shadow-md transition-shadow",children:[i.jsxs(ht,{className:"pb-2 pt-3",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx(gt,{className:"text-base leading-tight",children:xe.name}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(ne,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>Lt(xe),title:"Редактировать",children:i.jsx(Dw,{className:"h-4 w-4 text-blue-600"})}),i.jsx(ne,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>Ea(xe),title:"Удалить",children:i.jsx(vf,{className:"h-4 w-4 text-red-600"})})]})]}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Заголовок: ",i.jsx("span",{className:"font-medium",children:xe.title})]})]}),i.jsx(Ge,{className:"pb-3",children:i.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-wrap truncate max-h-20 overflow-hidden",children:xe.content})}),i.jsx(Go,{className:"pb-3 pt-0",children:i.jsx(ne,{variant:"outline",size:"sm",onClick:()=>Xn(xe.content,xe.title),className:"w-full",children:"Использовать этот шаблон"})})]},xe.id))})]})]}),i.jsx(or,{className:"mt-auto pt-4 border-t",children:i.jsx(ne,{variant:"outline",onClick:()=>Ce(!1),children:"Закрыть"})})]})}),i.jsx(qt,{open:Un,onOpenChange:Ua,children:i.jsxs(Wt,{className:"sm:max-w-md",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Подтвердить удаление"}),i.jsxs(fr,{children:['Вы уверены, что хотите удалить шаблон "',za==null?void 0:za.name,'"? Это действие необратимо.']})]}),i.jsxs(or,{className:"gap-2",children:[i.jsx(ne,{variant:"outline",onClick:()=>Ua(!1),disabled:je,children:"Отмена"}),i.jsx(ne,{variant:"destructive",onClick:xn,disabled:je,children:je?"Удаление...":"Удалить"})]})]})}),i.jsx(Ft,{value:"auto_notifications",children:i.jsx(hNe,{})})]})},op=async()=>{const{data:e,error:t}=await ue.from("loyalty_programs").select(`
      *,
      studios:studio_id(name),
      branches:branch_id(name)
    `).order("start_date",{ascending:!1});if(t)throw t;return e.map(r=>{var n,a;return{...r,studio_name:(n=r.studios)==null?void 0:n.name,branch_name:(a=r.branches)==null?void 0:a.name}})},RN=async e=>{const{data:t,error:r}=await ue.from("loyalty_programs").insert([{...e}]).select().single();if(r)throw r;return t},DN=async(e,t)=>{const{data:r,error:n}=await ue.from("loyalty_programs").update({...t}).eq("id",e).select().single();if(n)throw n;return r},gNe=async e=>{const{error:t}=await ue.from("loyalty_programs").delete().eq("id",e);if(t)throw t},vNe=async(e,t)=>{const{data:r,error:n}=await ue.from("loyalty_programs").update({is_active:t}).eq("id",e).select().single();if(n)throw n;return r},vZ=async e=>{const{data:t,error:r}=await ue.from("loyalty_user_states").select("*").eq("user_id",e);if(r)throw r;return t},xNe=async()=>{const{data:e,error:t}=await ue.from("loyalty_user_states").select("*");if(t)throw t;return e},es={async getAllServices(){return qa(ue.from("services").select("*").order("name"))},async getActiveServices(){return qa(ue.from("services").select("*").eq("is_active",!0).order("name"))},async getAllServicesByStudio(e){try{console.log("Загружаем услуги для студии:",e);const{data:t,error:r}=await ue.rpc("get_services_by_studio",{studio_id_param:e});return r?(console.error("Ошибка получения услуг по студии:",r),{data:null,error:{message:r.message,status:500}}):(console.log("Получены услуги по студии:",(t==null?void 0:t.length)||0),{data:t,error:null})}catch(t){return console.error("Исключение при получении услуг по студии:",t),{data:null,error:{message:t instanceof Error?t.message:"Ошибка получения услуг по студии",status:500}}}},async getServicesWithCategories(){return qa(ue.from("services").select(`
          *,
          category:service_categories(*)
        `).order("name"))},async getServicesByCategory(e){return qa(ue.from("services").select("*").eq("category_id",e).eq("is_active",!0).order("name"))},async getServiceById(e){return qa(ue.from("services").select("*").eq("id",e).single())},async getServiceWithCategoryById(e){return qa(ue.from("services_with_categories").select("*").eq("id",e).single())},async createService(e){const t=new Date().toISOString(),r={name:e.name,duration:e.duration,price:e.price,description:e.description||null,is_active:e.is_active!==void 0?e.is_active:!0,category_id:e.category_id,image_url:e.image_url,created_at:t,updated_at:t};console.log("Отправляемые данные в Supabase:",JSON.stringify(r,null,2));try{const n=await ue.from("services").insert([r]).select().single();return console.log("Ответ Supabase:",JSON.stringify(n,null,2)),qa(Promise.resolve(n))}catch(n){return console.error("Ошибка при создании услуги:",n),{data:null,error:{message:n instanceof Error?n.message:"Ошибка создания услуги",status:500}}}},async updateService(e,t){return console.log("Обновляем услугу:",e,{...t,updated_at:new Date().toISOString()}),qa(ue.from("services").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single())},async deleteService(e){return qa(ue.from("services").delete().eq("id",e))},async getAllCategories(){return qa(ue.from("service_categories").select("*").order("name"))},async getActiveCategories(){return qa(ue.from("service_categories").select("*").eq("isActive",!0).order("name"))},async getCategoryById(e){return qa(ue.from("service_categories").select("*").eq("id",e).single())},async createCategory(e){const t=new Date().toISOString();return qa(ue.from("service_categories").insert([{...e,created_at:t,updated_at:t}]).select().single())},async updateCategory(e,t){return qa(ue.from("service_categories").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single())},async deleteCategory(e){return qa(ue.from("service_categories").delete().eq("id",e))},async getServicesBySpecialistId(e,t){const r=String(e);console.log(`[serviceService] Запрос услуг для специалиста ${r}`,t);const n=(t==null?void 0:t.preferredSource)||"both";try{const{data:a,error:s}=await ue.from("specialist_services").select("service_id").eq("specialist_id",r);if(s)return console.error("[serviceService] Ошибка при запросе привязок специалиста к услугам:",s.message),{data:null,error:{message:s.message,status:s.code?parseInt(s.code):500,code:s.code,details:s.details,hint:s.hint}};console.log(`[serviceService] Привязки специалиста ${r} из specialist_services:`,a?`Найдено ${a.length} записей`:"Данные не найдены");let o=[],l="";const c=a&&a.length>0?a.filter(f=>f&&f.service_id).map(f=>String(f.service_id)):[];if(n==="specialist_services"||n==="both"&&c.length>0?(o=c,l="specialist_services",console.log(`[serviceService] Используем источник 'specialist_services' для ${r}: найдено ${o.length} ID услуг`)):n==="specialists.services"||n==="both"&&c.length===0?(o=c,l="specialists.services",console.log(`[serviceService] Используем источник 'specialists.services' для ${r}: найдено ${o.length} ID услуг`)):n==="both"&&(o=[...new Set([...c])],l="combined",console.log(`[serviceService] Используем объединенный источник для ${r}: найдено ${o.length} ID услуг`)),o.length===0)return console.log(`[serviceService] ❌ Услуги не найдены для специалиста ${r} (искали в источнике ${n})`),{data:[],error:null};console.log(`[serviceService] Найдено ${o.length} ID услуг для специалиста ${r} из источника ${l}: ${o.join(", ")}`);const{data:u,error:d}=await ue.from("services").select("*, category:service_categories(*)").in("id",o);if(d)return console.error("[serviceService] Ошибка при запросе услуг по ID:",d.message),{data:null,error:{message:d.message,status:d.code?parseInt(d.code):500,code:d.code,details:d.details,hint:d.hint}};if(!u)return console.log(`[serviceService] Supabase вернул null для услуг специалиста ${r}`),{data:[],error:null};if(u.length<o.length){const f=u.map(p=>String(p.id)),h=o.filter(p=>!f.includes(p));console.warn(`[serviceService] ⚠️ Не все услуги были найдены для специалиста ${r}:`),console.warn(`[serviceService] - Запрошено ID: ${o.length}, найдено услуг: ${u.length}`),console.warn(`[serviceService] - Отсутствующие ID: ${h.join(", ")}`)}return console.log(`[serviceService] ✅ Получено ${u.length} услуг для специалиста ${r}`),{data:u,error:null}}catch(a){const s=a instanceof Error?a.message:"Ошибка получения услуг специалиста";return console.error("[serviceService] Исключение при получении услуг специалиста:",s),{data:null,error:{message:s,status:500}}}},async addServiceToSpecialist(e,t){console.log(`[serviceService] Привязка услуги ${t} к специалисту ${e}`);try{const{data:r,error:n}=await ue.from("specialist_services").select("*").eq("specialist_id",e).eq("service_id",t).maybeSingle();if(n)return console.error("[serviceService] Ошибка при проверке существующей привязки:",n.message),{data:null,error:{message:n.message,status:n.code?parseInt(n.code):500,code:n.code,details:n.details,hint:n.hint}};if(r)return console.log("[serviceService] Привязка уже существует, пропускаем"),{data:r,error:null};const{data:a,error:s}=await ue.from("specialist_services").insert([{specialist_id:e,service_id:t}]).select().single();return s?(console.error("[serviceService] Ошибка при привязке услуги:",s.message),{data:null,error:{message:s.message,status:s.code?parseInt(s.code):500,code:s.code,details:s.details,hint:s.hint}}):(console.log(`[serviceService] Успешно привязана услуга ${t} к специалисту ${e}`),{data:a,error:null})}catch(r){const n=r instanceof Error?r.message:"Ошибка привязки услуги к специалисту";return console.error("[serviceService] Исключение при привязке услуги:",n),{data:null,error:{message:n,status:500}}}},async removeServiceFromSpecialist(e,t){console.log(`[serviceService] Удаление привязки услуги ${t} от специалиста ${e}`);try{const{error:r}=await ue.from("specialist_services").delete().eq("specialist_id",e).eq("service_id",t);return r?(console.error("[serviceService] Ошибка при удалении привязки услуги:",r.message),{data:null,error:{message:r.message,status:r.code?parseInt(r.code):500,code:r.code,details:r.details,hint:r.hint}}):(console.log(`[serviceService] Успешно удалена привязка услуги ${t} от специалиста ${e}`),{data:null,error:null})}catch(r){const n=r instanceof Error?r.message:"Ошибка удаления привязки услуги от специалиста";return console.error("[serviceService] Исключение при удалении привязки услуги:",n),{data:null,error:{message:n,status:500}}}},async getServicesByIds(e){return!e||e.length===0?{data:[],error:null}:qa(ue.from("services").select("*, category:service_categories(*)").in("id",e).order("name"))},async migrateSpecialistServices(){console.log("[serviceService] Запуск миграции услуг из specialists.services в таблицу specialist_services");const e={success:!1,specialistsProcessed:0,relationshipsCreated:0,errors:[],specialistsWithErrors:[]};try{const{data:t,error:r}=await ue.from("specialists").select("id, name, services").not("services","is",null);if(r)return console.error("[serviceService] Ошибка при получении специалистов:",r.message),e.errors.push(`Ошибка получения специалистов: ${r.message}`),e;if(!t||t.length===0)return console.log("[serviceService] Не найдены специалисты с непустым полем services"),e.success=!0,e;console.log(`[serviceService] Найдено ${t.length} специалистов с непустым полем services`);for(const n of t)try{if(!n.services||!Array.isArray(n.services)||n.services.length===0){console.log(`[serviceService] Специалист ${n.name} (${n.id}) не имеет услуг, пропускаем`);continue}console.log(`[serviceService] Обработка специалиста ${n.name} (${n.id}): ${n.services.length} услуг`);const a=n.services.map(v=>String(v)),{data:s,error:o}=await ue.from("specialist_services").select("service_id").eq("specialist_id",n.id);if(o){console.warn(`[serviceService] Ошибка при проверке существующих связей для ${n.id}:`,o.message),e.errors.push(`Ошибка проверки связей для ${n.name}: ${o.message}`),e.specialistsWithErrors.push(n.id);continue}const l=s?s.map(v=>String(v.service_id)):[],c=a.filter(v=>!l.includes(v));if(c.length===0){console.log(`[serviceService] Для специалиста ${n.name} все связи уже существуют в specialist_services`),e.specialistsProcessed++;continue}console.log(`[serviceService] Для специалиста ${n.name} найдено ${c.length} новых связей`);const u=c.map(v=>({specialist_id:n.id,service_id:v})),{data:d,error:f}=await ue.from("specialist_services").insert(u).select();if(f){console.error(`[serviceService] Ошибка при вставке связей для ${n.name}:`,f.message),e.errors.push(`Ошибка создания связей для ${n.name}: ${f.message}`),e.specialistsWithErrors.push(n.id);continue}const h=d?d.length:u.length;console.log(`[serviceService] Для специалиста ${n.name} создано ${h} связей`),e.relationshipsCreated+=h,e.specialistsProcessed++;const{error:p}=await ue.from("specialists").update({services:null}).eq("id",n.id);p?(console.warn(`[serviceService] Ошибка при очистке поля services для ${n.name}:`,p.message),e.errors.push(`Ошибка очистки services для ${n.name}: ${p.message}`)):console.log(`[serviceService] Успешно очищено поле services для ${n.name}`)}catch(a){const s=a instanceof Error?a.message:String(a);console.error(`[serviceService] Ошибка при обработке специалиста ${n.name}:`,s),e.errors.push(`Ошибка обработки ${n.name}: ${s}`),e.specialistsWithErrors.push(n.id)}return e.success=e.specialistsProcessed>0,console.log(`[serviceService] Миграция завершена. Обработано ${e.specialistsProcessed} специалистов, создано ${e.relationshipsCreated} связей.`),e.errors.length>0&&console.warn(`[serviceService] В процессе миграции возникло ${e.errors.length} ошибок.`),e}catch(t){const r=t instanceof Error?t.message:String(t);return console.error("[serviceService] Критическая ошибка при миграции услуг:",r),e.errors.push(`Критическая ошибка: ${r}`),e}},async syncSpecialistServices(e){console.log(`[serviceService] Запуск синхронизации услуг для специалиста ${e}`);try{const{data:t,error:r}=await ue.from("specialist_services").select("service_id").eq("specialist_id",e);if(r)throw console.error("[serviceService] Ошибка при запросе привязок специалиста к услугам:",r.message),new Error(`Не удалось получить привязки услуг: ${r.message}`);const n=t&&t.length>0?t.filter(c=>c&&c.service_id).map(c=>String(c.service_id)):[];console.log(`[serviceService] Услуги из таблицы specialist_services: ${JSON.stringify(n)}`);const a=n.filter(c=>!n.includes(c)),s=n.filter(c=>!n.includes(c));if(console.log(`[serviceService] Услуги для добавления: ${JSON.stringify(a)}`),console.log(`[serviceService] Услуги для удаления: ${JSON.stringify(s)}`),a.length===0&&s.length===0)return console.log(`[serviceService] Услуги специалиста ${e} уже синхронизированы`),{synced:!1,added:0,removed:0};let o=0;if(a.length>0){const c=a.map(f=>({specialist_id:e,service_id:f})),{data:u,error:d}=await ue.from("specialist_services").insert(c).select();if(d)throw console.error("[serviceService] Ошибка при добавлении услуг:",d.message),new Error(`Не удалось добавить услуги: ${d.message}`);o=u?u.length:a.length,console.log(`[serviceService] Успешно добавлено ${o} услуг`)}let l=0;if(s.length>0){const{data:c,error:u}=await ue.from("specialist_services").delete().eq("specialist_id",e).in("service_id",s).select();if(u)throw console.error("[serviceService] Ошибка при удалении услуг:",u.message),new Error(`Не удалось удалить услуги: ${u.message}`);l=c?c.length:s.length,console.log(`[serviceService] Успешно удалено ${l} услуг`)}return console.log(`[serviceService] Синхронизация для специалиста ${e} завершена: добавлено ${o}, удалено ${l}`),{synced:!0,added:o,removed:l}}catch(t){throw console.error("[serviceService] Ошибка при синхронизации услуг:",t),t}},async getSpecialistServicesSimple(e){console.log(`[serviceService] Получение упрощенного списка услуг для специалиста ${e}`);try{const{data:t,error:r}=await ue.from("specialist_services").select("service_id").eq("specialist_id",e);return r?(console.error("[serviceService] Ошибка при запросе привязок специалиста к услугам:",r.message),{data:null,error:r}):{data:t,error:null}}catch(t){return console.error("[serviceService] Ошибка:",t),{data:null,error:{message:t instanceof Error?t.message:"Неизвестная ошибка",status:500}}}},async getSpecialistServicesFromStaffTable(e){console.log(`[serviceService] Получение услуг из staff.services для специалиста ${e}`);try{const{data:t,error:r}=await ue.from("staff").select("services").eq("id",e).single();if(r)return console.error("[serviceService] Ошибка при запросе услуг из staff.services:",r.message),{data:null,error:r};const n=(t==null?void 0:t.services)||[],a=Array.isArray(n)?n.map(s=>({service_id:typeof s=="object"?s.id||s.service_id:s})):[];return console.log(`[serviceService] Найдено ${a.length} услуг в staff.services`),{data:a,error:null}}catch(t){return console.error("[serviceService] Ошибка:",t),{data:null,error:{message:t instanceof Error?t.message:"Неизвестная ошибка",status:500}}}},async getSpecialistServicesFromJunctionTable(e){console.log(`[serviceService] Получение услуг из specialist_services для специалиста ${e}`);try{const{data:t,error:r}=await ue.from("specialist_services").select("service_id").eq("specialist_id",e);return r?(console.error("[serviceService] Ошибка при запросе услуг из specialist_services:",r.message),{data:null,error:r}):(console.log(`[serviceService] Найдено ${(t==null?void 0:t.length)||0} услуг в specialist_services`),{data:t,error:null})}catch(t){return console.error("[serviceService] Ошибка:",t),{data:null,error:{message:t instanceof Error?t.message:"Неизвестная ошибка",status:500}}}}};function xZ({label:e,items:t,selectedItems:r,onSelectedItemsChange:n,placeholder:a="Выберите элементы...",searchPlaceholder:s="Поиск...",emptyText:o="Ничего не найдено.",className:l,disabled:c}){const[u,d]=x.useState(!1),[f,h]=x.useState(""),p=g=>{const b=r.includes(g)?r.filter(y=>y!==g):[...r,g];n(b)},v=()=>{n([])},m=f?t.filter(g=>g.label.toLowerCase().includes(f.toLowerCase())):t;return i.jsxs("div",{className:Ue("grid gap-1.5",l),children:[e&&i.jsx(Xe,{children:e}),i.jsxs(pi,{open:u,onOpenChange:d,children:[i.jsx(gi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",role:"combobox","aria-expanded":u,className:"w-full justify-between h-auto min-h-[38px] px-3 py-2",disabled:c,children:[i.jsx("div",{className:"flex flex-wrap gap-1",children:r.length===0?i.jsx("span",{className:"text-muted-foreground font-normal",children:a}):r.length<=3?r.map(g=>t.find(b=>b.value===g)).filter(Boolean).map(g=>i.jsxs($t,{variant:"secondary",children:[g.label,i.jsx("span",{role:"button",tabIndex:0,className:"ml-1 text-muted-foreground hover:text-foreground cursor-pointer focus:outline-none focus:ring-1 focus:ring-ring rounded-sm",onClick:b=>{b.stopPropagation(),p(g.value)},onKeyDown:b=>{(b.key==="Enter"||b.key===" ")&&(b.stopPropagation(),p(g.value))},children:i.jsx(Oc,{className:"h-3 w-3"})})]},g.value)):i.jsxs($t,{variant:"secondary",children:["Выбрано: ",r.length]})}),i.jsx(pf,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsxs(Ks,{className:"w-[--radix-popover-trigger-width] p-0",children:[i.jsxs(Uj,{children:[i.jsx(zj,{placeholder:s,value:f,onValueChange:h}),i.jsxs(Wj,{children:[i.jsx(Vj,{children:o}),i.jsx(Hj,{children:m.map(g=>i.jsxs(qj,{value:g.label,onSelect:()=>p(g.value),disabled:g.disabled,children:[i.jsx(Hn,{checked:r.includes(g.value),onCheckedChange:()=>p(g.value),id:`item-${g.value}`,className:"mr-2"}),i.jsx("label",{htmlFor:`item-${g.value}`,className:"flex-1 cursor-pointer text-sm font-normal",children:g.label})]},g.value))})]})]}),r.length>0&&i.jsx("div",{className:"p-2 border-t",children:i.jsxs(ne,{variant:"ghost",size:"sm",onClick:v,className:"w-full",children:["Очистить все (",r.length,")"]})})]})]})]})}const yNe=({open:e,onClose:t,onSave:r,initialData:n,editMode:a,allServices:s})=>{const{studios:o}=Ba(),[l,c]=x.useState({id:void 0,name:"",discount:0,description:"",startDate:"",endDate:"",serviceIds:[],scope:"studio",studio_id:void 0}),[u,d]=x.useState(!1);x.useEffect(()=>{if(n){const p="start_date"in n&&n.start_date?String(n.start_date):n.startDate||"",v="end_date"in n&&n.end_date?String(n.end_date):n.endDate||"";c({...n,startDate:p,endDate:v,scope:n.scope||"studio",studio_id:n.studio_id}),d(!!n.serviceIds&&n.serviceIds.length>0)}else c({id:void 0,name:"",discount:0,description:"",startDate:"",endDate:"",serviceIds:[],scope:"studio",studio_id:void 0}),d(!1)},[n,e]);const f=p=>{const{name:v,value:m}=p.target;c(g=>({...g,[v]:v==="discount"?Number(m):m}))},h=()=>{!l.name||!l.discount||r({...l,...l.startDate?{start_date:l.startDate}:{start_date:null},...l.endDate?{end_date:l.endDate}:{end_date:null},serviceIds:u?l.serviceIds:[]})};return i.jsx(qt,{open:e,onOpenChange:t,children:i.jsxs(Wt,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:a?"Редактировать скидку":"Создать скидку"}),i.jsx(fr,{children:a?"Измените параметры скидки и нажмите Сохранить":"Заполните форму для создания новой скидки"})]}),i.jsxs("div",{className:"space-y-6 py-4",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-900 border-b pb-2",children:"Основная информация"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"name",children:"Название скидки"}),i.jsx($e,{id:"name",name:"name",value:l.name,onChange:f,placeholder:"Например: Весенняя скидка"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"discount",children:"Размер скидки (%)"}),i.jsx($e,{id:"discount",name:"discount",type:"number",value:l.discount,onChange:f,placeholder:"Например: 15"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"description",children:"Описание"}),i.jsx(rn,{id:"description",name:"description",value:l.description,onChange:f,placeholder:"Опишите условия скидки",rows:2})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-900 border-b pb-2",children:"Период действия"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"startDate",children:"Время начала акции"}),i.jsx($e,{id:"startDate",name:"startDate",type:"date",value:l.startDate||"",onChange:f,placeholder:"дд.мм.гггг"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"endDate",children:"Действует до (оставьте пустым для бессрочной)"}),i.jsx($e,{id:"endDate",name:"endDate",type:"date",value:l.endDate||"",onChange:f,placeholder:"дд.мм.гггг"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-900 border-b pb-2",children:"Область действия"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"scope",children:"Применить к"}),i.jsxs(Tr,{value:l.scope,onValueChange:p=>{c(v=>({...v,scope:p,studio_id:p==="network"?void 0:v.studio_id}))},children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите область действия"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"studio",children:"Конкретная студия"}),i.jsx(_t,{value:"network",children:"Вся сеть"})]})]})]}),l.scope==="studio"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"studio_id",children:"Студия"}),i.jsxs(Tr,{value:l.studio_id||"",onValueChange:p=>{c(v=>({...v,studio_id:p}))},children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите студию"})}),i.jsx(_r,{children:o.map(p=>i.jsx(_t,{value:p.id,children:p.name},p.id))})]})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-900 border-b pb-2",children:"Применение к услугам"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"space-y-2",children:i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:u,onChange:p=>d(p.target.checked),className:"rounded border-gray-300"}),i.jsx("span",{className:"text-sm",children:"Скидка только на выбранные услуги"})]})}),u&&i.jsx("div",{className:"space-y-2",children:i.jsx(xZ,{label:"Включённые услуги",items:s.map(p=>({value:p.id,label:p.name})),selectedItems:l.serviceIds||[],onSelectedItemsChange:p=>c(v=>({...v,serviceIds:p})),placeholder:"Выберите услуги...",searchPlaceholder:"Поиск услуг...",emptyText:"Услуги не найдены.",disabled:s.length===0})})]})]})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:t,children:"Отмена"}),i.jsx(ne,{onClick:h,children:"Сохранить"})]})]})})};function f_({items:e,selectedValue:t,onSelectValue:r,placeholder:n="Select item...",searchPlaceholder:a="Search item...",emptyText:s="No item found.",className:o}){var d;const[l,c]=x.useState(!1),u=(f,h)=>{var v;return(((v=e.find(m=>m.value===f))==null?void 0:v.label.toLowerCase())||"").includes(h.toLowerCase())?1:0};return i.jsxs(pi,{open:l,onOpenChange:c,children:[i.jsx(gi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",role:"combobox","aria-expanded":l,className:Ue("w-full justify-between",o),children:[t?(d=e.find(f=>f.value===t))==null?void 0:d.label:n,i.jsx(yfe,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(Ks,{className:"w-[--radix-popover-trigger-width] p-0",children:i.jsxs(Uj,{filter:u,children:[i.jsx(zj,{placeholder:a}),i.jsxs(Wj,{children:[i.jsx(Vj,{children:s}),i.jsx(Hj,{children:e.map(f=>i.jsxs(qj,{value:f.value,onSelect:h=>{r(h===t?null:h),c(!1)},children:[i.jsx(Zx,{className:Ue("mr-2 h-4 w-4",t===f.value?"opacity-100":"opacity-0")}),f.label]},f.value))})]})]})})]})}const bNe=()=>{const[e,t]=x.useState({accrued:0,spent:0}),[r,n]=x.useState(!0);return x.useEffect(()=>{(async()=>{n(!0);const s=new Date,o=Cs(s).toISOString().slice(0,10),l=jj(s).toISOString().slice(0,10),{data:c}=await ue.from("loyalty_transactions").select("value").eq("type","accrual").gte("date",o).lte("date",l),u=(c==null?void 0:c.reduce((v,m)=>v+(m.value||0),0))||0,{data:d}=await ue.from("appointments").select("bonuses_spent").eq("status","completed").gt("bonuses_spent",0).gte("date",o).lte("date",l),f=(d==null?void 0:d.reduce((v,m)=>v+(m.bonuses_spent||0),0))||0,{data:h}=await ue.from("loyalty_transactions").select("value").eq("type","redeem").gte("date",o).lte("date",l),p=(h==null?void 0:h.reduce((v,m)=>v+(m.value||0),0))||0;t({accrued:u,spent:f+p}),n(!1)})()},[]),{stats:e,loading:r}},wNe=()=>{var Be,Ie,it,tt,Ze,ct,St;const{toast:e}=co(),{studios:t}=Ba(),[r,n]=x.useState([]),[a,s]=x.useState([]),[o,l]=x.useState([]),[c,u]=x.useState(!0),[d,f]=x.useState(null),[h,p]=x.useState(!1),[v,m]=x.useState(null),[g,b]=x.useState({name:"",type:"discount",description:"",status:"active",price:0,rules:{discount:0},total_quantity:void 0,scope:"studio",studio_id:void 0}),[y,w]=x.useState(!1),[_,S]=x.useState(null),[E,j]=x.useState(null),[N,k]=x.useState("");x.useState(!1);const[C,T]=x.useState([]),[A,B]=x.useState(""),[R,P]=x.useState([]),[D,U]=x.useState({sub:null,program:null,client:null}),[M,F]=x.useState(!1),[K,X]=x.useState(!1),[O,W]=x.useState(void 0),[L,H]=x.useState(""),[ee,q]=x.useState(!1),[Z,I]=x.useState(null),{stats:Q,loading:ve}=bNe(),[z,we]=x.useState("active"),Re=ie=>{switch(ie){case"active":return"Активен";case"expired":return"Истёк";case"cancelled":return"Отменён";case"used":return"Использован";default:return"Неизвестно"}},Pe=ie=>{switch(ie){case"active":return"success";case"expired":return"destructive";case"cancelled":return"warning";case"used":return"secondary";default:return"default"}},De=ie=>{const be=r.find(Et=>Et.id===ie.program_id),Je=C.find(Et=>Et.id===ie.user_id);be&&Je?U({sub:ie,program:be,client:Je}):e({title:"Ошибка",description:"Не удалось найти программу или клиента для этого абонемента.",variant:"destructive"})};x.useEffect(()=>{ye(),pr.getAllClients().then(T),ue.from("loyalty_user_states").select(`
        *,
        loyalty_programs (
          name
        )
      `).then(({data:ie,error:be})=>{if(be)console.error("Error fetching active subscriptions with program name:",be),e({title:"Ошибка загрузки активных абонементов",description:be.message,variant:"destructive"});else if(ie){const Je=ie.map(Et=>{var Ke;return{...Et,program_name_fallback:(Ke=Et.loyalty_programs)==null?void 0:Ke.name}});P(Je)}}),es.getAllCategories().then(ie=>{ie.data&&l(ie.data)}),es.getAllServices().then(ie=>{ie.data&&s(ie.data)})},[]),x.useEffect(()=>{const ie=r.find(be=>be.type==="bonus");ie&&b({name:ie.name,type:"bonus",description:ie.description,status:ie.is_active?"active":"inactive",price:ie.price,rules:ie.rules,scope:ie.scope||"studio",studio_id:ie.studio_id})},[r]);const Ne=async ie=>{m(ie);let be;ie.type==="discount"?be={discount:ie.rules.discount??0}:ie.type==="bonus"?be={bonus_percent:ie.rules.bonus_percent??0,minAmountToUse:ie.rules.minAmountToUse??0,expireDays:ie.rules.expireDays??0,maxDiscountPercent:ie.rules.maxDiscountPercent??50}:ie.type==="subscription"?be={services:ie.rules.services??[],visits:ie.rules.visits??0,expireDays:ie.rules.expireDays??0}:be={discount:0},b({name:ie.name,type:ie.type,description:ie.description,status:ie.is_active?"active":"inactive",price:ie.price,rules:be,scope:ie.scope||"studio",studio_id:ie.studio_id}),p(!0)},J=ie=>{b(be=>({...be,description:ie.target.value}))},Y=ie=>{const{name:be,value:Je,type:Et}=ie.target;b(be==="minAmountToUse"||be==="expireDays"||be==="visits"?Ke=>({...Ke,type:be==="visits"||be==="expireDays"?"subscription":Ke.type,rules:{...Ke.rules,[be]:Je===""?void 0:Number(Je),...Ke.type==="subscription"?{services:Ke.rules.services||[]}:{}}}):be==="bonus_percent"||be==="discount"?Ke=>({...Ke,rules:{...Ke.rules,[be]:Je===""?void 0:Number(Je)}}):Ke=>({...Ke,[be]:Et==="number"?Number(Je):Je}))},ae=async()=>{m(null),b({name:"",type:"subscription",description:"",status:"active",price:0,rules:{services:[],visits:0,expireDays:30},scope:"studio",studio_id:void 0}),p(!0)},ge=async()=>{const ie=g.rules,be=[];if(g.name.trim()||be.push("Название абонемента"),g.type!=="subscription"&&be.push("Неверный тип программы"),(ie.visits===void 0||ie.visits===null||ie.visits<=0)&&be.push("Количество посещений (д.б. > 0)"),(ie.expireDays===void 0||ie.expireDays===null||ie.expireDays<=0)&&be.push("Срок действия (дни) (д.б. > 0)"),(!ie.services||ie.services.length===0)&&be.push("Включённые услуги (хотя бы одна)"),(g.price===void 0||g.price===null||g.price<=0)&&be.push("Стоимость (д.б. > 0)"),be.length>0){console.log("Validation failed. Form state:",JSON.stringify(g,null,2)),f("Пожалуйста, заполните все обязательные поля"),e({title:"Ошибка валидации",description:"Пожалуйста, заполните все обязательные поля.",variant:"destructive"});return}u(!0),f(null);try{if(v&&g.total_quantity!==void 0&&g.total_quantity!==null){const Et=v.issued_quantity||0;if(g.total_quantity<Et){e({title:"Ошибка валидации",description:`Общее количество не может быть меньше уже выпущенных абонементов (${Et} шт.).`,variant:"destructive"}),u(!1);return}}const Je={name:g.name,type:"subscription",description:g.description||null,price:g.price?Number(g.price):null,rules:ie,is_active:g.status==="active",start_date:new Date().toISOString().slice(0,10),total_quantity:g.total_quantity?Number(g.total_quantity):null,scope:g.scope||"studio",studio_id:g.scope==="studio"?g.studio_id:null};console.log("Final Payload to Supabase:",JSON.stringify(Je,null,2)),v?await DN(v.id,Je):await RN(Je),p(!1),b({name:"",type:"discount",description:"",status:"active",price:0,rules:{discount:0},scope:"studio",studio_id:void 0}),await ye(),e({title:v?"Абонемент обновлён!":"Абонемент создан!"})}catch(Je){let Et="Неизвестная ошибка";Je instanceof Error&&(Et=Je.message),f(Et),e({title:"Ошибка при сохранении",description:Et,variant:"destructive"})}finally{u(!1)}},Se=async ie=>{u(!0),f(null);try{await gNe(ie),await ye(),q(!1),I(null),e({title:"Программа удалена!"})}catch(be){let Je="Неизвестная ошибка при удалении программы";be instanceof Error&&(Je=be.message),f(Je),e({title:"Ошибка при удалении программы",description:Je,variant:"destructive"})}finally{u(!1)}},te=async(ie,be)=>{u(!0),f(null);try{await vNe(ie,be),await ye()}catch(Je){let Et="Неизвестная ошибка при обновлении статуса";Je instanceof Error&&(Et=Je.message),f(Et),e({title:"Ошибка при обновлении статуса",description:Et,variant:"destructive"})}finally{u(!1)}},me=g.type==="bonus"?g.rules:{bonus_percent:0,minAmountToUse:0,expireDays:0,maxDiscountPercent:50},ke=async()=>{var Je;const ie=g.rules,be=[];if(g.name.trim()||be.push("Название программы"),(ie.bonus_percent===void 0||ie.bonus_percent===null||ie.bonus_percent<=0)&&be.push("Процент начисления от суммы (%)"),(ie.minAmountToUse===void 0||ie.minAmountToUse===null||ie.minAmountToUse<0)&&be.push("Минимальная сумма для использования"),(ie.expireDays===void 0||ie.expireDays===null||ie.expireDays<=0)&&be.push("Срок действия бонусов (дни)"),(ie.maxDiscountPercent===void 0||ie.maxDiscountPercent===null||ie.maxDiscountPercent<10||ie.maxDiscountPercent>100)&&be.push("Максимальная скидка бонусами (от 10 до 100%)"),be.length>0){f("Пожалуйста, заполните все обязательные поля: "+be.join(", ")),e({title:"Ошибка валидации",description:"Пожалуйста, заполните все обязательные поля: "+be.join(", "),variant:"destructive"});return}u(!0),f(null);try{const Et={bonus_percent:g.rules.bonus_percent,minAmountToUse:g.rules.minAmountToUse,expireDays:g.rules.expireDays,maxDiscountPercent:g.rules.maxDiscountPercent},Ke={name:g.name,type:"bonus",description:((Je=g.description)==null?void 0:Je.trim())||"",rules:Et,is_active:g.status==="active",start_date:new Date().toISOString().slice(0,10),scope:g.scope||"studio",studio_id:g.scope==="studio"?g.studio_id:null},Pt=r.find(Ht=>Ht.type==="bonus");Pt?(await DN(Pt.id,Ke),e({title:"Бонусная программа обновлена!"})):(await RN(Ke),e({title:"Бонусная программа создана!"})),await ye()}catch(Et){let Ke="Неизвестная ошибка";Et instanceof Error&&(Ke=Et.message),f(Ke),e({title:"Ошибка при сохранении",description:Ke,variant:"destructive"})}finally{u(!1)}};R.map(ie=>ie.program_id),r.filter(ie=>ie.type==="subscription");const he=ie=>{S(ie),B(""),w(!0)},et=async()=>{X(!1),W({startDate:"",scope:"studio",studio_id:void 0}),F(!0)},nt=async ie=>{X(!0),W({id:ie.id,name:ie.name,discount:ie.rules.discount??0,description:ie.description??"",startDate:ie.start_date??"",endDate:ie.end_date??"",serviceIds:ie.rules.services||[],scope:ie.scope||"studio",studio_id:ie.studio_id}),F(!0)},Oe=async ie=>{u(!0),f(null);try{const be={name:ie.name,type:"discount",start_date:ie.startDate||null,end_date:ie.endDate||null,is_active:!0,rules:ie.serviceIds&&ie.serviceIds.length>0?{discount:ie.discount,services:ie.serviceIds}:{discount:ie.discount},description:ie.description,scope:ie.scope||"studio",studio_id:ie.scope==="studio"?ie.studio_id:null};ie.id?await DN(ie.id,be):await RN(be),await ye(),F(!1),e({title:K?"Скидка обновлена!":"Скидка создана!"})}catch(be){let Je="Неизвестная ошибка при сохранении скидки";be instanceof Error&&(Je=be.message),f(Je),e({title:"Ошибка при сохранении скидки",description:Je,variant:"destructive"})}finally{u(!1)}},Ye=R.filter(ie=>{var Dt,ar;const be=r.find(qr=>qr.id===ie.program_id),Je=C.find(qr=>String(qr.id)===String(ie.user_id)),Et=(ie.subscription_name||(be==null?void 0:be.name)||"").toLowerCase(),Ke=((Dt=Je==null?void 0:Je.full_name)==null?void 0:Dt.replace(/\s+/g," ").toLowerCase().trim())||"",Pt=((ar=Je==null?void 0:Je.phone)==null?void 0:ar.replace(/\D/g,""))||"",Ht=L.toLowerCase().trim();let pe=!0;if(Ht){const qr=Ht.split(" ").filter(Boolean),V=Je&&Ke?qr.every(ce=>Ke.includes(ce)):!1,oe=Et.includes(Ht),re=Ht.replace(/\D/g,""),se=Pt&&re?Pt.includes(re):!1;pe=V||oe||se}const ze=ie.expires_at?new Date(ie.expires_at)<new Date:!1,yt=(ie.subscription_visits_left??0)>0;let Rt="expired";!ze&&yt?Rt="active":!ze&&!yt&&(Rt="used");let er=!1;return z==="all"?er=!0:er=Rt===z,pe&&er});G.useMemo(()=>a.filter(ie=>{const be=!E||E==="all"?!0:String(ie.category_id)===E,Je=N?ie.name.toLowerCase().includes(N.toLowerCase()):!0;return be&&Je}),[a,E,N]);const ye=async()=>{u(!0),f(null);try{const ie=await op();n(ie)}catch(ie){let be="Не удалось загрузить программы";ie instanceof Error&&(be=ie.message),f(be),e({title:"Ошибка загрузки",description:be,variant:"destructive"})}finally{u(!1)}},le=x.useMemo(()=>r.filter(ie=>ie.type==="subscription"&&ie.is_active).sort((ie,be)=>{const Je=(ie.total_quantity??1/0)-(ie.issued_quantity??0),Et=(be.total_quantity??1/0)-(be.issued_quantity??0),Ke=ie.total_quantity!==void 0&&ie.total_quantity!==null&&(ie.issued_quantity||0)>=ie.total_quantity,Pt=be.total_quantity!==void 0&&be.total_quantity!==null&&(be.issued_quantity||0)>=be.total_quantity;if(Ke&&!Pt)return 1;if(!Ke&&Pt)return-1;if(Ke&&Pt)return 0;const Ht=ie.total_quantity!==void 0&&ie.total_quantity!==null,pe=be.total_quantity!==void 0&&be.total_quantity!==null;return Ht&&!pe?-1:!Ht&&pe?1:Ht&&pe?Je-Et:ie.name.localeCompare(be.name)}),[r]),_e=x.useMemo(()=>r.filter(ie=>ie.type==="subscription"&&!ie.is_active),[r]);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs(fa,{defaultValue:"discounts",className:"w-full",children:[i.jsxs(ta,{className:"mb-6",children:[i.jsxs(Tt,{value:"discounts",className:"flex items-center gap-2",children:[i.jsx(S3,{className:"h-4 w-4"})," Скидки"]}),i.jsxs(Tt,{value:"bonuses",className:"flex items-center gap-2",children:[i.jsx(Kp,{className:"h-4 w-4"})," Бонусы"]}),i.jsxs(Tt,{value:"subscriptions",className:"flex items-center gap-2",children:[i.jsx(WE,{className:"h-4 w-4"})," Абонементы"]})]}),i.jsxs(Ft,{value:"discounts",className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-beauty-800 mt-8",children:"Управление скидками"}),i.jsxs(ne,{onClick:et,children:[i.jsx(ls,{className:"h-4 w-4 mr-2"})," Создать скидку"]})]}),c&&i.jsx("div",{className:"text-muted-foreground mb-2",children:"Loading..."}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.filter(ie=>ie.type==="discount").map(ie=>{const be=ie.rules,Je=Array.isArray(be.services)?be.services:[],Et=ie.rules.discount??"-";return i.jsxs(qe,{className:"flex flex-col bg-white shadow-lg rounded-lg overflow-hidden",children:[i.jsx(ht,{className:"pb-2 border-b bg-gray-50 px-4 py-3",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(S3,{className:"h-5 w-5 mr-2 text-pink-500 flex-shrink-0"}),i.jsx(gt,{className:"text-md font-semibold text-gray-800",children:ie.name})]}),i.jsxs("span",{className:"text-pink-500 font-bold text-2xl",children:[Et,"%"]})]})}),i.jsxs(Ge,{className:"flex flex-col flex-grow p-4 space-y-3",children:[ie.description&&i.jsx("p",{className:"text-sm text-gray-700 mb-2",children:ie.description}),Je.length>0?i.jsxs("div",{className:"mb-3",children:[i.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Включённые услуги:"}),i.jsx("div",{className:"flex flex-wrap gap-1.5",children:Je.map((Ke,Pt)=>{var pe;const Ht=((pe=a.find(ze=>String(ze.id)===String(Ke)))==null?void 0:pe.name)||`ID: ${Ke}`;return i.jsx($t,{variant:"outline",className:"bg-pink-50 border-pink-200 text-pink-600 font-normal text-xs px-2 py-0.5 rounded-full",children:Ht},Ke+Pt)})})]}):i.jsx("div",{className:"mb-3 text-sm text-muted-foreground",children:"На все услуги"}),i.jsxs("div",{className:"flex items-center text-sm mb-4 text-gray-600",children:[i.jsx(Qa,{className:"h-4 w-4 mr-2 text-gray-400 flex-shrink-0"}),"Действует до:",i.jsx("span",{className:"font-medium text-gray-800 ml-1",children:ie.end_date?Me(new Date(ie.end_date),"yyyy-MM-dd"):"Бессрочно"})]}),i.jsxs("div",{className:"flex justify-end items-center mt-auto pt-2 border-t border-gray-200 space-x-2",children:[i.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>nt(ie),className:"text-sm text-pink-600 hover:bg-pink-50",children:[i.jsx(Ev,{className:"h-3.5 w-3.5 mr-1"})," Изменить"]}),i.jsxs(ne,{size:"sm",variant:"destructive",onClick:()=>{q(!0),I(ie)},className:"bg-red-500 hover:bg-red-600 text-white text-sm",children:[i.jsx(Xp,{className:"h-3.5 w-3.5 mr-1"}),"Удалить"]})]})]})]},ie.id)})})]}),i.jsxs(Ft,{value:"bonuses",className:"space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsx("h2",{className:"text-xl font-semibold",children:"Бонусная программа"})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(qe,{className:"lg:col-span-2",children:[i.jsx(ht,{children:i.jsx(gt,{children:"Настройки программы"})}),i.jsx(Ge,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"name",children:"Название программы"}),i.jsx($e,{id:"name",name:"name",value:g.name||"",onChange:Y})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"ratePerRuble",children:"Процент начисления от суммы (%)"}),i.jsx($e,{id:"ratePerRuble",name:"bonus_percent",type:"number",value:me.bonus_percent??0,onChange:ie=>b(be=>({...be,type:"bonus",rules:{...me,bonus_percent:Number(ie.target.value)}}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"minAmountToUse",children:"Минимальная сумма для использования"}),i.jsx($e,{id:"minAmountToUse",name:"minAmountToUse",type:"number",value:me.minAmountToUse??0,onChange:ie=>b(be=>({...be,type:"bonus",rules:{...me,minAmountToUse:Number(ie.target.value)}}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"expireDays",children:"Срок действия бонусов (дни)"}),i.jsx($e,{id:"expireDays",name:"expireDays",type:"number",value:me.expireDays??0,onChange:ie=>b(be=>({...be,type:"bonus",rules:{...me,expireDays:Number(ie.target.value)}}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"maxDiscountPercent",children:"Максимальная скидка бонусами (%)"}),i.jsx($e,{id:"maxDiscountPercent",name:"maxDiscountPercent",type:"number",value:me.maxDiscountPercent??50,onChange:ie=>{const be=ie.target.value===""?void 0:Number(ie.target.value);b(Je=>({...Je,type:"bonus",rules:{...Je.rules,maxDiscountPercent:be}}))},min:"10",max:"100",placeholder:"Например: 50"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"description",children:"Описание программы"}),i.jsx(rn,{id:"description",name:"description",value:g.description||"",onChange:J,rows:3})]}),i.jsxs("div",{className:"space-y-4 border-t pt-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Область действия"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"scope",children:"Применить к"}),i.jsxs(Tr,{value:g.scope||"studio",onValueChange:ie=>{b(be=>({...be,scope:ie,studio_id:ie==="network"?void 0:be.studio_id}))},children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите область действия"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"studio",children:"Конкретная студия"}),i.jsx(_t,{value:"network",children:"Вся сеть"})]})]})]}),g.scope==="studio"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"studio_id",children:"Студия"}),i.jsxs(Tr,{value:g.studio_id||"",onValueChange:ie=>{b(be=>({...be,studio_id:ie}))},children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите студию"})}),i.jsx(_r,{children:t.map(ie=>i.jsx(_t,{value:ie.id,children:ie.name},ie.id))})]})]})]}),i.jsx(ne,{onClick:ke,children:"Сохранить настройки"})]})})]}),i.jsxs(qe,{className:"bg-pink-50 border-pink-100",children:[i.jsx(ht,{children:i.jsx(gt,{className:"text-lg font-bold",children:"Информация"})}),i.jsxs(Ge,{children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-pink-700 font-semibold text-sm mb-2",children:"Текущая ставка начисления:"}),i.jsxs("div",{className:"bg-pink-100 rounded px-3 py-2 text-pink-700 font-bold text-lg",children:[me.bonus_percent||0,"%"]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"font-semibold mb-1",children:"Правила использования:"}),i.jsxs("ul",{className:"text-xs text-pink-700 list-disc pl-4 space-y-1",children:[i.jsx("li",{children:"1 бонус = 1 рубль скидки"}),i.jsxs("li",{children:["Минимальная сумма списания: ",me.minAmountToUse||0," бонусов"]}),i.jsxs("li",{children:["Срок действия: ",me.expireDays||0," дней"]}),i.jsxs("li",{children:["Максимальная скидка: до ",me.maxDiscountPercent||50,"% от стоимости услуг"]})]})]}),i.jsx("div",{className:"mb-2 font-semibold",children:"Статистика:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"bg-pink-100 rounded p-2 text-center",children:[i.jsx("div",{className:"text-xs text-pink-700",children:"Начислено за месяц"}),i.jsx("div",{className:"font-bold text-lg text-pink-700",children:ve?"Загрузка...":Q.accrued.toLocaleString("ru-RU")})]}),i.jsxs("div",{className:"bg-pink-100 rounded p-2 text-center",children:[i.jsx("div",{className:"text-xs text-pink-700",children:"Использовано за месяц"}),i.jsx("div",{className:"font-bold text-lg text-pink-700",children:ve?"Загрузка...":Q.spent.toLocaleString("ru-RU")})]})]})]})]})]})]}),i.jsxs(Ft,{value:"subscriptions",className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Абонементы"}),i.jsxs(ne,{onClick:ae,children:[i.jsx(ls,{className:"h-4 w-4 mr-2"})," Создать абонемент"]})]}),i.jsxs(fa,{defaultValue:"subscription-list",className:"w-full",children:[i.jsxs(ta,{className:"mb-4",children:[i.jsx(Tt,{value:"subscription-list",children:"Список абонементов"}),i.jsx(Tt,{value:"active-subscriptions",children:"Активные абонементы"}),i.jsx(Tt,{value:"archived-subscriptions",children:"Архив шаблонов"})]}),i.jsx(Ft,{value:"subscription-list",className:"space-y-6",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:le.map(ie=>{const be=ie.rules,Je=Array.isArray(be.services)?be.services:[],Et=typeof ie.price=="number"?ie.price:ie.price?String(ie.price):0;return i.jsxs(qe,{className:"flex flex-col bg-white shadow-lg rounded-lg overflow-hidden",children:[i.jsx(ht,{className:"pb-2 border-b bg-gray-50 px-4 py-3",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(WE,{className:"h-5 w-5 mr-2 text-pink-500 flex-shrink-0"}),i.jsx(gt,{className:"text-md font-semibold text-gray-800",children:ie.name})]})}),i.jsxs(Ge,{className:"flex flex-col flex-grow p-4 space-y-3",children:[ie.description&&i.jsx("p",{className:"text-sm text-gray-700 mb-2",children:ie.description}),i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[Et," ₽"]}),ie.type==="subscription"&&(()=>{const Ke=typeof ie.total_quantity=="number"?ie.total_quantity:null,Pt=typeof ie.issued_quantity=="number"?ie.issued_quantity:0;if(Ke&&Ke>0){const Ht=Pt,pe=Math.round(Ht/Ke*100);let ze="bg-green-500";return pe>50&&pe<=90?ze="bg-yellow-500":pe>90&&(ze="bg-red-500"),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Продано: ",Ht," из ",Ke]}),i.jsx(nc,{value:pe,className:`h-1.5 mt-1 w-24 ${ze}`})]})}else return i.jsx("p",{className:"text-xs text-muted-foreground text-right",children:"Доступно: неогр."})})()]}),Je.length>0?i.jsxs("div",{className:"mb-3",children:[i.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Доступные услуги:"}),i.jsx("div",{className:"flex flex-wrap gap-1.5",children:Je.map((Ke,Pt)=>{var pe;const Ht=((pe=a.find(ze=>String(ze.id)===String(Ke)))==null?void 0:pe.name)||`ID: ${Ke}`;return i.jsx($t,{variant:"outline",className:"bg-pink-50 border-pink-200 text-pink-600 font-normal text-xs px-2 py-0.5 rounded-full",children:Ht},Ke+Pt)})})]}):i.jsx("div",{className:"mb-3 text-sm text-muted-foreground",children:"На все услуги"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[i.jsxs("div",{className:"bg-pink-50 p-2.5 rounded-md text-center",children:[i.jsx("p",{className:"text-[11px] text-pink-700 mb-0 leading-tight",children:"Посещений"}),i.jsx("p",{className:"text-xl font-bold text-pink-700",children:be.visits??"-"})]}),i.jsxs("div",{className:"bg-pink-50 p-2.5 rounded-md text-center",children:[i.jsx("p",{className:"text-[11px] text-pink-700 mb-0 leading-tight",children:"Срок действия"}),i.jsxs("p",{className:"text-lg font-bold text-pink-700",children:[be.expireDays??"-"," дней"]})]})]}),i.jsxs("div",{className:"flex justify-between items-center mt-auto pt-2 border-t border-gray-200",children:[i.jsx("div",{children:i.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>te(ie.id,!1),className:"text-orange-600 hover:bg-orange-100 border-orange-300",children:[i.jsx(Pw,{className:"h-4 w-4 mr-1"})," Архивировать"]})}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>Ne(ie),className:"text-admin-badge-foreground hover:bg-admin-badge hover:text-admin-primary",children:[i.jsx(Ev,{className:"h-4 w-4 mr-1"})," Изменить"]}),i.jsx(ne,{size:"sm",variant:"default",onClick:()=>he(ie),className:"text-white bg-beauty-500 hover:bg-beauty-600",disabled:(ie.total_quantity&&ie.issued_quantity!==void 0&&ie.issued_quantity>=ie.total_quantity)??!1,children:"Продать"})]})]})]})]},ie.id)})})}),i.jsx(Ft,{value:"archived-subscriptions",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[_e.map(ie=>{const be=ie.rules,Je=Array.isArray(be.services)?be.services:[],Et=typeof ie.price=="number"?ie.price:ie.price?String(ie.price):0;return i.jsxs(qe,{className:"flex flex-col bg-white shadow-lg rounded-lg overflow-hidden opacity-70 border-dashed",children:[i.jsx(ht,{className:"pb-2 border-b bg-gray-50 px-4 py-3",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Pw,{className:"h-5 w-5 mr-2 text-gray-500 flex-shrink-0"}),i.jsx(gt,{className:"text-md font-semibold text-gray-700",children:ie.name})]})}),i.jsxs(Ge,{className:"flex flex-col flex-grow p-4 space-y-3",children:[ie.description&&i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:ie.description}),i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("p",{className:"text-2xl font-bold text-gray-700",children:[Et," ₽"]}),ie.total_quantity&&ie.issued_quantity!==void 0&&ie.issued_quantity>=ie.total_quantity&&i.jsx($t,{variant:"destructive",className:"text-xs",children:"Распродан"})]}),Je.length>0?i.jsxs("div",{className:"mb-3",children:[i.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Включённые услуги:"}),i.jsx("div",{className:"flex flex-wrap gap-1.5",children:Je.map((Ke,Pt)=>{var pe;const Ht=((pe=a.find(ze=>String(ze.id)===String(Ke)))==null?void 0:pe.name)||`ID: ${Ke}`;return i.jsx($t,{variant:"outline",className:"bg-gray-100 border-gray-300 text-gray-600 font-normal text-xs px-2 py-0.5 rounded-full",children:Ht},Ke+Pt)})})]}):i.jsx("div",{className:"mb-3 text-sm text-gray-400",children:"На все услуги"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[i.jsxs("div",{className:"bg-gray-100 p-2.5 rounded-md text-center",children:[i.jsx("p",{className:"text-[11px] text-gray-500 mb-0 leading-tight",children:"Посещений"}),i.jsx("p",{className:"text-xl font-bold text-gray-700",children:be.visits??"-"})]}),i.jsxs("div",{className:"bg-gray-100 p-2.5 rounded-md text-center",children:[i.jsx("p",{className:"text-[11px] text-gray-500 mb-0 leading-tight",children:"Срок действия"}),i.jsxs("p",{className:"text-lg font-bold text-gray-700",children:[be.expireDays??"-"," дней"]})]})]}),i.jsx("div",{className:"flex justify-end items-center mt-auto pt-2 border-t border-gray-200",children:i.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>te(ie.id,!0),className:"text-green-600 hover:bg-green-100 border-green-300",children:[i.jsx(kfe,{className:"h-4 w-4 mr-1"})," Восстановить"]})})]})]},ie.id)}),_e.length===0&&i.jsx("p",{className:"col-span-full text-center text-gray-500 py-8",children:"Архив шаблонов абонементов пуст."})]})}),i.jsxs(Ft,{value:"active-subscriptions",className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 gap-4",children:[i.jsx($e,{value:L,onChange:ie=>H(ie.target.value),placeholder:"Поиск по названию, ФИО или телефону клиента",className:"w-full sm:max-w-md"}),i.jsxs("div",{className:"flex items-center space-x-2 w-full sm:w-auto",children:[i.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Статус:"}),i.jsxs(Tr,{value:z,onValueChange:ie=>we(ie),children:[i.jsx(wr,{className:"w-full sm:w-[180px]",children:i.jsx(Ar,{placeholder:"Статус"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"all",children:"Все"}),i.jsx(_t,{value:"active",children:"Активные"}),i.jsx(_t,{value:"used",children:"Использованные"}),i.jsx(_t,{value:"expired",children:"Истекшие"})]})]})]})]}),Ye.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ye.map(ie=>{const be=C.find(Dt=>String(Dt.id)===String(ie.user_id)),Je=be==null?void 0:be.full_name,Et=be==null?void 0:be.phone,Ke=r.find(Dt=>Dt.id===ie.program_id),Pt=typeof(Ke==null?void 0:Ke.price)=="number"?Ke.price:Ke!=null&&Ke.price?String(Ke.price):"",Ht=ie.expires_at?new Date(ie.expires_at)<new Date:!1,pe=(ie.subscription_visits_left??0)>0;let ze="expired";!Ht&&pe?ze="active":!Ht&&!pe&&(ze="used");const yt=ie.visits??0,Rt=yt-(ie.subscription_visits_left??0),er=yt>0?Rt/yt*100:0;return i.jsxs(qe,{className:"flex flex-col bg-white shadow-lg rounded-lg overflow-hidden",children:[i.jsx(ht,{className:"pb-2 border-b bg-gray-50 px-4 py-3",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(WE,{className:"h-5 w-5 mr-2 text-pink-500 flex-shrink-0"}),i.jsx(gt,{className:"text-md font-semibold text-gray-800",children:ie.subscription_name||ie.program_name_fallback||"Название абонемента"})]}),i.jsx($t,{variant:Pe(ze),className:"whitespace-nowrap flex-shrink-0 ml-2 text-xs px-2 py-0.5 rounded-full",children:Re(ze)})]})}),i.jsxs(Ge,{className:"flex flex-col flex-grow p-4 space-y-3",children:[Je&&i.jsxs("div",{className:"mb-2 pb-2 border-b border-gray-100 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Клиент: "}),i.jsx("span",{className:"text-sm font-medium text-beauty-700",children:Je}),Et&&i.jsxs("span",{className:"block text-xs text-gray-500 mt-0.5",children:["Телефон: ",Et]})]}),Pt&&i.jsxs("span",{className:"text-gray-500 font-bold text-2xl",children:[Pt," ₽"]})]}),ie.services&&ie.services.length>0&&i.jsxs("div",{className:"",children:[i.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Доступные услуги:"}),i.jsx("div",{className:"flex flex-wrap gap-1.5",children:ie.services.map(Dt=>{var qr;const ar=((qr=a.find(V=>String(V.id)===String(Dt)))==null?void 0:qr.name)||`ID: ${Dt}`;return i.jsx($t,{variant:"outline",className:"bg-pink-50 border-pink-200 text-pink-600 font-normal text-xs px-2 py-0.5 rounded-full",children:ar},Dt)})})]}),yt>0&&i.jsxs("div",{className:"pt-1",children:[i.jsxs("div",{className:"flex justify-between items-center text-xs mb-0.5",children:[i.jsx("span",{className:"text-gray-600",children:"Использовано посещений"}),i.jsxs("span",{className:"font-medium text-gray-700",children:[Rt," из ",yt]})]}),i.jsx(nc,{value:er,className:"w-full h-1.5 [&>div]:bg-gray-800 rounded-full"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[i.jsxs("div",{className:"bg-pink-50 p-2.5 rounded-md text-center",children:[i.jsx("p",{className:"text-[11px] text-pink-700 mb-0 leading-tight",children:"Осталось посещений"}),i.jsx("p",{className:"text-xl font-bold text-pink-700",children:ie.subscription_visits_left??"-"})]}),i.jsxs("div",{className:"bg-pink-50 p-2.5 rounded-md text-center",children:[i.jsx("p",{className:"text-[11px] text-pink-700 mb-0 leading-tight",children:"Действует до"}),i.jsx("p",{className:"text-lg font-bold text-pink-700",children:ie.expires_at?Me(new Date(ie.expires_at),"dd.MM.yy"):"-"})]})]}),i.jsx("div",{className:"flex justify-end mt-auto pt-2 border-t border-gray-200",children:i.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>De(ie),disabled:ze!=="active",className:"text-sm text-pink-600 hover:bg-pink-50",children:[i.jsx(Pfe,{className:"h-3.5 w-3.5 mr-1"})," Использовать визит"]})})]})]},`card-${ie.id}`)})}):i.jsxs("div",{className:"text-center py-8 text-muted-foreground bg-gray-50 rounded-lg",children:[i.jsx(Rfe,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),i.jsx("p",{children:"Нет активных абонементов, соответствующих фильтру."})]})]})]})]})]}),i.jsx(qt,{open:h,onOpenChange:p,children:i.jsxs(Wt,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Создать абонемент"}),i.jsx(fr,{children:"Заполните форму для создания нового абонемента"})]}),i.jsxs("div",{className:"space-y-6 py-4",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-900 border-b pb-2",children:"Основная информация"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"name",children:"Название абонемента"}),i.jsx($e,{id:"name",name:"name",value:g.name||"",onChange:Y,placeholder:"Например: Массаж 10 сеансов"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"price",children:"Стоимость (₽)"}),i.jsx($e,{id:"price",name:"price",type:"number",value:g.price||"",onChange:ie=>b(be=>({...be,price:Number(ie.target.value)})),placeholder:"Например: 15000"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"visits",children:"Количество посещений"}),i.jsx($e,{id:"visits",name:"visits",type:"number",value:g.type==="subscription"?g.rules.visits??"":"",onChange:Y,placeholder:"Например: 10"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"expireDays",children:"Срок действия (дни)"}),i.jsx($e,{id:"expireDays",name:"expireDays",type:"number",value:g.type==="subscription"?g.rules.expireDays??"":"",onChange:Y,placeholder:"Например: 90"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"total_quantity",children:"Ограничить количество (шт.)"}),i.jsx($e,{id:"total_quantity",name:"total_quantity",type:"number",value:g.total_quantity??"",onChange:Y,placeholder:"Оставить пустым для безлимитного"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-900 border-b pb-2",children:"Область действия"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"scope",children:"Применить к"}),i.jsxs(Tr,{value:g.scope,onValueChange:ie=>{b(be=>({...be,scope:ie,studio_id:ie==="network"?void 0:be.studio_id}))},children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите область действия"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"studio",children:"Конкретная студия"}),i.jsx(_t,{value:"network",children:"Вся сеть"})]})]})]}),g.scope==="studio"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"studio_id",children:"Студия"}),i.jsxs(Tr,{value:g.studio_id||"",onValueChange:ie=>{b(be=>({...be,studio_id:ie}))},children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите студию"})}),i.jsx(_r,{children:t.map(ie=>i.jsx(_t,{value:ie.id,children:ie.name},ie.id))})]})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-900 border-b pb-2",children:"Услуги и описание"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"space-y-2",children:i.jsx(xZ,{label:"Включённые услуги",items:a.map(ie=>({value:String(ie.id),label:ie.name})),selectedItems:Array.isArray(g.rules.services)?g.rules.services:[],onSelectedItemsChange:ie=>{b(be=>({...be,rules:{...be.rules,services:ie}}))},placeholder:"Выберите услуги...",searchPlaceholder:"Поиск услуг...",emptyText:"Услуги не найдены.",disabled:a.length===0})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"description",children:"Описание"}),i.jsx(rn,{id:"description",name:"description",value:g.description||"",onChange:J,placeholder:"Опишите условия абонемента",rows:3})]})]})]})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:()=>p(!1),children:"Отмена"}),i.jsx(ne,{onClick:ge,children:"Сохранить"})]})]})}),i.jsx(qt,{open:y,onOpenChange:w,children:i.jsxs(Wt,{className:"sm:max-w-[500px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Продажа абонемента"}),i.jsx(fr,{children:"Выберите клиента и абонемент для продажи"})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{children:"Абонемент"}),i.jsx($e,{value:_?`${_.name} - ${_.price||""}₽`:"",disabled:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{children:"Клиент"}),C.length===0?i.jsx("div",{className:"text-muted-foreground text-sm",children:"Загрузка клиентов..."}):i.jsx(f_,{items:C.map(ie=>({value:String(ie.id),label:`${ie.full_name}${ie.phone?` (${ie.phone})`:""}`})),selectedValue:A,onSelectValue:B,placeholder:"Выберите клиента...",searchPlaceholder:"Поиск клиента...",emptyText:"Клиенты не найдены."})]})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:()=>w(!1),children:"Отмена"}),i.jsx(ne,{onClick:async()=>{if(!A||!_)return;if(_.total_quantity&&_.total_quantity>0&&(_.issued_quantity||0)>=_.total_quantity){e({title:"Лимит достигнут",description:"Абонементы этого типа закончились.",variant:"destructive"});return}const ie=_.rules;try{const{data:be,error:Je}=await ue.from("loyalty_user_states").insert({user_id:A,program_id:_.id,subscription_visits_left:ie.visits,visits:ie.visits,expire_days:ie.expireDays,services:ie.services,expires_at:(()=>{const Pt=new Date;return Pt.setDate(Pt.getDate()+(ie.expireDays||0)),Pt.toISOString().slice(0,10)})(),subscription_name:_.name}).select().single();if(Je){e({title:"Ошибка продажи абонемента",description:Je.message,variant:"destructive"});return}const Et=(_.issued_quantity||0)+1,{error:Ke}=await ue.from("loyalty_programs").update({issued_quantity:Et}).eq("id",_.id);Ke&&e({title:"Ошибка обновления счетчика",description:Ke.message,variant:"destructive"}),n(Pt=>Pt.map(Ht=>Ht.id===_.id?{...Ht,issued_quantity:Et}:Ht)),w(!1),e({title:"Абонемент продан!"}),ue.from("loyalty_user_states").select("*, loyalty_programs(name)").then(({data:Pt})=>{Pt&&P(Pt.map(Ht=>{var pe;return{...Ht,program_name_fallback:(pe=Ht.loyalty_programs)==null?void 0:pe.name}}))})}catch(be){e({title:"Ошибка",description:be instanceof Error?be.message:String(be),variant:"destructive"})}},children:"Продать"})]})]})}),i.jsx(qt,{open:!!D.sub,onOpenChange:()=>U({sub:null,program:null,client:null}),children:i.jsxs(Wt,{className:"sm:max-w-md rounded-lg shadow-xl",children:[i.jsxs(Gt,{className:"px-6 pt-5 pb-2 border-b",children:[i.jsx(Vt,{className:"text-xl font-semibold text-gray-800",children:"Использовать визит"}),D.client&&(D.sub||D.program)&&i.jsxs(fr,{className:"text-sm text-gray-500 mt-1",children:[i.jsxs("span",{className:"block text-base font-medium text-beauty-700 mb-1",children:["Клиент: ",D.client.full_name]}),"Абонемент: ",((Be=D.sub)==null?void 0:Be.subscription_name)||((Ie=D.program)==null?void 0:Ie.name)||"Название не указано"]})]}),i.jsxs("div",{className:"px-6 py-4",children:[i.jsxs("div",{className:"bg-sky-50 p-4 rounded-lg mb-4 border border-sky-100",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Осталось посещений:"}),i.jsxs("span",{className:"font-bold text-gray-800 text-sm",children:[((it=D.sub)==null?void 0:it.subscription_visits_left)??"-"," из ",((tt=D.sub)==null?void 0:tt.visits)??((ct=(Ze=D.program)==null?void 0:Ze.rules)==null?void 0:ct.visits)??"-"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Действителен до:"}),i.jsx("span",{className:"font-bold text-gray-800 text-sm",children:(St=D.sub)!=null&&St.expires_at?Me(new Date(D.sub.expires_at),"yyyy-MM-dd"):"-"})]})]}),i.jsx("div",{className:"text-sm text-red-600 mb-1",children:"После подтверждения будет использован 1 визит из абонемента."}),i.jsx("div",{className:"text-sm text-red-600",children:"Эту операцию нельзя отменить."})]}),i.jsxs(or,{className:"px-6 pb-5 pt-3 bg-gray-50 border-t rounded-b-lg",children:[i.jsx(ne,{variant:"outline",onClick:()=>U({sub:null,program:null,client:null}),className:"w-full sm:w-auto",children:"Отмена"}),i.jsx(ne,{disabled:!D.sub||D.sub.subscription_visits_left!==void 0&&D.sub.subscription_visits_left<=0,onClick:async()=>{if(!D.sub||D.sub.subscription_visits_left!==void 0&&D.sub.subscription_visits_left<=0)return;const ie=D.sub.subscription_visits_left??0,be=Math.max(0,ie-1);try{const{error:Je}=await ue.from("loyalty_user_states").update({subscription_visits_left:be}).eq("id",D.sub.id);if(Je){e({title:"Ошибка использования визита",description:Je.message,variant:"destructive"});return}U({sub:null,program:null,client:null}),e({title:"Визит успешно использован!"});const{data:Et,error:Ke}=await ue.from("loyalty_user_states").select("* , loyalty_programs (name)");if(Ke)console.error("Error refetching active subscriptions:",Ke);else if(Et){const Pt=Et.map(Ht=>{var pe;return{...Ht,program_name_fallback:(pe=Ht.loyalty_programs)==null?void 0:pe.name}});P(Pt)}}catch(Je){e({title:"Ошибка",description:Je instanceof Error?Je.message:String(Je),variant:"destructive"})}},className:"w-full sm:w-auto bg-pink-600 hover:bg-pink-700 text-white",children:"Использовать визит"})]})]})}),i.jsx(yNe,{open:M,onClose:()=>F(!1),onSave:Oe,initialData:O,editMode:K,allServices:a.map(ie=>({id:String(ie.id),name:ie.name}))}),i.jsx(qt,{open:ee,onOpenChange:q,children:i.jsxs(Wt,{className:"sm:max-w-[400px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Удалить программу лояльности?"}),i.jsxs(fr,{children:["Вы уверены, что хотите удалить программу ",i.jsx("b",{children:Z==null?void 0:Z.name}),"? Это действие необратимо."]})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:()=>q(!1),children:"Отмена"}),i.jsx(ne,{variant:"destructive",onClick:()=>Z&&Se(String(Z.id)),disabled:c,children:"Удалить"})]})]})})]})};var PD="Switch",[_Ne,Ylt]=lo(PD),[SNe,jNe]=_Ne(PD),yZ=x.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,p]=x.useState(null),v=Pr(t,w=>p(w)),m=x.useRef(!1),g=h?d||!!h.closest("form"):!0,[b=!1,y]=Ci({prop:a,defaultProp:s,onChange:u});return i.jsxs(SNe,{scope:r,checked:b,disabled:l,children:[i.jsx(zt.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":_Z(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:v,onClick:At(e.onClick,w=>{y(_=>!_),g&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})}),g&&i.jsx(ENe,{control:h,bubbles:!m.current,name:n,value:c,checked:b,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});yZ.displayName=PD;var bZ="SwitchThumb",wZ=x.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=jNe(bZ,r);return i.jsx(zt.span,{"data-state":_Z(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});wZ.displayName=bZ;var ENe=e=>{const{control:t,checked:r,bubbles:n=!0,...a}=e,s=x.useRef(null),o=Xj(r),l=ZS(t);return x.useEffect(()=>{const c=s.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==r&&f){const h=new Event("click",{bubbles:n});f.call(c,r),c.dispatchEvent(h)}},[o,r,n]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:s,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function _Z(e){return e?"checked":"unchecked"}var SZ=yZ,NNe=wZ;const Io=x.forwardRef(({className:e,...t},r)=>i.jsx(SZ,{className:Ue("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:i.jsx(NNe,{className:Ue("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Io.displayName=SZ.displayName;const CNe=({provider:e,open:t,onOpenChange:r})=>{const[n,a]=x.useState(""),[s,o]=x.useState(!1),[l,c]=x.useState(null),{connectMessenger:u}=Sf(),{toast:d}=co(),[f,h]=x.useState([]),[p,v]=x.useState(!1),[m,g]=x.useState("");x.useEffect(()=>{t&&(a(""),c(null),console.log(`Диалог открыт для провайдера: ${e}`))},[t,e]);const b=async()=>{v(!0),c(null),h([]),g("");try{console.log("Загрузка каналов Wazzup для провайдера:",e);const E=await fetch("https://api.wazzup24.com/v3/channels",{headers:{Authorization:`Bearer ${n}`}});if(!E.ok)throw new Error("Ошибка загрузки каналов: "+E.statusText);const j=await E.json();console.log("Загружены каналы Wazzup:",j);const N=Array.isArray(j)?j:j.channels||[];let k=[];e==="wazzup_whatsapp"?(k=N.filter(C=>C.state==="active"&&(C.transport==="whatsapp"||C.transport==="wamessages")),console.log("Активные каналы WhatsApp:",k)):e==="wazzup_telegram"?(k=N.filter(C=>C.state==="active"&&(C.transport==="telegram"||C.transport==="tgapi")),console.log("Активные каналы Telegram:",k)):e==="wazzup_vk"?(k=N.filter(C=>C.state==="active"&&(C.transport==="vk"||C.transport==="vkontakte")),console.log("Активные каналы VK:",k)):(k=N.filter(C=>C.state==="active"),console.log("Все активные каналы:",k)),h(k),k.length===0?c("Нет активных каналов для "+e):k.length>0&&(g(k[0].channelId),console.log("Выбран канал по умолчанию:",k[0]))}catch(E){E instanceof Error?c(E.message||"Ошибка загрузки каналов"):c("Ошибка загрузки каналов")}finally{v(!1)}},y=async()=>{if(S){if(!n.trim()){c("Пожалуйста, введите токен");return}if(!m){c("Пожалуйста, выберите канал");return}o(!0),c(null);try{const E=f.find(j=>j.channelId===m);if(!E)throw new Error("Канал не найден");console.log("Подключаем Wazzup с каналом:",{provider:e,channelId:E.channelId,transport:E.transport,plainId:E.plainId}),await u(e,n,{channelId:E.channelId,transport:E.transport,plainId:E.plainId}),d({title:"Мессенджер подключен",description:`Канал ${E.transport}: ${E.plainId} успешно подключён`}),r(!1)}catch(E){c(E instanceof Error?E.message:"Ошибка при подключении"),d({variant:"destructive",title:"Ошибка подключения",description:E instanceof Error?E.message:"Не удалось подключить мессенджер"})}finally{o(!1)}return}if(!n.trim()){c("Пожалуйста, введите токен");return}o(!0),c(null);try{console.log(`Пытаемся подключить ${e} с токеном: ${n.substring(0,5)}...`),await u(e,n),d({title:"Мессенджер подключен",description:`${e==="whatsapp"?"WhatsApp":"Telegram"} успешно подключен`}),r(!1)}catch(E){console.error("Connection error:",E),c(E instanceof Error?E.message:"Ошибка при подключении"),d({variant:"destructive",title:"Ошибка подключения",description:E instanceof Error?E.message:"Не удалось подключить мессенджер"})}finally{o(!1)}},_=(()=>{switch(e){case"telegram":return{title:"Подключение Telegram",description:"Создайте бот в @BotFather и введите полученный токен.",instructionSteps:["Откройте Telegram и найдите @BotFather","Отправьте команду /newbot","Следуйте инструкциям и создайте бота","Скопируйте токен и вставьте его ниже"],tokenLabel:"Bot Token",tokenPlaceholder:"123456789:AAHHYisNvABgoHZQXYZ...",helpLink:"https://core.telegram.org/bots/tutorial"};case"whatsapp":return{title:"Подключение WhatsApp Business",description:"Подключите WhatsApp Business API для отправки сообщений.",instructionSteps:["Зарегистрируйтесь в WhatsApp Business API",'Получите ключ доступа в разделе "Настройки"',"Скопируйте ключ и вставьте его ниже"],tokenLabel:"API Key",tokenPlaceholder:"wh4t5app-4p1-key-xxxx...",helpLink:"https://business.whatsapp.com/products/business-platform"};case"wazzup_whatsapp":return{title:"Подключение WhatsApp через Wazzup",description:"Подключите Wazzup API для отправки сообщений в WhatsApp.",instructionSteps:["Зарегистрируйтесь в сервисе Wazzup","Получите API токен в личном кабинете","Скопируйте токен и вставьте его ниже"],tokenLabel:"Wazzup API Токен",tokenPlaceholder:"wazzup-api-token-xxxx...",helpLink:"https://wazzup24.com/"};case"wazzup_telegram":return{title:"Подключение Telegram через Wazzup",description:"Подключите Wazzup API для отправки сообщений в Telegram.",instructionSteps:["Зарегистрируйтесь в сервисе Wazzup","Получите API токен в личном кабинете","Скопируйте токен и вставьте его ниже"],tokenLabel:"Wazzup API Токен",tokenPlaceholder:"wazzup-api-token-xxxx...",helpLink:"https://wazzup24.com/"};case"wazzup_vk":return{title:"Подключение ВКонтакте через Wazzup",description:"Подключите Wazzup API для отправки сообщений в ВКонтакте.",instructionSteps:["Зарегистрируйтесь в сервисе Wazzup","Получите API токен в личном кабинете","Скопируйте токен и вставьте его ниже"],tokenLabel:"Wazzup API Токен",tokenPlaceholder:"wazzup-api-token-xxxx...",helpLink:"https://wazzup24.com/"};default:return{title:"Подключение мессенджера",description:"Введите токен доступа.",instructionSteps:[],tokenLabel:"Токен",tokenPlaceholder:"Введите токен...",helpLink:"#"}}})(),S=e.startsWith("wazzup_");return console.log(`Рендеринг диалога, open=${t}, provider=${e}`),i.jsx(qt,{open:t,onOpenChange:r,children:i.jsxs(Wt,{className:"sm:max-w-[425px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:_.title}),i.jsx(fr,{children:_.description})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[l&&i.jsxs(Rf,{variant:"destructive",children:[i.jsx(rc,{className:"h-4 w-4"}),i.jsx(Df,{children:l})]}),i.jsx(Rf,{children:i.jsx(Df,{className:"text-sm",children:i.jsx("ol",{className:"list-decimal pl-4 space-y-2",children:_.instructionSteps.map((E,j)=>i.jsx("li",{children:E},j))})})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Xe,{htmlFor:"token",children:_.tokenLabel}),i.jsx($e,{id:"token",value:n,onChange:E=>a(E.target.value),placeholder:_.tokenPlaceholder,disabled:s||p}),S&&i.jsx(ne,{type:"button",onClick:b,disabled:!n.trim()||p,className:"mt-2",variant:"outline",children:p?"Загрузка...":"Загрузить каналы"}),S&&f.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx(Xe,{htmlFor:"channel",children:"Выберите канал"}),i.jsxs("select",{id:"channel",className:"w-full border rounded p-2 mt-1",value:m,onChange:E=>g(E.target.value),disabled:s,children:[i.jsx("option",{value:"",children:"-- Выберите канал --"}),f.map(E=>i.jsxs("option",{value:E.channelId,children:[E.transport,": ",E.plainId]},E.channelId))]})]})]}),i.jsx("div",{children:i.jsx("a",{href:_.helpLink,target:"_blank",rel:"noopener noreferrer",className:`text-sm ${S?"text-[#E77393]":"text-primary"} hover:underline`,children:"Подробная инструкция"})})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:()=>r(!1),disabled:s,children:"Отмена"}),i.jsx(ne,{onClick:y,disabled:s||S&&(!n.trim()||!m),className:S?"bg-[#E77393] hover:bg-[#d55f7f]":"relative",children:s?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"opacity-0",children:"Подключить"}),i.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:i.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]}):"Подключить"})]})]})})},kNe=()=>{var T;const[e,t]=x.useState(!1),[r,n]=x.useState(null),{toast:a}=co(),{loadIntegrations:s,integrations:o,whatsapp:l,telegram:c,isLoading:u,error:d,disconnectMessenger:f,updateSettings:h}=Sf();x.useEffect(()=>{s().catch(A=>{a({variant:"destructive",title:"Ошибка загрузки",description:"Не удалось загрузить интеграции. Пожалуйста, попробуйте позже."})})},[s,a]),l!=null&&l.is_active||c!=null&&c.is_active;const[p,v]=x.useState(null);x.useEffect(()=>{(async()=>{var R;const{data:A,error:B}=await ue.auth.getUser();(R=A==null?void 0:A.user)!=null&&R.id&&v(A.user.id)})()},[]);const[m,g]=x.useState("");x.useEffect(()=>{p&&(async()=>{var B,R;const{data:A}=await ue.from("integrations").select("*").eq("user_id",p).eq("provider","wazzup").eq("is_active",!0).maybeSingle();(((B=A==null?void 0:A.settings)==null?void 0:B.transport)==="telegram"||((R=A==null?void 0:A.settings)==null?void 0:R.transport)==="tgapi")&&g(A.access_token||A.token||"")})()},[p]);const b=A=>{n(A),t(!0)},[y,w]=x.useState(!1),[_,S]=x.useState(null),[E,j]=x.useState({}),[N,k]=x.useState(""),C=()=>{_&&(j(A=>({...A,[_]:N})),a({title:"Шаблон сохранён",description:"Шаблон сообщения успешно обновлён"})),w(!1)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs(fa,{defaultValue:"calendar",className:"w-full",children:[i.jsxs(ta,{className:"mb-6",children:[i.jsxs(Tt,{value:"calendar",className:"flex items-center gap-2",children:[i.jsx(Qa,{className:"h-4 w-4"})," Календари"]}),i.jsxs(Tt,{value:"messaging",className:"flex items-center gap-2",children:[i.jsx(Yh,{className:"h-4 w-4"})," Мессенджеры"]}),i.jsxs(Tt,{value:"docs",className:"flex items-center gap-2",children:[i.jsx(Pw,{className:"h-4 w-4"})," Документы"]})]}),i.jsx(Ft,{value:"calendar",className:"space-y-6",children:i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx(gt,{children:"Синхронизация с календарями"})}),i.jsxs(Ge,{children:[i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"border border-beauty-100 rounded-lg p-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-blue-50 rounded-full mr-4",children:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-blue-500",fill:"currentColor",children:i.jsx("path",{d:"M21.56 2H17V1c0-.55-.45-1-1-1s-1 .45-1 1v1H9V1c0-.55-.45-1-1-1S7 .45 7 1v1H2.44C1.65 2 1 2.65 1 3.44v17.12C1 21.35 1.65 22 2.44 22h19.12c.79 0 1.44-.65 1.44-1.44V3.44C23 2.65 22.35 2 21.56 2zM7 4H6V3h1v1zm11 0h-1V3h1v1zm3.89 17H2.11V8h19.78v13z"})})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-lg",children:"Google Calendar"}),i.jsx("p",{className:"text-beauty-600",children:"Синхронизируйте записи с Google Calendar"})]})]}),i.jsxs("div",{className:"flex items-center mt-4 md:mt-0",children:[i.jsx($t,{variant:"outline",className:"mr-4 border-yellow-300 text-yellow-700 bg-yellow-50",children:"Не подключено"}),i.jsx(ne,{className:"bg-beauty-500 hover:bg-beauty-600",children:"Подключить"})]})]})}),i.jsx("div",{className:"border border-beauty-100 rounded-lg p-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-blue-50 rounded-full mr-4",children:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-blue-600",fill:"currentColor",children:i.jsx("path",{d:"M17.25 17.25H6.75V6.75h5.25V5.25H6.75C5.92 5.25 5.25 5.92 5.25 6.75v10.5c0 .83.67 1.5 1.5 1.5h10.5c.83 0 1.5-.67 1.5-1.5v-5.25h-1.5v5.25zM13.5 5.25v1.5h2.19L9.11 13.33l1.06 1.06 6.58-6.58V10h1.5V5.25H13.5z"})})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-lg",children:"Apple Calendar"}),i.jsx("p",{className:"text-beauty-600",children:"Синхронизируйте записи с Apple Calendar"})]})]}),i.jsxs("div",{className:"flex items-center mt-4 md:mt-0",children:[i.jsx($t,{variant:"outline",className:"mr-4 border-yellow-300 text-yellow-700 bg-yellow-50",children:"Не подключено"}),i.jsx(ne,{className:"bg-beauty-500 hover:bg-beauty-600",children:"Подключить"})]})]})}),i.jsx("div",{className:"border border-beauty-100 rounded-lg p-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-blue-50 rounded-full mr-4",children:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-blue-700",fill:"currentColor",children:i.jsx("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"})})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-lg",children:"Microsoft Outlook"}),i.jsx("p",{className:"text-beauty-600",children:"Синхронизируйте записи с Outlook Calendar"})]})]}),i.jsxs("div",{className:"flex items-center mt-4 md:mt-0",children:[i.jsx($t,{variant:"outline",className:"mr-4 border-yellow-300 text-yellow-700 bg-yellow-50",children:"Не подключено"}),i.jsx(ne,{className:"bg-beauty-500 hover:bg-beauty-600",children:"Подключить"})]})]})})]}),i.jsxs("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg",children:[i.jsx("h3",{className:"font-medium mb-4",children:"Настройки синхронизации"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Двусторонняя синхронизация"}),i.jsx("div",{className:"text-sm text-beauty-600",children:"Изменения в любом календаре будут отражаться в других"})]}),i.jsx(Io,{disabled:!0})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Автоматическое обновление"}),i.jsx("div",{className:"text-sm text-beauty-600",children:"Обновлять календари каждые 15 минут"})]}),i.jsx(Io,{disabled:!0})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Видимость для клиентов"}),i.jsx("div",{className:"text-sm text-beauty-600",children:"Показывать ли клиентам свободные слоты в календаре"})]}),i.jsx(Io,{disabled:!0})]})]}),i.jsx("div",{className:"mt-4 text-center text-beauty-600 text-sm",children:"Для использования этих настроек, пожалуйста, подключите хотя бы один календарь"})]})]})]})}),i.jsx(Ft,{value:"messaging",className:"space-y-6",children:i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx(gt,{children:"Интеграция с мессенджерами"})}),i.jsx(Ge,{children:u?i.jsx("div",{className:"text-center py-8",children:"Загрузка интеграций..."}):d?i.jsxs(Rf,{variant:"destructive",className:"mb-4",children:[i.jsx(rc,{className:"h-4 w-4"}),i.jsx(Df,{children:d})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"border border-beauty-100 rounded-lg p-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-green-50 rounded-full mr-4",children:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-green-600",fill:"currentColor",children:i.jsx("path",{d:"M16.75 13.96c.25.13.41.2.46.3.06.11.04.61-.21 1.18-.2.56-1.24 1.1-1.7 1.12-.46.02-.47.36-2.96-.73-2.49-1.09-3.99-3.75-4.11-3.92-.12-.17-.96-1.38-.92-2.61.05-1.22.69-1.8.95-2.04.24-.26.51-.29.68-.26h.47c.15 0 .36-.06.55.45l.69 1.87c.06.13.1.28.01.44l-.27.41-.39.42c-.12.12-.26.25-.12.5.12.26.62 1.09 1.32 1.78.91.88 1.71 1.17 1.95 1.3.24.14.39.12.54-.04l.81-.94c.19-.25.35-.19.58-.11l1.67.88M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10c-1.97 0-3.8-.57-5.35-1.55L2 22l1.55-4.65A9.969 9.969 0 0 1 2 12 10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8c0 1.72.54 3.31 1.46 4.61L4.5 19.5l2.89-.96A7.95 7.95 0 0 0 12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8z"})})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-lg",children:"WhatsApp"}),i.jsx("p",{className:"text-beauty-600 text-sm",children:"Автоматическое оповещение клиентов через WhatsApp (от вашего номера через Wazzup)"})]})]}),i.jsx("div",{className:"flex items-center mt-4 md:mt-0",children:l!=null&&l.is_active?i.jsxs(i.Fragment,{children:[i.jsx($t,{variant:"outline",className:"mr-4 border-green-300 text-green-700 bg-green-50",children:"Подключено"}),i.jsx(ne,{variant:"outline",className:"hover:bg-red-50 hover:text-red-700",onClick:async()=>{if(!p){a({title:"Ошибка",description:"UserID не найден",variant:"destructive"});return}try{await f("whatsapp"),a({title:"WhatsApp отключен",description:"Интеграция и настройки уведомлений для WhatsApp отключены."})}catch(A){const B=A instanceof Error?A.message:"Не удалось отключить интеграцию WhatsApp или ее настройки.";a({variant:"destructive",title:"Ошибка отключения WhatsApp",description:B})}},children:"Отключить"})]}):i.jsxs(i.Fragment,{children:[i.jsx($t,{variant:"outline",className:"mr-4 border-yellow-300 text-yellow-700 bg-yellow-50",children:"Не подключено"}),i.jsx(ne,{className:"bg-beauty-500 hover:bg-beauty-600",onClick:()=>{b("wazzup_whatsapp")},children:"Подключить"})]})})]})}),i.jsx("div",{className:"border border-beauty-100 rounded-lg p-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-blue-50 rounded-full mr-4",children:i.jsx("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-blue-500",fill:"currentColor",children:i.jsx("path",{d:"M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"})})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-lg",children:"Telegram"}),i.jsx("p",{className:"text-beauty-600 text-sm",children:"Автоматическое оповещение клиентов через Telegram (от вашего номера через Wazzup)"})]})]}),i.jsx("div",{className:"flex items-center mt-4 md:mt-0",children:c!=null&&c.is_active?i.jsxs(i.Fragment,{children:[i.jsx($t,{variant:"outline",className:"mr-4 border-green-300 text-green-700 bg-green-50",children:"Подключено"}),i.jsx(ne,{variant:"outline",className:"hover:bg-red-50 hover:text-red-700",onClick:async()=>{if(!p){a({title:"Ошибка",description:"UserID не найден",variant:"destructive"});return}try{console.log("Отключение Wazzup Telegram через IntegrationsPanel..."),await f("telegram"),a({title:"Wazzup Telegram отключен",description:"Интеграция и настройки уведомлений для Telegram отключены."})}catch(A){const B=A instanceof Error?A.message:"Не удалось отключить интеграцию или ее настройки.";a({variant:"destructive",title:"Ошибка отключения",description:B})}},children:"Отключить"})]}):i.jsxs(i.Fragment,{children:[i.jsx($t,{variant:"outline",className:"mr-4 border-yellow-300 text-yellow-700 bg-yellow-50",children:"Не подключено"}),i.jsx(ne,{className:"bg-beauty-500 hover:bg-beauty-600",onClick:()=>b("wazzup_telegram"),children:"Подключить"})]})})]})}),i.jsx("div",{className:"border border-beauty-100 rounded-lg p-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 bg-blue-50 rounded-full mr-4",children:i.jsx(WG,{className:"h-8 w-8 text-blue-700"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-lg",children:"ВКонтакте"}),i.jsx("p",{className:"text-beauty-600 text-sm",children:"Переписка с клиентами через ВКонтакте (интеграция Wazzup)"})]})]}),i.jsx("div",{className:"flex items-center mt-4 md:mt-0",children:(T=Sf.getState().wazzupVK)!=null&&T.is_active?i.jsxs(i.Fragment,{children:[i.jsx($t,{variant:"outline",className:"mr-4 border-green-300 text-green-700 bg-green-50",children:"Подключено"}),i.jsx(ne,{variant:"outline",className:"hover:bg-red-50 hover:text-red-700",onClick:async()=>{if(!p){a({title:"Ошибка",description:"UserID не найден",variant:"destructive"});return}try{await f("vk"),a({title:"ВКонтакте отключен",description:"Интеграция и настройки уведомлений для ВКонтакте отключены."})}catch(A){const B=A instanceof Error?A.message:"Не удалось отключить интеграцию VK или ее настройки.";a({variant:"destructive",title:"Ошибка отключения VK",description:B})}},children:"Отключить"})]}):i.jsxs(i.Fragment,{children:[i.jsx($t,{variant:"outline",className:"mr-4 border-yellow-300 text-yellow-700 bg-yellow-50",children:"Не подключено"}),i.jsx(ne,{className:"bg-beauty-500 hover:bg-beauty-600",onClick:()=>{n("wazzup_vk"),t(!0)},children:"Подключить"})]})})]})})]})})]})}),i.jsx(Ft,{value:"docs",className:"space-y-6",children:i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx(gt,{children:"Архив документов"})}),i.jsxs(Ge,{children:[i.jsxs("div",{className:"p-6 border-2 border-dashed border-beauty-200 rounded-lg text-center mb-6",children:[i.jsx(Iw,{className:"h-10 w-10 mx-auto text-beauty-400 mb-2"}),i.jsx("h3",{className:"font-medium text-lg mb-2",children:"Загрузите документы"}),i.jsx("p",{className:"text-beauty-600 mb-4",children:"Перетащите файлы сюда или нажмите кнопку ниже для загрузки документов"}),i.jsx(ne,{className:"bg-beauty-500 hover:bg-beauty-600",children:"Выбрать файлы"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium mb-2",children:"Документы клиентов"}),i.jsx("div",{className:"space-y-4",children:[{client:"Елена Петрова",type:"Договор",date:"15.04.2025",size:"256 KB"},{client:"Светлана Иванова",type:"Согласие на обработку персональных данных",date:"10.04.2025",size:"128 KB"},{client:"Мария Соколова",type:"Договор",date:"05.04.2025",size:"256 KB"}].map((A,B)=>i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center border-b border-beauty-100 pb-4 last:border-0",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-beauty-900",children:A.client}),i.jsx("div",{className:"text-sm text-beauty-700",children:A.type}),i.jsxs("div",{className:"text-sm text-beauty-600",children:["Загружен: ",A.date," • Размер: ",A.size]})]}),i.jsxs("div",{className:"flex gap-2 mt-2 md:mt-0",children:[i.jsx(ne,{variant:"outline",size:"sm",children:"Просмотреть"}),i.jsx(ne,{variant:"outline",size:"sm",children:"Скачать"})]})]},B))})]}),i.jsxs("div",{className:"mt-8",children:[i.jsx("h3",{className:"font-medium mb-2",children:"Шаблоны документов"}),i.jsx("div",{className:"space-y-4",children:[{name:"Договор оказания услуг",type:"PDF"},{name:"Согласие на обработку персональных данных",type:"DOCX"},{name:"Карта клиента",type:"PDF"}].map((A,B)=>i.jsxs("div",{className:"flex justify-between items-center border-b border-beauty-100 pb-4 last:border-0",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 mr-3",children:i.jsx(Pw,{className:"h-5 w-5 text-beauty-500"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:A.name}),i.jsxs("div",{className:"text-sm text-beauty-600",children:["Тип файла: ",A.type]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ne,{variant:"outline",size:"sm",children:"Редактировать"}),i.jsx(ne,{variant:"outline",size:"sm",children:"Использовать"})]})]},B))})]})]})]})})]}),i.jsx(CNe,{open:e,onOpenChange:t,provider:r||""}),i.jsx(qt,{open:y,onOpenChange:w,children:i.jsxs(Wt,{className:"sm:max-w-[500px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Редактировать шаблон сообщения"}),i.jsxs(fr,{children:["Используйте переменные: ","{name}",", ","{date}",", ","{time}",", ","{review_link}",", ","{booking_link}"]})]}),i.jsx(rn,{value:N,onChange:A=>k(A.target.value),rows:5,className:"w-full"}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:()=>w(!1),children:"Отмена"}),i.jsx(ne,{onClick:C,children:"Сохранить"})]})]})})]})},TNe=G4,ANe=K4,PNe=X4,jZ=x.forwardRef(({className:e,...t},r)=>i.jsx(dy,{className:Ue("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));jZ.displayName=dy.displayName;const ONe=qp("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),RNe=x.forwardRef(({side:e="right",className:t,children:r,...n},a)=>i.jsxs(PNe,{children:[i.jsx(jZ,{}),i.jsxs(fy,{ref:a,className:Ue(ONe({side:e}),t),...n,children:[r,i.jsxs(Oj,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[i.jsx(Oc,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));RNe.displayName=fy.displayName;const DNe=x.forwardRef(({className:e,...t},r)=>i.jsx(hy,{ref:r,className:Ue("text-lg font-semibold text-foreground",e),...t}));DNe.displayName=hy.displayName;const MNe=x.forwardRef(({className:e,...t},r)=>i.jsx(my,{ref:r,className:Ue("text-sm text-muted-foreground",e),...t}));MNe.displayName=my.displayName;const Oi=uo()(Gf(Jp(Kf((e,t)=>({services:[],categories:[],isLoading:!1,error:null,specialistServices:{},currentSpecialistId:null,filteredServices:[],loading:!1,fetchServices:async()=>{try{e({loading:!0,error:null});const r=await es.getAllServices();if(r.error)throw new Error(r.error.message);const n=r.data||[];e({services:n,filteredServices:n,loading:!1})}catch(r){console.error("Ошибка при загрузке услуг:",r),e({error:r instanceof Error?r.message:"Ошибка при загрузке услуг",loading:!1})}},fetchCategories:async()=>{e({isLoading:!0,error:null});try{console.log("Загружаем категории из Supabase...");const r=await ue.from("service_categories").select("*").order("name");if(r.error)throw new Error(r.error.message);const n=r.data;console.log(`Загружено ${n.length} категорий из Supabase`),e({categories:n,isLoading:!1})}catch(r){const n=r instanceof Error?r.message:"Ошибка загрузки категорий";console.error("Ошибка загрузки категорий:",n),e({error:n,isLoading:!1}),Ae({title:"Ошибка",description:n,variant:"destructive"})}},addService:async r=>{e({isLoading:!0,error:null});try{console.log("Добавляем услугу через store:",r);const n={name:r.name,duration:r.duration,price:r.price,description:r.description||null,is_active:r.is_active!==void 0?r.is_active:!0,category_id:r.category_id,image_url:r.image_url,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Отправляем данные:",n);const a=await ue.from("services").insert([n]).select().single();if(console.log("Ответ после добавления:",a),a.error)throw console.error("Ошибка при создании услуги:",a.error),new Error(a.error.message);const s=a.data;return console.log("Добавлена услуга:",s),e(o=>{const l=[...o.services,s];return console.log(`В хранилище теперь ${l.length} услуг (было ${o.services.length})`),{services:l,isLoading:!1}}),Ae({title:"Успешно",description:"Услуга успешно добавлена"}),s}catch(n){const a=n instanceof Error?n.message:"Ошибка добавления услуги";return console.error("Ошибка при добавлении услуги:",a),e({error:a,isLoading:!1}),Ae({title:"Ошибка",description:a,variant:"destructive"}),null}},updateService:async(r,n)=>{e({isLoading:!0,error:null});try{console.log("Обновляем услугу:",r,n);const a={...n,updated_at:new Date().toISOString()},s=await ue.from("services").update(a).eq("id",r).select().single();if(console.log("Ответ после обновления:",s),s.error)throw new Error(s.error.message);const o=s.data;return console.log("Обновлена услуга:",o),e(l=>({services:l.services.map(c=>c.id===r?o:c),isLoading:!1})),Ae({title:"Успешно",description:"Услуга успешно обновлена"}),o}catch(a){const s=a instanceof Error?a.message:"Ошибка обновления услуги";return console.error("Ошибка при обновлении услуги:",s),e({error:s,isLoading:!1}),Ae({title:"Ошибка",description:s,variant:"destructive"}),null}},deleteService:async r=>{e({isLoading:!0,error:null});try{console.log("Удаляем услугу:",r);const n=await ue.from("services").delete().eq("id",r);if(console.log("Ответ после удаления:",n),n.error)throw new Error(n.error.message);e(a=>({services:a.services.filter(s=>s.id!==r),isLoading:!1})),Ae({title:"Успешно",description:"Услуга успешно удалена"})}catch(n){const a=n instanceof Error?n.message:"Ошибка удаления услуги";console.error("Ошибка при удалении услуги:",a),e({error:a,isLoading:!1}),Ae({title:"Ошибка",description:a,variant:"destructive"})}},addCategory:async r=>{e({isLoading:!0,error:null});try{console.log("Добавляем категорию через store:",r);const n={name:r.name,description:r.description||null};console.log("Отправляем данные категории:",n);const a=await ue.from("service_categories").insert([n]).select().single();if(console.log("Ответ после добавления категории:",a),a.error)throw console.error("Ошибка при создании категории:",a.error),new Error(a.error.message);const s=a.data;return console.log("Добавлена категория:",s),e(o=>{const l=[...o.categories,s];return console.log(`В хранилище теперь ${l.length} категорий (было ${o.categories.length})`),{categories:l,isLoading:!1}}),Ae({title:"Успешно",description:"Категория успешно добавлена"}),s}catch(n){const a=n instanceof Error?n.message:"Ошибка добавления категории";return console.error("Ошибка при добавлении категории:",a),e({error:a,isLoading:!1}),Ae({title:"Ошибка",description:a,variant:"destructive"}),null}},updateCategory:async(r,n)=>{e({isLoading:!0,error:null});try{console.log("Обновляем категорию:",r,n);const a={...n},s=await ue.from("service_categories").update(a).eq("id",r).select().single();if(console.log("Ответ после обновления категории:",s),s.error)throw new Error(s.error.message);const o=s.data;return console.log("Обновлена категория:",o),e(l=>({categories:l.categories.map(c=>c.id===r?o:c),isLoading:!1})),Ae({title:"Успешно",description:"Категория успешно обновлена"}),o}catch(a){const s=a instanceof Error?a.message:"Ошибка обновления категории";return console.error("Ошибка при обновлении категории:",s),e({error:s,isLoading:!1}),Ae({title:"Ошибка",description:s,variant:"destructive"}),null}},deleteCategory:async r=>{e({isLoading:!0,error:null});try{console.log("Удаляем категорию:",r);const n=await ue.from("service_categories").delete().eq("id",r);if(console.log("Ответ после удаления категории:",n),n.error)throw new Error(n.error.message);e(a=>({categories:a.categories.filter(s=>s.id!==r),isLoading:!1})),Ae({title:"Успешно",description:"Категория успешно удалена"})}catch(n){const a=n instanceof Error?n.message:"Ошибка удаления категории";console.error("Ошибка при удалении категории:",a),e({error:a,isLoading:!1}),Ae({title:"Ошибка",description:a,variant:"destructive"})}},getServicesByCategory:r=>{const{services:n}=t();return r?n.filter(a=>String(a.category_id)===String(r)):n},getServicesBySpecialist:r=>{const n=String(r),a=t().specialistServices[n];return console.log(`[serviceStore] getServicesBySpecialist для ID ${n}. Найдено в кэше:`,a),a||[]},getActiveServices:()=>t().services.filter(r=>r.is_active),getServiceById:r=>{const{services:n}=t();return n.find(a=>String(a.id)===String(r))},getServicesByIds:r=>{const{services:n}=t();return n.filter(a=>r.some(s=>String(s)===String(a.id)))},refreshSpecialistServices:async r=>{var a;const n=String(r);console.log(`[serviceStore] Запуск refreshSpecialistServices для ID: ${n}`),e({isLoading:!0,error:null,currentSpecialistId:n});try{console.log(`[serviceStore] Вызов serviceService.getServicesBySpecialistId(${n})`);const{data:s,error:o}=await es.getServicesBySpecialistId(n);if(console.log(`[serviceStore] Получен результат от serviceService для ID ${n}:`,s),o)throw new Error(o.message||"Ошибка получения услуг");if(!Array.isArray(s))throw console.error("[serviceStore] Ошибка: getServicesBySpecialistId вернул не массив!",s),new Error("Неверный формат данных от сервиса");const l=s.filter(c=>c&&c.id);return console.log(`[serviceStore] Валидные услуги после фильтрации null/undefined для ID ${n}:`,l),e(c=>({specialistServices:{...c.specialistServices,[n]:l},isLoading:!1,currentSpecialistId:null})),console.log(`[serviceStore] Кэш specialistServices обновлен для ID ${n}. Новое значение:`,t().specialistServices[n]),console.log(`[serviceStore] Количество услуг в кэше для ID ${n}: ${((a=t().specialistServices[n])==null?void 0:a.length)??0}`),t().specialistServices[n]||[]}catch(s){console.error(`[serviceStore] Ошибка при обновлении услуг для специалиста ${n}:`,s);const o=s instanceof Error?s.message:"Неизвестная ошибка при загрузке услуг";return e({isLoading:!1,error:o,currentSpecialistId:null}),Ae({title:"Ошибка загрузки услуг",description:o,variant:"destructive"}),t().specialistServices[n]||[]}},clearSpecialistServicesCache:r=>{if(!r){console.log("[serviceStore] clearSpecialistServicesCache: ID не указан, пропускаем очистку");return}const n=String(r);console.log(`[serviceStore] Очистка кэша услуг для специалиста ${n}`),e(a=>{const{[n]:s,...o}=a.specialistServices;return{specialistServices:o,error:null}}),Ae({title:"Кэш очищен",description:"Данные будут запрошены заново при следующем обращении",variant:"default"})},syncSpecialistServices:async r=>{console.log("[serviceStore] Синхронизация услуг для специалиста",r),e(n=>({...n,servicesError:null,isLoading:!0}));try{const n=await es.syncSpecialistServices(r);return console.log("[serviceStore] Результат синхронизации:",n),n.synced?Ae({title:"Услуги синхронизированы",description:`Добавлено: ${n.added}, удалено: ${n.removed} услуг`,variant:"default"}):Ae({title:"Синхронизация не требуется",description:"Услуги специалиста уже синхронизированы",variant:"default"}),n}catch(n){return console.error("[serviceStore] Ошибка при синхронизации услуг:",n),e(a=>({...a,servicesError:n})),Ae({title:"Ошибка синхронизации",description:`Не удалось синхронизировать услуги: ${n.message}`,variant:"destructive"}),{synced:!1,added:0,removed:0}}finally{e(n=>({...n,isLoading:!1}))}},uploadServiceImage:async(r,n)=>{try{if(!r)throw new Error("Файл не выбран");const{data:a,error:s}=await ue.storage.from("services").upload(n,r,{cacheControl:"3600",upsert:!0});if(s)throw new Error(s.message);const{data:{publicUrl:o}}=ue.storage.from("services").getPublicUrl(a.path);return o}catch(a){const s=a instanceof Error?a.message:"Ошибка загрузки изображения";throw console.error("Ошибка при загрузке изображения:",s),Ae({title:"Ошибка",description:s,variant:"destructive"}),new Error(s)}},fetchServicesByStudio:async r=>{try{e({loading:!0,error:null}),console.log("Загружаем услуги для студии:",r);const n=await es.getAllServicesByStudio(r);if(n.error){console.error("Ошибка при загрузке услуг по студии:",n.error),console.log("Fallback: загружаем все услуги");const s=await es.getAllServices();if(s.error)throw new Error(s.error.message);const o=s.data||[];e({services:o,filteredServices:o,loading:!1});return}const a=n.data||[];console.log("Загружены услуги по студии:",a.length),e({services:a,filteredServices:a,loading:!1})}catch(n){console.error("Ошибка при загрузке услуг по студии:",n);try{const a=await es.getAllServices();if(!a.error){const s=a.data||[];e({services:s,filteredServices:s,loading:!1});return}}catch(a){console.error("Ошибка fallback загрузки услуг:",a)}e({error:n instanceof Error?n.message:"Ошибка при загрузке услуг по студии",loading:!1})}}}),{name:"service-storage",partialize:e=>({services:e.services,categories:e.categories,specialistServices:e.specialistServices})}))));var m5=!1,Rd,zA,WA,K1,X1,EZ,Y1,VA,HA,qA,NZ,GA,KA,CZ,kZ;function Bs(){if(!m5){m5=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),r=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(GA=/\b(iPhone|iP[ao]d)/.exec(e),KA=/\b(iP[ao]d)/.exec(e),qA=/Android/i.exec(e),CZ=/FBAN\/\w+;/i.exec(e),kZ=/Mobile/i.exec(e),NZ=!!/Win64/.exec(e),t){Rd=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,Rd&&document&&document.documentMode&&(Rd=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(e);EZ=n?parseFloat(n[1])+4:Rd,zA=t[2]?parseFloat(t[2]):NaN,WA=t[3]?parseFloat(t[3]):NaN,K1=t[4]?parseFloat(t[4]):NaN,K1?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),X1=t&&t[1]?parseFloat(t[1]):NaN):X1=NaN}else Rd=zA=WA=X1=K1=NaN;if(r){if(r[1]){var a=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);Y1=a?parseFloat(a[1].replace("_",".")):!0}else Y1=!1;VA=!!r[2],HA=!!r[3]}else Y1=VA=HA=!1}}var XA={ie:function(){return Bs()||Rd},ieCompatibilityMode:function(){return Bs()||EZ>Rd},ie64:function(){return XA.ie()&&NZ},firefox:function(){return Bs()||zA},opera:function(){return Bs()||WA},webkit:function(){return Bs()||K1},safari:function(){return XA.webkit()},chrome:function(){return Bs()||X1},windows:function(){return Bs()||VA},osx:function(){return Bs()||Y1},linux:function(){return Bs()||HA},iphone:function(){return Bs()||GA},mobile:function(){return Bs()||GA||KA||qA||kZ},nativeApp:function(){return Bs()||CZ},android:function(){return Bs()||qA},ipad:function(){return Bs()||KA}},INe=XA,Lb=!!(typeof window<"u"&&window.document&&window.document.createElement),$Ne={canUseDOM:Lb,canUseWorkers:typeof Worker<"u",canUseEventListeners:Lb&&!!(window.addEventListener||window.attachEvent),canUseViewport:Lb&&!!window.screen,isInWorker:!Lb},FNe=$Ne,TZ=FNe,AZ;TZ.canUseDOM&&(AZ=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function LNe(e,t){if(!TZ.canUseDOM||t&&!("addEventListener"in document))return!1;var r="on"+e,n=r in document;if(!n){var a=document.createElement("div");a.setAttribute(r,"return;"),n=typeof a[r]=="function"}return!n&&AZ&&e==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var BNe=LNe,UNe=INe,zNe=BNe,p5=10,g5=40,v5=800;function PZ(e){var t=0,r=0,n=0,a=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),n=t*p5,a=r*p5,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||a)&&e.deltaMode&&(e.deltaMode==1?(n*=g5,a*=g5):(n*=v5,a*=v5)),n&&!t&&(t=n<1?-1:1),a&&!r&&(r=a<1?-1:1),{spinX:t,spinY:r,pixelX:n,pixelY:a}}PZ.getEventType=function(){return UNe.firefox()?"DOMMouseScroll":zNe("wheel")?"wheel":"mousewheel"};var WNe=PZ,VNe=WNe;const HNe=zr(VNe);function qNe(e,t,r,n,a,s){s===void 0&&(s=0);var o=lp(e,t,s),l=o.width,c=o.height,u=Math.min(l,r),d=Math.min(c,n);return u>d*a?{width:d*a,height:d}:{width:u,height:u/a}}function GNe(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}function F0(e,t,r,n,a){a===void 0&&(a=0);var s=lp(t.width,t.height,a),o=s.width,l=s.height;return{x:x5(e.x,o,r.width,n),y:x5(e.y,l,r.height,n)}}function x5(e,t,r,n){var a=t*n/2-r/2;return t2(e,-a,a)}function y5(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function b5(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*180/Math.PI}function KNe(e,t,r,n,a,s,o){s===void 0&&(s=0),o===void 0&&(o=!0);var l=o?XNe:YNe,c=lp(t.width,t.height,s),u=lp(t.naturalWidth,t.naturalHeight,s),d={x:l(100,((c.width-r.width/a)/2-e.x/a)/c.width*100),y:l(100,((c.height-r.height/a)/2-e.y/a)/c.height*100),width:l(100,r.width/c.width*100/a),height:l(100,r.height/c.height*100/a)},f=Math.round(l(u.width,d.width*u.width/100)),h=Math.round(l(u.height,d.height*u.height/100)),p=u.width>=u.height*n,v=p?{width:Math.round(h*n),height:h}:{width:f,height:Math.round(f/n)},m=vr(vr({},v),{x:Math.round(l(u.width-v.width,d.x*u.width/100)),y:Math.round(l(u.height-v.height,d.y*u.height/100))});return{croppedAreaPercentages:d,croppedAreaPixels:m}}function XNe(e,t){return Math.min(e,Math.max(0,t))}function YNe(e,t){return t}function ZNe(e,t,r,n,a,s){var o=lp(t.width,t.height,r),l=t2(n.width/o.width*(100/e.width),a,s),c={x:l*o.width/2-n.width/2-o.width*l*(e.x/100),y:l*o.height/2-n.height/2-o.height*l*(e.y/100)};return{crop:c,zoom:l}}function JNe(e,t,r){var n=GNe(t);return r.height>r.width?r.height/(e.height*n):r.width/(e.width*n)}function QNe(e,t,r,n,a,s){r===void 0&&(r=0);var o=lp(t.naturalWidth,t.naturalHeight,r),l=t2(JNe(e,t,n),a,s),c=n.height>n.width?n.height/e.height:n.width/e.width,u={x:((o.width-e.width)/2-e.x)*c,y:((o.height-e.height)/2-e.y)*c};return{crop:u,zoom:l}}function w5(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function eCe(e){return e*Math.PI/180}function lp(e,t,r){var n=eCe(r);return{width:Math.abs(Math.cos(n)*e)+Math.abs(Math.sin(n)*t),height:Math.abs(Math.sin(n)*e)+Math.abs(Math.cos(n)*t)}}function t2(e,t,r){return Math.min(Math.max(e,t),r)}function Bb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(r){return typeof r=="string"&&r.length>0}).join(" ").trim()}var tCe=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,rCe=1,nCe=3,aCe=1,sCe=function(e){X0e(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.cropperRef=x.createRef(),r.imageRef=x.createRef(),r.videoRef=x.createRef(),r.containerPosition={x:0,y:0},r.containerRef=null,r.styleRef=null,r.containerRect=null,r.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.gestureZoomStart=0,r.gestureRotationStart=0,r.isTouching=!1,r.lastPinchDistance=0,r.lastPinchRotation=0,r.rafDragTimeout=null,r.rafPinchTimeout=null,r.wheelTimer=null,r.currentDoc=typeof document<"u"?document:null,r.currentWindow=typeof window<"u"?window:null,r.resizeObserver=null,r.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},r.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!r.containerRef)){var n=!0;r.resizeObserver=new window.ResizeObserver(function(a){if(n){n=!1;return}r.computeSizes()}),r.resizeObserver.observe(r.containerRef)}},r.preventZoomSafari=function(n){return n.preventDefault()},r.cleanEvents=function(){r.currentDoc&&(r.currentDoc.removeEventListener("mousemove",r.onMouseMove),r.currentDoc.removeEventListener("mouseup",r.onDragStopped),r.currentDoc.removeEventListener("touchmove",r.onTouchMove),r.currentDoc.removeEventListener("touchend",r.onDragStopped),r.currentDoc.removeEventListener("gesturemove",r.onGestureMove),r.currentDoc.removeEventListener("gestureend",r.onGestureEnd),r.currentDoc.removeEventListener("scroll",r.onScroll))},r.clearScrollEvent=function(){r.containerRef&&r.containerRef.removeEventListener("wheel",r.onWheel),r.wheelTimer&&clearTimeout(r.wheelTimer)},r.onMediaLoad=function(){var n=r.computeSizes();n&&(r.emitCropData(),r.setInitialCrop(n)),r.props.onMediaLoaded&&r.props.onMediaLoaded(r.mediaSize)},r.setInitialCrop=function(n){if(r.props.initialCroppedAreaPercentages){var a=ZNe(r.props.initialCroppedAreaPercentages,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),s=a.crop,o=a.zoom;r.props.onCropChange(s),r.props.onZoomChange&&r.props.onZoomChange(o)}else if(r.props.initialCroppedAreaPixels){var l=QNe(r.props.initialCroppedAreaPixels,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),s=l.crop,o=l.zoom;r.props.onCropChange(s),r.props.onZoomChange&&r.props.onZoomChange(o)}},r.computeSizes=function(){var n,a,s,o,l,c,u=r.imageRef.current||r.videoRef.current;if(u&&r.containerRef){r.containerRect=r.containerRef.getBoundingClientRect(),r.saveContainerPosition();var d=r.containerRect.width/r.containerRect.height,f=((n=r.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((a=r.videoRef.current)===null||a===void 0?void 0:a.videoWidth)||0,h=((s=r.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((o=r.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,p=u.offsetWidth<f||u.offsetHeight<h,v=f/h,m=void 0;if(p)switch(r.state.mediaObjectFit){default:case"contain":m=d>v?{width:r.containerRect.height*v,height:r.containerRect.height}:{width:r.containerRect.width,height:r.containerRect.width/v};break;case"horizontal-cover":m={width:r.containerRect.width,height:r.containerRect.width/v};break;case"vertical-cover":m={width:r.containerRect.height*v,height:r.containerRect.height};break}else m={width:u.offsetWidth,height:u.offsetHeight};r.mediaSize=vr(vr({},m),{naturalWidth:f,naturalHeight:h}),r.props.setMediaSize&&r.props.setMediaSize(r.mediaSize);var g=r.props.cropSize?r.props.cropSize:qNe(r.mediaSize.width,r.mediaSize.height,r.containerRect.width,r.containerRect.height,r.props.aspect,r.props.rotation);return(((l=r.state.cropSize)===null||l===void 0?void 0:l.height)!==g.height||((c=r.state.cropSize)===null||c===void 0?void 0:c.width)!==g.width)&&r.props.onCropSizeChange&&r.props.onCropSizeChange(g),r.setState({cropSize:g},r.recomputeCropPosition),r.props.setCropSize&&r.props.setCropSize(g),g}},r.saveContainerPosition=function(){if(r.containerRef){var n=r.containerRef.getBoundingClientRect();r.containerPosition={x:n.left,y:n.top}}},r.onMouseDown=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("mousemove",r.onMouseMove),r.currentDoc.addEventListener("mouseup",r.onDragStopped),r.saveContainerPosition(),r.onDragStart(t.getMousePoint(n)))},r.onMouseMove=function(n){return r.onDrag(t.getMousePoint(n))},r.onScroll=function(n){r.currentDoc&&(n.preventDefault(),r.saveContainerPosition())},r.onTouchStart=function(n){r.currentDoc&&(r.isTouching=!0,!(r.props.onTouchRequest&&!r.props.onTouchRequest(n))&&(r.currentDoc.addEventListener("touchmove",r.onTouchMove,{passive:!1}),r.currentDoc.addEventListener("touchend",r.onDragStopped),r.saveContainerPosition(),n.touches.length===2?r.onPinchStart(n):n.touches.length===1&&r.onDragStart(t.getTouchPoint(n.touches[0]))))},r.onTouchMove=function(n){n.preventDefault(),n.touches.length===2?r.onPinchMove(n):n.touches.length===1&&r.onDrag(t.getTouchPoint(n.touches[0]))},r.onGestureStart=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("gesturechange",r.onGestureMove),r.currentDoc.addEventListener("gestureend",r.onGestureEnd),r.gestureZoomStart=r.props.zoom,r.gestureRotationStart=r.props.rotation)},r.onGestureMove=function(n){if(n.preventDefault(),!r.isTouching){var a=t.getMousePoint(n),s=r.gestureZoomStart-1+n.scale;if(r.setNewZoom(s,a,{shouldUpdatePosition:!0}),r.props.onRotationChange){var o=r.gestureRotationStart+n.rotation;r.props.onRotationChange(o)}}},r.onGestureEnd=function(n){r.cleanEvents()},r.onDragStart=function(n){var a,s,o=n.x,l=n.y;r.dragStartPosition={x:o,y:l},r.dragStartCrop=vr({},r.props.crop),(s=(a=r.props).onInteractionStart)===null||s===void 0||s.call(a)},r.onDrag=function(n){var a=n.x,s=n.y;r.currentWindow&&(r.rafDragTimeout&&r.currentWindow.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=r.currentWindow.requestAnimationFrame(function(){if(r.state.cropSize&&!(a===void 0||s===void 0)){var o=a-r.dragStartPosition.x,l=s-r.dragStartPosition.y,c={x:r.dragStartCrop.x+o,y:r.dragStartCrop.y+l},u=r.props.restrictPosition?F0(c,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):c;r.props.onCropChange(u)}}))},r.onDragStopped=function(){var n,a;r.isTouching=!1,r.cleanEvents(),r.emitCropData(),(a=(n=r.props).onInteractionEnd)===null||a===void 0||a.call(n)},r.onWheel=function(n){if(r.currentWindow&&!(r.props.onWheelRequest&&!r.props.onWheelRequest(n))){n.preventDefault();var a=t.getMousePoint(n),s=HNe(n).pixelY,o=r.props.zoom-s*r.props.zoomSpeed/200;r.setNewZoom(o,a,{shouldUpdatePosition:!0}),r.state.hasWheelJustStarted||r.setState({hasWheelJustStarted:!0},function(){var l,c;return(c=(l=r.props).onInteractionStart)===null||c===void 0?void 0:c.call(l)}),r.wheelTimer&&clearTimeout(r.wheelTimer),r.wheelTimer=r.currentWindow.setTimeout(function(){return r.setState({hasWheelJustStarted:!1},function(){var l,c;return(c=(l=r.props).onInteractionEnd)===null||c===void 0?void 0:c.call(l)})},250)}},r.getPointOnContainer=function(n,a){var s=n.x,o=n.y;if(!r.containerRect)throw new Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(s-a.x),y:r.containerRect.height/2-(o-a.y)}},r.getPointOnMedia=function(n){var a=n.x,s=n.y,o=r.props,l=o.crop,c=o.zoom;return{x:(a+l.x)/c,y:(s+l.y)/c}},r.setNewZoom=function(n,a,s){var o=s===void 0?{}:s,l=o.shouldUpdatePosition,c=l===void 0?!0:l;if(!(!r.state.cropSize||!r.props.onZoomChange)){var u=t2(n,r.props.minZoom,r.props.maxZoom);if(c){var d=r.getPointOnContainer(a,r.containerPosition),f=r.getPointOnMedia(d),h={x:f.x*u-d.x,y:f.y*u-d.y},p=r.props.restrictPosition?F0(h,r.mediaSize,r.state.cropSize,u,r.props.rotation):h;r.props.onCropChange(p)}r.props.onZoomChange(u)}},r.getCropData=function(){if(!r.state.cropSize)return null;var n=r.props.restrictPosition?F0(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;return KNe(n,r.mediaSize,r.state.cropSize,r.getAspect(),r.props.zoom,r.props.rotation,r.props.restrictPosition)},r.emitCropData=function(){var n=r.getCropData();if(n){var a=n.croppedAreaPercentages,s=n.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(a,s),r.props.onCropAreaChange&&r.props.onCropAreaChange(a,s)}},r.emitCropAreaChange=function(){var n=r.getCropData();if(n){var a=n.croppedAreaPercentages,s=n.croppedAreaPixels;r.props.onCropAreaChange&&r.props.onCropAreaChange(a,s)}},r.recomputeCropPosition=function(){if(r.state.cropSize){var n=r.props.restrictPosition?F0(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;r.props.onCropChange(n),r.emitCropData()}},r.onKeyDown=function(n){var a,s,o=r.props,l=o.crop,c=o.onCropChange,u=o.keyboardStep,d=o.zoom,f=o.rotation,h=u;if(r.state.cropSize){n.shiftKey&&(h*=.2);var p=vr({},l);switch(n.key){case"ArrowUp":p.y-=h,n.preventDefault();break;case"ArrowDown":p.y+=h,n.preventDefault();break;case"ArrowLeft":p.x-=h,n.preventDefault();break;case"ArrowRight":p.x+=h,n.preventDefault();break;default:return}r.props.restrictPosition&&(p=F0(p,r.mediaSize,r.state.cropSize,d,f)),n.repeat||(s=(a=r.props).onInteractionStart)===null||s===void 0||s.call(a),c(p)}},r.onKeyUp=function(n){var a,s;switch(n.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":n.preventDefault();break;default:return}r.emitCropData(),(s=(a=r.props).onInteractionEnd)===null||s===void 0||s.call(a)},r}return t.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=tCe,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},t.prototype.componentWillUnmount=function(){var r,n;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(r=this.resizeObserver)===null||r===void 0||r.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((n=this.styleRef.parentNode)===null||n===void 0||n.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(r){var n,a,s,o,l,c,u,d,f;r.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):r.aspect!==this.props.aspect?this.computeSizes():r.objectFit!==this.props.objectFit?this.computeSizes():r.zoom!==this.props.zoom?this.recomputeCropPosition():((n=r.cropSize)===null||n===void 0?void 0:n.height)!==((a=this.props.cropSize)===null||a===void 0?void 0:a.height)||((s=r.cropSize)===null||s===void 0?void 0:s.width)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.width)?this.computeSizes():(((l=r.crop)===null||l===void 0?void 0:l.x)!==((c=this.props.crop)===null||c===void 0?void 0:c.x)||((u=r.crop)===null||u===void 0?void 0:u.y)!==((d=this.props.crop)===null||d===void 0?void 0:d.y))&&this.emitCropAreaChange(),r.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),r.video!==this.props.video&&((f=this.videoRef.current)===null||f===void 0||f.load());var h=this.getObjectFit();h!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:h},this.computeSizes)},t.prototype.getAspect=function(){var r=this.props,n=r.cropSize,a=r.aspect;return n?n.width/n.height:a},t.prototype.getObjectFit=function(){var r,n,a,s;if(this.props.objectFit==="cover"){var o=this.imageRef.current||this.videoRef.current;if(o&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var l=this.containerRect.width/this.containerRect.height,c=((r=this.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((n=this.videoRef.current)===null||n===void 0?void 0:n.videoWidth)||0,u=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalHeight)||((s=this.videoRef.current)===null||s===void 0?void 0:s.videoHeight)||0,d=c/u;return d<l?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(r){var n=t.getTouchPoint(r.touches[0]),a=t.getTouchPoint(r.touches[1]);this.lastPinchDistance=y5(n,a),this.lastPinchRotation=b5(n,a),this.onDragStart(w5(n,a))},t.prototype.onPinchMove=function(r){var n=this;if(!(!this.currentDoc||!this.currentWindow)){var a=t.getTouchPoint(r.touches[0]),s=t.getTouchPoint(r.touches[1]),o=w5(a,s);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var l=y5(a,s),c=n.props.zoom*(l/n.lastPinchDistance);n.setNewZoom(c,o,{shouldUpdatePosition:!1}),n.lastPinchDistance=l;var u=b5(a,s),d=n.props.rotation+(u-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(d),n.lastPinchRotation=u})}},t.prototype.render=function(){var r=this,n,a=this.props,s=a.image,o=a.video,l=a.mediaProps,c=a.cropperProps,u=a.transform,d=a.crop,f=d.x,h=d.y,p=a.rotation,v=a.zoom,m=a.cropShape,g=a.showGrid,b=a.style,y=b.containerStyle,w=b.cropAreaStyle,_=b.mediaStyle,S=a.classes,E=S.containerClassName,j=S.cropAreaClassName,N=S.mediaClassName,k=(n=this.state.mediaObjectFit)!==null&&n!==void 0?n:this.getObjectFit();return x.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(T){return r.containerRef=T},"data-testid":"container",style:y,className:Bb("reactEasyCrop_Container",E)},s?x.createElement("img",vr({alt:"",className:Bb("reactEasyCrop_Image",k==="contain"&&"reactEasyCrop_Contain",k==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",k==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",N)},l,{src:s,ref:this.imageRef,style:vr(vr({},_),{transform:u||"translate(".concat(f,"px, ").concat(h,"px) rotate(").concat(p,"deg) scale(").concat(v,")")}),onLoad:this.onMediaLoad})):o&&x.createElement("video",vr({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Bb("reactEasyCrop_Video",k==="contain"&&"reactEasyCrop_Contain",k==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",k==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",N)},l,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:vr(vr({},_),{transform:u||"translate(".concat(f,"px, ").concat(h,"px) rotate(").concat(p,"deg) scale(").concat(v,")")}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map(function(C){return x.createElement("source",vr({key:C.src},C))})),this.state.cropSize&&x.createElement("div",vr({ref:this.cropperRef,style:vr(vr({},w),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Bb("reactEasyCrop_CropArea",m==="round"&&"reactEasyCrop_CropAreaRound",g&&"reactEasyCrop_CropAreaGrid",j)},c)))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:nCe,minZoom:rCe,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:aCe},t.getMousePoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},t.getTouchPoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},t}(x.Component);async function iCe(e,t){const r=await oCe(e),n=document.createElement("canvas"),a=n.getContext("2d");if(!a)throw new Error("Canvas context not found");return n.width=t.width,n.height=t.height,a.drawImage(r,t.x,t.y,t.width,t.height,0,0,t.width,t.height),new Promise((s,o)=>{n.toBlob(l=>{l?s(l):o(new Error("Canvas is empty"))},"image/jpeg")})}function oCe(e){return new Promise((t,r)=>{const n=new window.Image;n.addEventListener("load",()=>t(n)),n.addEventListener("error",a=>r(a)),n.setAttribute("crossOrigin","anonymous"),n.src=e})}const lCe="https://gmajzyndavrqvjccojus.supabase.co",cCe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdtYWp6eW5kYXZycXZqY2NvanVzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0OTM1NjEsImV4cCI6MjA2MTA2OTU2MX0.BryyXcZIgCKBfgVky2TouD2Ru1gO9Hrd5QyJ7c7vUdk",to=gj(lCe,cCe);function uCe(e){if(!e)return"";const t=e.trim().split(" ");return t.length===1?t[0][0].toUpperCase():(t[0][0]+t[1][0]).toUpperCase()}const dCe=({specialistId:e,initialUrl:t,onUpload:r,name:n})=>{const[a,s]=x.useState(null),[o,l]=x.useState({x:0,y:0}),[c,u]=x.useState(1),[d,f]=x.useState(null),[h,p]=x.useState(!1),[v,m]=x.useState(t),[g,b]=x.useState(!1),y=G.useRef(null),w=j=>{if(j.target.files&&j.target.files[0]){const N=new FileReader;N.onload=()=>s(N.result),N.readAsDataURL(j.target.files[0]),p(!0)}},_=x.useCallback((j,N)=>{f(N)},[]),S=async()=>{if(!(!a||!d)){b(!0);try{const j=await iCe(a,d),N=`photos/${e}.jpg`,{error:k}=await to.storage.from("masters").upload(N,j,{cacheControl:"3600",upsert:!0,contentType:"image/jpeg"});if(k)throw k;const{data:C}=to.storage.from("masters").getPublicUrl(N),T=C.publicUrl+"?t="+Date.now();m(T),p(!1),r&&r(T)}catch{alert("Ошибка загрузки фото")}finally{b(!1)}}},E=()=>{y.current&&y.current.click()};return i.jsxs("div",{className:"flex flex-col gap-4 items-center",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Фото мастера"}),i.jsx("input",{type:"file",accept:"image/*",onChange:w,className:"hidden",ref:y}),v&&v.trim()?i.jsxs("div",{className:"relative w-32 h-32 mx-auto",children:[i.jsx("img",{src:v,alt:"Фото мастера",className:"w-32 h-32 object-cover rounded-full border shadow-sm"}),i.jsx("button",{type:"button",className:"absolute top-1 right-1 bg-white/80 hover:bg-red-100 rounded-full p-1 shadow z-10",title:"Удалить фото",onClick:async()=>{const j=`photos/${e}.jpg`;await to.storage.from("masters").remove([j]),m(void 0),r&&r("")},children:i.jsx(Oc,{className:"w-5 h-5 text-red-500"})})]}):i.jsx("div",{className:"relative w-32 h-32 mx-auto",children:i.jsx("div",{className:"w-32 h-32 bg-gray-100 rounded-full border flex items-center justify-center",children:n?i.jsx("span",{className:"text-3xl font-bold text-gray-400",children:uCe(n)}):i.jsx(Iw,{className:"h-10 w-10 text-gray-400"})})}),i.jsx(ne,{variant:"outline",className:"mt-4",onClick:E,children:"Выбрать файл"})]}),h&&a&&i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-xl w-[350px] h-[420px] flex flex-col items-center",children:[i.jsx("div",{className:"relative w-[300px] h-[300px]",children:i.jsx(sCe,{image:a,crop:o,zoom:c,aspect:1,cropShape:"round",onCropChange:l,onZoomChange:u,onCropComplete:_})}),i.jsxs("div",{className:"flex gap-2 mt-6",children:[i.jsx(ne,{onClick:S,disabled:g,children:g?"Сохраняю...":"Сохранить"}),i.jsx(ne,{variant:"outline",onClick:()=>p(!1),disabled:g,children:"Отмена"})]})]})})]})},OZ={async createMasterUser({staff:e,email:t,password:r}){var n;try{const{data:a,error:s}=await ue.auth.admin.createUser({email:t,password:r,email_confirm:!0,user_metadata:{role:"specialist"}});if(s)return s.message.includes("already registered")?{success:!1,error:"Email уже занят другим пользователем."}:{success:!1,error:s.message};const o=(n=a==null?void 0:a.user)==null?void 0:n.id;if(!o)return{success:!1,error:"Не удалось получить user_id."};const{data:l,error:c}=await ue.from("profiles").insert({user_id:o,full_name:e.name,phone:e.phone||null,role:"specialist"}).select().single();if(c)return{success:!1,error:c.message};const u=l.id;return await Mn.updateStaff(e.id,{profile_id:u})?{success:!0,user_id:o,profile_id:u}:{success:!1,error:"Не удалось обновить специалиста."}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Неизвестная ошибка"}}}};function _5(e=10){const t="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz23456789";let r="";for(let n=0;n<e;n++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}const fCe=ln.object({password:ln.string().min(6,"Пароль должен содержать минимум 6 символов")}),hCe=({open:e,onClose:t,staff:r,onSuccess:n,credentials:a})=>{const[s,o]=x.useState(!1),[l,c]=x.useState(null),[u,d]=x.useState(!1),[f,h]=x.useState(_5()),p=jf({resolver:Ef(fCe),defaultValues:{password:f},mode:"onChange"});G.useEffect(()=>{e&&(p.reset({password:_5()}),d(!1),c(null))},[e,r]);const v=async g=>{c(null),o(!0);try{const{success:b,error:y}=await OZ.createMasterUser({staff:r&&{...r,id:String(r.id)},email:r==null?void 0:r.email,password:g.password});if(!b)throw new Error(y||"Ошибка создания пользователя");d(!0),n((r==null?void 0:r.email)||"",g.password),Ae({title:"Доступ создан",description:"Передайте мастеру логин и пароль."})}catch(b){c(b instanceof Error?b.message:"Ошибка создания пользователя")}finally{o(!1)}},m=()=>{a&&(navigator.clipboard.writeText(`Email: ${a.email}
Пароль: ${a.password}`),Ae({title:"Скопировано",description:"Данные доступа скопированы в буфер."}))};return i.jsx(qt,{open:e,onOpenChange:t,children:i.jsxs(Wt,{children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Создать доступ мастеру"}),i.jsx(fr,{children:"Введите email и создайте доступ для мастера"})]}),u&&a?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"text-green-700 font-semibold",children:"Доступ успешно создан!"}),i.jsxs("div",{className:"bg-muted rounded p-3",children:[i.jsxs("div",{children:[i.jsx("b",{children:"Email:"})," ",a.email]}),i.jsxs("div",{children:[i.jsx("b",{children:"Пароль:"})," ",a.password]})]}),i.jsx(ne,{onClick:m,variant:"outline",children:"Скопировать"}),i.jsx(or,{children:i.jsx(ne,{onClick:t,children:"Закрыть"})})]}):i.jsx(dc,{...p,children:i.jsxs("form",{onSubmit:p.handleSubmit(v),className:"space-y-4",children:[i.jsx(Or,{name:"password",control:p.control,render:({field:g})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Пароль"}),i.jsx(br,{children:i.jsx($e,{type:"text",placeholder:"Пароль",...g,required:!0})}),i.jsx(kr,{})]})}),i.jsx($e,{type:"email",value:(r==null?void 0:r.email)||"",disabled:!0,placeholder:"Email мастера",required:!0,className:"mt-2"}),!(r!=null&&r.email)&&i.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Сначала укажите email в профиле мастера"}),l&&i.jsx("div",{className:"text-red-600 text-sm",children:l}),l==="A user with this email address has already been registered"&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Этот email уже зарегистрирован. Если мастер забыл пароль — воспользуйтесь функцией ",i.jsx("b",{children:"«Сбросить пароль»"})," в таблице доступов."]}),i.jsxs(or,{children:[i.jsx(ne,{type:"button",variant:"outline",onClick:t,disabled:s,children:"Отмена"}),i.jsx(ne,{type:"submit",disabled:!(r!=null&&r.email)||s||!p.watch("password"),children:"Создать"})]})]})})]})})};function mCe(e=10){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";for(let n=0;n<e;n++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}const pCe=({open:e,onClose:t,staff:r,onSuccess:n})=>{const[a,s]=x.useState(!1),[o,l]=x.useState(""),c=async()=>{if(r){s(!0),l("");try{const u=r.email;if(!u){Ae({title:"Ошибка",description:"У специалиста не указан email",variant:"destructive"}),s(!1);return}const{data:{users:d}}=await ue.auth.admin.listUsers(),f=d.find(p=>p.email===u),h=mCe(10);if(f){const{error:p}=await ue.auth.admin.updateUserById(f.id,{password:h});if(p)throw new Error(p.message);l(h),Ae({title:"Пароль сброшен",description:`Новый пароль: ${h}`}),n&&n(h)}else{const{success:p,error:v}=await OZ.createMasterUser({staff:r,email:u,password:h});if(!p)throw new Error(v||"Ошибка создания пользователя");l(h),Ae({title:"Пользователь создан",description:`Новый пароль: ${h}`}),n&&n(h)}}catch(u){const d=u instanceof Error?u.message:"Ошибка сброса/создания пользователя";Ae({title:"Ошибка",description:d,variant:"destructive"})}finally{s(!1),t()}}};return i.jsx(qt,{open:e,onOpenChange:t,children:i.jsxs(Wt,{children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Сбросить пароль мастеру"}),i.jsx(fr,{children:"Сбросьте пароль для выбранного мастера"})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:t,disabled:a,children:"Отмена"}),i.jsx(ne,{onClick:c,disabled:a||!r,children:a?"Сброс...":"Сбросить пароль"})]})]})})};function S5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gCe(e,t,r){return t=m_(t),function(n,a){if(a&&(typeof a=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(n)}(e,MZ()?Reflect.construct(t,r||[],m_(e).constructor):t.apply(e,r))}function vCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xCe(e,t,r){return Object.defineProperty(e,"prototype",{writable:!1}),e}function RZ(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(c,u){if(c){if(typeof c=="string")return S5(c,u);var d={}.toString.call(c).slice(8,-1);return d==="Object"&&c.constructor&&(d=c.constructor.name),d==="Map"||d==="Set"?Array.from(c):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?S5(c,u):void 0}}(e))||t){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var c=r.next();return o=c.done,c},e:function(c){l=!0,s=c},f:function(){try{o||r.return==null||r.return()}finally{if(l)throw s}}}}function DZ(e,t,r){return(t=function(n){var a=function(s,o){if(typeof s!="object"||!s)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var c=l.call(s,o||"default");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(s)}(n,"string");return typeof a=="symbol"?a:a+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h_(){return h_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h_.apply(null,arguments)}function m_(e){return m_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m_(e)}function yCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YA(e,t)}function MZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MZ=function(){return!!e})()}function j5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ub(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j5(Object(r),!0).forEach(function(n){DZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IZ(e,t){if(e==null)return{};var r,n,a=function(o,l){if(o==null)return{};var c={};for(var u in o)if({}.hasOwnProperty.call(o,u)){if(l.includes(u))continue;c[u]=o[u]}return c}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function YA(e,t){return YA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},YA(e,t)}function Rg(e,t){var r,n=t.replacementChars,a=t.replacement,s=t.separate,o=n,l="",c=RZ(e);try{for(c.s();!(r=c.n()).done;){var u,d=r.value,f=!Object.prototype.hasOwnProperty.call(a,d)&&((u=a[o[0]])===null||u===void 0?void 0:u.test(d));(s&&d===o[0]||f)&&(o=o.slice(1),l+=d)}}catch(h){c.e(h)}finally{c.f()}return l}function $Z(e,t){var r,n=t.mask,a=t.replacement,s=t.separate,o=t.showMask,l=0,c="",u=RZ(n);try{for(u.s();!(r=u.n()).done;){var d=r.value;if(!o&&e[l]===void 0)break;Object.prototype.hasOwnProperty.call(a,d)&&e[l]!==void 0?c+=e[l++]:c+=d}}catch(h){u.e(h)}finally{u.f()}if(s&&!o){for(var f=n.length-1;f>=0&&c[f]===n[f];f--);c=c.slice(0,f+1)}return c}function FZ(e,t){for(var r=t.mask,n=t.replacement,a=[],s=0;s<r.length;s++){var o,l=(o=e[s])!==null&&o!==void 0?o:r[s],c=Object.prototype.hasOwnProperty.call(n,l)?"replacement":e[s]!==void 0&&e[s]!==r[s]?"input":"mask";a.push({type:c,value:l,index:s})}return a}function r0(e){return e.length>0?DZ({},e,/./):{}}function ZA(e,t){for(var r=t.start,n=r===void 0?0:r,a=t.end,s=t.mask,o=t.replacement,l=t.separate,c=e.slice(n,a),u=s.slice(n,a),d="",f=0;f<u.length;f++){var h=Object.prototype.hasOwnProperty.call(o,u[f]);h&&c[f]!==void 0&&c[f]!==u[f]?d+=c[f]:h&&l&&(d+=u[f])}return d}function LZ(e,t){var r=t.mask,n=t.replacement,a=typeof n=="string"?r0(n):n,s=RegExp("[^".concat(Object.keys(a).join(""),"]"),"g");return $Z(Rg(e,{replacementChars:r.replace(s,""),replacement:a,separate:!1}),{mask:r,replacement:a,separate:!1,showMask:!1})}function bCe(e,t){var r=t.mask,n=t.replacement,a=typeof n=="string"?r0(n):n,s=ZA(e,{mask:r,replacement:a,separate:!1}),o=RegExp("[^".concat(Object.keys(a).join(""),"]"),"g");return Rg(s,{replacementChars:r.replace(o,""),replacement:a,separate:!1})}function wCe(e,t){var r=t.mask,n=t.replacement,a=typeof n=="string"?r0(n):n;return FZ(LZ(e,{mask:r,replacement:a}),{mask:r,replacement:a})}var _Ce=["[","]","\\","/","^","$",".","|","?","*","+","(",")","{","}"];function E5(e){return _Ce.includes(e)?"\\".concat(e):e}function SCe(e,t){for(var r=t.mask,n=t.replacement,a=typeof n=="string"?r0(n):n,s=e==="partial"||e==="partial-inexact",o=e==="full"||e==="partial",l="",c=0;c<r.length;c++){var u=r[c];c===0&&(l="^"),s&&(l+="("),l+=Object.prototype.hasOwnProperty.call(a,u)?"".concat(o?"(?!".concat(E5(u),")"):"","(").concat(a[u].source,")"):E5(u),c===r.length-1&&(s&&(l+=")?".repeat(r.length)),l+="$")}return l}function jCe(e,t){return new Proxy(e,{set:function(r,n,a){return n==="current"&&(a!==e.current&&(e.current!==null&&t.unregister(e.current),a!==null&&t.register(a)),r[n]=a,!0)}})}function ECe(e,t,r){return t=Yv(t),function(n,a){if(a&&(typeof a=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(n)}(e,OD()?Reflect.construct(t,r||[],Yv(e).constructor):t.apply(e,r))}function BZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UZ(e,t,r){return Object.defineProperty(e,"prototype",{writable:!1}),e}function NCe(e,t,r){return(t=function(n){var a=function(s,o){if(typeof s!="object"||!s)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var c=l.call(s,o||"default");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(s)}(n,"string");return typeof a=="symbol"?a:a+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yv(e){return Yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yv(e)}function CCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zv(e,t)}function OD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OD=function(){return!!e})()}function N5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function C5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N5(Object(r),!0).forEach(function(n){NCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kCe(e,t){if(e==null)return{};var r,n,a=function(o,l){if(o==null)return{};var c={};for(var u in o)if({}.hasOwnProperty.call(o,u)){if(l.includes(u))continue;c[u]=o[u]}return c}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Zv(e,t){return Zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Zv(e,t)}function JA(e){return JA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JA(e)}function QA(e){var t=typeof Map=="function"?new Map:void 0;return QA=function(r){if(r===null||!function(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}}(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(r))return t.get(r);t.set(r,n)}function n(){return function(a,s,o){if(OD())return Reflect.construct.apply(null,arguments);var l=[null];l.push.apply(l,s);var c=new(a.bind.apply(a,l));return o&&Zv(c,o.prototype),c}(r,arguments,Yv(this).constructor)}return n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Zv(n,r)},QA(e)}var Dg=function(e){function t(r){var n;return BZ(this,t),(n=ECe(this,t,[r])).name="SyntheticChangeError",n}return CCe(t,e),UZ(t)}(QA(Error)),k5,TCe=["options"],ACe=["text","email","tel","search","url"],zZ=UZ(function e(t){var r=t.init,n=t.tracking;BZ(this,e);var a=new WeakMap;this.register=function(s){var o;if(ACe.includes(s.type)){var l=(o=s._wrapperState)!==null&&o!==void 0?o:{},c=l.initialValue,u=c===void 0?"":c,d=l.controlled,f=d!==void 0&&d,h=r({initialValue:s.value||u,controlled:f}),p=h.value,v=h.options,m={value:p,options:v,fallbackOptions:v},g={id:-1,cachedId:-1},b={value:"",selectionStart:0,selectionEnd:0},y=Object.getOwnPropertyDescriptor("_valueTracker"in s?s:HTMLInputElement.prototype,"value");Object.defineProperty(s,"value",C5(C5({},y),{},{set:function(E){var j;b.value=E,y==null||(j=y.set)===null||j===void 0||j.call(s,E)}})),s.value=p;var w=function(){var E=function(){var j,N;b.selectionStart=(j=s.selectionStart)!==null&&j!==void 0?j:0,b.selectionEnd=(N=s.selectionEnd)!==null&&N!==void 0?N:0,g.id=window.setTimeout(E)};g.id=window.setTimeout(E)},_=function(){window.clearTimeout(g.id),g.id=-1,g.cachedId=-1},S=function(E){try{var j,N;if(g.cachedId===g.id)throw new Dg("The input selection has not been updated.");g.cachedId=g.id;var k=s.value,C=s.selectionStart,T=s.selectionEnd;if(C===null||T===null)throw new Dg("The selection attributes have not been initialized.");var A,B=b.value;if(E.inputType===void 0&&(b.selectionStart=0,b.selectionEnd=B.length),C>b.selectionStart?A="insert":C<=b.selectionStart&&C<b.selectionEnd?A="deleteBackward":C===b.selectionEnd&&k.length<B.length&&(A="deleteForward"),A===void 0||(A==="deleteBackward"||A==="deleteForward")&&k.length>B.length)throw new Dg("Input type detection error.");var R="",P=b.selectionStart,D=b.selectionEnd;if(A==="insert")R=k.slice(b.selectionStart,C);else{var U=B.length-k.length;P=C,D=C+U}m.value!==B?m.options=m.fallbackOptions:m.fallbackOptions=m.options;var M=m.options,F=n({inputType:A,previousValue:B,previousOptions:M,value:k,addedValue:R,changeStart:P,changeEnd:D,selectionStart:C,selectionEnd:T}),K=F.options,X=kCe(F,TCe);s.value=X.value,s.setSelectionRange(X.selectionStart,X.selectionEnd),m.value=X.value,m.options=K,b.selectionStart=X.selectionStart,b.selectionEnd=X.selectionEnd,(j=s._valueTracker)===null||j===void 0||(N=j.setValue)===null||N===void 0||N.call(j,B)}catch(O){if(s.value=b.value,s.setSelectionRange(b.selectionStart,b.selectionEnd),E.preventDefault(),E.stopPropagation(),O.name!=="SyntheticChangeError")throw O}};document.activeElement===s&&w(),s.addEventListener("focus",w),s.addEventListener("blur",_),s.addEventListener("input",S),a.set(s,{onFocus:w,onBlur:_,onInput:S})}},this.unregister=function(s){var o=a.get(s);o!==void 0&&(s.removeEventListener("focus",o.onFocus),s.removeEventListener("blur",o.onBlur),s.removeEventListener("input",o.onInput),a.delete(s))}});k5=zZ,Object.defineProperty(k5.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,configurable:!0,value:"Input"});function PCe(e,t){return x.useCallback(function(r){e.current=r,typeof t=="function"?t(r):JA(t)==="object"&&t!==null&&(t.current=r)},[e,t])}var T5,OCe=["track","modify"];function kh(e){var t,r,n,a;return{mask:(t=e.mask)!==null&&t!==void 0?t:"",replacement:typeof e.replacement=="string"?r0(e.replacement):(r=e.replacement)!==null&&r!==void 0?r:{},showMask:(n=e.showMask)!==null&&n!==void 0&&n,separate:(a=e.separate)!==null&&a!==void 0&&a,track:e.track,modify:e.modify}}var WZ=function(e){function t(){var r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return vCe(this,t),(r=gCe(this,t,[{init:function(a){var s=a.initialValue,o=a.controlled,l=kh(n),c=l.mask,u=l.replacement,d=l.separate,f=l.showMask;return s=o||s?s:f?c:"",{value:s,options:{mask:c,replacement:u,separate:d}}},tracking:function(a){var s=a.inputType,o=a.previousValue,l=a.previousOptions,c=a.addedValue,u=a.changeStart,d=a.changeEnd,f=kh(n),h=f.track,p=f.modify,v=IZ(f,OCe),m=v.mask,g=v.replacement,b=v.showMask,y=v.separate,w=Ub(Ub({},s==="insert"?{inputType:s,data:c}:{inputType:s,data:null}),{},{value:o,selectionStart:u,selectionEnd:d}),_=h==null?void 0:h(w);if(_===!1)throw new Dg("Custom tracking stop.");_===null?c="":_!==!0&&_!==void 0&&(c=_);var S=p==null?void 0:p(w);(S==null?void 0:S.mask)!==void 0&&(m=S.mask),(S==null?void 0:S.replacement)!==void 0&&(g=typeof(S==null?void 0:S.replacement)=="string"?r0(S==null?void 0:S.replacement):S.replacement),(S==null?void 0:S.showMask)!==void 0&&(b=S.showMask),(S==null?void 0:S.separate)!==void 0&&(y=S.separate);var E=ZA(o,Ub({end:u},l)),j=ZA(o,Ub({start:d},l)),N=RegExp("[^".concat(Object.keys(g).join(""),"]"),"g"),k=m.replace(N,"");if(E&&(E=Rg(E,{replacementChars:k,replacement:g,separate:y}),k=k.slice(E.length)),c&&(c=Rg(c,{replacementChars:k,replacement:g,separate:!1}),k=k.slice(c.length)),s==="insert"&&c==="")throw new Dg("The character does not match the key value of the `replacement` object.");if(y){var C=m.slice(u,d).replace(N,""),T=C.length-c.length;T<0?j=j.slice(-T):T>0&&(j=C.slice(-T)+j)}j&&(j=Rg(j,{replacementChars:k,replacement:g,separate:y}));var A=$Z(E+c+j,{mask:m,replacement:g,separate:y,showMask:b}),B=function(R){var P,D,U,M=R.inputType,F=R.value,K=R.addedValue,X=R.beforeChangeValue,O=R.mask,W=R.replacement,L=R.separate,H=FZ(F,{mask:O,replacement:W}).filter(function(Q){var ve=Q.type;return ve==="input"||L&&ve==="replacement"}),ee=(P=H[X.length+K.length-1])===null||P===void 0?void 0:P.index,q=(D=H[X.length-1])===null||D===void 0?void 0:D.index,Z=(U=H[X.length+K.length])===null||U===void 0?void 0:U.index;if(M==="insert"){if(ee!==void 0)return ee+1;if(Z!==void 0)return Z;if(q!==void 0)return q+1}if(M==="deleteForward"){if(Z!==void 0)return Z;if(q!==void 0)return q+1}if(M==="deleteBackward"){if(q!==void 0)return q+1;if(Z!==void 0)return Z}var I=F.split("").findIndex(function(Q){return Object.prototype.hasOwnProperty.call(W,Q)});return I!==-1?I:F.length}({inputType:s,value:A,addedValue:c,beforeChangeValue:E,mask:m,replacement:g,separate:y});return{value:A,selectionStart:B,selectionEnd:B,options:{mask:m,replacement:g,separate:y}}}}])).format=function(a){return LZ(a,kh(n))},r.formatToParts=function(a){return wCe(a,kh(n))},r.unformat=function(a){return bCe(a,kh(n))},r.generatePattern=function(a){return SCe(a,kh(n))},r}return yCe(t,zZ),xCe(t)}();T5=WZ,Object.defineProperty(T5.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,configurable:!0,value:"Mask"});function RCe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mask,r=e.replacement,n=e.showMask,a=e.separate,s=e.track,o=e.modify,l=x.useRef(null),c=x.useRef({mask:t,replacement:r,showMask:n,separate:a,track:s,modify:o});return c.current.mask=t,c.current.replacement=r,c.current.showMask=n,c.current.separate=a,c.current.track=s,c.current.modify=o,x.useMemo(function(){return jCe(l,new WZ(c.current))},[])}var DCe=["component","mask","replacement","showMask","separate","track","modify"];function MCe(e,t){var r=e.component,n=e.mask,a=e.replacement,s=e.showMask,o=e.separate,l=e.track,c=e.modify,u=IZ(e,DCe),d=RCe({mask:n,replacement:a,showMask:s,separate:o,track:l,modify:c}),f=PCe(d,t);return r?G.createElement(r,h_({ref:f},u)):G.createElement("input",h_({ref:f},u))}var ICe=x.forwardRef(MCe);const Fr={async testStats(){const{data:e,error:t}=await ue.rpc("test_stats");if(t)throw console.error("Ошибка при вызове test_stats:",t),t;return e},async testStatsV2(e="month"){try{console.log("Вызываем stats_test_v2 с периодом:",e);const{data:t,error:r}=await ue.rpc("stats_test_v2",{period_type:e});if(r)throw console.error("Ошибка при вызове stats_test_v2:",r),r;return console.log("Результат stats_test_v2:",t),t}catch(t){return console.error("Ошибка в testStatsV2:",t),[]}},async getRevenueByMonth(e="month"){try{console.log("Вызываем rpc_revenue_by_month с периодом:",e);const{data:t,error:r}=await ue.rpc("rpc_revenue_by_month",{period_type:e});if(r)throw console.error("Ошибка при вызове rpc_revenue_by_month:",r),r;return console.log("Результат rpc_revenue_by_month:",t),t}catch(t){return console.error("Ошибка в getRevenueByMonth:",t),[]}},async getAppointmentsByMonth(e="month"){try{console.log("Вызываем rpc_appointments_by_month с периодом:",e);const{data:t,error:r}=await ue.rpc("rpc_appointments_by_month",{period_type:e});if(r)throw console.error("Ошибка при вызове rpc_appointments_by_month:",r),r;return console.log("Результат rpc_appointments_by_month:",t),t}catch(t){return console.error("Ошибка в getAppointmentsByMonth:",t),[]}},async getNewClientsByMonth(e="month"){try{console.log("Вызываем rpc_new_clients_by_month с периодом:",e);const{data:t,error:r}=await ue.rpc("rpc_new_clients_by_month",{period_type:e});if(r)throw console.error("Ошибка при вызове rpc_new_clients_by_month:",r),r;return console.log("Результат rpc_new_clients_by_month:",t),t}catch(t){return console.error("Ошибка в getNewClientsByMonth:",t),[]}},async getMasterStats(e="month"){try{const{data:t,error:r}=await ue.rpc("rpc_master_stats",{period_type:e});if(r)throw r;return t}catch(t){return console.error("Ошибка в getMasterStats:",t),[]}},async getServiceStats(e="month"){try{const{data:t,error:r}=await ue.rpc("rpc_service_stats",{period_type:e});if(r)throw r;return t}catch(t){return console.error("Ошибка в getServiceStats:",t),[]}},async getClientStats(e="month"){try{console.log("Вызываем rpc_client_stats с периодом:",e);const{data:t,error:r}=await ue.rpc("rpc_client_stats",{period_type:e});if(r)throw console.error("Ошибка при вызове rpc_client_stats:",r),r;return console.log("Результат rpc_client_stats (сырые данные от supabase.rpc):",t),t&&typeof t=="object"&&t!==null?{activeClients:t.activeClients||0,newClients:t.newClients||0,avgCheck:t.avgCheck||0,returningClients:t.returningClients||0,activityByMonth:Array.isArray(t.activityByMonth)?t.activityByMonth:[]}:(console.warn("getClientStats: данные от rpc_client_stats не являются объектом или пусты. Период:",e,"Данные:",t),{activeClients:0,newClients:0,avgCheck:0,returningClients:0,activityByMonth:[]})}catch(t){return console.error("Ошибка в getClientStats:",t),{activeClients:0,newClients:0,avgCheck:0,returningClients:0,activityByMonth:[]}}},async getRepeatVisitsCount(e="month"){try{const{data:t,error:r}=await ue.rpc("rpc_repeat_visits_count",{period_type:e});if(r)throw r;return t}catch(t){return console.error("Ошибка в getRepeatVisitsCount:",t),0}},async getCancelledAppointmentsCount(e="month"){try{const{data:t,error:r}=await ue.rpc("rpc_cancelled_appointments_count",{period_type:e});if(r)throw r;return t}catch(t){return console.error("Ошибка в getCancelledAppointmentsCount:",t),0}},async getAverageOccupancy(e="month"){try{const{data:t,error:r}=await ue.rpc("rpc_average_occupancy",{period_type:e});if(r)throw r;return!t||!Array.isArray(t)||!t[0]?{value:0,dynamicsPercent:0}:t[0]}catch(t){return console.error("Ошибка в getAverageOccupancy:",t),{value:0,dynamicsPercent:0}}},async getSoldSubscriptionsCount(e="month"){try{const{data:t,error:r}=await ue.rpc("rpc_sold_subscriptions_count",{period_type:e});if(r)throw r;return t}catch(t){return console.error("Ошибка в getSoldSubscriptionsCount:",t),0}},async getActiveSubscriptionsCount(){try{const{data:e,error:t}=await ue.rpc("rpc_active_subscriptions_count");if(t)throw t;return e}catch(e){return console.error("Ошибка в getActiveSubscriptionsCount:",e),0}},async getSubscriptionsRevenue(e="month"){try{const{data:t,error:r}=await ue.rpc("rpc_subscriptions_revenue",{period_type:e});if(r)throw r;return Number(t)||0}catch(t){return console.error("Ошибка в getSubscriptionsRevenue:",t),0}},async getExpiredSubscriptionsCount(){try{const{data:e,error:t}=await ue.rpc("rpc_expired_subscriptions_count");if(t)throw t;return e}catch(e){return console.error("Ошибка в getExpiredSubscriptionsCount:",e),0}},async getSubscriptionVisitsCount(e="month"){try{const{data:t,error:r}=await ue.rpc("rpc_subscription_visits_count",{period_type:e});if(r)throw r;return t}catch(t){return console.error("Ошибка в getSubscriptionVisitsCount:",t),0}},async getUsedUpSubscriptionsCount(){try{const{data:e,error:t}=await ue.rpc("rpc_used_up_subscriptions_count");if(t)throw t;return e}catch(e){return console.error("Ошибка в getUsedUpSubscriptionsCount:",e),0}},async getSubscriptionsSalesDynamics(e="month"){try{const{data:t,error:r}=await ue.rpc("rpc_subscriptions_sales_dynamics",{period_type:e});if(r)throw r;return t}catch(t){return console.error("Ошибка в getSubscriptionsSalesDynamics:",t),[]}},async getTop3Subscriptions(e="month"){try{const{data:t,error:r}=await ue.rpc("rpc_top3_subscriptions",{period_type:e});if(r)throw r;return t}catch(t){return console.error("Ошибка в getTop3Subscriptions:",t),[]}},async getTop3ClientsBySubscriptions(e="month"){try{const{data:t,error:r}=await ue.rpc("rpc_top3_clients_by_subscriptions",{period_type:e});if(r)throw r;return t}catch(t){return console.error("Ошибка в getTop3ClientsBySubscriptions:",t),[]}},async getAccruedBonusesCount(e="month"){try{const{data:t,error:r}=await ue.rpc("rpc_accrued_bonuses_count",{period_type:e});if(r)throw r;return t}catch(t){return console.error("Ошибка в getAccruedBonusesCount:",t),0}},async getSpentBonusesCount(e="month"){try{const{data:t,error:r}=await ue.rpc("rpc_spent_bonuses_count",{period_type:e});if(r)throw r;return t}catch(t){return console.error("Ошибка в getSpentBonusesCount:",t),0}},async getClientsWithBonusesCount(){try{const{data:e,error:t}=await ue.rpc("rpc_clients_with_bonuses_count");if(t)throw t;return e}catch(e){return console.error("Ошибка в getClientsWithBonusesCount:",e),0}},async getAverageBonusBalance(){try{const{data:e,error:t}=await ue.rpc("rpc_average_bonus_balance");if(t)throw t;return e}catch(e){return console.error("Ошибка в getAverageBonusBalance:",e),0}},async getMaxBonusBalance(){try{const{data:e,error:t}=await ue.rpc("rpc_max_bonus_balance");if(t)throw t;return e}catch(e){return console.error("Ошибка в getMaxBonusBalance:",e),0}},async getBonusDynamics(e="month"){try{const{data:t,error:r}=await ue.rpc("rpc_bonus_dynamics",{period_type:e});if(r)throw r;return t}catch(t){return console.error("Ошибка в getBonusDynamics:",t),[]}},async getTop3ClientsByBonuses(){try{const{data:e,error:t}=await ue.rpc("rpc_top3_clients_by_bonuses");if(t)throw t;return e}catch(e){return console.error("Ошибка в getTop3ClientsByBonuses:",e),[]}},async getIndividualDiscountsCount(e){const{data:t}=await ue.rpc("rpc_individual_discounts_count",{period_type:e});return t??0},async getGlobalDiscountsStats(e){const{data:t}=await ue.rpc("rpc_global_discounts_stats",{period_type:e});return(t==null?void 0:t[0])??{count:0,total_amount:0}},async getDiscountsDynamics(e){const{data:t}=await ue.rpc("rpc_discounts_dynamics",{period_type:e});return t??[]},async getTop3GlobalDiscounts(e){const{data:t}=await ue.rpc("rpc_top3_global_discounts",{period_type:e});return t??[]}},eP=uo((e,t)=>({revenueByMonth:[],appointmentsByMonth:[],newClientsByMonth:[],masterStats:[],serviceStats:[],clientStats:{activeClients:0,newClients:0,avgCheck:0,returningClients:0,activityByMonth:[]},repeatVisitsCount:0,cancelledAppointmentsCount:0,averageOccupancy:{value:0,dynamicsPercent:0},soldSubscriptionsCount:0,activeSubscriptionsCount:0,subscriptionsRevenue:0,expiredSubscriptionsCount:0,subscriptionVisitsCount:0,usedUpSubscriptionsCount:0,subscriptionsSalesDynamics:[],top3Subscriptions:[],top3ClientsBySubscriptions:[],accruedBonusesCount:0,spentBonusesCount:0,clientsWithBonusesCount:0,averageBonusBalance:0,maxBonusBalance:0,bonusDynamics:[],top3ClientsByBonuses:[],individualDiscountsCount:0,globalDiscountsCount:0,globalDiscountsTotalAmount:0,discountsDynamics:[],top3GlobalDiscounts:[],loading:!1,error:null,currentPeriod:"month",setPeriod:r=>{e({currentPeriod:r})},fetchAllStats:async r=>{e({loading:!0,error:null});const n=r||t().currentPeriod;console.log(`[statisticsStore] Вызов fetchAllStats для периода: ${n}`);try{const[a,s,o,l,c,u,d,f,h,p,v,m,g,b,y,w,_,S,E,j,N,k,C,T,A,B,R,P,D]=await Promise.all([Fr.getRevenueByMonth(n),Fr.getAppointmentsByMonth(n),Fr.getNewClientsByMonth(n),Fr.getMasterStats(n),Fr.getServiceStats(n),Fr.getClientStats(n),Fr.getRepeatVisitsCount(n),Fr.getCancelledAppointmentsCount(n),Fr.getAverageOccupancy(n),Fr.getSoldSubscriptionsCount(n),Fr.getActiveSubscriptionsCount(),Fr.getSubscriptionsRevenue(n),Fr.getExpiredSubscriptionsCount(),Fr.getSubscriptionVisitsCount(n),Fr.getUsedUpSubscriptionsCount(),Fr.getSubscriptionsSalesDynamics(n),Fr.getTop3Subscriptions(n),Fr.getTop3ClientsBySubscriptions(n),Fr.getIndividualDiscountsCount(n),Fr.getGlobalDiscountsStats(n),Fr.getDiscountsDynamics(n),Fr.getTop3GlobalDiscounts(n),Fr.getAccruedBonusesCount(n),Fr.getSpentBonusesCount(n),Fr.getClientsWithBonusesCount(),Fr.getAverageBonusBalance(),Fr.getMaxBonusBalance(),Fr.getBonusDynamics(n),Fr.getTop3ClientsByBonuses()]);e({revenueByMonth:a,appointmentsByMonth:s,newClientsByMonth:o,masterStats:l,serviceStats:c,clientStats:u,repeatVisitsCount:d,cancelledAppointmentsCount:f,averageOccupancy:h,soldSubscriptionsCount:p,activeSubscriptionsCount:v,subscriptionsRevenue:m,expiredSubscriptionsCount:g,subscriptionVisitsCount:b,usedUpSubscriptionsCount:y,subscriptionsSalesDynamics:w,top3Subscriptions:_,top3ClientsBySubscriptions:S,individualDiscountsCount:E,globalDiscountsCount:j&&j.count?j.count:0,globalDiscountsTotalAmount:j&&j.total_amount?Number(j.total_amount):0,discountsDynamics:N,top3GlobalDiscounts:k,accruedBonusesCount:C,spentBonusesCount:T,clientsWithBonusesCount:A,averageBonusBalance:B,maxBonusBalance:R,bonusDynamics:P,top3ClientsByBonuses:D,loading:!1,currentPeriod:n}),console.log(`[statisticsStore] ВСЕ STATS в сторе обновлены после fetchAllStats для ${n}:`,t())}catch(a){const s=a instanceof Error?a.message:"Ошибка загрузки статистики";console.error(`[statisticsStore] Ошибка в fetchAllStats для ${n}:`,a),e({error:s,loading:!1})}},fetchMasterStats:async r=>{e({loading:!0,error:null});const n=r||t().currentPeriod;try{const a=await Fr.getMasterStats(n);e({masterStats:a,loading:!1})}catch(a){const s=a instanceof Error?a.message:"Ошибка загрузки статистики по мастерам";e({error:s,loading:!1})}},fetchServiceStats:async r=>{e({loading:!0,error:null});const n=r||t().currentPeriod;try{const a=await Fr.getServiceStats(n);e({serviceStats:a,loading:!1})}catch(a){const s=a instanceof Error?a.message:"Ошибка загрузки статистики по услугам";e({error:s,loading:!1})}},fetchClientStats:async r=>{e({loading:!0,error:null});const n=r||t().currentPeriod;console.log(`[statisticsStore] Вызов fetchClientStats для периода: ${n}`);try{const a=await Fr.getClientStats(n);console.log(`[statisticsStore] Получены clientStatsData для ${n}:`,a),e({clientStats:a,loading:!1}),console.log(`[statisticsStore] clientStats в сторе обновлены для ${n}:`,t().clientStats)}catch(a){const s=a instanceof Error?a.message:"Ошибка загрузки статистики по клиентам";console.error(`[statisticsStore] Ошибка в fetchClientStats для ${n}:`,a),e({error:s,loading:!1})}}}));function $Ce(e){return{monday:"Пн",tuesday:"Вт",wednesday:"Ср",thursday:"Чт",friday:"Пт",saturday:"Сб",sunday:"Вс"}[e.toLowerCase()]||e}function FCe(e,t){if(!e||e.length===0)return"Не указано";const r=e.map($Ce),n=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],a=[...r].sort((c,u)=>n.indexOf(c)-n.indexOf(u)),s=a.map(c=>n.indexOf(c));let o="";if(s.length>0){let c=!0;for(let u=0;u<s.length-1;u++)if(s[u+1]-s[u]!==1){c=!1;break}c&&s.length>1?o=`${a[0]}–${a[a.length-1]}`:a.length<=4?o=a.join(", "):o=`${a.slice(0,3).join(", ")}, +${a.length-3} дн.`}else o="Ошибка графика";const l=t?`${t.start}-${t.end}`:"";return`${o} ${l}`.trim()}function LCe(e){return{...e,name:e.full_name||e.name||"Н/Д"}}const tP=({specialists:e,onEdit:t,onDelete:r,ratings:n={},reviews:a={},servicesByStaffId:s={},onAddMasterTab:o})=>{var f;const l=Kn(),[c,u]=G.useState({open:!1,staffId:null}),d=eP(h=>h.masterStats);return!e||e.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[i.jsx("div",{className:"text-6xl text-gray-300 mb-4",children:i.jsx(lH,{strokeWidth:1.5})}),i.jsx("h3",{className:"text-xl font-medium text-gray-700 mb-2",children:"Мастера не найдены"}),i.jsx("p",{className:"text-gray-500 mb-6 text-center max-w-md",children:"Для начала работы с записями и управления расписанием, добавьте хотя бы одного мастера"}),i.jsxs(ne,{onClick:()=>l({pathname:"/admin",search:Nw({tab:"add"}).toString()}),className:"bg-beauty-600 hover:bg-beauty-700 text-white",children:[i.jsx(ls,{className:"h-4 w-4 mr-2"}),"Добавить первого мастера"]})]}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.map(h=>{const p=LCe(h),v=String(p.id),m=n[v]||{avg:0,count:0},g=d.find(_=>String(_.specialist_id)===v),b=(g==null?void 0:g.appointments)??0,y=(g==null?void 0:g.revenue)??0,w=s[v]||[];return i.jsxs(qe,{className:"overflow-hidden",children:[i.jsx("div",{className:"w-full h-56 overflow-hidden rounded-t-2xl",children:i.jsx("img",{src:p.avatar_url&&p.avatar_url.trim()?p.avatar_url:"/user.png",alt:p.name||"Специалист",className:"w-full h-full object-cover object-top"})}),i.jsx(Ge,{className:"p-0",children:i.jsx("div",{className:"flex flex-col",children:i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-1",children:p.name||"Н/Д"}),i.jsx("p",{className:"text-beauty-600 mb-3",children:p.specialization||"Специалист"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-sm flex justify-between items-center",children:[i.jsx("span",{children:"Рейтинг:"}),i.jsxs("span",{className:"flex items-center gap-1 font-medium",children:[i.jsx(Nv,{className:"h-4 w-4 text-yellow-400"}),m.avg.toFixed(1),i.jsxs("span",{className:"text-xs text-beauty-500 ml-1",children:["(",m.count," отзывов)"]}),i.jsx(ne,{variant:"ghost",size:"sm",className:"ml-2 px-2 py-0 text-xs text-beauty-600 underline",onClick:()=>u({open:!0,staffId:v}),children:"Отзывы"})]})]}),i.jsxs("div",{className:"text-sm flex justify-between",children:[i.jsx("span",{children:"Записей:"}),i.jsx("span",{className:"font-medium",children:b})]}),i.jsxs("div",{className:"text-sm flex justify-between",children:[i.jsx("span",{children:"Доход:"}),i.jsxs("span",{className:"font-medium",children:[y.toLocaleString()," ₽"]})]}),i.jsxs("div",{className:"text-sm flex justify-between",children:[i.jsx("span",{children:"График:"}),i.jsx("span",{className:"font-medium text-xs text-right",children:FCe(p.work_days,p.work_hours)})]}),w.length>0&&i.jsxs("div",{className:"text-sm mt-2",children:[i.jsx("span",{className:"font-medium text-beauty-600",children:"Услуги:"}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:w.map(_=>i.jsx("span",{className:"bg-pink-50 text-pink-600 px-3 py-1 rounded-full text-sm",children:_.name},_.id))})]})]})]})})})]},p.id)}),i.jsx(qt,{open:c.open,onOpenChange:h=>u(p=>({...p,open:h})),children:i.jsxs(Wt,{className:"max-w-lg",children:[i.jsx(Gt,{children:i.jsx(Vt,{children:"Отзывы о мастере"})}),i.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:c.staffId&&((f=a[c.staffId])!=null&&f.length)?a[c.staffId].map(h=>i.jsxs("div",{className:"border-b pb-2",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[[1,2,3,4,5].map(p=>i.jsx(Nv,{className:`h-4 w-4 ${h.rating>=p?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},p)),i.jsx("span",{className:"text-xs text-beauty-500 ml-2",children:h.client_name||"Клиент"}),i.jsx("span",{className:"text-xs text-beauty-400 ml-2",children:new Date(h.created_at).toLocaleDateString()})]}),i.jsx("div",{className:"text-sm text-beauty-700",children:h.comment})]},h.id)):i.jsx("div",{className:"text-sm text-beauty-500",children:"Пока нет отзывов"})})]})})]})};function BCe(e){if(!e||typeof e!="string")return"";const t=e.trim().split(" ").filter(r=>r.length>0);return t.length===0?"":t.length===1?t[0][0].toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()}const rP={monday:"Пн",tuesday:"Вт",wednesday:"Ср",thursday:"Чт",friday:"Пт",saturday:"Сб",sunday:"Вс"},VZ=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function zb(e){if(!e||Object.values(e).every(a=>a===null))return"График не задан";const t=VZ.filter(a=>e[a]!==null);if(t.length===0)return"График не задан";const r={};return t.forEach(a=>{const s=e[a];if(s){const o=`${s.start}-${s.end}`;r[o]||(r[o]=[]),r[o].push(rP[a]||a)}}),Object.entries(r).map(([a,s])=>{const o=[...s].sort((d,f)=>{const h=Object.values(rP);return h.indexOf(d)-h.indexOf(f)}),l=UCe(o),[c,u]=a.split("-");return`${l}: ${c}-${u}`}).join("; ")}function UCe(e){if(e.length<=1)return e.join(", ");const t=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],r=[];let n=null,a=null;const s=[...e].sort((o,l)=>t.indexOf(o)-t.indexOf(l));for(let o=0;o<s.length;o++){const l=s[o],c=t.indexOf(l);if(c===-1){r.push(l);continue}if(n===null)n=l,a=l;else{const u=t.indexOf(a);c===u+1||(n===a?r.push(n):r.push(`${n}-${a}`),n=l),a=l}}return n!==null&&(n===a?r.push(n):r.push(`${n}-${a}`)),r.join(", ")}const zCe=({initialTab:e="list"})=>{Kn();const t=x.useRef(!1),{currentStudio:r}=Ba(),{toast:n}=co(),{services:a,categories:s,fetchServices:o,fetchCategories:l,isLoading:c}=Oi(),[u,d]=x.useState([]),[f,h]=x.useState(!0),[p,v]=x.useState({}),[m,g]=x.useState(!1),[b,y]=x.useState(!1),[w,_]=x.useState(!1),[S,E]=x.useState(!1),[j,N]=x.useState(""),[k,C]=x.useState(null),[T,A]=x.useState(!1),[B,R]=x.useState(null),P=a.filter(le=>(k?String(le.category_id)===k:!0)&&(j?le.name.toLowerCase().includes(j.toLowerCase()):!0)),[D,U]=x.useState(null),[M,F]=x.useState("");x.useState(!1),x.useState(null);const[K,X]=x.useState({name:"",specialization:"",avatar_url:"",work_schedule:{monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null},serviceIds:[],bio:"",experience_years:0,phone:"",email:""}),[O,W]=x.useState(!1),[L,H]=x.useState(null),[ee,q]=x.useState(e);x.useEffect(()=>{q(e)},[e]);const Z=x.useCallback(()=>{X({name:"",specialization:"",avatar_url:"",work_schedule:{monday:{start:"09:00",end:"18:00"},tuesday:{start:"09:00",end:"18:00"},wednesday:{start:"09:00",end:"18:00"},thursday:{start:"09:00",end:"18:00"},friday:{start:"09:00",end:"18:00"},saturday:null,sunday:null},serviceIds:[],bio:"",experience_years:0,phone:"",email:""}),W(!1),H(null),q("list")},[]),I=x.useCallback(async()=>{h(!0);try{let le;if(console.log("[StaffManagement] Текущая студия:",r),r!=null&&r.id){console.log("[StaffManagement] Загружаем специалистов для студии:",r.id);try{le=await BG.getSpecialistsByStudioId(r.id),console.log("[StaffManagement] Получены специалисты по студии:",le),(!le||!Array.isArray(le)||le.length===0)&&(console.log("[StaffManagement] Нет специалистов для студии, загружаем всех"),le=await Mn.getAllStaff())}catch(Ie){console.error("[StaffManagement] Ошибка при загрузке специалистов по студии:",Ie),console.log("[StaffManagement] Fallback: загружаем всех специалистов"),le=await Mn.getAllStaff()}}else console.log("[StaffManagement] Загружаем всех специалистов"),le=await Mn.getAllStaff(),console.log("[StaffManagement] Получены все специалисты:",le);(!le||!Array.isArray(le))&&(console.error("[StaffManagement] Некорректные данные специалистов:",le),le=[]),console.log("[StaffManagement] Загружены специалисты (API):",le),le&&le.length>0&&console.log("[StaffManagement DEBUG] Данные ПЕРВОГО специалиста из API:",JSON.stringify(le[0],null,2));const _e=le.map(Ie=>{const it=Ie.work_schedule||{monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null},tt=zb(it);return{...Ie,id:Ie.id,name:Ie.name||Ie.full_name||"Неизвестный мастер",specialization:Ie.specialization||"Специализация не указана",rating:Ie.rating||0,appointments:Ie.appointments_count||0,revenue:Ie.total_revenue||0,availability:tt,image:Ie.photo_url||Ie.avatar_url||"/placeholder.svg",work_schedule:it,serviceIds:[],studio_id:Ie.studio_id}});d(_e),(async()=>{const Ie={...p};for(const it of _e)try{const tt=String(it.id),{data:Ze,error:ct}=await es.getServicesBySpecialistId(tt);if(ct){console.error(`[StaffManagement] Ошибка при загрузке услуг для специалиста ${tt}:`,ct);continue}if(Ze&&Array.isArray(Ze)){const St=Ze.map(ie=>String(ie.id));Ie[tt]=St,d(ie=>ie.map(be=>be.id===it.id?{...be,serviceIds:St}:be))}}catch(tt){console.error("[StaffManagement] Ошибка при обработке услуг специалиста:",tt)}v(Ie)})()}catch(le){console.error("[StaffManagement] Ошибка при загрузке специалистов:",le),n({title:"Ошибка",description:"Не удалось загрузить список специалистов",variant:"destructive"})}finally{h(!1)}},[n,r==null?void 0:r.id]);x.useEffect(()=>{I()},[I]),x.useEffect(()=>{o(),l()},[o,l]),x.useEffect(()=>{if(u.length>0&&a.length>0&&!f&&!c&&!t.current){const le=u.map(Ie=>Ie.id.toString()),_e=Object.keys(p);le.some(Ie=>!_e.includes(Ie))&&(console.log("Загружаем услуги для специалистов, у которых они еще не загружены"),t.current=!0,Q())}},[u.length,a.length,f,c,p]);const Q=async()=>{try{g(!0);const le={...p};for(const _e of u){const Be=String(_e.id);try{const{data:Ie,error:it}=await es.getServicesBySpecialistId(Be);if(it){console.error(`Ошибка при загрузке услуг для специалиста ${Be}:`,it);continue}if(Ie&&Array.isArray(Ie)){const tt=Ie.map(Ze=>String(Ze.id));le[Be]=tt,d(Ze=>Ze.map(ct=>ct.id===_e.id?{...ct,serviceIds:tt}:ct))}}catch(Ie){console.error(`Ошибка при загрузке услуг для специалиста ${Be}:`,Ie)}}v(le)}catch(le){console.error("Общая ошибка при загрузке услуг специалистов:",le),n({title:"Ошибка",description:"Не удалось загрузить услуги специалистов",variant:"destructive"})}finally{g(!1),t.current=!1}},ve=le=>{const{id:_e,value:Be}=le.target;X(Ie=>({...Ie,[_e]:Be}))},z=(le,_e)=>{X(Be=>{var Ie,it;return{...Be,work_schedule:{...Be.work_schedule,[le]:_e?{start:((Ie=Be.work_schedule[le])==null?void 0:Ie.start)||"09:00",end:((it=Be.work_schedule[le])==null?void 0:it.end)||"18:00"}:null}}})},we=(le,_e,Be)=>{X(Ie=>{const it=Ie.work_schedule[le];return it?{...Ie,work_schedule:{...Ie.work_schedule,[le]:{...it,[_e]:Be}}}:Ie})},Re=le=>{X(_e=>_e.serviceIds.includes(le)?{..._e,serviceIds:_e.serviceIds.filter(Be=>Be!==le)}:{..._e,serviceIds:[..._e.serviceIds,le]})},Pe=async()=>{_(!0);try{if(K.email||K.phone){const Ie=(await Mn.getAllStaff()).find(it=>it.id!==L&&(K.email&&it.email===K.email||K.phone&&it.phone===K.phone));if(Ie){let it="Мастер с таким ";Ie.email===K.email&&Ie.phone===K.phone?it+="email и телефоном":Ie.email===K.email?it+="email":it+="телефоном",it+=" уже существует.",n({title:"Ошибка сохранения",description:it,variant:"destructive"}),_(!1);return}}const le={full_name:K.name,specialization:K.specialization,avatar_url:M||K.avatar_url,work_schedule:K.work_schedule,bio:K.bio,experience_years:Number(K.experience_years),phone:K.phone||void 0,email:K.email||void 0,is_active:!0};let _e=null;if(O&&L){if(console.log("[StaffManagement] Обновление специалиста ID:",L,"Данные:",le),_e=await Mn.updateStaff(L,le),!_e)throw new Error("Не удалось обновить данные мастера");const Be={...u.find(Ie=>Ie.id===L),..._e,name:_e.name||_e.full_name||K.name,image:_e.avatar_url||_e.photo_url||K.avatar_url||"/placeholder.svg",availability:zb(_e.work_schedule||K.work_schedule),serviceIds:K.serviceIds};d(Ie=>Ie.map(it=>it.id===L?Be:it)),n({title:"Мастер обновлен",description:"Данные мастера успешно обновлены."}),await De(L,K.serviceIds)}else{if(console.log("[StaffManagement] Создание нового специалиста. Данные:",le),_e=await Mn.createStaff(le),!_e||!_e.id)throw new Error("Не удалось создать нового мастера или ID не был получен.");const Be={..._e,id:_e.id,name:_e.name||_e.full_name||K.name,image:_e.avatar_url||_e.photo_url||K.avatar_url||"/placeholder.svg",availability:zb(_e.work_schedule||K.work_schedule),appointments:0,revenue:0,rating:0,serviceIds:K.serviceIds};d(Ie=>[...Ie,Be]),n({title:"Мастер добавлен",description:"Новый мастер успешно добавлен."}),await De(_e.id.toString(),K.serviceIds)}Z(),q("list")}catch(le){console.error("Ошибка при сохранении данных мастера:",le),n({title:"Ошибка",description:"Не удалось сохранить данные мастера",variant:"destructive"})}finally{_(!1)}},De=async(le,_e)=>{if(console.log(`[StaffManagement] Обновление услуг специалиста ${le}:`,_e),!le){console.error("[StaffManagement] Не указан ID специалиста для обновления услуг");return}Array.isArray(_e)||(console.error("[StaffManagement] Некорректный формат списка услуг для обновления",_e),_e=[]);try{y(!0),await new Promise(ct=>setTimeout(ct,300));const{data:Be,error:Ie}=await es.getServicesBySpecialistId(le);if(Ie)throw console.error("[StaffManagement] Ошибка при получении услуг специалиста:",Ie),new Error(Ie.message);let it=[];Be&&Array.isArray(Be)&&(it=Be.filter(ct=>ct&&typeof ct=="object"&&"services"in ct).map(ct=>{const St=ct.services;return St&&typeof St=="object"&&"id"in St?String(St.id):null}).filter(ct=>ct!==null)),console.log("[StaffManagement] Текущие услуги:",it),console.log("[StaffManagement] Новые услуги:",_e);const tt=it.filter(ct=>!_e.includes(ct)),Ze=_e.filter(ct=>!it.includes(ct));if(console.log("[StaffManagement] Услуги для удаления:",tt),console.log("[StaffManagement] Услуги для добавления:",Ze),tt.length>0){console.log(`[StaffManagement] Удаление ${tt.length} услуг`);for(const ct of tt){console.log(`[StaffManagement] Удаление услуги ${ct}`);const{error:St}=await es.removeServiceFromSpecialist(le,ct);St?console.error(`[StaffManagement] Ошибка при удалении услуги ${ct}:`,St):console.log(`[StaffManagement] Успешно удалена услуга ${ct}`),await new Promise(ie=>setTimeout(ie,300))}}if(Ze.length>0){console.log(`[StaffManagement] Добавление ${Ze.length} услуг`);for(const ct of Ze){console.log(`[StaffManagement] Добавление услуги ${ct}`);const{error:St}=await es.addServiceToSpecialist(le,ct);St?console.error(`[StaffManagement] Ошибка при добавлении услуги ${ct}:`,St):console.log(`[StaffManagement] Успешно добавлена услуга ${ct}`),await new Promise(ie=>setTimeout(ie,300))}}console.log("[StaffManagement] Обновление локального состояния с новыми услугами"),v(ct=>({...ct,[le]:_e})),console.log("[StaffManagement] Обновление услуг специалиста завершено успешно")}catch(Be){const Ie=Be instanceof Error?Be.message:"Неизвестная ошибка";console.error("[StaffManagement] Ошибка при обновлении услуг специалиста:",Ie),n({title:"Ошибка",description:"Не удалось обновить услуги специалиста",variant:"destructive"})}finally{y(!1)}},Ne=le=>{R(le),A(!0)},J=async()=>{var le;if(B!==null)try{const _e=String(B),Be=(le=u.find(tt=>String(tt.id)===_e))==null?void 0:le.name;console.log(`Удаление специалиста с ID: ${_e}`),await Mn.deleteStaff(B);const it=(await Mn.getAllStaff()).map(tt=>{const Ze=tt.work_schedule||{monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null},ct=zb(Ze);return{id:tt.id,name:tt.name||tt.full_name||"Неизвестный мастер",specialization:tt.specialization||"Специализация не указана",rating:tt.rating||0,appointments:tt.appointments_count||0,revenue:tt.total_revenue||0,availability:ct,image:tt.photo_url||tt.avatar_url||"https://randomuser.me/api/portraits/lego/1.jpg",work_schedule:Ze,serviceIds:[],bio:tt.bio||"",experience_years:tt.experience_years||0,phone:tt.phone||"",profile_id:tt.profile_id,email:tt.email||""}});d(it),A(!1),R(null),n({title:"Успех",description:`Мастер ${Be} успешно удален`})}catch(_e){console.error("Ошибка при удалении мастера:",_e),n({title:"Ошибка",description:"Не удалось удалить мастера",variant:"destructive"})}},Y=async le=>{try{if(!await Mn.updateStaff(String(le.id),{profile_id:null}))throw new Error("Не удалось отключить доступ");d(Be=>Be.map(Ie=>Ie.id===le.id?{...Ie,profile_id:void 0}:Ie)),n({title:"Доступ отключен",description:`Доступ для ${le.name} отключен`}),await I()}catch(_e){console.error("Ошибка при отключении доступа:",_e),n({title:"Ошибка",description:"Не удалось отключить доступ",variant:"destructive"})}},ae=le=>(console.log("[DEBUG] renderSpecialistServices - serviceIds:",le),console.log("[StaffManagement] renderSpecialistServices - Service IDs for specialist:",le),console.log("[StaffManagement] renderSpecialistServices - Available service IDs in store:",a.map(_e=>String(_e.id))),c||m?i.jsx("span",{className:"text-xs text-muted-foreground",children:"Загрузка услуг..."}):le.length===0?i.jsx("span",{className:"text-xs text-muted-foreground",children:"Нет услуг"}):le.map(_e=>{const Be=String(_e),Ie=a.find(it=>String(it.id)===Be);return Ie||console.warn(`[StaffManagement] renderSpecialistServices - Service not found for ID: ${Be}`),i.jsx("span",{className:"text-xs px-2 py-1 bg-beauty-50 text-beauty-700 rounded-full mr-1 mb-1 inline-block",children:Ie?Ie.name:"Неизвестная услуга"},_e)})),ge=async le=>{if(console.log(`[StaffManagement] Открытие формы редактирования для: ${le.name} (ID: ${le.id})`),E(!0),W(!0),H(le.id.toString()),q("add"),p[le.id.toString()])X(_e=>({..._e,name:le.name,specialization:le.specialization,avatar_url:le.avatar_url||le.image||"",work_schedule:le.work_schedule||_e.work_schedule,serviceIds:p[le.id.toString()]||[],bio:le.bio||"",experience_years:le.experience_years||0,phone:le.phone||"",email:le.email||""})),F(le.avatar_url||le.image||"");else try{const{data:_e,error:Be}=await es.getServicesBySpecialistId(le.id.toString());if(Be)throw Be;if(_e){const Ie=_e.map(it=>String(it.id));v(it=>({...it,[le.id.toString()]:Ie})),X(it=>({...it,name:le.name,specialization:le.specialization,avatar_url:le.avatar_url||le.image||"",work_schedule:le.work_schedule||it.work_schedule,serviceIds:Ie,bio:le.bio||"",experience_years:le.experience_years||0,phone:le.phone||"",email:le.email||""})),F(le.avatar_url||le.image||"")}}catch(_e){console.error("Ошибка при загрузке услуг для редактирования:",_e),n({title:"Ошибка",description:"Не удалось загрузить услуги мастера.",variant:"destructive"}),X(Be=>({...Be,name:le.name,specialization:le.specialization,avatar_url:le.avatar_url||le.image||"",work_schedule:le.work_schedule||Be.work_schedule,serviceIds:[],bio:le.bio||"",experience_years:le.experience_years||0,phone:le.phone||"",email:le.email||""})),F(le.avatar_url||le.image||"")}U(null),E(!1)},[Se,te]=x.useState(!1),[me,ke]=x.useState(null),[he,et]=x.useState(null),[nt,Oe]=x.useState(null),[Ye,ye]=x.useState(!1);return i.jsxs("div",{className:"container mx-auto p-4",children:[i.jsxs(fa,{value:ee,onValueChange:le=>q(le),className:"space-y-6",children:[i.jsxs(ta,{children:[i.jsx(Tt,{value:"list",children:"Список мастеров"}),i.jsx(Tt,{value:"add",children:O?"Редактировать мастера":"Добавить мастера"}),i.jsx(Tt,{value:"access",children:"Доступы"})]}),i.jsx(Ft,{value:"list",className:"space-y-6",children:i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-beauty-800",children:"Управление специалистами"}),i.jsxs(ne,{onClick:()=>q("add"),children:[i.jsx(ls,{className:"h-4 w-4 mr-2"}),"Добавить мастера"]})]})}),i.jsx(Ge,{children:f?i.jsx("div",{className:"text-center py-10",children:i.jsx("p",{children:"Загрузка специалистов..."})}):u.length===0?i.jsx(tP,{specialists:[],onAddMasterTab:()=>q("add")}):i.jsxs(ks,{children:[i.jsx(Ts,{children:i.jsxs(Lr,{children:[i.jsx(pt,{children:"Специалист"}),i.jsx(pt,{children:"Специализация"}),i.jsx(pt,{children:"Услуги"}),i.jsx(pt,{children:"График работы"}),i.jsx(pt,{className:"text-right",children:"Действия"})]})}),i.jsx(As,{children:u.map(le=>i.jsxs(Lr,{children:[i.jsxs(dt,{className:"flex items-center gap-3",children:[le.image&&le.image!=="/placeholder.svg"?i.jsx("img",{src:le.image,onError:_e=>{_e.currentTarget.src="/placeholder.svg"},alt:le.name,className:"w-12 h-12 object-cover rounded-full border shadow-sm"},le.image):i.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full border flex items-center justify-center shadow-sm",children:le.name?i.jsx("span",{className:"text-lg font-semibold text-gray-500",children:BCe(le.name)}):i.jsx(Efe,{className:"h-6 w-6 text-gray-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-base",children:le.name}),le.phone&&i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Телефон: ",le.phone]}),le.bio&&i.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:le.bio}),le.experience_years>0&&i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Опыт: ",le.experience_years," лет"]})]})]}),i.jsx(dt,{children:le.specialization}),i.jsx(dt,{children:i.jsx("div",{className:"flex flex-wrap",children:ae(le.serviceIds)})}),i.jsx(dt,{children:le.availability}),i.jsx(dt,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(TNe,{children:i.jsx(ANe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>ge(le),"aria-label":"Изменить",className:"text-admin-badge-foreground hover:bg-admin-badge hover:text-admin-primary",children:i.jsx(Ev,{className:"h-5 w-5"})})})}),i.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>Ne(le.id),"aria-label":"Удалить",className:"text-admin-badge-foreground hover:bg-admin-badge hover:text-admin-primary",children:i.jsx(vf,{className:"h-5 w-5"})})]})})]},le.id+"-"+(le.image||"")))})]})})]})}),i.jsx(Ft,{value:"add",className:"space-y-6",children:i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx("h2",{className:"text-2xl font-bold text-beauty-800",children:O?"Редактирование специалиста":"Добавление нового специалиста"})}),i.jsx(Ge,{children:S?i.jsxs("div",{className:"flex items-center justify-center p-8",children:[i.jsx(ki,{className:"h-6 w-6 animate-spin text-primary"}),i.jsx("span",{className:"ml-2",children:"Загрузка данных специалиста..."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"name",children:"ФИО"}),i.jsx($e,{id:"name",placeholder:"Введите ФИО специалиста",value:K.name,onChange:ve})]}),i.jsxs("div",{children:[i.jsxs(Xe,{htmlFor:"phone",children:["Телефон ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(ICe,{component:$e,mask:"+7 (999) 999-99-99",replacement:{9:/[0-9]/},value:K.phone||"",onChange:ve,disabled:S,id:"phone",placeholder:"+7 (999) 123-45-67"})]}),i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"email",children:"Email"}),i.jsx($e,{id:"email",type:"email",placeholder:"Email",value:K.email||"",onChange:ve})]}),i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"specialization",children:"Специализация"}),i.jsx($e,{id:"specialization",placeholder:"Например: Косметолог",value:K.specialization,onChange:ve})]}),i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"experience_years",children:"Опыт работы (лет)"}),i.jsx($e,{id:"experience_years",type:"number",min:"0",placeholder:"Например: 5",value:K.experience_years,onChange:le=>X(_e=>({..._e,experience_years:parseInt(le.target.value)||0}))})]}),i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"bio",children:"Биография"}),i.jsx(rn,{id:"bio",placeholder:"Краткое описание специалиста...",value:K.bio,onChange:ve,rows:3})]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx(Xe,{className:"text-sm font-medium",children:"Фото мастера"}),i.jsx(dCe,{specialistId:L||"new",initialUrl:K.avatar_url,onUpload:le=>X(_e=>({..._e,avatar_url:le}))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(qe,{className:"bg-admin-widget border-admin-secondary-border",children:[i.jsx(ht,{children:i.jsx(gt,{children:"График работы"})}),i.jsx(Ge,{className:"p-0",children:i.jsx("div",{className:"divide-y divide-gray-200",children:VZ.map(le=>{var _e,Be;return i.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Hn,{id:`day-${le}`,checked:!!K.work_schedule[le],onCheckedChange:Ie=>z(le,!!Ie),disabled:S,className:"mr-3"}),i.jsx(Xe,{htmlFor:`day-${le}`,className:"font-medium text-gray-700 w-12 cursor-pointer",children:rP[le]})]}),i.jsxs("div",{className:`flex items-center gap-2 ${K.work_schedule[le]?"":"opacity-50"}`,children:[i.jsx($e,{type:"time",value:((_e=K.work_schedule[le])==null?void 0:_e.start)||"",onChange:Ie=>we(le,"start",Ie.target.value),disabled:!K.work_schedule[le]||S,className:"w-28 bg-admin-input border-admin-input-border focus:border-admin-input-border-focus text-center rounded-md p-1.5 text-sm"}),i.jsx("span",{className:"text-gray-400",children:"–"}),i.jsx($e,{type:"time",value:((Be=K.work_schedule[le])==null?void 0:Be.end)||"",onChange:Ie=>we(le,"end",Ie.target.value),disabled:!K.work_schedule[le]||S,className:"w-28 bg-admin-input border-admin-input-border focus:border-admin-input-border-focus text-center rounded-md p-1.5 text-sm"})]})]},le)})})})]}),i.jsxs(qe,{className:"bg-admin-widget border-admin-secondary-border",children:[i.jsx(ht,{children:i.jsx(gt,{children:"Услуги специалиста"})}),i.jsxs(Ge,{className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(oj,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx($e,{placeholder:"Поиск услуг...",value:j,onChange:le=>N(le.target.value),className:"pl-10 mb-3 bg-admin-input border-admin-input-border focus:border-admin-input-border-focus"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[i.jsx(ne,{variant:k===null?"default":"outline",size:"sm",onClick:()=>C(null),className:k===null?"bg-beauty-500 hover:bg-beauty-600 text-white":"border-beauty-300 text-beauty-600 hover:bg-beauty-50",children:"Все категории"}),s.map(le=>i.jsx(ne,{variant:k===String(le.id)?"default":"outline",size:"sm",onClick:()=>C(String(le.id)),className:k===String(le.id)?"bg-beauty-500 hover:bg-beauty-600 text-white":"border-beauty-300 text-beauty-600 hover:bg-beauty-50",children:le.name},le.id))]}),i.jsx("div",{className:"max-h-72 overflow-y-auto space-y-3 pr-2 scrollbar-thin scrollbar-thumb-beauty-300 scrollbar-track-beauty-100",children:P.length===0?i.jsxs("div",{className:"text-center text-gray-500 py-8 flex flex-col items-center",children:[i.jsx(lH,{className:"h-12 w-12 text-gray-300 mb-3"})," ",i.jsx("p",{className:"font-semibold",children:"Услуги не найдены"}),i.jsx("p",{className:"text-sm",children:"Попробуйте изменить поисковый запрос или выбрать другую категорию."})]}):P.map(le=>{var _e;return i.jsxs("div",{className:"flex items-center space-x-3 p-3 border bg-white border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>Re(String(le.id)),children:[i.jsx(Hn,{id:`service-${le.id}`,checked:K.serviceIds.includes(String(le.id)),onCheckedChange:()=>Re(String(le.id)),disabled:S,className:"shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx(Xe,{htmlFor:`service-${le.id}`,className:"font-semibold text-base text-gray-800 cursor-pointer truncate block",children:le.name}),i.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 mt-1 text-xs text-gray-500",children:[i.jsxs("span",{className:"inline-flex items-center font-medium text-beauty-600",children:[le.price," ₽"]}),i.jsxs("span",{className:"inline-flex items-center",children:[i.jsx(Si,{className:"h-3 w-3 mr-1 text-gray-400"}),le.duration," мин."]}),i.jsxs("span",{className:"inline-flex items-center",children:[i.jsx(lj,{className:"h-3 w-3 mr-1 text-gray-400"}),((_e=s.find(Be=>String(Be.id)===String(le.category_id)))==null?void 0:_e.name)||"Без категории"]})]})]})]},le.id)})})]})]})]})]}),i.jsxs("div",{className:"flex justify-end mt-6",children:[i.jsx(ne,{variant:"outline",onClick:()=>q("list"),disabled:w,children:"Отмена"}),i.jsxs(ne,{variant:"default",onClick:Pe,disabled:w||b||S,children:[w?i.jsx(ki,{className:"mr-2 h-4 w-4 animate-spin text-primary"}):null,O?"Обновить мастера":"Создать мастера"]})]})]})})]})}),i.jsx(Ft,{value:"access",children:i.jsxs(ks,{children:[i.jsx(Ts,{children:i.jsxs(Lr,{children:[i.jsx(pt,{children:"Имя"}),i.jsx(pt,{children:"Специализация"}),i.jsx(pt,{children:"Доступ"})]})}),i.jsx(As,{children:u.map(le=>i.jsxs(Lr,{children:[i.jsx(dt,{children:le.name}),i.jsx(dt,{children:le.specialization}),i.jsx(dt,{children:le.profile_id?i.jsxs(i.Fragment,{children:[i.jsx(ne,{size:"sm",variant:"outline",onClick:()=>{Oe(le),ye(!0)},className:"mr-2",children:"Сбросить пароль"}),i.jsx(ne,{size:"sm",variant:"destructive",onClick:()=>Y(le),children:"Отключить"})]}):i.jsx(ne,{size:"sm",variant:"outline",onClick:()=>{ke(le),te(!0)},children:"Создать доступ"})})]},le.id))})]})})]}),i.jsx(qt,{open:T,onOpenChange:A,children:i.jsxs(Wt,{children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Подтверждение удаления"}),i.jsx(fr,{children:"Вы действительно хотите удалить этого сотрудника? Это действие нельзя отменить."})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:()=>A(!1),children:"Отмена"}),i.jsx(ne,{variant:"destructive",onClick:J,children:"Удалить"})]})]})}),i.jsx(hCe,{open:Se,staff:me?{...me,name:me.name||"",workSchedule:me.work_schedule,rating:me.rating||0}:null,onClose:()=>te(!1),onSuccess:async(le,_e)=>{et({email:le,password:_e}),await I()},credentials:he}),i.jsx(pCe,{open:Ye,onClose:()=>{ye(!1),Oe(null)},staff:nt?{id:String(nt.id),name:nt.name,email:nt.email}:null,onSuccess:le=>{n({title:"Пароль сброшен",description:`Новый пароль для ${nt==null?void 0:nt.name}: ${le}`})}})]})};var WCe=x.forwardRef((e,t)=>{const{children:r,...n}=e,a=x.Children.toArray(r),s=a.find(VCe);if(s){const o=s.props.children,l=a.map(c=>c===s?x.Children.count(o)>1?x.Children.only(null):x.isValidElement(o)?o.props.children:null:c);return i.jsx(nP,{...n,ref:t,children:x.isValidElement(o)?x.cloneElement(o,void 0,l):null})}return i.jsx(nP,{...n,ref:t,children:r})});WCe.displayName="Slot";var nP=x.forwardRef((e,t)=>{const{children:r,...n}=e;if(x.isValidElement(r)){const a=qCe(r);return x.cloneElement(r,{...HCe(n,r.props),ref:t?ad(t,a):a})}return x.Children.count(r)>1?x.Children.only(null):null});nP.displayName="SlotClone";var HZ=({children:e})=>i.jsx(i.Fragment,{children:e});function VCe(e){return x.isValidElement(e)&&e.type===HZ}function HCe(e,t){const r={...t};for(const n in t){const a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...l)=>{s(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...s}:n==="className"&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}function qCe(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var qZ="AlertDialog",[GCe,Zlt]=lo(qZ,[JG]),Mc=JG(),GZ=e=>{const{__scopeAlertDialog:t,...r}=e,n=Mc(t);return i.jsx(G4,{...n,...r,modal:!0})};GZ.displayName=qZ;var KCe="AlertDialogTrigger",XCe=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Mc(r);return i.jsx(K4,{...a,...n,ref:t})});XCe.displayName=KCe;var YCe="AlertDialogPortal",KZ=e=>{const{__scopeAlertDialog:t,...r}=e,n=Mc(t);return i.jsx(X4,{...n,...r})};KZ.displayName=YCe;var ZCe="AlertDialogOverlay",XZ=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Mc(r);return i.jsx(dy,{...a,...n,ref:t})});XZ.displayName=ZCe;var wm="AlertDialogContent",[JCe,QCe]=GCe(wm),YZ=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,s=Mc(r),o=x.useRef(null),l=Pr(t,o),c=x.useRef(null);return i.jsx(hbe,{contentName:wm,titleName:ZZ,docsSlug:"alert-dialog",children:i.jsx(JCe,{scope:r,cancelRef:c,children:i.jsxs(fy,{role:"alertdialog",...s,...a,ref:l,onOpenAutoFocus:At(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(HZ,{children:n}),i.jsx(tke,{contentRef:o})]})})})});YZ.displayName=wm;var ZZ="AlertDialogTitle",JZ=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Mc(r);return i.jsx(hy,{...a,...n,ref:t})});JZ.displayName=ZZ;var QZ="AlertDialogDescription",eJ=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Mc(r);return i.jsx(my,{...a,...n,ref:t})});eJ.displayName=QZ;var eke="AlertDialogAction",tJ=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Mc(r);return i.jsx(Oj,{...a,...n,ref:t})});tJ.displayName=eke;var rJ="AlertDialogCancel",nJ=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=QCe(rJ,r),s=Mc(r),o=Pr(t,a);return i.jsx(Oj,{...s,...n,ref:o})});nJ.displayName=rJ;var tke=({contentRef:e})=>{const t=`\`${wm}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${wm}\` by passing a \`${QZ}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${wm}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},rke=GZ,nke=KZ,aJ=XZ,sJ=YZ,iJ=tJ,oJ=nJ,lJ=JZ,cJ=eJ;const Mg=rke,ake=nke,uJ=x.forwardRef(({className:e,...t},r)=>i.jsx(aJ,{className:Ue("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));uJ.displayName=aJ.displayName;const _m=x.forwardRef(({className:e,...t},r)=>i.jsxs(ake,{children:[i.jsx(uJ,{}),i.jsx(sJ,{ref:r,className:Ue("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));_m.displayName=sJ.displayName;const Sm=({className:e,...t})=>i.jsx("div",{className:Ue("flex flex-col space-y-2 text-center sm:text-left",e),...t});Sm.displayName="AlertDialogHeader";const jm=({className:e,...t})=>i.jsx("div",{className:Ue("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});jm.displayName="AlertDialogFooter";const Em=x.forwardRef(({className:e,...t},r)=>i.jsx(lJ,{ref:r,className:Ue("text-lg font-semibold",e),...t}));Em.displayName=lJ.displayName;const Nm=x.forwardRef(({className:e,...t},r)=>i.jsx(cJ,{ref:r,className:Ue("text-sm text-muted-foreground",e),...t}));Nm.displayName=cJ.displayName;const Cm=x.forwardRef(({className:e,...t},r)=>i.jsx(iJ,{ref:r,className:Ue(ty(),e),...t}));Cm.displayName=iJ.displayName;const km=x.forwardRef(({className:e,...t},r)=>i.jsx(oJ,{ref:r,className:Ue(ty({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));km.displayName=oJ.displayName;const Gs=uo()(Gf(Jp(Kf((e,t)=>({clients:[],filteredClients:[],selectedClient:null,loading:!1,error:null,filters:{},tags:[],upcomingBirthdays:[],searchTerm:"",discountsByClientId:{},fetchClients:async()=>{try{e({loading:!0,error:null}),console.log("Начинаем загрузку клиентов");const r=await pr.getAllClients();console.log("Загружены клиенты:",r),e({clients:r,filteredClients:r,loading:!1});const n=t().filters,a=t().searchTerm;(Object.keys(n).length>0||a)&&t().setFilters(n)}catch(r){console.error("Ошибка при загрузке клиентов:",r),e({error:r instanceof Error?r.message:"Ошибка при загрузке клиентов",loading:!1})}},fetchClientsByStudio:async r=>{try{e({loading:!0,error:null}),console.log("Начинаем загрузку клиентов по студии:",r);const n=await pr.getAllClientsByStudio(r);console.log("Загружены клиенты:",n),e({clients:n,filteredClients:n,loading:!1});const a=t().filters,s=t().searchTerm;(Object.keys(a).length>0||s)&&t().setFilters(a)}catch(n){console.error("Ошибка при загрузке клиентов по студии:",n),e({error:n instanceof Error?n.message:"Ошибка при загрузке клиентов по студии",loading:!1})}},getClientById:async r=>{try{e({loading:!0,error:null});const n=await pr.getClientById(r);return e({selectedClient:n,loading:!1}),n}catch(n){return console.error(`Ошибка при загрузке клиента ${r}:`,n),e({error:n instanceof Error?n.message:"Ошибка при загрузке клиента",loading:!1}),null}},addClient:async r=>{try{e({loading:!0,error:null});const n=await pr.createClient(r);return n&&e(a=>({clients:[...a.clients,n],filteredClients:[...a.filteredClients,n],loading:!1})),n}catch(n){return console.error("Ошибка при добавлении клиента:",n),e({error:n instanceof Error?n.message:"Ошибка при добавлении клиента",loading:!1}),null}},updateClient:async(r,n)=>{try{e({loading:!0,error:null});const a=await pr.updateClient(r,n);return a&&e(s=>{var o;return{clients:s.clients.map(l=>l.id===r?a:l),filteredClients:s.filteredClients.map(l=>l.id===r?a:l),selectedClient:((o=s.selectedClient)==null?void 0:o.id)===r?a:s.selectedClient,loading:!1}}),a}catch(a){return console.error(`Ошибка при обновлении клиента ${r}:`,a),e({error:a instanceof Error?a.message:"Ошибка при обновлении клиента",loading:!1}),null}},deleteClient:async r=>{try{e({loading:!0,error:null}),await pr.deleteClient(r),e(n=>{var a;return{clients:n.clients.filter(s=>s.id!==r),filteredClients:n.filteredClients.filter(s=>s.id!==r),selectedClient:((a=n.selectedClient)==null?void 0:a.id)===r?null:n.selectedClient,loading:!1}})}catch(n){console.error(`Ошибка при удалении клиента ${r}:`,n),e({error:n instanceof Error?n.message:"Ошибка при удалении клиента",loading:!1})}},searchClients:r=>{e({searchTerm:r});const n=r.toLowerCase();e(a=>({filteredClients:a.clients.filter(s=>{var o;return s.full_name.toLowerCase().includes(n)||((o=s.phone)==null?void 0:o.includes(n))||s.tags&&a.tags.length>0&&s.tags.some(l=>{var c;return(c=a.tags.find(u=>u.id===l))==null?void 0:c.name.toLowerCase().includes(n)})})}))},sortClients:(r,n)=>{e(a=>({filteredClients:[...a.filteredClients].sort((s,o)=>{const l=s[r],c=o[r];let u=0;return l>c?u=1:l<c&&(u=-1),n==="desc"?u*-1:u})}))},clearError:()=>{e({error:null})},setSelectedClient:r=>e({selectedClient:r}),setFilters:r=>{const a={...t().filters,...r};e({filters:a}),e(s=>({filteredClients:s.clients.filter(o=>{var l;if(s.searchTerm){const c=s.searchTerm.toLowerCase();if(!o.full_name.toLowerCase().includes(c)&&!((l=o.phone)!=null&&l.includes(c))&&!(o.tags&&s.tags.length>0&&o.tags.some(u=>{var d;return(d=s.tags.find(f=>f.id===u))==null?void 0:d.name.toLowerCase().includes(c)})))return!1}return!(a.tags&&a.tags.length>0&&(!o.tags||!a.tags.some(c=>{var u;return(u=o.tags)==null?void 0:u.includes(c)})))})})),a.sortBy&&a.sortOrder&&t().sortClients(a.sortBy,a.sortOrder)},fetchAllTags:async()=>{try{const r=await pr.getAllTags();e({tags:r})}catch(r){console.error("Ошибка при загрузке всех тегов:",r),e({error:r instanceof Error?r.message:"Ошибка при загрузке всех тегов"})}},addTagToClient:async(r,n)=>{try{await pr.addTagToClient(r,n);const a=await pr.getClientById(r);a&&e(s=>{var o;return{clients:s.clients.map(l=>l.id===r?a:l),filteredClients:s.filteredClients.map(l=>l.id===r?a:l),selectedClient:((o=s.selectedClient)==null?void 0:o.id)===r?a:s.selectedClient}})}catch(a){console.error("Ошибка при добавлении тега к клиенту:",a),e({error:a instanceof Error?a.message:"Ошибка при добавлении тега к клиенту"})}},removeTagFromClient:async(r,n)=>{try{await pr.removeTagFromClient(r,n);const a=await pr.getClientById(r);a&&e(s=>{var o;return{clients:s.clients.map(l=>l.id===r?a:l),filteredClients:s.filteredClients.map(l=>l.id===r?a:l),selectedClient:((o=s.selectedClient)==null?void 0:o.id)===r?a:s.selectedClient}})}catch(a){console.error("Ошибка при удалении тега у клиента:",a),e({error:a instanceof Error?a.message:"Ошибка при удалении тега у клиента"})}},fetchUpcomingBirthdays:async(r=7)=>{e({loading:!0,error:null});try{const n=await pr.getUpcomingBirthdays(r);e({upcomingBirthdays:n,loading:!1})}catch(n){console.error("Error fetching upcoming birthdays:",n);const a=n instanceof Error?n.message:"Failed to fetch upcoming birthdays";e({error:a,loading:!1,upcomingBirthdays:[]})}},addBonusPoints:async(r,n)=>{e({loading:!0,error:null});try{const a=await pr.addBonusPoints(r,n);a?(e(s=>{var o;return{clients:s.clients.map(l=>l.id===r?a:l),filteredClients:s.filteredClients.map(l=>l.id===r?a:l),selectedClient:((o=s.selectedClient)==null?void 0:o.id)===r?a:s.selectedClient,loading:!1}}),console.log(`Client store updated for ${r} with new bonus points.`)):e({loading:!1})}catch(a){console.error(`Ошибка при добавлении бонусов клиенту ${r} в сторе:`,a);const s=a instanceof Error?a.message:"Failed to add bonus points";e({error:s,loading:!1})}},createClientDiscount:async r=>{e({loading:!0,error:null});try{await pr.createClientDiscount(r),e({loading:!1})}catch(n){console.error("Ошибка при создании индивидуальной скидки:",n),e({error:n instanceof Error?n.message:"Ошибка создания скидки",loading:!1})}},fetchClientDiscounts:async r=>{e({loading:!0,error:null});try{const n=await pr.getClientDiscounts(r);e({discountsByClientId:{[r]:n},loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Ошибка загрузки скидок",loading:!1,discountsByClientId:{}})}},fetchAllClientDiscounts:async r=>{e({loading:!0,error:null});try{const n=await pr.getDiscountsForClients(r),a={};for(const s of n)a[s.client_id]||(a[s.client_id]=[]),a[s.client_id].push(s);e({discountsByClientId:a,loading:!1})}catch(n){e({error:n instanceof Error?n.message:"Ошибка загрузки скидок",loading:!1,discountsByClientId:{}})}},filterClientsByStudio:r=>{e({loading:!0,error:null});try{r?t().fetchClientsByStudio(r):t().fetchClients()}catch(n){console.error("Ошибка при фильтрации клиентов по студии:",n),e({error:n instanceof Error?n.message:"Ошибка при фильтрации клиентов по студии",loading:!1})}}}),{name:"client-storage",partialize:e=>({})})))),RD=uo()(Gf(Kf(Jp((e,t)=>({procedureTypes:[],procedureTypeCategories:[],isLoading:!1,error:null,fetchProcedureTypeCategories:async()=>{e({isLoading:!0,error:null});try{const{data:r,error:n}=await ue.from("procedure_type_categories").select("*").order("name");if(n)throw n;e({procedureTypeCategories:r||[],isLoading:!1})}catch(r){const n=r.message||"Ошибка загрузки категорий типов процедур";e({error:n,isLoading:!1}),Ae({title:"Ошибка",description:n,variant:"destructive"})}},fetchProcedureTypeCategoriesByStudio:async r=>{e({isLoading:!0,error:null});try{const{data:n,error:a}=await ue.rpc("get_procedure_type_categories_by_studio",{studio_id:r});if(a)throw a;e({procedureTypeCategories:n||[],isLoading:!1})}catch(n){const a=n.message||"Ошибка загрузки категорий типов процедур";e({error:a,isLoading:!1}),Ae({title:"Ошибка",description:a,variant:"destructive"})}},addProcedureTypeCategory:async r=>{e({isLoading:!0,error:null});try{const{data:n,error:a}=await ue.from("procedure_type_categories").insert([r]).select().single();if(a)throw a;return n?(e(s=>({procedureTypeCategories:[...s.procedureTypeCategories,n],isLoading:!1})),Ae({title:"Успешно",description:"Категория типа процедуры добавлена"}),n):null}catch(n){const a=n.message||"Ошибка добавления категории";return e({error:a,isLoading:!1}),Ae({title:"Ошибка",description:a,variant:"destructive"}),null}},updateProcedureTypeCategory:async(r,n)=>{e({isLoading:!0,error:null});try{const{data:a,error:s}=await ue.from("procedure_type_categories").update(n).eq("id",r).select().single();if(s)throw s;return a?(e(o=>({procedureTypeCategories:o.procedureTypeCategories.map(l=>l.id===r?a:l),isLoading:!1})),Ae({title:"Успешно",description:"Категория типа процедуры обновлена"}),a):null}catch(a){const s=a.message||"Ошибка обновления категории";return e({error:s,isLoading:!1}),Ae({title:"Ошибка",description:s,variant:"destructive"}),null}},deleteProcedureTypeCategory:async r=>{e({isLoading:!0,error:null});try{const{error:n}=await ue.from("procedure_type_categories").delete().eq("id",r);if(n)throw n;e(a=>({procedureTypeCategories:a.procedureTypeCategories.filter(s=>s.id!==r),isLoading:!1})),Ae({title:"Успешно",description:"Категория типа процедуры удалена"})}catch(n){const a=n.message||"Ошибка удаления категории";e({error:a,isLoading:!1}),Ae({title:"Ошибка",description:a,variant:"destructive"})}},fetchProcedureTypes:async()=>{e({isLoading:!0,error:null});try{const{data:r,error:n}=await ue.from("procedure_types").select("*, category:procedure_type_categories(*)").order("name");if(n)throw n;e({procedureTypes:r||[],isLoading:!1})}catch(r){const n=r.message||"Ошибка загрузки типов процедур";e({error:n,isLoading:!1}),Ae({title:"Ошибка",description:n,variant:"destructive"})}},fetchProcedureTypesByStudio:async r=>{e({isLoading:!0,error:null});try{const{data:n,error:a}=await ue.rpc("get_procedure_types_by_studio",{studio_id:r});if(a)throw a;e({procedureTypes:n||[],isLoading:!1})}catch(n){const a=n.message||"Ошибка загрузки типов процедур";e({error:a,isLoading:!1}),Ae({title:"Ошибка",description:a,variant:"destructive"})}},addProcedureType:async r=>{e({isLoading:!0,error:null});try{const n={...r,is_active:r.is_active!==void 0?r.is_active:!0},{data:a,error:s}=await ue.from("procedure_types").insert([n]).select("*, category:procedure_type_categories(*)").single();if(s)throw s;return a?(e(o=>({procedureTypes:[...o.procedureTypes,a],isLoading:!1})),Ae({title:"Успешно",description:"Тип процедуры добавлен"}),a):null}catch(n){const a=n.message||"Ошибка добавления типа процедуры";return e({error:a,isLoading:!1}),Ae({title:"Ошибка",description:a,variant:"destructive"}),null}},updateProcedureType:async(r,n)=>{e({isLoading:!0,error:null});try{const{data:a,error:s}=await ue.from("procedure_types").update(n).eq("id",r).select("*, category:procedure_type_categories(*)").single();if(s)throw s;return a?(e(o=>({procedureTypes:o.procedureTypes.map(l=>l.id===r?a:l),isLoading:!1})),Ae({title:"Успешно",description:"Тип процедуры обновлен"}),a):null}catch(a){const s=a.message||"Ошибка обновления типа процедуры";return e({error:s,isLoading:!1}),Ae({title:"Ошибка",description:s,variant:"destructive"}),null}},deleteProcedureType:async r=>{e({isLoading:!0,error:null});try{const{error:n}=await ue.from("procedure_types").delete().eq("id",r);if(n)throw n;e(a=>({procedureTypes:a.procedureTypes.filter(s=>s.id!==r),isLoading:!1})),Ae({title:"Успешно",description:"Тип процедуры удален"})}catch(n){const a=n.message||"Ошибка удаления типа процедуры";e({error:a,isLoading:!1}),Ae({title:"Ошибка",description:a,variant:"destructive"})}}})),{name:"procedure-type-storage"})));async function ske(e){let t=to.from("tracking").select("*");e!=null&&e.clientId&&(t=t.eq("client_id",e.clientId)),e!=null&&e.staffId&&(t=t.eq("staff_id",e.staffId)),e!=null&&e.status&&(t=t.eq("status",e.status)),e!=null&&e.branchId&&(t=t.eq("branch_id",e.branchId)),e!=null&&e.dateFrom&&(t=t.gte("date",e.dateFrom)),e!=null&&e.dateTo&&(t=t.lte("date",e.dateTo));const{data:r,error:n}=await t.order("date",{ascending:!1});if(n)throw console.error("Error fetching trackings:",n),n;return r||[]}async function ike(e){const{data:t,error:r}=await to.rpc("get_trackings_by_studio",{studio_uuid:e});if(r)throw console.error("Error fetching trackings by studio:",r),r;return t||[]}async function oke(e){const{data:t,error:r}=await to.from("tracking").select("*").eq("id",e).single();if(r){if(console.error("Error fetching tracking by ID:",r),r.code==="PGRST116")return null;throw r}return t}async function lke(e){const{data:t,error:r}=await to.from("tracking").insert(e).select().single();if(r)throw console.error("Error creating tracking:",r),r;return t}async function cke(e,t){const{data:r,error:n}=await to.from("tracking").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating tracking:",n),n;return r}async function uke(e){const{error:t}=await to.from("tracking").delete().eq("id",e);if(t)throw console.error("Error deleting tracking:",t),t}async function dke(e){const{data:t,error:r}=await to.from("tracking_history").select("*").eq("tracking_id",e).order("date",{ascending:!1}).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching tracking history:",r),r;return t||[]}async function fke(e){const{data:t,error:r}=await to.from("tracking_history").insert(e).select().single();if(r)throw console.error("Error adding tracking history item:",r),r;return t}async function hke(e){const{error:t}=await to.from("tracking_history").delete().eq("id",e);if(t)throw console.error("Error deleting tracking history item:",t),t}const dJ=uo()(Gf(Kf(Jp((e,t)=>({trackings:[],selectedTracking:null,trackingHistory:[],isLoading:!1,error:null,fetchTrackings:async r=>{e({isLoading:!0,error:null});try{const n=await ske(r);e({trackings:n,isLoading:!1})}catch(n){e({error:n,isLoading:!1}),console.error("Failed to fetch trackings",n)}},fetchTrackingsByStudio:async r=>{e({isLoading:!0,error:null});try{const n=await ike(r);e({trackings:n,isLoading:!1})}catch(n){e({error:n,isLoading:!1}),console.error(`Failed to fetch trackings by studio ${r}`,n)}},fetchTrackingById:async r=>{e({isLoading:!0,error:null});try{const n=await oke(r);e({selectedTracking:n,isLoading:!1}),n?t().fetchTrackingHistory(n.id):e({trackingHistory:[]})}catch(n){e({error:n,isLoading:!1}),console.error(`Failed to fetch tracking ${r}`,n)}},createTracking:async r=>{e({isLoading:!0,error:null});try{const n=await lke(r);return e(a=>({trackings:[n,...a.trackings],isLoading:!1})),n}catch(n){e({error:n,isLoading:!1}),console.error("Failed to create tracking",n);return}},updateTracking:async(r,n)=>{e({isLoading:!0,error:null});try{const a=await cke(r,n);return e(s=>{var o;return{trackings:s.trackings.map(l=>l.id===r?{...l,...a}:l),selectedTracking:((o=s.selectedTracking)==null?void 0:o.id)===r?{...s.selectedTracking,...a}:s.selectedTracking,isLoading:!1}}),a}catch(a){e({error:a,isLoading:!1}),console.error(`Failed to update tracking ${r}`,a);return}},deleteTracking:async r=>{e({isLoading:!0,error:null});try{await uke(r),e(n=>{var a;return{trackings:n.trackings.filter(s=>s.id!==r),selectedTracking:((a=n.selectedTracking)==null?void 0:a.id)===r?null:n.selectedTracking,isLoading:!1}})}catch(n){e({error:n,isLoading:!1}),console.error(`Failed to delete tracking ${r}`,n)}},selectTracking:r=>{e({selectedTracking:r}),r?t().fetchTrackingHistory(r.id):e({trackingHistory:[]})},fetchTrackingHistory:async r=>{var n;e({isLoading:!0,error:null});try{const a=await dke(r);((n=t().selectedTracking)==null?void 0:n.id)===r?e({trackingHistory:a,isLoading:!1}):e({isLoading:!1})}catch(a){e({error:a,isLoading:!1}),console.error(`Failed to fetch history for tracking ${r}`,a)}},addTrackingHistoryItem:async r=>{var n;e({isLoading:!0,error:null});try{const a=await fke(r);((n=t().selectedTracking)==null?void 0:n.id)===a.tracking_id?e(s=>({trackingHistory:[a,...s.trackingHistory],isLoading:!1})):e({isLoading:!1})}catch(a){e({error:a,isLoading:!1}),console.error("Failed to add tracking history item",a)}},deleteTrackingHistoryItem:async(r,n)=>{var a;e({isLoading:!0,error:null});try{await hke(n),((a=t().selectedTracking)==null?void 0:a.id)===r?e(s=>({trackingHistory:s.trackingHistory.filter(o=>o.id!==n),isLoading:!1})):e({isLoading:!1})}catch(s){e({error:s,isLoading:!1}),console.error(`Failed to delete tracking history item ${n}`,s)}}})),{name:"tracking-storage"}))),mke=()=>{const{procedureTypeCategories:e,fetchProcedureTypeCategories:t,addProcedureTypeCategory:r,updateProcedureTypeCategory:n,deleteProcedureTypeCategory:a}=RD(),[s,o]=x.useState(!1),[l,c]=x.useState(null),[u,d]=x.useState({name:"",description:""});x.useEffect(()=>{t()},[t]);const f=g=>{const{name:b,value:y}=g.target;d(w=>({...w,[b]:y}))},h=()=>{c(null),d({name:"",description:""}),o(!0)},p=g=>{c(g),d({name:g.name,description:g.description||""}),o(!0)},v=async()=>{if(!u.name){Ae({title:"Ошибка",description:"Название категории не может быть пустым",variant:"destructive"});return}try{l?(await n(String(l.id),u),Ae({title:"Успешно",description:"Категория типов процедур успешно обновлена"})):(await r(u),Ae({title:"Успешно",description:"Категория типов процедур успешно создана"})),o(!1)}catch(g){console.error("Ошибка при сохранении категории типов процедур:",g),Ae({title:"Ошибка",description:"Не удалось сохранить категорию типов процедур",variant:"destructive"})}},m=async g=>{if(window.confirm("Вы уверены, что хотите удалить эту категорию типов процедур? Типы процедур, относящиеся к этой категории, останутся, но станут без категории."))try{await a(String(g)),Ae({title:"Успешно",description:"Категория типов процедур успешно удалена"})}catch(b){console.error("Ошибка при удалении категории типов процедур:",b),Ae({title:"Ошибка",description:"Не удалось удалить категорию типов процедур",variant:"destructive"})}};return i.jsxs(i.Fragment,{children:[i.jsx(qe,{className:"mb-6",children:i.jsxs(Ge,{className:"pt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-semibold",children:"Категории типов процедур"}),i.jsxs(ne,{variant:"outline",onClick:h,className:"flex items-center gap-2 text-primary border-primary hover:bg-primary/10",children:[i.jsx(oH,{className:"h-4 w-4"}),"Добавить категорию"]})]}),e.length===0?i.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"Нет доступных категорий типов процедур. Создайте первую категорию."}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.map(g=>i.jsxs("div",{className:"p-3 border rounded-md flex justify-between items-center hover:bg-muted/50",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:g.name}),i.jsx("div",{className:"text-sm text-muted-foreground",children:g.description||"Без описания"})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(ne,{variant:"ghost",size:"sm",className:"text-admin-badge-foreground hover:bg-admin-badge hover:text-admin-primary",onClick:()=>p(g),children:i.jsx(Jx,{className:"h-4 w-4"})}),i.jsx(ne,{variant:"ghost",size:"sm",className:"text-admin-badge-foreground hover:bg-admin-badge hover:text-admin-primary",onClick:()=>m(g.id),children:i.jsx(Xp,{className:"h-4 w-4"})})]})]},g.id))})]})}),i.jsx(qt,{open:s,onOpenChange:o,children:i.jsxs(Wt,{className:"sm:max-w-[425px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:l?"Редактирование категории типов процедур":"Добавление новой категории типов процедур"}),i.jsx(fr,{children:l?'Внесите изменения в категорию и нажмите "Сохранить"':"Заполните информацию о новой категории типов процедур"})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Название категории"}),i.jsx($e,{name:"name",value:u.name,onChange:f,placeholder:"Введите название категории типов процедур"})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Описание"}),i.jsx(rn,{name:"description",value:u.description,onChange:f,placeholder:"Введите описание категории типов процедур",rows:3})]})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:()=>o(!1),className:"text-primary border-primary hover:bg-primary/10",children:"Отмена"}),i.jsx(ne,{onClick:v,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:l?"Сохранить":"Создать"})]})]})})]})},pke=()=>{const{categories:e,fetchCategories:t,addCategory:r,updateCategory:n,deleteCategory:a}=Oi(),[s,o]=x.useState(!1),[l,c]=x.useState(null),[u,d]=x.useState({name:"",description:""});x.useEffect(()=>{t()},[t]);const f=g=>{const{name:b,value:y}=g.target;d(w=>({...w,[b]:y}))},h=()=>{c(null),d({name:"",description:""}),o(!0)},p=g=>{c(g),d({name:g.name,description:g.description||""}),o(!0)},v=async()=>{if(!u.name){Ae({title:"Ошибка",description:"Название категории не может быть пустым",variant:"destructive"});return}try{l?(await n(String(l.id),u),Ae({title:"Успешно",description:"Категория успешно обновлена"})):(await r(u),Ae({title:"Успешно",description:"Категория успешно создана"})),o(!1)}catch(g){console.error("Ошибка при сохранении категории:",g),Ae({title:"Ошибка",description:"Не удалось сохранить категорию",variant:"destructive"})}},m=async g=>{if(window.confirm("Вы уверены, что хотите удалить эту категорию? Услуги, относящиеся к этой категории, останутся, но станут без категории."))try{await a(String(g)),Ae({title:"Успешно",description:"Категория успешно удалена"})}catch(b){console.error("Ошибка при удалении категории:",b),Ae({title:"Ошибка",description:"Не удалось удалить категорию",variant:"destructive"})}};return i.jsxs(i.Fragment,{children:[i.jsx(qe,{className:"mb-6",children:i.jsxs(Ge,{className:"pt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-semibold",children:"Категории услуг"}),i.jsxs(ne,{variant:"outline",onClick:h,className:"flex items-center gap-2 text-primary border-primary hover:bg-primary/10",children:[i.jsx(oH,{className:"h-4 w-4"}),"Добавить категорию"]})]}),e.length===0?i.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"Нет доступных категорий. Создайте первую категорию."}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.map(g=>i.jsxs("div",{className:"p-3 border rounded-md flex justify-between items-center hover:bg-muted/50",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:g.name}),i.jsx("div",{className:"text-sm text-muted-foreground",children:g.description||"Без описания"})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(ne,{variant:"ghost",size:"sm",className:"text-admin-badge-foreground hover:bg-admin-badge hover:text-admin-primary",onClick:()=>p(g),children:i.jsx(Jx,{className:"h-4 w-4"})}),i.jsx(ne,{variant:"ghost",size:"sm",className:"text-admin-badge-foreground hover:bg-admin-badge hover:text-admin-primary",onClick:()=>m(g.id),children:i.jsx(Xp,{className:"h-4 w-4"})})]})]},g.id))})]})}),i.jsx(qt,{open:s,onOpenChange:o,children:i.jsxs(Wt,{className:"sm:max-w-[425px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:l?"Редактирование категории":"Добавление новой категории"}),i.jsx(fr,{children:l?'Внесите изменения в категорию и нажмите "Сохранить"':"Заполните информацию о новой категории"})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Название категории"}),i.jsx($e,{name:"name",value:u.name,onChange:f,placeholder:"Введите название категории"})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Описание"}),i.jsx(rn,{name:"description",value:u.description,onChange:f,placeholder:"Введите описание категории",rows:3})]})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:()=>o(!1),className:"text-primary border-primary hover:bg-primary/10",children:"Отмена"}),i.jsx(ne,{onClick:v,className:"bg-primary text-primary-foreground hover:bg-primary/90",children:l?"Сохранить":"Создать"})]})]})})]})},gke=()=>{var j;const{currentStudio:e}=Ba(),{procedureTypes:t,procedureTypeCategories:r,fetchProcedureTypes:n,fetchProcedureTypesByStudio:a,addProcedureType:s,updateProcedureType:o,deleteProcedureType:l,fetchProcedureTypeCategories:c}=RD(),[u,d]=x.useState(!1),[f,h]=x.useState(null),[p,v]=x.useState({name:"",description:"",price:0,duration:30,category_id:void 0,is_active:!0,break_after:0}),m=async()=>{e!=null&&e.id?await a(e.id):await n()};x.useEffect(()=>{m(),r.length||c()},[e==null?void 0:e.id,c,r.length]);const g=N=>{const{name:k,value:C,type:T}=N.target,A=T==="number"?parseFloat(C):C;v(B=>({...B,[k]:A}))},b=N=>{v(k=>({...k,is_active:N}))},y=N=>{v(k=>({...k,category_id:N==="no-category"?null:N}))},w=()=>{var N;h(null),v({name:"",description:"",price:0,duration:30,category_id:((N=r[0])==null?void 0:N.id)||"no-category",is_active:!0,break_after:0}),d(!0)},_=N=>{var k;h(N),v({...N,price:Number(N.price),duration:Number(N.duration),break_after:Number(N.break_after||0),category_id:N.category_id==="no-category"?null:N.category_id||((k=r[0])==null?void 0:k.id)||"no-category"}),d(!0)},S=async()=>{if(!p.name||p.price===void 0||p.duration===void 0){Ae({title:"Ошибка",description:"Название, цена и длительность обязательны.",variant:"destructive"});return}const N=p.category_id==="no-category"||p.category_id==null?null:String(p.category_id),k={name:p.name,description:p.description||null,price:Number(p.price),duration:Number(p.duration),category_id:N,is_active:typeof p.is_active=="boolean"?p.is_active:!0,break_after:Number(p.break_after||0),studio_id:(e==null?void 0:e.id)||null},C={...k};try{f?(await o(String(f.id),C),Ae({title:"Успешно",description:"Тип процедуры обновлен."})):(await s(k),Ae({title:"Успешно",description:"Тип процедуры создан."})),d(!1),m()}catch(T){console.error("Ошибка сохранения типа процедуры:",T),Ae({title:"Ошибка",description:"Не удалось сохранить тип процедуры.",variant:"destructive"})}},E=async N=>{if(window.confirm("Вы уверены, что хотите удалить этот тип процедуры?"))try{await l(String(N)),Ae({title:"Успешно",description:"Тип процедуры удален."}),m()}catch(k){console.error("Ошибка удаления типа процедуры:",k),Ae({title:"Ошибка",description:"Не удалось удалить тип процедуры.",variant:"destructive"})}};return i.jsxs(i.Fragment,{children:[i.jsx(qe,{className:"mb-6",children:i.jsxs(Ge,{className:"pt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-semibold",children:"Типы процедур (Услуги)"}),i.jsxs(ne,{variant:"outline",onClick:w,className:"flex items-center gap-2 text-primary border-primary hover:bg-primary/10",children:[i.jsx(ls,{className:"h-4 w-4"}),"Добавить тип процедуры"]})]}),t.length===0?i.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"Нет доступных типов процедур. Создайте первый."}):i.jsxs(ks,{children:[i.jsx(Ts,{children:i.jsxs(Lr,{children:[i.jsx(pt,{children:"Название"}),i.jsx(pt,{children:"Категория"}),i.jsx(pt,{children:"Цена"}),i.jsx(pt,{children:"Длительность"}),i.jsx(pt,{children:"Активен"}),i.jsx(pt,{className:"text-right",children:"Действия"})]})}),i.jsx(As,{children:t.map(N=>{var k;return i.jsxs(Lr,{children:[i.jsx(dt,{className:"font-medium",children:N.name}),i.jsx(dt,{children:((k=r.find(C=>C.id===N.category_id))==null?void 0:k.name)||"Без категории"}),i.jsxs(dt,{children:[N.price," ₽"]}),i.jsxs(dt,{children:[N.duration," мин"]}),i.jsx(dt,{children:N.is_active?"Да":"Нет"}),i.jsxs(dt,{className:"text-right",children:[i.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>_(N),children:i.jsx(Jx,{className:"h-4 w-4"})}),i.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>E(N.id),children:i.jsx(Xp,{className:"h-4 w-4"})})]})]},N.id)})})]})]})}),i.jsx(qt,{open:u,onOpenChange:d,children:i.jsxs(Wt,{className:"sm:max-w-lg",children:[i.jsx(Gt,{children:i.jsx(Vt,{children:f?"Редактировать тип процедуры":"Добавить тип процедуры"})}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{children:"Название"}),i.jsx($e,{name:"name",value:p.name||"",onChange:g,placeholder:"Название типа процедуры"})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{children:"Описание"}),i.jsx(rn,{name:"description",value:p.description||"",onChange:g,placeholder:"Описание"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{children:"Цена (₽)"}),i.jsx($e,{name:"price",type:"number",value:p.price||0,onChange:g,placeholder:"0"})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{children:"Длительность (мин)"}),i.jsx($e,{name:"duration",type:"number",value:p.duration||30,onChange:g,placeholder:"30"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{children:"Перерыв после (мин)"}),i.jsx($e,{name:"break_after",type:"number",value:p.break_after||0,onChange:g,placeholder:"0"})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{children:"Категория"}),i.jsxs(Tr,{value:((j=p.category_id)==null?void 0:j.toString())||"no-category",onValueChange:y,children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите категорию"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"no-category",children:"Без категории"}),r.map(N=>i.jsx(_t,{value:N.id.toString(),children:N.name},N.id.toString()))]})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Hn,{id:"is_active_procedure_type",checked:p.is_active,onCheckedChange:b}),i.jsx("label",{htmlFor:"is_active_procedure_type",children:"Активна"})]})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:()=>d(!1),children:"Отмена"}),i.jsx(ne,{onClick:S,children:"Сохранить"})]})]})})]})},vke=()=>{const{trackings:e,fetchTrackings:t,fetchTrackingsByStudio:r,createTracking:n,updateTracking:a,deleteTracking:s,isLoading:o}=dJ(),{services:l}=Oi(),{clients:c}=Gs(),{currentStudio:u}=Ba(),f=Oa().specialists||[],h=e,[p,v]=x.useState(!1),[m,g]=x.useState(null),[b,y]=x.useState({client_id:"",staff_id:"",service_id:"",products_used:"",notes:"",date:"",next_date:"",status:"active"});x.useEffect(()=>{(async()=>{u!=null&&u.id?(console.log("Загружаем процедуры для студии:",u.name,u.id),await r(u.id)):(console.log("Загружаем все процедуры (студия не выбрана)"),await t())})()},[u==null?void 0:u.id,t,r]);const w=async()=>{u!=null&&u.id?await r(u.id):await t()},_=()=>{g(null),y({client_id:"",staff_id:"",service_id:"",products_used:"",notes:"",date:"",next_date:"",status:"active"}),v(!0)},S=C=>{g(C),y({client_id:C.client_id||"",staff_id:C.staff_id||"",service_id:C.service_id||"",products_used:(C.products_used||[]).join(", "),notes:C.notes||"",date:C.date||"",next_date:C.next_date||"",status:C.status||"active"}),v(!0)},E=C=>{const{name:T,value:A}=C.target;y(B=>({...B,[T]:A}))},j=(C,T)=>{y(A=>({...A,[C]:T}))},N=async C=>{const T=l.find(B=>B.id===C.service_id),A={...C,name:T?T.name:"",status:C.status,service_id:C.service_id,serviceId:C.service_id,products_used:C.products_used?typeof C.products_used=="string"?C.products_used.split(",").map(B=>B.trim()).filter(Boolean):C.products_used:[]};await n(A),v(!1),w()},k=async C=>{window.confirm("Удалить процедуру?")&&(await s(String(C)),w())};return i.jsxs(i.Fragment,{children:[i.jsx(qe,{className:"mb-6",children:i.jsxs(Ge,{className:"pt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-semibold",children:"Процедуры клиентов"}),i.jsxs(ne,{variant:"outline",onClick:_,className:"flex items-center gap-2 text-primary border-primary hover:bg-primary/10",children:[i.jsx(ls,{className:"h-4 w-4"})," Добавить процедуру"]})]}),o?i.jsx("div",{className:"text-center py-6",children:"Загрузка..."}):h.length===0?i.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"Нет процедур"}):i.jsxs(ks,{children:[i.jsx(Ts,{children:i.jsxs(Lr,{children:[i.jsx(pt,{children:"Клиент"}),i.jsx(pt,{children:"Мастер"}),i.jsx(pt,{children:"Тип процедуры"}),i.jsx(pt,{children:"Дата"}),i.jsx(pt,{children:"Статус"}),i.jsx(pt,{className:"text-right",children:"Действия"})]})}),i.jsx(As,{children:h.map(C=>{var T,A,B;return i.jsxs(Lr,{children:[i.jsx(dt,{children:((T=c.find(R=>R.id===C.client_id))==null?void 0:T.full_name)||"-"}),i.jsx(dt,{children:((A=f.find(R=>R.id===C.staff_id))==null?void 0:A.name)||"-"}),i.jsx(dt,{children:((B=l.find(R=>R.id===(C.serviceId||C.service_id)))==null?void 0:B.name)||"-"}),i.jsx(dt,{children:C.date?Me(new Date(C.date),"dd.MM.yyyy"):"-"}),i.jsx(dt,{children:C.status}),i.jsxs(dt,{className:"text-right",children:[i.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>S(C),children:i.jsx(Jx,{className:"h-4 w-4"})}),i.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>k(C.id),children:i.jsx(Xp,{className:"h-4 w-4"})})]})]},C.id)})})]})]})}),i.jsx(qt,{open:p,onOpenChange:v,children:i.jsxs(Wt,{className:"sm:max-w-lg",children:[i.jsx(Gt,{children:i.jsx(Vt,{children:m?"Редактировать процедуру":"Добавить процедуру"})}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{children:"Клиент"}),i.jsxs(Tr,{value:b.client_id,onValueChange:C=>j("client_id",C),children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите клиента"})}),i.jsx(_r,{children:c.map(C=>i.jsx(_t,{value:C.id.toString(),children:C.full_name},C.id))})]})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{children:"Мастер"}),i.jsxs(Tr,{value:b.staff_id,onValueChange:C=>j("staff_id",C),children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите мастера"})}),i.jsx(_r,{children:f.map(C=>i.jsx(_t,{value:C.id.toString(),children:C.name},C.id))})]})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{children:"Тип процедуры"}),i.jsxs(Tr,{value:b.service_id,onValueChange:C=>j("service_id",C),children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите тип процедуры"})}),i.jsx(_r,{children:l.map(C=>i.jsx(_t,{value:C.id.toString(),children:C.name},C.id))})]})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{children:"Использованные продукты"}),i.jsx($e,{name:"products_used",value:b.products_used,onChange:E,placeholder:"Вводите через запятую"})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{children:"Заметки"}),i.jsx(rn,{name:"notes",value:b.notes,onChange:E,placeholder:"Заметки о процедуре"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{children:"Дата"}),i.jsx($e,{name:"date",type:"date",value:b.date,onChange:E})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{children:"Следующая дата"}),i.jsx($e,{name:"next_date",type:"date",value:b.next_date,onChange:E})]})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{children:"Статус"}),i.jsxs(Tr,{value:b.status,onValueChange:C=>j("status",C),children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите статус"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"active",children:"Активна"}),i.jsx(_t,{value:"completed",children:"Завершена"}),i.jsx(_t,{value:"schedule-soon",children:"Запланировать"}),i.jsx(_t,{value:"need-attention",children:"Требует внимания"})]})]})]})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:()=>v(!1),children:"Отмена"}),i.jsx(ne,{onClick:()=>N(b),children:"Сохранить"})]})]})})]})},xke=()=>{var X,O;const{services:e,categories:t,fetchServices:r,fetchServicesByStudio:n,fetchCategories:a,addService:s,updateService:o,deleteService:l,getServiceById:c}=Oi();Oa();const{currentStudio:u}=Ba(),[d,f]=x.useState([]),[h,p]=x.useState({name:"",description:"",price:0,duration:30,break_after:10,category_id:void 0,is_active:!0});x.useState(!1),x.useState(null);const[v,m]=x.useState(!1),[g,b]=x.useState(null),[y,w]=x.useState(!1),[_,S]=x.useState(null),E=x.useRef(null);x.useState(null),x.useState(""),x.useState({serviceIds:[]}),x.useState(!1);const[j,N]=x.useState(null);x.useEffect(()=>{(async()=>{u!=null&&u.id?(console.log("Загружаем услуги для студии:",u.name,u.id),await n(u.id)):(console.log("Загружаем все услуги (студия не выбрана)"),await r()),await a()})()},[u==null?void 0:u.id,r,n,a]),x.useEffect(()=>{e.length>0&&f(e.map(W=>({...W})))},[e]);const k=W=>{const{name:L,value:H,type:ee}=W.target;p(q=>({...q,[L]:ee==="number"?parseFloat(H):H}))},C=W=>{p(L=>({...L,category_id:W==="no-category"?null:W}))},T=W=>{if(!_)return;const{name:L,value:H,type:ee}=W.target;S(q=>q?{...q,[L]:ee==="number"?parseFloat(H):H}:null)},A=W=>{_&&S(L=>L?{...L,category_id:W==="no-category"?null:W}:null)},B=()=>{var W;(W=E.current)==null||W.click()},R=async()=>{if(!h.name||h.price===void 0||h.duration===void 0){Ae({title:"Ошибка",description:"Название, цена и длительность обязательны.",variant:"destructive"});return}let W;if(j)try{W=await F(j,`service_${Date.now()}`)}catch(H){Ae({title:"Ошибка загрузки изображения",description:H.message,variant:"destructive"});return}const L={id:"",name:h.name,description:h.description||null,price:Number(h.price),duration:Number(h.duration),break_after:Number(h.break_after||0),category_id:h.category_id==="no-category"?null:h.category_id,is_active:h.is_active===void 0?!0:h.is_active,image_url:W||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};try{await s(L),Ae({title:"Успешно",description:"Услуга добавлена."}),p({name:"",description:"",price:0,duration:30,category_id:void 0,is_active:!0,break_after:10}),N(null),E.current&&(E.current.value=""),K()}catch(H){console.error("Error adding service:",H),Ae({title:"Ошибка",description:"Не удалось добавить услугу.",variant:"destructive"})}},P=W=>{S(W),w(!0)},D=async()=>{if(!_||!_.name||_.price===void 0||_.duration===void 0){Ae({title:"Ошибка",description:"Название, цена и длительность обязательны.",variant:"destructive"});return}let W=_.image_url;if(j)try{W=await F(j,`service_${_.id}_${Date.now()}`)}catch(H){Ae({title:"Ошибка загрузки изображения",description:H.message,variant:"destructive"});return}const L={name:_.name,description:_.description||null,price:Number(_.price),duration:Number(_.duration),break_after:Number(_.break_after||0),category_id:_.category_id==="no-category"?null:_.category_id,is_active:_.is_active,image_url:W};try{await o(String(_.id),L),Ae({title:"Успешно",description:"Услуга обновлена."}),w(!1),S(null),N(null),E.current&&(E.current.value=""),K()}catch(H){console.error("Error updating service:",H),Ae({title:"Ошибка",description:"Не удалось обновить услугу.",variant:"destructive"})}},U=W=>{b(W),m(!0)},M=async()=>{if(g)try{await l(String(g)),Ae({title:"Успешно",description:"Услуга удалена."}),K()}catch(W){console.error("Error deleting service:",W),Ae({title:"Ошибка",description:"Не удалось удалить услугу.",variant:"destructive"})}m(!1),b(null)},F=async(W,L)=>(console.warn("uploadServiceImage is a stub and does not upload files!"),URL.createObjectURL(W)),K=async()=>{u!=null&&u.id?await n(u.id):await r()};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-beauty-800 mt-8 mb-6",children:"Управление услугами"}),i.jsxs(fa,{defaultValue:"services",className:"w-full",children:[i.jsxs(ta,{className:"grid w-full grid-cols-2 md:w-1/2 lg:w-1/3 mb-6",children:[i.jsx(Tt,{value:"services",children:"Услуги"}),i.jsx(Tt,{value:"procedureTypes",children:"Типы Процедур"})]}),i.jsx(Ft,{value:"services",children:i.jsxs("div",{className:"space-y-6",children:[i.jsx(pke,{}),i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx(gt,{className:"text-xl font-semibold text-beauty-700",children:"Добавление новой услуги"})}),i.jsxs(Ge,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"serviceName",className:"font-medium",children:"Название услуги"}),i.jsx($e,{id:"serviceName",name:"name",placeholder:"Название услуги",value:h.name||"",onChange:k})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"serviceCategory",className:"font-medium",children:"Категория услуги"}),i.jsxs(Tr,{value:((X=h.category_id)==null?void 0:X.toString())||"no-category",onValueChange:C,children:[i.jsx(wr,{id:"serviceCategory",children:i.jsx(Ar,{placeholder:"Выберите категорию"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"no-category",children:"Без категории"}),t.map(W=>i.jsx(_t,{value:W.id.toString(),children:W.name},W.id.toString()))]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"servicePrice",className:"font-medium",children:"Стоимость (₽)"}),i.jsx($e,{id:"servicePrice",name:"price",type:"number",placeholder:"0",value:h.price||0,onChange:k})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"serviceDuration",className:"font-medium",children:"Длительность (мин)"}),i.jsx($e,{id:"serviceDuration",name:"duration",type:"number",placeholder:"30",value:h.duration||30,onChange:k})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsxs("label",{htmlFor:"serviceBreakAfter",className:"font-medium",children:["Перерыв после (мин) ",i.jsx("span",{className:"text-xs text-gray-500",children:"(Техническое время между процедурами)"})]}),i.jsx($e,{id:"serviceBreakAfter",name:"break_after",type:"number",placeholder:"10",value:h.break_after||10,onChange:k})]}),i.jsxs("div",{className:"md:col-span-2 space-y-2",children:[i.jsx("label",{htmlFor:"serviceDescription",className:"font-medium",children:"Описание"}),i.jsx(rn,{id:"serviceDescription",name:"description",placeholder:"Описание услуги",value:h.description||"",onChange:k})]}),i.jsxs("div",{className:"md:col-span-2 flex items-center space-x-2",children:[i.jsx(Hn,{id:"is_active_service",checked:!!h.is_active,onCheckedChange:W=>p(L=>({...L,is_active:!!W}))}),i.jsx("label",{htmlFor:"is_active_service",children:"Услуга активна (будет отображаться клиентам)"})]}),i.jsxs("div",{className:"md:col-span-2 space-y-2",children:[i.jsx("label",{className:"font-medium",children:"Изображение услуги"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(ne,{variant:"outline",onClick:B,className:"flex items-center gap-2",children:[i.jsx(Iw,{className:"h-4 w-4"}),j?"Изменить файл":"Загрузить файл"]}),i.jsx("input",{type:"file",ref:E,className:"hidden",accept:"image/*",onChange:W=>N(W.target.files?W.target.files[0]:null)}),j&&i.jsx("span",{className:"text-sm text-gray-600",children:j.name}),(_==null?void 0:_.image_url)&&!j&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("img",{src:_.image_url,alt:_.name||"",className:"h-10 w-10 object-cover rounded"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Текущее"})]})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(ne,{onClick:R,className:"bg-primary hover:bg-primary/90 text-white",children:[i.jsx(ls,{className:"h-4 w-4 mr-2"})," Добавить услугу"]})})]})]}),i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx(gt,{className:"text-xl font-semibold text-beauty-700",children:"Список существующих услуг"})}),i.jsx(Ge,{children:i.jsxs(ks,{children:[i.jsx(Ts,{children:i.jsxs(Lr,{children:[i.jsx(pt,{className:"w-[100px]"}),i.jsx(pt,{children:"Название"}),i.jsx(pt,{children:"Категория"}),i.jsx(pt,{children:"Описание"}),i.jsx(pt,{children:"Стоимость"}),i.jsx(pt,{children:"Длительность"}),i.jsx(pt,{children:"Перерыв"}),i.jsx(pt,{children:"Активна"}),i.jsx(pt,{className:"text-right",children:"Действия"})]})}),i.jsx(As,{children:e.map(W=>{var L;return i.jsxs(Lr,{children:[i.jsx(dt,{children:W.image_url&&i.jsx("img",{src:W.image_url,alt:W.name||"",className:"h-12 w-12 object-cover rounded"})}),i.jsx(dt,{className:"font-medium",children:W.name}),i.jsx(dt,{children:((L=t.find(H=>H.id===W.category_id))==null?void 0:L.name)||"Без категории"}),i.jsx(dt,{className:"text-sm text-gray-600 truncate max-w-xs",children:W.description||"-"}),i.jsxs(dt,{children:[W.price," ₽"]}),i.jsxs(dt,{children:[W.duration," мин"]}),i.jsxs(dt,{children:[W.break_after||0," мин"]}),i.jsx(dt,{children:W.is_active?"Да":"Нет"}),i.jsxs(dt,{className:"text-right",children:[i.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>P(W),children:i.jsx(Jx,{className:"h-4 w-4"})}),i.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>U(W.id),children:i.jsx(Xp,{className:"h-4 w-4"})})]})]},W.id)})})]})})]})]})}),i.jsx(Ft,{value:"procedureTypes",children:i.jsxs("div",{className:"space-y-6",children:[i.jsx(mke,{}),i.jsx(gke,{})]})}),i.jsx(Ft,{value:"real-procedures",children:i.jsx(vke,{})})]}),i.jsx(qt,{open:y,onOpenChange:w,children:i.jsxs(Wt,{className:"sm:max-w-lg",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Редактирование услуги"}),i.jsx(fr,{children:'Внесите изменения и нажмите "Сохранить".'})]}),_&&i.jsxs("div",{className:"grid gap-6 py-4",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{htmlFor:"editServiceName",className:"font-medium",children:"Название услуги"}),i.jsx($e,{id:"editServiceName",name:"name",value:_.name||"",onChange:T})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{htmlFor:"editServiceCategory",className:"font-medium",children:"Категория услуги"}),i.jsxs(Tr,{value:((O=_.category_id)==null?void 0:O.toString())||"no-category",onValueChange:A,children:[i.jsx(wr,{id:"editServiceCategory",children:i.jsx(Ar,{placeholder:"Выберите категорию"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"no-category",children:"Без категории"}),t.map(W=>i.jsx(_t,{value:W.id.toString(),children:W.name},W.id.toString()))]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{htmlFor:"editServicePrice",className:"font-medium",children:"Стоимость (₽)"}),i.jsx($e,{id:"editServicePrice",name:"price",type:"number",value:_.price||0,onChange:T})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{htmlFor:"editServiceDuration",className:"font-medium",children:"Длительность (мин)"}),i.jsx($e,{id:"editServiceDuration",name:"duration",type:"number",value:_.duration||30,onChange:T})]})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{htmlFor:"editServiceBreakAfter",className:"font-medium",children:"Перерыв после (мин)"}),i.jsx($e,{id:"editServiceBreakAfter",name:"break_after",type:"number",value:_.break_after||0,onChange:T})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{htmlFor:"editServiceDescription",className:"font-medium",children:"Описание"}),i.jsx(rn,{id:"editServiceDescription",name:"description",value:_.description||"",onChange:T})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Hn,{id:"edit_is_active_service",checked:!!_.is_active,onCheckedChange:W=>S(L=>L?{...L,is_active:!!W}:null)}),i.jsx("label",{htmlFor:"edit_is_active_service",children:"Услуга активна"})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx("label",{className:"font-medium",children:"Изображение услуги"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(ne,{variant:"outline",onClick:B,className:"flex items-center gap-2",children:[i.jsx(Iw,{className:"h-4 w-4"}),j?"Изменить файл":"Загрузить файл"]}),i.jsx("input",{type:"file",ref:E,className:"hidden",accept:"image/*",onChange:W=>N(W.target.files?W.target.files[0]:null)}),j&&i.jsx("span",{className:"text-sm text-gray-600",children:j.name}),(_==null?void 0:_.image_url)&&!j&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("img",{src:_.image_url,alt:_.name||"",className:"h-10 w-10 object-cover rounded"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Текущее"})]})]})]})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:()=>{w(!1),N(null),E.current&&(E.current.value="")},children:"Отмена"}),i.jsx(ne,{onClick:D,className:"bg-primary hover:bg-primary/90 text-white",children:"Сохранить изменения"})]})]})}),i.jsx(Mg,{open:v,onOpenChange:m,children:i.jsxs(_m,{children:[i.jsxs(Sm,{children:[i.jsx(Em,{children:"Вы уверены?"}),i.jsx(Nm,{children:"Это действие не может быть отменено. Услуга будет удалена из системы."})]}),i.jsxs(jm,{children:[i.jsx(km,{children:"Отмена"}),i.jsx(Cm,{onClick:M,className:"bg-destructive hover:bg-destructive/90",children:"Удалить"})]})]})})]})};var yke=Array.isArray,si=yke,bke=typeof wa=="object"&&wa&&wa.Object===Object&&wa,fJ=bke,wke=fJ,_ke=typeof self=="object"&&self&&self.Object===Object&&self,Ske=wke||_ke||Function("return this")(),Dl=Ske,jke=Dl,Eke=jke.Symbol,jy=Eke,A5=jy,hJ=Object.prototype,Nke=hJ.hasOwnProperty,Cke=hJ.toString,L0=A5?A5.toStringTag:void 0;function kke(e){var t=Nke.call(e,L0),r=e[L0];try{e[L0]=void 0;var n=!0}catch{}var a=Cke.call(e);return n&&(t?e[L0]=r:delete e[L0]),a}var Tke=kke,Ake=Object.prototype,Pke=Ake.toString;function Oke(e){return Pke.call(e)}var Rke=Oke,P5=jy,Dke=Tke,Mke=Rke,Ike="[object Null]",$ke="[object Undefined]",O5=P5?P5.toStringTag:void 0;function Fke(e){return e==null?e===void 0?$ke:Ike:O5&&O5 in Object(e)?Dke(e):Mke(e)}var Ic=Fke;function Lke(e){return e!=null&&typeof e=="object"}var $c=Lke,Bke=Ic,Uke=$c,zke="[object Symbol]";function Wke(e){return typeof e=="symbol"||Uke(e)&&Bke(e)==zke}var n0=Wke,Vke=si,Hke=n0,qke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gke=/^\w*$/;function Kke(e,t){if(Vke(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Hke(e)?!0:Gke.test(e)||!qke.test(e)||t!=null&&e in Object(t)}var DD=Kke;function Xke(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ud=Xke;const a0=zr(ud);var Yke=Ic,Zke=ud,Jke="[object AsyncFunction]",Qke="[object Function]",eTe="[object GeneratorFunction]",tTe="[object Proxy]";function rTe(e){if(!Zke(e))return!1;var t=Yke(e);return t==Qke||t==eTe||t==Jke||t==tTe}var MD=rTe;const rr=zr(MD);var nTe=Dl,aTe=nTe["__core-js_shared__"],sTe=aTe,MN=sTe,R5=function(){var e=/[^.]+$/.exec(MN&&MN.keys&&MN.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function iTe(e){return!!R5&&R5 in e}var oTe=iTe,lTe=Function.prototype,cTe=lTe.toString;function uTe(e){if(e!=null){try{return cTe.call(e)}catch{}try{return e+""}catch{}}return""}var mJ=uTe,dTe=MD,fTe=oTe,hTe=ud,mTe=mJ,pTe=/[\\^$.*+?()[\]{}|]/g,gTe=/^\[object .+?Constructor\]$/,vTe=Function.prototype,xTe=Object.prototype,yTe=vTe.toString,bTe=xTe.hasOwnProperty,wTe=RegExp("^"+yTe.call(bTe).replace(pTe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _Te(e){if(!hTe(e)||fTe(e))return!1;var t=dTe(e)?wTe:gTe;return t.test(mTe(e))}var STe=_Te;function jTe(e,t){return e==null?void 0:e[t]}var ETe=jTe,NTe=STe,CTe=ETe;function kTe(e,t){var r=CTe(e,t);return NTe(r)?r:void 0}var Qf=kTe,TTe=Qf,ATe=TTe(Object,"create"),r2=ATe,D5=r2;function PTe(){this.__data__=D5?D5(null):{},this.size=0}var OTe=PTe;function RTe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var DTe=RTe,MTe=r2,ITe="__lodash_hash_undefined__",$Te=Object.prototype,FTe=$Te.hasOwnProperty;function LTe(e){var t=this.__data__;if(MTe){var r=t[e];return r===ITe?void 0:r}return FTe.call(t,e)?t[e]:void 0}var BTe=LTe,UTe=r2,zTe=Object.prototype,WTe=zTe.hasOwnProperty;function VTe(e){var t=this.__data__;return UTe?t[e]!==void 0:WTe.call(t,e)}var HTe=VTe,qTe=r2,GTe="__lodash_hash_undefined__";function KTe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=qTe&&t===void 0?GTe:t,this}var XTe=KTe,YTe=OTe,ZTe=DTe,JTe=BTe,QTe=HTe,eAe=XTe;function s0(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s0.prototype.clear=YTe;s0.prototype.delete=ZTe;s0.prototype.get=JTe;s0.prototype.has=QTe;s0.prototype.set=eAe;var tAe=s0;function rAe(){this.__data__=[],this.size=0}var nAe=rAe;function aAe(e,t){return e===t||e!==e&&t!==t}var ID=aAe,sAe=ID;function iAe(e,t){for(var r=e.length;r--;)if(sAe(e[r][0],t))return r;return-1}var n2=iAe,oAe=n2,lAe=Array.prototype,cAe=lAe.splice;function uAe(e){var t=this.__data__,r=oAe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():cAe.call(t,r,1),--this.size,!0}var dAe=uAe,fAe=n2;function hAe(e){var t=this.__data__,r=fAe(t,e);return r<0?void 0:t[r][1]}var mAe=hAe,pAe=n2;function gAe(e){return pAe(this.__data__,e)>-1}var vAe=gAe,xAe=n2;function yAe(e,t){var r=this.__data__,n=xAe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var bAe=yAe,wAe=nAe,_Ae=dAe,SAe=mAe,jAe=vAe,EAe=bAe;function i0(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}i0.prototype.clear=wAe;i0.prototype.delete=_Ae;i0.prototype.get=SAe;i0.prototype.has=jAe;i0.prototype.set=EAe;var a2=i0,NAe=Qf,CAe=Dl,kAe=NAe(CAe,"Map"),$D=kAe,M5=tAe,TAe=a2,AAe=$D;function PAe(){this.size=0,this.__data__={hash:new M5,map:new(AAe||TAe),string:new M5}}var OAe=PAe;function RAe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var DAe=RAe,MAe=DAe;function IAe(e,t){var r=e.__data__;return MAe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var s2=IAe,$Ae=s2;function FAe(e){var t=$Ae(this,e).delete(e);return this.size-=t?1:0,t}var LAe=FAe,BAe=s2;function UAe(e){return BAe(this,e).get(e)}var zAe=UAe,WAe=s2;function VAe(e){return WAe(this,e).has(e)}var HAe=VAe,qAe=s2;function GAe(e,t){var r=qAe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var KAe=GAe,XAe=OAe,YAe=LAe,ZAe=zAe,JAe=HAe,QAe=KAe;function o0(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}o0.prototype.clear=XAe;o0.prototype.delete=YAe;o0.prototype.get=ZAe;o0.prototype.has=JAe;o0.prototype.set=QAe;var FD=o0,pJ=FD,ePe="Expected a function";function LD(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(ePe);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var o=e.apply(this,n);return r.cache=s.set(a,o)||s,o};return r.cache=new(LD.Cache||pJ),r}LD.Cache=pJ;var gJ=LD;const tPe=zr(gJ);var rPe=gJ,nPe=500;function aPe(e){var t=rPe(e,function(n){return r.size===nPe&&r.clear(),n}),r=t.cache;return t}var sPe=aPe,iPe=sPe,oPe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lPe=/\\(\\)?/g,cPe=iPe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(oPe,function(r,n,a,s){t.push(a?s.replace(lPe,"$1"):n||r)}),t}),uPe=cPe;function dPe(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var BD=dPe,I5=jy,fPe=BD,hPe=si,mPe=n0,pPe=1/0,$5=I5?I5.prototype:void 0,F5=$5?$5.toString:void 0;function vJ(e){if(typeof e=="string")return e;if(hPe(e))return fPe(e,vJ)+"";if(mPe(e))return F5?F5.call(e):"";var t=e+"";return t=="0"&&1/e==-pPe?"-0":t}var gPe=vJ,vPe=gPe;function xPe(e){return e==null?"":vPe(e)}var xJ=xPe,yPe=si,bPe=DD,wPe=uPe,_Pe=xJ;function SPe(e,t){return yPe(e)?e:bPe(e,t)?[e]:wPe(_Pe(e))}var yJ=SPe,jPe=n0,EPe=1/0;function NPe(e){if(typeof e=="string"||jPe(e))return e;var t=e+"";return t=="0"&&1/e==-EPe?"-0":t}var i2=NPe,CPe=yJ,kPe=i2;function TPe(e,t){t=CPe(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[kPe(t[r++])];return r&&r==n?e:void 0}var UD=TPe,APe=UD;function PPe(e,t,r){var n=e==null?void 0:APe(e,t);return n===void 0?r:n}var bJ=PPe;const Ei=zr(bJ);function OPe(e){return e==null}var RPe=OPe;const Sr=zr(RPe);var DPe=Ic,MPe=si,IPe=$c,$Pe="[object String]";function FPe(e){return typeof e=="string"||!MPe(e)&&IPe(e)&&DPe(e)==$Pe}var LPe=FPe;const Ey=zr(LPe);var wJ={exports:{}},Qr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zD=Symbol.for("react.element"),WD=Symbol.for("react.portal"),o2=Symbol.for("react.fragment"),l2=Symbol.for("react.strict_mode"),c2=Symbol.for("react.profiler"),u2=Symbol.for("react.provider"),d2=Symbol.for("react.context"),BPe=Symbol.for("react.server_context"),f2=Symbol.for("react.forward_ref"),h2=Symbol.for("react.suspense"),m2=Symbol.for("react.suspense_list"),p2=Symbol.for("react.memo"),g2=Symbol.for("react.lazy"),UPe=Symbol.for("react.offscreen"),_J;_J=Symbol.for("react.module.reference");function ho(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case zD:switch(e=e.type,e){case o2:case c2:case l2:case h2:case m2:return e;default:switch(e=e&&e.$$typeof,e){case BPe:case d2:case f2:case g2:case p2:case u2:return e;default:return t}}case WD:return t}}}Qr.ContextConsumer=d2;Qr.ContextProvider=u2;Qr.Element=zD;Qr.ForwardRef=f2;Qr.Fragment=o2;Qr.Lazy=g2;Qr.Memo=p2;Qr.Portal=WD;Qr.Profiler=c2;Qr.StrictMode=l2;Qr.Suspense=h2;Qr.SuspenseList=m2;Qr.isAsyncMode=function(){return!1};Qr.isConcurrentMode=function(){return!1};Qr.isContextConsumer=function(e){return ho(e)===d2};Qr.isContextProvider=function(e){return ho(e)===u2};Qr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===zD};Qr.isForwardRef=function(e){return ho(e)===f2};Qr.isFragment=function(e){return ho(e)===o2};Qr.isLazy=function(e){return ho(e)===g2};Qr.isMemo=function(e){return ho(e)===p2};Qr.isPortal=function(e){return ho(e)===WD};Qr.isProfiler=function(e){return ho(e)===c2};Qr.isStrictMode=function(e){return ho(e)===l2};Qr.isSuspense=function(e){return ho(e)===h2};Qr.isSuspenseList=function(e){return ho(e)===m2};Qr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===o2||e===c2||e===l2||e===h2||e===m2||e===UPe||typeof e=="object"&&e!==null&&(e.$$typeof===g2||e.$$typeof===p2||e.$$typeof===u2||e.$$typeof===d2||e.$$typeof===f2||e.$$typeof===_J||e.getModuleId!==void 0)};Qr.typeOf=ho;wJ.exports=Qr;var SJ=wJ.exports,zPe=Ic,WPe=$c,VPe="[object Number]";function HPe(e){return typeof e=="number"||WPe(e)&&zPe(e)==VPe}var jJ=HPe;const qPe=zr(jJ);var GPe=jJ;function KPe(e){return GPe(e)&&e!=+e}var XPe=KPe;const Ny=zr(XPe);var _s=function(t){return t===0?0:t>0?1:-1},Ud=function(t){return Ey(t)&&t.indexOf("%")===t.length-1},ft=function(t){return qPe(t)&&!Ny(t)},ca=function(t){return ft(t)||Ey(t)},YPe=0,Cy=function(t){var r=++YPe;return"".concat(t||"").concat(r)},Ss=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ft(t)&&!Ey(t))return n;var s;if(Ud(t)){var o=t.indexOf("%");s=r*parseFloat(t.slice(0,o))/100}else s=+t;return Ny(s)&&(s=n),a&&s>r&&(s=r),s},cu=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},ZPe=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},nu=function(t,r){return ft(t)&&ft(r)?function(n){return t+n*(r-t)}:function(){return r}};function aP(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Ei(n,t))===r})}function Tm(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function sP(e){"@babel/helpers - typeof";return sP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sP(e)}var JPe=["viewBox","children"],QPe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],L5=["points","pathLength"],IN={svg:JPe,polygon:L5,polyline:L5},VD=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],p_=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(x.isValidElement(t)&&(n=t.props),!a0(n))return null;var a={};return Object.keys(n).forEach(function(s){VD.includes(s)&&(a[s]=r||function(o){return n[s](n,o)})}),a},eOe=function(t,r,n){return function(a){return t(r,n,a),null}},Mf=function(t,r,n){if(!a0(t)||sP(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(s){var o=t[s];VD.includes(s)&&typeof o=="function"&&(a||(a={}),a[s]=eOe(o,r,n))}),a},tOe=["children"],rOe=["children"];function B5(e,t){if(e==null)return{};var r=nOe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nOe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var U5={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},fc=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},z5=null,$N=null,HD=function e(t){if(t===z5&&Array.isArray($N))return $N;var r=[];return x.Children.forEach(t,function(n){Sr(n)||(SJ.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),$N=r,z5=t,r};function ro(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return fc(a)}):n=[fc(t)],HD(e).forEach(function(a){var s=Ei(a,"type.displayName")||Ei(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}function fi(e,t){var r=ro(e,t);return r&&r[0]}var W5=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!ft(n)||n<=0||!ft(a)||a<=0)},aOe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],sOe=function(t){return t&&t.type&&Ey(t.type)&&aOe.indexOf(t.type)>=0},iOe=function(t,r,n,a){var s,o=(s=IN==null?void 0:IN[a])!==null&&s!==void 0?s:[];return!rr(t)&&(a&&o.includes(r)||QPe.includes(r))||n&&VD.includes(r)},Qt=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(x.isValidElement(t)&&(a=t.props),!a0(a))return null;var s={};return Object.keys(a).forEach(function(o){var l;iOe((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(s[o]=a[o])}),s},iP=function e(t,r){if(t===r)return!0;var n=x.Children.count(t);if(n!==x.Children.count(r))return!1;if(n===0)return!0;if(n===1)return V5(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var s=t[a],o=r[a];if(Array.isArray(s)||Array.isArray(o)){if(!e(s,o))return!1}else if(!V5(s,o))return!1}return!0},V5=function(t,r){if(Sr(t)&&Sr(r))return!0;if(!Sr(t)&&!Sr(r)){var n=t.props||{},a=n.children,s=B5(n,tOe),o=r.props||{},l=o.children,c=B5(o,rOe);return a&&l?Tm(s,c)&&iP(a,l):!a&&!l?Tm(s,c):!1}return!1},H5=function(t,r){var n=[],a={};return HD(t).forEach(function(s,o){if(sOe(s))n.push(s);else if(s){var l=fc(s.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(s,l,o);n.push(f),a[l]=!0}}}),n},oOe=function(t){var r=t&&t.type;return r&&U5[r]?U5[r]:null},lOe=function(t,r){return HD(r).indexOf(t)},cOe=["children","width","height","viewBox","className","style","title","desc"];function oP(){return oP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oP.apply(this,arguments)}function uOe(e,t){if(e==null)return{};var r=dOe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dOe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function lP(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,s=e.className,o=e.style,l=e.title,c=e.desc,u=uOe(e,cOe),d=a||{width:r,height:n,x:0,y:0},f=hr("recharts-surface",s);return G.createElement("svg",oP({},Qt(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),G.createElement("title",null,l),G.createElement("desc",null,c),t)}var fOe=["children","className"];function cP(){return cP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cP.apply(this,arguments)}function hOe(e,t){if(e==null)return{};var r=mOe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mOe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Zr=G.forwardRef(function(e,t){var r=e.children,n=e.className,a=hOe(e,fOe),s=hr("recharts-layer",n);return G.createElement("g",cP({className:s},Qt(a,!0),{ref:t}),r)}),Xo=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function pOe(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++n<a;)s[n]=e[n+t];return s}var gOe=pOe,vOe=gOe;function xOe(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:vOe(e,t,r)}var yOe=xOe,bOe="\\ud800-\\udfff",wOe="\\u0300-\\u036f",_Oe="\\ufe20-\\ufe2f",SOe="\\u20d0-\\u20ff",jOe=wOe+_Oe+SOe,EOe="\\ufe0e\\ufe0f",NOe="\\u200d",COe=RegExp("["+NOe+bOe+jOe+EOe+"]");function kOe(e){return COe.test(e)}var EJ=kOe;function TOe(e){return e.split("")}var AOe=TOe,NJ="\\ud800-\\udfff",POe="\\u0300-\\u036f",OOe="\\ufe20-\\ufe2f",ROe="\\u20d0-\\u20ff",DOe=POe+OOe+ROe,MOe="\\ufe0e\\ufe0f",IOe="["+NJ+"]",uP="["+DOe+"]",dP="\\ud83c[\\udffb-\\udfff]",$Oe="(?:"+uP+"|"+dP+")",CJ="[^"+NJ+"]",kJ="(?:\\ud83c[\\udde6-\\uddff]){2}",TJ="[\\ud800-\\udbff][\\udc00-\\udfff]",FOe="\\u200d",AJ=$Oe+"?",PJ="["+MOe+"]?",LOe="(?:"+FOe+"(?:"+[CJ,kJ,TJ].join("|")+")"+PJ+AJ+")*",BOe=PJ+AJ+LOe,UOe="(?:"+[CJ+uP+"?",uP,kJ,TJ,IOe].join("|")+")",zOe=RegExp(dP+"(?="+dP+")|"+UOe+BOe,"g");function WOe(e){return e.match(zOe)||[]}var VOe=WOe,HOe=AOe,qOe=EJ,GOe=VOe;function KOe(e){return qOe(e)?GOe(e):HOe(e)}var XOe=KOe,YOe=yOe,ZOe=EJ,JOe=XOe,QOe=xJ;function eRe(e){return function(t){t=QOe(t);var r=ZOe(t)?JOe(t):void 0,n=r?r[0]:t.charAt(0),a=r?YOe(r,1).join(""):t.slice(1);return n[e]()+a}}var tRe=eRe,rRe=tRe,nRe=rRe("toUpperCase"),aRe=nRe;const v2=zr(aRe);function on(e){return function(){return e}}const OJ=Math.cos,g_=Math.sin,sl=Math.sqrt,v_=Math.PI,x2=2*v_,fP=Math.PI,hP=2*fP,kd=1e-6,sRe=hP-kd;function RJ(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function iRe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return RJ;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class oRe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?RJ:iRe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>kd)if(!(Math.abs(f*c-u*d)>kd)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,v=a-l,m=c*c+u*u,g=p*p+v*v,b=Math.sqrt(m),y=Math.sqrt(h),w=s*Math.tan((fP-Math.acos((m+h-g)/(2*b*y)))/2),_=w/y,S=w/b;Math.abs(_-1)>kd&&this._append`L${t+_*d},${r+_*f}`,this._append`A${s},${s},0,0,${+(f*p>d*v)},${this._x1=t+S*c},${this._y1=r+S*u}`}}arc(t,r,n,a,s,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,h=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>kd||Math.abs(this._y1-d)>kd)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%hP+hP),h>sRe?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>kd&&this._append`A${n},${n},0,${+(h>=fP)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function qD(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new oRe(t)}function GD(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function DJ(e){this._context=e}DJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function y2(e){return new DJ(e)}function MJ(e){return e[0]}function IJ(e){return e[1]}function $J(e,t){var r=on(!0),n=null,a=y2,s=null,o=qD(l);e=typeof e=="function"?e:e===void 0?MJ:on(e),t=typeof t=="function"?t:t===void 0?IJ:on(t);function l(c){var u,d=(c=GD(c)).length,f,h=!1,p;for(n==null&&(s=a(p=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,c),+t(f,u,c));if(p)return s=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:on(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:on(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:on(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function Wb(e,t,r){var n=null,a=on(!0),s=null,o=y2,l=null,c=qD(u);e=typeof e=="function"?e:e===void 0?MJ:on(+e),t=typeof t=="function"?t:on(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?IJ:on(+r);function u(f){var h,p,v,m=(f=GD(f)).length,g,b=!1,y,w=new Array(m),_=new Array(m);for(s==null&&(l=o(y=c())),h=0;h<=m;++h){if(!(h<m&&a(g=f[h],h,f))===b)if(b=!b)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=h-1;v>=p;--v)l.point(w[v],_[v]);l.lineEnd(),l.areaEnd()}b&&(w[h]=+e(g,h,f),_[h]=+t(g,h,f),l.point(n?+n(g,h,f):w[h],r?+r(g,h,f):_[h]))}if(y)return l=null,y+""||null}function d(){return $J().defined(a).curve(o).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:on(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:on(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:on(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:on(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:on(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:on(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:on(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class FJ{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function lRe(e){return new FJ(e,!0)}function cRe(e){return new FJ(e,!1)}const KD={draw(e,t){const r=sl(t/v_);e.moveTo(r,0),e.arc(0,0,r,0,x2)}},uRe={draw(e,t){const r=sl(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},LJ=sl(1/3),dRe=LJ*2,fRe={draw(e,t){const r=sl(t/dRe),n=r*LJ;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},hRe={draw(e,t){const r=sl(t),n=-r/2;e.rect(n,n,r,r)}},mRe=.8908130915292852,BJ=g_(v_/10)/g_(7*v_/10),pRe=g_(x2/10)*BJ,gRe=-OJ(x2/10)*BJ,vRe={draw(e,t){const r=sl(t*mRe),n=pRe*r,a=gRe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const o=x2*s/5,l=OJ(o),c=g_(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},FN=sl(3),xRe={draw(e,t){const r=-sl(t/(FN*3));e.moveTo(0,r*2),e.lineTo(-FN*r,-r),e.lineTo(FN*r,-r),e.closePath()}},Li=-.5,Bi=sl(3)/2,mP=1/sl(12),yRe=(mP/2+1)*3,bRe={draw(e,t){const r=sl(t/yRe),n=r/2,a=r*mP,s=n,o=r*mP+r,l=-s,c=o;e.moveTo(n,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(Li*n-Bi*a,Bi*n+Li*a),e.lineTo(Li*s-Bi*o,Bi*s+Li*o),e.lineTo(Li*l-Bi*c,Bi*l+Li*c),e.lineTo(Li*n+Bi*a,Li*a-Bi*n),e.lineTo(Li*s+Bi*o,Li*o-Bi*s),e.lineTo(Li*l+Bi*c,Li*c-Bi*l),e.closePath()}};function wRe(e,t){let r=null,n=qD(a);e=typeof e=="function"?e:on(e||KD),t=typeof t=="function"?t:on(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:on(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:on(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function x_(){}function y_(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function UJ(e){this._context=e}UJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:y_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:y_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _Re(e){return new UJ(e)}function zJ(e){this._context=e}zJ.prototype={areaStart:x_,areaEnd:x_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:y_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function SRe(e){return new zJ(e)}function WJ(e){this._context=e}WJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:y_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jRe(e){return new WJ(e)}function VJ(e){this._context=e}VJ.prototype={areaStart:x_,areaEnd:x_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ERe(e){return new VJ(e)}function q5(e){return e<0?-1:1}function G5(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(q5(s)+q5(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function K5(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function LN(e,t,r){var n=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-n)/3;e._context.bezierCurveTo(n+l,a+l*t,s-l,o-l*r,s,o)}function b_(e){this._context=e}b_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:LN(this,this._t0,K5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,LN(this,K5(this,r=G5(this,e,t)),r);break;default:LN(this,this._t0,r=G5(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function HJ(e){this._context=new qJ(e)}(HJ.prototype=Object.create(b_.prototype)).point=function(e,t){b_.prototype.point.call(this,t,e)};function qJ(e){this._context=e}qJ.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function NRe(e){return new b_(e)}function CRe(e){return new HJ(e)}function GJ(e){this._context=e}GJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=X5(e),a=X5(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function X5(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function kRe(e){return new GJ(e)}function b2(e,t){this._context=e,this._t=t}b2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function TRe(e){return new b2(e,.5)}function ARe(e){return new b2(e,0)}function PRe(e){return new b2(e,1)}function cp(e,t){if((o=e.length)>1)for(var r=1,n,a,s=e[t[0]],o,l=s.length;r<o;++r)for(a=s,s=e[t[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function pP(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function ORe(e,t){return e[t]}function RRe(e){const t=[];return t.key=e,t}function DRe(){var e=on([]),t=pP,r=cp,n=ORe;function a(s){var o=Array.from(e.apply(this,arguments),RRe),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,s)]).data=f;for(l=0,d=GD(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:on(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:on(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?pP:typeof s=="function"?s:on(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??cp,a):r},a}function MRe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}cp(e,t)}}function IRe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}cp(e,t)}}function $Re(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,v=0;v<l;++v){var m=e[t[v]],g=m[n][1]||0,b=m[n-1][1]||0;p+=g-b}c+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,cp(e,t)}}function Jv(e){"@babel/helpers - typeof";return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jv(e)}var FRe=["type","size","sizeType"];function gP(){return gP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gP.apply(this,arguments)}function Y5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Z5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y5(Object(r),!0).forEach(function(n){LRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LRe(e,t,r){return t=BRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BRe(e){var t=URe(e,"string");return Jv(t)=="symbol"?t:t+""}function URe(e,t){if(Jv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Jv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zRe(e,t){if(e==null)return{};var r=WRe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WRe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var KJ={symbolCircle:KD,symbolCross:uRe,symbolDiamond:fRe,symbolSquare:hRe,symbolStar:vRe,symbolTriangle:xRe,symbolWye:bRe},VRe=Math.PI/180,HRe=function(t){var r="symbol".concat(v2(t));return KJ[r]||KD},qRe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*VRe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},GRe=function(t,r){KJ["symbol".concat(v2(t))]=r},XD=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,s=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=zRe(t,FRe),u=Z5(Z5({},c),{},{type:n,size:s,sizeType:l}),d=function(){var g=HRe(n),b=wRe().type(g).size(qRe(s,l,n));return b()},f=u.className,h=u.cx,p=u.cy,v=Qt(u,!0);return h===+h&&p===+p&&s===+s?G.createElement("path",gP({},v,{className:hr("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:d()})):null};XD.registerSymbol=GRe;function up(e){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},up(e)}function vP(){return vP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vP.apply(this,arguments)}function J5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KRe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J5(Object(r),!0).forEach(function(n){Qv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YRe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YJ(n.key),n)}}function ZRe(e,t,r){return t&&YRe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function JRe(e,t,r){return t=w_(t),QRe(e,XJ()?Reflect.construct(t,r||[],w_(e).constructor):t.apply(e,r))}function QRe(e,t){if(t&&(up(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e4e(e)}function e4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XJ=function(){return!!e})()}function w_(e){return w_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w_(e)}function t4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xP(e,t)}function xP(e,t){return xP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xP(e,t)}function Qv(e,t,r){return t=YJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YJ(e){var t=r4e(e,"string");return up(t)=="symbol"?t:t+""}function r4e(e,t){if(up(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(up(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ui=32,YD=function(e){function t(){return XRe(this,t),JRe(this,t,arguments)}return t4e(t,e),ZRe(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,s=Ui/2,o=Ui/6,l=Ui/3,c=n.inactive?a:n.color;if(n.type==="plainline")return G.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:Ui,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return G.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Ui,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(n.type==="rect")return G.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Ui/8,"h").concat(Ui,"v").concat(Ui*3/4,"h").concat(-Ui,"z"),className:"recharts-legend-icon"});if(G.isValidElement(n.legendIcon)){var u=KRe({},n);return delete u.legendIcon,G.cloneElement(n.legendIcon,u)}return G.createElement(XD,{fill:c,cx:s,cy:s,size:Ui,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,s=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:Ui,height:Ui},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(p,v){var m=p.formatter||c,g=hr(Qv(Qv({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",p.inactive));if(p.type==="none")return null;var b=rr(p.value)?null:p.value;Xo(!rr(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=p.inactive?u:p.color;return G.createElement("li",vP({className:g,style:f,key:"legend-item-".concat(v)},Mf(n.props,p,v)),G.createElement(lP,{width:o,height:o,viewBox:d,style:h},n.renderIcon(p)),G.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},m?m(b,p,v):b))})}},{key:"render",value:function(){var n=this.props,a=n.payload,s=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return G.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(x.PureComponent);Qv(YD,"displayName","Legend");Qv(YD,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var n4e=a2;function a4e(){this.__data__=new n4e,this.size=0}var s4e=a4e;function i4e(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var o4e=i4e;function l4e(e){return this.__data__.get(e)}var c4e=l4e;function u4e(e){return this.__data__.has(e)}var d4e=u4e,f4e=a2,h4e=$D,m4e=FD,p4e=200;function g4e(e,t){var r=this.__data__;if(r instanceof f4e){var n=r.__data__;if(!h4e||n.length<p4e-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new m4e(n)}return r.set(e,t),this.size=r.size,this}var v4e=g4e,x4e=a2,y4e=s4e,b4e=o4e,w4e=c4e,_4e=d4e,S4e=v4e;function l0(e){var t=this.__data__=new x4e(e);this.size=t.size}l0.prototype.clear=y4e;l0.prototype.delete=b4e;l0.prototype.get=w4e;l0.prototype.has=_4e;l0.prototype.set=S4e;var ZJ=l0,j4e="__lodash_hash_undefined__";function E4e(e){return this.__data__.set(e,j4e),this}var N4e=E4e;function C4e(e){return this.__data__.has(e)}var k4e=C4e,T4e=FD,A4e=N4e,P4e=k4e;function __(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new T4e;++t<r;)this.add(e[t])}__.prototype.add=__.prototype.push=A4e;__.prototype.has=P4e;var JJ=__;function O4e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var QJ=O4e;function R4e(e,t){return e.has(t)}var eQ=R4e,D4e=JJ,M4e=QJ,I4e=eQ,$4e=1,F4e=2;function L4e(e,t,r,n,a,s){var o=r&$4e,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=s.get(e),d=s.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,p=r&F4e?new D4e:void 0;for(s.set(e,t),s.set(t,e);++f<l;){var v=e[f],m=t[f];if(n)var g=o?n(m,v,f,t,e,s):n(v,m,f,e,t,s);if(g!==void 0){if(g)continue;h=!1;break}if(p){if(!M4e(t,function(b,y){if(!I4e(p,y)&&(v===b||a(v,b,r,n,s)))return p.push(y)})){h=!1;break}}else if(!(v===m||a(v,m,r,n,s))){h=!1;break}}return s.delete(e),s.delete(t),h}var tQ=L4e,B4e=Dl,U4e=B4e.Uint8Array,z4e=U4e;function W4e(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var V4e=W4e;function H4e(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var ZD=H4e,Q5=jy,eL=z4e,q4e=ID,G4e=tQ,K4e=V4e,X4e=ZD,Y4e=1,Z4e=2,J4e="[object Boolean]",Q4e="[object Date]",eDe="[object Error]",tDe="[object Map]",rDe="[object Number]",nDe="[object RegExp]",aDe="[object Set]",sDe="[object String]",iDe="[object Symbol]",oDe="[object ArrayBuffer]",lDe="[object DataView]",tL=Q5?Q5.prototype:void 0,BN=tL?tL.valueOf:void 0;function cDe(e,t,r,n,a,s,o){switch(r){case lDe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case oDe:return!(e.byteLength!=t.byteLength||!s(new eL(e),new eL(t)));case J4e:case Q4e:case rDe:return q4e(+e,+t);case eDe:return e.name==t.name&&e.message==t.message;case nDe:case sDe:return e==t+"";case tDe:var l=K4e;case aDe:var c=n&Y4e;if(l||(l=X4e),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=Z4e,o.set(e,t);var d=G4e(l(e),l(t),n,a,s,o);return o.delete(e),d;case iDe:if(BN)return BN.call(e)==BN.call(t)}return!1}var uDe=cDe;function dDe(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var rQ=dDe,fDe=rQ,hDe=si;function mDe(e,t,r){var n=t(e);return hDe(e)?n:fDe(n,r(e))}var pDe=mDe;function gDe(e,t){for(var r=-1,n=e==null?0:e.length,a=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[a++]=o)}return s}var vDe=gDe;function xDe(){return[]}var yDe=xDe,bDe=vDe,wDe=yDe,_De=Object.prototype,SDe=_De.propertyIsEnumerable,rL=Object.getOwnPropertySymbols,jDe=rL?function(e){return e==null?[]:(e=Object(e),bDe(rL(e),function(t){return SDe.call(e,t)}))}:wDe,EDe=jDe;function NDe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var CDe=NDe,kDe=Ic,TDe=$c,ADe="[object Arguments]";function PDe(e){return TDe(e)&&kDe(e)==ADe}var ODe=PDe,nL=ODe,RDe=$c,nQ=Object.prototype,DDe=nQ.hasOwnProperty,MDe=nQ.propertyIsEnumerable,IDe=nL(function(){return arguments}())?nL:function(e){return RDe(e)&&DDe.call(e,"callee")&&!MDe.call(e,"callee")},JD=IDe,S_={exports:{}};function $De(){return!1}var FDe=$De;S_.exports;(function(e,t){var r=Dl,n=FDe,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(S_,S_.exports);var aQ=S_.exports,LDe=9007199254740991,BDe=/^(?:0|[1-9]\d*)$/;function UDe(e,t){var r=typeof e;return t=t??LDe,!!t&&(r=="number"||r!="symbol"&&BDe.test(e))&&e>-1&&e%1==0&&e<t}var QD=UDe,zDe=9007199254740991;function WDe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=zDe}var eM=WDe,VDe=Ic,HDe=eM,qDe=$c,GDe="[object Arguments]",KDe="[object Array]",XDe="[object Boolean]",YDe="[object Date]",ZDe="[object Error]",JDe="[object Function]",QDe="[object Map]",eMe="[object Number]",tMe="[object Object]",rMe="[object RegExp]",nMe="[object Set]",aMe="[object String]",sMe="[object WeakMap]",iMe="[object ArrayBuffer]",oMe="[object DataView]",lMe="[object Float32Array]",cMe="[object Float64Array]",uMe="[object Int8Array]",dMe="[object Int16Array]",fMe="[object Int32Array]",hMe="[object Uint8Array]",mMe="[object Uint8ClampedArray]",pMe="[object Uint16Array]",gMe="[object Uint32Array]",pn={};pn[lMe]=pn[cMe]=pn[uMe]=pn[dMe]=pn[fMe]=pn[hMe]=pn[mMe]=pn[pMe]=pn[gMe]=!0;pn[GDe]=pn[KDe]=pn[iMe]=pn[XDe]=pn[oMe]=pn[YDe]=pn[ZDe]=pn[JDe]=pn[QDe]=pn[eMe]=pn[tMe]=pn[rMe]=pn[nMe]=pn[aMe]=pn[sMe]=!1;function vMe(e){return qDe(e)&&HDe(e.length)&&!!pn[VDe(e)]}var xMe=vMe;function yMe(e){return function(t){return e(t)}}var sQ=yMe,j_={exports:{}};j_.exports;(function(e,t){var r=fJ,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===n,o=s&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(j_,j_.exports);var bMe=j_.exports,wMe=xMe,_Me=sQ,aL=bMe,sL=aL&&aL.isTypedArray,SMe=sL?_Me(sL):wMe,iQ=SMe,jMe=CDe,EMe=JD,NMe=si,CMe=aQ,kMe=QD,TMe=iQ,AMe=Object.prototype,PMe=AMe.hasOwnProperty;function OMe(e,t){var r=NMe(e),n=!r&&EMe(e),a=!r&&!n&&CMe(e),s=!r&&!n&&!a&&TMe(e),o=r||n||a||s,l=o?jMe(e.length,String):[],c=l.length;for(var u in e)(t||PMe.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||kMe(u,c)))&&l.push(u);return l}var RMe=OMe,DMe=Object.prototype;function MMe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||DMe;return e===r}var IMe=MMe;function $Me(e,t){return function(r){return e(t(r))}}var oQ=$Me,FMe=oQ,LMe=FMe(Object.keys,Object),BMe=LMe,UMe=IMe,zMe=BMe,WMe=Object.prototype,VMe=WMe.hasOwnProperty;function HMe(e){if(!UMe(e))return zMe(e);var t=[];for(var r in Object(e))VMe.call(e,r)&&r!="constructor"&&t.push(r);return t}var qMe=HMe,GMe=MD,KMe=eM;function XMe(e){return e!=null&&KMe(e.length)&&!GMe(e)}var ky=XMe,YMe=RMe,ZMe=qMe,JMe=ky;function QMe(e){return JMe(e)?YMe(e):ZMe(e)}var w2=QMe,eIe=pDe,tIe=EDe,rIe=w2;function nIe(e){return eIe(e,rIe,tIe)}var aIe=nIe,iL=aIe,sIe=1,iIe=Object.prototype,oIe=iIe.hasOwnProperty;function lIe(e,t,r,n,a,s){var o=r&sIe,l=iL(e),c=l.length,u=iL(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:oIe.call(t,h)))return!1}var p=s.get(e),v=s.get(t);if(p&&v)return p==t&&v==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=o;++f<c;){h=l[f];var b=e[h],y=t[h];if(n)var w=o?n(y,b,h,t,e,s):n(b,y,h,e,t,s);if(!(w===void 0?b===y||a(b,y,r,n,s):w)){m=!1;break}g||(g=h=="constructor")}if(m&&!g){var _=e.constructor,S=t.constructor;_!=S&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof S=="function"&&S instanceof S)&&(m=!1)}return s.delete(e),s.delete(t),m}var cIe=lIe,uIe=Qf,dIe=Dl,fIe=uIe(dIe,"DataView"),hIe=fIe,mIe=Qf,pIe=Dl,gIe=mIe(pIe,"Promise"),vIe=gIe,xIe=Qf,yIe=Dl,bIe=xIe(yIe,"Set"),lQ=bIe,wIe=Qf,_Ie=Dl,SIe=wIe(_Ie,"WeakMap"),jIe=SIe,yP=hIe,bP=$D,wP=vIe,_P=lQ,SP=jIe,cQ=Ic,c0=mJ,oL="[object Map]",EIe="[object Object]",lL="[object Promise]",cL="[object Set]",uL="[object WeakMap]",dL="[object DataView]",NIe=c0(yP),CIe=c0(bP),kIe=c0(wP),TIe=c0(_P),AIe=c0(SP),Td=cQ;(yP&&Td(new yP(new ArrayBuffer(1)))!=dL||bP&&Td(new bP)!=oL||wP&&Td(wP.resolve())!=lL||_P&&Td(new _P)!=cL||SP&&Td(new SP)!=uL)&&(Td=function(e){var t=cQ(e),r=t==EIe?e.constructor:void 0,n=r?c0(r):"";if(n)switch(n){case NIe:return dL;case CIe:return oL;case kIe:return lL;case TIe:return cL;case AIe:return uL}return t});var PIe=Td,UN=ZJ,OIe=tQ,RIe=uDe,DIe=cIe,fL=PIe,hL=si,mL=aQ,MIe=iQ,IIe=1,pL="[object Arguments]",gL="[object Array]",Vb="[object Object]",$Ie=Object.prototype,vL=$Ie.hasOwnProperty;function FIe(e,t,r,n,a,s){var o=hL(e),l=hL(t),c=o?gL:fL(e),u=l?gL:fL(t);c=c==pL?Vb:c,u=u==pL?Vb:u;var d=c==Vb,f=u==Vb,h=c==u;if(h&&mL(e)){if(!mL(t))return!1;o=!0,d=!1}if(h&&!d)return s||(s=new UN),o||MIe(e)?OIe(e,t,r,n,a,s):RIe(e,t,c,r,n,a,s);if(!(r&IIe)){var p=d&&vL.call(e,"__wrapped__"),v=f&&vL.call(t,"__wrapped__");if(p||v){var m=p?e.value():e,g=v?t.value():t;return s||(s=new UN),a(m,g,r,n,s)}}return h?(s||(s=new UN),DIe(e,t,r,n,a,s)):!1}var LIe=FIe,BIe=LIe,xL=$c;function uQ(e,t,r,n,a){return e===t?!0:e==null||t==null||!xL(e)&&!xL(t)?e!==e&&t!==t:BIe(e,t,r,n,uQ,a)}var tM=uQ,UIe=ZJ,zIe=tM,WIe=1,VIe=2;function HIe(e,t,r,n){var a=r.length,s=a,o=!n;if(e==null)return!s;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){l=r[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new UIe;if(n)var h=n(u,d,c,e,t,f);if(!(h===void 0?zIe(d,u,WIe|VIe,n,f):h))return!1}}return!0}var qIe=HIe,GIe=ud;function KIe(e){return e===e&&!GIe(e)}var dQ=KIe,XIe=dQ,YIe=w2;function ZIe(e){for(var t=YIe(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,XIe(a)]}return t}var JIe=ZIe;function QIe(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var fQ=QIe,e$e=qIe,t$e=JIe,r$e=fQ;function n$e(e){var t=t$e(e);return t.length==1&&t[0][2]?r$e(t[0][0],t[0][1]):function(r){return r===e||e$e(r,e,t)}}var a$e=n$e;function s$e(e,t){return e!=null&&t in Object(e)}var i$e=s$e,o$e=yJ,l$e=JD,c$e=si,u$e=QD,d$e=eM,f$e=i2;function h$e(e,t,r){t=o$e(t,e);for(var n=-1,a=t.length,s=!1;++n<a;){var o=f$e(t[n]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++n!=a?s:(a=e==null?0:e.length,!!a&&d$e(a)&&u$e(o,a)&&(c$e(e)||l$e(e)))}var m$e=h$e,p$e=i$e,g$e=m$e;function v$e(e,t){return e!=null&&g$e(e,t,p$e)}var x$e=v$e,y$e=tM,b$e=bJ,w$e=x$e,_$e=DD,S$e=dQ,j$e=fQ,E$e=i2,N$e=1,C$e=2;function k$e(e,t){return _$e(e)&&S$e(t)?j$e(E$e(e),t):function(r){var n=b$e(r,e);return n===void 0&&n===t?w$e(r,e):y$e(t,n,N$e|C$e)}}var T$e=k$e;function A$e(e){return e}var u0=A$e;function P$e(e){return function(t){return t==null?void 0:t[e]}}var O$e=P$e,R$e=UD;function D$e(e){return function(t){return R$e(t,e)}}var M$e=D$e,I$e=O$e,$$e=M$e,F$e=DD,L$e=i2;function B$e(e){return F$e(e)?I$e(L$e(e)):$$e(e)}var U$e=B$e,z$e=a$e,W$e=T$e,V$e=u0,H$e=si,q$e=U$e;function G$e(e){return typeof e=="function"?e:e==null?V$e:typeof e=="object"?H$e(e)?W$e(e[0],e[1]):z$e(e):q$e(e)}var Ml=G$e;function K$e(e,t,r,n){for(var a=e.length,s=r+(n?1:-1);n?s--:++s<a;)if(t(e[s],s,e))return s;return-1}var hQ=K$e;function X$e(e){return e!==e}var Y$e=X$e;function Z$e(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var J$e=Z$e,Q$e=hQ,e3e=Y$e,t3e=J$e;function r3e(e,t,r){return t===t?t3e(e,t,r):Q$e(e,e3e,r)}var n3e=r3e,a3e=n3e;function s3e(e,t){var r=e==null?0:e.length;return!!r&&a3e(e,t,0)>-1}var i3e=s3e;function o3e(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var l3e=o3e;function c3e(){}var u3e=c3e,zN=lQ,d3e=u3e,f3e=ZD,h3e=1/0,m3e=zN&&1/f3e(new zN([,-0]))[1]==h3e?function(e){return new zN(e)}:d3e,p3e=m3e,g3e=JJ,v3e=i3e,x3e=l3e,y3e=eQ,b3e=p3e,w3e=ZD,_3e=200;function S3e(e,t,r){var n=-1,a=v3e,s=e.length,o=!0,l=[],c=l;if(r)o=!1,a=x3e;else if(s>=_3e){var u=t?null:b3e(e);if(u)return w3e(u);o=!1,a=y3e,c=new g3e}else c=t?[]:l;e:for(;++n<s;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var j3e=S3e,E3e=Ml,N3e=j3e;function C3e(e,t){return e&&e.length?N3e(e,E3e(t)):[]}var k3e=C3e;const yL=zr(k3e);function mQ(e,t,r){return t===!0?yL(e,r):rr(t)?yL(e,t):e}function dp(e){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}var T3e=["ref"];function bL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bL(Object(r),!0).forEach(function(n){_2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gQ(n.key),n)}}function P3e(e,t,r){return t&&wL(e.prototype,t),r&&wL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function O3e(e,t,r){return t=E_(t),R3e(e,pQ()?Reflect.construct(t,r||[],E_(e).constructor):t.apply(e,r))}function R3e(e,t){if(t&&(dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D3e(e)}function D3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pQ=function(){return!!e})()}function E_(e){return E_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},E_(e)}function M3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jP(e,t)}function jP(e,t){return jP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jP(e,t)}function _2(e,t,r){return t=gQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gQ(e){var t=I3e(e,"string");return dp(t)=="symbol"?t:t+""}function I3e(e,t){if(dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $3e(e,t){if(e==null)return{};var r=F3e(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function F3e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function L3e(e){return e.value}function B3e(e,t){if(G.isValidElement(e))return G.cloneElement(e,t);if(typeof e=="function")return G.createElement(e,t);t.ref;var r=$3e(t,T3e);return G.createElement(YD,r)}var _L=1,ga=function(e){function t(){var r;A3e(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=O3e(this,t,[].concat(a)),_2(r,"lastBoundingBox",{width:-1,height:-1}),r}return M3e(t,e),P3e(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>_L||Math.abs(a.height-this.lastBoundingBox.height)>_L)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Wl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,s=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&s==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();h={top:((d||0)-v.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Wl(Wl({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,s=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=Wl(Wl({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return G.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){n.wrapperNode=p}},B3e(s,Wl(Wl({},this.props),{},{payload:mQ(d,u,L3e)})))}}],[{key:"getWithHeight",value:function(n,a){var s=Wl(Wl({},this.defaultProps),n.props),o=s.layout;return o==="vertical"&&ft(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(x.PureComponent);_2(ga,"displayName","Legend");_2(ga,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var SL=jy,U3e=JD,z3e=si,jL=SL?SL.isConcatSpreadable:void 0;function W3e(e){return z3e(e)||U3e(e)||!!(jL&&e&&e[jL])}var V3e=W3e,H3e=rQ,q3e=V3e;function vQ(e,t,r,n,a){var s=-1,o=e.length;for(r||(r=q3e),a||(a=[]);++s<o;){var l=e[s];t>0&&r(l)?t>1?vQ(l,t-1,r,n,a):H3e(a,l):n||(a[a.length]=l)}return a}var xQ=vQ;function G3e(e){return function(t,r,n){for(var a=-1,s=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(s[c],c,s)===!1)break}return t}}var K3e=G3e,X3e=K3e,Y3e=X3e(),Z3e=Y3e,J3e=Z3e,Q3e=w2;function eFe(e,t){return e&&J3e(e,t,Q3e)}var yQ=eFe,tFe=ky;function rFe(e,t){return function(r,n){if(r==null)return r;if(!tFe(r))return e(r,n);for(var a=r.length,s=t?a:-1,o=Object(r);(t?s--:++s<a)&&n(o[s],s,o)!==!1;);return r}}var nFe=rFe,aFe=yQ,sFe=nFe,iFe=sFe(aFe),rM=iFe,oFe=rM,lFe=ky;function cFe(e,t){var r=-1,n=lFe(e)?Array(e.length):[];return oFe(e,function(a,s,o){n[++r]=t(a,s,o)}),n}var bQ=cFe;function uFe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var dFe=uFe,EL=n0;function fFe(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,s=EL(e),o=t!==void 0,l=t===null,c=t===t,u=EL(t);if(!l&&!u&&!s&&e>t||s&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!a)return 1;if(!n&&!s&&!u&&e<t||u&&r&&a&&!n&&!s||l&&r&&a||!o&&a||!c)return-1}return 0}var hFe=fFe,mFe=hFe;function pFe(e,t,r){for(var n=-1,a=e.criteria,s=t.criteria,o=a.length,l=r.length;++n<o;){var c=mFe(a[n],s[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var gFe=pFe,WN=BD,vFe=UD,xFe=Ml,yFe=bQ,bFe=dFe,wFe=sQ,_Fe=gFe,SFe=u0,jFe=si;function EFe(e,t,r){t.length?t=WN(t,function(s){return jFe(s)?function(o){return vFe(o,s.length===1?s[0]:s)}:s}):t=[SFe];var n=-1;t=WN(t,wFe(xFe));var a=yFe(e,function(s,o,l){var c=WN(t,function(u){return u(s)});return{criteria:c,index:++n,value:s}});return bFe(a,function(s,o){return _Fe(s,o,r)})}var NFe=EFe;function CFe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var kFe=CFe,TFe=kFe,NL=Math.max;function AFe(e,t,r){return t=NL(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,s=NL(n.length-t,0),o=Array(s);++a<s;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),TFe(e,this,l)}}var PFe=AFe;function OFe(e){return function(){return e}}var RFe=OFe,DFe=Qf,MFe=function(){try{var e=DFe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),wQ=MFe,IFe=RFe,CL=wQ,$Fe=u0,FFe=CL?function(e,t){return CL(e,"toString",{configurable:!0,enumerable:!1,value:IFe(t),writable:!0})}:$Fe,LFe=FFe,BFe=800,UFe=16,zFe=Date.now;function WFe(e){var t=0,r=0;return function(){var n=zFe(),a=UFe-(n-r);if(r=n,a>0){if(++t>=BFe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var VFe=WFe,HFe=LFe,qFe=VFe,GFe=qFe(HFe),KFe=GFe,XFe=u0,YFe=PFe,ZFe=KFe;function JFe(e,t){return ZFe(YFe(e,t,XFe),e+"")}var QFe=JFe,e5e=ID,t5e=ky,r5e=QD,n5e=ud;function a5e(e,t,r){if(!n5e(r))return!1;var n=typeof t;return(n=="number"?t5e(r)&&r5e(t,r.length):n=="string"&&t in r)?e5e(r[t],e):!1}var S2=a5e,s5e=xQ,i5e=NFe,o5e=QFe,kL=S2,l5e=o5e(function(e,t){if(e==null)return[];var r=t.length;return r>1&&kL(e,t[0],t[1])?t=[]:r>2&&kL(t[0],t[1],t[2])&&(t=[t[0]]),i5e(e,s5e(t,1),[])}),c5e=l5e;const nM=zr(c5e);function ex(e){"@babel/helpers - typeof";return ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ex(e)}function EP(){return EP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EP.apply(this,arguments)}function u5e(e,t){return m5e(e)||h5e(e,t)||f5e(e,t)||d5e()}function d5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f5e(e,t){if(e){if(typeof e=="string")return TL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TL(e,t)}}function TL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h5e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function m5e(e){if(Array.isArray(e))return e}function AL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function VN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AL(Object(r),!0).forEach(function(n){p5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p5e(e,t,r){return t=g5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g5e(e){var t=v5e(e,"string");return ex(t)=="symbol"?t:t+""}function v5e(e,t){if(ex(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ex(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x5e(e){return Array.isArray(e)&&ca(e[0])&&ca(e[1])?e.join(" ~ "):e}var y5e=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,s=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,p=t.wrapperClassName,v=t.labelClassName,m=t.label,g=t.labelFormatter,b=t.accessibilityLayer,y=b===void 0?!1:b,w=function(){if(d&&d.length){var A={padding:0,margin:0},B=(h?nM(d,h):d).map(function(R,P){if(R.type==="none")return null;var D=VN({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},l),U=R.formatter||f||x5e,M=R.value,F=R.name,K=M,X=F;if(U&&K!=null&&X!=null){var O=U(M,F,R,P,d);if(Array.isArray(O)){var W=u5e(O,2);K=W[0],X=W[1]}else K=O}return G.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:D},ca(X)?G.createElement("span",{className:"recharts-tooltip-item-name"},X):null,ca(X)?G.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,G.createElement("span",{className:"recharts-tooltip-item-value"},K),G.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return G.createElement("ul",{className:"recharts-tooltip-item-list",style:A},B)}return null},_=VN({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),S=VN({margin:0},u),E=!Sr(m),j=E?m:"",N=hr("recharts-default-tooltip",p),k=hr("recharts-tooltip-label",v);E&&g&&d!==void 0&&d!==null&&(j=g(m,d));var C=y?{role:"status","aria-live":"assertive"}:{};return G.createElement("div",EP({className:N,style:_},C),G.createElement("p",{className:k,style:S},G.isValidElement(j)?j:"".concat(j)),w())};function tx(e){"@babel/helpers - typeof";return tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tx(e)}function Hb(e,t,r){return t=b5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b5e(e){var t=w5e(e,"string");return tx(t)=="symbol"?t:t+""}function w5e(e,t){if(tx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(tx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var B0="recharts-tooltip-wrapper",_5e={visibility:"hidden"};function S5e(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return hr(B0,Hb(Hb(Hb(Hb({},"".concat(B0,"-right"),ft(r)&&t&&ft(t.x)&&r>=t.x),"".concat(B0,"-left"),ft(r)&&t&&ft(t.x)&&r<t.x),"".concat(B0,"-bottom"),ft(n)&&t&&ft(t.y)&&n>=t.y),"".concat(B0,"-top"),ft(n)&&t&&ft(t.y)&&n<t.y))}function PL(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(s&&ft(s[n]))return s[n];var d=r[n]-l-a,f=r[n]+a;if(t[n])return o[n]?d:f;if(o[n]){var h=d,p=c[n];return h<p?Math.max(f,c[n]):Math.max(d,c[n])}var v=f+l,m=c[n]+u;return v>m?Math.max(d,c[n]):Math.max(f,c[n])}function j5e(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function E5e(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,s=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=PL({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=PL({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=j5e({translateX:d,translateY:f,useTranslate3d:l})):u=_5e,{cssProperties:u,cssClasses:S5e({translateX:d,translateY:f,coordinate:r})}}function fp(e){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(e)}function OL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function RL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OL(Object(r),!0).forEach(function(n){CP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C5e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SQ(n.key),n)}}function k5e(e,t,r){return t&&C5e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function T5e(e,t,r){return t=N_(t),A5e(e,_Q()?Reflect.construct(t,r||[],N_(e).constructor):t.apply(e,r))}function A5e(e,t){if(t&&(fp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P5e(e)}function P5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _Q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_Q=function(){return!!e})()}function N_(e){return N_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},N_(e)}function O5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NP(e,t)}function NP(e,t){return NP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},NP(e,t)}function CP(e,t,r){return t=SQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SQ(e){var t=R5e(e,"string");return fp(t)=="symbol"?t:t+""}function R5e(e,t){if(fp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DL=1,D5e=function(e){function t(){var r;N5e(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=T5e(this,t,[].concat(a)),CP(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),CP(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return O5e(t,e),k5e(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>DL||Math.abs(n.height-this.state.lastBoundingBox.height)>DL)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,p=a.offset,v=a.position,m=a.reverseDirection,g=a.useTranslate3d,b=a.viewBox,y=a.wrapperStyle,w=E5e({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:p,position:v,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:b}),_=w.cssClasses,S=w.cssProperties,E=RL(RL({transition:h&&s?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&f?"visible":"hidden",position:"absolute",top:0,left:0},y);return G.createElement("div",{tabIndex:-1,className:_,style:E,ref:function(N){n.wrapperNode=N}},u)}}])}(x.PureComponent),M5e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},hc={isSsr:M5e(),get:function(t){return hc[t]},set:function(t,r){if(typeof t=="string")hc[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(a){hc[a]=t[a]})}}};function hp(e){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hp(e)}function ML(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function IL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ML(Object(r),!0).forEach(function(n){aM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ML(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $5e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,EQ(n.key),n)}}function F5e(e,t,r){return t&&$5e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function L5e(e,t,r){return t=C_(t),B5e(e,jQ()?Reflect.construct(t,r||[],C_(e).constructor):t.apply(e,r))}function B5e(e,t){if(t&&(hp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U5e(e)}function U5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jQ=function(){return!!e})()}function C_(e){return C_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},C_(e)}function z5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kP(e,t)}function kP(e,t){return kP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},kP(e,t)}function aM(e,t,r){return t=EQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EQ(e){var t=W5e(e,"string");return hp(t)=="symbol"?t:t+""}function W5e(e,t){if(hp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V5e(e){return e.dataKey}function H5e(e,t){return G.isValidElement(e)?G.cloneElement(e,t):typeof e=="function"?G.createElement(e,t):G.createElement(y5e,t)}var Aa=function(e){function t(){return I5e(this,t),L5e(this,t,arguments)}return z5e(t,e),F5e(t,[{key:"render",value:function(){var n=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,p=a.offset,v=a.payload,m=a.payloadUniqBy,g=a.position,b=a.reverseDirection,y=a.useTranslate3d,w=a.viewBox,_=a.wrapperStyle,S=v??[];f&&S.length&&(S=mQ(v.filter(function(j){return j.value!=null&&(j.hide!==!0||n.props.includeHidden)}),m,V5e));var E=S.length>0;return G.createElement(D5e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:s,coordinate:d,hasPayload:E,offset:p,position:g,reverseDirection:b,useTranslate3d:y,viewBox:w,wrapperStyle:_},H5e(u,IL(IL({},this.props),{},{payload:S})))}}])}(x.PureComponent);aM(Aa,"displayName","Tooltip");aM(Aa,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!hc.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var q5e=Dl,G5e=function(){return q5e.Date.now()},K5e=G5e,X5e=/\s/;function Y5e(e){for(var t=e.length;t--&&X5e.test(e.charAt(t)););return t}var Z5e=Y5e,J5e=Z5e,Q5e=/^\s+/;function eLe(e){return e&&e.slice(0,J5e(e)+1).replace(Q5e,"")}var tLe=eLe,rLe=tLe,$L=ud,nLe=n0,FL=NaN,aLe=/^[-+]0x[0-9a-f]+$/i,sLe=/^0b[01]+$/i,iLe=/^0o[0-7]+$/i,oLe=parseInt;function lLe(e){if(typeof e=="number")return e;if(nLe(e))return FL;if($L(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=$L(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=rLe(e);var r=sLe.test(e);return r||iLe.test(e)?oLe(e.slice(2),r?2:8):aLe.test(e)?FL:+e}var NQ=lLe,cLe=ud,HN=K5e,LL=NQ,uLe="Expected a function",dLe=Math.max,fLe=Math.min;function hLe(e,t,r){var n,a,s,o,l,c,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(uLe);t=LL(t)||0,cLe(r)&&(d=!!r.leading,f="maxWait"in r,s=f?dLe(LL(r.maxWait)||0,t):s,h="trailing"in r?!!r.trailing:h);function p(E){var j=n,N=a;return n=a=void 0,u=E,o=e.apply(N,j),o}function v(E){return u=E,l=setTimeout(b,t),d?p(E):o}function m(E){var j=E-c,N=E-u,k=t-j;return f?fLe(k,s-N):k}function g(E){var j=E-c,N=E-u;return c===void 0||j>=t||j<0||f&&N>=s}function b(){var E=HN();if(g(E))return y(E);l=setTimeout(b,m(E))}function y(E){return l=void 0,h&&n?p(E):(n=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function _(){return l===void 0?o:y(HN())}function S(){var E=HN(),j=g(E);if(n=arguments,a=this,c=E,j){if(l===void 0)return v(c);if(f)return clearTimeout(l),l=setTimeout(b,t),p(c)}return l===void 0&&(l=setTimeout(b,t)),o}return S.cancel=w,S.flush=_,S}var mLe=hLe,pLe=mLe,gLe=ud,vLe="Expected a function";function xLe(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(vLe);return gLe(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),pLe(e,t,{leading:n,maxWait:t,trailing:a})}var yLe=xLe;const CQ=zr(yLe);function rx(e){"@babel/helpers - typeof";return rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rx(e)}function BL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BL(Object(r),!0).forEach(function(n){bLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bLe(e,t,r){return t=wLe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wLe(e){var t=_Le(e,"string");return rx(t)=="symbol"?t:t+""}function _Le(e,t){if(rx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(rx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SLe(e,t){return CLe(e)||NLe(e,t)||ELe(e,t)||jLe()}function jLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ELe(e,t){if(e){if(typeof e=="string")return UL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UL(e,t)}}function UL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function NLe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function CLe(e){if(Array.isArray(e))return e}var zi=x.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,s=e.width,o=s===void 0?"100%":s,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,p=e.children,v=e.debounce,m=v===void 0?0:v,g=e.id,b=e.className,y=e.onResize,w=e.style,_=w===void 0?{}:w,S=x.useRef(null),E=x.useRef();E.current=y,x.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var j=x.useState({containerWidth:a.width,containerHeight:a.height}),N=SLe(j,2),k=N[0],C=N[1],T=x.useCallback(function(B,R){C(function(P){var D=Math.round(B),U=Math.round(R);return P.containerWidth===D&&P.containerHeight===U?P:{containerWidth:D,containerHeight:U}})},[]);x.useEffect(function(){var B=function(F){var K,X=F[0].contentRect,O=X.width,W=X.height;T(O,W),(K=E.current)===null||K===void 0||K.call(E,O,W)};m>0&&(B=CQ(B,m,{trailing:!0,leading:!1}));var R=new ResizeObserver(B),P=S.current.getBoundingClientRect(),D=P.width,U=P.height;return T(D,U),R.observe(S.current),function(){R.disconnect()}},[T,m]);var A=x.useMemo(function(){var B=k.containerWidth,R=k.containerHeight;if(B<0||R<0)return null;Xo(Ud(o)||Ud(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Xo(!r||r>0,"The aspect(%s) must be greater than zero.",r);var P=Ud(o)?B:o,D=Ud(c)?R:c;r&&r>0&&(P?D=P/r:D&&(P=D*r),h&&D>h&&(D=h)),Xo(P>0||D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,D,o,c,d,f,r);var U=!Array.isArray(p)&&fc(p.type).endsWith("Chart");return G.Children.map(p,function(M){return SJ.isElement(M)?x.cloneElement(M,qb({width:P,height:D},U?{style:qb({height:"100%",width:"100%",maxHeight:D,maxWidth:P},M.props.style)}:{})):M})},[r,p,c,h,f,d,k,o]);return G.createElement("div",{id:g?"".concat(g):void 0,className:hr("recharts-responsive-container",b),style:qb(qb({},_),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:S},A)}),j2=function(t){return null};j2.displayName="Cell";function nx(e){"@babel/helpers - typeof";return nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nx(e)}function zL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function TP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zL(Object(r),!0).forEach(function(n){kLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kLe(e,t,r){return t=TLe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TLe(e){var t=ALe(e,"string");return nx(t)=="symbol"?t:t+""}function ALe(e,t){if(nx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(nx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Th={widthCache:{},cacheCount:0},PLe=2e3,OLe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},WL="recharts_measurement_span";function RLe(e){var t=TP({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Ig=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||hc.isSsr)return{width:0,height:0};var n=RLe(r),a=JSON.stringify({text:t,copyStyle:n});if(Th.widthCache[a])return Th.widthCache[a];try{var s=document.getElementById(WL);s||(s=document.createElement("span"),s.setAttribute("id",WL),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=TP(TP({},OLe),n);Object.assign(s.style,o),s.textContent="".concat(t);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return Th.widthCache[a]=c,++Th.cacheCount>PLe&&(Th.cacheCount=0,Th.widthCache={}),c}catch{return{width:0,height:0}}},DLe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function ax(e){"@babel/helpers - typeof";return ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ax(e)}function k_(e,t){return FLe(e)||$Le(e,t)||ILe(e,t)||MLe()}function MLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ILe(e,t){if(e){if(typeof e=="string")return VL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VL(e,t)}}function VL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $Le(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function FLe(e){if(Array.isArray(e))return e}function LLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ULe(n.key),n)}}function BLe(e,t,r){return t&&HL(e.prototype,t),r&&HL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ULe(e){var t=zLe(e,"string");return ax(t)=="symbol"?t:t+""}function zLe(e,t){if(ax(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ax(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var qL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,GL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,WLe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,VLe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,kQ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},HLe=Object.keys(kQ),Jh="NaN";function qLe(e,t){return e*kQ[t]}var Gb=function(){function e(t,r){LLe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!WLe.test(r)&&(this.num=NaN,this.unit=""),HLe.includes(r)&&(this.num=qLe(t,r),this.unit="px")}return BLe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=VLe.exec(r))!==null&&n!==void 0?n:[],s=k_(a,3),o=s[1],l=s[2];return new e(parseFloat(o),l??"")}}])}();function TQ(e){if(e.includes(Jh))return Jh;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=qL.exec(t))!==null&&r!==void 0?r:[],a=k_(n,4),s=a[1],o=a[2],l=a[3],c=Gb.parse(s??""),u=Gb.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Jh;t=t.replace(qL,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=GL.exec(t))!==null&&f!==void 0?f:[],p=k_(h,4),v=p[1],m=p[2],g=p[3],b=Gb.parse(v??""),y=Gb.parse(g??""),w=m==="+"?b.add(y):b.subtract(y);if(w.isNaN())return Jh;t=t.replace(GL,w.toString())}return t}var KL=/\(([^()]*)\)/;function GLe(e){for(var t=e;t.includes("(");){var r=KL.exec(t),n=k_(r,2),a=n[1];t=t.replace(KL,TQ(a))}return t}function KLe(e){var t=e.replace(/\s+/g,"");return t=GLe(t),t=TQ(t),t}function XLe(e){try{return KLe(e)}catch{return Jh}}function qN(e){var t=XLe(e.slice(5,-1));return t===Jh?"":t}var YLe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],ZLe=["dx","dy","angle","className","breakAll"];function AP(){return AP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AP.apply(this,arguments)}function XL(e,t){if(e==null)return{};var r=JLe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function JLe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function YL(e,t){return r6e(e)||t6e(e,t)||e6e(e,t)||QLe()}function QLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e6e(e,t){if(e){if(typeof e=="string")return ZL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZL(e,t)}}function ZL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function t6e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function r6e(e){if(Array.isArray(e))return e}var AQ=/[ \f\n\r\t\v\u2028\u2029]+/,PQ=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var s=[];Sr(r)||(n?s=r.toString().split(""):s=r.toString().split(AQ));var o=s.map(function(c){return{word:c,width:Ig(c,a).width}}),l=n?0:Ig(" ",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},n6e=function(t,r,n,a,s){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=ft(o),f=l,h=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce(function(D,U){var M=U.word,F=U.width,K=D[D.length-1];if(K&&(a==null||s||K.width+F+n<Number(a)))K.words.push(M),K.width+=F+n;else{var X={words:[M],width:F};D.push(X)}return D},[])},p=h(r),v=function(P){return P.reduce(function(D,U){return D.width>U.width?D:U})};if(!d)return p;for(var m="…",g=function(P){var D=f.slice(0,P),U=PQ({breakAll:u,style:c,children:D+m}).wordsWithComputedWidth,M=h(U),F=M.length>o||v(M).width>Number(a);return[F,M]},b=0,y=f.length-1,w=0,_;b<=y&&w<=f.length-1;){var S=Math.floor((b+y)/2),E=S-1,j=g(E),N=YL(j,2),k=N[0],C=N[1],T=g(S),A=YL(T,1),B=A[0];if(!k&&!B&&(b=S+1),k&&B&&(y=S-1),!k&&B){_=C;break}w++}return _||p},JL=function(t){var r=Sr(t)?[]:t.toString().split(AQ);return[{words:r}]},a6e=function(t){var r=t.width,n=t.scaleToFit,a=t.children,s=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!hc.isSsr){var c,u,d=PQ({breakAll:o,children:a,style:s});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return JL(a);return n6e({breakAll:o,children:a,maxLines:l,style:s},c,u,r,n)}return JL(a)},QL="#808080",If=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,s=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,p=h===void 0?"start":h,v=t.verticalAnchor,m=v===void 0?"end":v,g=t.fill,b=g===void 0?QL:g,y=XL(t,YLe),w=x.useMemo(function(){return a6e({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:f,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,f,y.style,y.width]),_=y.dx,S=y.dy,E=y.angle,j=y.className,N=y.breakAll,k=XL(y,ZLe);if(!ca(n)||!ca(s))return null;var C=n+(ft(_)?_:0),T=s+(ft(S)?S:0),A;switch(m){case"start":A=qN("calc(".concat(u,")"));break;case"middle":A=qN("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:A=qN("calc(".concat(w.length-1," * -").concat(l,")"));break}var B=[];if(f){var R=w[0].width,P=y.width;B.push("scale(".concat((ft(P)?P/R:1)/R,")"))}return E&&B.push("rotate(".concat(E,", ").concat(C,", ").concat(T,")")),B.length&&(k.transform=B.join(" ")),G.createElement("text",AP({},Qt(k,!0),{x:C,y:T,className:hr("recharts-text",j),textAnchor:p,fill:b.includes("url")?QL:b}),w.map(function(D,U){var M=D.words.join(N?"":" ");return G.createElement("tspan",{x:C,dy:U===0?A:l,key:"".concat(M,"-").concat(U)},M)}))};function Iu(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function s6e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function sM(e){let t,r,n;e.length!==2?(t=Iu,r=(l,c)=>Iu(e(l),c),n=(l,c)=>e(l)-c):(t=e===Iu||e===s6e?e:i6e,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:s}}function i6e(){return 0}function OQ(e){return e===null?NaN:+e}function*o6e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const l6e=sM(Iu),Ty=l6e.right;sM(OQ).center;class e6 extends Map{constructor(t,r=d6e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(t6(this,t))}has(t){return super.has(t6(this,t))}set(t,r){return super.set(c6e(this,t),r)}delete(t){return super.delete(u6e(this,t))}}function t6({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function c6e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function u6e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function d6e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function f6e(e=Iu){if(e===Iu)return RQ;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function RQ(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const h6e=Math.sqrt(50),m6e=Math.sqrt(10),p6e=Math.sqrt(2);function T_(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=h6e?10:s>=m6e?5:s>=p6e?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?T_(e,t,r*2):[l,c,u]}function PP(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,o]=n?T_(t,e,r):T_(e,t,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function OP(e,t,r){return t=+t,e=+e,r=+r,T_(e,t,r)[2]}function RP(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?OP(t,e,r):OP(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function r6(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function n6(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function DQ(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?RQ:f6e(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/c+h)),v=Math.min(n,Math.floor(t+(c-u)*f/c+h));DQ(e,t,p,v,a)}const s=e[t];let o=r,l=n;for(U0(e,r,t),a(e[n],s)>0&&U0(e,r,n);o<l;){for(U0(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[r],s)===0?U0(e,r,l):(++l,U0(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function U0(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function g6e(e,t,r){if(e=Float64Array.from(o6e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return n6(e);if(t>=1)return r6(e);var n,a=(n-1)*t,s=Math.floor(a),o=r6(DQ(e,s).subarray(0,s+1)),l=n6(e.subarray(s+1));return o+(l-o)*(a-s)}}function v6e(e,t,r=OQ){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),o=+r(e[s],s,e),l=+r(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function x6e(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function mo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Fc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const DP=Symbol("implicit");function iM(){var e=new e6,t=[],r=[],n=DP;function a(s){let o=e.get(s);if(o===void 0){if(n!==DP)return n;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new e6;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return iM(t,r).unknown(n)},mo.apply(a,arguments),a}function sx(){var e=iM().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=a<n,v=p?a:n,m=p?n:a;s=(m-v)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),v+=(m-v-s*(h-c))*d,o=s*(1-c),l&&(v=Math.round(v),o=Math.round(o));var g=x6e(h).map(function(b){return v+s*b});return r(p?g.reverse():g)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return sx(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},mo.apply(f(),arguments)}function MQ(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return MQ(t())},e}function $g(){return MQ(sx.apply(null,arguments).paddingInner(1))}function oM(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function IQ(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Ay(){}var ix=.7,A_=1/ix,Am="\\s*([+-]?\\d+)\\s*",ox="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",y6e=/^#([0-9a-f]{3,8})$/,b6e=new RegExp(`^rgb\\(${Am},${Am},${Am}\\)$`),w6e=new RegExp(`^rgb\\(${Nl},${Nl},${Nl}\\)$`),_6e=new RegExp(`^rgba\\(${Am},${Am},${Am},${ox}\\)$`),S6e=new RegExp(`^rgba\\(${Nl},${Nl},${Nl},${ox}\\)$`),j6e=new RegExp(`^hsl\\(${ox},${Nl},${Nl}\\)$`),E6e=new RegExp(`^hsla\\(${ox},${Nl},${Nl},${ox}\\)$`),a6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oM(Ay,lx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:s6,formatHex:s6,formatHex8:N6e,formatHsl:C6e,formatRgb:i6,toString:i6});function s6(){return this.rgb().formatHex()}function N6e(){return this.rgb().formatHex8()}function C6e(){return $Q(this).formatHsl()}function i6(){return this.rgb().formatRgb()}function lx(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=y6e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?o6(t):r===3?new Ys(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Kb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Kb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=b6e.exec(e))?new Ys(t[1],t[2],t[3],1):(t=w6e.exec(e))?new Ys(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_6e.exec(e))?Kb(t[1],t[2],t[3],t[4]):(t=S6e.exec(e))?Kb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=j6e.exec(e))?u6(t[1],t[2]/100,t[3]/100,1):(t=E6e.exec(e))?u6(t[1],t[2]/100,t[3]/100,t[4]):a6.hasOwnProperty(e)?o6(a6[e]):e==="transparent"?new Ys(NaN,NaN,NaN,0):null}function o6(e){return new Ys(e>>16&255,e>>8&255,e&255,1)}function Kb(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ys(e,t,r,n)}function k6e(e){return e instanceof Ay||(e=lx(e)),e?(e=e.rgb(),new Ys(e.r,e.g,e.b,e.opacity)):new Ys}function MP(e,t,r,n){return arguments.length===1?k6e(e):new Ys(e,t,r,n??1)}function Ys(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}oM(Ys,MP,IQ(Ay,{brighter(e){return e=e==null?A_:Math.pow(A_,e),new Ys(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ix:Math.pow(ix,e),new Ys(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ys(nf(this.r),nf(this.g),nf(this.b),P_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:l6,formatHex:l6,formatHex8:T6e,formatRgb:c6,toString:c6}));function l6(){return`#${zd(this.r)}${zd(this.g)}${zd(this.b)}`}function T6e(){return`#${zd(this.r)}${zd(this.g)}${zd(this.b)}${zd((isNaN(this.opacity)?1:this.opacity)*255)}`}function c6(){const e=P_(this.opacity);return`${e===1?"rgb(":"rgba("}${nf(this.r)}, ${nf(this.g)}, ${nf(this.b)}${e===1?")":`, ${e})`}`}function P_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function zd(e){return e=nf(e),(e<16?"0":"")+e.toString(16)}function u6(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new $o(e,t,r,n)}function $Q(e){if(e instanceof $o)return new $o(e.h,e.s,e.l,e.opacity);if(e instanceof Ay||(e=lx(e)),!e)return new $o;if(e instanceof $o)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new $o(o,l,c,e.opacity)}function A6e(e,t,r,n){return arguments.length===1?$Q(e):new $o(e,t,r,n??1)}function $o(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}oM($o,A6e,IQ(Ay,{brighter(e){return e=e==null?A_:Math.pow(A_,e),new $o(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ix:Math.pow(ix,e),new $o(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Ys(GN(e>=240?e-240:e+120,a,n),GN(e,a,n),GN(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new $o(d6(this.h),Xb(this.s),Xb(this.l),P_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=P_(this.opacity);return`${e===1?"hsl(":"hsla("}${d6(this.h)}, ${Xb(this.s)*100}%, ${Xb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function d6(e){return e=(e||0)%360,e<0?e+360:e}function Xb(e){return Math.max(0,Math.min(1,e||0))}function GN(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const lM=e=>()=>e;function P6e(e,t){return function(r){return e+r*t}}function O6e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function R6e(e){return(e=+e)==1?FQ:function(t,r){return r-t?O6e(t,r,e):lM(isNaN(t)?r:t)}}function FQ(e,t){var r=t-e;return r?P6e(e,r):lM(isNaN(e)?t:e)}const f6=function e(t){var r=R6e(t);function n(a,s){var o=r((a=MP(a)).r,(s=MP(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=FQ(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function D6e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function M6e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function I6e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=d0(e[o],t[o]);for(;o<r;++o)s[o]=t[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function $6e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function O_(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function F6e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=d0(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var IP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,KN=new RegExp(IP.source,"g");function L6e(e){return function(){return e}}function B6e(e){return function(t){return e(t)+""}}function U6e(e,t){var r=IP.lastIndex=KN.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=IP.exec(e))&&(a=KN.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:O_(n,a)})),r=KN.lastIndex;return r<t.length&&(s=t.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?B6e(c[0].x):L6e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function d0(e,t){var r=typeof t,n;return t==null||r==="boolean"?lM(t):(r==="number"?O_:r==="string"?(n=lx(t))?(t=n,f6):U6e:t instanceof lx?f6:t instanceof Date?$6e:M6e(t)?D6e:Array.isArray(t)?I6e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?F6e:O_)(e,t)}function cM(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function z6e(e,t){t===void 0&&(t=e,e=d0);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function W6e(e){return function(){return e}}function R_(e){return+e}var h6=[0,1];function js(e){return e}function $P(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:W6e(isNaN(t)?NaN:.5)}function V6e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function H6e(e,t,r){var n=e[0],a=e[1],s=t[0],o=t[1];return a<n?(n=$P(a,n),s=r(o,s)):(n=$P(n,a),s=r(s,o)),function(l){return s(n(l))}}function q6e(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=$P(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(l){var c=Ty(e,l,1,n)-1;return s[c](a[c](l))}}function Py(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function E2(){var e=h6,t=h6,r=d0,n,a,s,o=js,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==js&&(o=V6e(e[0],e[h-1])),l=h>2?q6e:H6e,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=l(t,e.map(n),O_)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,R_),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=cM,d()},f.clamp=function(h){return arguments.length?(o=h?!0:js,d()):o!==js},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return n=h,a=p,d()}}function uM(){return E2()(js,js)}function G6e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function D_(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function mp(e){return e=D_(Math.abs(e)),e?e[1]:NaN}function K6e(e,t){return function(r,n){for(var a=r.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function X6e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Y6e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cx(e){if(!(t=Y6e.exec(e)))throw new Error("invalid format: "+e);var t;return new dM({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}cx.prototype=dM.prototype;function dM(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}dM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Z6e(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var LQ;function J6e(e,t){var r=D_(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(LQ=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+D_(e,Math.max(0,t+s-1))[0]}function m6(e,t){var r=D_(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const p6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:G6e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>m6(e*100,t),r:m6,s:J6e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function g6(e){return e}var v6=Array.prototype.map,x6=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Q6e(e){var t=e.grouping===void 0||e.thousands===void 0?g6:K6e(v6.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?g6:X6e(v6.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=cx(f);var h=f.fill,p=f.align,v=f.sign,m=f.symbol,g=f.zero,b=f.width,y=f.comma,w=f.precision,_=f.trim,S=f.type;S==="n"?(y=!0,S="g"):p6[S]||(w===void 0&&(w=12),_=!0,S="g"),(g||h==="0"&&p==="=")&&(g=!0,h="0",p="=");var E=m==="$"?r:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",j=m==="$"?n:/[%p]/.test(S)?o:"",N=p6[S],k=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function C(T){var A=E,B=j,R,P,D;if(S==="c")B=N(T)+B,T="";else{T=+T;var U=T<0||1/T<0;if(T=isNaN(T)?c:N(Math.abs(T),w),_&&(T=Z6e(T)),U&&+T==0&&v!=="+"&&(U=!1),A=(U?v==="("?v:l:v==="-"||v==="("?"":v)+A,B=(S==="s"?x6[8+LQ/3]:"")+B+(U&&v==="("?")":""),k){for(R=-1,P=T.length;++R<P;)if(D=T.charCodeAt(R),48>D||D>57){B=(D===46?a+T.slice(R+1):T.slice(R))+B,T=T.slice(0,R);break}}}y&&!g&&(T=t(T,1/0));var M=A.length+T.length+B.length,F=M<b?new Array(b-M+1).join(h):"";switch(y&&g&&(T=t(F+T,F.length?b-B.length:1/0),F=""),p){case"<":T=A+T+B+F;break;case"=":T=A+F+T+B;break;case"^":T=F.slice(0,M=F.length>>1)+A+T+B+F.slice(M);break;default:T=F+A+T+B;break}return s(T)}return C.toString=function(){return f+""},C}function d(f,h){var p=u((f=cx(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(mp(h)/3)))*3,m=Math.pow(10,-v),g=x6[8+v/3];return function(b){return p(m*b)+g}}return{format:u,formatPrefix:d}}var Yb,fM,BQ;e8e({thousands:",",grouping:[3],currency:["$",""]});function e8e(e){return Yb=Q6e(e),fM=Yb.format,BQ=Yb.formatPrefix,Yb}function t8e(e){return Math.max(0,-mp(Math.abs(e)))}function r8e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mp(t)/3)))*3-mp(Math.abs(e)))}function n8e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mp(t)-mp(e))+1}function UQ(e,t,r,n){var a=RP(e,t,r),s;switch(n=cx(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=r8e(a,o))&&(n.precision=s),BQ(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=n8e(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=t8e(a))&&(n.precision=s-(n.type==="%")*2);break}}return fM(n)}function dd(e){var t=e.domain;return e.ticks=function(r){var n=t();return PP(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return UQ(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,o=n[a],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=OP(o,l,r),u===c)return n[a]=o,n[s]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function M_(){var e=uM();return e.copy=function(){return Py(e,M_())},mo.apply(e,arguments),dd(e)}function zQ(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,R_),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return zQ(e).unknown(t)},e=arguments.length?Array.from(e,R_):[0,1],dd(r)}function WQ(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),e[r]=t.floor(a),e[n]=t.ceil(s),e}function y6(e){return Math.log(e)}function b6(e){return Math.exp(e)}function a8e(e){return-Math.log(-e)}function s8e(e){return-Math.exp(-e)}function i8e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function o8e(e){return e===10?i8e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function l8e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function w6(e){return(t,r)=>-e(-t,r)}function hM(e){const t=e(y6,b6),r=t.domain;let n=10,a,s;function o(){return a=l8e(n),s=o8e(n),r()[0]<0?(a=w6(a),s=w6(s),e(a8e,s8e)):e(y6,b6),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),p=a(d),v,m;const g=l==null?10:+l;let b=[];if(!(n%1)&&p-h<g){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(v=1;v<n;++v)if(m=h<0?v/s(-h):v*s(h),!(m<u)){if(m>d)break;b.push(m)}}else for(;h<=p;++h)for(v=n-1;v>=1;--v)if(m=h>0?v/s(-h):v*s(h),!(m<u)){if(m>d)break;b.push(m)}b.length*2<g&&(b=PP(u,d,g))}else b=PP(h,p,Math.min(p-h,g)).map(s);return f?b.reverse():b},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=cx(c)).precision==null&&(c.trim=!0),c=fM(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(WQ(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function VQ(){const e=hM(E2()).domain([1,10]);return e.copy=()=>Py(e,VQ()).base(e.base()),mo.apply(e,arguments),e}function _6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function S6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function mM(e){var t=1,r=e(_6(t),S6(t));return r.constant=function(n){return arguments.length?e(_6(t=+n),S6(t)):t},dd(r)}function HQ(){var e=mM(E2());return e.copy=function(){return Py(e,HQ()).constant(e.constant())},mo.apply(e,arguments)}function j6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function c8e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function u8e(e){return e<0?-e*e:e*e}function pM(e){var t=e(js,js),r=1;function n(){return r===1?e(js,js):r===.5?e(c8e,u8e):e(j6(r),j6(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},dd(t)}function gM(){var e=pM(E2());return e.copy=function(){return Py(e,gM()).exponent(e.exponent())},mo.apply(e,arguments),e}function d8e(){return gM.apply(null,arguments).exponent(.5)}function E6(e){return Math.sign(e)*e*e}function f8e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function qQ(){var e=uM(),t=[0,1],r=!1,n;function a(s){var o=f8e(e(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return e.invert(E6(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,R_)).map(E6)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return qQ(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},mo.apply(a,arguments),dd(a)}function GQ(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=v6e(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:t[Ty(r,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Iu),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return GQ().domain(e).range(t).unknown(n)},mo.apply(s,arguments)}function KQ(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[Ty(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return KQ().domain([e,t]).range(a).unknown(s)},mo.apply(dd(o),arguments)}function XQ(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[Ty(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return XQ().domain(e).range(t).unknown(r)},mo.apply(a,arguments)}const XN=new Date,YN=new Date;function ma(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},a.filter=s=>ma(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),r&&(a.count=(s,o)=>(XN.setTime(+s),YN.setTime(+o),e(XN),e(YN),Math.floor(r(XN,YN))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const I_=ma(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);I_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ma(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):I_);I_.range;const sc=1e3,Ji=sc*60,ic=Ji*60,Ec=ic*24,vM=Ec*7,N6=Ec*30,ZN=Ec*365,Wd=ma(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*sc)},(e,t)=>(t-e)/sc,e=>e.getUTCSeconds());Wd.range;const xM=ma(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sc)},(e,t)=>{e.setTime(+e+t*Ji)},(e,t)=>(t-e)/Ji,e=>e.getMinutes());xM.range;const yM=ma(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ji)},(e,t)=>(t-e)/Ji,e=>e.getUTCMinutes());yM.range;const bM=ma(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sc-e.getMinutes()*Ji)},(e,t)=>{e.setTime(+e+t*ic)},(e,t)=>(t-e)/ic,e=>e.getHours());bM.range;const wM=ma(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ic)},(e,t)=>(t-e)/ic,e=>e.getUTCHours());wM.range;const Oy=ma(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ji)/Ec,e=>e.getDate()-1);Oy.range;const N2=ma(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ec,e=>e.getUTCDate()-1);N2.range;const YQ=ma(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ec,e=>Math.floor(e/Ec));YQ.range;function eh(e){return ma(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ji)/vM)}const C2=eh(0),$_=eh(1),h8e=eh(2),m8e=eh(3),pp=eh(4),p8e=eh(5),g8e=eh(6);C2.range;$_.range;h8e.range;m8e.range;pp.range;p8e.range;g8e.range;function th(e){return ma(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/vM)}const k2=th(0),F_=th(1),v8e=th(2),x8e=th(3),gp=th(4),y8e=th(5),b8e=th(6);k2.range;F_.range;v8e.range;x8e.range;gp.range;y8e.range;b8e.range;const _M=ma(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());_M.range;const SM=ma(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());SM.range;const Nc=ma(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Nc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ma(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Nc.range;const Cc=ma(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Cc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ma(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Cc.range;function ZQ(e,t,r,n,a,s){const o=[[Wd,1,sc],[Wd,5,5*sc],[Wd,15,15*sc],[Wd,30,30*sc],[s,1,Ji],[s,5,5*Ji],[s,15,15*Ji],[s,30,30*Ji],[a,1,ic],[a,3,3*ic],[a,6,6*ic],[a,12,12*ic],[n,1,Ec],[n,2,2*Ec],[r,1,vM],[t,1,N6],[t,3,3*N6],[e,1,ZN]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),v=p?p.range(u,+d+1):[];return h?v.reverse():v}function c(u,d,f){const h=Math.abs(d-u)/f,p=sM(([,,g])=>g).right(o,h);if(p===o.length)return e.every(RP(u/ZN,d/ZN,f));if(p===0)return I_.every(Math.max(RP(u,d,f),1));const[v,m]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return v.every(m)}return[l,c]}const[w8e,_8e]=ZQ(Cc,SM,k2,YQ,wM,yM),[S8e,j8e]=ZQ(Nc,_M,C2,Oy,bM,xM);function JN(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function QN(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function z0(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function E8e(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=W0(a),d=V0(a),f=W0(s),h=V0(s),p=W0(o),v=V0(o),m=W0(l),g=V0(l),b=W0(c),y=V0(c),w={a:U,A:M,b:F,B:K,c:null,d:O6,e:O6,f:K8e,g:aBe,G:iBe,H:H8e,I:q8e,j:G8e,L:JQ,m:X8e,M:Y8e,p:X,q:O,Q:M6,s:I6,S:Z8e,u:J8e,U:Q8e,V:eBe,w:tBe,W:rBe,x:null,X:null,y:nBe,Y:sBe,Z:oBe,"%":D6},_={a:W,A:L,b:H,B:ee,c:null,d:R6,e:R6,f:dBe,g:wBe,G:SBe,H:lBe,I:cBe,j:uBe,L:eee,m:fBe,M:hBe,p:q,q:Z,Q:M6,s:I6,S:mBe,u:pBe,U:gBe,V:vBe,w:xBe,W:yBe,x:null,X:null,y:bBe,Y:_Be,Z:jBe,"%":D6},S={a:C,A:T,b:A,B,c:R,d:A6,e:A6,f:U8e,g:T6,G:k6,H:P6,I:P6,j:$8e,L:B8e,m:I8e,M:F8e,p:k,q:M8e,Q:W8e,s:V8e,S:L8e,u:A8e,U:P8e,V:O8e,w:T8e,W:R8e,x:P,X:D,y:T6,Y:k6,Z:D8e,"%":z8e};w.x=E(r,w),w.X=E(n,w),w.c=E(t,w),_.x=E(r,_),_.X=E(n,_),_.c=E(t,_);function E(I,Q){return function(ve){var z=[],we=-1,Re=0,Pe=I.length,De,Ne,J;for(ve instanceof Date||(ve=new Date(+ve));++we<Pe;)I.charCodeAt(we)===37&&(z.push(I.slice(Re,we)),(Ne=C6[De=I.charAt(++we)])!=null?De=I.charAt(++we):Ne=De==="e"?" ":"0",(J=Q[De])&&(De=J(ve,Ne)),z.push(De),Re=we+1);return z.push(I.slice(Re,we)),z.join("")}}function j(I,Q){return function(ve){var z=z0(1900,void 0,1),we=N(z,I,ve+="",0),Re,Pe;if(we!=ve.length)return null;if("Q"in z)return new Date(z.Q);if("s"in z)return new Date(z.s*1e3+("L"in z?z.L:0));if(Q&&!("Z"in z)&&(z.Z=0),"p"in z&&(z.H=z.H%12+z.p*12),z.m===void 0&&(z.m="q"in z?z.q:0),"V"in z){if(z.V<1||z.V>53)return null;"w"in z||(z.w=1),"Z"in z?(Re=QN(z0(z.y,0,1)),Pe=Re.getUTCDay(),Re=Pe>4||Pe===0?F_.ceil(Re):F_(Re),Re=N2.offset(Re,(z.V-1)*7),z.y=Re.getUTCFullYear(),z.m=Re.getUTCMonth(),z.d=Re.getUTCDate()+(z.w+6)%7):(Re=JN(z0(z.y,0,1)),Pe=Re.getDay(),Re=Pe>4||Pe===0?$_.ceil(Re):$_(Re),Re=Oy.offset(Re,(z.V-1)*7),z.y=Re.getFullYear(),z.m=Re.getMonth(),z.d=Re.getDate()+(z.w+6)%7)}else("W"in z||"U"in z)&&("w"in z||(z.w="u"in z?z.u%7:"W"in z?1:0),Pe="Z"in z?QN(z0(z.y,0,1)).getUTCDay():JN(z0(z.y,0,1)).getDay(),z.m=0,z.d="W"in z?(z.w+6)%7+z.W*7-(Pe+5)%7:z.w+z.U*7-(Pe+6)%7);return"Z"in z?(z.H+=z.Z/100|0,z.M+=z.Z%100,QN(z)):JN(z)}}function N(I,Q,ve,z){for(var we=0,Re=Q.length,Pe=ve.length,De,Ne;we<Re;){if(z>=Pe)return-1;if(De=Q.charCodeAt(we++),De===37){if(De=Q.charAt(we++),Ne=S[De in C6?Q.charAt(we++):De],!Ne||(z=Ne(I,ve,z))<0)return-1}else if(De!=ve.charCodeAt(z++))return-1}return z}function k(I,Q,ve){var z=u.exec(Q.slice(ve));return z?(I.p=d.get(z[0].toLowerCase()),ve+z[0].length):-1}function C(I,Q,ve){var z=p.exec(Q.slice(ve));return z?(I.w=v.get(z[0].toLowerCase()),ve+z[0].length):-1}function T(I,Q,ve){var z=f.exec(Q.slice(ve));return z?(I.w=h.get(z[0].toLowerCase()),ve+z[0].length):-1}function A(I,Q,ve){var z=b.exec(Q.slice(ve));return z?(I.m=y.get(z[0].toLowerCase()),ve+z[0].length):-1}function B(I,Q,ve){var z=m.exec(Q.slice(ve));return z?(I.m=g.get(z[0].toLowerCase()),ve+z[0].length):-1}function R(I,Q,ve){return N(I,t,Q,ve)}function P(I,Q,ve){return N(I,r,Q,ve)}function D(I,Q,ve){return N(I,n,Q,ve)}function U(I){return o[I.getDay()]}function M(I){return s[I.getDay()]}function F(I){return c[I.getMonth()]}function K(I){return l[I.getMonth()]}function X(I){return a[+(I.getHours()>=12)]}function O(I){return 1+~~(I.getMonth()/3)}function W(I){return o[I.getUTCDay()]}function L(I){return s[I.getUTCDay()]}function H(I){return c[I.getUTCMonth()]}function ee(I){return l[I.getUTCMonth()]}function q(I){return a[+(I.getUTCHours()>=12)]}function Z(I){return 1+~~(I.getUTCMonth()/3)}return{format:function(I){var Q=E(I+="",w);return Q.toString=function(){return I},Q},parse:function(I){var Q=j(I+="",!1);return Q.toString=function(){return I},Q},utcFormat:function(I){var Q=E(I+="",_);return Q.toString=function(){return I},Q},utcParse:function(I){var Q=j(I+="",!0);return Q.toString=function(){return I},Q}}}var C6={"-":"",_:" ",0:"0"},ja=/^\s*\d+/,N8e=/^%/,C8e=/[\\^$*+?|[\]().{}]/g;function Hr(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function k8e(e){return e.replace(C8e,"\\$&")}function W0(e){return new RegExp("^(?:"+e.map(k8e).join("|")+")","i")}function V0(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function T8e(e,t,r){var n=ja.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function A8e(e,t,r){var n=ja.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function P8e(e,t,r){var n=ja.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function O8e(e,t,r){var n=ja.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function R8e(e,t,r){var n=ja.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function k6(e,t,r){var n=ja.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function T6(e,t,r){var n=ja.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function D8e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function M8e(e,t,r){var n=ja.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function I8e(e,t,r){var n=ja.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function A6(e,t,r){var n=ja.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function $8e(e,t,r){var n=ja.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function P6(e,t,r){var n=ja.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function F8e(e,t,r){var n=ja.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function L8e(e,t,r){var n=ja.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function B8e(e,t,r){var n=ja.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function U8e(e,t,r){var n=ja.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function z8e(e,t,r){var n=N8e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function W8e(e,t,r){var n=ja.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function V8e(e,t,r){var n=ja.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function O6(e,t){return Hr(e.getDate(),t,2)}function H8e(e,t){return Hr(e.getHours(),t,2)}function q8e(e,t){return Hr(e.getHours()%12||12,t,2)}function G8e(e,t){return Hr(1+Oy.count(Nc(e),e),t,3)}function JQ(e,t){return Hr(e.getMilliseconds(),t,3)}function K8e(e,t){return JQ(e,t)+"000"}function X8e(e,t){return Hr(e.getMonth()+1,t,2)}function Y8e(e,t){return Hr(e.getMinutes(),t,2)}function Z8e(e,t){return Hr(e.getSeconds(),t,2)}function J8e(e){var t=e.getDay();return t===0?7:t}function Q8e(e,t){return Hr(C2.count(Nc(e)-1,e),t,2)}function QQ(e){var t=e.getDay();return t>=4||t===0?pp(e):pp.ceil(e)}function eBe(e,t){return e=QQ(e),Hr(pp.count(Nc(e),e)+(Nc(e).getDay()===4),t,2)}function tBe(e){return e.getDay()}function rBe(e,t){return Hr($_.count(Nc(e)-1,e),t,2)}function nBe(e,t){return Hr(e.getFullYear()%100,t,2)}function aBe(e,t){return e=QQ(e),Hr(e.getFullYear()%100,t,2)}function sBe(e,t){return Hr(e.getFullYear()%1e4,t,4)}function iBe(e,t){var r=e.getDay();return e=r>=4||r===0?pp(e):pp.ceil(e),Hr(e.getFullYear()%1e4,t,4)}function oBe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Hr(t/60|0,"0",2)+Hr(t%60,"0",2)}function R6(e,t){return Hr(e.getUTCDate(),t,2)}function lBe(e,t){return Hr(e.getUTCHours(),t,2)}function cBe(e,t){return Hr(e.getUTCHours()%12||12,t,2)}function uBe(e,t){return Hr(1+N2.count(Cc(e),e),t,3)}function eee(e,t){return Hr(e.getUTCMilliseconds(),t,3)}function dBe(e,t){return eee(e,t)+"000"}function fBe(e,t){return Hr(e.getUTCMonth()+1,t,2)}function hBe(e,t){return Hr(e.getUTCMinutes(),t,2)}function mBe(e,t){return Hr(e.getUTCSeconds(),t,2)}function pBe(e){var t=e.getUTCDay();return t===0?7:t}function gBe(e,t){return Hr(k2.count(Cc(e)-1,e),t,2)}function tee(e){var t=e.getUTCDay();return t>=4||t===0?gp(e):gp.ceil(e)}function vBe(e,t){return e=tee(e),Hr(gp.count(Cc(e),e)+(Cc(e).getUTCDay()===4),t,2)}function xBe(e){return e.getUTCDay()}function yBe(e,t){return Hr(F_.count(Cc(e)-1,e),t,2)}function bBe(e,t){return Hr(e.getUTCFullYear()%100,t,2)}function wBe(e,t){return e=tee(e),Hr(e.getUTCFullYear()%100,t,2)}function _Be(e,t){return Hr(e.getUTCFullYear()%1e4,t,4)}function SBe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?gp(e):gp.ceil(e),Hr(e.getUTCFullYear()%1e4,t,4)}function jBe(){return"+0000"}function D6(){return"%"}function M6(e){return+e}function I6(e){return Math.floor(+e/1e3)}var Ah,ree,nee;EBe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function EBe(e){return Ah=E8e(e),ree=Ah.format,Ah.parse,nee=Ah.utcFormat,Ah.utcParse,Ah}function NBe(e){return new Date(e)}function CBe(e){return e instanceof Date?+e:+new Date(+e)}function jM(e,t,r,n,a,s,o,l,c,u){var d=uM(),f=d.invert,h=d.domain,p=u(".%L"),v=u(":%S"),m=u("%I:%M"),g=u("%I %p"),b=u("%a %d"),y=u("%b %d"),w=u("%B"),_=u("%Y");function S(E){return(c(E)<E?p:l(E)<E?v:o(E)<E?m:s(E)<E?g:n(E)<E?a(E)<E?b:y:r(E)<E?w:_)(E)}return d.invert=function(E){return new Date(f(E))},d.domain=function(E){return arguments.length?h(Array.from(E,CBe)):h().map(NBe)},d.ticks=function(E){var j=h();return e(j[0],j[j.length-1],E??10)},d.tickFormat=function(E,j){return j==null?S:u(j)},d.nice=function(E){var j=h();return(!E||typeof E.range!="function")&&(E=t(j[0],j[j.length-1],E??10)),E?h(WQ(j,E)):d},d.copy=function(){return Py(d,jM(e,t,r,n,a,s,o,l,c,u))},d}function kBe(){return mo.apply(jM(S8e,j8e,Nc,_M,C2,Oy,bM,xM,Wd,ree).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function TBe(){return mo.apply(jM(w8e,_8e,Cc,SM,k2,N2,wM,yM,Wd,nee).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function T2(){var e=0,t=1,r,n,a,s,o=js,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var p,v;return arguments.length?([p,v]=h,o=f(p,v),u):[o(0),o(1)]}}return u.range=d(d0),u.rangeRound=d(cM),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function fd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function aee(){var e=dd(T2()(js));return e.copy=function(){return fd(e,aee())},Fc.apply(e,arguments)}function see(){var e=hM(T2()).domain([1,10]);return e.copy=function(){return fd(e,see()).base(e.base())},Fc.apply(e,arguments)}function iee(){var e=mM(T2());return e.copy=function(){return fd(e,iee()).constant(e.constant())},Fc.apply(e,arguments)}function EM(){var e=pM(T2());return e.copy=function(){return fd(e,EM()).exponent(e.exponent())},Fc.apply(e,arguments)}function ABe(){return EM.apply(null,arguments).exponent(.5)}function oee(){var e=[],t=js;function r(n){if(n!=null&&!isNaN(n=+n))return t((Ty(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Iu),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>g6e(e,s/n))},r.copy=function(){return oee(t).domain(e)},Fc.apply(r,arguments)}function A2(){var e=0,t=.5,r=1,n=1,a,s,o,l,c,u=js,d,f=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+d(m))-s)*(n*m<n*s?l:c),u(f?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,r]=m,a=d(e=+e),s=d(t=+t),o=d(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,p):[e,t,r]},p.clamp=function(m){return arguments.length?(f=!!m,p):f},p.interpolator=function(m){return arguments.length?(u=m,p):u};function v(m){return function(g){var b,y,w;return arguments.length?([b,y,w]=g,u=z6e(m,[b,y,w]),p):[u(0),u(.5),u(1)]}}return p.range=v(d0),p.rangeRound=v(cM),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return d=m,a=m(e),s=m(t),o=m(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,p}}function lee(){var e=dd(A2()(js));return e.copy=function(){return fd(e,lee())},Fc.apply(e,arguments)}function cee(){var e=hM(A2()).domain([.1,1,10]);return e.copy=function(){return fd(e,cee()).base(e.base())},Fc.apply(e,arguments)}function uee(){var e=mM(A2());return e.copy=function(){return fd(e,uee()).constant(e.constant())},Fc.apply(e,arguments)}function NM(){var e=pM(A2());return e.copy=function(){return fd(e,NM()).exponent(e.exponent())},Fc.apply(e,arguments)}function PBe(){return NM.apply(null,arguments).exponent(.5)}const $6=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:sx,scaleDiverging:lee,scaleDivergingLog:cee,scaleDivergingPow:NM,scaleDivergingSqrt:PBe,scaleDivergingSymlog:uee,scaleIdentity:zQ,scaleImplicit:DP,scaleLinear:M_,scaleLog:VQ,scaleOrdinal:iM,scalePoint:$g,scalePow:gM,scaleQuantile:GQ,scaleQuantize:KQ,scaleRadial:qQ,scaleSequential:aee,scaleSequentialLog:see,scaleSequentialPow:EM,scaleSequentialQuantile:oee,scaleSequentialSqrt:ABe,scaleSequentialSymlog:iee,scaleSqrt:d8e,scaleSymlog:HQ,scaleThreshold:XQ,scaleTime:kBe,scaleUtc:TBe,tickFormat:UQ},Symbol.toStringTag,{value:"Module"}));var OBe=n0;function RBe(e,t,r){for(var n=-1,a=e.length;++n<a;){var s=e[n],o=t(s);if(o!=null&&(l===void 0?o===o&&!OBe(o):r(o,l)))var l=o,c=s}return c}var P2=RBe;function DBe(e,t){return e>t}var dee=DBe,MBe=P2,IBe=dee,$Be=u0;function FBe(e){return e&&e.length?MBe(e,$Be,IBe):void 0}var LBe=FBe;const O2=zr(LBe);function BBe(e,t){return e<t}var fee=BBe,UBe=P2,zBe=fee,WBe=u0;function VBe(e){return e&&e.length?UBe(e,WBe,zBe):void 0}var HBe=VBe;const R2=zr(HBe);var qBe=BD,GBe=Ml,KBe=bQ,XBe=si;function YBe(e,t){var r=XBe(e)?qBe:KBe;return r(e,GBe(t))}var ZBe=YBe,JBe=xQ,QBe=ZBe;function e7e(e,t){return JBe(QBe(e,t),1)}var t7e=e7e;const r7e=zr(t7e);var n7e=tM;function a7e(e,t){return n7e(e,t)}var s7e=a7e;const D2=zr(s7e);var f0=1e9,i7e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},kM,Sn=!0,so="[DecimalError] ",af=so+"Invalid argument: ",CM=so+"Exponent out of range: ",h0=Math.floor,Ad=Math.pow,o7e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,vi,va=1e7,gn=7,hee=9007199254740991,L_=h0(hee/gn),Ct={};Ct.absoluteValue=Ct.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ct.comparedTo=Ct.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Ct.decimalPlaces=Ct.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*gn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ct.dividedBy=Ct.div=function(e){return mc(this,new this.constructor(e))};Ct.dividedToIntegerBy=Ct.idiv=function(e){var t=this,r=t.constructor;return nn(mc(t,new r(e),0,1),r.precision)};Ct.equals=Ct.eq=function(e){return!this.cmp(e)};Ct.exponent=function(){return ra(this)};Ct.greaterThan=Ct.gt=function(e){return this.cmp(e)>0};Ct.greaterThanOrEqualTo=Ct.gte=function(e){return this.cmp(e)>=0};Ct.isInteger=Ct.isint=function(){return this.e>this.d.length-2};Ct.isNegative=Ct.isneg=function(){return this.s<0};Ct.isPositive=Ct.ispos=function(){return this.s>0};Ct.isZero=function(){return this.s===0};Ct.lessThan=Ct.lt=function(e){return this.cmp(e)<0};Ct.lessThanOrEqualTo=Ct.lte=function(e){return this.cmp(e)<1};Ct.logarithm=Ct.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(vi))throw Error(so+"NaN");if(r.s<1)throw Error(so+(r.s?"NaN":"-Infinity"));return r.eq(vi)?new n(0):(Sn=!1,t=mc(ux(r,s),ux(e,s),s),Sn=!0,nn(t,a))};Ct.minus=Ct.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?gee(t,e):mee(t,(e.s=-e.s,e))};Ct.modulo=Ct.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(so+"NaN");return r.s?(Sn=!1,t=mc(r,e,0,1).times(e),Sn=!0,r.minus(t)):nn(new n(r),a)};Ct.naturalExponential=Ct.exp=function(){return pee(this)};Ct.naturalLogarithm=Ct.ln=function(){return ux(this)};Ct.negated=Ct.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ct.plus=Ct.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?mee(t,e):gee(t,(e.s=-e.s,e))};Ct.precision=Ct.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(af+e);if(t=ra(a)+1,n=a.d.length-1,r=n*gn+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ct.squareRoot=Ct.sqrt=function(){var e,t,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(so+"NaN")}for(e=ra(l),Sn=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=wl(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=h0((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(mc(l,s,o+2)).times(.5),wl(s.d).slice(0,o)===(t=wl(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(nn(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(t!="9999")break;o+=4}return Sn=!0,nn(n,r)};Ct.times=Ct.mul=function(e){var t,r,n,a,s,o,l,c,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=p.length,c<u&&(s=h,h=p,p=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=s[a]+p[n]*h[a-n-1]+t,s[a--]=l%va|0,t=l/va|0;s[a]=(s[a]+t)%va|0}for(;!s[--o];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Sn?nn(e,f.precision):e};Ct.toDecimalPlaces=Ct.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Pl(e,0,f0),t===void 0?t=n.rounding:Pl(t,0,8),nn(r,e+ra(r)+1,t))};Ct.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=$f(n,!0):(Pl(e,0,f0),t===void 0?t=a.rounding:Pl(t,0,8),n=nn(new a(n),e+1,t),r=$f(n,!0,e+1)),r};Ct.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?$f(a):(Pl(e,0,f0),t===void 0?t=s.rounding:Pl(t,0,8),n=nn(new s(a),e+ra(a)+1,t),r=$f(n.abs(),!1,e+ra(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ct.toInteger=Ct.toint=function(){var e=this,t=e.constructor;return nn(new t(e),ra(e)+1,t.rounding)};Ct.toNumber=function(){return+this};Ct.toPower=Ct.pow=function(e){var t,r,n,a,s,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(vi);if(l=new c(l),!l.s){if(e.s<1)throw Error(so+"Infinity");return l}if(l.eq(vi))return l;if(n=c.precision,e.eq(vi))return nn(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,s=l.s,o){if((r=d<0?-d:d)<=hee){for(a=new c(vi),t=Math.ceil(n/gn+4),Sn=!1;r%2&&(a=a.times(l),L6(a.d,t)),r=h0(r/2),r!==0;)l=l.times(l),L6(l.d,t);return Sn=!0,e.s<0?new c(vi).div(a):nn(a,n)}}else if(s<0)throw Error(so+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Sn=!1,a=e.times(ux(l,n+u)),Sn=!0,a=pee(a),a.s=s,a};Ct.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=ra(a),n=$f(a,r<=s.toExpNeg||r>=s.toExpPos)):(Pl(e,1,f0),t===void 0?t=s.rounding:Pl(t,0,8),a=nn(new s(a),e,t),r=ra(a),n=$f(a,e<=r||r<=s.toExpNeg,e)),n};Ct.toSignificantDigits=Ct.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Pl(e,1,f0),t===void 0?t=n.rounding:Pl(t,0,8)),nn(new n(r),e,t)};Ct.toString=Ct.valueOf=Ct.val=Ct.toJSON=Ct[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ra(e),r=e.constructor;return $f(e,t<=r.toExpNeg||t>=r.toExpPos)};function mee(e,t){var r,n,a,s,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Sn?nn(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/gn),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/va|0,c[s]%=va;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Sn?nn(t,f):t}function Pl(e,t,r){if(e!==~~e||e<t||e>r)throw Error(af+e)}function wl(e){var t,r,n,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)n=e[t]+"",r=gn-n.length,r&&(s+=au(r)),s+=n;o=e[t],n=o+"",r=gn-n.length,r&&(s+=au(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var mc=function(){function e(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%va|0,o=s/va|0;return o&&n.unshift(o),n}function t(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*va+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,u,d,f,h,p,v,m,g,b,y,w,_,S,E,j,N,k=n.constructor,C=n.s==a.s?1:-1,T=n.d,A=a.d;if(!n.s)return new k(n);if(!a.s)throw Error(so+"Division by zero");for(c=n.e-a.e,j=A.length,S=T.length,p=new k(C),v=p.d=[],u=0;A[u]==(T[u]||0);)++u;if(A[u]>(T[u]||0)&&--c,s==null?y=s=k.precision:o?y=s+(ra(n)-ra(a))+1:y=s,y<0)return new k(0);if(y=y/gn+2|0,u=0,j==1)for(d=0,A=A[0],y++;(u<S||d)&&y--;u++)w=d*va+(T[u]||0),v[u]=w/A|0,d=w%A|0;else{for(d=va/(A[0]+1)|0,d>1&&(A=e(A,d),T=e(T,d),j=A.length,S=T.length),_=j,m=T.slice(0,j),g=m.length;g<j;)m[g++]=0;N=A.slice(),N.unshift(0),E=A[0],A[1]>=va/2&&++E;do d=0,l=t(A,m,j,g),l<0?(b=m[0],j!=g&&(b=b*va+(m[1]||0)),d=b/E|0,d>1?(d>=va&&(d=va-1),f=e(A,d),h=f.length,g=m.length,l=t(f,m,h,g),l==1&&(d--,r(f,j<h?N:A,h))):(d==0&&(l=d=1),f=A.slice()),h=f.length,h<g&&f.unshift(0),r(m,f,g),l==-1&&(g=m.length,l=t(A,m,j,g),l<1&&(d++,r(m,j<g?N:A,g))),g=m.length):l===0&&(d++,m=[0]),v[u++]=d,l&&m[0]?m[g++]=T[_]||0:(m=[T[_]],g=1);while((_++<S||m[0]!==void 0)&&y--)}return v[0]||v.shift(),p.e=c,nn(p,o?s+ra(p)+1:s)}}();function pee(e,t){var r,n,a,s,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(ra(e)>16)throw Error(CM+ra(e));if(!e.s)return new d(vi);for(t==null?(Sn=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Ad(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(vi),d.precision=l;;){if(a=nn(a.times(e),l),r=r.times(++c),o=s.plus(mc(a,r,l)),wl(o.d).slice(0,l)===wl(s.d).slice(0,l)){for(;u--;)s=nn(s.times(s),l);return d.precision=f,t==null?(Sn=!0,nn(s,f)):s}s=o}}function ra(e){for(var t=e.e*gn,r=e.d[0];r>=10;r/=10)t++;return t}function eC(e,t,r){if(t>e.LN10.sd())throw Sn=!0,r&&(e.precision=r),Error(so+"LN10 precision limit exceeded");return nn(new e(e.LN10),t)}function au(e){for(var t="";e--;)t+="0";return t}function ux(e,t){var r,n,a,s,o,l,c,u,d,f=1,h=10,p=e,v=p.d,m=p.constructor,g=m.precision;if(p.s<1)throw Error(so+(p.s?"NaN":"-Infinity"));if(p.eq(vi))return new m(0);if(t==null?(Sn=!1,u=g):u=t,p.eq(10))return t==null&&(Sn=!0),eC(m,u);if(u+=h,m.precision=u,r=wl(v),n=r.charAt(0),s=ra(p),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=wl(p.d),n=r.charAt(0),f++;s=ra(p),n>1?(p=new m("0."+r),s++):p=new m(n+"."+r.slice(1))}else return c=eC(m,u+2,g).times(s+""),p=ux(new m(n+"."+r.slice(1)),u-h).plus(c),m.precision=g,t==null?(Sn=!0,nn(p,g)):p;for(l=o=p=mc(p.minus(vi),p.plus(vi),u),d=nn(p.times(p),u),a=3;;){if(o=nn(o.times(d),u),c=l.plus(mc(o,new m(a),u)),wl(c.d).slice(0,u)===wl(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(eC(m,u+2,g).times(s+""))),l=mc(l,new m(f),u),m.precision=g,t==null?(Sn=!0,nn(l,g)):l;l=c,a+=2}}function F6(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=h0(r/gn),e.d=[],n=(r+1)%gn,r<0&&(n+=gn),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=gn;n<a;)e.d.push(+t.slice(n,n+=gn));t=t.slice(n),n=gn-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Sn&&(e.e>L_||e.e<-L_))throw Error(CM+r)}else e.s=0,e.e=0,e.d=[0];return e}function nn(e,t,r){var n,a,s,o,l,c,u,d,f=e.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=t-o,n<0)n+=gn,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/gn),s=f.length,d>=s)return e;for(u=s=f[d],o=1;s>=10;s/=10)o++;n%=gn,a=n-gn+o}if(r!==void 0&&(s=Ad(10,o-a-1),l=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Ad(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=ra(e),f.length=1,t=t-s-1,f[0]=Ad(10,(gn-t%gn)%gn),e.e=h0(-t/gn)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=Ad(10,gn-n),f[d]=a>0?(u/Ad(10,o-a)%Ad(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==va&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=va)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Sn&&(e.e>L_||e.e<-L_))throw Error(CM+ra(e));return e}function gee(e,t){var r,n,a,s,o,l,c,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Sn?nn(t,p):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(p/gn),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=va-1;--c[s],c[a]+=va}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Sn?nn(t,p):t):new h(0)}function $f(e,t,r){var n,a=ra(e),s=wl(e.d),o=s.length;return t?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+au(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+au(-a-1)+s,r&&(n=r-o)>0&&(s+=au(n))):a>=o?(s+=au(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+au(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=au(n))),e.s<0?"-"+s:s}function L6(e,t){if(e.length>t)return e.length=t,!0}function vee(e){var t,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(af+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return F6(o,s.toString())}else if(typeof s!="string")throw Error(af+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,o7e.test(s))F6(o,s);else throw Error(af+s)}if(a.prototype=Ct,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=vee,a.config=a.set=l7e,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function l7e(e){if(!e||typeof e!="object")throw Error(so+"Object expected");var t,r,n,a=["precision",1,f0,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(h0(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(af+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(af+r+": "+n);return this}var kM=vee(i7e);vi=new kM(1);const tn=kM;function c7e(e){return h7e(e)||f7e(e)||d7e(e)||u7e()}function u7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d7e(e,t){if(e){if(typeof e=="string")return FP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FP(e,t)}}function f7e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function h7e(e){if(Array.isArray(e))return FP(e)}function FP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m7e=function(t){return t},xee={"@@functional/placeholder":!0},yee=function(t){return t===xee},B6=function(t){return function r(){return arguments.length===0||arguments.length===1&&yee(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},p7e=function e(t,r){return t===1?r:B6(function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];var o=a.filter(function(l){return l!==xee}).length;return o>=t?r.apply(void 0,a):e(t-o,B6(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return yee(f)?c.shift():f});return r.apply(void 0,c7e(d).concat(c))}))})},M2=function(t){return p7e(t.length,t)},LP=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},g7e=M2(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),v7e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return m7e;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},BP=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},bee=function(t){var r=null,n=null;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r&&s.every(function(l,c){return l===r[c]})||(r=s,n=t.apply(void 0,s)),n}};function x7e(e){var t;return e===0?t=1:t=Math.floor(new tn(e).abs().log(10).toNumber())+1,t}function y7e(e,t,r){for(var n=new tn(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var b7e=M2(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),w7e=M2(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),_7e=M2(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const I2={rangeStep:y7e,getDigitCount:x7e,interpolateNumber:b7e,uninterpolateNumber:w7e,uninterpolateTruncation:_7e};function UP(e){return E7e(e)||j7e(e)||wee(e)||S7e()}function S7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j7e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function E7e(e){if(Array.isArray(e))return zP(e)}function dx(e,t){return k7e(e)||C7e(e,t)||wee(e,t)||N7e()}function N7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wee(e,t){if(e){if(typeof e=="string")return zP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zP(e,t)}}function zP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C7e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,s=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,s=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw s}}return r}}function k7e(e){if(Array.isArray(e))return e}function _ee(e){var t=dx(e,2),r=t[0],n=t[1],a=r,s=n;return r>n&&(a=n,s=r),[a,s]}function See(e,t,r){if(e.lte(0))return new tn(0);var n=I2.getDigitCount(e.toNumber()),a=new tn(10).pow(n),s=e.div(a),o=n!==1?.05:.1,l=new tn(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new tn(Math.ceil(c))}function T7e(e,t,r){var n=1,a=new tn(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new tn(10).pow(I2.getDigitCount(e)-1),a=new tn(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new tn(Math.floor(e)))}else e===0?a=new tn(Math.floor((t-1)/2)):r||(a=new tn(Math.floor(e)));var o=Math.floor((t-1)/2),l=v7e(g7e(function(c){return a.add(new tn(c-o).mul(n)).toNumber()}),LP);return l(0,t)}function jee(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new tn(0),tickMin:new tn(0),tickMax:new tn(0)};var s=See(new tn(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new tn(0):(o=new tn(e).add(t).div(2),o=o.sub(new tn(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new tn(t).sub(o).div(s).toNumber()),u=l+c+1;return u>r?jee(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:s,tickMin:o.sub(new tn(l).mul(s)),tickMax:o.add(new tn(c).mul(s))})}function A7e(e){var t=dx(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=_ee([r,n]),c=dx(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(UP(LP(0,a-1).map(function(){return 1/0}))):[].concat(UP(LP(0,a-1).map(function(){return-1/0})),[d]);return r>n?BP(f):f}if(u===d)return T7e(u,a,s);var h=jee(u,d,o,s),p=h.step,v=h.tickMin,m=h.tickMax,g=I2.rangeStep(v,m.add(new tn(.1).mul(p)),p);return r>n?BP(g):g}function P7e(e,t){var r=dx(e,2),n=r[0],a=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=_ee([n,a]),l=dx(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=See(new tn(u).sub(c).div(d-1),s,0),h=[].concat(UP(I2.rangeStep(new tn(c),new tn(u).sub(new tn(.99).mul(f)),f)),[u]);return n>a?BP(h):h}var O7e=bee(A7e),R7e=bee(P7e),D7e="Invariant failed";function Ff(e,t){throw new Error(D7e)}var M7e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function vp(e){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(e)}function B_(){return B_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B_.apply(this,arguments)}function I7e(e,t){return B7e(e)||L7e(e,t)||F7e(e,t)||$7e()}function $7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F7e(e,t){if(e){if(typeof e=="string")return U6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U6(e,t)}}function U6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L7e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function B7e(e){if(Array.isArray(e))return e}function U7e(e,t){if(e==null)return{};var r=z7e(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function z7e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function W7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V7e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cee(n.key),n)}}function H7e(e,t,r){return t&&V7e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function q7e(e,t,r){return t=U_(t),G7e(e,Eee()?Reflect.construct(t,r||[],U_(e).constructor):t.apply(e,r))}function G7e(e,t){if(t&&(vp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K7e(e)}function K7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Eee=function(){return!!e})()}function U_(e){return U_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},U_(e)}function X7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WP(e,t)}function WP(e,t){return WP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},WP(e,t)}function Nee(e,t,r){return t=Cee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cee(e){var t=Y7e(e,"string");return vp(t)=="symbol"?t:t+""}function Y7e(e,t){if(vp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $2=function(e){function t(){return W7e(this,t),q7e(this,t,arguments)}return X7e(t,e),H7e(t,[{key:"render",value:function(){var n=this.props,a=n.offset,s=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=U7e(n,M7e),p=Qt(h,!1);this.props.direction==="x"&&d.type!=="number"&&Ff();var v=c.map(function(m){var g=u(m,l),b=g.x,y=g.y,w=g.value,_=g.errorVal;if(!_)return null;var S=[],E,j;if(Array.isArray(_)){var N=I7e(_,2);E=N[0],j=N[1]}else E=j=_;if(s==="vertical"){var k=d.scale,C=y+a,T=C+o,A=C-o,B=k(w-E),R=k(w+j);S.push({x1:R,y1:T,x2:R,y2:A}),S.push({x1:B,y1:C,x2:R,y2:C}),S.push({x1:B,y1:T,x2:B,y2:A})}else if(s==="horizontal"){var P=f.scale,D=b+a,U=D-o,M=D+o,F=P(w-E),K=P(w+j);S.push({x1:U,y1:K,x2:M,y2:K}),S.push({x1:D,y1:F,x2:D,y2:K}),S.push({x1:U,y1:F,x2:M,y2:F})}return G.createElement(Zr,B_({className:"recharts-errorBar",key:"bar-".concat(S.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},p),S.map(function(X){return G.createElement("line",B_({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return G.createElement(Zr,{className:"recharts-errorBars"},v)}}])}(G.Component);Nee($2,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Nee($2,"displayName","ErrorBar");function fx(e){"@babel/helpers - typeof";return fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fx(e)}function z6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z6(Object(r),!0).forEach(function(n){Z7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z7e(e,t,r){return t=J7e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J7e(e){var t=Q7e(e,"string");return fx(t)=="symbol"?t:t+""}function Q7e(e,t){if(fx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kee=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,s=t.legendContent,o=fi(r,ga);if(!o)return null;var l=ga.defaultProps,c=l!==void 0?yd(yd({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,p=f.props,v=p.sectors||p.data||[];return d.concat(v.map(function(m){return{type:o.props.iconType||h.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,p=h!==void 0?yd(yd({},h),f.props):{},v=p.dataKey,m=p.name,g=p.legendType,b=p.hide;return{inactive:b,dataKey:v,type:c.iconType||g||"square",color:TM(f),value:m||v,payload:p}}),yd(yd(yd({},c),ga.getWithHeight(o,a)),{},{payload:u,item:o})};function hx(e){"@babel/helpers - typeof";return hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hx(e)}function W6(e){return n9e(e)||r9e(e)||t9e(e)||e9e()}function e9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t9e(e,t){if(e){if(typeof e=="string")return VP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VP(e,t)}}function r9e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function n9e(e){if(Array.isArray(e))return VP(e)}function VP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V6(Object(r),!0).forEach(function(n){Pm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pm(e,t,r){return t=a9e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a9e(e){var t=s9e(e,"string");return hx(t)=="symbol"?t:t+""}function s9e(e,t){if(hx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ns(e,t,r){return Sr(e)||Sr(t)?r:ca(t)?Ei(e,t,r):rr(t)?t(e):r}function Fg(e,t,r,n){var a=r7e(e,function(l){return ns(l,t)});if(r==="number"){var s=a.filter(function(l){return ft(l)||parseFloat(l)});return s.length?[R2(s),O2(s)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!Sr(l)}):a;return o.map(function(l){return ca(l)||l instanceof Date?l:""})}var i9e=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,p=void 0;if(_s(f-d)!==_s(h-f)){var v=[];if(_s(h-f)===_s(c[1]-c[0])){p=h;var m=f+c[1]-c[0];v[0]=Math.min(m,(m+d)/2),v[1]=Math.max(m,(m+d)/2)}else{p=d;var g=h+c[1]-c[0];v[0]=Math.min(f,(g+f)/2),v[1]=Math.max(f,(g+f)/2)}var b=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>b[0]&&t<=b[1]||t>=v[0]&&t<=v[1]){o=a[u].index;break}}else{var y=Math.min(d,h),w=Math.max(d,h);if(t>(y+f)/2&&t<=(w+f)/2){o=a[u].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_===l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2){o=n[_].index;break}return o},TM=function(t){var r,n=t,a=n.type.displayName,s=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Fn(Fn({},t.type.defaultProps),t.props):t.props,o=s.stroke,l=s.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},o9e=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var d=s[l[c]].stackGroups,f=Object.keys(d),h=0,p=f.length;h<p;h++){var v=d[f[h]],m=v.items,g=v.cateAxisId,b=m.filter(function(j){return fc(j.type).indexOf("Bar")>=0});if(b&&b.length){var y=b[0].type.defaultProps,w=y!==void 0?Fn(Fn({},y),b[0].props):b[0].props,_=w.barSize,S=w[g];o[S]||(o[S]=[]);var E=Sr(_)?r:_;o[S].push({item:b[0],stackList:b.slice(1),barSize:Sr(E)?void 0:Ss(E,n,0)})}}return o},l9e=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,s=t.sizeList,o=s===void 0?[]:s,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Ss(r,a,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,p=a/c,v=o.reduce(function(_,S){return _+S.barSize||0},0);v+=(c-1)*u,v>=a&&(v-=(c-1)*u,u=0),v>=a&&p>0&&(h=!0,p*=.9,v=c*p);var m=(a-v)/2>>0,g={offset:m-u,size:0};d=o.reduce(function(_,S){var E={item:S.item,position:{offset:g.offset+g.size+u,size:h?p:S.barSize}},j=[].concat(W6(_),[E]);return g=j[j.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(N){j.push({item:N,position:g})}),j},f)}else{var b=Ss(n,a,0,!0);a-2*b-(c-1)*u<=0&&(u=0);var y=(a-2*b-(c-1)*u)/c;y>1&&(y>>=0);var w=l===+l?Math.min(y,l):y;d=o.reduce(function(_,S,E){var j=[].concat(W6(_),[{item:S.item,position:{offset:b+(y+u)*E+(y-w)/2,size:w}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(N){j.push({item:N,position:j[j.length-1].position})}),j},f)}return d},c9e=function(t,r,n,a){var s=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=kee({children:s,legendWidth:c});if(u){var d=a||{},f=d.width,h=d.height,p=u.align,v=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&v==="middle")&&p!=="center"&&ft(t[p]))return Fn(Fn({},t),{},Pm({},p,t[p]+(f||0)));if((m==="horizontal"||m==="vertical"&&p==="center")&&v!=="middle"&&ft(t[v]))return Fn(Fn({},t),{},Pm({},v,t[v]+(h||0)))}return t},u9e=function(t,r,n){return Sr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},Tee=function(t,r,n,a,s){var o=r.props.children,l=ro(o,$2).filter(function(u){return u9e(a,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=ns(d,n);if(Sr(f))return u;var h=Array.isArray(f)?[R2(f),O2(f)]:[f,f],p=c.reduce(function(v,m){var g=ns(d,m,0),b=h[0]-Math.abs(Array.isArray(g)?g[0]:g),y=h[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(b,v[0]),Math.max(y,v[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},d9e=function(t,r,n,a,s){var o=r.map(function(l){return Tee(t,l,n,s,a)}).filter(function(l){return!Sr(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},Aee=function(t,r,n,a,s){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&Tee(t,c,u,a)||Fg(t,u,n,s)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},Pee=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},Oee=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var s,o,l=t.map(function(c){return c.coordinate===r&&(s=!0),c.coordinate===n&&(o=!0),c.coordinate});return s||l.push(r),o||l.push(n),l},oc=function(t,r,n){if(!t)return null;var a=t.scale,s=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?_s(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=s?s.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!Ny(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:s?s[f]:f,index:h,offset:u}})},tC=new WeakMap,Zb=function(t,r){if(typeof r!="function")return t;tC.has(t)||tC.set(t,new WeakMap);var n=tC.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},Ree=function(t,r,n){var a=t.scale,s=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:sx(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:M_(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:$g(),realScaleType:"point"}:s==="category"?{scale:sx(),realScaleType:"band"}:{scale:M_(),realScaleType:"linear"};if(Ey(a)){var c="scale".concat(v2(a));return{scale:($6[c]||$g)(),realScaleType:$6[c]?c:"point"}}return rr(a)?{scale:a}:{scale:$g(),realScaleType:"point"}},H6=1e-4,Dee=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),s=Math.min(a[0],a[1])-H6,o=Math.max(a[0],a[1])+H6,l=t(r[0]),c=t(r[n-1]);(l<s||l>o||c<s||c>o)&&t.domain([r[0],r[n-1]])}},f9e=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},h9e=function(t,r){if(!r||r.length!==2||!ft(r[0])||!ft(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),s=[t[0],t[1]];return(!ft(t[0])||t[0]<n)&&(s[0]=n),(!ft(t[1])||t[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<n&&(s[1]=n),s},m9e=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var s=0,o=0,l=0;l<r;++l){var c=Ny(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=s,t[l][n][1]=s+c,s=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},p9e=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var s=0,o=0;o<r;++o){var l=Ny(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=s,t[o][n][1]=s+l,s=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},g9e={sign:m9e,expand:MRe,none:cp,silhouette:IRe,wiggle:$Re,positive:p9e},v9e=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),s=g9e[n],o=DRe().keys(a).value(function(l,c){return+ns(l,c,0)}).order(pP).offset(s);return o(t)},x9e=function(t,r,n,a,s,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,h){var p,v=(p=h.type)!==null&&p!==void 0&&p.defaultProps?Fn(Fn({},h.type.defaultProps),h.props):h.props,m=v.stackId,g=v.hide;if(g)return f;var b=v[n],y=f[b]||{hasStack:!1,stackGroups:{}};if(ca(m)){var w=y.stackGroups[m]||{numericAxisId:n,cateAxisId:a,items:[]};w.items.push(h),y.hasStack=!0,y.stackGroups[m]=w}else y.stackGroups[Cy("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return Fn(Fn({},f),{},Pm({},b,y))},c),d={};return Object.keys(u).reduce(function(f,h){var p=u[h];if(p.hasStack){var v={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(m,g){var b=p.stackGroups[g];return Fn(Fn({},m),{},Pm({},g,{numericAxisId:n,cateAxisId:a,items:b.items,stackedData:v9e(t,b.items,s)}))},v)}return Fn(Fn({},f),{},Pm({},h,p))},d)},Mee=function(t,r){var n=r.realScaleType,a=r.type,s=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=O7e(u,s,l);return t.domain([R2(d),O2(d)]),{niceTicks:d}}if(s&&a==="number"){var f=t.domain(),h=R7e(f,s,l);return{niceTicks:h}}return null},q6=function(t){var r=t.axis,n=t.ticks,a=t.offset,s=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=ns(o,r.dataKey,r.domain[l]);return Sr(c)?null:r.scale(c)-s/2+a},y9e=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return a<=0&&s>=0?0:s<0?s:a}return n[0]},b9e=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Fn(Fn({},t.type.defaultProps),t.props):t.props,s=a.stackId;if(ca(s)){var o=r[s];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},w9e=function(t){return t.reduce(function(r,n){return[R2(n.concat([r[0]]).filter(ft)),O2(n.concat([r[1]]).filter(ft))]},[1/0,-1/0])},Iee=function(t,r,n){return Object.keys(t).reduce(function(a,s){var o=t[s],l=o.stackedData,c=l.reduce(function(u,d){var f=w9e(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},G6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,K6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,HP=function(t,r,n){if(rr(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(ft(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(G6.test(t[0])){var s=+G6.exec(t[0])[1];a[0]=r[0]-s}else rr(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(ft(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(K6.test(t[1])){var o=+K6.exec(t[1])[1];a[1]=r[1]+o}else rr(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},z_=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var s=nM(r,function(f){return f.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],d=s[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},X6=function(t,r,n){return!t||!t.length||D2(t,Ei(n,"type.defaultProps.domain"))?r:t},$ee=function(t,r){var n=t.type.defaultProps?Fn(Fn({},t.type.defaultProps),t.props):t.props,a=n.dataKey,s=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Fn(Fn({},Qt(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:s||a,color:TM(t),value:ns(r,a),type:c,payload:r,chartType:u,hide:d})};function mx(e){"@babel/helpers - typeof";return mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mx(e)}function Y6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y6(Object(r),!0).forEach(function(n){Fee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fee(e,t,r){return t=_9e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _9e(e){var t=S9e(e,"string");return mx(t)=="symbol"?t:t+""}function S9e(e,t){if(mx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(mx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j9e(e,t){return k9e(e)||C9e(e,t)||N9e(e,t)||E9e()}function E9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N9e(e,t){if(e){if(typeof e=="string")return Z6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z6(e,t)}}function Z6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C9e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function k9e(e){if(Array.isArray(e))return e}var W_=Math.PI/180,T9e=function(t){return t*180/Math.PI},un=function(t,r,n,a){return{x:t+Math.cos(-W_*a)*n,y:r+Math.sin(-W_*a)*n}},Lee=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},A9e=function(t,r,n,a,s){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=Ss(t.cx,o,o/2),f=Ss(t.cy,l,l/2),h=Lee(o,l,n),p=Ss(t.innerRadius,h,0),v=Ss(t.outerRadius,h,h*.8),m=Object.keys(r);return m.reduce(function(g,b){var y=r[b],w=y.domain,_=y.reversed,S;if(Sr(y.range))a==="angleAxis"?S=[c,u]:a==="radiusAxis"&&(S=[p,v]),_&&(S=[S[1],S[0]]);else{S=y.range;var E=S,j=j9e(E,2);c=j[0],u=j[1]}var N=Ree(y,s),k=N.realScaleType,C=N.scale;C.domain(w).range(S),Dee(C);var T=Mee(C,Kl(Kl({},y),{},{realScaleType:k})),A=Kl(Kl(Kl({},y),T),{},{range:S,radius:v,realScaleType:k,scale:C,cx:d,cy:f,innerRadius:p,outerRadius:v,startAngle:c,endAngle:u});return Kl(Kl({},g),{},Fee({},b,A))},{})},P9e=function(t,r){var n=t.x,a=t.y,s=r.x,o=r.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(a-o,2))},O9e=function(t,r){var n=t.x,a=t.y,s=r.cx,o=r.cy,l=P9e({x:n,y:a},{x:s,y:o});if(l<=0)return{radius:l};var c=(n-s)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:T9e(u),angleInRadian:u}},R9e=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return{startAngle:r-o*360,endAngle:n-o*360}},D9e=function(t,r){var n=r.startAngle,a=r.endAngle,s=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(s,o);return t+l*360},J6=function(t,r){var n=t.x,a=t.y,s=O9e({x:n,y:a},r),o=s.radius,l=s.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=R9e(r),f=d.startAngle,h=d.endAngle,p=l,v;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;v=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;v=p>=h&&p<=f}return v?Kl(Kl({},r),{},{radius:o,angle:D9e(p,r)}):null},Bee=function(t){return!x.isValidElement(t)&&!rr(t)&&typeof t!="boolean"?t.className:""};function px(e){"@babel/helpers - typeof";return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},px(e)}var M9e=["offset"];function I9e(e){return B9e(e)||L9e(e)||F9e(e)||$9e()}function $9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F9e(e,t){if(e){if(typeof e=="string")return qP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qP(e,t)}}function L9e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function B9e(e){if(Array.isArray(e))return qP(e)}function qP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U9e(e,t){if(e==null)return{};var r=z9e(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function z9e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Q6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q6(Object(r),!0).forEach(function(n){W9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W9e(e,t,r){return t=V9e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V9e(e){var t=H9e(e,"string");return px(t)=="symbol"?t:t+""}function H9e(e,t){if(px(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(px(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gx(){return gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gx.apply(this,arguments)}var q9e=function(t){var r=t.value,n=t.formatter,a=Sr(t.children)?r:t.children;return rr(n)?n(a):a},G9e=function(t,r){var n=_s(r-t),a=Math.min(Math.abs(r-t),360);return n*a},K9e=function(t,r,n){var a=t.position,s=t.viewBox,o=t.offset,l=t.className,c=s,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,p=c.startAngle,v=c.endAngle,m=c.clockWise,g=(f+h)/2,b=G9e(p,v),y=b>=0?1:-1,w,_;a==="insideStart"?(w=p+y*o,_=m):a==="insideEnd"?(w=v-y*o,_=!m):a==="end"&&(w=v+y*o,_=m),_=b<=0?_:!_;var S=un(u,d,g,w),E=un(u,d,g,w+(_?1:-1)*359),j="M".concat(S.x,",").concat(S.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(_?0:1,`,
    `).concat(E.x,",").concat(E.y),N=Sr(t.id)?Cy("recharts-radial-line-"):t.id;return G.createElement("text",gx({},n,{dominantBaseline:"central",className:hr("recharts-radial-bar-label",l)}),G.createElement("defs",null,G.createElement("path",{id:N,d:j})),G.createElement("textPath",{xlinkHref:"#".concat(N)},r))},X9e=function(t){var r=t.viewBox,n=t.offset,a=t.position,s=r,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,d=s.startAngle,f=s.endAngle,h=(d+f)/2;if(a==="outside"){var p=un(o,l,u+n,h),v=p.x,m=p.y;return{x:v,y:m,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+u)/2,b=un(o,l,g,h),y=b.x,w=b.y;return{x:y,y:w,textAnchor:"middle",verticalAnchor:"middle"}},Y9e=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,s=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,h=f*a,p=f>0?"end":"start",v=f>0?"start":"end",m=u>=0?1:-1,g=m*a,b=m>0?"end":"start",y=m>0?"start":"end";if(s==="top"){var w={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:p};return na(na({},w),n?{height:Math.max(c-n.y,0),width:u}:{})}if(s==="bottom"){var _={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:v};return na(na({},_),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(s==="left"){var S={x:l-g,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return na(na({},S),n?{width:Math.max(S.x-n.x,0),height:d}:{})}if(s==="right"){var E={x:l+u+g,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return na(na({},E),n?{width:Math.max(n.x+n.width-E.x,0),height:d}:{})}var j=n?{width:u,height:d}:{};return s==="insideLeft"?na({x:l+g,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},j):s==="insideRight"?na({x:l+u-g,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},j):s==="insideTop"?na({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:v},j):s==="insideBottom"?na({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:p},j):s==="insideTopLeft"?na({x:l+g,y:c+h,textAnchor:y,verticalAnchor:v},j):s==="insideTopRight"?na({x:l+u-g,y:c+h,textAnchor:b,verticalAnchor:v},j):s==="insideBottomLeft"?na({x:l+g,y:c+d-h,textAnchor:y,verticalAnchor:p},j):s==="insideBottomRight"?na({x:l+u-g,y:c+d-h,textAnchor:b,verticalAnchor:p},j):a0(s)&&(ft(s.x)||Ud(s.x))&&(ft(s.y)||Ud(s.y))?na({x:l+Ss(s.x,u),y:c+Ss(s.y,d),textAnchor:"end",verticalAnchor:"end"},j):na({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},Z9e=function(t){return"cx"in t&&ft(t.cx)};function ba(e){var t=e.offset,r=t===void 0?5:t,n=U9e(e,M9e),a=na({offset:r},n),s=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!s||Sr(l)&&Sr(c)&&!x.isValidElement(u)&&!rr(u))return null;if(x.isValidElement(u))return x.cloneElement(u,a);var p;if(rr(u)){if(p=x.createElement(u,a),x.isValidElement(p))return p}else p=q9e(a);var v=Z9e(s),m=Qt(a,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return K9e(a,p,m);var g=v?X9e(a):Y9e(a);return G.createElement(If,gx({className:hr("recharts-label",f)},m,g,{breakAll:h}),p)}ba.displayName="Label";var Uee=function(t){var r=t.cx,n=t.cy,a=t.angle,s=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,p=t.top,v=t.left,m=t.width,g=t.height,b=t.clockWise,y=t.labelViewBox;if(y)return y;if(ft(m)&&ft(g)){if(ft(f)&&ft(h))return{x:f,y:h,width:m,height:g};if(ft(p)&&ft(v))return{x:p,y:v,width:m,height:g}}return ft(f)&&ft(h)?{x:f,y:h,width:0,height:0}:ft(r)&&ft(n)?{cx:r,cy:n,startAngle:s||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:b}:t.viewBox?t.viewBox:{}},J9e=function(t,r){return t?t===!0?G.createElement(ba,{key:"label-implicit",viewBox:r}):ca(t)?G.createElement(ba,{key:"label-implicit",viewBox:r,value:t}):x.isValidElement(t)?t.type===ba?x.cloneElement(t,{key:"label-implicit",viewBox:r}):G.createElement(ba,{key:"label-implicit",content:t,viewBox:r}):rr(t)?G.createElement(ba,{key:"label-implicit",content:t,viewBox:r}):a0(t)?G.createElement(ba,gx({viewBox:r},t,{key:"label-implicit"})):null:null},Q9e=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,s=Uee(t),o=ro(a,ba).map(function(c,u){return x.cloneElement(c,{viewBox:r||s,key:"label-".concat(u)})});if(!n)return o;var l=J9e(t.label,r||s);return[l].concat(I9e(o))};ba.parseViewBox=Uee;ba.renderCallByParent=Q9e;function eUe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var tUe=eUe;const rUe=zr(tUe);function vx(e){"@babel/helpers - typeof";return vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vx(e)}var nUe=["valueAccessor"],aUe=["data","dataKey","clockWise","id","textBreakAll"];function sUe(e){return cUe(e)||lUe(e)||oUe(e)||iUe()}function iUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oUe(e,t){if(e){if(typeof e=="string")return GP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GP(e,t)}}function lUe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cUe(e){if(Array.isArray(e))return GP(e)}function GP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V_(){return V_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V_.apply(this,arguments)}function e8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function t8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e8(Object(r),!0).forEach(function(n){uUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uUe(e,t,r){return t=dUe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dUe(e){var t=fUe(e,"string");return vx(t)=="symbol"?t:t+""}function fUe(e,t){if(vx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r8(e,t){if(e==null)return{};var r=hUe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hUe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var mUe=function(t){return Array.isArray(t.value)?rUe(t.value):t.value};function Ta(e){var t=e.valueAccessor,r=t===void 0?mUe:t,n=r8(e,nUe),a=n.data,s=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=r8(n,aUe);return!a||!a.length?null:G.createElement(Zr,{className:"recharts-label-list"},a.map(function(d,f){var h=Sr(s)?r(d,f):ns(d&&d.payload,s),p=Sr(l)?{}:{id:"".concat(l,"-").concat(f)};return G.createElement(ba,V_({},Qt(d,!0),u,p,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:ba.parseViewBox(Sr(o)?d:t8(t8({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Ta.displayName="LabelList";function pUe(e,t){return e?e===!0?G.createElement(Ta,{key:"labelList-implicit",data:t}):G.isValidElement(e)||rr(e)?G.createElement(Ta,{key:"labelList-implicit",data:t,content:e}):a0(e)?G.createElement(Ta,V_({data:t},e,{key:"labelList-implicit"})):null:null}function gUe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=ro(n,Ta).map(function(o,l){return x.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var s=pUe(e.label,t);return[s].concat(sUe(a))}Ta.renderCallByParent=gUe;function xx(e){"@babel/helpers - typeof";return xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xx(e)}function KP(){return KP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KP.apply(this,arguments)}function n8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function a8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n8(Object(r),!0).forEach(function(n){vUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vUe(e,t,r){return t=xUe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xUe(e){var t=yUe(e,"string");return xx(t)=="symbol"?t:t+""}function yUe(e,t){if(xx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bUe=function(t,r){var n=_s(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},Jb=function(t){var r=t.cx,n=t.cy,a=t.radius,s=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/W_,h=u?s:s+o*f,p=un(r,n,d,h),v=un(r,n,a,h),m=u?s-o*f:s,g=un(r,n,d*Math.cos(f*W_),m);return{center:p,circleTangency:v,lineTangency:g,theta:f}},zee=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.startAngle,l=t.endAngle,c=bUe(o,l),u=o+c,d=un(r,n,s,o),f=un(r,n,s,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var p=un(r,n,a,o),v=un(r,n,a,u);h+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},wUe=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=_s(d-u),h=Jb({cx:r,cy:n,radius:s,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),p=h.circleTangency,v=h.lineTangency,m=h.theta,g=Jb({cx:r,cy:n,radius:s,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),b=g.circleTangency,y=g.lineTangency,w=g.theta,_=c?Math.abs(u-d):Math.abs(u-d)-m-w;if(_<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):zee({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d});var S="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
  `);if(a>0){var E=Jb({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),j=E.circleTangency,N=E.lineTangency,k=E.theta,C=Jb({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=C.circleTangency,A=C.lineTangency,B=C.theta,R=c?Math.abs(u-d):Math.abs(u-d)-k-B;if(R<0&&o===0)return"".concat(S,"L").concat(r,",").concat(n,"Z");S+="L".concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(R>180),",").concat(+(f>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(N.x,",").concat(N.y,"Z")}else S+="L".concat(r,",").concat(n,"Z");return S},_Ue={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Wee=function(t){var r=a8(a8({},_Ue),t),n=r.cx,a=r.cy,s=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(o<s||d===f)return null;var p=hr("recharts-sector",h),v=o-s,m=Ss(l,v,0,!0),g;return m>0&&Math.abs(d-f)<360?g=wUe({cx:n,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(m,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):g=zee({cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:d,endAngle:f}),G.createElement("path",KP({},Qt(r,!0),{className:p,d:g,role:"img"}))};function yx(e){"@babel/helpers - typeof";return yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yx(e)}function XP(){return XP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XP.apply(this,arguments)}function s8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function i8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s8(Object(r),!0).forEach(function(n){SUe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SUe(e,t,r){return t=jUe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jUe(e){var t=EUe(e,"string");return yx(t)=="symbol"?t:t+""}function EUe(e,t){if(yx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o8={curveBasisClosed:SRe,curveBasisOpen:jRe,curveBasis:_Re,curveBumpX:lRe,curveBumpY:cRe,curveLinearClosed:ERe,curveLinear:y2,curveMonotoneX:NRe,curveMonotoneY:CRe,curveNatural:kRe,curveStep:TRe,curveStepAfter:PRe,curveStepBefore:ARe},Qb=function(t){return t.x===+t.x&&t.y===+t.y},H0=function(t){return t.x},q0=function(t){return t.y},NUe=function(t,r){if(rr(t))return t;var n="curve".concat(v2(t));return(n==="curveMonotone"||n==="curveBump")&&r?o8["".concat(n).concat(r==="vertical"?"Y":"X")]:o8[n]||y2},CUe=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,s=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=NUe(n,l),f=u?s.filter(function(m){return Qb(m)}):s,h;if(Array.isArray(o)){var p=u?o.filter(function(m){return Qb(m)}):o,v=f.map(function(m,g){return i8(i8({},m),{},{base:p[g]})});return l==="vertical"?h=Wb().y(q0).x1(H0).x0(function(m){return m.base.x}):h=Wb().x(H0).y1(q0).y0(function(m){return m.base.y}),h.defined(Qb).curve(d),h(v)}return l==="vertical"&&ft(o)?h=Wb().y(q0).x1(H0).x0(o):ft(o)?h=Wb().x(H0).y1(q0).y0(o):h=$J().x(H0).y(q0),h.defined(Qb).curve(d),h(f)},YP=function(t){var r=t.className,n=t.points,a=t.path,s=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?CUe(t):a;return G.createElement("path",XP({},Qt(t,!1),p_(t),{className:hr("recharts-curve",r),d:o,ref:s}))},Vee={exports:{}},kUe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",TUe=kUe,AUe=TUe;function Hee(){}function qee(){}qee.resetWarningCache=Hee;var PUe=function(){function e(n,a,s,o,l,c){if(c!==AUe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:qee,resetWarningCache:Hee};return r.PropTypes=r,r};Vee.exports=PUe();var OUe=Vee.exports;const ur=zr(OUe);var RUe=Object.getOwnPropertyNames,DUe=Object.getOwnPropertySymbols,MUe=Object.prototype.hasOwnProperty;function l8(e,t){return function(n,a,s){return e(n,a,s)&&t(n,a,s)}}function e1(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var s=a.cache,o=s.get(r),l=s.get(n);if(o&&l)return o===n&&l===r;s.set(r,n),s.set(n,r);var c=e(r,n,a);return s.delete(r),s.delete(n),c}}function c8(e){return RUe(e).concat(DUe(e))}var Gee=Object.hasOwn||function(e,t){return MUe.call(e,t)};function m0(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var Kee="_owner",u8=Object.getOwnPropertyDescriptor,d8=Object.keys;function IUe(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function $Ue(e,t){return m0(e.getTime(),t.getTime())}function f8(e,t,r){if(e.size!==t.size)return!1;for(var n={},a=e.entries(),s=0,o,l;(o=a.next())&&!o.done;){for(var c=t.entries(),u=!1,d=0;(l=c.next())&&!l.done;){var f=o.value,h=f[0],p=f[1],v=l.value,m=v[0],g=v[1];!u&&!n[d]&&(u=r.equals(h,m,s,d,e,t,r)&&r.equals(p,g,h,m,e,t,r))&&(n[d]=!0),d++}if(!u)return!1;s++}return!0}function FUe(e,t,r){var n=d8(e),a=n.length;if(d8(t).length!==a)return!1;for(var s;a-- >0;)if(s=n[a],s===Kee&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!Gee(t,s)||!r.equals(e[s],t[s],s,s,e,t,r))return!1;return!0}function G0(e,t,r){var n=c8(e),a=n.length;if(c8(t).length!==a)return!1;for(var s,o,l;a-- >0;)if(s=n[a],s===Kee&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!Gee(t,s)||!r.equals(e[s],t[s],s,s,e,t,r)||(o=u8(e,s),l=u8(t,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function LUe(e,t){return m0(e.valueOf(),t.valueOf())}function BUe(e,t){return e.source===t.source&&e.flags===t.flags}function h8(e,t,r){if(e.size!==t.size)return!1;for(var n={},a=e.values(),s,o;(s=a.next())&&!s.done;){for(var l=t.values(),c=!1,u=0;(o=l.next())&&!o.done;)!c&&!n[u]&&(c=r.equals(s.value,o.value,s.value,o.value,e,t,r))&&(n[u]=!0),u++;if(!c)return!1}return!0}function UUe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var zUe="[object Arguments]",WUe="[object Boolean]",VUe="[object Date]",HUe="[object Map]",qUe="[object Number]",GUe="[object Object]",KUe="[object RegExp]",XUe="[object Set]",YUe="[object String]",ZUe=Array.isArray,m8=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,p8=Object.assign,JUe=Object.prototype.toString.call.bind(Object.prototype.toString);function QUe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,a=e.areObjectsEqual,s=e.arePrimitiveWrappersEqual,o=e.areRegExpsEqual,l=e.areSetsEqual,c=e.areTypedArraysEqual;return function(d,f,h){if(d===f)return!0;if(d==null||f==null||typeof d!="object"||typeof f!="object")return d!==d&&f!==f;var p=d.constructor;if(p!==f.constructor)return!1;if(p===Object)return a(d,f,h);if(ZUe(d))return t(d,f,h);if(m8!=null&&m8(d))return c(d,f,h);if(p===Date)return r(d,f,h);if(p===RegExp)return o(d,f,h);if(p===Map)return n(d,f,h);if(p===Set)return l(d,f,h);var v=JUe(d);return v===VUe?r(d,f,h):v===KUe?o(d,f,h):v===HUe?n(d,f,h):v===XUe?l(d,f,h):v===GUe?typeof d.then!="function"&&typeof f.then!="function"&&a(d,f,h):v===zUe?a(d,f,h):v===WUe||v===qUe||v===YUe?s(d,f,h):!1}}function eze(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?G0:IUe,areDatesEqual:$Ue,areMapsEqual:n?l8(f8,G0):f8,areObjectsEqual:n?G0:FUe,arePrimitiveWrappersEqual:LUe,areRegExpsEqual:BUe,areSetsEqual:n?l8(h8,G0):h8,areTypedArraysEqual:n?G0:UUe};if(r&&(a=p8({},a,r(a))),t){var s=e1(a.areArraysEqual),o=e1(a.areMapsEqual),l=e1(a.areObjectsEqual),c=e1(a.areSetsEqual);a=p8({},a,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function tze(e){return function(t,r,n,a,s,o,l){return e(t,r,l)}}function rze(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,s=e.strict;if(n)return function(c,u){var d=n(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,p=d.meta;return r(c,u,{cache:h,equals:a,meta:p,strict:s})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var o={cache:void 0,equals:a,meta:void 0,strict:s};return function(c,u){return r(c,u,o)}}var nze=hd();hd({strict:!0});hd({circular:!0});hd({circular:!0,strict:!0});hd({createInternalComparator:function(){return m0}});hd({strict:!0,createInternalComparator:function(){return m0}});hd({circular:!0,createInternalComparator:function(){return m0}});hd({circular:!0,createInternalComparator:function(){return m0},strict:!0});function hd(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,s=e.strict,o=s===void 0?!1:s,l=eze(e),c=QUe(l),u=n?n(c):tze(c);return rze({circular:r,comparator:c,createState:a,equals:u,strict:o})}function aze(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function g8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(s){r<0&&(r=s),s-r>t?(e(s),r=-1):aze(a)};requestAnimationFrame(n)}function ZP(e){"@babel/helpers - typeof";return ZP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ZP(e)}function sze(e){return cze(e)||lze(e)||oze(e)||ize()}function ize(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oze(e,t){if(e){if(typeof e=="string")return v8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v8(e,t)}}function v8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lze(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cze(e){if(Array.isArray(e))return e}function uze(){var e={},t=function(){return null},r=!1,n=function a(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,l=sze(o),c=l[0],u=l.slice(1);if(typeof c=="number"){g8(a.bind(null,u),c);return}a(c),g8(a.bind(null,u));return}ZP(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,n(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function bx(e){"@babel/helpers - typeof";return bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bx(e)}function x8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x8(Object(r),!0).forEach(function(n){Xee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xee(e,t,r){return t=dze(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dze(e){var t=fze(e,"string");return bx(t)==="symbol"?t:String(t)}function fze(e,t){if(bx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bx(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hze=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(s){return a.includes(s)})})},mze=function(t){return t},pze=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Lg=function(t,r){return Object.keys(r).reduce(function(n,a){return y8(y8({},n),{},Xee({},a,t(a,r[a])))},{})},b8=function(t,r,n){return t.map(function(a){return"".concat(pze(a)," ").concat(r,"ms ").concat(n)}).join(",")};function gze(e,t){return yze(e)||xze(e,t)||Yee(e,t)||vze()}function vze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xze(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function yze(e){if(Array.isArray(e))return e}function bze(e){return Sze(e)||_ze(e)||Yee(e)||wze()}function wze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yee(e,t){if(e){if(typeof e=="string")return JP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JP(e,t)}}function _ze(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Sze(e){if(Array.isArray(e))return JP(e)}function JP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H_=1e-4,Zee=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},Jee=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},w8=function(t,r){return function(n){var a=Zee(t,r);return Jee(a,n)}},jze=function(t,r){return function(n){var a=Zee(t,r),s=[].concat(bze(a.map(function(o,l){return o*l}).slice(1)),[0]);return Jee(s,n)}},_8=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],s=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,s=0,o=1,l=1;break;case"ease":a=.25,s=.1,o=.25,l=1;break;case"ease-in":a=.42,s=0,o=1,l=1;break;case"ease-out":a=.42,s=0,o=.58,l=1;break;case"ease-in-out":a=0,s=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),d=gze(u,4);a=d[0],s=d[1],o=d[2],l=d[3]}}}var f=w8(a,o),h=w8(s,l),p=jze(a,o),v=function(b){return b>1?1:b<0?0:b},m=function(b){for(var y=b>1?1:b,w=y,_=0;_<8;++_){var S=f(w)-y,E=p(w);if(Math.abs(S-y)<H_||E<H_)return h(w);w=v(w-S/E)}return h(w)};return m.isStepper=!1,m},Eze=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,s=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,f,h){var p=-(d-f)*n,v=h*s,m=h+(p-v)*l/1e3,g=h*l/1e3+d;return Math.abs(g-f)<H_&&Math.abs(m)<H_?[f,0]:[g,m]};return c.isStepper=!0,c.dt=l,c},Nze=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _8(a);case"spring":return Eze();default:if(a.split("(")[0]==="cubic-bezier")return _8(a)}return typeof a=="function"?a:null};function wx(e){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wx(e)}function S8(e){return Tze(e)||kze(e)||Qee(e)||Cze()}function Cze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kze(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tze(e){if(Array.isArray(e))return eO(e)}function j8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ca(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j8(Object(r),!0).forEach(function(n){QP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QP(e,t,r){return t=Aze(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aze(e){var t=Pze(e,"string");return wx(t)==="symbol"?t:String(t)}function Pze(e,t){if(wx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wx(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oze(e,t){return Mze(e)||Dze(e,t)||Qee(e,t)||Rze()}function Rze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qee(e,t){if(e){if(typeof e=="string")return eO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eO(e,t)}}function eO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dze(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Mze(e){if(Array.isArray(e))return e}var q_=function(t,r,n){return t+(r-t)*n},tO=function(t){var r=t.from,n=t.to;return r!==n},Ize=function e(t,r,n){var a=Lg(function(s,o){if(tO(o)){var l=t(o.from,o.to,o.velocity),c=Oze(l,2),u=c[0],d=c[1];return Ca(Ca({},o),{},{from:u,velocity:d})}return o},r);return n<1?Lg(function(s,o){return tO(o)?Ca(Ca({},o),{},{velocity:q_(o.velocity,a[s].velocity,n),from:q_(o.from,a[s].from,n)}):o},r):e(t,a,n-1)};const $ze=function(e,t,r,n,a){var s=hze(e,t),o=s.reduce(function(g,b){return Ca(Ca({},g),{},QP({},b,[e[b],t[b]]))},{}),l=s.reduce(function(g,b){return Ca(Ca({},g),{},QP({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return Lg(function(b,y){return y.from},l)},p=function(){return!Object.values(l).filter(tO).length},v=function(b){u||(u=b);var y=b-u,w=y/r.dt;l=Ize(r,l,w),a(Ca(Ca(Ca({},e),t),h())),u=b,p()||(c=requestAnimationFrame(f))},m=function(b){d||(d=b);var y=(b-d)/n,w=Lg(function(S,E){return q_.apply(void 0,S8(E).concat([r(y)]))},o);if(a(Ca(Ca(Ca({},e),t),w)),y<1)c=requestAnimationFrame(f);else{var _=Lg(function(S,E){return q_.apply(void 0,S8(E).concat([r(1)]))},o);a(Ca(Ca(Ca({},e),t),_))}};return f=r.isStepper?v:m,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function xp(e){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xp(e)}var Fze=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Lze(e,t){if(e==null)return{};var r=Bze(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bze(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function rC(e){return Vze(e)||Wze(e)||zze(e)||Uze()}function Uze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zze(e,t){if(e){if(typeof e=="string")return rO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rO(e,t)}}function Wze(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Vze(e){if(Array.isArray(e))return rO(e)}function rO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E8(Object(r),!0).forEach(function(n){cg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cg(e,t,r){return t=ete(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ete(n.key),n)}}function Gze(e,t,r){return t&&qze(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ete(e){var t=Kze(e,"string");return xp(t)==="symbol"?t:String(t)}function Kze(e,t){if(xp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nO(e,t)}function nO(e,t){return nO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},nO(e,t)}function Yze(e){var t=Zze();return function(){var n=G_(e),a;if(t){var s=G_(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return aO(this,a)}}function aO(e,t){if(t&&(xp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sO(e)}function sO(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function G_(e){return G_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},G_(e)}var kc=function(e){Xze(r,e);var t=Yze(r);function r(n,a){var s;Hze(this,r),s=t.call(this,n,a);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,h=o.children,p=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(sO(s)),s.changeStyle=s.changeStyle.bind(sO(s)),!l||p<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:d}),aO(s);if(f&&f.length)s.state={style:f[0].style};else if(u){if(typeof h=="function")return s.state={style:u},aO(s);s.state={style:c?cg({},c,u):u}}else s.state={style:{}};return s}return Gze(r,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,o=a.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,d=s.to,f=s.from,h=this.state.style;if(l){if(!o){var p={style:c?cg({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(p);return}if(!(nze(a.to,d)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=v||u?f:a.to;if(this.state&&h){var g={style:c?cg({},c,m):m};(c&&h[c]!==m||!c&&h!==m)&&this.setState(g)}this.runAnimation(bo(bo({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,p=$ze(o,l,Nze(u),c,this.changeStyle),v=function(){s.stopJSAnimation=p()};this.manager.start([h,d,v,c,f])}},{key:"runStepAnimation",value:function(a){var s=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,f=u.duration,h=f===void 0?0:f,p=function(m,g,b){if(b===0)return m;var y=g.duration,w=g.easing,_=w===void 0?"ease":w,S=g.style,E=g.properties,j=g.onAnimationEnd,N=b>0?o[b-1]:g,k=E||Object.keys(S);if(typeof _=="function"||_==="spring")return[].concat(rC(m),[s.runJSAnimation.bind(s,{from:N.style,to:S,duration:y,easing:_}),y]);var C=b8(k,y,_),T=bo(bo(bo({},N.style),S),{},{transition:C});return[].concat(rC(m),[T,y,j]).filter(mze)};return this.manager.start([c].concat(rC(o.reduce(p,[d,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=uze());var s=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,p=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var m=l?cg({},l,c):c,g=b8(Object.keys(m),o,u);v.start([d,s,bo(bo({},m),{},{transition:g}),o,f])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=Lze(a,Fze),u=x.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!l||u===0||o<=0)return s;var f=function(p){var v=p.props,m=v.style,g=m===void 0?{}:m,b=v.className,y=x.cloneElement(p,bo(bo({},c),{},{style:bo(bo({},g),d),className:b}));return y};return u===1?f(x.Children.only(s)):G.createElement("div",null,x.Children.map(s,function(h){return f(h)}))}}]),r}(x.PureComponent);kc.displayName="Animate";kc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};kc.propTypes={from:ur.oneOfType([ur.object,ur.string]),to:ur.oneOfType([ur.object,ur.string]),attributeName:ur.string,duration:ur.number,begin:ur.number,easing:ur.oneOfType([ur.string,ur.func]),steps:ur.arrayOf(ur.shape({duration:ur.number.isRequired,style:ur.object.isRequired,easing:ur.oneOfType([ur.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ur.func]),properties:ur.arrayOf("string"),onAnimationEnd:ur.func})),children:ur.oneOfType([ur.node,ur.func]),isActive:ur.bool,canBegin:ur.bool,onAnimationEnd:ur.func,shouldReAnimate:ur.bool,onAnimationStart:ur.func,onAnimationReStart:ur.func};ur.object,ur.object,ur.object,ur.element;ur.object,ur.object,ur.object,ur.oneOfType([ur.array,ur.element]),ur.any;function _x(e){"@babel/helpers - typeof";return _x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_x(e)}function K_(){return K_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K_.apply(this,arguments)}function Jze(e,t){return rWe(e)||tWe(e,t)||eWe(e,t)||Qze()}function Qze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eWe(e,t){if(e){if(typeof e=="string")return N8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N8(e,t)}}function N8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tWe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function rWe(e){if(Array.isArray(e))return e}function C8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function k8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C8(Object(r),!0).forEach(function(n){nWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nWe(e,t,r){return t=aWe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aWe(e){var t=sWe(e,"string");return _x(t)=="symbol"?t:t+""}function sWe(e,t){if(_x(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_x(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var T8=function(t,r,n,a,s){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(o>0&&s instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=s[h]>o?o:s[h];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*f[3])),d+="Z"}else if(o>0&&s===+s&&s>0){var v=Math.min(o,s);d="M ".concat(t,",").concat(r+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+c*v,",").concat(r,`
            L `).concat(t+n-c*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*v,`
            L `).concat(t+n,",").concat(r+a-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+n-c*v,",").concat(r+a,`
            L `).concat(t+c*v,",").concat(r+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*v," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},iWe=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,s=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),d=Math.max(s,s+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return n>=u&&n<=d&&a>=f&&a<=h}return!1},oWe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},AM=function(t){var r=k8(k8({},oWe),t),n=x.useRef(),a=x.useState(-1),s=Jze(a,2),o=s[0],l=s[1];x.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&l(_)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,p=r.className,v=r.animationEasing,m=r.animationDuration,g=r.animationBegin,b=r.isAnimationActive,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var w=hr("recharts-rectangle",p);return y?G.createElement(kc,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:m,animationEasing:v,isActive:y},function(_){var S=_.width,E=_.height,j=_.x,N=_.y;return G.createElement(kc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,isActive:b,easing:v},G.createElement("path",K_({},Qt(r,!0),{className:w,d:T8(j,N,S,E,h),ref:n})))}):G.createElement("path",K_({},Qt(r,!0),{className:w,d:T8(c,u,d,f,h)}))},lWe=["points","className","baseLinePoints","connectNulls"];function Qh(){return Qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qh.apply(this,arguments)}function cWe(e,t){if(e==null)return{};var r=uWe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function uWe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function A8(e){return mWe(e)||hWe(e)||fWe(e)||dWe()}function dWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fWe(e,t){if(e){if(typeof e=="string")return iO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iO(e,t)}}function hWe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mWe(e){if(Array.isArray(e))return iO(e)}function iO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var P8=function(t){return t&&t.x===+t.x&&t.y===+t.y},pWe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){P8(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),P8(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Bg=function(t,r){var n=pWe(t);r&&(n=[n.reduce(function(s,o){return[].concat(A8(s),A8(o))},[])]);var a=n.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},gWe=function(t,r,n){var a=Bg(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Bg(r.reverse(),n).slice(1))},vWe=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,s=t.connectNulls,o=cWe(t,lWe);if(!r||!r.length)return null;var l=hr("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=gWe(r,a,s);return G.createElement("g",{className:l},G.createElement("path",Qh({},Qt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?G.createElement("path",Qh({},Qt(o,!0),{fill:"none",d:Bg(r,s)})):null,c?G.createElement("path",Qh({},Qt(o,!0),{fill:"none",d:Bg(a,s)})):null)}var d=Bg(r,s);return G.createElement("path",Qh({},Qt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function oO(){return oO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oO.apply(this,arguments)}var PM=function(t){var r=t.cx,n=t.cy,a=t.r,s=t.className,o=hr("recharts-dot",s);return r===+r&&n===+n&&a===+a?G.createElement("circle",oO({},Qt(t,!1),p_(t),{className:o,cx:r,cy:n,r:a})):null};function Sx(e){"@babel/helpers - typeof";return Sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sx(e)}var xWe=["x","y","top","left","width","height","className"];function lO(){return lO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lO.apply(this,arguments)}function O8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yWe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O8(Object(r),!0).forEach(function(n){bWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bWe(e,t,r){return t=wWe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wWe(e){var t=_We(e,"string");return Sx(t)=="symbol"?t:t+""}function _We(e,t){if(Sx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Sx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SWe(e,t){if(e==null)return{};var r=jWe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jWe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var EWe=function(t,r,n,a,s,o){return"M".concat(t,",").concat(s,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},NWe=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,s=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,p=h===void 0?0:h,v=t.className,m=SWe(t,xWe),g=yWe({x:n,y:s,top:l,left:u,width:f,height:p},m);return!ft(n)||!ft(s)||!ft(f)||!ft(p)||!ft(l)||!ft(u)?null:G.createElement("path",lO({},Qt(g,!0),{className:hr("recharts-cross",v),d:EWe(n,s,f,p,l,u)}))},CWe=P2,kWe=dee,TWe=Ml;function AWe(e,t){return e&&e.length?CWe(e,TWe(t),kWe):void 0}var PWe=AWe;const OWe=zr(PWe);var RWe=P2,DWe=Ml,MWe=fee;function IWe(e,t){return e&&e.length?RWe(e,DWe(t),MWe):void 0}var $We=IWe;const FWe=zr($We);var LWe=["cx","cy","angle","ticks","axisLine"],BWe=["ticks","tick","angle","tickFormatter","stroke"];function yp(e){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yp(e)}function Ug(){return Ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ug.apply(this,arguments)}function R8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R8(Object(r),!0).forEach(function(n){F2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D8(e,t){if(e==null)return{};var r=UWe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function UWe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function zWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rte(n.key),n)}}function WWe(e,t,r){return t&&M8(e.prototype,t),r&&M8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function VWe(e,t,r){return t=X_(t),HWe(e,tte()?Reflect.construct(t,r||[],X_(e).constructor):t.apply(e,r))}function HWe(e,t){if(t&&(yp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qWe(e)}function qWe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tte=function(){return!!e})()}function X_(e){return X_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},X_(e)}function GWe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cO(e,t)}function cO(e,t){return cO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},cO(e,t)}function F2(e,t,r){return t=rte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rte(e){var t=KWe(e,"string");return yp(t)=="symbol"?t:t+""}function KWe(e,t){if(yp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L2=function(e){function t(){return zWe(this,t),VWe(this,t,arguments)}return GWe(t,e),WWe(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return un(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,s=n.cy,o=n.angle,l=n.ticks,c=OWe(l,function(d){return d.coordinate||0}),u=FWe(l,function(d){return d.coordinate||0});return{cx:a,cy:s,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,s=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=D8(n,LWe),d=l.reduce(function(v,m){return[Math.min(v[0],m.coordinate),Math.max(v[1],m.coordinate)]},[1/0,-1/0]),f=un(a,s,d[0],o),h=un(a,s,d[1],o),p=bd(bd(bd({},Qt(u,!1)),{},{fill:"none"},Qt(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return G.createElement("line",Ug({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,a=this.props,s=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=D8(a,BWe),f=this.getTickTextAnchor(),h=Qt(d,!1),p=Qt(o,!1),v=s.map(function(m,g){var b=n.getTickValueCoord(m),y=bd(bd(bd(bd({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(b.x,", ").concat(b.y,")")},h),{},{stroke:"none",fill:u},p),{},{index:g},b),{},{payload:m});return G.createElement(Zr,Ug({className:hr("recharts-polar-radius-axis-tick",Bee(o)),key:"tick-".concat(m.coordinate)},Mf(n.props,m,g)),t.renderTickItem(o,y,c?c(m.value,g):m.value))});return G.createElement(Zr,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,a=n.ticks,s=n.axisLine,o=n.tick;return!a||!a.length?null:G.createElement(Zr,{className:hr("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),ba.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,s){var o;return G.isValidElement(n)?o=G.cloneElement(n,a):rr(n)?o=n(a):o=G.createElement(If,Ug({},a,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(x.PureComponent);F2(L2,"displayName","PolarRadiusAxis");F2(L2,"axisType","radiusAxis");F2(L2,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function bp(e){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bp(e)}function Dd(){return Dd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dd.apply(this,arguments)}function I8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I8(Object(r),!0).forEach(function(n){B2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ate(n.key),n)}}function YWe(e,t,r){return t&&$8(e.prototype,t),r&&$8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZWe(e,t,r){return t=Y_(t),JWe(e,nte()?Reflect.construct(t,r||[],Y_(e).constructor):t.apply(e,r))}function JWe(e,t){if(t&&(bp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QWe(e)}function QWe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nte=function(){return!!e})()}function Y_(e){return Y_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Y_(e)}function eVe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uO(e,t)}function uO(e,t){return uO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uO(e,t)}function B2(e,t,r){return t=ate(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ate(e){var t=tVe(e,"string");return bp(t)=="symbol"?t:t+""}function tVe(e,t){if(bp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rVe=Math.PI/180,F8=1e-5,U2=function(e){function t(){return XWe(this,t),ZWe(this,t,arguments)}return eVe(t,e),YWe(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,s=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=un(s,o,l,n.coordinate),h=un(s,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,s=Math.cos(-n.coordinate*rVe),o;return s>F8?o=a==="outer"?"start":"end":s<-F8?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,s=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=wd(wd({},Qt(this.props,!1)),{},{fill:"none"},Qt(l,!1));if(c==="circle")return G.createElement(PM,Dd({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:s,r:o}));var d=this.props.ticks,f=d.map(function(h){return un(a,s,o,h.coordinate)});return G.createElement(vWe,Dd({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,s=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=Qt(this.props,!1),f=Qt(o,!1),h=wd(wd({},d),{},{fill:"none"},Qt(l,!1)),p=s.map(function(v,m){var g=n.getTickLineCoord(v),b=n.getTickTextAnchor(v),y=wd(wd(wd({textAnchor:b},d),{},{stroke:"none",fill:u},f),{},{index:m,payload:v,x:g.x2,y:g.y2});return G.createElement(Zr,Dd({className:hr("recharts-polar-angle-axis-tick",Bee(o)),key:"tick-".concat(v.coordinate)},Mf(n.props,v,m)),l&&G.createElement("line",Dd({className:"recharts-polar-angle-axis-tick-line"},h,g)),o&&t.renderTickItem(o,y,c?c(v.value,m):v.value))});return G.createElement(Zr,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,a=n.ticks,s=n.radius,o=n.axisLine;return s<=0||!a||!a.length?null:G.createElement(Zr,{className:hr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,s){var o;return G.isValidElement(n)?o=G.cloneElement(n,a):rr(n)?o=n(a):o=G.createElement(If,Dd({},a,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(x.PureComponent);B2(U2,"displayName","PolarAngleAxis");B2(U2,"axisType","angleAxis");B2(U2,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var nVe=oQ,aVe=nVe(Object.getPrototypeOf,Object),sVe=aVe,iVe=Ic,oVe=sVe,lVe=$c,cVe="[object Object]",uVe=Function.prototype,dVe=Object.prototype,ste=uVe.toString,fVe=dVe.hasOwnProperty,hVe=ste.call(Object);function mVe(e){if(!lVe(e)||iVe(e)!=cVe)return!1;var t=oVe(e);if(t===null)return!0;var r=fVe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&ste.call(r)==hVe}var pVe=mVe;const gVe=zr(pVe);var vVe=Ic,xVe=$c,yVe="[object Boolean]";function bVe(e){return e===!0||e===!1||xVe(e)&&vVe(e)==yVe}var wVe=bVe;const _Ve=zr(wVe);function jx(e){"@babel/helpers - typeof";return jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jx(e)}function Z_(){return Z_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z_.apply(this,arguments)}function SVe(e,t){return CVe(e)||NVe(e,t)||EVe(e,t)||jVe()}function jVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EVe(e,t){if(e){if(typeof e=="string")return L8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L8(e,t)}}function L8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function NVe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function CVe(e){if(Array.isArray(e))return e}function B8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function U8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B8(Object(r),!0).forEach(function(n){kVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kVe(e,t,r){return t=TVe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TVe(e){var t=AVe(e,"string");return jx(t)=="symbol"?t:t+""}function AVe(e,t){if(jx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var z8=function(t,r,n,a,s){var o=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+s),l+="L ".concat(t+n-o/2-a,",").concat(r+s),l+="L ".concat(t,",").concat(r," Z"),l},PVe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},OVe=function(t){var r=U8(U8({},PVe),t),n=x.useRef(),a=x.useState(-1),s=SVe(a,2),o=s[0],l=s[1];x.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,p=r.className,v=r.animationEasing,m=r.animationDuration,g=r.animationBegin,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var y=hr("recharts-trapezoid",p);return b?G.createElement(kc,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:m,animationEasing:v,isActive:b},function(w){var _=w.upperWidth,S=w.lowerWidth,E=w.height,j=w.x,N=w.y;return G.createElement(kc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,easing:v},G.createElement("path",Z_({},Qt(r,!0),{className:y,d:z8(j,N,_,S,E),ref:n})))}):G.createElement("g",null,G.createElement("path",Z_({},Qt(r,!0),{className:y,d:z8(c,u,d,f,h)})))},RVe=["option","shapeType","propTransformer","activeClassName","isActive"];function Ex(e){"@babel/helpers - typeof";return Ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ex(e)}function DVe(e,t){if(e==null)return{};var r=MVe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function MVe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function W8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function J_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W8(Object(r),!0).forEach(function(n){IVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IVe(e,t,r){return t=$Ve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Ve(e){var t=FVe(e,"string");return Ex(t)=="symbol"?t:t+""}function FVe(e,t){if(Ex(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ex(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LVe(e,t){return J_(J_({},t),e)}function BVe(e,t){return e==="symbols"}function V8(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return G.createElement(AM,r);case"trapezoid":return G.createElement(OVe,r);case"sector":return G.createElement(Wee,r);case"symbols":if(BVe(t))return G.createElement(XD,r);break;default:return null}}function UVe(e){return x.isValidElement(e)?e.props:e}function ite(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?LVe:n,s=e.activeClassName,o=s===void 0?"recharts-active-shape":s,l=e.isActive,c=DVe(e,RVe),u;if(x.isValidElement(t))u=x.cloneElement(t,J_(J_({},c),UVe(t)));else if(rr(t))u=t(c);else if(gVe(t)&&!_Ve(t)){var d=a(t,c);u=G.createElement(V8,{shapeType:r,elementProps:d})}else{var f=c;u=G.createElement(V8,{shapeType:r,elementProps:f})}return l?G.createElement(Zr,{className:o},u):u}function z2(e,t){return t!=null&&"trapezoids"in e.props}function W2(e,t){return t!=null&&"sectors"in e.props}function Nx(e,t){return t!=null&&"points"in e.props}function zVe(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,s=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&s}function WVe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function VVe(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function HVe(e,t){var r;return z2(e,t)?r=zVe:W2(e,t)?r=WVe:Nx(e,t)&&(r=VVe),r}function qVe(e,t){var r;return z2(e,t)?r="trapezoids":W2(e,t)?r="sectors":Nx(e,t)&&(r="points"),r}function GVe(e,t){if(z2(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(W2(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Nx(e,t)?t.payload:{}}function KVe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=qVe(r,t),s=GVe(r,t),o=n.filter(function(c,u){var d=D2(s,c),f=r.props[a].filter(function(v){var m=HVe(r,t);return m(v,t)}),h=r.props[a].indexOf(f[f.length-1]),p=u===h;return d&&p}),l=n.indexOf(o[o.length-1]);return l}var Z1;function wp(e){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(e)}function em(){return em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},em.apply(this,arguments)}function H8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H8(Object(r),!0).forEach(function(n){Yi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XVe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lte(n.key),n)}}function YVe(e,t,r){return t&&q8(e.prototype,t),r&&q8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZVe(e,t,r){return t=Q_(t),JVe(e,ote()?Reflect.construct(t,r||[],Q_(e).constructor):t.apply(e,r))}function JVe(e,t){if(t&&(wp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QVe(e)}function QVe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ote(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ote=function(){return!!e})()}function Q_(e){return Q_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q_(e)}function eHe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dO(e,t)}function dO(e,t){return dO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dO(e,t)}function Yi(e,t,r){return t=lte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lte(e){var t=tHe(e,"string");return wp(t)=="symbol"?t:t+""}function tHe(e,t){if(wp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xi=function(e){function t(r){var n;return XVe(this,t),n=ZVe(this,t,[r]),Yi(n,"pieRef",null),Yi(n,"sectorRefs",[]),Yi(n,"id",Cy("recharts-pie-")),Yi(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),rr(a)&&a()}),Yi(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),rr(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return eHe(t,e),YVe(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,u=s.valueKey,d=Qt(this.props,!1),f=Qt(o,!1),h=Qt(l,!1),p=o&&o.offsetRadius||20,v=n.map(function(m,g){var b=(m.startAngle+m.endAngle)/2,y=un(m.cx,m.cy,m.outerRadius+p,b),w=sn(sn(sn(sn({},d),m),{},{stroke:"none"},f),{},{index:g,textAnchor:t.getTextAnchor(y.x,m.cx)},y),_=sn(sn(sn(sn({},d),m),{},{fill:"none",stroke:m.fill},h),{},{index:g,points:[un(m.cx,m.cy,m.outerRadius,b),y]}),S=c;return Sr(c)&&Sr(u)?S="value":Sr(c)&&(S=u),G.createElement(Zr,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(g)},l&&t.renderLabelLineItem(l,_,"line"),t.renderLabelItem(o,w,ns(m,S)))});return G.createElement(Zr,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(n){var a=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),h=c&&a.hasActiveIndex()?c:null,p=f?o:h,v=sn(sn({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return G.createElement(Zr,em({ref:function(g){g&&!a.sectorRefs.includes(g)&&a.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Mf(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),G.createElement(ite,em({option:p,isActive:f,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,s=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,h=f.prevSectors,p=f.prevIsAnimationActive;return G.createElement(kc,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var m=v.t,g=[],b=s&&s[0],y=b.startAngle;return s.forEach(function(w,_){var S=h&&h[_],E=_>0?Ei(w,"paddingAngle",0):0;if(S){var j=nu(S.endAngle-S.startAngle,w.endAngle-w.startAngle),N=sn(sn({},w),{},{startAngle:y+E,endAngle:y+j(m)+E});g.push(N),y=N.endAngle}else{var k=w.endAngle,C=w.startAngle,T=nu(0,k-C),A=T(m),B=sn(sn({},w),{},{startAngle:y+E,endAngle:y+A+E});g.push(B),y=B.endAngle}}),G.createElement(Zr,null,n.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,s=n.isAnimationActive,o=this.state.prevSectors;return s&&a&&a.length&&(!o||!D2(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,s=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,h=a.outerRadius,p=a.isAnimationActive,v=this.state.isAnimationFinished;if(s||!o||!o.length||!ft(u)||!ft(d)||!ft(f)||!ft(h))return null;var m=hr("recharts-pie",l);return G.createElement(Zr,{tabIndex:this.props.rootTabIndex,className:m,ref:function(b){n.pieRef=b}},this.renderSectors(),c&&this.renderLabels(o),ba.renderCallByParent(this.props,null,!1),(!p||v)&&Ta.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,s){if(G.isValidElement(n))return G.cloneElement(n,a);if(rr(n))return n(a);var o=hr("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return G.createElement(YP,em({},a,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,s){if(G.isValidElement(n))return G.cloneElement(n,a);var o=s;if(rr(n)&&(o=n(a),G.isValidElement(o)))return o;var l=hr("recharts-pie-label-text",typeof n!="boolean"&&!rr(n)?n.className:"");return G.createElement(If,em({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(x.PureComponent);Z1=xi;Yi(xi,"displayName","Pie");Yi(xi,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!hc.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Yi(xi,"parseDeltaAngle",function(e,t){var r=_s(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Yi(xi,"getRealPieData",function(e){var t=e.data,r=e.children,n=Qt(e,!1),a=ro(r,j2);return t&&t.length?t.map(function(s,o){return sn(sn(sn({payload:s},n),s),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(s){return sn(sn({},n),s.props)}):[]});Yi(xi,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,s=t.height,o=Lee(a,s),l=n+Ss(e.cx,a,a/2),c=r+Ss(e.cy,s,s/2),u=Ss(e.innerRadius,o,0),d=Ss(e.outerRadius,o,o*.8),f=e.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Yi(xi,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?sn(sn({},t.type.defaultProps),t.props):t.props,a=Z1.getRealPieData(n);if(!a||!a.length)return null;var s=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,p=Math.abs(n.minAngle),v=Z1.parseCoordinateOfPie(n,r),m=Z1.parseDeltaAngle(o,l),g=Math.abs(m),b=u;Sr(u)&&Sr(f)?(Xo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):Sr(u)&&(Xo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=f);var y=a.filter(function(N){return ns(N,b,0)!==0}).length,w=(g>=360?y:y-1)*c,_=g-y*p-w,S=a.reduce(function(N,k){var C=ns(k,b,0);return N+(ft(C)?C:0)},0),E;if(S>0){var j;E=a.map(function(N,k){var C=ns(N,b,0),T=ns(N,d,k),A=(ft(C)?C:0)/S,B;k?B=j.endAngle+_s(m)*c*(C!==0?1:0):B=o;var R=B+_s(m)*((C!==0?p:0)+A*_),P=(B+R)/2,D=(v.innerRadius+v.outerRadius)/2,U=[{name:T,value:C,payload:N,dataKey:b,type:h}],M=un(v.cx,v.cy,D,P);return j=sn(sn(sn({percent:A,cornerRadius:s,name:T,tooltipPayload:U,midAngle:P,middleRadius:D,tooltipPosition:M},N),v),{},{value:ns(N,b),startAngle:B,endAngle:R,payload:N,paddingAngle:_s(m)*c}),j})}return sn(sn({},v),{},{sectors:E,data:a})});var rHe=Math.ceil,nHe=Math.max;function aHe(e,t,r,n){for(var a=-1,s=nHe(rHe((t-e)/(r||1)),0),o=Array(s);s--;)o[n?s:++a]=e,e+=r;return o}var sHe=aHe,iHe=NQ,G8=1/0,oHe=17976931348623157e292;function lHe(e){if(!e)return e===0?e:0;if(e=iHe(e),e===G8||e===-G8){var t=e<0?-1:1;return t*oHe}return e===e?e:0}var cte=lHe,cHe=sHe,uHe=S2,nC=cte;function dHe(e){return function(t,r,n){return n&&typeof n!="number"&&uHe(t,r,n)&&(r=n=void 0),t=nC(t),r===void 0?(r=t,t=0):r=nC(r),n=n===void 0?t<r?1:-1:nC(n),cHe(t,r,n,e)}}var fHe=dHe,hHe=fHe,mHe=hHe(),pHe=mHe;const eS=zr(pHe);function Cx(e){"@babel/helpers - typeof";return Cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cx(e)}function K8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function X8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K8(Object(r),!0).forEach(function(n){ute(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ute(e,t,r){return t=gHe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gHe(e){var t=vHe(e,"string");return Cx(t)=="symbol"?t:t+""}function vHe(e,t){if(Cx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xHe=["Webkit","Moz","O","ms"],yHe=function(t,r){var n=t.replace(/(\w)/,function(s){return s.toUpperCase()}),a=xHe.reduce(function(s,o){return X8(X8({},s),{},ute({},o+n,r))},{});return a[t]=r,a};function _p(e){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_p(e)}function tS(){return tS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tS.apply(this,arguments)}function Y8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y8(Object(r),!0).forEach(function(n){ci(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bHe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fte(n.key),n)}}function wHe(e,t,r){return t&&Z8(e.prototype,t),r&&Z8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _He(e,t,r){return t=rS(t),SHe(e,dte()?Reflect.construct(t,r||[],rS(e).constructor):t.apply(e,r))}function SHe(e,t){if(t&&(_p(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jHe(e)}function jHe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dte=function(){return!!e})()}function rS(e){return rS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rS(e)}function EHe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fO(e,t)}function fO(e,t){return fO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},fO(e,t)}function ci(e,t,r){return t=fte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fte(e){var t=NHe(e,"string");return _p(t)=="symbol"?t:t+""}function NHe(e,t){if(_p(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CHe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,s=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=$g().domain(eS(0,c)).range([s,s+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},J8=function(t){return t.changedTouches&&!!t.changedTouches.length},Sp=function(e){function t(r){var n;return bHe(this,t),n=_He(this,t,[r]),ci(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),ci(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),ci(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,s=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:s,startIndex:l})}),n.detachDragEndListener()}),ci(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),ci(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),ci(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),ci(n,"handleSlideDragStart",function(a){var s=J8(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return EHe(t,e),wHe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,s=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,s),h=Math.max(a,s),p=t.getIndexInRange(o,f),v=t.getIndexInRange(o,h);return{startIndex:p-p%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,s=a.data,o=a.tickFormatter,l=a.dataKey,c=ns(s[n],l,n);return rr(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,s=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,p=c.endIndex,v=c.onChange,m=n.pageX-s;m>0?m=Math.min(m,u+d-f-l,u+d-f-o):m<0&&(m=Math.max(m,u-o,u-l));var g=this.getIndex({startX:o+m,endX:l+m});(g.startIndex!==h||g.endIndex!==p)&&v&&v(g),this.setState({startX:o+m,endX:l+m,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var s=J8(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,s=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,f=d.x,h=d.width,p=d.travellerWidth,v=d.onChange,m=d.gap,g=d.data,b={startX:this.state.startX,endX:this.state.endX},y=n.pageX-s;y>0?y=Math.min(y,f+h-p-u):y<0&&(y=Math.max(y,f-u)),b[o]=u+y;var w=this.getIndex(b),_=w.startIndex,S=w.endIndex,E=function(){var N=g.length-1;return o==="startX"&&(l>c?_%m===0:S%m===0)||l<c&&S===N||o==="endX"&&(l>c?S%m===0:_%m===0)||l>c&&S===N};this.setState(ci(ci({},o,u+y),"brushMoveStartX",n.pageX),function(){v&&E()&&v(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=l.length)){var p=l[h];a==="startX"&&p>=u||a==="endX"&&p<=c||this.setState(ci({},a,p),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,s=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return G.createElement("rect",{stroke:u,fill:c,x:a,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,s=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=x.Children.only(u);return f?G.cloneElement(f,{x:a,y:s,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var s,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,p=c.ariaLabel,v=c.data,m=c.startIndex,g=c.endIndex,b=Math.max(n,this.props.x),y=aC(aC({},Qt(this.props,!1)),{},{x:b,y:u,width:d,height:f}),w=p||"Min value: ".concat((s=v[m])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=v[g])===null||o===void 0?void 0:o.name);return G.createElement(Zr,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,y))}},{key:"renderSlide",value:function(n,a){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return G.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,s=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,p=5,v={pointerEvents:"none",fill:u};return G.createElement(Zr,{className:"recharts-brush-texts"},G.createElement(If,tS({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:o+l/2},v),this.getTextOfTick(a)),G.createElement(If,tS({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+p,y:o+l/2},v),this.getTextOfTick(s)))}},{key:"render",value:function(){var n=this.props,a=n.data,s=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,p=h.startX,v=h.endX,m=h.isTextActive,g=h.isSlideMoving,b=h.isTravellerMoving,y=h.isTravellerFocused;if(!a||!a.length||!ft(l)||!ft(c)||!ft(u)||!ft(d)||u<=0||d<=0)return null;var w=hr("recharts-brush",s),_=G.Children.count(o)===1,S=yHe("userSelect","none");return G.createElement(Zr,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(p,v),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(v,"endX"),(m||g||b||y||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,s=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(s+l/2)-1;return G.createElement(G.Fragment,null,G.createElement("rect",{x:a,y:s,width:o,height:l,fill:c,stroke:"none"}),G.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),G.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var s;return G.isValidElement(n)?s=G.cloneElement(n,a):rr(n)?s=n(a):s=t.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(n,a){var s=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(s!==a.prevData||u!==a.prevUpdateId)return aC({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?CHe({data:s,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var s=n.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(x.PureComponent);ci(Sp,"displayName","Brush");ci(Sp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var kHe=rM;function THe(e,t){var r;return kHe(e,function(n,a,s){return r=t(n,a,s),!r}),!!r}var AHe=THe,PHe=QJ,OHe=Ml,RHe=AHe,DHe=si,MHe=S2;function IHe(e,t,r){var n=DHe(e)?PHe:RHe;return r&&MHe(e,t,r)&&(t=void 0),n(e,OHe(t))}var $He=IHe;const FHe=zr($He);var Cl=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},Q8=wQ;function LHe(e,t,r){t=="__proto__"&&Q8?Q8(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var BHe=LHe,UHe=BHe,zHe=yQ,WHe=Ml;function VHe(e,t){var r={};return t=WHe(t),zHe(e,function(n,a,s){UHe(r,a,t(n,a,s))}),r}var HHe=VHe;const qHe=zr(HHe);function GHe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var KHe=GHe,XHe=rM;function YHe(e,t){var r=!0;return XHe(e,function(n,a,s){return r=!!t(n,a,s),r}),r}var ZHe=YHe,JHe=KHe,QHe=ZHe,eqe=Ml,tqe=si,rqe=S2;function nqe(e,t,r){var n=tqe(e)?JHe:QHe;return r&&rqe(e,t,r)&&(t=void 0),n(e,eqe(t))}var aqe=nqe;const hte=zr(aqe);var sqe=["x","y"];function kx(e){"@babel/helpers - typeof";return kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kx(e)}function hO(){return hO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hO.apply(this,arguments)}function eB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function K0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eB(Object(r),!0).forEach(function(n){iqe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iqe(e,t,r){return t=oqe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oqe(e){var t=lqe(e,"string");return kx(t)=="symbol"?t:t+""}function lqe(e,t){if(kx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(kx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cqe(e,t){if(e==null)return{};var r=uqe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function uqe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function dqe(e,t){var r=e.x,n=e.y,a=cqe(e,sqe),s="".concat(r),o=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return K0(K0(K0(K0(K0({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function tB(e){return G.createElement(ite,hO({shapeType:"rectangle",propTransformer:dqe,activeClassName:"recharts-active-bar"},e))}var fqe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var s=typeof n=="number";return s?t(n,a):(s||Ff(),r)}},hqe=["value","background"],mte;function jp(e){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(e)}function mqe(e,t){if(e==null)return{};var r=pqe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pqe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function nS(){return nS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nS.apply(this,arguments)}function rB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rB(Object(r),!0).forEach(function(n){bu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gte(n.key),n)}}function vqe(e,t,r){return t&&nB(e.prototype,t),r&&nB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xqe(e,t,r){return t=aS(t),yqe(e,pte()?Reflect.construct(t,r||[],aS(e).constructor):t.apply(e,r))}function yqe(e,t){if(t&&(jp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bqe(e)}function bqe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pte=function(){return!!e})()}function aS(e){return aS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},aS(e)}function wqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mO(e,t)}function mO(e,t){return mO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},mO(e,t)}function bu(e,t,r){return t=gte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gte(e){var t=_qe(e,"string");return jp(t)=="symbol"?t:t+""}function _qe(e,t){if(jp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vs=function(e){function t(){var r;gqe(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=xqe(this,t,[].concat(a)),bu(r,"state",{isAnimationFinished:!1}),bu(r,"id",Cy("recharts-bar-")),bu(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),bu(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return wqe(t,e),vqe(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,d=Qt(this.props,!1);return n&&n.map(function(f,h){var p=h===c,v=p?u:o,m=Zn(Zn(Zn({},d),f),{},{isActive:p,option:v,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return G.createElement(Zr,nS({className:"recharts-bar-rectangle"},Mf(a.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value)}),G.createElement(tB,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,s=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return G.createElement(kc,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var v=p.t,m=s.map(function(g,b){var y=h&&h[b];if(y){var w=nu(y.x,g.x),_=nu(y.y,g.y),S=nu(y.width,g.width),E=nu(y.height,g.height);return Zn(Zn({},g),{},{x:w(v),y:_(v),width:S(v),height:E(v)})}if(o==="horizontal"){var j=nu(0,g.height),N=j(v);return Zn(Zn({},g),{},{y:g.y+g.height-N,height:N})}var k=nu(0,g.width),C=k(v);return Zn(Zn({},g),{},{width:C})});return G.createElement(Zr,null,n.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,s=n.isAnimationActive,o=this.state.prevData;return s&&a&&a.length&&(!o||!D2(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,s=a.data,o=a.dataKey,l=a.activeIndex,c=Qt(this.props.background,!1);return s.map(function(u,d){u.value;var f=u.background,h=mqe(u,hqe);if(!f)return null;var p=Zn(Zn(Zn(Zn(Zn({},h),{},{fill:"#eee"},f),c),Mf(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return G.createElement(tB,nS({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},p))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=ro(d,$2);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,p=function(g,b){var y=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:y,errorVal:ns(g,b)}},v={clipPath:n?"url(#clipPath-".concat(a,")"):null};return G.createElement(Zr,v,f.map(function(m){return G.cloneElement(m,{key:"error-bar-".concat(a,"-").concat(m.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,s=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,p=n.isAnimationActive,v=n.background,m=n.id;if(a||!s||!s.length)return null;var g=this.state.isAnimationFinished,b=hr("recharts-bar",o),y=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,_=y||w,S=Sr(m)?this.id:m;return G.createElement(Zr,{className:b},y||w?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(S)},G.createElement("rect",{x:y?u:u-f/2,y:w?d:d-h/2,width:y?f:f*2,height:w?h:h*2}))):null,G.createElement(Zr,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(S,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,S),(!p||g)&&Ta.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(x.PureComponent);mte=vs;bu(vs,"displayName","Bar");bu(vs,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!hc.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});bu(vs,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,s=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,p=f9e(n,r);if(!p)return null;var v=t.layout,m=r.type.defaultProps,g=m!==void 0?Zn(Zn({},m),r.props):r.props,b=g.dataKey,y=g.children,w=g.minPointSize,_=v==="horizontal"?o:s,S=u?_.scale.domain():null,E=y9e({numericAxis:_}),j=ro(y,j2),N=f.map(function(k,C){var T,A,B,R,P,D;u?T=h9e(u[d+C],S):(T=ns(k,b),Array.isArray(T)||(T=[E,T]));var U=fqe(w,mte.defaultProps.minPointSize)(T[1],C);if(v==="horizontal"){var M,F=[o.scale(T[0]),o.scale(T[1])],K=F[0],X=F[1];A=q6({axis:s,ticks:l,bandSize:a,offset:p.offset,entry:k,index:C}),B=(M=X??K)!==null&&M!==void 0?M:void 0,R=p.size;var O=K-X;if(P=Number.isNaN(O)?0:O,D={x:A,y:o.y,width:R,height:o.height},Math.abs(U)>0&&Math.abs(P)<Math.abs(U)){var W=_s(P||U)*(Math.abs(U)-Math.abs(P));B-=W,P+=W}}else{var L=[s.scale(T[0]),s.scale(T[1])],H=L[0],ee=L[1];if(A=H,B=q6({axis:o,ticks:c,bandSize:a,offset:p.offset,entry:k,index:C}),R=ee-H,P=p.size,D={x:s.x,y:B,width:s.width,height:P},Math.abs(U)>0&&Math.abs(R)<Math.abs(U)){var q=_s(R||U)*(Math.abs(U)-Math.abs(R));R+=q}}return Zn(Zn(Zn({},k),{},{x:A,y:B,width:R,height:P,value:u?T:T[1],payload:k,background:D},j&&j[C]&&j[C].props),{},{tooltipPayload:[$ee(r,k)],tooltipPosition:{x:A+R/2,y:B+P/2}})});return Zn({data:N,layout:v},h)});function Tx(e){"@babel/helpers - typeof";return Tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tx(e)}function Sqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vte(n.key),n)}}function jqe(e,t,r){return t&&aB(e.prototype,t),r&&aB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Po(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sB(Object(r),!0).forEach(function(n){V2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V2(e,t,r){return t=vte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vte(e){var t=Eqe(e,"string");return Tx(t)=="symbol"?t:t+""}function Eqe(e,t){if(Tx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nqe=function(t,r,n,a,s){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!fi(u,vs);return d.reduce(function(p,v){var m=r[v],g=m.orientation,b=m.domain,y=m.padding,w=y===void 0?{}:y,_=m.mirror,S=m.reversed,E="".concat(g).concat(_?"Mirror":""),j,N,k,C,T;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var A=b[1]-b[0],B=1/0,R=m.categoricalDomain.sort();if(R.forEach(function(L,H){H>0&&(B=Math.min((L||0)-(R[H-1]||0),B))}),Number.isFinite(B)){var P=B/A,D=m.layout==="vertical"?n.height:n.width;if(m.padding==="gap"&&(j=P*D/2),m.padding==="no-gap"){var U=Ss(t.barCategoryGap,P*D),M=P*D/2;j=M-U-(M-U)/D*U}}}a==="xAxis"?N=[n.left+(w.left||0)+(j||0),n.left+n.width-(w.right||0)-(j||0)]:a==="yAxis"?N=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(j||0),n.top+n.height-(w.bottom||0)-(j||0)]:N=m.range,S&&(N=[N[1],N[0]]);var F=Ree(m,s,h),K=F.scale,X=F.realScaleType;K.domain(b).range(N),Dee(K);var O=Mee(K,Po(Po({},m),{},{realScaleType:X}));a==="xAxis"?(T=g==="top"&&!_||g==="bottom"&&_,k=n.left,C=f[E]-T*m.height):a==="yAxis"&&(T=g==="left"&&!_||g==="right"&&_,k=f[E]-T*m.width,C=n.top);var W=Po(Po(Po({},m),O),{},{realScaleType:X,x:k,y:C,scale:K,width:a==="xAxis"?n.width:m.width,height:a==="yAxis"?n.height:m.height});return W.bandSize=z_(W,O),!m.hide&&a==="xAxis"?f[E]+=(T?-1:1)*W.height:m.hide||(f[E]+=(T?-1:1)*W.width),Po(Po({},p),{},V2({},v,W))},{})},xte=function(t,r){var n=t.x,a=t.y,s=r.x,o=r.y;return{x:Math.min(n,s),y:Math.min(a,o),width:Math.abs(s-n),height:Math.abs(o-a)}},Cqe=function(t){var r=t.x1,n=t.y1,a=t.x2,s=t.y2;return xte({x:r,y:n},{x:a,y:s})},yte=function(){function e(t){Sqe(this,e),this.scale=t}return jqe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,s=n.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],s=n[n.length-1];return a<=s?r>=a&&r<=s:r>=s&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();V2(yte,"EPS",1e-4);var OM=function(t){var r=Object.keys(t).reduce(function(n,a){return Po(Po({},n),{},V2({},a,yte.create(t[a])))},{});return Po(Po({},r),{},{apply:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return qHe(a,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return hte(a,function(s,o){return r[o].isInRange(s)})}})};function kqe(e){return(e%180+180)%180}var Tqe=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=kqe(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Aqe=Ml,Pqe=ky,Oqe=w2;function Rqe(e){return function(t,r,n){var a=Object(t);if(!Pqe(t)){var s=Aqe(r);t=Oqe(t),r=function(l){return s(a[l],l,a)}}var o=e(t,r,n);return o>-1?a[s?t[o]:o]:void 0}}var Dqe=Rqe,Mqe=cte;function Iqe(e){var t=Mqe(e),r=t%1;return t===t?r?t-r:t:0}var $qe=Iqe,Fqe=hQ,Lqe=Ml,Bqe=$qe,Uqe=Math.max;function zqe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:Bqe(r);return a<0&&(a=Uqe(n+a,0)),Fqe(e,Lqe(t),a)}var Wqe=zqe,Vqe=Dqe,Hqe=Wqe,qqe=Vqe(Hqe),Gqe=qqe;const Kqe=zr(Gqe);var Xqe=tPe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),RM=x.createContext(void 0),DM=x.createContext(void 0),bte=x.createContext(void 0),wte=x.createContext({}),_te=x.createContext(void 0),Ste=x.createContext(0),jte=x.createContext(0),iB=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,s=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=Xqe(s);return G.createElement(RM.Provider,{value:n},G.createElement(DM.Provider,{value:a},G.createElement(wte.Provider,{value:s},G.createElement(bte.Provider,{value:d},G.createElement(_te.Provider,{value:o},G.createElement(Ste.Provider,{value:u},G.createElement(jte.Provider,{value:c},l)))))))},Yqe=function(){return x.useContext(_te)},Ete=function(t){var r=x.useContext(RM);r==null&&Ff();var n=r[t];return n==null&&Ff(),n},Zqe=function(){var t=x.useContext(RM);return cu(t)},Jqe=function(){var t=x.useContext(DM),r=Kqe(t,function(n){return hte(n.domain,Number.isFinite)});return r||cu(t)},Nte=function(t){var r=x.useContext(DM);r==null&&Ff();var n=r[t];return n==null&&Ff(),n},Qqe=function(){var t=x.useContext(bte);return t},eGe=function(){return x.useContext(wte)},MM=function(){return x.useContext(jte)},IM=function(){return x.useContext(Ste)};function Ep(e){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(e)}function tGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rGe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kte(n.key),n)}}function nGe(e,t,r){return t&&rGe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function aGe(e,t,r){return t=sS(t),sGe(e,Cte()?Reflect.construct(t,r||[],sS(e).constructor):t.apply(e,r))}function sGe(e,t){if(t&&(Ep(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iGe(e)}function iGe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cte=function(){return!!e})()}function sS(e){return sS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sS(e)}function oGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pO(e,t)}function pO(e,t){return pO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},pO(e,t)}function oB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oB(Object(r),!0).forEach(function(n){$M(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $M(e,t,r){return t=kte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kte(e){var t=lGe(e,"string");return Ep(t)=="symbol"?t:t+""}function lGe(e,t){if(Ep(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cGe(e,t){return hGe(e)||fGe(e,t)||dGe(e,t)||uGe()}function uGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dGe(e,t){if(e){if(typeof e=="string")return cB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cB(e,t)}}function cB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fGe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function hGe(e){if(Array.isArray(e))return e}function gO(){return gO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gO.apply(this,arguments)}var mGe=function(t,r){var n;return G.isValidElement(t)?n=G.cloneElement(t,r):rr(t)?n=t(r):n=G.createElement("line",gO({},r,{className:"recharts-reference-line-line"})),n},pGe=function(t,r,n,a,s,o,l,c,u){var d=s.x,f=s.y,h=s.width,p=s.height;if(n){var v=u.y,m=t.y.apply(v,{position:o});if(Cl(u,"discard")&&!t.y.isInRange(m))return null;var g=[{x:d+h,y:m},{x:d,y:m}];return c==="left"?g.reverse():g}if(r){var b=u.x,y=t.x.apply(b,{position:o});if(Cl(u,"discard")&&!t.x.isInRange(y))return null;var w=[{x:y,y:f+p},{x:y,y:f}];return l==="top"?w.reverse():w}if(a){var _=u.segment,S=_.map(function(E){return t.apply(E,{position:o})});return Cl(u,"discard")&&FHe(S,function(E){return!t.isInRange(E)})?null:S}return null};function gGe(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,s=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=Yqe(),d=Ete(a),f=Nte(s),h=Qqe();if(!u||!h)return null;Xo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=OM({x:d.scale,y:f.scale}),v=ca(t),m=ca(r),g=n&&n.length===2,b=pGe(p,v,m,g,h,e.position,d.orientation,f.orientation,e);if(!b)return null;var y=cGe(b,2),w=y[0],_=w.x,S=w.y,E=y[1],j=E.x,N=E.y,k=Cl(e,"hidden")?"url(#".concat(u,")"):void 0,C=lB(lB({clipPath:k},Qt(e,!0)),{},{x1:_,y1:S,x2:j,y2:N});return G.createElement(Zr,{className:hr("recharts-reference-line",l)},mGe(o,C),ba.renderCallByParent(e,Cqe({x1:_,y1:S,x2:j,y2:N})))}var FM=function(e){function t(){return tGe(this,t),aGe(this,t,arguments)}return oGe(t,e),nGe(t,[{key:"render",value:function(){return G.createElement(gGe,this.props)}}])}(G.Component);$M(FM,"displayName","ReferenceLine");$M(FM,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function vO(){return vO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vO.apply(this,arguments)}function Np(e){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Np(e)}function uB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uB(Object(r),!0).forEach(function(n){H2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xGe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ate(n.key),n)}}function yGe(e,t,r){return t&&xGe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bGe(e,t,r){return t=iS(t),wGe(e,Tte()?Reflect.construct(t,r||[],iS(e).constructor):t.apply(e,r))}function wGe(e,t){if(t&&(Np(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Ge(e)}function _Ge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tte=function(){return!!e})()}function iS(e){return iS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},iS(e)}function SGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xO(e,t)}function xO(e,t){return xO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xO(e,t)}function H2(e,t,r){return t=Ate(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ate(e){var t=jGe(e,"string");return Np(t)=="symbol"?t:t+""}function jGe(e,t){if(Np(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EGe=function(t){var r=t.x,n=t.y,a=t.xAxis,s=t.yAxis,o=OM({x:a.scale,y:s.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Cl(t,"discard")&&!o.isInRange(l)?null:l},q2=function(e){function t(){return vGe(this,t),bGe(this,t,arguments)}return SGe(t,e),yGe(t,[{key:"render",value:function(){var n=this.props,a=n.x,s=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=ca(a),d=ca(s);if(Xo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=EGe(this.props);if(!f)return null;var h=f.x,p=f.y,v=this.props,m=v.shape,g=v.className,b=Cl(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=dB(dB({clipPath:b},Qt(this.props,!0)),{},{cx:h,cy:p});return G.createElement(Zr,{className:hr("recharts-reference-dot",g)},t.renderDot(m,y),ba.renderCallByParent(this.props,{x:h-o,y:p-o,width:2*o,height:2*o}))}}])}(G.Component);H2(q2,"displayName","ReferenceDot");H2(q2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});H2(q2,"renderDot",function(e,t){var r;return G.isValidElement(e)?r=G.cloneElement(e,t):rr(e)?r=e(t):r=G.createElement(PM,vO({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function yO(){return yO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yO.apply(this,arguments)}function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function fB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fB(Object(r),!0).forEach(function(n){G2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CGe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ote(n.key),n)}}function kGe(e,t,r){return t&&CGe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function TGe(e,t,r){return t=oS(t),AGe(e,Pte()?Reflect.construct(t,r||[],oS(e).constructor):t.apply(e,r))}function AGe(e,t){if(t&&(Cp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PGe(e)}function PGe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pte=function(){return!!e})()}function oS(e){return oS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},oS(e)}function OGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bO(e,t)}function bO(e,t){return bO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},bO(e,t)}function G2(e,t,r){return t=Ote(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ote(e){var t=RGe(e,"string");return Cp(t)=="symbol"?t:t+""}function RGe(e,t){if(Cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DGe=function(t,r,n,a,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,d=s.xAxis,f=s.yAxis;if(!d||!f)return null;var h=OM({x:d.scale,y:f.scale}),p={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},v={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Cl(s,"discard")&&(!h.isInRange(p)||!h.isInRange(v))?null:xte(p,v)},K2=function(e){function t(){return NGe(this,t),TGe(this,t,arguments)}return OGe(t,e),kGe(t,[{key:"render",value:function(){var n=this.props,a=n.x1,s=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Xo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=ca(a),h=ca(s),p=ca(o),v=ca(l),m=this.props.shape;if(!f&&!h&&!p&&!v&&!m)return null;var g=DGe(f,h,p,v,this.props);if(!g&&!m)return null;var b=Cl(this.props,"hidden")?"url(#".concat(d,")"):void 0;return G.createElement(Zr,{className:hr("recharts-reference-area",c)},t.renderRect(m,hB(hB({clipPath:b},Qt(this.props,!0)),g)),ba.renderCallByParent(this.props,g))}}])}(G.Component);G2(K2,"displayName","ReferenceArea");G2(K2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});G2(K2,"renderRect",function(e,t){var r;return G.isValidElement(e)?r=G.cloneElement(e,t):rr(e)?r=e(t):r=G.createElement(AM,yO({},t,{className:"recharts-reference-area-rect"})),r});function Rte(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function MGe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Tqe(n,r)}function IGe(e,t,r){var n=r==="width",a=e.x,s=e.y,o=e.width,l=e.height;return t===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function lS(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function $Ge(e,t){return Rte(e,t+1)}function FGe(e,t,r,n,a){for(var s=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var v=n==null?void 0:n[c];if(v===void 0)return{v:Rte(n,u)};var m=c,g,b=function(){return g===void 0&&(g=r(v,m)),g},y=v.coordinate,w=c===0||lS(e,y,b,d,l);w||(c=0,d=o,u+=1),w&&(d=y+e*(b()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function Ax(e){"@babel/helpers - typeof";return Ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ax(e)}function mB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mB(Object(r),!0).forEach(function(n){LGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LGe(e,t,r){return t=BGe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BGe(e){var t=UGe(e,"string");return Ax(t)=="symbol"?t:t+""}function UGe(e,t){if(Ax(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ax(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zGe(e,t,r,n,a){for(var s=(n||[]).slice(),o=s.length,l=t.start,c=t.end,u=function(h){var p=s[h],v,m=function(){return v===void 0&&(v=r(p,h)),v};if(h===o-1){var g=e*(p.coordinate+e*m()/2-c);s[h]=p=Ya(Ya({},p),{},{tickCoord:g>0?p.coordinate-g*e:p.coordinate})}else s[h]=p=Ya(Ya({},p),{},{tickCoord:p.coordinate});var b=lS(e,p.tickCoord,m,l,c);b&&(c=p.tickCoord-e*(m()/2+a),s[h]=Ya(Ya({},p),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function WGe(e,t,r,n,a,s){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(s){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=Ya(Ya({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var p=lS(e,d.tickCoord,function(){return f},c,u);p&&(u=d.tickCoord-e*(f/2+a),o[l-1]=Ya(Ya({},d),{},{isShow:!0}))}for(var v=s?l-1:l,m=function(y){var w=o[y],_,S=function(){return _===void 0&&(_=r(w,y)),_};if(y===0){var E=e*(w.coordinate-e*S()/2-c);o[y]=w=Ya(Ya({},w),{},{tickCoord:E<0?w.coordinate-E*e:w.coordinate})}else o[y]=w=Ya(Ya({},w),{},{tickCoord:w.coordinate});var j=lS(e,w.tickCoord,S,c,u);j&&(c=w.tickCoord+e*(S()/2+a),o[y]=Ya(Ya({},w),{},{isShow:!0}))},g=0;g<v;g++)m(g);return o}function LM(e,t,r){var n=e.tick,a=e.ticks,s=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(ft(c)||hc.isSsr)return $Ge(a,typeof c=="number"&&ft(c)?c:0);var h=[],p=l==="top"||l==="bottom"?"width":"height",v=d&&p==="width"?Ig(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},m=function(w,_){var S=rr(u)?u(w.value,_):w.value;return p==="width"?MGe(Ig(S,{fontSize:t,letterSpacing:r}),v,f):Ig(S,{fontSize:t,letterSpacing:r})[p]},g=a.length>=2?_s(a[1].coordinate-a[0].coordinate):1,b=IGe(s,g,p);return c==="equidistantPreserveStart"?FGe(g,b,m,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=WGe(g,b,m,a,o,c==="preserveStartEnd"):h=zGe(g,b,m,a,o),h.filter(function(y){return y.isShow}))}var VGe=["viewBox"],HGe=["viewBox"],qGe=["ticks"];function kp(e){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kp(e)}function tm(){return tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tm.apply(this,arguments)}function pB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ms(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pB(Object(r),!0).forEach(function(n){BM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sC(e,t){if(e==null)return{};var r=GGe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function GGe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function KGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mte(n.key),n)}}function XGe(e,t,r){return t&&gB(e.prototype,t),r&&gB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function YGe(e,t,r){return t=cS(t),ZGe(e,Dte()?Reflect.construct(t,r||[],cS(e).constructor):t.apply(e,r))}function ZGe(e,t){if(t&&(kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JGe(e)}function JGe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dte=function(){return!!e})()}function cS(e){return cS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cS(e)}function QGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wO(e,t)}function wO(e,t){return wO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},wO(e,t)}function BM(e,t,r){return t=Mte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mte(e){var t=eKe(e,"string");return kp(t)=="symbol"?t:t+""}function eKe(e,t){if(kp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p0=function(e){function t(r){var n;return KGe(this,t),n=YGe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return QGe(t,e),XGe(t,[{key:"shouldComponentUpdate",value:function(n,a){var s=n.viewBox,o=sC(n,VGe),l=this.props,c=l.viewBox,u=sC(l,HGe);return!Tm(s,c)||!Tm(o,u)||!Tm(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,s=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,p,v,m,g,b,y,w=f?-1:1,_=n.tickSize||d,S=ft(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=v=n.coordinate,g=o+ +!f*c,m=g-w*_,y=m-w*h,b=S;break;case"left":m=g=n.coordinate,v=s+ +!f*l,p=v-w*_,b=p-w*h,y=S;break;case"right":m=g=n.coordinate,v=s+ +f*l,p=v+w*_,b=p+w*h,y=S;break;default:p=v=n.coordinate,g=o+ +f*c,m=g+w*_,y=m+w*h,b=S;break}return{line:{x1:p,y1:m,x2:v,y2:g},tick:{x:b,y}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,s=n.mirror,o;switch(a){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,s=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,s=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=ms(ms(ms({},Qt(this.props,!1)),Qt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=ms(ms({},f),{},{x1:a,y1:s+h*l,x2:a+o,y2:s+h*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);f=ms(ms({},f),{},{x1:a+p*o,y1:s,x2:a+p*o,y2:s+l})}return G.createElement("line",tm({},f,{className:hr("recharts-cartesian-axis-line",Ei(d,"className"))}))}},{key:"renderTicks",value:function(n,a,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,p=LM(ms(ms({},this.props),{},{ticks:n}),a,s),v=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),g=Qt(this.props,!1),b=Qt(d,!1),y=ms(ms({},g),{},{fill:"none"},Qt(c,!1)),w=p.map(function(_,S){var E=o.getTickLineCoord(_),j=E.line,N=E.tick,k=ms(ms(ms(ms({textAnchor:v,verticalAnchor:m},g),{},{stroke:"none",fill:u},b),N),{},{index:S,payload:_,visibleTicksCount:p.length,tickFormatter:f});return G.createElement(Zr,tm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Mf(o.props,_,S)),c&&G.createElement("line",tm({},y,j,{className:hr("recharts-cartesian-axis-tick-line",Ei(c,"className"))})),d&&t.renderTickItem(d,k,"".concat(rr(f)?f(_.value,S):_.value).concat(h||"")))});return G.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,a=this.props,s=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,p=sC(f,qGe),v=h;return rr(c)&&(v=h&&h.length>0?c(this.props):c(p)),o<=0||l<=0||!v||!v.length?null:G.createElement(Zr,{className:hr("recharts-cartesian-axis",u),ref:function(g){n.layerReference=g}},s&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),ba.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,s){var o;return G.isValidElement(n)?o=G.cloneElement(n,a):rr(n)?o=n(a):o=G.createElement(If,tm({},a,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(x.Component);BM(p0,"displayName","CartesianAxis");BM(p0,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var tKe=["x1","y1","x2","y2","key"],rKe=["offset"];function Lf(e){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(e)}function vB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ts(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vB(Object(r),!0).forEach(function(n){nKe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nKe(e,t,r){return t=aKe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aKe(e){var t=sKe(e,"string");return Lf(t)=="symbol"?t:t+""}function sKe(e,t){if(Lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vd(){return Vd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vd.apply(this,arguments)}function xB(e,t){if(e==null)return{};var r=iKe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iKe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var oKe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,c=t.ry;return G.createElement("rect",{x:a,y:s,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Ite(e,t){var r;if(G.isValidElement(e))r=G.cloneElement(e,t);else if(rr(e))r=e(t);else{var n=t.x1,a=t.y1,s=t.x2,o=t.y2,l=t.key,c=xB(t,tKe),u=Qt(c,!1);u.offset;var d=xB(u,rKe);r=G.createElement("line",Vd({},d,{x1:n,y1:a,x2:s,y2:o,fill:"none",key:l}))}return r}function lKe(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,s=e.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=ts(ts({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return Ite(a,u)});return G.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function cKe(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,s=e.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=ts(ts({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return Ite(a,u)});return G.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function uKe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,s=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var v=!d[p+1],m=v?a+o-h:d[p+1]-h;if(m<=0)return null;var g=p%t.length;return G.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:m,width:s,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function dKe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,s=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+s-s)}).sort(function(h,p){return h-p});s!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var v=!d[p+1],m=v?s+l-h:d[p+1]-h;if(m<=0)return null;var g=p%n.length;return G.createElement("rect",{key:"react-".concat(p),x:h,y:o,width:m,height:c,stroke:"none",fill:n[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var fKe=function(t,r){var n=t.xAxis,a=t.width,s=t.height,o=t.offset;return Oee(LM(ts(ts(ts({},p0.defaultProps),n),{},{ticks:oc(n,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,r)},hKe=function(t,r){var n=t.yAxis,a=t.width,s=t.height,o=t.offset;return Oee(LM(ts(ts(ts({},p0.defaultProps),n),{},{ticks:oc(n,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,r)},Ph={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Qc(e){var t,r,n,a,s,o,l=MM(),c=IM(),u=eGe(),d=ts(ts({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Ph.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Ph.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Ph.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Ph.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:Ph.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Ph.verticalFill,x:ft(e.x)?e.x:u.left,y:ft(e.y)?e.y:u.top,width:ft(e.width)?e.width:u.width,height:ft(e.height)?e.height:u.height}),f=d.x,h=d.y,p=d.width,v=d.height,m=d.syncWithTicks,g=d.horizontalValues,b=d.verticalValues,y=Zqe(),w=Jqe();if(!ft(p)||p<=0||!ft(v)||v<=0||!ft(f)||f!==+f||!ft(h)||h!==+h)return null;var _=d.verticalCoordinatesGenerator||fKe,S=d.horizontalCoordinatesGenerator||hKe,E=d.horizontalPoints,j=d.verticalPoints;if((!E||!E.length)&&rr(S)){var N=g&&g.length,k=S({yAxis:w?ts(ts({},w),{},{ticks:N?g:w.ticks}):void 0,width:l,height:c,offset:u},N?!0:m);Xo(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Lf(k),"]")),Array.isArray(k)&&(E=k)}if((!j||!j.length)&&rr(_)){var C=b&&b.length,T=_({xAxis:y?ts(ts({},y),{},{ticks:C?b:y.ticks}):void 0,width:l,height:c,offset:u},C?!0:m);Xo(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Lf(T),"]")),Array.isArray(T)&&(j=T)}return G.createElement("g",{className:"recharts-cartesian-grid"},G.createElement(oKe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),G.createElement(lKe,Vd({},d,{offset:u,horizontalPoints:E,xAxis:y,yAxis:w})),G.createElement(cKe,Vd({},d,{offset:u,verticalPoints:j,xAxis:y,yAxis:w})),G.createElement(uKe,Vd({},d,{horizontalPoints:E})),G.createElement(dKe,Vd({},d,{verticalPoints:j})))}Qc.displayName="CartesianGrid";function Tp(e){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(e)}function mKe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pKe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Lte(n.key),n)}}function gKe(e,t,r){return t&&pKe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vKe(e,t,r){return t=uS(t),xKe(e,$te()?Reflect.construct(t,r||[],uS(e).constructor):t.apply(e,r))}function xKe(e,t){if(t&&(Tp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yKe(e)}function yKe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $te(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($te=function(){return!!e})()}function uS(e){return uS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uS(e)}function bKe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_O(e,t)}function _O(e,t){return _O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_O(e,t)}function Fte(e,t,r){return t=Lte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lte(e){var t=wKe(e,"string");return Tp(t)=="symbol"?t:t+""}function wKe(e,t){if(Tp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SO(){return SO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SO.apply(this,arguments)}function _Ke(e){var t=e.xAxisId,r=MM(),n=IM(),a=Ete(t);return a==null?null:G.createElement(p0,SO({},a,{className:hr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return oc(o,!0)}}))}var hl=function(e){function t(){return mKe(this,t),vKe(this,t,arguments)}return bKe(t,e),gKe(t,[{key:"render",value:function(){return G.createElement(_Ke,this.props)}}])}(G.Component);Fte(hl,"displayName","XAxis");Fte(hl,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}function SKe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jKe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zte(n.key),n)}}function EKe(e,t,r){return t&&jKe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NKe(e,t,r){return t=dS(t),CKe(e,Bte()?Reflect.construct(t,r||[],dS(e).constructor):t.apply(e,r))}function CKe(e,t){if(t&&(Ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kKe(e)}function kKe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bte=function(){return!!e})()}function dS(e){return dS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dS(e)}function TKe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jO(e,t)}function jO(e,t){return jO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jO(e,t)}function Ute(e,t,r){return t=zte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zte(e){var t=AKe(e,"string");return Ap(t)=="symbol"?t:t+""}function AKe(e,t){if(Ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EO(){return EO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EO.apply(this,arguments)}var PKe=function(t){var r=t.yAxisId,n=MM(),a=IM(),s=Nte(r);return s==null?null:G.createElement(p0,EO({},s,{className:hr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return oc(l,!0)}}))},No=function(e){function t(){return SKe(this,t),NKe(this,t,arguments)}return TKe(t,e),EKe(t,[{key:"render",value:function(){return G.createElement(PKe,this.props)}}])}(G.Component);Ute(No,"displayName","YAxis");Ute(No,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function yB(e){return MKe(e)||DKe(e)||RKe(e)||OKe()}function OKe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RKe(e,t){if(e){if(typeof e=="string")return NO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NO(e,t)}}function DKe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function MKe(e){if(Array.isArray(e))return NO(e)}function NO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var CO=function(t,r,n,a,s){var o=ro(t,FM),l=ro(t,q2),c=[].concat(yB(o),yB(l)),u=ro(t,K2),d="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(m,g){if(g.props[d]===n&&Cl(g.props,"extendDomain")&&ft(g.props[f])){var b=g.props[f];return[Math.min(m[0],b),Math.max(m[1],b)]}return m},h)),u.length){var p="".concat(f,"1"),v="".concat(f,"2");h=u.reduce(function(m,g){if(g.props[d]===n&&Cl(g.props,"extendDomain")&&ft(g.props[p])&&ft(g.props[v])){var b=g.props[p],y=g.props[v];return[Math.min(m[0],b,y),Math.max(m[1],b,y)]}return m},h)}return s&&s.length&&(h=s.reduce(function(m,g){return ft(g)?[Math.min(m[0],g),Math.max(m[1],g)]:m},h)),h},Wte={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||c,h),v=r?r+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],p]:c._events[v].push(p):(c._events[v]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,v=new Array(p);h<p;h++)v[h]=f[h].fn;return v},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,p,v){var m=r?r+u:u;if(!this._events[m])return!1;var g=this._events[m],b=arguments.length,y,w;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),b){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,h),!0;case 5:return g.fn.call(g.context,d,f,h,p),!0;case 6:return g.fn.call(g.context,d,f,h,p,v),!0}for(w=1,y=new Array(b-1);w<b;w++)y[w-1]=arguments[w];g.fn.apply(g.context,y)}else{var _=g.length,S;for(w=0;w<_;w++)switch(g[w].once&&this.removeListener(u,g[w].fn,void 0,!0),b){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,d);break;case 3:g[w].fn.call(g[w].context,d,f);break;case 4:g[w].fn.call(g[w].context,d,f,h);break;default:if(!y)for(S=1,y=new Array(b-1);S<b;S++)y[S-1]=arguments[S];g[w].fn.apply(g[w].context,y)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return o(this,p),this;var v=this._events[p];if(v.fn)v.fn===d&&(!h||v.once)&&(!f||v.context===f)&&o(this,p);else{for(var m=0,g=[],b=v.length;m<b;m++)(v[m].fn!==d||h&&!v[m].once||f&&v[m].context!==f)&&g.push(v[m]);g.length?this._events[p]=g.length===1?g[0]:g:o(this,p)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(Wte);var IKe=Wte.exports;const $Ke=zr(IKe);var iC=new $Ke,oC="recharts.syncMouseEvents";function Px(e){"@babel/helpers - typeof";return Px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Px(e)}function FKe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LKe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vte(n.key),n)}}function BKe(e,t,r){return t&&LKe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lC(e,t,r){return t=Vte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vte(e){var t=UKe(e,"string");return Px(t)=="symbol"?t:t+""}function UKe(e,t){if(Px(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Px(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zKe=function(){function e(){FKe(this,e),lC(this,"activeIndex",0),lC(this,"coordinateList",[]),lC(this,"layout","horizontal")}return BKe(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,s=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=s??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=s+c+u,h=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function WKe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&ft(n)&&ft(a))return!0}return!1}function VKe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function Hte(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,s=e.endAngle,o=un(t,r,n,a),l=un(t,r,n,s);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function HKe(e,t,r){var n,a,s,o;if(e==="horizontal")n=t.x,s=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=un(l,c,u,f),p=un(l,c,d,f);n=h.x,a=h.y,s=p.x,o=p.y}else return Hte(t);return[{x:n,y:a},{x:s,y:o}]}function Ox(e){"@babel/helpers - typeof";return Ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ox(e)}function bB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function t1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bB(Object(r),!0).forEach(function(n){qKe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qKe(e,t,r){return t=GKe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GKe(e){var t=KKe(e,"string");return Ox(t)=="symbol"?t:t+""}function KKe(e,t){if(Ox(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ox(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XKe(e){var t,r,n=e.element,a=e.tooltipEventType,s=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!s||!o||h!=="ScatterChart"&&a!=="axis")return null;var v,m=YP;if(h==="ScatterChart")v=o,m=NWe;else if(h==="BarChart")v=VKe(f,o,c,d),m=AM;else if(f==="radial"){var g=Hte(o),b=g.cx,y=g.cy,w=g.radius,_=g.startAngle,S=g.endAngle;v={cx:b,cy:y,startAngle:_,endAngle:S,innerRadius:w,outerRadius:w},m=Wee}else v={points:HKe(f,o,c)},m=YP;var E=t1(t1(t1(t1({stroke:"#ccc",pointerEvents:"none"},c),v),Qt(p,!1)),{},{payload:l,payloadIndex:u,className:hr("recharts-tooltip-cursor",p.className)});return x.isValidElement(p)?x.cloneElement(p,E):x.createElement(m,E)}var YKe=["item"],ZKe=["children","className","width","height","style","compact","title","desc"];function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function zg(){return zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zg.apply(this,arguments)}function wB(e,t){return eXe(e)||QKe(e,t)||Gte(e,t)||JKe()}function JKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QKe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function eXe(e){if(Array.isArray(e))return e}function _B(e,t){if(e==null)return{};var r=tXe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tXe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function rXe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nXe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kte(n.key),n)}}function aXe(e,t,r){return t&&nXe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sXe(e,t,r){return t=fS(t),iXe(e,qte()?Reflect.construct(t,r||[],fS(e).constructor):t.apply(e,r))}function iXe(e,t){if(t&&(Pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oXe(e)}function oXe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qte=function(){return!!e})()}function fS(e){return fS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fS(e)}function lXe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kO(e,t)}function kO(e,t){return kO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},kO(e,t)}function Op(e){return dXe(e)||uXe(e)||Gte(e)||cXe()}function cXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gte(e,t){if(e){if(typeof e=="string")return TO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TO(e,t)}}function uXe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dXe(e){if(Array.isArray(e))return TO(e)}function TO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function SB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SB(Object(r),!0).forEach(function(n){Xt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xt(e,t,r){return t=Kte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kte(e){var t=fXe(e,"string");return Pp(t)=="symbol"?t:t+""}function fXe(e,t){if(Pp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hXe={xAxis:["bottom","top"],yAxis:["left","right"]},mXe={width:"100%",height:"100%"},Xte={x:0,y:0};function r1(e){return e}var pXe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},gXe=function(t,r,n,a){var s=r.find(function(d){return d&&d.index===n});if(s){if(t==="horizontal")return{x:s.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:s.coordinate};if(t==="centric"){var o=s.coordinate,l=a.radius;return Le(Le(Le({},a),un(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=a.angle;return Le(Le(Le({},a),un(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return Xte},X2=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,s=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Op(l),Op(u)):l},[]);return o.length>0?o:t&&t.length&&ft(a)&&ft(s)?t.slice(a,s+1):[]};function Yte(e){return e==="number"?[0,"auto"]:void 0}var AO=function(t,r,n,a){var s=t.graphicalItems,o=t.tooltipAxis,l=X2(r,t);return n<0||!s||!s.length||n>=l.length?null:s.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var p=f===void 0?l:f;h=aP(p,o.dataKey,a)}else h=f&&f[n]||l[n];return h?[].concat(Op(c),[$ee(u,h)]):c},[])},jB=function(t,r,n,a){var s=a||{x:t.chartX,y:t.chartY},o=pXe(s,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=i9e(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=AO(t,r,d,f),p=gXe(n,l,d,s);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},vXe=function(t,r){var n=r.axes,a=r.graphicalItems,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,p=Pee(d,s);return n.reduce(function(v,m){var g,b=m.type.defaultProps!==void 0?Le(Le({},m.type.defaultProps),m.props):m.props,y=b.type,w=b.dataKey,_=b.allowDataOverflow,S=b.allowDuplicatedCategory,E=b.scale,j=b.ticks,N=b.includeHidden,k=b[o];if(v[k])return v;var C=X2(t.data,{graphicalItems:a.filter(function(O){var W,L=o in O.props?O.props[o]:(W=O.type.defaultProps)===null||W===void 0?void 0:W[o];return L===k}),dataStartIndex:c,dataEndIndex:u}),T=C.length,A,B,R;WKe(b.domain,_,y)&&(A=HP(b.domain,null,_),p&&(y==="number"||E!=="auto")&&(R=Fg(C,w,"category")));var P=Yte(y);if(!A||A.length===0){var D,U=(D=b.domain)!==null&&D!==void 0?D:P;if(w){if(A=Fg(C,w,y),y==="category"&&p){var M=ZPe(A);S&&M?(B=A,A=eS(0,T)):S||(A=X6(U,A,m).reduce(function(O,W){return O.indexOf(W)>=0?O:[].concat(Op(O),[W])},[]))}else if(y==="category")S?A=A.filter(function(O){return O!==""&&!Sr(O)}):A=X6(U,A,m).reduce(function(O,W){return O.indexOf(W)>=0||W===""||Sr(W)?O:[].concat(Op(O),[W])},[]);else if(y==="number"){var F=d9e(C,a.filter(function(O){var W,L,H=o in O.props?O.props[o]:(W=O.type.defaultProps)===null||W===void 0?void 0:W[o],ee="hide"in O.props?O.props.hide:(L=O.type.defaultProps)===null||L===void 0?void 0:L.hide;return H===k&&(N||!ee)}),w,s,d);F&&(A=F)}p&&(y==="number"||E!=="auto")&&(R=Fg(C,w,"category"))}else p?A=eS(0,T):l&&l[k]&&l[k].hasStack&&y==="number"?A=h==="expand"?[0,1]:Iee(l[k].stackGroups,c,u):A=Aee(C,a.filter(function(O){var W=o in O.props?O.props[o]:O.type.defaultProps[o],L="hide"in O.props?O.props.hide:O.type.defaultProps.hide;return W===k&&(N||!L)}),y,d,!0);if(y==="number")A=CO(f,A,k,s,j),U&&(A=HP(U,A,_));else if(y==="category"&&U){var K=U,X=A.every(function(O){return K.indexOf(O)>=0});X&&(A=K)}}return Le(Le({},v),{},Xt({},k,Le(Le({},b),{},{axisType:s,domain:A,categoricalDomain:R,duplicateDomain:B,originalDomain:(g=b.domain)!==null&&g!==void 0?g:P,isCategorical:p,layout:d})))},{})},xXe=function(t,r){var n=r.graphicalItems,a=r.Axis,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=X2(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),p=h.length,v=Pee(d,s),m=-1;return n.reduce(function(g,b){var y=b.type.defaultProps!==void 0?Le(Le({},b.type.defaultProps),b.props):b.props,w=y[o],_=Yte("number");if(!g[w]){m++;var S;return v?S=eS(0,p):l&&l[w]&&l[w].hasStack?(S=Iee(l[w].stackGroups,c,u),S=CO(f,S,w,s)):(S=HP(_,Aee(h,n.filter(function(E){var j,N,k=o in E.props?E.props[o]:(j=E.type.defaultProps)===null||j===void 0?void 0:j[o],C="hide"in E.props?E.props.hide:(N=E.type.defaultProps)===null||N===void 0?void 0:N.hide;return k===w&&!C}),"number",d),a.defaultProps.allowDataOverflow),S=CO(f,S,w,s)),Le(Le({},g),{},Xt({},w,Le(Le({axisType:s},a.defaultProps),{},{hide:!0,orientation:Ei(hXe,"".concat(s,".").concat(m%2),null),domain:S,originalDomain:_,isCategorical:v,layout:d})))}return g},{})},yXe=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,s=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=ro(d,s),p={};return h&&h.length?p=vXe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(p=xXe(t,{Axis:s,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},bXe=function(t){var r=cu(t),n=oc(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:nM(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:z_(r,n)}},EB=function(t){var r=t.children,n=t.defaultShowTooltip,a=fi(r,Sp),s=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},wXe=function(t){return!t||!t.length?!1:t.some(function(r){var n=fc(r&&r.type);return n&&n.indexOf("Bar")>=0})},NB=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},_Xe=function(t,r){var n=t.props,a=t.graphicalItems,s=t.xAxisMap,o=s===void 0?{}:s,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,h=n.margin||{},p=fi(f,Sp),v=fi(f,ga),m=Object.keys(c).reduce(function(S,E){var j=c[E],N=j.orientation;return!j.mirror&&!j.hide?Le(Le({},S),{},Xt({},N,S[N]+j.width)):S},{left:h.left||0,right:h.right||0}),g=Object.keys(o).reduce(function(S,E){var j=o[E],N=j.orientation;return!j.mirror&&!j.hide?Le(Le({},S),{},Xt({},N,Ei(S,"".concat(N))+j.height)):S},{top:h.top||0,bottom:h.bottom||0}),b=Le(Le({},g),m),y=b.bottom;p&&(b.bottom+=p.props.height||Sp.defaultProps.height),v&&r&&(b=c9e(b,a,n,r));var w=u-b.left-b.right,_=d-b.top-b.bottom;return Le(Le({brushBottom:y},b),{},{width:Math.max(w,0),height:Math.max(_,0)})},SXe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Zte=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,s=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(g,b){var y=b.graphicalItems,w=b.stackGroups,_=b.offset,S=b.updateId,E=b.dataStartIndex,j=b.dataEndIndex,N=g.barSize,k=g.layout,C=g.barGap,T=g.barCategoryGap,A=g.maxBarSize,B=NB(k),R=B.numericAxisName,P=B.cateAxisName,D=wXe(y),U=[];return y.forEach(function(M,F){var K=X2(g.data,{graphicalItems:[M],dataStartIndex:E,dataEndIndex:j}),X=M.type.defaultProps!==void 0?Le(Le({},M.type.defaultProps),M.props):M.props,O=X.dataKey,W=X.maxBarSize,L=X["".concat(R,"Id")],H=X["".concat(P,"Id")],ee={},q=c.reduce(function(ae,ge){var Se=b["".concat(ge.axisType,"Map")],te=X["".concat(ge.axisType,"Id")];Se&&Se[te]||ge.axisType==="zAxis"||Ff();var me=Se[te];return Le(Le({},ae),{},Xt(Xt({},ge.axisType,me),"".concat(ge.axisType,"Ticks"),oc(me)))},ee),Z=q[P],I=q["".concat(P,"Ticks")],Q=w&&w[L]&&w[L].hasStack&&b9e(M,w[L].stackGroups),ve=fc(M.type).indexOf("Bar")>=0,z=z_(Z,I),we=[],Re=D&&o9e({barSize:N,stackGroups:w,totalSize:SXe(q,P)});if(ve){var Pe,De,Ne=Sr(W)?A:W,J=(Pe=(De=z_(Z,I,!0))!==null&&De!==void 0?De:Ne)!==null&&Pe!==void 0?Pe:0;we=l9e({barGap:C,barCategoryGap:T,bandSize:J!==z?J:z,sizeList:Re[H],maxBarSize:Ne}),J!==z&&(we=we.map(function(ae){return Le(Le({},ae),{},{position:Le(Le({},ae.position),{},{offset:ae.position.offset-J/2})})}))}var Y=M&&M.type&&M.type.getComposedData;Y&&U.push({props:Le(Le({},Y(Le(Le({},q),{},{displayedData:K,props:g,dataKey:O,item:M,bandSize:z,barPosition:we,offset:_,stackedData:Q,layout:k,dataStartIndex:E,dataEndIndex:j}))),{},Xt(Xt(Xt({key:M.key||"item-".concat(F)},R,q[R]),P,q[P]),"animationId",S)),childIndex:lOe(M,g.children),item:M})}),U},p=function(g,b){var y=g.props,w=g.dataStartIndex,_=g.dataEndIndex,S=g.updateId;if(!W5({props:y}))return null;var E=y.children,j=y.layout,N=y.stackOffset,k=y.data,C=y.reverseStackOrder,T=NB(j),A=T.numericAxisName,B=T.cateAxisName,R=ro(E,n),P=x9e(k,R,"".concat(A,"Id"),"".concat(B,"Id"),N,C),D=c.reduce(function(X,O){var W="".concat(O.axisType,"Map");return Le(Le({},X),{},Xt({},W,yXe(y,Le(Le({},O),{},{graphicalItems:R,stackGroups:O.axisType===A&&P,dataStartIndex:w,dataEndIndex:_}))))},{}),U=_Xe(Le(Le({},D),{},{props:y,graphicalItems:R}),b==null?void 0:b.legendBBox);Object.keys(D).forEach(function(X){D[X]=d(y,D[X],U,X.replace("Map",""),r)});var M=D["".concat(B,"Map")],F=bXe(M),K=h(y,Le(Le({},D),{},{dataStartIndex:w,dataEndIndex:_,updateId:S,graphicalItems:R,stackGroups:P,offset:U}));return Le(Le({formattedGraphicalItems:K,graphicalItems:R,offset:U,stackGroups:P},F),D)},v=function(m){function g(b){var y,w,_;return rXe(this,g),_=sXe(this,g,[b]),Xt(_,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Xt(_,"accessibilityManager",new zKe),Xt(_,"handleLegendBBoxUpdate",function(S){if(S){var E=_.state,j=E.dataStartIndex,N=E.dataEndIndex,k=E.updateId;_.setState(Le({legendBBox:S},p({props:_.props,dataStartIndex:j,dataEndIndex:N,updateId:k},Le(Le({},_.state),{},{legendBBox:S}))))}}),Xt(_,"handleReceiveSyncEvent",function(S,E,j){if(_.props.syncId===S){if(j===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(E)}}),Xt(_,"handleBrushChange",function(S){var E=S.startIndex,j=S.endIndex;if(E!==_.state.dataStartIndex||j!==_.state.dataEndIndex){var N=_.state.updateId;_.setState(function(){return Le({dataStartIndex:E,dataEndIndex:j},p({props:_.props,dataStartIndex:E,dataEndIndex:j,updateId:N},_.state))}),_.triggerSyncEvent({dataStartIndex:E,dataEndIndex:j})}}),Xt(_,"handleMouseEnter",function(S){var E=_.getMouseInfo(S);if(E){var j=Le(Le({},E),{},{isTooltipActive:!0});_.setState(j),_.triggerSyncEvent(j);var N=_.props.onMouseEnter;rr(N)&&N(j,S)}}),Xt(_,"triggeredAfterMouseMove",function(S){var E=_.getMouseInfo(S),j=E?Le(Le({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(j),_.triggerSyncEvent(j);var N=_.props.onMouseMove;rr(N)&&N(j,S)}),Xt(_,"handleItemMouseEnter",function(S){_.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Xt(_,"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),Xt(_,"handleMouseMove",function(S){S.persist(),_.throttleTriggeredAfterMouseMove(S)}),Xt(_,"handleMouseLeave",function(S){_.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};_.setState(E),_.triggerSyncEvent(E);var j=_.props.onMouseLeave;rr(j)&&j(E,S)}),Xt(_,"handleOuterEvent",function(S){var E=oOe(S),j=Ei(_.props,"".concat(E));if(E&&rr(j)){var N,k;/.*touch.*/i.test(E)?k=_.getMouseInfo(S.changedTouches[0]):k=_.getMouseInfo(S),j((N=k)!==null&&N!==void 0?N:{},S)}}),Xt(_,"handleClick",function(S){var E=_.getMouseInfo(S);if(E){var j=Le(Le({},E),{},{isTooltipActive:!0});_.setState(j),_.triggerSyncEvent(j);var N=_.props.onClick;rr(N)&&N(j,S)}}),Xt(_,"handleMouseDown",function(S){var E=_.props.onMouseDown;if(rr(E)){var j=_.getMouseInfo(S);E(j,S)}}),Xt(_,"handleMouseUp",function(S){var E=_.props.onMouseUp;if(rr(E)){var j=_.getMouseInfo(S);E(j,S)}}),Xt(_,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Xt(_,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&_.handleMouseDown(S.changedTouches[0])}),Xt(_,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&_.handleMouseUp(S.changedTouches[0])}),Xt(_,"triggerSyncEvent",function(S){_.props.syncId!==void 0&&iC.emit(oC,_.props.syncId,S,_.eventEmitterSymbol)}),Xt(_,"applySyncEvent",function(S){var E=_.props,j=E.layout,N=E.syncMethod,k=_.state.updateId,C=S.dataStartIndex,T=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)_.setState(Le({dataStartIndex:C,dataEndIndex:T},p({props:_.props,dataStartIndex:C,dataEndIndex:T,updateId:k},_.state)));else if(S.activeTooltipIndex!==void 0){var A=S.chartX,B=S.chartY,R=S.activeTooltipIndex,P=_.state,D=P.offset,U=P.tooltipTicks;if(!D)return;if(typeof N=="function")R=N(U,S);else if(N==="value"){R=-1;for(var M=0;M<U.length;M++)if(U[M].value===S.activeLabel){R=M;break}}var F=Le(Le({},D),{},{x:D.left,y:D.top}),K=Math.min(A,F.x+F.width),X=Math.min(B,F.y+F.height),O=U[R]&&U[R].value,W=AO(_.state,_.props.data,R),L=U[R]?{x:j==="horizontal"?U[R].coordinate:K,y:j==="horizontal"?X:U[R].coordinate}:Xte;_.setState(Le(Le({},S),{},{activeLabel:O,activeCoordinate:L,activePayload:W,activeTooltipIndex:R}))}else _.setState(S)}),Xt(_,"renderCursor",function(S){var E,j=_.state,N=j.isTooltipActive,k=j.activeCoordinate,C=j.activePayload,T=j.offset,A=j.activeTooltipIndex,B=j.tooltipAxisBandSize,R=_.getTooltipEventType(),P=(E=S.props.active)!==null&&E!==void 0?E:N,D=_.props.layout,U=S.key||"_recharts-cursor";return G.createElement(XKe,{key:U,activeCoordinate:k,activePayload:C,activeTooltipIndex:A,chartName:r,element:S,isActive:P,layout:D,offset:T,tooltipAxisBandSize:B,tooltipEventType:R})}),Xt(_,"renderPolarAxis",function(S,E,j){var N=Ei(S,"type.axisType"),k=Ei(_.state,"".concat(N,"Map")),C=S.type.defaultProps,T=C!==void 0?Le(Le({},C),S.props):S.props,A=k&&k[T["".concat(N,"Id")]];return x.cloneElement(S,Le(Le({},A),{},{className:hr(N,A.className),key:S.key||"".concat(E,"-").concat(j),ticks:oc(A,!0)}))}),Xt(_,"renderPolarGrid",function(S){var E=S.props,j=E.radialLines,N=E.polarAngles,k=E.polarRadius,C=_.state,T=C.radiusAxisMap,A=C.angleAxisMap,B=cu(T),R=cu(A),P=R.cx,D=R.cy,U=R.innerRadius,M=R.outerRadius;return x.cloneElement(S,{polarAngles:Array.isArray(N)?N:oc(R,!0).map(function(F){return F.coordinate}),polarRadius:Array.isArray(k)?k:oc(B,!0).map(function(F){return F.coordinate}),cx:P,cy:D,innerRadius:U,outerRadius:M,key:S.key||"polar-grid",radialLines:j})}),Xt(_,"renderLegend",function(){var S=_.state.formattedGraphicalItems,E=_.props,j=E.children,N=E.width,k=E.height,C=_.props.margin||{},T=N-(C.left||0)-(C.right||0),A=kee({children:j,formattedGraphicalItems:S,legendWidth:T,legendContent:u});if(!A)return null;var B=A.item,R=_B(A,YKe);return x.cloneElement(B,Le(Le({},R),{},{chartWidth:N,chartHeight:k,margin:C,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),Xt(_,"renderTooltip",function(){var S,E=_.props,j=E.children,N=E.accessibilityLayer,k=fi(j,Aa);if(!k)return null;var C=_.state,T=C.isTooltipActive,A=C.activeCoordinate,B=C.activePayload,R=C.activeLabel,P=C.offset,D=(S=k.props.active)!==null&&S!==void 0?S:T;return x.cloneElement(k,{viewBox:Le(Le({},P),{},{x:P.left,y:P.top}),active:D,label:R,payload:D?B:[],coordinate:A,accessibilityLayer:N})}),Xt(_,"renderBrush",function(S){var E=_.props,j=E.margin,N=E.data,k=_.state,C=k.offset,T=k.dataStartIndex,A=k.dataEndIndex,B=k.updateId;return x.cloneElement(S,{key:S.key||"_recharts-brush",onChange:Zb(_.handleBrushChange,S.props.onChange),data:N,x:ft(S.props.x)?S.props.x:C.left,y:ft(S.props.y)?S.props.y:C.top+C.height+C.brushBottom-(j.bottom||0),width:ft(S.props.width)?S.props.width:C.width,startIndex:T,endIndex:A,updateId:"brush-".concat(B)})}),Xt(_,"renderReferenceElement",function(S,E,j){if(!S)return null;var N=_,k=N.clipPathId,C=_.state,T=C.xAxisMap,A=C.yAxisMap,B=C.offset,R=S.type.defaultProps||{},P=S.props,D=P.xAxisId,U=D===void 0?R.xAxisId:D,M=P.yAxisId,F=M===void 0?R.yAxisId:M;return x.cloneElement(S,{key:S.key||"".concat(E,"-").concat(j),xAxis:T[U],yAxis:A[F],viewBox:{x:B.left,y:B.top,width:B.width,height:B.height},clipPathId:k})}),Xt(_,"renderActivePoints",function(S){var E=S.item,j=S.activePoint,N=S.basePoint,k=S.childIndex,C=S.isRange,T=[],A=E.props.key,B=E.item.type.defaultProps!==void 0?Le(Le({},E.item.type.defaultProps),E.item.props):E.item.props,R=B.activeDot,P=B.dataKey,D=Le(Le({index:k,dataKey:P,cx:j.x,cy:j.y,r:4,fill:TM(E.item),strokeWidth:2,stroke:"#fff",payload:j.payload,value:j.value},Qt(R,!1)),p_(R));return T.push(g.renderActiveDot(R,D,"".concat(A,"-activePoint-").concat(k))),N?T.push(g.renderActiveDot(R,Le(Le({},D),{},{cx:N.x,cy:N.y}),"".concat(A,"-basePoint-").concat(k))):C&&T.push(null),T}),Xt(_,"renderGraphicChild",function(S,E,j){var N=_.filterFormatItem(S,E,j);if(!N)return null;var k=_.getTooltipEventType(),C=_.state,T=C.isTooltipActive,A=C.tooltipAxis,B=C.activeTooltipIndex,R=C.activeLabel,P=_.props.children,D=fi(P,Aa),U=N.props,M=U.points,F=U.isRange,K=U.baseLine,X=N.item.type.defaultProps!==void 0?Le(Le({},N.item.type.defaultProps),N.item.props):N.item.props,O=X.activeDot,W=X.hide,L=X.activeBar,H=X.activeShape,ee=!!(!W&&T&&D&&(O||L||H)),q={};k!=="axis"&&D&&D.props.trigger==="click"?q={onClick:Zb(_.handleItemMouseEnter,S.props.onClick)}:k!=="axis"&&(q={onMouseLeave:Zb(_.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:Zb(_.handleItemMouseEnter,S.props.onMouseEnter)});var Z=x.cloneElement(S,Le(Le({},N.props),q));function I(ge){return typeof A.dataKey=="function"?A.dataKey(ge.payload):null}if(ee)if(B>=0){var Q,ve;if(A.dataKey&&!A.allowDuplicatedCategory){var z=typeof A.dataKey=="function"?I:"payload.".concat(A.dataKey.toString());Q=aP(M,z,R),ve=F&&K&&aP(K,z,R)}else Q=M==null?void 0:M[B],ve=F&&K&&K[B];if(H||L){var we=S.props.activeIndex!==void 0?S.props.activeIndex:B;return[x.cloneElement(S,Le(Le(Le({},N.props),q),{},{activeIndex:we})),null,null]}if(!Sr(Q))return[Z].concat(Op(_.renderActivePoints({item:N,activePoint:Q,basePoint:ve,childIndex:B,isRange:F})))}else{var Re,Pe=(Re=_.getItemByXY(_.state.activeCoordinate))!==null&&Re!==void 0?Re:{graphicalItem:Z},De=Pe.graphicalItem,Ne=De.item,J=Ne===void 0?S:Ne,Y=De.childIndex,ae=Le(Le(Le({},N.props),q),{},{activeIndex:Y});return[x.cloneElement(J,ae),null,null]}return F?[Z,null,null]:[Z,null]}),Xt(_,"renderCustomized",function(S,E,j){return x.cloneElement(S,Le(Le({key:"recharts-customized-".concat(j)},_.props),_.state))}),Xt(_,"renderMap",{CartesianGrid:{handler:r1,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:r1},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:r1},YAxis:{handler:r1},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((y=b.id)!==null&&y!==void 0?y:Cy("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=CQ(_.triggeredAfterMouseMove,(w=b.throttleDelay)!==null&&w!==void 0?w:1e3/60),_.state={},_}return lXe(g,m),aXe(g,[{key:"componentDidMount",value:function(){var y,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var y=this.props,w=y.children,_=y.data,S=y.height,E=y.layout,j=fi(w,Aa);if(j){var N=j.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var k=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,C=AO(this.state,_,N,k),T=this.state.tooltipTicks[N].coordinate,A=(this.state.offset.top+S)/2,B=E==="horizontal",R=B?{x:T,y:A}:{y:T,x:A},P=this.state.formattedGraphicalItems.find(function(U){var M=U.item;return M.type.name==="Scatter"});P&&(R=Le(Le({},R),P.props.points[N].tooltipPosition),C=P.props.points[N].tooltipPayload);var D={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:k,activePayload:C,activeCoordinate:R};this.setState(D),this.renderCursor(j),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(y,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var _,S;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(y){iP([fi(y.children,Aa)],[fi(this.props.children,Aa)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=fi(this.props.children,Aa);if(y&&typeof y.props.shared=="boolean"){var w=y.props.shared?"axis":"item";return l.indexOf(w)>=0?w:s}return s}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var w=this.container,_=w.getBoundingClientRect(),S=DLe(_),E={chartX:Math.round(y.pageX-S.left),chartY:Math.round(y.pageY-S.top)},j=_.width/w.offsetWidth||1,N=this.inRange(E.chartX,E.chartY,j);if(!N)return null;var k=this.state,C=k.xAxisMap,T=k.yAxisMap,A=this.getTooltipEventType();if(A!=="axis"&&C&&T){var B=cu(C).scale,R=cu(T).scale,P=B&&B.invert?B.invert(E.chartX):null,D=R&&R.invert?R.invert(E.chartY):null;return Le(Le({},E),{},{xValue:P,yValue:D})}var U=jB(this.state,this.props.data,this.props.layout,N);return U?Le(Le({},E),U):null}},{key:"inRange",value:function(y,w){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,E=y/_,j=w/_;if(S==="horizontal"||S==="vertical"){var N=this.state.offset,k=E>=N.left&&E<=N.left+N.width&&j>=N.top&&j<=N.top+N.height;return k?{x:E,y:j}:null}var C=this.state,T=C.angleAxisMap,A=C.radiusAxisMap;if(T&&A){var B=cu(T);return J6({x:E,y:j},B)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,w=this.getTooltipEventType(),_=fi(y,Aa),S={};_&&w==="axis"&&(_.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var E=p_(this.props,this.handleOuterEvent);return Le(Le({},E),S)}},{key:"addListener",value:function(){iC.on(oC,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){iC.removeListener(oC,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(y,w,_){for(var S=this.state.formattedGraphicalItems,E=0,j=S.length;E<j;E++){var N=S[E];if(N.item===y||N.props.key===y.key||w===fc(N.item.type)&&_===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var y=this.clipPathId,w=this.state.offset,_=w.left,S=w.top,E=w.height,j=w.width;return G.createElement("defs",null,G.createElement("clipPath",{id:y},G.createElement("rect",{x:_,y:S,height:E,width:j})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(w,_){var S=wB(_,2),E=S[0],j=S[1];return Le(Le({},w),{},Xt({},E,j.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(w,_){var S=wB(_,2),E=S[0],j=S[1];return Le(Le({},w),{},Xt({},E,j.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[y])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(y){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[y])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(y){var w=this.state,_=w.formattedGraphicalItems,S=w.activeItem;if(_&&_.length)for(var E=0,j=_.length;E<j;E++){var N=_[E],k=N.props,C=N.item,T=C.type.defaultProps!==void 0?Le(Le({},C.type.defaultProps),C.props):C.props,A=fc(C.type);if(A==="Bar"){var B=(k.data||[]).find(function(U){return iWe(y,U)});if(B)return{graphicalItem:N,payload:B}}else if(A==="RadialBar"){var R=(k.data||[]).find(function(U){return J6(y,U)});if(R)return{graphicalItem:N,payload:R}}else if(z2(N,S)||W2(N,S)||Nx(N,S)){var P=KVe({graphicalItem:N,activeTooltipItem:S,itemData:T.data}),D=T.activeIndex===void 0?P:T.activeIndex;return{graphicalItem:Le(Le({},N),{},{childIndex:D}),payload:Nx(N,S)?T.data[P]:N.props.data[P]}}}return null}},{key:"render",value:function(){var y=this;if(!W5(this))return null;var w=this.props,_=w.children,S=w.className,E=w.width,j=w.height,N=w.style,k=w.compact,C=w.title,T=w.desc,A=_B(w,ZKe),B=Qt(A,!1);if(k)return G.createElement(iB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},G.createElement(lP,zg({},B,{width:E,height:j,title:C,desc:T}),this.renderClipPath(),H5(_,this.renderMap)));if(this.props.accessibilityLayer){var R,P;B.tabIndex=(R=this.props.tabIndex)!==null&&R!==void 0?R:0,B.role=(P=this.props.role)!==null&&P!==void 0?P:"application",B.onKeyDown=function(U){y.accessibilityManager.keyboardEvent(U)},B.onFocus=function(){y.accessibilityManager.focus()}}var D=this.parseEventsOfWrapper();return G.createElement(iB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},G.createElement("div",zg({className:hr("recharts-wrapper",S),style:Le({position:"relative",cursor:"default",width:E,height:j},N)},D,{ref:function(M){y.container=M}}),G.createElement(lP,zg({},B,{width:E,height:j,title:C,desc:T,style:mXe}),this.renderClipPath(),H5(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(x.Component);return Xt(v,"displayName",r),Xt(v,"defaultProps",Le({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Xt(v,"getDerivedStateFromProps",function(m,g){var b=m.dataKey,y=m.data,w=m.children,_=m.width,S=m.height,E=m.layout,j=m.stackOffset,N=m.margin,k=g.dataStartIndex,C=g.dataEndIndex;if(g.updateId===void 0){var T=EB(m);return Le(Le(Le({},T),{},{updateId:0},p(Le(Le({props:m},T),{},{updateId:0}),g)),{},{prevDataKey:b,prevData:y,prevWidth:_,prevHeight:S,prevLayout:E,prevStackOffset:j,prevMargin:N,prevChildren:w})}if(b!==g.prevDataKey||y!==g.prevData||_!==g.prevWidth||S!==g.prevHeight||E!==g.prevLayout||j!==g.prevStackOffset||!Tm(N,g.prevMargin)){var A=EB(m),B={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},R=Le(Le({},jB(g,y,E)),{},{updateId:g.updateId+1}),P=Le(Le(Le({},A),B),R);return Le(Le(Le({},P),p(Le({props:m},P),g)),{},{prevDataKey:b,prevData:y,prevWidth:_,prevHeight:S,prevLayout:E,prevStackOffset:j,prevMargin:N,prevChildren:w})}if(!iP(w,g.prevChildren)){var D,U,M,F,K=fi(w,Sp),X=K&&(D=(U=K.props)===null||U===void 0?void 0:U.startIndex)!==null&&D!==void 0?D:k,O=K&&(M=(F=K.props)===null||F===void 0?void 0:F.endIndex)!==null&&M!==void 0?M:C,W=X!==k||O!==C,L=!Sr(y),H=L&&!W?g.updateId:g.updateId+1;return Le(Le({updateId:H},p(Le(Le({props:m},g),{},{updateId:H,dataStartIndex:X,dataEndIndex:O}),g)),{},{prevChildren:w,dataStartIndex:X,dataEndIndex:O})}return null}),Xt(v,"renderActiveDot",function(m,g,b){var y;return x.isValidElement(m)?y=x.cloneElement(m,g):rr(m)?y=m(g):y=G.createElement(PM,g),G.createElement(Zr,{className:"recharts-active-dot",key:b},y)}),function(g){return G.createElement(v,g)}},_d=Zte({chartName:"BarChart",GraphicalChild:vs,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:hl},{axisType:"yAxis",AxisComp:No}],formatAxisMap:Nqe}),X0=Zte({chartName:"PieChart",GraphicalChild:xi,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:U2},{axisType:"radiusAxis",AxisComp:L2}],formatAxisMap:A9e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const CB=["#8884d8","#83a6ed","#8dd1e1","#82ca9d","#a4de6c"],cC=e=>{if(!e||!/^\d{2}\.\d{4}$/.test(e))return e;const[t,r]=e.split("."),n=parseInt(t,10),a=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];return n>=1&&n<=12?`${a[n-1]} ${r}`:e},jXe={day:"День",week:"Неделя",month:"Месяц",quarter:"Квартал",year:"Год"},EXe=()=>{const[e,t]=x.useState("month"),[r,n]=x.useState("summary"),[a,s]=x.useState([]),[o,l]=x.useState(!0),{appointmentsByMonth:c,newClientsByMonth:u,masterStats:d,serviceStats:f,clientStats:h,loading:p,error:v,fetchAllStats:m,repeatVisitsCount:g=0,cancelledAppointmentsCount:b=0,averageOccupancy:y={value:0,dynamicsPercent:0},soldSubscriptionsCount:w,activeSubscriptionsCount:_,subscriptionsRevenue:S,expiredSubscriptionsCount:E,subscriptionVisitsCount:j,usedUpSubscriptionsCount:N,subscriptionsSalesDynamics:k,top3Subscriptions:C,top3ClientsBySubscriptions:T,accruedBonusesCount:A,spentBonusesCount:B,clientsWithBonusesCount:R,averageBonusBalance:P,maxBonusBalance:D,bonusDynamics:U,top3ClientsByBonuses:M,individualDiscountsCount:F,globalDiscountsCount:K,globalDiscountsTotalAmount:X,discountsDynamics:O,top3GlobalDiscounts:W}=eP(),L=Gs(Y=>Y.clients),H=qu(Y=>Y.appointments);console.log("masterStats",d);const ee=jXe[e]||e;x.useEffect(()=>{m(e)},[m,e]),x.useEffect(()=>{(async()=>{l(!0);try{const ae=await Fr.getRevenueByMonth("month");s(ae.slice(-6))}catch(ae){console.error("Ошибка при загрузке выручки за 6 месяцев:",ae),s([])}finally{l(!1)}})()},[]);const Z=(()=>{const ge=[...f].filter(ke=>ke.count>=1).sort((ke,he)=>he.count-ke.count);if(ge.length<=12)return ge.map(ke=>({name:ke.name,value:ke.count}));const Se=ge.slice(0,11),te=ge.slice(11).reduce((ke,he)=>ke+he.count,0),me=Se.map(ke=>({name:ke.name,value:ke.count}));return te>0&&me.push({name:"Другие",value:te}),me})(),I=eP(Y=>Y.revenueByMonth),Q=I.length?I[I.length-1].revenue:0,ve=c.length?c[c.length-1].count:0;u.length&&u[u.length-1].count;const z=a.map(Y=>({month:cC(Y.month),Выручка:Y.revenue})).filter(Y=>Y.Выручка>0),we=((h==null?void 0:h.activityByMonth)||[]).map(Y=>({...Y,month:cC(Y.month)})).filter(Y=>Y.count>0),Re=d.map(Y=>({name:Y.name,appointments:Y.appointments,revenue:Y.revenue})).filter(Y=>Y.appointments>0||Y.revenue>0);console.log("specialistData",Re);const Pe=Y=>e===Y,Ne=(()=>{let Y=0;return L.forEach(ae=>{const ge=H.filter(me=>String(me.client_id)===String(ae.id)&&me.status==="completed").sort((me,ke)=>new Date(ke.date).getTime()-new Date(me.date).getTime());if(ge.length===0)return;const Se=ge[0].date,te=Math.floor((new Date().getTime()-new Date(Se).getTime())/(1e3*60*60*24));te>60&&te<=180&&Y++}),Y})(),J=U.filter(Y=>Y.accrual>0||Y.spend>0);return p?i.jsx("div",{className:"w-full flex justify-center items-center h-96",children:"Загрузка..."}):v?i.jsx("div",{className:"w-full flex justify-center items-center h-96 text-red-500",children:v}):i.jsx("div",{className:"space-y-4",children:i.jsxs(fa,{value:r,onValueChange:n,className:"w-full",children:[i.jsxs(ta,{className:"mb-6",children:[i.jsx(Tt,{value:"summary",children:"Общая статистика"}),i.jsx(Tt,{value:"specialists",children:"По мастерам"}),i.jsx(Tt,{value:"services",children:"По услугам"}),i.jsx(Tt,{value:"clients",children:"По клиентам"}),i.jsx(Tt,{value:"loyalty",children:"Лояльность"})]}),i.jsx("div",{className:"flex mb-4",children:i.jsxs("div",{className:"flex bg-gray-100 rounded-md p-1 w-fit",children:[i.jsx(ne,{variant:Pe("day")?"default":"ghost",size:"sm",onClick:()=>t("day"),className:`${Pe("day")?"bg-gray-600":"hover:bg-gray-200"} text-sm px-4`,children:"День"}),i.jsx(ne,{variant:Pe("week")?"default":"ghost",size:"sm",onClick:()=>t("week"),className:`${Pe("week")?"bg-gray-600":"hover:bg-gray-200"} text-sm px-4`,children:"Неделя"}),i.jsx(ne,{variant:Pe("month")?"default":"ghost",size:"sm",onClick:()=>t("month"),className:`${Pe("month")?"bg-gray-600":"hover:bg-gray-200"} text-sm px-4`,children:"Месяц"}),i.jsx(ne,{variant:Pe("quarter")?"default":"ghost",size:"sm",onClick:()=>t("quarter"),className:`${Pe("quarter")?"bg-gray-600":"hover:bg-gray-200"} text-sm px-4`,children:"Квартал"}),i.jsx(ne,{variant:Pe("year")?"default":"ghost",size:"sm",onClick:()=>t("year"),className:`${Pe("year")?"bg-gray-600":"hover:bg-gray-200"} text-sm px-4`,children:"Год"})]})}),i.jsxs(Ft,{value:"summary",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs(qe,{children:[i.jsxs(ht,{className:"flex flex-row items-center justify-between pb-2 space-y-0",children:[i.jsx(gt,{className:"text-sm font-medium",children:"Выручка"}),i.jsx(qT,{className:"h-4 w-4 text-beauty-500"})]}),i.jsx(Ge,{children:i.jsxs("div",{className:"text-2xl font-bold",children:["₽ ",Q.toLocaleString()]})})]}),i.jsxs(qe,{children:[i.jsxs(ht,{className:"flex flex-row items-center justify-between pb-2 space-y-0",children:[i.jsx(gt,{className:"text-sm font-medium",children:"Записей"}),i.jsx(Ow,{className:"h-4 w-4 text-beauty-500"})]}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:ve})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"flex flex-row items-center justify-between pb-2 space-y-0",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Средний чек",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Средняя стоимость услуги с учётом скидок за выбранный период."})})]})})]})}),i.jsx(Ge,{children:i.jsxs("div",{className:"text-2xl font-bold",children:["₽ ",((h==null?void 0:h.avgCheck)||0).toLocaleString()]})})]}),i.jsxs(qe,{children:[i.jsxs(ht,{className:"flex flex-row items-center justify-between pb-2 space-y-0",children:[i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Повторные визиты",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsxs(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:[i.jsx("p",{children:"Количество всех визитов, совершённых клиентами, уже посещавшими салон ранее (не первые визиты)."}),i.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"Если клиент был 3 раза, то 2 из них считаются повторными визитами."})]})]})})]}),i.jsx(Vu,{className:"h-4 w-4 text-green-500"})]}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:g})})]}),i.jsxs(qe,{children:[i.jsxs(ht,{className:"flex flex-row items-center justify-between pb-2 space-y-0",children:[i.jsx(gt,{className:"text-sm font-medium",children:"Отмены"}),i.jsx(Ow,{className:"h-4 w-4 text-red-500"})]}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:b})})]}),i.jsxs(qe,{children:[i.jsxs(ht,{className:"flex flex-row items-center justify-between pb-2 space-y-0",children:[i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Средняя заполненность",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Показывает, насколько занято рабочее время мастеров. Рассчитывается как процент от общего рабочего времени всех мастеров, занятый записями клиентов."})})]})})]}),i.jsx(qT,{className:"h-4 w-4 text-blue-500"})]}),i.jsxs(Ge,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[y.value.toFixed(1),"%"]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Динамика: ",y.dynamicsPercent.toFixed(1),"%"]})]})]})]}),i.jsxs(qe,{children:[i.jsxs(ht,{children:[i.jsx(gt,{children:"Динамика выручки"}),i.jsx(da,{children:"Общая выручка за последние 6 месяцев"})]}),i.jsx(Ge,{children:o?i.jsx("div",{className:"flex justify-center items-center h-80",children:"Загрузка..."}):z.length>0?i.jsx(zi,{width:"100%",height:300,children:i.jsxs(_d,{data:z,children:[i.jsx(Qc,{strokeDasharray:"3 3"}),i.jsx(hl,{dataKey:"month"}),i.jsx(No,{}),i.jsx(Aa,{formatter:Y=>`${Y.toLocaleString()} ₽`}),i.jsx(ga,{}),i.jsx(vs,{dataKey:"Выручка",fill:"#8884d8",name:"Выручка за месяц",children:i.jsx(Ta,{dataKey:"Выручка",position:"insideTop",formatter:Y=>`${Y.toLocaleString()} ₽`,style:{fill:"white"}})})]})}):i.jsx("div",{children:"Нет данных для отображения."})})]})]}),i.jsx(Ft,{value:"specialists",className:"space-y-6",children:i.jsxs(qe,{children:[i.jsxs(ht,{children:[i.jsx(gt,{children:"Статистика по мастерам"}),i.jsxs(da,{children:["Эффективность мастеров (",ee,")"]})]}),i.jsx(Ge,{children:Re.length>0?i.jsx(zi,{width:"100%",height:300,children:i.jsxs(_d,{data:Re,children:[i.jsx(Qc,{strokeDasharray:"3 3"}),i.jsx(hl,{dataKey:"name"}),i.jsx(No,{yAxisId:"left",orientation:"left",label:{value:"Записи",angle:-90,position:"insideLeft"}}),i.jsx(No,{yAxisId:"right",orientation:"right",label:{value:"Выручка",angle:90,position:"insideRight"}}),i.jsx(Aa,{formatter:(Y,ae)=>ae==="revenue"?`${Y.toLocaleString()} ₽`:Y}),i.jsx(ga,{}),i.jsx(vs,{yAxisId:"left",dataKey:"appointments",fill:"#82ca9d",name:"Записи",children:i.jsx(Ta,{dataKey:"appointments",position:"insideTop",style:{fill:"white"}})}),i.jsx(vs,{yAxisId:"right",dataKey:"revenue",fill:"#8884d8",name:"Выручка",children:i.jsx(Ta,{dataKey:"revenue",position:"insideTop",formatter:Y=>`${Y.toLocaleString()} ₽`,style:{fill:"white"}})})]})}):i.jsx("div",{children:"Нет данных для отображения за выбранный период."})})]})}),i.jsx(Ft,{value:"services",className:"space-y-6",children:i.jsxs(qe,{children:[i.jsxs(ht,{children:[i.jsx(gt,{children:"Популярность услуг"}),i.jsxs(da,{children:["Популярность услуг (",ee,")"]})]}),i.jsx(Ge,{className:"flex justify-center",children:Z.length>0?i.jsx(zi,{width:"100%",height:400,children:i.jsxs(X0,{children:[i.jsx(xi,{data:Z,cx:"50%",cy:"50%",labelLine:!1,label:({name:Y,percent:ae})=>`${Y} (${(ae*100).toFixed(0)}%)`,outerRadius:150,fill:"#8884d8",dataKey:"value",children:Z.map((Y,ae)=>i.jsx(j2,{fill:CB[ae%CB.length]},`cell-${ae}`))}),i.jsx(Aa,{formatter:Y=>`${Y} записей`}),i.jsx(ga,{})]})}):i.jsx("div",{children:"Нет данных для отображения за выбранный период."})})]})}),i.jsxs(Ft,{value:"clients",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Активные клиенты",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Количество уникальных клиентов, получивших услугу (статус 'выполнено') в выбранном периоде."})})]})})]})}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:(h==null?void 0:h.activeClients)||0})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Новых клиентов",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Клиенты, у которых первое посещение (статус 'выполнено') приходится на выбранный период."})})]})})]})}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:(h==null?void 0:h.newClients)||0})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Повторные клиенты",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsxs(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:[i.jsx("p",{children:"Количество уникальных клиентов, которые пришли не в первый раз за выбранный период."}),i.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"Если клиент был 3 раза, он считается одним повторным клиентом."})]})]})})]})}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:(h==null?void 0:h.returningClients)||0})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Неактивные клиенты",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Клиенты, у которых последний завершённый визит был более 60 дней назад, но не более 180 дней назад."})})]})})]})}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:Ne})})]})]}),i.jsxs(qe,{className:"col-span-1 lg:col-span-4",children:[i.jsx(ht,{children:i.jsx(gt,{children:"Активность клиентов"})}),i.jsx(Ge,{className:"pl-2",children:we.length>0?i.jsx(zi,{width:"100%",height:300,children:i.jsxs(_d,{data:we,children:[i.jsx(Qc,{strokeDasharray:"3 3"}),i.jsx(hl,{dataKey:"month"}),i.jsx(No,{}),i.jsx(Aa,{}),i.jsx(ga,{}),i.jsx(vs,{dataKey:"count",fill:"#82ca9d",name:"Кол-во записей",children:i.jsx(Ta,{dataKey:"count",position:"insideTop",style:{fill:"white"}})})]})}):i.jsx("div",{children:"Нет данных для отображения за выбранный период."})})]})]}),i.jsxs(Ft,{value:"loyalty",className:"space-y-10",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Абонементы"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Продано абонементов",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Количество абонементов, проданных за выбранный период."})})]})})]})}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:w})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Активных абонементов",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Количество абонементов, которые сейчас активны (не истекли и есть визиты)."})})]})})]})}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:_})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Выручка по абонементам",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Сумма выручки, полученная от продажи абонементов за выбранный период."})})]})})]})}),i.jsx(Ge,{children:i.jsxs("div",{className:"text-2xl font-bold",children:["₽ ",S.toLocaleString()]})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Абонементов с истёкшим сроком",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Количество абонементов, у которых истёк срок действия."})})]})})]})}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:E})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Количество посещений по абонементу",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Общее количество визитов, совершённых по всем активным абонементам за выбранный период."})})]})})]})}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:j})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Использованных абонементов",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Количество абонементов, по которым были использованы все доступные визиты."})})]})})]})}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:N})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx(gt,{children:"Динамика продаж абонементов"})}),i.jsx(Ge,{children:i.jsx(zi,{width:"100%",height:250,children:i.jsxs(_d,{data:k.map(Y=>({month:cC(Y.month),value:Y.count})),children:[i.jsx(Qc,{strokeDasharray:"3 3"}),i.jsx(hl,{dataKey:"month"}),i.jsx(No,{}),i.jsx(Aa,{}),i.jsx(ga,{}),i.jsx(vs,{dataKey:"value",fill:"#8884d8",name:"Продано абонементов",children:i.jsx(Ta,{dataKey:"value",position:"insideTop",style:{fill:"white"}})})]})})})]}),i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx(gt,{children:"ТОП-3 абонемента"})}),i.jsx(Ge,{children:i.jsx(zi,{width:"100%",height:250,children:i.jsxs(X0,{children:[i.jsx(xi,{dataKey:"value",data:C.map(Y=>({name:Y.name,value:Y.count})),cx:"50%",cy:"50%",outerRadius:80,fill:"#82ca9d",label:!0}),i.jsx(ga,{})]})})})]}),i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx(gt,{children:"ТОП-3 клиента по абонементам"})}),i.jsx(Ge,{children:i.jsx(zi,{width:"100%",height:250,children:i.jsxs(X0,{children:[i.jsx(xi,{dataKey:"value",data:T.map(Y=>({name:Y.client_name,value:Y.count})),cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0}),i.jsx(ga,{})]})})})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Бонусы"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Начислено бонусов за период",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Общее количество бонусных баллов, начисленных клиентам за выбранный период."})})]})})]})}),i.jsx(Ge,{children:i.jsxs("div",{className:"text-2xl font-bold",children:["+",A]})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Списано бонусов за период",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Общее количество бонусных баллов, списанных клиентами за выбранный период."})})]})})]})}),i.jsx(Ge,{children:i.jsxs("div",{className:"text-2xl font-bold",children:["-",B]})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Клиентов с бонусами > 0",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Количество клиентов, у которых есть бонусные баллы на счету."})})]})})]})}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:R})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Средний баланс бонусов на клиента",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Средний баланс бонусных баллов среди всех клиентов."})})]})})]})}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:P})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Максимальный баланс бонусов (топ-клиент)",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Максимальный баланс бонусных баллов у одного клиента."})})]})})]})}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:D})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx(gt,{children:"Динамика бонусов"})}),i.jsx(Ge,{children:i.jsx(zi,{width:"100%",height:250,children:i.jsxs(_d,{data:J,children:[i.jsx(Qc,{strokeDasharray:"3 3"}),i.jsx(hl,{dataKey:"month"}),i.jsx(No,{}),i.jsx(Aa,{}),i.jsx(ga,{}),i.jsx(vs,{dataKey:"accrual",fill:"#82ca9d",name:"Начислено",children:i.jsx(Ta,{dataKey:"accrual",position:"insideTop",style:{fill:"white"}})}),i.jsx(vs,{dataKey:"spend",fill:"#ff6961",name:"Списано",children:i.jsx(Ta,{dataKey:"spend",position:"insideTop",style:{fill:"white"}})})]})})})]}),i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx(gt,{children:"ТОП-3 клиента по бонусам"})}),i.jsx(Ge,{children:M.length>0?i.jsx(zi,{width:"100%",height:250,children:i.jsxs(X0,{children:[i.jsx(xi,{dataKey:"value",nameKey:"client_name",data:M,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:({client_name:Y,value:ae})=>`${Y} (${ae})`}),i.jsx(ga,{})]})}):i.jsx("div",{children:"Нет данных для отображения за выбранный период."})})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Скидки и Акции"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Выдано индивидуальных скидок",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Количество индивидуальных скидок, выданных клиентам за выбранный период."})})]})})]})}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:F})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Применено глобальных скидок за период",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Количество применённых глобальных скидок за выбранный период."})})]})})]})}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:K})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Сумма предоставленных глобальных скидок",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Общая сумма скидок, предоставленных по глобальным программам за выбранный период."})})]})})]})}),i.jsx(Ge,{children:i.jsxs("div",{className:"text-2xl font-bold",children:["₽ ",X.toLocaleString()]})})]}),i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"text-sm font-medium flex items-center",children:["Выдано подарков (автопоздравления)",i.jsx(jn,{children:i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx(Pn,{className:"h-4 w-4 ml-1.5 text-muted-foreground cursor-help"})}),i.jsx(yn,{side:"right",className:"max-w-xs bg-background text-foreground border-border",children:i.jsx("p",{children:"Количество подарков (бонусы/скидки), выданных через автоматические поздравления за период."})})]})})]})}),i.jsx(Ge,{children:i.jsx("div",{className:"text-2xl font-bold",children:"4"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx(gt,{children:"Динамика выдачи скидок"})}),i.jsx(Ge,{children:i.jsx(zi,{width:"100%",height:250,children:i.jsxs(_d,{data:O,children:[i.jsx(Qc,{strokeDasharray:"3 3"}),i.jsx(hl,{dataKey:"month"}),i.jsx(No,{}),i.jsx(Aa,{}),i.jsx(ga,{}),i.jsx(vs,{dataKey:"value",fill:"#8dd1e1",name:"Выдано скидок",children:i.jsx(Ta,{dataKey:"value",position:"insideTop",style:{fill:"white"}})})]})})})]}),i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx(gt,{children:"ТОП-3 глобальные скидки по применению"})}),i.jsx(Ge,{children:i.jsx(zi,{width:"100%",height:250,children:i.jsxs(X0,{children:[i.jsx(xi,{dataKey:"value",data:W,cx:"50%",cy:"50%",outerRadius:80,fill:"#ffb347",label:!0}),i.jsx(ga,{})]})})})]}),i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx(gt,{children:"Динамика выдачи подарков (автопоздравления)"})}),i.jsx(Ge,{children:i.jsx(zi,{width:"100%",height:250,children:i.jsxs(_d,{data:[{month:"Январь",value:1},{month:"Февраль",value:2},{month:"Март",value:1}],children:[i.jsx(Qc,{strokeDasharray:"3 3"}),i.jsx(hl,{dataKey:"month"}),i.jsx(No,{}),i.jsx(Aa,{}),i.jsx(ga,{}),i.jsx(vs,{dataKey:"value",fill:"#b0e57c",name:"Подарков выдано",children:i.jsx(Ta,{dataKey:"value",position:"insideTop",style:{fill:"white"}})})]})})})]})]})]})]})]})})},Jte={async createReview(e){try{console.log("[ReviewService] Создание отзыва с данными:",{client_id:String(e.client_id),specialist_id:String(e.specialist_id),appointment_id:String(e.appointment_id),rating:e.rating});const{data:t,error:r}=await ue.from("reviews").insert({client_id:String(e.client_id),specialist_id:String(e.specialist_id),appointment_id:String(e.appointment_id),rating:e.rating,comment:e.comment,is_published:e.is_published||!1}).select().single();return r?(console.error("[ReviewService] Ошибка при создании отзыва:",r),{success:!1,error:r.message}):(console.log("[ReviewService] Отзыв успешно создан:",t),{success:!0,data:t})}catch(t){const r=t;return console.error("[ReviewService] Ошибка при создании отзыва:",r),{success:!1,error:r.message||"Неизвестная ошибка при создании отзыва"}}},async getAllReviews(){try{const{data:e,error:t}=await ue.from("reviews").select("*, client:clients(full_name), specialist:specialists(name)");if(t)return console.error("[ReviewService] Ошибка при получении отзывов:",t),{success:!1,error:t.message};const r=e.map(n=>{var a,s;return{...n,client_name:((a=n.client)==null?void 0:a.full_name)||"Неизвестный клиент",specialist_name:((s=n.specialist)==null?void 0:s.name)||"Неизвестный специалист"}});return console.log("[ReviewService] Получено отзывов:",r.length),{success:!0,data:r}}catch(e){const t=e;return console.error("[ReviewService] Ошибка при получении отзывов:",t),{success:!1,error:t.message||"Неизвестная ошибка при получении отзывов"}}},async getReviewsBySpecialist(e){try{console.log("[ReviewService] Получение отзывов для специалиста:",e);const{data:t,error:r}=await ue.from("reviews").select("*, client:clients(full_name)").eq("specialist_id",String(e)).eq("is_published",!0);if(r)return console.error("[ReviewService] Ошибка при получении отзывов специалиста:",r),{success:!1,error:r.message};const n=t.map(a=>{var s;return{...a,client_name:((s=a.client)==null?void 0:s.full_name)||"Неизвестный клиент"}});return console.log("[ReviewService] Получено отзывов для специалиста:",n.length),{success:!0,data:n}}catch(t){const r=t;return console.error("[ReviewService] Ошибка при получении отзывов специалиста:",r),{success:!1,error:r.message||"Неизвестная ошибка при получении отзывов"}}},async updateReviewStatus(e,t){try{console.log("[ReviewService] Обновление статуса отзыва:",{reviewId:e,isPublished:t});const{data:r,error:n}=await ue.from("reviews").update({is_published:t}).eq("id",String(e)).select().single();return n?(console.error("[ReviewService] Ошибка при обновлении статуса отзыва:",n),{success:!1,error:n.message}):(console.log("[ReviewService] Статус отзыва успешно обновлен:",r),{success:!0,data:r})}catch(r){const n=r;return console.error("[ReviewService] Ошибка при обновлении статуса отзыва:",n),{success:!1,error:n.message||"Неизвестная ошибка при обновлении статуса отзыва"}}}},NXe=uo((e,t)=>({reviews:[],loading:!1,error:null,filter:"all",search:"",fetchReviews:async()=>{e({loading:!0,error:null});try{const r=await Jte.getAllReviews();e({reviews:r,loading:!1})}catch{e({error:"Ошибка загрузки отзывов",loading:!1})}},updateReviewStatus:async(r,n)=>{e({loading:!0});const{error:a}=await ue.from("reviews").update({is_published:n}).eq("id",r);a||await t().fetchReviews(),e({loading:!1})},setFilter:r=>e({filter:r}),setSearch:r=>e({search:r})})),CXe=()=>{const{reviews:e,loading:t,filter:r,search:n,fetchReviews:a,updateReviewStatus:s,setFilter:o,setSearch:l}=NXe(),[c,u]=x.useState(15);x.useEffect(()=>{a()},[a]);const d=x.useMemo(()=>{let h=Array.isArray(e)?[...e]:[];return r==="published"&&(h=h.filter(p=>p.is_published)),r==="moderation"&&(h=h.filter(p=>!p.is_published)),n&&(h=h.filter(p=>{var v,m,g;return((v=p.client_name)==null?void 0:v.toLowerCase().includes(n.toLowerCase()))||((m=p.specialist_name)==null?void 0:m.toLowerCase().includes(n.toLowerCase()))||((g=p.comment)==null?void 0:g.toLowerCase().includes(n.toLowerCase()))})),h.sort((p,v)=>new Date(v.created_at).getTime()-new Date(p.created_at).getTime()),h},[e,r,n]),f=x.useMemo(()=>d.slice(0,c),[d,c]);return i.jsxs("div",{className:"m-4 md:m-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-beauty-800 mt-8 mb-4",children:"Управление отзывами"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Просмотр, модерация и поиск отзывов клиентов."}),i.jsx(qe,{children:i.jsxs(Ge,{className:"pt-0",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ne,{variant:r==="all"?"default":"outline",onClick:()=>o("all"),children:"Все"}),i.jsx(ne,{variant:r==="published"?"default":"outline",onClick:()=>o("published"),children:"Опубликованные"}),i.jsx(ne,{variant:r==="moderation"?"default":"outline",onClick:()=>o("moderation"),children:"На модерации"})]}),i.jsx($e,{className:"sm:ml-auto sm:max-w-xs",value:n,onChange:h=>l(h.target.value),placeholder:"Поиск..."})]}),i.jsx("div",{className:"rounded-md border",children:i.jsxs(ks,{children:[i.jsx(Ts,{children:i.jsxs(Lr,{children:[i.jsx(pt,{className:"hidden md:table-cell",children:"Клиент"}),i.jsx(pt,{className:"hidden lg:table-cell",children:"Мастер"}),i.jsx(pt,{children:"Оценка"}),i.jsx(pt,{children:"Комментарий"}),i.jsx(pt,{className:"hidden sm:table-cell",children:"Дата"}),i.jsx(pt,{children:"Статус"}),i.jsx(pt,{className:"text-right",children:"Действие"})]})}),i.jsx(As,{children:t?i.jsx(Lr,{children:i.jsx(dt,{colSpan:7,className:"text-center h-24",children:"Загрузка..."})}):f.length===0?i.jsx(Lr,{children:i.jsx(dt,{colSpan:7,className:"text-center h-24",children:"Нет отзывов, соответствующих критериям."})}):f.map(h=>i.jsxs(Lr,{children:[i.jsx(dt,{className:"font-medium hidden md:table-cell",children:h.client_name||"Аноним"}),i.jsx(dt,{className:"hidden lg:table-cell",children:h.specialist_name||"Не указан"}),i.jsx(dt,{children:i.jsx("div",{className:"flex items-center",children:Array(5).fill(0).map((p,v)=>i.jsx(Nv,{className:Ue("h-4 w-4",v<h.rating?"text-yellow-400 fill-yellow-400":"text-gray-300 stroke-current")},v))})}),i.jsx(dt,{className:"text-sm text-muted-foreground max-w-[150px] sm:max-w-xs truncate",children:h.comment||"Без комментария"}),i.jsx(dt,{className:"hidden sm:table-cell",children:new Date(h.created_at).toLocaleDateString("ru-RU")}),i.jsx(dt,{children:i.jsx($t,{variant:h.is_published?"success":"secondary",className:"whitespace-nowrap",children:h.is_published?"Опубликован":"На модерации"})}),i.jsx(dt,{className:"text-right",children:i.jsx(ne,{variant:"outline",size:"sm",onClick:()=>s(h.id,!h.is_published),children:h.is_published?"Снять":"Опубликовать"})})]},h.id))})]})}),!t&&d.length>c&&i.jsx("div",{className:"flex justify-center mt-6",children:i.jsx(ne,{onClick:()=>u(h=>h+15),children:"Показать ещё"})})]})})]})};var kXe=Object.defineProperty,hS=Object.getOwnPropertySymbols,Qte=Object.prototype.hasOwnProperty,ere=Object.prototype.propertyIsEnumerable,kB=(e,t,r)=>t in e?kXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,PO=(e,t)=>{for(var r in t||(t={}))Qte.call(t,r)&&kB(e,r,t[r]);if(hS)for(var r of hS(t))ere.call(t,r)&&kB(e,r,t[r]);return e},OO=(e,t)=>{var r={};for(var n in e)Qte.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&hS)for(var n of hS(e))t.indexOf(n)<0&&ere.call(e,n)&&(r[n]=e[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Bf;(e=>{const t=class yr{constructor(c,u,d,f){if(this.version=c,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],c<yr.MIN_VERSION||c>yr.MAX_VERSION)throw new RangeError("Version value out of range");if(f<-1||f>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let h=[];for(let v=0;v<this.size;v++)h.push(!1);for(let v=0;v<this.size;v++)this.modules.push(h.slice()),this.isFunction.push(h.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(d);if(this.drawCodewords(p),f==-1){let v=1e9;for(let m=0;m<8;m++){this.applyMask(m),this.drawFormatBits(m);const g=this.getPenaltyScore();g<v&&(f=m,v=g),this.applyMask(m)}}a(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(c,u){const d=e.QrSegment.makeSegments(c);return yr.encodeSegments(d,u)}static encodeBinary(c,u){const d=e.QrSegment.makeBytes(c);return yr.encodeSegments([d],u)}static encodeSegments(c,u,d=1,f=40,h=-1,p=!0){if(!(yr.MIN_VERSION<=d&&d<=f&&f<=yr.MAX_VERSION)||h<-1||h>7)throw new RangeError("Invalid value");let v,m;for(v=d;;v++){const w=yr.getNumDataCodewords(v,u)*8,_=o.getTotalBits(c,v);if(_<=w){m=_;break}if(v>=f)throw new RangeError("Data too long")}for(const w of[yr.Ecc.MEDIUM,yr.Ecc.QUARTILE,yr.Ecc.HIGH])p&&m<=yr.getNumDataCodewords(v,w)*8&&(u=w);let g=[];for(const w of c){r(w.mode.modeBits,4,g),r(w.numChars,w.mode.numCharCountBits(v),g);for(const _ of w.getData())g.push(_)}a(g.length==m);const b=yr.getNumDataCodewords(v,u)*8;a(g.length<=b),r(0,Math.min(4,b-g.length),g),r(0,(8-g.length%8)%8,g),a(g.length%8==0);for(let w=236;g.length<b;w^=253)r(w,8,g);let y=[];for(;y.length*8<g.length;)y.push(0);return g.forEach((w,_)=>y[_>>>3]|=w<<7-(_&7)),new yr(v,u,y,h)}getModule(c,u){return 0<=c&&c<this.size&&0<=u&&u<this.size&&this.modules[u][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),u=c.length;for(let d=0;d<u;d++)for(let f=0;f<u;f++)d==0&&f==0||d==0&&f==u-1||d==u-1&&f==0||this.drawAlignmentPattern(c[d],c[f]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const u=this.errorCorrectionLevel.formatBits<<3|c;let d=u;for(let h=0;h<10;h++)d=d<<1^(d>>>9)*1335;const f=(u<<10|d)^21522;a(f>>>15==0);for(let h=0;h<=5;h++)this.setFunctionModule(8,h,n(f,h));this.setFunctionModule(8,7,n(f,6)),this.setFunctionModule(8,8,n(f,7)),this.setFunctionModule(7,8,n(f,8));for(let h=9;h<15;h++)this.setFunctionModule(14-h,8,n(f,h));for(let h=0;h<8;h++)this.setFunctionModule(this.size-1-h,8,n(f,h));for(let h=8;h<15;h++)this.setFunctionModule(8,this.size-15+h,n(f,h));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let d=0;d<12;d++)c=c<<1^(c>>>11)*7973;const u=this.version<<12|c;a(u>>>18==0);for(let d=0;d<18;d++){const f=n(u,d),h=this.size-11+d%3,p=Math.floor(d/3);this.setFunctionModule(h,p,f),this.setFunctionModule(p,h,f)}}drawFinderPattern(c,u){for(let d=-4;d<=4;d++)for(let f=-4;f<=4;f++){const h=Math.max(Math.abs(f),Math.abs(d)),p=c+f,v=u+d;0<=p&&p<this.size&&0<=v&&v<this.size&&this.setFunctionModule(p,v,h!=2&&h!=4)}}drawAlignmentPattern(c,u){for(let d=-2;d<=2;d++)for(let f=-2;f<=2;f++)this.setFunctionModule(c+f,u+d,Math.max(Math.abs(f),Math.abs(d))!=1)}setFunctionModule(c,u,d){this.modules[u][c]=d,this.isFunction[u][c]=!0}addEccAndInterleave(c){const u=this.version,d=this.errorCorrectionLevel;if(c.length!=yr.getNumDataCodewords(u,d))throw new RangeError("Invalid argument");const f=yr.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][u],h=yr.ECC_CODEWORDS_PER_BLOCK[d.ordinal][u],p=Math.floor(yr.getNumRawDataModules(u)/8),v=f-p%f,m=Math.floor(p/f);let g=[];const b=yr.reedSolomonComputeDivisor(h);for(let w=0,_=0;w<f;w++){let S=c.slice(_,_+m-h+(w<v?0:1));_+=S.length;const E=yr.reedSolomonComputeRemainder(S,b);w<v&&S.push(0),g.push(S.concat(E))}let y=[];for(let w=0;w<g[0].length;w++)g.forEach((_,S)=>{(w!=m-h||S>=v)&&y.push(_[w])});return a(y.length==p),y}drawCodewords(c){if(c.length!=Math.floor(yr.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let f=0;f<this.size;f++)for(let h=0;h<2;h++){const p=d-h,m=(d+1&2)==0?this.size-1-f:f;!this.isFunction[m][p]&&u<c.length*8&&(this.modules[m][p]=n(c[u>>>3],7-(u&7)),u++)}}a(u==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let d=0;d<this.size;d++){let f;switch(c){case 0:f=(d+u)%2==0;break;case 1:f=u%2==0;break;case 2:f=d%3==0;break;case 3:f=(d+u)%3==0;break;case 4:f=(Math.floor(d/3)+Math.floor(u/2))%2==0;break;case 5:f=d*u%2+d*u%3==0;break;case 6:f=(d*u%2+d*u%3)%2==0;break;case 7:f=((d+u)%2+d*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][d]&&f&&(this.modules[u][d]=!this.modules[u][d])}}getPenaltyScore(){let c=0;for(let h=0;h<this.size;h++){let p=!1,v=0,m=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[h][g]==p?(v++,v==5?c+=yr.PENALTY_N1:v>5&&c++):(this.finderPenaltyAddHistory(v,m),p||(c+=this.finderPenaltyCountPatterns(m)*yr.PENALTY_N3),p=this.modules[h][g],v=1);c+=this.finderPenaltyTerminateAndCount(p,v,m)*yr.PENALTY_N3}for(let h=0;h<this.size;h++){let p=!1,v=0,m=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[g][h]==p?(v++,v==5?c+=yr.PENALTY_N1:v>5&&c++):(this.finderPenaltyAddHistory(v,m),p||(c+=this.finderPenaltyCountPatterns(m)*yr.PENALTY_N3),p=this.modules[g][h],v=1);c+=this.finderPenaltyTerminateAndCount(p,v,m)*yr.PENALTY_N3}for(let h=0;h<this.size-1;h++)for(let p=0;p<this.size-1;p++){const v=this.modules[h][p];v==this.modules[h][p+1]&&v==this.modules[h+1][p]&&v==this.modules[h+1][p+1]&&(c+=yr.PENALTY_N2)}let u=0;for(const h of this.modules)u=h.reduce((p,v)=>p+(v?1:0),u);const d=this.size*this.size,f=Math.ceil(Math.abs(u*20-d*10)/d)-1;return a(0<=f&&f<=9),c+=f*yr.PENALTY_N4,a(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let d=[6];for(let f=this.size-7;d.length<c;f-=u)d.splice(1,0,f);return d}}static getNumRawDataModules(c){if(c<yr.MIN_VERSION||c>yr.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*c+128)*c+64;if(c>=2){const d=Math.floor(c/7)+2;u-=(25*d-10)*d-55,c>=7&&(u-=36)}return a(208<=u&&u<=29648),u}static getNumDataCodewords(c,u){return Math.floor(yr.getNumRawDataModules(c)/8)-yr.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c]*yr.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let u=[];for(let f=0;f<c-1;f++)u.push(0);u.push(1);let d=1;for(let f=0;f<c;f++){for(let h=0;h<u.length;h++)u[h]=yr.reedSolomonMultiply(u[h],d),h+1<u.length&&(u[h]^=u[h+1]);d=yr.reedSolomonMultiply(d,2)}return u}static reedSolomonComputeRemainder(c,u){let d=u.map(f=>0);for(const f of c){const h=f^d.shift();d.push(0),u.forEach((p,v)=>d[v]^=yr.reedSolomonMultiply(p,h))}return d}static reedSolomonMultiply(c,u){if(c>>>8||u>>>8)throw new RangeError("Byte out of range");let d=0;for(let f=7;f>=0;f--)d=d<<1^(d>>>7)*285,d^=(u>>>f&1)*c;return a(d>>>8==0),d}finderPenaltyCountPatterns(c){const u=c[1];a(u<=this.size*3);const d=u>0&&c[2]==u&&c[3]==u*3&&c[4]==u&&c[5]==u;return(d&&c[0]>=u*4&&c[6]>=u?1:0)+(d&&c[6]>=u*4&&c[0]>=u?1:0)}finderPenaltyTerminateAndCount(c,u,d){return c&&(this.finderPenaltyAddHistory(u,d),u=0),u+=this.size,this.finderPenaltyAddHistory(u,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(c,u){u[0]==0&&(c+=this.size),u.pop(),u.unshift(c)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function r(l,c,u){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let d=c-1;d>=0;d--)u.push(l>>>d&1)}function n(l,c){return(l>>>c&1)!=0}function a(l){if(!l)throw new Error("Assertion error")}const s=class Rn{constructor(c,u,d){if(this.mode=c,this.numChars=u,this.bitData=d,u<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(c){let u=[];for(const d of c)r(d,8,u);return new Rn(Rn.Mode.BYTE,c.length,u)}static makeNumeric(c){if(!Rn.isNumeric(c))throw new RangeError("String contains non-numeric characters");let u=[];for(let d=0;d<c.length;){const f=Math.min(c.length-d,3);r(parseInt(c.substring(d,d+f),10),f*3+1,u),d+=f}return new Rn(Rn.Mode.NUMERIC,c.length,u)}static makeAlphanumeric(c){if(!Rn.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],d;for(d=0;d+2<=c.length;d+=2){let f=Rn.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d))*45;f+=Rn.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d+1)),r(f,11,u)}return d<c.length&&r(Rn.ALPHANUMERIC_CHARSET.indexOf(c.charAt(d)),6,u),new Rn(Rn.Mode.ALPHANUMERIC,c.length,u)}static makeSegments(c){return c==""?[]:Rn.isNumeric(c)?[Rn.makeNumeric(c)]:Rn.isAlphanumeric(c)?[Rn.makeAlphanumeric(c)]:[Rn.makeBytes(Rn.toUtf8ByteArray(c))]}static makeEci(c){let u=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)r(c,8,u);else if(c<16384)r(2,2,u),r(c,14,u);else if(c<1e6)r(6,3,u),r(c,21,u);else throw new RangeError("ECI assignment value out of range");return new Rn(Rn.Mode.ECI,0,u)}static isNumeric(c){return Rn.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return Rn.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,u){let d=0;for(const f of c){const h=f.mode.numCharCountBits(u);if(f.numChars>=1<<h)return 1/0;d+=4+h+f.bitData.length}return d}static toUtf8ByteArray(c){c=encodeURI(c);let u=[];for(let d=0;d<c.length;d++)c.charAt(d)!="%"?u.push(c.charCodeAt(d)):(u.push(parseInt(c.substring(d+1,d+3),16)),d+=2);return u}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;e.QrSegment=s})(Bf||(Bf={}));(e=>{(t=>{const r=class{constructor(a,s){this.ordinal=a,this.formatBits=s}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),t.Ecc=r})(e.QrCode||(e.QrCode={}))})(Bf||(Bf={}));(e=>{(t=>{const r=class{constructor(a,s){this.modeBits=a,this.numBitsCharCount=s}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),t.Mode=r})(e.QrSegment||(e.QrSegment={}))})(Bf||(Bf={}));var rm=Bf;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var TXe={L:rm.QrCode.Ecc.LOW,M:rm.QrCode.Ecc.MEDIUM,Q:rm.QrCode.Ecc.QUARTILE,H:rm.QrCode.Ecc.HIGH},tre=128,rre="L",nre="#FFFFFF",are="#000000",sre=!1,ire=1,AXe=4,PXe=0,OXe=.1;function ore(e,t=0){const r=[];return e.forEach(function(n,a){let s=null;n.forEach(function(o,l){if(!o&&s!==null){r.push(`M${s+t} ${a+t}h${l-s}v1H${s+t}z`),s=null;return}if(l===n.length-1){if(!o)return;s===null?r.push(`M${l+t},${a+t} h1v1H${l+t}z`):r.push(`M${s+t},${a+t} h${l+1-s}v1H${s+t}z`);return}o&&s===null&&(s=l)})}),r.join("")}function lre(e,t){return e.slice().map((r,n)=>n<t.y||n>=t.y+t.h?r:r.map((a,s)=>s<t.x||s>=t.x+t.w?a:!1))}function RXe(e,t,r,n){if(n==null)return null;const a=e.length+r*2,s=Math.floor(t*OXe),o=a/t,l=(n.width||s)*o,c=(n.height||s)*o,u=n.x==null?e.length/2-l/2:n.x*o,d=n.y==null?e.length/2-c/2:n.y*o,f=n.opacity==null?1:n.opacity;let h=null;if(n.excavate){let v=Math.floor(u),m=Math.floor(d),g=Math.ceil(l+u-v),b=Math.ceil(c+d-m);h={x:v,y:m,w:g,h:b}}const p=n.crossOrigin;return{x:u,y:d,h:c,w:l,excavation:h,opacity:f,crossOrigin:p}}function DXe(e,t){return t!=null?Math.max(Math.floor(t),0):e?AXe:PXe}function cre({value:e,level:t,minVersion:r,includeMargin:n,marginSize:a,imageSettings:s,size:o,boostLevel:l}){let c=G.useMemo(()=>{const v=(Array.isArray(e)?e:[e]).reduce((m,g)=>(m.push(...rm.QrSegment.makeSegments(g)),m),[]);return rm.QrCode.encodeSegments(v,TXe[t],r,void 0,void 0,l)},[e,t,r,l]);const{cells:u,margin:d,numCells:f,calculatedImageSettings:h}=G.useMemo(()=>{let p=c.getModules();const v=DXe(n,a),m=p.length+v*2,g=RXe(p,o,v,s);return{cells:p,margin:v,numCells:m,calculatedImageSettings:g}},[c,o,s,n,a]);return{qrcode:c,margin:d,cells:u,numCells:f,calculatedImageSettings:h}}var MXe=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),ure=G.forwardRef(function(t,r){const n=t,{value:a,size:s=tre,level:o=rre,bgColor:l=nre,fgColor:c=are,includeMargin:u=sre,minVersion:d=ire,boostLevel:f,marginSize:h,imageSettings:p}=n,m=OO(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:g}=m,b=OO(m,["style"]),y=p==null?void 0:p.src,w=G.useRef(null),_=G.useRef(null),S=G.useCallback(R=>{w.current=R,typeof r=="function"?r(R):r&&(r.current=R)},[r]),[E,j]=G.useState(!1),{margin:N,cells:k,numCells:C,calculatedImageSettings:T}=cre({value:a,level:o,minVersion:d,boostLevel:f,includeMargin:u,marginSize:h,imageSettings:p,size:s});G.useEffect(()=>{if(w.current!=null){const R=w.current,P=R.getContext("2d");if(!P)return;let D=k;const U=_.current,M=T!=null&&U!==null&&U.complete&&U.naturalHeight!==0&&U.naturalWidth!==0;M&&T.excavation!=null&&(D=lre(k,T.excavation));const F=window.devicePixelRatio||1;R.height=R.width=s*F;const K=s/C*F;P.scale(K,K),P.fillStyle=l,P.fillRect(0,0,C,C),P.fillStyle=c,MXe?P.fill(new Path2D(ore(D,N))):k.forEach(function(X,O){X.forEach(function(W,L){W&&P.fillRect(L+N,O+N,1,1)})}),T&&(P.globalAlpha=T.opacity),M&&P.drawImage(U,T.x+N,T.y+N,T.w,T.h)}}),G.useEffect(()=>{j(!1)},[y]);const A=PO({height:s,width:s},g);let B=null;return y!=null&&(B=G.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{j(!0)},ref:_,crossOrigin:T==null?void 0:T.crossOrigin})),G.createElement(G.Fragment,null,G.createElement("canvas",PO({style:A,height:s,width:s,ref:S,role:"img"},b)),B)});ure.displayName="QRCodeCanvas";var IXe=G.forwardRef(function(t,r){const n=t,{value:a,size:s=tre,level:o=rre,bgColor:l=nre,fgColor:c=are,includeMargin:u=sre,minVersion:d=ire,boostLevel:f,title:h,marginSize:p,imageSettings:v}=n,m=OO(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:g,cells:b,numCells:y,calculatedImageSettings:w}=cre({value:a,level:o,minVersion:d,boostLevel:f,includeMargin:u,marginSize:p,imageSettings:v,size:s});let _=b,S=null;v!=null&&w!=null&&(w.excavation!=null&&(_=lre(b,w.excavation)),S=G.createElement("image",{href:v.src,height:w.h,width:w.w,x:w.x+g,y:w.y+g,preserveAspectRatio:"none",opacity:w.opacity,crossOrigin:w.crossOrigin}));const E=ore(_,g);return G.createElement("svg",PO({height:s,width:s,viewBox:`0 0 ${y} ${y}`,ref:r,role:"img"},m),!!h&&G.createElement("title",null,h),G.createElement("path",{fill:l,d:`M0,0 h${y}v${y}H0z`,shapeRendering:"crispEdges"}),G.createElement("path",{fill:c,d:E,shapeRendering:"crispEdges"}),S)});IXe.displayName="QRCodeSVG";function $Xe({salonId:e,salonName:t,customUrl:r}){const n=x.useRef(null),{toast:a}=co(),s=r||x4.createQRUrl(e),o=()=>{navigator.clipboard.writeText(s),a({title:"Ссылка скопирована!",description:s})},l=()=>{var u;const c=(u=n.current)==null?void 0:u.querySelector("canvas");if(c){const d=c.toDataURL("image/png").replace("image/png","image/octet-stream"),f=document.createElement("a");f.href=d,f.download=`${t||e}-qr-code.png`,document.body.appendChild(f),f.click(),document.body.removeChild(f),a({title:"QR-код скачан!"})}else a({title:"Ошибка скачивания QR-кода",variant:"destructive"})};return i.jsxs(qe,{children:[i.jsxs(ht,{children:[i.jsx(gt,{children:t?`QR-код для "${t}"`:"QR-код для онлайн-записи"}),i.jsx(da,{children:"Разместите этот QR-код или ссылку для быстрой записи клиентов."})]}),i.jsxs(Ge,{className:"space-y-4",children:[i.jsx("div",{ref:n,className:"flex justify-center p-4 bg-white rounded-md",children:i.jsx(ure,{value:s,size:180,level:"H"})}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx($e,{value:s,readOnly:!0}),i.jsx(ne,{variant:"outline",size:"icon",onClick:o,title:"Скопировать ссылку",children:i.jsx(_fe,{className:"h-4 w-4"})}),i.jsx(ne,{variant:"outline",size:"icon",onClick:l,title:"Скачать QR-код",children:i.jsx(Sfe,{className:"h-4 w-4"})})]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Этот QR-код ведет на: ",s]})]})]})}function FXe(){return i.jsxs("div",{className:"container mx-auto py-10",children:[i.jsx("h2",{className:"text-2xl font-bold text-beauty-800 mt-8 mb-6",children:"Настройки онлайн-записи"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.jsx($Xe,{salonId:"test-salon-123",salonName:"Тестовый салон"})})]})}const LXe=()=>{const e=Kn(),[t]=XR(),{branches:r,studios:n,currentBranch:a,setCurrentBranch:s,currentStudio:o,setCurrentStudio:l}=Ba(),c=d=>{if(!d)return"Не привязана";const f=r.find(h=>h.id===d);return f?f.name:"Неизвестный бренд"},u=t.get("tab")==="add"?"add":"list";return i.jsxs(i.Fragment,{children:[i.jsx(cy,{}),i.jsx("h1",{className:"text-3xl font-bold mb-8 beauty-gradient-text",children:"Административная панель"}),i.jsxs(fa,{defaultValue:"staff",className:"w-full",children:[i.jsxs(ta,{className:"mb-8 w-full justify-start overflow-x-auto",children:[i.jsx(Tt,{value:"staff",children:"Управление мастерами"}),i.jsx(Tt,{value:"services",children:"Услуги"}),i.jsx(Tt,{value:"branches",children:"Филиалы"}),i.jsx(Tt,{value:"marketing",children:"Маркетинг"}),i.jsx(Tt,{value:"loyalty",children:"Программы лояльности"}),i.jsx(Tt,{value:"reviews",children:"Отзывы"}),i.jsx(Tt,{value:"inventory",children:"Управление товарами"}),i.jsx(Tt,{value:"statistics",children:"Статистика"}),i.jsx(Tt,{value:"integrations",children:"Интеграции"}),i.jsx(Tt,{value:"theme",children:"Оформление"}),i.jsx(Tt,{value:"online-booking",children:"Онлайн-запись"})]}),i.jsx(Ft,{value:"staff",className:"space-y-4",children:i.jsx(zCe,{initialTab:u})}),i.jsx(Ft,{value:"services",className:"space-y-4",children:i.jsx(xke,{})}),i.jsxs(Ft,{value:"branches",className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-beauty-800 mt-8",children:"Управление филиалами"}),i.jsx("p",{className:"text-muted-foreground",children:a?`Текущий филиал: ${a.name}`:"Выберите филиал для работы"})]}),i.jsxs(ne,{className:"bg-beauty-500 hover:bg-beauty-600",onClick:()=>e("/branches"),children:[i.jsx(UT,{className:"h-4 w-4 mr-2"}),"Управление филиалами"]})]}),a?n.filter(d=>d.branch_id===a.id).length===0?i.jsx("div",{className:"flex flex-col items-center justify-center h-64",children:i.jsx("div",{className:"text-lg mb-4",children:"У этого бренда пока нет ни одной студии."})}):i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.filter(d=>d.branch_id===a.id).map(d=>{const f=o&&o.id===d.id;return i.jsxs(qe,{className:`relative ${f?"border-2 border-green-500 shadow-lg":""}`,children:[i.jsx(ht,{children:i.jsx("div",{className:"flex justify-between items-start",children:i.jsxs("div",{children:[i.jsxs(gt,{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:d.color}}),d.name,f&&i.jsx($t,{className:"ml-2",variant:"success",children:"Выбрана"})]}),i.jsx(da,{children:d.address})]})})}),i.jsxs(Ge,{children:[i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Бренд:"})," ",c(d.branch_id)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Телефон:"})," ",d.phone]}),d.email&&i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",d.email]}),d.description&&i.jsxs("p",{children:[i.jsx("strong",{children:"Описание:"})," ",d.description]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Создана:"})," ",new Date(d.created_at).toLocaleDateString()]}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx(Io,{checked:d.is_active,disabled:!0}),i.jsx("span",{className:"text-xs text-muted-foreground",children:d.is_active?"Активна":"Неактивна"})]})]}),i.jsxs("div",{className:"flex gap-2 mt-4 items-center",children:[f?i.jsx(ne,{variant:"outline",className:"flex-1 cursor-default",disabled:!0,children:"Выбрана"}):i.jsx(ne,{variant:"default",className:"flex-1",onClick:()=>l(d),children:"Выбрать"}),i.jsx(ne,{variant:"outline",size:"icon",onClick:()=>e(`/brands/${a.id}/studios/${d.id}?from=adminpanel`),title:"Перейти в дашборд",disabled:!a,children:i.jsx(sH,{className:"h-5 w-5"})})]})]})]},d.id)})}):i.jsx("div",{className:"flex flex-col items-center justify-center h-64",children:i.jsx("div",{className:"text-lg mb-4",children:"Сначала выберите филиал"})}),i.jsxs("div",{className:"mt-8",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Быстрые действия"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(ne,{variant:"outline",className:"h-20 justify-start",onClick:()=>e("/branches"),children:[i.jsx(UT,{className:"h-5 w-5 mr-3"}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-medium",children:"Добавить филиал"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Создать новую локацию"})]})]}),i.jsxs(ne,{variant:"outline",className:"h-20 justify-start",onClick:()=>e("/staff"),children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-3",children:[i.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"9",cy:"7",r:"4"}),i.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),i.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-medium",children:"Управление мастерами"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Назначить филиалы"})]})]}),i.jsxs(ne,{variant:"outline",className:"h-20 justify-start",onClick:()=>e("/services"),children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-3",children:i.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-medium",children:"Услуги филиалов"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Назначить услуги"})]})]}),i.jsxs(ne,{variant:"outline",className:"h-20 justify-start",onClick:()=>e("/reports"),children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-3",children:[i.jsx("path",{d:"M3 3v18h18"}),i.jsx("path",{d:"m19 9-5 5-4-4-3 3"})]}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-medium",children:"Аналитика филиалов"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Отчеты по филиалам"})]})]})]})]})]}),i.jsx(Ft,{value:"marketing",className:"space-y-4",children:i.jsx(pNe,{})}),i.jsx(Ft,{value:"loyalty",className:"space-y-4",children:i.jsx(wNe,{})}),i.jsx(Ft,{value:"reviews",className:"space-y-4",children:i.jsx(CXe,{})}),i.jsx(Ft,{value:"statistics",className:"space-y-4",children:i.jsx(EXe,{})}),i.jsx(Ft,{value:"integrations",className:"space-y-4",children:i.jsx(kNe,{})}),i.jsx(Ft,{value:"online-booking",className:"space-y-4",children:i.jsx(FXe,{})})]})]})},BXe=({open:e,client:t,appointment:r,maxBonus:n,alreadySpent:a,onSubmit:s,onClose:o,loading:l,maxDiscountPercentFromSettings:c})=>{var S;const[u,d]=x.useState(""),[f,h]=x.useState("");x.useEffect(()=>{e||d("")},[e]);const p=(r==null?void 0:r.price)||0,v=((S=r==null?void 0:r.service)==null?void 0:S.name)||"Не указана",m=(t==null?void 0:t.calculated_bonus_points)||0,g=Number(u)>0?Math.min(Number(u),n):0,b=(r==null?void 0:r.final_price)||p,y=a,w=Math.max(0,b-(y+g)),_=async()=>{if(h(""),!g||g<1||g>n){h(`Введите сумму от 1 до ${n}`);return}await s(g),d("")};return i.jsx(qt,{open:e,onOpenChange:E=>{E||o()},children:i.jsxs(Wt,{children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Списание бонусов"}),i.jsx(fr,{children:t&&i.jsxs(i.Fragment,{children:["Списание бонусов для ",i.jsx("b",{children:t.full_name}),i.jsx("br",{}),"Баланс: ",i.jsx("b",{children:m})," бонусов"]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Услуга"}),i.jsxs("div",{className:"rounded border border-gray-200 px-3 py-2 bg-gray-50 text-base font-semibold text-gray-800",children:[v," — ",p," ₽"]})]}),i.jsxs("div",{className:"bg-pink-50 rounded-md p-4 my-4 border border-pink-100",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-pink-700 text-sm",children:"Стоимость услуги:"}),i.jsxs("span",{className:"font-semibold text-base text-pink-800",children:[p," ₽"]})]}),i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-pink-700 text-sm",children:"Финальная цена со скидкой:"}),i.jsxs("span",{className:"font-semibold text-base text-pink-800",children:[b," ₽"]})]}),y>0&&i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-pink-700 text-sm",children:"Уже списано бонусов:"}),i.jsxs("span",{className:"font-semibold text-base text-pink-800",children:["- ",y," ₽"]})]}),i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{className:"text-pink-700 text-sm",children:"Максимально доступно для списания:"}),i.jsxs("span",{className:"font-semibold text-base text-pink-800",children:[n," бонусов"]})]}),i.jsxs("div",{className:"text-xs text-pink-600 mb-2",children:["(не более ",c||50,"% от финальной цены с учетом уже списанных бонусов)"]}),i.jsxs("div",{className:"flex justify-between items-center border-t border-pink-200 pt-3 mt-3",children:[i.jsx("span",{className:"text-pink-700 font-semibold text-base",children:"К оплате после списания:"}),i.jsxs("span",{className:"font-bold text-xl text-pink-800",children:[w," ₽"]})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Количество бонусов для списания"}),i.jsx($e,{type:"number",min:1,max:n,value:u,onChange:E=>d(E.target.value),className:"w-full border rounded px-3 py-2",placeholder:`Сумма (до ${n})`,"aria-label":"Сумма бонусов для списания",disabled:l}),f&&i.jsx("div",{className:"text-red-600 text-xs mt-1",children:f})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:o,disabled:l,children:"Отмена"}),i.jsx(ne,{onClick:_,disabled:l||!g||g<1||g>n,children:l?i.jsx(WT,{className:"w-4 h-4 animate-spin"}):"Списать бонусы"})]})]})})},UXe=({discountPercent:e})=>!e||e<=0?null:i.jsxs("span",{className:"ml-3 bg-yellow-100 border border-yellow-300 text-yellow-800 text-xs font-semibold rounded-full px-3 py-0.5 select-none","aria-label":`Скидка ${e}%`,children:["Скидка ",e,"%"]});function UM(e,t,r){const n=Me(e,"yyyy-MM-dd");console.log("[getEffectiveScheduleForDate] Input date (object):",e),console.log("[getEffectiveScheduleForDate] Formatted dateString (for matching overrides):",n),console.log("[getEffectiveScheduleForDate] Input overrides count:",r.length);const a=r.find(l=>l.date===n);if(console.log("[getEffectiveScheduleForDate] Found override (JSON):",JSON.stringify(a)),a){if(console.log("[getEffectiveScheduleForDate] Processing found override: is_working_day:",a.is_working_day,", start_time:",a.start_time,", end_time:",a.end_time),!a.is_working_day)return console.log("[getEffectiveScheduleForDate] Override indicates NOT a working day. Returning null."),null;if(typeof a.start_time=="string"&&a.start_time.length>0&&typeof a.end_time=="string"&&a.end_time.length>0)return console.log("[getEffectiveScheduleForDate] Override is a working day with valid start/end times. Returning override times."),{start:a.start_time,end:a.end_time};console.log("[getEffectiveScheduleForDate] Override is a working day, but start_time or end_time is invalid or missing. Falling through to standard schedule.")}else console.log("[getEffectiveScheduleForDate] No override found for date:",n);const s=e.toLocaleDateString("en-US",{weekday:"long"}).toLowerCase(),o=t==null?void 0:t[s];return console.log("[getEffectiveScheduleForDate] Looking for standard schedule for day:",s),console.log("[getEffectiveScheduleForDate] Standard schedule found (JSON):",JSON.stringify(o)),o&&typeof o.start=="string"&&typeof o.end=="string"?(console.log("[getEffectiveScheduleForDate] Returning standard schedule for the day."),o):(console.log("[getEffectiveScheduleForDate] No applicable override and no valid standard schedule for this day. Returning null."),null)}function zXe(e,t,r,n,a,s,o=30){const l=Array.isArray(a)?a:JSON.parse(a);console.log("[SLOTS] INPUTS",{specialistId:e,date:t,appointments:r,work_schedule:n,overrides:l,serviceDuration:s,stepMinutes:o});const c=UM(t,n,l);if(console.log("[SLOTS] WORKDAY",c),!c||!c.start||!c.end)return console.log("[SLOTS] EARLY RETURN: no workDay",c),[];if(!s||s<=0)return console.log("[SLOTS] EARLY RETURN: bad serviceDuration",s),[];const u=[],[d,f]=c.start.split(":").map(Number),[h,p]=c.end.split(":").map(Number),v=new Date(t);v.setHours(d,f,0,0);const m=new Date(t);m.setHours(h,p,0,0),console.log("[SLOTS] PRE-CYCLE",{start:v.toTimeString(),end:m.toTimeString(),serviceDuration:s,stepMinutes:o,workDay:c});for(let g=new Date(v);g<m;g.setMinutes(g.getMinutes()+o)){const b=g.toTimeString().slice(0,5),y=new Date(g);y.setMinutes(y.getMinutes()+s);const w=y.toTimeString().slice(0,5),_=r.some(E=>{var k,C;const j=(k=E.start_time)==null?void 0:k.slice(0,5),N=(C=E.end_time)==null?void 0:C.slice(0,5);return b<N&&w>j}),S=y<=m;console.log("[SLOTS] slot:",b,"slotEnd:",w,"start:",v.toTimeString().slice(0,5),"end:",m.toTimeString().slice(0,5),"serviceDuration:",s,"stepMinutes:",o,"busy:",_,"fits:",S),!_&&S&&u.push(b)}return u}const zM=({open:e,onClose:t,selectedDate:r=new Date,selectedTime:n,specialistId:a,specialistName:s,existingAppointments:o=[],onSave:l,onSpecialistAutoSelect:c})=>{var Oe,Ye;const[u,d]=x.useState(r),[f,h]=x.useState(n||"10:00"),[p,v]=x.useState(a||null),[m,g]=x.useState(""),[b,y]=x.useState(!1),[w,_]=x.useState(!1),[S,E]=x.useState(""),[j,N]=x.useState(""),[k,C]=x.useState(a),[T,A]=x.useState([]),[B,R]=x.useState(!1),{clients:P,loading:D,fetchClients:U,createClient:M}=Gs(),{services:F,isLoading:K,fetchServices:X,getServicesBySpecialist:O,refreshSpecialistServices:W}=Oi(),{specialists:L,fetchSpecialists:H,overrides:ee,loadOverrides:q}=Oa(),[Z,I]=x.useState(!1),[Q,ve]=x.useState(void 0);x.useEffect(()=>{e&&(U(),X(),H())},[e,U,X,H]),x.useEffect(()=>{const ye=a||k;ye?(R(!0),W(ye).then(()=>{const le=O(ye);A(le),R(!1)}).catch(()=>{A([]),R(!1)})):(A(F.filter(le=>le.is_active)),R(!1))},[a,k,F,O,W]),x.useEffect(()=>{e&&(d(r),h(n||"10:00"),C(a)),e||(v(null),g(""),_(!1),E(""),N(""),C(void 0),y(!1),I(!1))},[e,r,n,a]),x.useEffect(()=>{n&&n!==f&&h(n)},[n]);const z=F.find(ye=>String(ye.id)===m),we=P.find(ye=>String(ye.id)===p),Re=a?s:((Oe=L.find(ye=>ye.id===k))==null?void 0:Oe.full_name)||((Ye=L.find(ye=>ye.id===k))==null?void 0:Ye.name),Pe=a||k,De=x.useMemo(()=>{if(!Pe||!u)return[];const ye=Me(u,"yyyy-MM-dd");return(o||[]).filter(_e=>String(_e.specialist_id)===String(Pe)&&_e.date===ye)},[o,Pe,u]),Ne=x.useMemo(()=>{if(!Pe||!u)return null;const ye=L.find(Be=>String(Be.id)===String(Pe));if(!ye)return null;const le=ee&&ee[Pe]?ee[Pe]:[];return UM(u,ye.work_schedule||{},le)},[L,Pe,u,ee]),J=x.useMemo(()=>(console.log("[AppointmentModal] Calculating isWorkingDayForCurrentSpecialist. effectiveWorkDay:",Ne),!!Ne),[Ne]),Y=x.useMemo(()=>{const ye=L.find(Be=>String(Be.id)===String(Pe));if(console.log("[AppointmentModal] Recalculating availableTimeSlots. Dependencies:",{selectedServiceName:z==null?void 0:z.name,selectedServiceDuration:z==null?void 0:z.duration,isWorkingDay:J,effectiveWorkDay:Ne,date:u?Me(u,"yyyy-MM-dd"):null,currentSpecialistId:Pe,staffExists:!!ye,appointmentsCount:De.length}),!z||!J||!u||!Pe||!ye)return console.log("[AppointmentModal] availableTimeSlots: Guard conditions not met, returning []."),[];const le=ee&&ee[Pe]?ee[Pe]:[];console.log("[AppointmentModal] Inputs for getAvailableTimeSlotsForSpecialist:",{specialistId:Pe,dateFormatted:Me(u,"yyyy-MM-dd"),numAppointments:De.length,work_schedule:JSON.stringify(ye.work_schedule),staffDateOverrides:JSON.stringify(le),serviceDuration:(z==null?void 0:z.duration)||30,step:30});const _e=zXe(Pe,u,De,ye.work_schedule||{},le,(z==null?void 0:z.duration)||30,30);return console.log("[AppointmentModal] Slots from getAvailableTimeSlotsForSpecialist:",_e),_e},[z,J,u,Pe,L,De,ee]),ae=x.useMemo(()=>{if(!z||!f||!u||!J)return!1;const ye=ke(f,z.duration);return!De.some(le=>{const _e=he(le.start_time),Be=he(le.end_time);return f>=_e&&f<Be||ye>_e&&ye<=Be||f<=_e&&ye>=Be||f>=_e&&ye<=Be})},[z,f,u,De,J]),ge=x.useMemo(()=>{if(!u||!f)return!1;const ye=new Date,le=new Date(u),[_e,Be]=f.split(":");return le.setHours(Number(_e),Number(Be),0,0),le>=ye},[u,f]),Se=z&&p&&u&&f&&(a||k)&&ae&&ge;function te(ye){return typeof ye=="string"||typeof ye=="number"}function me(ye){if(typeof ye!="string"||!ye.includes(":"))return console.warn("[AppointmentModal] Некорректное значение времени:",ye),[0,0];const[le,_e]=ye.split(":");return[Number(le)||0,Number(_e)||0]}function ke(ye,le){const[_e,Be]=me(ye),Ie=_e*60+Be+le,it=Math.floor(Ie/60)%24,tt=Ie%60;return`${it.toString().padStart(2,"0")}:${tt.toString().padStart(2,"0")}`}function he(ye){return typeof ye!="string"?(console.warn("[AppointmentModal] formatTimeWithoutSeconds: не строка:",ye),"00:00"):/^\d{1,2}$/.test(ye)?`${ye.padStart(2,"0")}:00`:/^\d{1,2}:\d{2}$/.test(ye)?ye:/^\d{1,2}:\d{2}:\d{2}$/.test(ye)?ye.slice(0,5):(console.warn("[AppointmentModal] formatTimeWithoutSeconds: невалидный формат:",ye),"00:00")}x.useEffect(()=>{async function ye(){if(ve(void 0),!(!p||!m))try{const Be=(await vZ(p)).filter(Ie=>Ie.status==="active"&&(Ie.subscription_visits_left||0)>0).find(Ie=>{var Ze;if(((Ze=Ie.program)==null?void 0:Ze.type)!=="subscription")return!1;const it=Ie.program.rules,tt=Array.isArray(it.services)?it.services.map(String):[];return tt.length===0||tt.includes(String(m))});Be&&ve(Be.id)}catch{}}ye()},[p,m]);const et=async()=>{const ye=a||k;if(!u||!f||!p||!m||!ye){alert("Пожалуйста, заполните все обязательные поля, включая выбор мастера.");return}y(!0);try{const le=P.find(Be=>String(Be.id)===p),_e=T.find(Be=>String(Be.id)===String(m));if(!le||!_e){let Be="[AppointmentModal ОШИБКА ПРОВЕРКИ] Клиент или услуга не найдены после поиска.";le||(Be+=` Клиент с ID="${p}" не найден. Проверьте массив clients.`),_e||(Be+=` Услуга с ID="${m}" не найдена среди доступных услуг (availableServices). Проверьте фильтры и ID.`),alert(Be),y(!1);return}l&&await l({clientId:String(le.id),clientName:le.full_name||"",clientPhone:le.phone||"",clientEmail:le.email||"",serviceId:String(_e.id),serviceName:_e.name,date:u?Me(u,"yyyy-MM-dd"):void 0,time:f,duration:_e.duration,price:_e.price,specialistId:ye}),t()}catch{alert("Произошла непредвиденная ошибка при сохранении записи.")}finally{y(!1)}},nt=async()=>{if(!(!S||!j)){I(!0);try{const ye=await M({full_name:S,phone:j});ye&&ye.id?(v(String(ye.id)),_(!1),E(""),N(""),await U(),Ae({title:"Клиент успешно создан и выбран!"})):Ae({title:"Ошибка создания клиента",description:"Не удалось получить данные нового клиента.",variant:"destructive"})}catch(ye){console.error("Error creating client:",ye),Ae({title:"Ошибка создания клиента",description:ye instanceof Error?ye.message:String(ye),variant:"destructive"})}I(!1)}};return x.useEffect(()=>{Pe&&q&&q(Pe)},[Pe,q]),x.useEffect(()=>{if(!a&&m){const ye=L.filter(le=>O(le.id).some(Be=>String(Be.id)===String(m)));ye.length===1&&(C(ye[0].id),c&&c(ye[0].id,ye[0].full_name||ye[0].name))}},[m,a,L,O,c]),x.useEffect(()=>{!a&&L.length===1&&C(L[0].id)},[a,L]),i.jsx(qt,{open:e,onOpenChange:ye=>!ye&&t(),children:i.jsxs(Wt,{className:"sm:max-w-[500px]",children:[i.jsxs(Gt,{className:"flex justify-between items-center",children:[i.jsx(Vt,{className:"text-xl",children:a&&s?`Запись к мастеру ${s}`:"Создание новой записи"}),i.jsx(fr,{children:"Пожалуйста, заполните все поля для создания новой записи."}),i.jsx(ne,{variant:"ghost",size:"icon",onClick:t,children:i.jsx(Oc,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"space-y-4 my-2",children:[!a&&i.jsxs("div",{className:"space-y-1",children:[i.jsx(Xe,{htmlFor:"modal-specialist",children:"Мастер"}),i.jsxs(Tr,{value:k,onValueChange:ye=>{C(ye),g("")},children:[i.jsx(wr,{id:"modal-specialist",children:i.jsx(Ar,{placeholder:"Выберите мастера"})}),i.jsx(_r,{children:L.map(ye=>i.jsx(_t,{value:String(ye.id),children:ye.full_name||ye.name},ye.id))})]})]}),a&&s&&i.jsxs("div",{className:"space-y-1",children:[i.jsx(Xe,{children:"Мастер"}),i.jsx("p",{className:"text-sm p-2 border rounded-md bg-gray-50",children:s})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Xe,{htmlFor:"client-combobox",children:"Клиент"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex-grow",children:i.jsx(f_,{items:P.map(ye=>({value:String(ye.id),label:`${ye.full_name}${ye.phone?` (${ye.phone})`:""}`})),selectedValue:p,onSelectValue:ye=>{v(ye),_(!1)},placeholder:"Выберите или найдите клиента...",searchPlaceholder:"Поиск по имени или телефону...",emptyText:D?"Загрузка клиентов...":P.length===0?"Клиенты не найдены. Добавьте нового.":"Клиент не найден по запросу.",className:"w-full"})}),i.jsx(ne,{variant:"outline",size:"icon",onClick:()=>_(!0),title:"Добавить нового клиента",disabled:Z,children:i.jsx(nH,{className:"h-4 w-4"})})]}),w&&i.jsxs("div",{className:"mt-2 space-y-2 border p-3 rounded-md bg-gray-50",children:[i.jsx($e,{placeholder:"Имя нового клиента",value:S,onChange:ye=>E(ye.target.value),disabled:Z}),i.jsx($e,{placeholder:"Телефон нового клиента",value:j,onChange:ye=>N(ye.target.value),disabled:Z}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ne,{size:"sm",onClick:nt,disabled:!S||!j||Z,children:Z?"Сохранение...":"Сохранить клиента"}),i.jsx(ne,{size:"sm",variant:"outline",onClick:()=>_(!1),disabled:Z,children:"Отмена"})]})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Xe,{htmlFor:"modal-service-combobox",children:"Услуга"}),i.jsx(f_,{items:T.map(ye=>({value:String(ye.id),label:`${ye.name} (${ye.duration} мин, ${ye.price} ₽)`})),selectedValue:m,onSelectValue:g,placeholder:"Выберите или найдите услугу...",searchPlaceholder:"Поиск услуги...",emptyText:B||K?"Загрузка услуг...":T.length===0?"Нет доступных услуг":"Услуга не найдена",className:"w-full"}),(B||K)&&T.length===0&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Загрузка списка услуг..."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(Xe,{htmlFor:"date",children:"Дата"}),i.jsxs(pi,{children:[i.jsx(gi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[i.jsx(Gp,{className:"mr-2 h-4 w-4"}),u?Me(u,"dd.MM.yyyy"):i.jsx("span",{children:"Выберите дату"})]})}),i.jsx(Ks,{className:"w-auto p-0",children:i.jsx(Rc,{mode:"single",selected:u,onSelect:d,initialFocus:!0,locale:Da,disabled:ye=>ye<new Date(new Date().setDate(new Date().getDate()-1))})})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Xe,{htmlFor:"time",children:"Время"}),Pe?i.jsxs(Tr,{defaultValue:f||"10:00",value:f,onValueChange:ye=>{h(ye)},children:[i.jsx(wr,{id:"time",className:"w-full",children:i.jsx(Ar,{placeholder:"Выберите время"})}),i.jsx(_r,{children:Y.length>0?Y.map(ye=>i.jsx(_t,{value:ye,children:ye},ye)):i.jsx(_t,{value:"no-slots",disabled:!0,children:"Нет доступных слотов"})})]}):i.jsx("div",{className:"text-sm text-red-500",children:"Сначала выберите мастера"})]})]}),z&&p&&u&&f&&(a||k)&&(console.log("[AppointmentModal] Информация о записи:",{selectedClient:we,displaySpecialistName:Re,selectedService:z,date:u,time:f}),i.jsxs("div",{className:"mt-4 p-3 border rounded-md bg-gray-50 text-sm",children:[i.jsx("h4",{className:"font-semibold mb-2 text-base",children:"Информация о записи:"}),!we&&!S?i.jsx("p",{className:"text-red-500",children:"Ошибка: клиент не найден"}):z?i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Клиент:"})," ",te(we==null?void 0:we.full_name)?we==null?void 0:we.full_name:te(S)?S:"[Ошибка: невалидные данные клиента]"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Мастер:"})," ",te(Re)?Re:"[Ошибка: невалидные данные мастера]"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Услуга:"})," ",te(z.name)?z.name:"[Ошибка: невалидные данные услуги]"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Дата:"})," ",u instanceof Date?Me(u,"dd.MM.yyyy"):"[Ошибка: невалидная дата]"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Время:"})," ",te(f)?f:"[Ошибка: невалидное время]"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Длительность:"})," ",te(z.duration)?z.duration:"[Ошибка: невалидная длительность]"," мин."]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Стоимость:"})," ",te(z.price)?z.price:"[Ошибка: невалидная стоимость]"," ₽"]})]}):i.jsx("p",{className:"text-red-500",children:"Ошибка: услуга не найдена"})]}))]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:t,disabled:b,children:"Отмена"}),i.jsx(ne,{onClick:et,disabled:b||!Se,className:"bg-pink-500 hover:bg-pink-600 text-white",children:b?"Сохранение...":"Создать запись"})]})]})})};function WXe(e,t=[]){let r=[];function n(s,o){const l=x.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:h,children:p,...v}=f,m=(h==null?void 0:h[e][c])||l,g=x.useMemo(()=>v,Object.values(v));return i.jsx(m.Provider,{value:g,children:p})}function d(f,h){const p=(h==null?void 0:h[e][c])||l,v=x.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,d]}const a=()=>{const s=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,VXe(a,...t)]}function VXe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var uC="rovingFocusGroup.onEntryFocus",HXe={bubbles:!1,cancelable:!0},Y2="RovingFocusGroup",[RO,dre,qXe]=nj(Y2),[GXe,fre]=WXe(Y2,[qXe]),[KXe,XXe]=GXe(Y2),hre=x.forwardRef((e,t)=>i.jsx(RO.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(RO.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(YXe,{...e,ref:t})})}));hre.displayName=Y2;var YXe=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=x.useRef(null),p=Pr(t,h),v=Kj(s),[m=null,g]=Ci({prop:o,defaultProp:l,onChange:c}),[b,y]=x.useState(!1),w=ti(u),_=dre(r),S=x.useRef(!1),[E,j]=x.useState(0);return x.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(uC,w),()=>N.removeEventListener(uC,w)},[w]),i.jsx(KXe,{scope:r,orientation:n,dir:v,loop:a,currentTabStopId:m,onItemFocus:x.useCallback(N=>g(N),[g]),onItemShiftTab:x.useCallback(()=>y(!0),[]),onFocusableItemAdd:x.useCallback(()=>j(N=>N+1),[]),onFocusableItemRemove:x.useCallback(()=>j(N=>N-1),[]),children:i.jsx(zt.div,{tabIndex:b||E===0?-1:0,"data-orientation":n,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:At(e.onMouseDown,()=>{S.current=!0}),onFocus:At(e.onFocus,N=>{const k=!S.current;if(N.target===N.currentTarget&&k&&!b){const C=new CustomEvent(uC,HXe);if(N.currentTarget.dispatchEvent(C),!C.defaultPrevented){const T=_().filter(D=>D.focusable),A=T.find(D=>D.active),B=T.find(D=>D.id===m),P=[A,B,...T].filter(Boolean).map(D=>D.ref.current);gre(P,d)}}S.current=!1}),onBlur:At(e.onBlur,()=>y(!1))})})}),mre="RovingFocusGroupItem",pre=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:s,...o}=e,l=Ho(),c=s||l,u=XXe(mre,r),d=u.currentTabStopId===c,f=dre(r),{onFocusableItemAdd:h,onFocusableItemRemove:p}=u;return x.useEffect(()=>{if(n)return h(),()=>p()},[n,h,p]),i.jsx(RO.ItemSlot,{scope:r,id:c,focusable:n,active:a,children:i.jsx(zt.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:At(e.onMouseDown,v=>{n?u.onItemFocus(c):v.preventDefault()}),onFocus:At(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:At(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const m=QXe(v,u.orientation,u.dir);if(m!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let b=f().filter(y=>y.focusable).map(y=>y.ref.current);if(m==="last")b.reverse();else if(m==="prev"||m==="next"){m==="prev"&&b.reverse();const y=b.indexOf(v.currentTarget);b=u.loop?eYe(b,y+1):b.slice(y+1)}setTimeout(()=>gre(b))}})})})});pre.displayName=mre;var ZXe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function JXe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function QXe(e,t,r){const n=JXe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return ZXe[n]}function gre(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function eYe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var tYe=hre,rYe=pre,WM="Radio",[nYe,vre]=lo(WM),[aYe,sYe]=nYe(WM),xre=x.forwardRef((e,t)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:s,disabled:o,value:l="on",onCheck:c,form:u,...d}=e,[f,h]=x.useState(null),p=Pr(t,g=>h(g)),v=x.useRef(!1),m=f?u||!!f.closest("form"):!0;return i.jsxs(aYe,{scope:r,checked:a,disabled:o,children:[i.jsx(zt.button,{type:"button",role:"radio","aria-checked":a,"data-state":wre(a),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:p,onClick:At(e.onClick,g=>{a||c==null||c(),m&&(v.current=g.isPropagationStopped(),v.current||g.stopPropagation())})}),m&&i.jsx(iYe,{control:f,bubbles:!v.current,name:n,value:l,checked:a,required:s,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});xre.displayName=WM;var yre="RadioIndicator",bre=x.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:n,...a}=e,s=sYe(yre,r);return i.jsx(rl,{present:n||s.checked,children:i.jsx(zt.span,{"data-state":wre(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t})})});bre.displayName=yre;var iYe=e=>{const{control:t,checked:r,bubbles:n=!0,...a}=e,s=x.useRef(null),o=Xj(r),l=ZS(t);return x.useEffect(()=>{const c=s.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==r&&f){const h=new Event("click",{bubbles:n});f.call(c,r),c.dispatchEvent(h)}},[o,r,n]),i.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:s,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function wre(e){return e?"checked":"unchecked"}var oYe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],VM="RadioGroup",[lYe,ect]=lo(VM,[fre,vre]),_re=fre(),Sre=vre(),[cYe,uYe]=lYe(VM),jre=x.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:s,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:f,...h}=e,p=_re(r),v=Kj(u),[m,g]=Ci({prop:s,defaultProp:a,onChange:f});return i.jsx(cYe,{scope:r,name:n,required:o,disabled:l,value:m,onValueChange:g,children:i.jsx(tYe,{asChild:!0,...p,orientation:c,dir:v,loop:d,children:i.jsx(zt.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:v,...h,ref:t})})})});jre.displayName=VM;var Ere="RadioGroupItem",Nre=x.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:n,...a}=e,s=uYe(Ere,r),o=s.disabled||n,l=_re(r),c=Sre(r),u=x.useRef(null),d=Pr(t,u),f=s.value===a.value,h=x.useRef(!1);return x.useEffect(()=>{const p=m=>{oYe.includes(m.key)&&(h.current=!0)},v=()=>h.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",v)}},[]),i.jsx(rYe,{asChild:!0,...l,focusable:!o,active:f,children:i.jsx(xre,{disabled:o,required:s.required,checked:f,...c,...a,name:s.name,ref:d,onCheck:()=>s.onValueChange(a.value),onKeyDown:At(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:At(a.onFocus,()=>{var p;h.current&&((p=u.current)==null||p.click())})})})});Nre.displayName=Ere;var dYe="RadioGroupIndicator",Cre=x.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...n}=e,a=Sre(r);return i.jsx(bre,{...a,...n,ref:t})});Cre.displayName=dYe;var kre=jre,Tre=Nre,fYe=Cre;const Are=x.forwardRef(({className:e,...t},r)=>i.jsx(kre,{className:Ue("grid gap-2",e),...t,ref:r}));Are.displayName=kre.displayName;const DO=x.forwardRef(({className:e,...t},r)=>i.jsx(Tre,{ref:r,className:Ue("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:i.jsx(fYe,{className:"flex items-center justify-center",children:i.jsx(aH,{className:"h-2.5 w-2.5 fill-current text-current"})})}));DO.displayName=Tre.displayName;function hYe(e){return Me(e,"EEEE").toLowerCase()}function Zl(e,t){const[r,n]=t.split(":").map(Number),a=new Date(e);return a.setHours(r,n,0,0),a}function mYe(e,t,r){const n=Zl(r,e.start),a=Zl(r,e.end);return t.some(s=>{var o;if(typeof s.start_time=="string"&&typeof s.end_time=="string"){const l=Zl(r,s.start_time);let c=Zl(r,s.end_time);const u=((o=s.service)==null?void 0:o.break_after)||0;return c=Qd(c,u),console.log("Проверка занятости (start_time/end_time):",{appStart:l,appEnd:c,breakAfter:u,slotStart:n,slotEnd:a}),ef(l,a)&&Du(c,n)||xm(l,n)}if(s.time&&s.service&&typeof s.service.duration=="number"){const l=Zl(r,s.time),c=s.service.duration,u=s.service.break_after||0,d=Qd(l,c+u);return console.log("Проверка занятости (time/duration):",{appStart:l,appEnd:d,breakAfter:u,slotStart:n,slotEnd:a}),ef(l,a)&&Du(d,n)||xm(l,n)}if(s.time){const l=Zl(r,s.time),c=Qd(l,30);return console.log("Проверка занятости (time/30min):",{appStart:l,appEnd:c,slotStart:n,slotEnd:a}),ef(l,a)&&Du(c,n)||xm(l,n)}return!1})}const pYe={async getAvailableSlots(e,t,r=10){const n=await Mn.getStaffById(e);if(!n||!n.work_schedule)return[];const a=hYe(t),s=n.work_schedule[a];if(!s)return[];const o=await rs.getAllAppointments({specialistId:e,dateFrom:Me(t,"yyyy-MM-dd"),dateTo:Me(t,"yyyy-MM-dd"),status:["pending","confirmed"]}),l=[];let c=Zl(t,s.start),u=Zl(t,s.end);for(s.end==="00:00"&&(u=Qd(Zl(t,"00:00"),24*60));ef(c,u);){const d=Qd(c,r);if(Du(d,u)||xm(d,u))break;const f={start:Me(c,"HH:mm"),end:Me(d,"HH:mm")};mYe(f,o,t)||l.push(f),c=d}return l}},gYe=uo((e,t)=>({availableSlots:[],isLoading:!1,error:null,cache:{},fetchAvailableSlots:async(r,n)=>{e({isLoading:!0,error:null});const a=`${r}_${n.toISOString().slice(0,10)}`,s=t().cache[a];if(s){e({availableSlots:s,isLoading:!1});return}try{const o=await pYe.getAvailableSlots(r,n);e(l=>({availableSlots:o,isLoading:!1,error:null,cache:{...l.cache,[a]:o}}))}catch(o){e({availableSlots:[],isLoading:!1,error:o.message})}},clearSlots:()=>e({availableSlots:[],error:null})})),Pre=({specialistId:e,date:t,time:r,onTimeChange:n,appointments:a})=>{const{availableSlots:s,isLoading:o,error:l,fetchAvailableSlots:c}=gYe(),{specialists:u}=Oa();G.useMemo(()=>u.find(m=>String(m.id)===String(e)),[u,e]),G.useEffect(()=>{e&&t&&c(e,t)},[e,t,c]);const d=new Date,f=t&&d.toDateString()===t.toDateString(),h=m=>{var w;if(!a||!t)return!1;const[g,b]=m.split(":"),y=new Date(t);if(y.setHours(Number(g),Number(b),0,0),f&&y<d)return!0;for(const _ of a){const S=new Date(_.date+"T"+_.time);if(S<=y&&y<(_.end_time?new Date(_.date+"T"+_.end_time):new Date(S.getTime()+(((w=_.service)==null?void 0:w.duration)||60)*6e4)))return!0}return!1},p=G.useMemo(()=>!t||s.length===0?[]:s.map(m=>m.start).filter(m=>{if(h(m))return!1;if(f){const[g,b]=m.split(":").map(Number);return g>d.getHours()||g===d.getHours()&&b>d.getMinutes()}return!0}).sort((m,g)=>{const[b,y]=m.split(":").map(Number),[w,_]=g.split(":").map(Number);return b!==w?b-w:y-_}),[s,t,a,f]),v=m=>{n(m)};return G.useEffect(()=>{console.log("DateTimeSelector Props (no date picker):",{specialistId:e,date:t,time:r}),console.log("availableSlots:",s),console.log("filteredSlots:",p)},[e,t,r,s,p]),i.jsxs(i.Fragment,{children:[t?i.jsxs(Tr,{value:r,onValueChange:v,disabled:o||!e||p.length===0,children:[i.jsx(wr,{className:"w-full border-beauty-200",children:i.jsx(Ar,{placeholder:o?"Загрузка...":p.length===0?"Нет слотов":"Выберите время"})}),i.jsx(_r,{children:p.map(m=>i.jsx(_t,{value:m,children:m},m))})]}):i.jsx("div",{className:"text-sm text-muted-foreground h-10 flex items-center",children:"Для выбора времени укажите дату"}),l&&i.jsxs("div",{className:"text-red-500 text-sm px-2 py-1",children:["Ошибка: ",l]}),t&&!o&&!l&&s.length>0&&p.length===0&&i.jsx("div",{className:"text-beauty-600 text-sm px-2 py-1",children:"Нет доступных слотов на выбранную дату/время"}),t&&!o&&!l&&s.length===0&&i.jsx("div",{className:"text-beauty-600 text-sm px-2 py-1",children:"Нет информации о расписании"})]})},Ore=({client:e,onSuccess:t,initialSpecialist:r,initialDate:n,initialTime:a})=>{var B,R;const{currentStudio:s}=Ba(),{specialists:o,fetchSpecialists:l,fetchSpecialistsByStudioId:c}=Oa(),{getServicesBySpecialist:u,refreshSpecialistServices:d}=Oi(),{appointments:f,fetchAppointments:h}=qu(),[p,v]=x.useState(""),[m,g]=x.useState([]),[b,y]=x.useState(""),[w,_]=x.useState(void 0),[S,E]=x.useState(""),[j,N]=x.useState(""),[k,C]=x.useState(!1);x.useEffect(()=>{s!=null&&s.id?c(s.id):l(),r&&v(r),n&&_(n),a&&E(a)},[l,c,s==null?void 0:s.id,r,n,a]),x.useEffect(()=>{p?d(p).then(()=>{const P=u(p);g(P),y("")}):(g([]),y(""))},[p]),x.useEffect(()=>{p&&w&&h({specialistId:p,fromDate:Me(w,"yyyy-MM-dd"),toDate:Me(w,"yyyy-MM-dd")})},[p,w,h]);const T=G.useMemo(()=>f.filter(P=>P.specialist_id===p&&P.date===(w?Me(w,"yyyy-MM-dd"):"")&&(P.status==="pending"||P.status==="confirmed")),[f,p,w]),A=async()=>{if(console.log("[handleBookAppointment] Проверка данных перед записью:",{client:e,selectedSpecialist:p,selectedService:b,selectedDate:w,selectedTime:S}),!e||!p||!b||!w||!S){console.error("[handleBookAppointment] Валидация НЕ пройдена!"),Ae({title:"Заполните все поля для записи клиента",variant:"destructive"});return}if(!zw(p)){Ae({title:"Ошибка идентификатора",description:"Некорректный UUID специалиста",variant:"destructive"});return}if(!zw(b)){Ae({title:"Ошибка идентификатора",description:"Некорректный UUID услуги",variant:"destructive"});return}console.log("[handleBookAppointment] Валидация пройдена, начинаем запись..."),C(!0);try{const P=m.find(U=>String(U.id)===String(b)),D={client_id:String(e.id),specialist_id:p,service_id:String(b),date:Me(w,"yyyy-MM-dd"),time:S,price:P==null?void 0:P.price,client_name:e.full_name,client_phone:e.phone,client_email:e.email,notes:j||void 0};console.log("[handleBookAppointment] Отправка данных в API:",D),await rs.createAppointment(D),Ae({title:"Запись создана"}),t()}catch(P){let D="Неизвестная ошибка";typeof P=="string"?D=P:P instanceof Error&&(D=P.message),console.error("[handleBookAppointment] Ошибка при создании записи:",P),Ae({title:"Ошибка создания записи",description:D,variant:"destructive"})}finally{console.log("[handleBookAppointment] Завершение операции записи"),C(!1)}};return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 py-6",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Мастер"}),i.jsxs("select",{className:"w-full rounded-xl border border-input bg-background px-3 py-3 text-sm ring-offset-background",onChange:P=>v(P.target.value),value:p,children:[i.jsx("option",{value:"",children:"Выберите мастера"}),o.map(P=>i.jsx("option",{value:P.id,children:P.full_name||P.name},P.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Услуга"}),i.jsxs("select",{className:"w-full rounded-xl border border-input bg-background px-3 py-3 text-sm ring-offset-background",onChange:P=>y(P.target.value),value:b,disabled:!p,children:[i.jsx("option",{value:"",children:"Выберите услугу"}),m.map(P=>i.jsx("option",{value:P.id,children:P.name},P.id))]})]}),i.jsx(Pre,{specialistId:p,date:w,time:S,onDateChange:_,onTimeChange:E,appointments:T})]}),i.jsxs("div",{className:"space-y-6 flex flex-col h-full",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Заметка к записи (необязательно)"}),i.jsx(rn,{className:"w-full min-h-[60px] rounded-xl",value:j,onChange:P=>N(P.target.value),placeholder:"Комментарий, пожелания и т.д."})]}),e&&b&&i.jsxs("div",{className:"p-4 border rounded-xl bg-muted/50",children:[i.jsx("h4",{className:"font-medium mb-2",children:"Информация о записи"}),i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Клиент:"})," ",e.full_name||"—"]}),(()=>{const P=m.find(D=>String(D.id)===String(b));return P?i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Услуга:"})," ",P.name]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Стоимость:"})," ",P.price?`${P.price} ₽`:"—"]})]}):i.jsx("p",{className:"text-red-500",children:"Ошибка: услуга не найдена"})})(),p&&i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Мастер:"})," ",((B=o.find(P=>P.id===p))==null?void 0:B.full_name)||((R=o.find(P=>P.id===p))==null?void 0:R.name)||"—"]}),w&&S&&i.jsxs("div",{className:"font-medium flex items-center gap-2",children:[Me(w,"dd.MM.yyyy"),S&&i.jsxs("span",{className:"flex items-center text-beauty-700 text-sm",children:[i.jsx(Si,{className:"w-4 h-4 mr-1 inline"}),S]})]})]})]}),i.jsxs("div",{className:"flex gap-2 justify-end mt-auto",children:[i.jsx(ne,{variant:"outline",onClick:t,disabled:k,children:"Отмена"}),i.jsx(ne,{onClick:A,disabled:k||!e,children:k?i.jsxs(i.Fragment,{children:[i.jsx(ki,{className:"mr-2 h-4 w-4 animate-spin"}),"Создание записи..."]}):"Записать"})]}),!e&&i.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:"Сначала выберите или создайте клиента"})]})]})},vYe=uo()(Gf(Jp((e,t)=>({notificationSettings:[],async fetchNotificationSettings(r){const n=await Pv.getSettings(r);console.log("[STORE] Получены notificationSettings:",n),e(a=>{a.notificationSettings=n})},getEnabledEventTypes(){return t().notificationSettings.filter(r=>r.enabled).map(r=>r.event_type)}})))),xYe=({open:e,onClose:t,selectedDate:r,selectedTime:n,specialistId:a,specialistName:s,existingAppointments:o=[],onSave:l,onSpecialistAutoSelect:c,currentAppointmentInfo:u})=>{var L,H;const[d,f]=x.useState(r),[h,p]=x.useState(n||"10:00"),[v,m]=x.useState(""),[g,b]=x.useState(!1),[y,w]=x.useState(a),[_,S]=x.useState([]),[E,j]=x.useState(!1),{services:N,isLoading:k,fetchServices:C,getServicesBySpecialist:T,refreshSpecialistServices:A}=Oi(),{specialists:B,fetchSpecialists:R,overrides:P,loadOverrides:D}=Oa();x.useEffect(()=>{e&&(C(),R(),a&&D(a))},[e,C,R,a,D]),x.useEffect(()=>{const ee=a||y;ee?(j(!0),A(ee).then(()=>{const q=T(ee);S(q||[]),j(!1)}).catch(()=>{S([]),j(!1)})):(S(N.filter(q=>q.is_active)),j(!1))},[a,y,N,T,A,e]),x.useEffect(()=>{e?(f(r||new Date),p(n||"10:00"),w(a)):(f(void 0),p("10:00"),m(""),w(void 0),b(!1))},[e,r,n,a]);const U=_.find(ee=>String(ee.id)===v);a||(L=B.find(ee=>ee.id===y))!=null&&L.full_name||(H=B.find(ee=>ee.id===y))==null||H.name;const M=a||y,F=x.useMemo(()=>{if(!M||!d)return[];const ee=Me(d,"yyyy-MM-dd");return(o||[]).filter(q=>String(q.specialist_id)===String(M)&&q.date===ee)},[o,M,d]),K=x.useMemo(()=>{if(!M||!d)return null;const ee=B.find(Z=>String(Z.id)===String(M));if(!ee)return null;const q=P[M]||[];return UM(d,ee.work_schedule||{},q)},[B,M,d,P]);x.useMemo(()=>!!K,[K]);const X=x.useMemo(()=>{if(!d||!h)return!1;const ee=new Date,q=new Date(d),[Z,I]=h.split(":").map(Number);return q.setHours(Z,I,0,0),q>=ee},[d,h]),O=U&&d&&h&&M&&X,W=async()=>{const ee=M;if(!d||!h||!v||!ee||!u){alert("Пожалуйста, заполните все обязательные поля.");return}b(!0);try{const q=_.find(Z=>String(Z.id)===String(v));if(!q){alert("Выбранная услуга не найдена."),b(!1);return}l&&await l({serviceId:String(q.id),serviceName:q.name,date:Me(d,"yyyy-MM-dd"),time:h,duration:q.duration,price:q.price,specialistId:ee}),t()}catch(q){console.error("Ошибка при переносе записи:",q),alert("Произошла непредвиденная ошибка при переносе записи.")}finally{b(!1)}};return i.jsxs(i.Fragment,{children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Перенос записи"}),u&&i.jsxs(fr,{children:["Перенос для клиента: ",u.clientName,i.jsx("br",{}),"Текущее время: ",u.currentDate," в ",u.currentTime]})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[!a&&i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"specialist",className:"text-right",children:"Мастер"}),i.jsxs(Tr,{value:y,onValueChange:ee=>{if(w(ee),m(""),c&&B.find(q=>q.id===ee)){const q=B.find(Z=>Z.id===ee);c(q.id,q.full_name||q.name||"")}},children:[i.jsx(wr,{className:"col-span-3",children:i.jsx(Ar,{placeholder:"Выберите мастера"})}),i.jsx(_r,{children:B.map(ee=>i.jsx(_t,{value:ee.id,children:ee.full_name||ee.name},ee.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"service",className:"text-right",children:"Услуга"}),i.jsxs(Tr,{value:v,onValueChange:m,disabled:!M||E||k,children:[i.jsx(wr,{className:"col-span-3",children:i.jsx(Ar,{placeholder:E||k?"Загрузка услуг...":"Выберите услугу"})}),i.jsx(_r,{children:_.map(ee=>i.jsxs(_t,{value:String(ee.id),children:[ee.name," (",ee.duration," мин, ",ee.price," руб)"]},ee.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"reschedule-date",className:"text-right",children:"Дата"}),i.jsx("div",{className:"col-span-3",children:i.jsxs(pi,{children:[i.jsx(gi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",id:"reschedule-date",className:`w-full justify-between text-left font-normal ${!d&&"text-muted-foreground"}`,children:[d?Me(d,"d MMMM yyyy г.",{locale:Da}):i.jsx("span",{children:"Выберите дату"}),i.jsx(Gp,{className:"ml-2 h-4 w-4 opacity-50"})]})}),i.jsx(Ks,{className:"w-auto p-0",align:"start",children:i.jsx(Rc,{mode:"single",selected:d,onSelect:ee=>{f(ee),p("")},initialFocus:!0,locale:Da,weekStartsOn:1})})]})})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"reschedule-time",className:"text-right",children:"Время"}),i.jsx("div",{className:"col-span-3",children:i.jsx(Pre,{specialistId:M,date:d,time:h,onTimeChange:p,appointments:F})})]})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:t,children:"Отмена"}),i.jsx(ne,{onClick:W,disabled:!O||g,children:g?"Переносим...":"Перенести запись"})]})]})};function TB(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Rre(...e){return t=>{let r=!1;const n=e.map(a=>{const s=TB(a,t);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let a=0;a<n.length;a++){const s=n[a];typeof s=="function"?s():TB(e[a],null)}}}}function rh(...e){return x.useCallback(Rre(...e),e)}function yYe(e){const t=bYe(e),r=x.forwardRef((n,a)=>{const{children:s,...o}=n,l=x.Children.toArray(s),c=l.find(_Ye);if(c){const u=c.props.children,d=l.map(f=>f===c?x.Children.count(u)>1?x.Children.only(null):x.isValidElement(u)?u.props.children:null:f);return i.jsx(t,{...o,ref:a,children:x.isValidElement(u)?x.cloneElement(u,void 0,d):null})}return i.jsx(t,{...o,ref:a,children:s})});return r.displayName=`${e}.Slot`,r}function bYe(e){const t=x.forwardRef((r,n)=>{const{children:a,...s}=r;if(x.isValidElement(a)){const o=jYe(a),l=SYe(s,a.props);return a.type!==x.Fragment&&(l.ref=n?Rre(n,o):o),x.cloneElement(a,l)}return x.Children.count(a)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var wYe=Symbol("radix.slottable");function _Ye(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===wYe}function SYe(e,t){const r={...t};for(const n in t){const a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...l)=>{const c=s(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...s}:n==="className"&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}function jYe(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var EYe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ry=EYe.reduce((e,t)=>{const r=yYe(`Primitive.${t}`),n=x.forwardRef((a,s)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),MO=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{};function NYe(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var Dy=e=>{const{present:t,children:r}=e,n=CYe(t),a=typeof r=="function"?r({present:n.isPresent}):x.Children.only(r),s=rh(n.ref,kYe(a));return typeof r=="function"||n.isPresent?x.cloneElement(a,{ref:s}):null};Dy.displayName="Presence";function CYe(e){const[t,r]=x.useState(),n=x.useRef(null),a=x.useRef(e),s=x.useRef("none"),o=e?"mounted":"unmounted",[l,c]=NYe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=n1(n.current);s.current=l==="mounted"?u:"none"},[l]),MO(()=>{const u=n.current,d=a.current;if(d!==e){const h=s.current,p=n1(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),MO(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=p=>{const m=n1(n.current).includes(p.animationName);if(p.target===t&&m&&(c("ANIMATION_END"),!a.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},h=p=>{p.target===t&&(s.current=n1(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function n1(e){return(e==null?void 0:e.animationName)||"none"}function kYe(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function TYe(e,t=[]){let r=[];function n(s,o){const l=x.createContext(o),c=r.length;r=[...r,o];const u=f=>{var b;const{scope:h,children:p,...v}=f,m=((b=h==null?void 0:h[e])==null?void 0:b[c])||l,g=x.useMemo(()=>v,Object.values(v));return i.jsx(m.Provider,{value:g,children:p})};u.displayName=s+"Provider";function d(f,h){var m;const p=((m=h==null?void 0:h[e])==null?void 0:m[c])||l,v=x.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[u,d]}const a=()=>{const s=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,AYe(a,...t)]}function AYe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Md(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var PYe=x.createContext(void 0);function OYe(e){const t=x.useContext(PYe);return e||t||"ltr"}function RYe(e,[t,r]){return Math.min(r,Math.max(t,e))}function sf(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function DYe(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var HM="ScrollArea",[Dre,tct]=TYe(HM),[MYe,po]=Dre(HM),Mre=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:s=600,...o}=e,[l,c]=x.useState(null),[u,d]=x.useState(null),[f,h]=x.useState(null),[p,v]=x.useState(null),[m,g]=x.useState(null),[b,y]=x.useState(0),[w,_]=x.useState(0),[S,E]=x.useState(!1),[j,N]=x.useState(!1),k=rh(t,T=>c(T)),C=OYe(a);return i.jsx(MYe,{scope:r,type:n,dir:C,scrollHideDelay:s,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:h,scrollbarX:p,onScrollbarXChange:v,scrollbarXEnabled:S,onScrollbarXEnabledChange:E,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:j,onScrollbarYEnabledChange:N,onCornerWidthChange:y,onCornerHeightChange:_,children:i.jsx(Ry.div,{dir:C,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});Mre.displayName=HM;var Ire="ScrollAreaViewport",$re=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...s}=e,o=po(Ire,r),l=x.useRef(null),c=rh(t,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),i.jsx(Ry.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});$re.displayName=Ire;var Il="ScrollAreaScrollbar",qM=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=po(Il,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return x.useEffect(()=>(l?s(!0):o(!0),()=>{l?s(!1):o(!1)}),[l,s,o]),a.type==="hover"?i.jsx(IYe,{...n,ref:t,forceMount:r}):a.type==="scroll"?i.jsx($Ye,{...n,ref:t,forceMount:r}):a.type==="auto"?i.jsx(Fre,{...n,ref:t,forceMount:r}):a.type==="always"?i.jsx(GM,{...n,ref:t}):null});qM.displayName=Il;var IYe=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=po(Il,e.__scopeScrollArea),[s,o]=x.useState(!1);return x.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),i.jsx(Dy,{present:r||s,children:i.jsx(Fre,{"data-state":s?"visible":"hidden",...n,ref:t})})}),$Ye=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=po(Il,e.__scopeScrollArea),s=e.orientation==="horizontal",o=J2(()=>c("SCROLL_END"),100),[l,c]=DYe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),x.useEffect(()=>{const u=a.viewport,d=s?"scrollLeft":"scrollTop";if(u){let f=u[d];const h=()=>{const p=u[d];f!==p&&(c("SCROLL"),o()),f=p};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,s,c,o]),i.jsx(Dy,{present:r||l!=="hidden",children:i.jsx(GM,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:sf(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:sf(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Fre=x.forwardRef((e,t)=>{const r=po(Il,e.__scopeScrollArea),{forceMount:n,...a}=e,[s,o]=x.useState(!1),l=e.orientation==="horizontal",c=J2(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return Rp(r.viewport,c),Rp(r.content,c),i.jsx(Dy,{present:n||s,children:i.jsx(GM,{"data-state":s?"visible":"hidden",...a,ref:t})})}),GM=x.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=po(Il,e.__scopeScrollArea),s=x.useRef(null),o=x.useRef(0),[l,c]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Wre(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function f(h,p){return WYe(h,o.current,l,p)}return r==="horizontal"?i.jsx(FYe,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const h=a.viewport.scrollLeft,p=AB(h,l,a.dir);s.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=f(h,a.dir))}}):r==="vertical"?i.jsx(LYe,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const h=a.viewport.scrollTop,p=AB(h,l);s.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=f(h))}}):null}),FYe=x.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,s=po(Il,e.__scopeScrollArea),[o,l]=x.useState(),c=x.useRef(null),u=rh(t,c,s.onScrollbarXChange);return x.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(Bre,{"data-orientation":"horizontal",...a,ref:u,sizes:r,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Z2(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(s.viewport){const h=s.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),Hre(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&n({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:pS(o.paddingLeft),paddingEnd:pS(o.paddingRight)}})}})}),LYe=x.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,s=po(Il,e.__scopeScrollArea),[o,l]=x.useState(),c=x.useRef(null),u=rh(t,c,s.onScrollbarYChange);return x.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(Bre,{"data-orientation":"vertical",...a,ref:u,sizes:r,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Z2(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(s.viewport){const h=s.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),Hre(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&n({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:pS(o.paddingTop),paddingEnd:pS(o.paddingBottom)}})}})}),[BYe,Lre]=Dre(Il),Bre=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...h}=e,p=po(Il,r),[v,m]=x.useState(null),g=rh(t,k=>m(k)),b=x.useRef(null),y=x.useRef(""),w=p.viewport,_=n.content-n.viewport,S=Md(d),E=Md(c),j=J2(f,10);function N(k){if(b.current){const C=k.clientX-b.current.left,T=k.clientY-b.current.top;u({x:C,y:T})}}return x.useEffect(()=>{const k=C=>{const T=C.target;(v==null?void 0:v.contains(T))&&S(C,_)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[w,v,_,S]),x.useEffect(E,[n,E]),Rp(v,j),Rp(p.content,j),i.jsx(BYe,{scope:r,scrollbar:v,hasThumb:a,onThumbChange:Md(s),onThumbPointerUp:Md(o),onThumbPositionChange:E,onThumbPointerDown:Md(l),children:i.jsx(Ry.div,{...h,ref:g,style:{position:"absolute",...h.style},onPointerDown:sf(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),b.current=v.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),N(k))}),onPointerMove:sf(e.onPointerMove,N),onPointerUp:sf(e.onPointerUp,k=>{const C=k.target;C.hasPointerCapture(k.pointerId)&&C.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=y.current,p.viewport&&(p.viewport.style.scrollBehavior=""),b.current=null})})})}),mS="ScrollAreaThumb",Ure=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Lre(mS,e.__scopeScrollArea);return i.jsx(Dy,{present:r||a.hasThumb,children:i.jsx(UYe,{ref:t,...n})})}),UYe=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,s=po(mS,r),o=Lre(mS,r),{onThumbPositionChange:l}=o,c=rh(t,f=>o.onThumbChange(f)),u=x.useRef(void 0),d=J2(()=>{u.current&&(u.current(),u.current=void 0)},100);return x.useEffect(()=>{const f=s.viewport;if(f){const h=()=>{if(d(),!u.current){const p=VYe(f,l);u.current=p,l()}};return l(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[s.viewport,d,l]),i.jsx(Ry.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:sf(e.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),v=f.clientX-p.left,m=f.clientY-p.top;o.onThumbPointerDown({x:v,y:m})}),onPointerUp:sf(e.onPointerUp,o.onThumbPointerUp)})});Ure.displayName=mS;var KM="ScrollAreaCorner",zre=x.forwardRef((e,t)=>{const r=po(KM,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?i.jsx(zYe,{...e,ref:t}):null});zre.displayName=KM;var zYe=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=po(KM,r),[s,o]=x.useState(0),[l,c]=x.useState(0),u=!!(s&&l);return Rp(a.scrollbarX,()=>{var f;const d=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(d),c(d)}),Rp(a.scrollbarY,()=>{var f;const d=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?i.jsx(Ry.div,{...n,ref:t,style:{width:s,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function pS(e){return e?parseInt(e,10):0}function Wre(e,t){const r=e/t;return isNaN(r)?0:r}function Z2(e){const t=Wre(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function WYe(e,t,r,n="ltr"){const a=Z2(r),s=a/2,o=t||s,l=a-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return Vre([c,u],f)(e)}function AB(e,t,r="ltr"){const n=Z2(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-a,o=t.content-t.viewport,l=s-n,c=r==="ltr"?[0,o]:[o*-1,0],u=RYe(e,c);return Vre([0,o],[0,l])(u)}function Vre(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Hre(e,t){return e>0&&e<t}var VYe=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const s={left:e.scrollLeft,top:e.scrollTop},o=r.left!==s.left,l=r.top!==s.top;(o||l)&&t(),r=s,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function J2(e,t){const r=Md(e),n=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),x.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Rp(e,t){const r=Md(t);MO(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var qre=Mre,HYe=$re,qYe=zre;const Gre=x.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(qre,{ref:n,className:Ue("relative overflow-hidden",e),...r,children:[i.jsx(HYe,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(Kre,{}),i.jsx(qYe,{})]}));Gre.displayName=qre.displayName;const Kre=x.forwardRef(({className:e,orientation:t="vertical",...r},n)=>i.jsx(qM,{ref:n,orientation:t,className:Ue("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:i.jsx(Ure,{className:"relative flex-1 rounded-full bg-border"})}));Kre.displayName=qM.displayName;const GYe=()=>{var pd,qy,b0,Gy,Ky;const[e,t]=x.useState(new Date),[r,n]=x.useState(""),[a,s]=x.useState("calendar"),[o,l]=x.useState("all"),[c,u]=x.useState("all"),[d,f]=x.useState(!1),[h,p]=x.useState(!1),[v,m]=x.useState(!1),[g,b]=x.useState(!1),[y,w]=x.useState(!1),[_,S]=x.useState(!1),[E,j]=x.useState(!1),[N,k]=x.useState({}),[C,T]=x.useState({client_name:"",client_phone:"",client_email:"",specialist_id:"",service_id:"",date:"",time:"",notes:""}),[A,B]=x.useState("new"),[R,P]=x.useState(""),[D,U]=x.useState(null),[M,F]=x.useState([]);x.useState({});const[K,X]=x.useState([]);x.useState(""),x.useState(""),x.useState({open:!1,clientId:null,appointmentId:null}),x.useState({}),x.useState("");const[O,W]=x.useState(!1),[L,H]=x.useState({open:!1,clientId:null,appointmentId:null,max:0});x.useState(""),x.useState({});const[ee,q]=x.useState([]),[Z,I]=x.useState(!1),[Q,ve]=x.useState(20),[z,we]=x.useState(null),[Re,Pe]=x.useState({}),[De,Ne]=x.useState({}),[J,Y]=x.useState([]),{notificationSettings:ae,fetchNotificationSettings:ge}=vYe(),Se=ei(de=>{var We;return(We=de.user)==null?void 0:We.id}),[te,me]=x.useState(new Date),{appointments:ke,selectedAppointment:he,loading:et,error:nt,fetchAppointments:Oe,createAppointment:Ye,updateAppointmentStatus:ye,updateAppointment:le,selectAppointment:_e,fetchLastNotificationStatus:Be}=qu(),{services:Ie,fetchServices:it,getServicesBySpecialist:tt}=Oi(),Ze=Gs(de=>de.clients),ct=Gs(de=>de.fetchClients),St=Oa(de=>de.specialists),ie=Oa(de=>de.fetchSpecialists),be=Gs(de=>de.discountsByClientId),{studios:Je,currentStudio:Et}=Ba(),[Ke,Pt]=x.useState(!1),[Ht,pe]=x.useState(!1),[ze,yt]=x.useState(""),[Rt,er]=x.useState(""),[Dt,ar]=x.useState(null);x.useEffect(()=>{console.log("Загружаем данные..."),Oe(),ie(),it(),ct(),op().then(de=>{X(de)}),console.log("Состояние хранилища записей:",{appointments:ke,loading:ke.length===0,error:ke.length===0?"Loading...":null})},[Oe,ie,it,ct]),x.useEffect(()=>{Se&&(console.log("[AppointmentsManagement] Загрузка настроек уведомлений для userId:",Se),ge(Se))},[Se,ge]),x.useEffect(()=>{const de=()=>{Se&&(console.log("[AppointmentsManagement] Окно получило фокус, перезагружаем настройки уведомлений для userId:",Se),ge(Se))};return window.addEventListener("focus",de),()=>{window.removeEventListener("focus",de)}},[Se,ge]),x.useEffect(()=>{e&&console.log(`Выбрана дата: ${Me(e,"yyyy-MM-dd")}`)},[e,o]);const qr=de=>{try{return Me(O0(de),"dd MMM yyyy")}catch{return de}},V=de=>ke.filter(We=>{try{const rt=Ra(O0(We.date),de),kt=c==="all"||We.specialist_id===c;let Mt=!0;if(Et){const Ea=St.find(Xn=>Xn.id===We.specialist_id);Mt=Ea?Ea.studio_id===Et.id:!1}const Lt=We.client_name&&We.client_name.toLowerCase().includes(r.toLowerCase())||We.client_phone&&We.client_phone.includes(r)||We.client_email&&We.client_email.toLowerCase().includes(r.toLowerCase()),xn=o==="all"||We.status===o;return rt&&kt&&Mt&&Lt&&xn}catch{return!1}}),oe=ke.filter(de=>{const We=de.client_name&&de.client_name.toLowerCase().includes(r.toLowerCase())||de.client_phone&&de.client_phone.includes(r)||de.client_email&&de.client_email.toLowerCase().includes(r.toLowerCase()),rt=o==="all"||de.status===o,kt=c==="all"||de.specialist_id===c;let Mt=!0;if(Et){const Lt=St.find(xn=>xn.id===de.specialist_id);Mt=Lt?Lt.studio_id===Et.id:!1}return We&&rt&&kt&&Mt}).slice(0).sort((de,We)=>de.date!==We.date?We.date.localeCompare(de.date):(We.appointment_number||0)-(de.appointment_number||0)),re=de=>{switch(de){case"completed":return"success";case"confirmed":return"default";case"pending":return"warning";case"cancelled":return"destructive";default:return"secondary"}},se=de=>{switch(de){case"completed":return"Выполнена";case"confirmed":return"Подтверждена";case"pending":return"Ожидает";case"cancelled":return"Отменена";default:return de}},ce=de=>de?de.full_name||de.name||"Имя не указано":"Не указан",fe=async()=>{if(he)try{await ye(String(he.id),"confirmed"),Ae({title:"Запись подтверждена",description:`Запись клиента ${he.client_name} успешно подтверждена.`}),p(!1),_e(null),Oe({specialistId:c!=="all"?c:void 0,fromDate:Me(e||new Date,"yyyy-MM-dd"),toDate:Me(e||new Date,"yyyy-MM-dd")})}catch{Ae({title:"Ошибка",description:"Не удалось подтвердить запись. Попробуйте снова.",variant:"destructive"})}},Ce=async()=>{if(he)try{await ye(String(he.id),"cancelled"),Ae({title:"Запись отменена",description:`Запись клиента ${he.client_name} успешно отменена.`}),m(!1),_e(null),Oe({specialistId:c!=="all"?c:void 0,fromDate:Me(e||new Date,"yyyy-MM-dd"),toDate:Me(e||new Date,"yyyy-MM-dd")})}catch{Ae({title:"Ошибка",description:"Не удалось отменить запись. Попробуйте снова.",variant:"destructive"})}},Fe=async()=>{if(he)try{const de=il(he,M,K,be);await le(String(he.id),{final_price:de.finalPrice,discount_percent:de.discountPercent}),await ye(String(he.id),"completed"),await Oe({specialistId:c!=="all"?c:void 0,fromDate:Me(e||new Date,"yyyy-MM-dd"),toDate:Me(e||new Date,"yyyy-MM-dd")});try{console.log("[BONUS] Явный вызов функции начисления бонусов");const We=await rs.applyBonusForAppointment(String(he.id),String(he.client_id));console.log("[BONUS] Результат начисления бонусов:",We)}catch(We){console.error("[BONUS] Ошибка при начислении бонусов:",We)}Ae({title:"Запись завершена",description:`Запись клиента ${he.client_name} отмечена как выполненная.`}),w(!1),_e(null)}catch{Ae({title:"Ошибка",description:"Не удалось завершить запись. Попробуйте снова.",variant:"destructive"})}},Ee=async de=>{if(!he)return;const We={date:de.date,time:de.time,service_id:de.serviceId};try{await le(String(he.id),We);const rt=St.find(kt=>kt.id===he.specialist_id);await dA.sendNotification({type:"booking_rescheduled",client_id:he.client_id,appointment_id:he.id,date:de.date,time:de.time,service:de.serviceName,master:(rt==null?void 0:rt.name)||he.specialist_name||"",recipient:"client"}),Ae({title:"Запись перенесена",description:`Запись клиента ${he.client_name} перенесена на ${Me(O0(de.date),"dd.MM.yyyy")} в ${de.time}.`}),Oe({specialistId:c!=="all"?c:void 0,fromDate:Me(te||new Date,"yyyy-MM-dd"),toDate:Me(te||new Date,"yyyy-MM-dd")}),Un()}catch(rt){console.error("Ошибка при переносе (handleRescheduleSave):",rt),Ae({title:"Ошибка",description:rt instanceof Error?rt.message:"Не удалось перенести запись. Попробуйте снова.",variant:"destructive"})}},je=Ze.filter(de=>de.full_name.toLowerCase().includes(R.toLowerCase())||de.phone.includes(R)||de.email&&de.email.toLowerCase().includes(R.toLowerCase())),Te=de=>{U(de),T(We=>({...We,client_name:de.full_name,client_phone:de.phone,client_email:de.email||""}))};x.useEffect(()=>{A==="existing"&&D&&!je.some(de=>de.id===D.id)&&(U(null),T(de=>({...de,client_name:"",client_phone:"",client_email:""})))},[R,je,A]);const Qe=de=>{B(de),U(null),T(We=>({...We,client_name:"",client_phone:"",client_email:""}))};A==="new"&&C.client_name&&C.client_phone||A==="existing"&&D&&C.specialist_id&&C.service_id&&C.date&&C.time,x.useEffect(()=>{ue.from("loyalty_user_states").select("*, program:loyalty_programs(*)").then(({data:de})=>{F(de||[])})},[]),x.useEffect(()=>{},[he,ke,St]),x.useEffect(()=>{(async()=>{const We=ke.filter(Lt=>Lt.status==="completed"&&Lt.client_id).map(Lt=>String(Lt.client_id));if(We.length===0)return;const{data:rt,error:kt}=await ue.from("clients_with_bonus").select("id, calculated_bonus_points").in("id",We);if(kt){console.error("Ошибка при получении данных о бонусах клиентов:",kt);return}const Mt={};rt.forEach(Lt=>{Mt[String(Lt.id)]=Lt.calculated_bonus_points||0}),Ne(Mt)})()},[ke]);const lt=async de=>{Oe()},xt=async(de,We,rt)=>{W(!0);try{const kt=Ze.find(fs=>String(fs.id)===String(de));if(!kt)throw new Error("Клиент не найден");const Mt=De[de]||0;if(rt>Mt)throw new Error("Недостаточно бонусов");const Lt=String(de),xn=fs=>!!fs&&/^[0-9a-fA-F-]{36}$/.test(fs),Ea={user_id:Lt,type:"spend",value:Number(rt),created_at:new Date().toISOString(),comment:`Списано админом, запись ${We}`};xn(We)&&(Ea.appointment_id=String(We)),console.log("[DEBUG] loyalty_transactions payload:",Ea);const{error:Xn}=await ue.from("loyalty_transactions").insert(Ea);if(Xn){console.error("[ERROR] loyalty_transactions insert:",Xn,Ea),Ae({title:"Ошибка",description:`${Xn.message||"Bad Request"}
${Xn.details||""}
${JSON.stringify(Ea)}`,variant:"destructive",duration:1e4}),W(!1);return}await ue.from("appointments").update({bonuses_spent:rt}).eq("id",String(We)),Ae({title:"Бонусы списаны",description:`Списано ${rt} бонусов`}),ct(),await lt(String(kt.id)),he&&String(he.id)===String(We)&&_e({...he,bonuses_spent:(he.bonuses_spent||0)+rt})}catch(kt){Ae({title:"Ошибка",description:kt instanceof Error?kt.message:String(kt),variant:"destructive"})}finally{W(!1)}};x.useEffect(()=>{he?(async()=>{try{I(!0);const{data:We,error:rt}=await ue.from("loyalty_transactions").select("*").eq("appointment_id",String(he.id)).order("created_at",{ascending:!1});if(rt)throw rt;q(We||[])}catch(We){console.error("Ошибка при загрузке транзакций:",We),q([])}finally{I(!1)}})():q([])},[he,ue,q,I]);const at=async(de,We)=>{we(de.id);try{await rs.applySubscription({appointmentId:de.id,subscriptionId:We.id}),Ae({title:"Абонемент применён",description:`Абонемент «${We.program.name}» использован для записи №${de.appointment_number}`,variant:"default"}),await Oe(),he&&he.id===de.id&&_e({...he,abonement_used_id:We.id})}catch(rt){console.error("Ошибка при применении абонемента:",rt);let kt="Не удалось применить абонемент";rt instanceof Error&&(kt=rt.message),Ae({title:"Ошибка",description:kt,variant:"destructive"})}finally{we(null)}},vt=de=>{var Mt;let We=de;const rt=c!=="all"?c:St.length===1?St[0].id:void 0,kt=(Mt=St.find(Lt=>String(Lt.id)===String(rt)))==null?void 0:Mt.full_name;k({selectedDate:e,specialistId:rt,specialistName:kt,selectedTime:We}),j(!0)},Ut=()=>{j(!1)},Wr=async de=>{await Ye({client_id:de.clientId,client_name:de.clientName,client_phone:de.clientPhone,client_email:de.clientEmail,service_id:de.serviceId,specialist_id:de.specialistId,date:de.date,time:de.time}),await Oe({specialistId:c!=="all"?c:void 0,fromDate:Me(e||new Date,"yyyy-MM-dd"),toDate:Me(e||new Date,"yyyy-MM-dd")}),j(!1)},Gr=de=>{_e(de),b(!0)},Un=()=>{b(!1),_e(null),f(!1)};x.useEffect(()=>{d&&he&&op().then(de=>{X(de)})},[d,he]),x.useEffect(()=>{if(!e)return;(async()=>{const We=V(e);if(!We.length){Pe({});return}const rt=We.map(xn=>String(xn.id)),{data:kt,error:Mt}=await ue.from("loyalty_transactions").select("appointment_id, value, type").in("appointment_id",rt);if(Mt){Pe({});return}const Lt={};for(const xn of kt)xn.type==="accrual"&&(Lt[xn.appointment_id]=(Lt[xn.appointment_id]||0)+(xn.value||0));Pe(Lt)})()},[e,ke]),x.useEffect(()=>{if(!ke||ke.length===0)return;const de=Array.from(new Set(ke.map(rt=>String(rt.client_id))));(async()=>{const rt={},{data:kt,error:Mt}=await ue.from("clients_with_bonus").select("id, calculated_bonus_points").in("id",de);if(Mt){console.error("Ошибка при получении бонусов клиентов:",Mt);return}kt.forEach(Lt=>{rt[String(Lt.id)]=Lt.calculated_bonus_points||0}),Ne(rt)})()},[ke,ue]);const Ua=x.useMemo(()=>K.find(de=>de.type==="bonus"&&de.is_active),[K]),za=x.useMemo(()=>Ua&&Ua.rules&&typeof Ua.rules.maxDiscountPercent=="number"?Ua.rules.maxDiscountPercent:50,[Ua]),$i=x.useMemo(()=>!L.open||!L.appointmentId?0:J.reduce((de,We)=>de+Number(We.value||0),0),[L.open,L.appointmentId,J]),vo=x.useMemo(()=>{if(!L.clientId||!L.appointmentId)return 0;const de=Ze.find(Xn=>String(Xn.id)===String(L.clientId)),We=ke.find(Xn=>String(Xn.id)===String(L.appointmentId));if(!de||!We)return 0;const kt=il(We,M,K,be).finalPrice||We.price||0,Mt=$i,Lt=Math.floor(kt*(za/100)),xn=Math.max(0,Lt-Mt),Ea=De[String(de.id)]||0;return Math.min(Ea,xn)},[L.clientId,L.appointmentId,Ze,ke,M,K,be,De,za,$i]),Bc=(de,We)=>{k(rt=>({...rt,specialistId:de,specialistName:We}))};x.useEffect(()=>{L.open&&L.appointmentId&&(async()=>{try{I(!0);const{data:We,error:rt}=await ue.from("loyalty_transactions").select("*").eq("appointment_id",String(L.appointmentId)).order("created_at",{ascending:!1});if(rt)throw rt;Y(We||[])}catch(We){console.error("Ошибка при загрузке транзакций (adminBonusModal):",We),Y([])}finally{I(!1)}})()},[L.open,L.appointmentId,ue]);const ii=x.useCallback(async de=>{try{const{data:We,error:rt}=await ue.from("loyalty_transactions").select("*").eq("appointment_id",String(de)).eq("type","spend");if(rt)throw rt;Y(We||[])}catch(We){console.error("Ошибка при повторной загрузке транзакций для модалки:",We),Y([])}},[ue]);function uh(de){return ee.filter(We=>We.appointment_id===de&&We.type==="spend").reduce((We,rt)=>We+Math.abs(Number(rt.value)||0),0)}x.useEffect(()=>{Se&&ge(Se)},[Se,ge]);const{whatsapp:dh,telegram:fh}=Sf();dh==null||dh.is_active,fh==null||fh.is_active,console.log("[DEBUG] notificationSettings:",ae),x.useEffect(()=>{var de;he&&he.id!==Dt?(Pt(!1),pe(!1),yt(he.price||""),er(((de=he.service)==null?void 0:de.duration)||""),ar(he.id)):he||(Pt(!1),pe(!1),ar(null))},[he,Dt]);const Wy=()=>{he&&(yt(he.price),Pt(!0),pe(!1))},iE=()=>{he&&he.service&&(er(he.service.duration),pe(!0),Pt(!1))},Vy=()=>{var de;Pt(!1),pe(!1),he&&(yt(he.price),er(((de=he.service)==null?void 0:de.duration)||""))},oE=(de,We)=>{if(!de||!de.includes(":"))return"";const[rt,kt]=de.split(":").map(Number);if(isNaN(rt)||isNaN(kt))return"";const Mt=new Date;Mt.setHours(rt,kt+We,0,0);const Lt=Mt.getHours().toString().padStart(2,"0"),xn=Mt.getMinutes().toString().padStart(2,"0");return`${Lt}:${xn}`},hh=async()=>{if(!he){Ae({title:"Ошибка",description:"Запись не выбрана.",variant:"destructive"});return}const de=typeof ze=="string"?parseFloat(ze):ze,We=typeof Rt=="string"?parseInt(Rt,10):Rt;if(Ke&&(isNaN(de)||de<0)){Ae({title:"Ошибка",description:"Некорректная цена.",variant:"destructive"});return}if(Ht&&(isNaN(We)||We<=0)){Ae({title:"Ошибка",description:"Некорректная длительность.",variant:"destructive"});return}const rt={};if(Ke&&(rt.price=de),Ht)if(he.start_time)rt.end_time=oE(he.start_time,We),rt.duration=We;else{Ae({title:"Ошибка",description:"Не удалось рассчитать время окончания: не указано время начала.",variant:"destructive"});return}if(Object.keys(rt).length===0){Ae({title:"Информация",description:"Нет изменений для сохранения.",variant:"default"}),Pt(!1),pe(!1);return}try{const kt=await rs.updateAppointmentPriceAndDuration(he.id,rt);kt?(Ae({title:"Успешно",description:"Данные записи обновлены."}),_e(kt),Pt(!1),pe(!1),await Oe()):(Ae({title:"Внимание",description:"Запись обновлена, но не удалось получить актуальные данные. Обновите список.",variant:"destructive"}),Pt(!1),pe(!1))}catch(kt){console.error("Ошибка при обновлении цены/длительности:",kt);let Mt="Не удалось обновить данные записи.";kt instanceof Error&&(Mt=kt.message),Ae({title:"Ошибка обновления",description:Mt,variant:"destructive"})}};function il(de,We,rt,kt){var Fi,xe,Ve;if(console.log("[DISPLAY_DATA DEBUG] Входящие данные:",{appointment:JSON.stringify(de),hasSubscriptions:We?We.length:0,hasPrograms:rt?rt.length:0}),de.abonement_used_id){const ut=We.find(Bt=>Bt.id===de.abonement_used_id),It=rt.find(Bt=>Bt.id===(ut==null?void 0:ut.program_id));return console.log("[DISPLAY_DATA DEBUG] Используется абонемент:",{abonementId:de.abonement_used_id,foundSub:!!ut,foundProgram:!!It,programName:It==null?void 0:It.name}),{finalPrice:0,discountPercent:100,loyaltyProgramName:(It==null?void 0:It.name)||"Абонемент"}}let Mt=typeof de.discount_percent=="number"?de.discount_percent:0,Lt=de.loyalty_program_name||"-";if(console.log("[DISPLAY_DATA DEBUG] Начальные значения:",{appliedDiscountPercent:Mt,appliedLoyaltyProgramName:Lt}),(Mt===0||!Mt)&&de.service_id){if(de.client_id){const ut=kt[String(de.client_id)]||[],It=de.date?new Date(de.date):null;console.log("[DISPLAY_DATA DEBUG] Проверка индивидуальных скидок:",{clientId:de.client_id,hasDiscounts:ut.length,procedureDate:It});const Bt=ut.find(gr=>{const nr=gr.valid_to&&typeof gr.valid_to=="string"?new Date(gr.valid_to):null,Xr=nr&&It&&nr>=It&&gr.used_count<gr.max_usages;return console.log("[DISPLAY_DATA DEBUG] Проверка скидки:",{discountId:gr.id,validTo:nr,isValid:Xr,usedCount:gr.used_count,maxUsages:gr.max_usages}),Xr});Bt&&(Mt=Bt.discount_percent,Lt="Индивидуальная скидка",console.log("[DISPLAY_DATA DEBUG] Применена индивидуальная скидка:",{discountId:Bt.id,discountPercent:Bt.discount_percent}))}if(Mt===0&&rt){const ut=String(de.service_id),It=de.date?new Date(de.date):new Date,Bt=rt.filter(Xr=>Xr.type==="discount"&&Xr.is_active&&(!Xr.start_date||new Date(Xr.start_date)<=It)&&(!Xr.end_date||new Date(Xr.end_date)>=It));console.log("[DISPLAY_DATA DEBUG] Поиск программы скидок:",{serviceId:ut,today:It.toISOString(),foundDiscountPrograms:Bt.length,allProgramsCount:rt.length});const gr=Bt.filter(Xr=>{const xo=Xr.rules||{},vd=Array.isArray(xo.services)?xo.services.map(String):[],Xy=vd.length===0||vd.includes(ut);return console.log("[DISPLAY_DATA DEBUG] Проверка применимости программы:",{programId:Xr.id,programName:Xr.name,hasServices:vd.length,isApplicable:Xy,services:JSON.stringify(vd)}),Xy}),nr=gr.find(Xr=>Xr.name==="Весна");if(nr&&console.log("[ВЕСНА ПРОГРАММА]",{id:nr.id,name:nr.name,rules:nr.rules,discount:(Fi=nr.rules)==null?void 0:Fi.discount,bonus_percent:(xe=nr.rules)==null?void 0:xe.bonus_percent,raw:JSON.stringify(nr)}),gr.length>0){const Xr=gr.reduce((xo,vd)=>{var PI,OI;const Xy=((PI=vd.rules)==null?void 0:PI.discount)||0,ose=((OI=xo.rules)==null?void 0:OI.discount)||0;return Xy>ose?vd:xo});Mt=((Ve=Xr.rules)==null?void 0:Ve.discount)||0,Lt=Xr.name||"Скидка",console.log("[DISPLAY_DATA DEBUG] Выбрана лучшая программа скидок:",{programId:Xr.id,programName:Xr.name,discountPercent:Mt})}}}const xn=typeof de.price=="number"?de.price:0,Ea=xn*(1-(Mt||0)/100),Xn=Number(Ea.toFixed(2));console.log("[DISPLAY_DATA DEBUG] Итоговые значения:",{basePrice:xn,rawPrice:de.price,priceType:typeof de.price,appliedDiscountPercent:Mt,calculationFormula:`${xn} * (1 - ${Mt} / 100)`,calculatedFinalPrice:Ea,roundedFinalPrice:Xn});let fs=0;if(rt&&de.service_id){const ut=String(de.service_id),It=de.date?new Date(de.date):new Date,gr=rt.filter(nr=>nr.type==="bonus"&&nr.is_active&&(!nr.start_date||new Date(nr.start_date)<=It)&&(!nr.end_date||new Date(nr.end_date)>=It)).find(nr=>{const Xr=nr.rules||{},xo=Array.isArray(Xr.services)?Xr.services.map(String):[];return xo.length===0||xo.includes(ut)});gr&&gr.rules&&typeof gr.rules.bonus_percent=="number"&&(fs=gr.rules.bonus_percent)}const gd=`${Xn} * ${fs} / 100`;return console.log("[DISPLAY_DATA DEBUG] Формула бонусов:",gd,"Процент:",fs),{finalPrice:Xn,roundedFinalPrice:Xn,discountPercent:Mt,loyaltyProgramName:Lt,bonusCalculationFormula:gd,bonusPercent:fs}}const Hy=({appointment:de,subscriptions:We,allPrograms:rt,discountsByClientId:kt,bonusBalancesByClientId:Mt,maxDiscountPercentFromSettings:Lt,onOpenAdminBonusModal:xn})=>{var gd;const Ea=il(de,We,rt,kt),Xn=de.bonuses_spent||0,fs=Math.max(0,Ea.finalPrice-Xn);if(de.abonement_used_id){const Fi=We.find(Ve=>String(Ve.id)===String(de.abonement_used_id)),xe=((gd=Fi==null?void 0:Fi.program)==null?void 0:gd.name)||"Абонемент";return i.jsxs("div",{className:"flex flex-col items-end",children:[i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-violet-100 text-violet-800",children:["Посещение по абонементу",xe?`: ${xe}`:""]}),i.jsxs("span",{className:"text-sm font-semibold text-gray-700 mt-1",children:["К оплате: ",fs.toFixed(2)," ₽"]})]})}if(de.status==="completed"&&Mt[de.client_id]>0){const Fi=Ze.find(It=>String(It.id)===String(de.client_id)),xe=de.price||0,Ve=Mt[de.client_id]||0,ut=Math.min(Ve,Math.floor(xe*(Lt/100))-Xn);return i.jsxs("div",{className:"flex flex-col items-end",children:[i.jsx(ne,{size:"sm",className:"bg-yellow-500 hover:bg-yellow-600 text-white",onClick:It=>{It.stopPropagation(),Fi&&xn(String(Fi.id),String(de.id),ut)},disabled:ut<=0,children:"Списать бонусы"}),i.jsxs("span",{className:"text-sm font-semibold text-gray-700 mt-1",children:["К оплате: ",fs.toFixed(2)," ₽"]})]})}return i.jsx("div",{className:"text-right",children:i.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["К оплате: ",fs.toFixed(2)," ₽"]})})};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[i.jsx("h1",{className:"text-3xl font-bold mb-8 beauty-gradient-text",children:"Управление записями"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(ne,{onClick:()=>vt(void 0),className:"flex items-center gap-2 bg-beauty-600 hover:bg-beauty-700",children:[i.jsx(ls,{className:"h-4 w-4 text-primary"}),"Создать запись"]}),i.jsx(fa,{value:a,onValueChange:de=>s(de),className:"w-auto",children:i.jsxs(ta,{children:[i.jsx(Tt,{value:"calendar",children:"Календарь"}),i.jsx(Tt,{value:"list",children:"Список"})]})}),i.jsxs(Tr,{value:o,onValueChange:l,children:[i.jsx(wr,{className:"w-[180px]",children:i.jsx(Ar,{placeholder:"Статус"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"all",children:"Все статусы"}),i.jsx(_t,{value:"pending",children:"Ожидающие"}),i.jsx(_t,{value:"confirmed",children:"Подтвержденные"}),i.jsx(_t,{value:"completed",children:"Выполненные"}),i.jsx(_t,{value:"cancelled",children:"Отмененные"})]})]}),i.jsxs(Tr,{value:c,onValueChange:u,children:[i.jsx(wr,{className:"w-[180px]",children:i.jsx(Ar,{placeholder:"Все мастера"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"all",children:"Все мастера"}),St.filter(de=>!Et||de.studio_id===Et.id).map(de=>i.jsx(_t,{value:String(de.id),children:de.full_name||de.name},de.id))]})]})]})]}),i.jsx("div",{className:"relative",children:i.jsx($e,{placeholder:"Поиск по имени, телефону или email...",value:r,onChange:de=>n(de.target.value),className:"max-w-sm"})}),a==="calendar"?i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(qe,{className:"md:col-span-1 w-full md:sticky md:top-20 md:self-start",children:[" ",i.jsx(Ge,{className:"w-full flex justify-center",children:i.jsx("div",{className:"w-full max-w-[420px] p-4",children:i.jsx(Rc,{mode:"single",selected:e,onSelect:t,className:"w-full p-0 rounded-md border-0 [&_button[name='previous-month']]:bg-beauty-100 [&_button[name='previous-month']]:text-beauty-600 [&_button[name='next-month']]:bg-beauty-100 [&_button[name='next-month']]:text-beauty-600 [&_button[name='previous-month']:hover]:bg-beauty-200 [&_button[name='next-month']:hover]:bg-beauty-200 [&_td>button]:rounded-md [&_button[disabled]]:opacity-50 [&_button[disabled]]:pointer-events-none",classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4 w-full",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-lg font-semibold text-gray-800",nav:"space-x-1 flex items-center",nav_button:"h-9 w-9 bg-transparent p-0 opacity-70 hover:opacity-100 hover:bg-beauty-50 rounded-md",nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex justify-around",head_cell:"text-gray-500 rounded-md w-10 font-medium text-lg",row:"flex w-full mt-2 justify-around",cell:"h-10 w-10 text-center text-sm p-0 relative [&:has([aria-selected])]:bg-beauty-50 first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:"h-10 w-10 p-0 font-normal aria-selected:opacity-100 rounded-md hover:bg-beauty-100 transition-colors",day_selected:"bg-beauty-500 text-white hover:bg-beauty-600 focus:bg-beauty-500 focus:text-white rounded-md",day_today:"bg-beauty-50 text-beauty-600 font-semibold rounded-md",day_outside:"text-gray-300 opacity-50",day_disabled:"text-gray-300 opacity-50",day_range_middle:"aria-selected:bg-beauty-100 aria-selected:text-beauty-700",day_hidden:"invisible"},locale:Da})})})]}),i.jsx(qe,{className:"md:col-span-2",children:i.jsx(Gre,{className:"md:h-[calc(100vh-180px)]",children:i.jsxs(Ge,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h2",{className:"text-xl font-semibold",children:["Записи на ",e?qr(Me(e,"yyyy-MM-dd")):"сегодня"]}),(()=>{if(!e)return null;const We=V(e).length;let rt="";return We===1?rt="1 запись":We>=2&&We<=4?rt=`${We} записи`:rt=`${We} записей`,We>0?i.jsx("span",{className:"text-sm text-gray-500",children:rt}):null})()]}),e&&i.jsx("div",{className:"space-y-4",children:V(e).length>0?V(e).map(de=>{var We;return i.jsxs("div",{className:"border rounded-lg hover:border-beauty-200 transition-colors cursor-pointer",onClick:()=>{_e(de),f(!0)},children:[i.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center",children:[i.jsx("div",{className:"mr-3 flex-shrink-0",children:i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-semibold",children:de.client_name?de.client_name.charAt(0).toUpperCase():"-"})}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h4",{className:"font-medium",children:de.client_name}),i.jsx("p",{className:"text-sm text-gray-500",children:de.client_phone})]}),i.jsx("div",{className:"ml-auto flex-shrink-0",children:i.jsx($t,{variant:re(de.status),children:se(de.status)})})]}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center text-sm gap-4 mb-2",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Si,{className:"h-4 w-4"}),de.start_time?de.start_time.slice(0,5):"--:--"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(gf,{className:"h-4 w-4"}),((We=Ie.find(rt=>String(rt.id)===String(de.service_id)))==null?void 0:We.name)||"Н/Д"]})]}),i.jsx("div",{className:"flex items-center text-sm gap-4 mb-2",children:i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Ro,{className:"h-4 w-4"}),ce(de.specialist)]})}),de.notes&&i.jsx("div",{className:"text-sm text-muted-foreground italic mt-2 mb-3",children:de.notes}),(()=>{var Mt;const rt=M.filter(Lt=>Lt.user_id===de.client_id&&Lt.subscription_visits_left>0),kt=rt.find(Lt=>Array.isArray(Lt.services)&&Lt.services.includes(String(de.service_id)));return console.log("[ABONEMENT BUTTON DEBUG]",{appointmentId:de.id,abonement_used_id:de.abonement_used_id,matchingSubId:kt==null?void 0:kt.id,clientSubscriptions:rt.map(Lt=>Lt.id),subscription_visits_left:kt==null?void 0:kt.subscription_visits_left,appointment:de}),kt&&!de.abonement_used_id?i.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:i.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[i.jsxs("p",{className:"text-sm font-medium text-green-800",children:["Абонемент: «",((Mt=kt.program)==null?void 0:Mt.name)||"Абонемент","»"]}),i.jsxs("p",{className:"text-xs text-green-700",children:["Осталось визитов: ",kt.subscription_visits_left]}),i.jsx(ne,{size:"sm",className:"mt-2 bg-green-600 hover:bg-green-700 text-white",onClick:Lt=>{Lt.stopPropagation(),at(de,kt)},disabled:z===de.id,children:z===de.id?"Применение...":"Использовать абонемент"})]})}):null})(),i.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-gray-400 mr-2",children:de.appointment_number?`№${de.appointment_number}`:"-"}),(()=>{const rt=Ze.find(Mt=>String(Mt.id)===String(de.client_id)),kt=(rt==null?void 0:rt.calculated_bonus_points)??0;return kt>0?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[kt," бонусов"]}):null})()]}),i.jsx(Hy,{appointment:de,subscriptions:M,allPrograms:K,discountsByClientId:be,bonusBalancesByClientId:De,maxDiscountPercentFromSettings:za,onOpenAdminBonusModal:(rt,kt,Mt)=>{H({open:!0,clientId:rt,appointmentId:kt,max:Mt})}})]})]})]},de.id)}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(Qa,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),i.jsx("p",{children:"Нет записей на выбранную дату"})]})})]})})})]}):i.jsx(qe,{children:i.jsx(Ge,{className:"p-6",children:i.jsxs(ks,{children:[i.jsx(Ts,{children:i.jsxs(Lr,{children:[i.jsx(pt,{children:"Номер"}),i.jsx(pt,{children:"Клиент"}),i.jsx(pt,{children:"Услуга"}),i.jsx(pt,{children:"Дата"}),i.jsx(pt,{children:"Время"}),i.jsx(pt,{children:"Мастер"}),i.jsx(pt,{children:"Статус"})]})}),i.jsx(As,{children:oe.length>0?oe.slice(0,Q).map(de=>{var We;return i.jsxs(Lr,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>{_e(de),f(!0)},children:[i.jsx(dt,{className:"font-medium",children:de.appointment_number?`№${de.appointment_number}`:"-"}),i.jsxs(dt,{className:"font-medium",children:[i.jsx("div",{children:i.jsx("span",{children:de.client_name})}),i.jsx("div",{className:"text-xs text-gray-500",children:de.client_phone})]}),i.jsx(dt,{children:((We=Ie.find(rt=>String(rt.id)===String(de.service_id)))==null?void 0:We.name)||"Н/Д"}),i.jsx(dt,{children:qr(de.date)}),i.jsx(dt,{children:de.start_time?de.start_time.slice(0,5):"--:--"}),i.jsx(dt,{children:ce(de.specialist)}),i.jsx(dt,{children:i.jsx($t,{variant:re(de.status),children:se(de.status)})})]},de.id)}):i.jsx(Lr,{children:i.jsx(dt,{colSpan:7,className:"text-center h-24",children:"Нет записей, соответствующих фильтрам"})})})]})})}),a==="list"&&oe.length>Q&&i.jsx("div",{className:"flex justify-center mt-4",children:i.jsx(ne,{onClick:()=>ve(de=>de+20),children:"Показать ещё"})}),i.jsx(qt,{open:d,onOpenChange:f,children:i.jsxs(Wt,{className:"sm:max-w-md bg-white",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Детали записи"}),i.jsx(fr,{children:"Информация о записи клиента"})]}),he&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("p",{className:"text-xs text-gray-500",children:"Клиент"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Статус"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-3 flex-shrink-0",children:(pd=he.client)!=null&&pd.avatar_url?i.jsx("img",{src:he.client.avatar_url,alt:he.client_name,className:"w-10 h-10 rounded-full object-cover"}):i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-semibold",children:he.client_name?he.client_name.charAt(0).toUpperCase():"-"})}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h4",{className:"font-semibold text-base mb-0.5",children:he.client_name}),i.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-0.5",children:[i.jsx(Mw,{size:14,className:"mr-1.5"})," ",he.client_phone]}),he.client_email&&i.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[i.jsx(Sv,{size:14,className:"mr-1.5"})," ",he.client_email]})]}),i.jsx("div",{className:"ml-auto flex-shrink-0",children:i.jsx($t,{variant:re(he.status),children:se(he.status)})})]})]}),i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Услуга"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h4",{className:"font-semibold text-base",children:((qy=Ie.find(de=>String(de.id)===String(he.service_id)))==null?void 0:qy.name)||"Не указана"}),i.jsxs("p",{className:"font-semibold text-base",children:[he.price," ₽"]})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Si,{size:14,className:"mr-1.5 text-gray-500"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Длительность:"})]}),Ht?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx($e,{type:"number",value:Rt,onChange:de=>er(de.target.value),className:"w-16 h-7 text-sm px-2 py-1",min:5,max:480,step:5}),i.jsx("span",{className:"text-sm mr-1",children:"мин."}),i.jsx(ne,{size:"sm",variant:"default",onClick:hh,className:"h-7 px-2 py-0 text-xs",children:"Сохранить"}),i.jsx(ne,{size:"sm",variant:"outline",onClick:Vy,className:"h-7 px-2 py-0 text-xs",children:"Отмена"})]}):i.jsxs("div",{className:"flex items-center",children:[i.jsxs("p",{className:"text-gray-700 font-medium text-sm",children:[he.duration||((b0=he.service)==null?void 0:b0.duration)||0," мин."]}),i.jsx(ne,{variant:"ghost",size:"icon",onClick:iE,className:"h-6 w-6 ml-1",children:i.jsx(Dw,{size:13})})]})]})]}),i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(lj,{size:16,className:"mr-2 text-gray-500"}),i.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Стоимость и скидки"})]}),(()=>{const{finalPrice:de,discountPercent:We,loyaltyProgramName:rt}=il(he,M,K,be);return he.price,uh(he.id),i.jsx(UXe,{discountPercent:We})})()]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("p",{className:"text-gray-500",children:"Базовая цена:"}),Ke?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx($e,{type:"number",value:ze,onChange:de=>yt(de.target.value),className:"w-16 h-7 text-sm px-2 py-1",min:"0"}),i.jsx("span",{className:"text-sm mr-1",children:"₽"}),i.jsx(ne,{size:"sm",variant:"default",onClick:hh,className:"h-7 px-2 py-0 text-xs",children:"Сохранить"}),i.jsx(ne,{size:"sm",variant:"outline",onClick:Vy,className:"h-7 px-2 py-0 text-xs",children:"Отмена"})]}):i.jsxs("div",{className:"flex items-center",children:[i.jsxs("p",{className:"text-gray-700",children:[ze||he.price," ₽"]})," ",i.jsx(ne,{variant:"ghost",size:"icon",onClick:Wy,className:"h-6 w-6 ml-1",children:i.jsx(Dw,{size:13})})]})]}),(()=>{const{finalPrice:de,discountPercent:We,loyaltyProgramName:rt}=il(he,M,K,be),Mt=(he.price||0)-de,Lt=uh(he.id);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("p",{className:"text-gray-500",children:"% Скидка:"}),We>0?i.jsxs("p",{className:"text-red-600",children:["– ",Mt.toFixed(2)," ₽ (",We,"%)"]}):i.jsx("p",{className:"text-gray-600",children:"0%"})]}),Lt>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("p",{className:"text-gray-500 flex items-center",children:[i.jsx(Kp,{size:14,className:"mr-1.5 text-yellow-600"})," Оплачено бонусами:"]}),i.jsxs("p",{className:"text-yellow-700",children:["– ",Lt," ₽"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("p",{className:"text-gray-500",children:"Программа лояльности:"}),i.jsx("p",{className:"text-gray-700",children:rt})]})]})})(),i.jsx("hr",{className:"my-2 border-gray-200"}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("p",{className:"font-semibold text-gray-700",children:"Итого:"}),i.jsxs("p",{className:"font-semibold text-base text-gray-900",children:[(()=>{const{finalPrice:de}=il(he,M,K,be),We=uh(he.id);return Math.max(0,de-We).toFixed(2)})()," ₽"]})]})]})]}),i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Дата"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Qa,{size:16,className:"mr-2 text-gray-500"}),i.jsxs("p",{className:"font-medium text-sm",children:[qr(he.date)," г."]})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Время"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Si,{size:16,className:"mr-2 text-gray-500"}),i.jsx("p",{className:"font-medium text-sm",children:he.start_time?he.start_time.slice(0,5):"--:--"})]})]})]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Мастер"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-3 flex-shrink-0",children:(Gy=he.specialist)!=null&&Gy.avatar_url?i.jsx("img",{src:he.specialist.avatar_url,alt:ce(he.specialist),className:"w-10 h-10 rounded-full object-cover"}):i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-semibold",children:ce(he.specialist)?ce(he.specialist).charAt(0).toUpperCase():"-"})}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h4",{className:"font-semibold text-base mb-0.5",children:ce(he.specialist)}),((Ky=he.specialist)==null?void 0:Ky.specialization)&&i.jsx("p",{className:"text-xs text-gray-500",children:he.specialist.specialization})]})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[he.status==="pending"&&i.jsxs(ne,{className:"flex items-center gap-1",onClick:()=>{f(!1),p(!0)},children:[i.jsx(Rw,{className:"h-4 w-4"}),"Подтвердить"]}),(he.status==="pending"||he.status==="confirmed")&&i.jsxs(i.Fragment,{children:[i.jsxs(ne,{variant:"outline",className:"flex items-center gap-1",onClick:()=>{Gr(he)},children:[i.jsx(wfe,{className:"h-4 w-4"}),"Перенести"]}),i.jsxs(ne,{variant:"outline",className:"flex items-center gap-1 text-red-600 border-red-100 hover:bg-red-50",onClick:()=>{f(!1),m(!0)},children:[i.jsx(bfe,{className:"h-4 w-4"}),"Отменить"]})]}),he.status==="confirmed"&&i.jsxs(ne,{className:"flex items-center gap-1 bg-green-600 hover:bg-green-700",onClick:()=>{f(!1),w(!0)},children:[i.jsx(Rw,{className:"h-4 w-4"}),"Выполнено"]})]})]})]})}),i.jsx(Mg,{open:h,onOpenChange:p,children:i.jsxs(_m,{children:[i.jsxs(Sm,{children:[i.jsx(Em,{children:"Подтверждение записи"}),i.jsxs(Nm,{children:["Вы уверены, что хотите подтвердить запись клиента",he&&` ${he.client_name}`,"?"]})]}),i.jsxs(jm,{children:[i.jsx(km,{children:"Отмена"}),i.jsx(Cm,{className:"bg-beauty-600 hover:bg-beauty-700",onClick:fe,children:"Подтвердить"})]})]})}),i.jsx(Mg,{open:v,onOpenChange:m,children:i.jsxs(_m,{children:[i.jsxs(Sm,{children:[i.jsx(Em,{children:"Отмена записи"}),i.jsxs(Nm,{children:["Вы уверены, что хотите отменить запись клиента",he&&` ${he.client_name}`,"? Это действие нельзя отменить."]})]}),i.jsxs(jm,{children:[i.jsx(km,{children:"Нет"}),i.jsx(Cm,{className:"bg-red-600 hover:bg-red-700",onClick:Ce,children:"Да, отменить"})]})]})}),i.jsx(Mg,{open:y,onOpenChange:w,children:i.jsxs(_m,{children:[i.jsxs(Sm,{children:[i.jsx(Em,{children:"Завершение записи"}),i.jsxs(Nm,{children:["Вы хотите отметить запись клиента",he&&` ${he.client_name}`," как выполненную?"]})]}),i.jsxs(jm,{children:[i.jsx(km,{children:"Отмена"}),i.jsx(Cm,{className:"bg-green-600 hover:bg-green-700",onClick:Fe,children:"Завершить"})]})]})}),i.jsx(qt,{open:g,onOpenChange:b,children:i.jsxs(Wt,{className:"sm:max-w-[500px]",children:[" ",he&&i.jsx(xYe,{open:g,onClose:Un,selectedDate:O0(he.date),selectedTime:he.start_time?he.start_time.slice(0,5):void 0,specialistId:he.specialist_id,specialistName:he.specialist_name,existingAppointments:ke,onSave:Ee,currentAppointmentInfo:{clientId:he.client_id,clientName:he.client_name,currentDate:qr(he.date),currentTime:he.start_time?he.start_time.slice(0,5):"--:--"}})]})}),i.jsx(qt,{open:_,onOpenChange:S,children:i.jsxs(Wt,{className:"max-w-3xl rounded-xl p-8",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Создание новой записи"}),i.jsx(fr,{children:"Введите данные для создания новой записи клиента"})]}),i.jsxs(Are,{value:A,onValueChange:Qe,className:"mb-4 flex gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(DO,{value:"new",id:"new-client"}),i.jsx("label",{htmlFor:"new-client",children:"Новый клиент"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(DO,{value:"existing",id:"existing-client"}),i.jsx("label",{htmlFor:"existing-client",children:"Из существующих"})]})]}),A==="existing"?i.jsxs("div",{className:"space-y-4 py-3",children:[i.jsx($e,{placeholder:"Поиск по ФИО, телефону или email",value:R,onChange:de=>P(de.target.value)}),i.jsxs("div",{className:"max-h-40 overflow-y-auto border rounded bg-white",children:[je.length===0&&i.jsx("div",{className:"p-2 text-muted-foreground text-sm",children:"Нет совпадений"}),je.map(de=>i.jsxs("div",{className:`p-2 cursor-pointer hover:bg-beauty-50 ${(D==null?void 0:D.id)===de.id?"bg-beauty-100":""}`,onClick:()=>Te(de),children:[i.jsx("div",{className:"font-medium",children:de.full_name}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[de.phone," ",de.email&&`• ${de.email}`]})]},de.id))]}),D&&i.jsxs("div",{className:"mt-2 space-y-1 border rounded p-2 bg-muted",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"ФИО:"})," ",D.full_name]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Телефон:"})," ",D.phone]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Email:"})," ",D.email]})]})]}):i.jsxs("div",{className:"space-y-4 py-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ro,{className:"h-4 w-4 text-muted-foreground"}),i.jsx($e,{placeholder:"ФИО клиента",value:C.client_name,onChange:de=>T({...C,client_name:de.target.value}),disabled:A==="existing"&&!!D})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Mw,{className:"h-4 w-4 text-muted-foreground"}),i.jsx($e,{placeholder:"Телефон",value:C.client_phone,onChange:de=>T({...C,client_phone:de.target.value}),disabled:A==="existing"&&!!D})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Sv,{className:"h-4 w-4 text-muted-foreground"}),i.jsx($e,{placeholder:"Email (необязательно)",value:C.client_email,onChange:de=>T({...C,client_email:de.target.value}),disabled:A==="existing"&&!!D})]})]}),i.jsx("div",{className:"space-y-6",children:i.jsx(Ore,{client:A==="existing"?D:C.client_name&&C.client_phone?{id:"",full_name:C.client_name,phone:C.client_phone,email:C.client_email,user_id:"",is_active:!0,created_at:"",updated_at:""}:void 0,onSuccess:()=>{Oe({specialistId:c!=="all"?c:void 0,fromDate:Me(e||new Date,"yyyy-MM-dd"),toDate:Me(e||new Date,"yyyy-MM-dd")}),S(!1)}})})]})}),i.jsx(BXe,{open:L.open,client:Ze.find(de=>String(de.id)===String(L.clientId))||null,appointment:ke.find(de=>String(de.id)===String(L.appointmentId))||null,maxBonus:vo,alreadySpent:$i,onSubmit:async de=>{!L.clientId||!L.appointmentId||(await xt(L.clientId,L.appointmentId,de),await ii(L.appointmentId),H(We=>({...We,open:!1})))},onClose:()=>H(de=>({...de,open:!1})),loading:O,maxDiscountPercentFromSettings:za}),E&&(()=>{const de=N.specialistId&&N.specialistId!=="all"?N.specialistId:c&&c!=="all"?c:void 0,We=St.find(Lt=>String(Lt.id)===String(de)),rt=N.specialistName||(We==null?void 0:We.full_name)||(We==null?void 0:We.name),kt=N.selectedDate||e,Mt=ke.filter(Lt=>(de?String(Lt.specialist_id)===String(de):!0)&&(kt?Ra(O0(Lt.date),kt):!1));return console.log("[AppointmentsManagement] Props for AppointmentModal:",{open:E,selectedDate:kt,specialistId:de,specialistName:rt,selectedTime:N.selectedTime,existingAppointments:Mt}),i.jsx(zM,{open:E,onClose:Ut,selectedDate:kt,specialistId:de,specialistName:rt,selectedTime:N.selectedTime,onSave:Wr,existingAppointments:Mt,onSpecialistAutoSelect:Bc})})()]})},KYe=()=>i.jsx(i.Fragment,{children:i.jsx(GYe,{})}),XYe=()=>i.jsxs("div",{className:"bg-beauty-50 border border-beauty-100 rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-beauty-800",children:"Информация о бронировании"}),i.jsxs("ul",{className:"space-y-2 text-beauty-700",children:[i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"mr-3 mt-1 text-beauty-500",children:"✓"}),i.jsx("span",{children:"Запись можно перенести не позднее чем за 24 часа"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"mr-3 mt-1 text-beauty-500",children:"✓"}),i.jsx("span",{children:"Вы получите напоминания по email и SMS"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"mr-3 mt-1 text-beauty-500",children:"✓"}),i.jsx("span",{children:"Для некоторых премиум-услуг может потребоваться предоплата 20%"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"mr-3 mt-1 text-beauty-500",children:"✓"}),i.jsx("span",{children:"Пожалуйста, приходите за 10 минут до назначенного времени"})]})]})]});var Xre={exports:{}};function YYe(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var dC=YYe(x),ZYe=oo;function JYe(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],s=Object.getOwnPropertyDescriptor(t,a);s&&s.configurable&&e[a]===void 0&&Object.defineProperty(e,a,s)}return e}function IO(){return(IO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function QYe(e,t){e.prototype=Object.create(t.prototype),JYe(e.prototype.constructor=e,t)}function eZe(e,t){if(e==null)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}function Oh(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var tZe=function(e,t,r,n,a,s,o,l){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,a,s,o,l],d=0;(c=new Error(t.replace(/%s/g,function(){return u[d++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}},PB=tZe;function OB(e,t,r){if("selectionStart"in e&&"selectionEnd"in e)e.selectionStart=t,e.selectionEnd=r;else{var n=e.createTextRange();n.collapse(!0),n.moveStart("character",t),n.moveEnd("character",r-t),n.select()}}function rZe(e){var t=0,r=0;if("selectionStart"in e&&"selectionEnd"in e)t=e.selectionStart,r=e.selectionEnd;else{var n=document.selection.createRange();n.parentElement()===e&&(t=-n.moveStart("character",-e.value.length),r=-n.moveEnd("character",-e.value.length))}return{start:t,end:r,length:r-t}}var nZe={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},aZe="_";function RB(e,t,r){var n="",a="",s=null,o=[];if(t===void 0&&(t=aZe),r==null&&(r=nZe),!e||typeof e!="string")return{maskChar:t,formatChars:r,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};var l=!1;return e.split("").forEach(function(c){l=!l&&c==="\\"||(l||!r[c]?(o.push(n.length),n.length===o.length-1&&(a+=c)):s=n.length+1,n+=c,!1)}),{maskChar:t,formatChars:r,prefix:a,mask:n,lastEditablePosition:s,permanents:o}}function Ri(e,t){return e.permanents.indexOf(t)!==-1}function Q2(e,t,r){var n=e.mask,a=e.formatChars;if(!r)return!1;if(Ri(e,t))return n[t]===r;var s=a[n[t]];return new RegExp(s).test(r)}function DB(e,t){return t.split("").every(function(r,n){return Ri(e,n)||!Q2(e,n,r)})}function ug(e,t){var r=e.maskChar,n=e.prefix;if(!r){for(;t.length>n.length&&Ri(e,t.length-1);)t=t.slice(0,t.length-1);return t.length}for(var a=n.length,s=t.length;s>=n.length;s--){var o=t[s];if(!Ri(e,s)&&Q2(e,s,o)){a=s+1;break}}return a}function Yre(e,t){return ug(e,t)===e.mask.length}function Ql(e,t){var r=e.maskChar,n=e.mask,a=e.prefix;if(!r){for((t=$O(e,"",t,0)).length<a.length&&(t=a);t.length<n.length&&Ri(e,t.length);)t+=n[t.length];return t}if(t)return $O(e,Ql(e,""),t,0);for(var s=0;s<n.length;s++)Ri(e,s)?t+=n[s]:t+=r;return t}function sZe(e,t,r,n){var a=r+n,s=e.maskChar,o=e.mask,l=e.prefix,c=t.split("");if(s)return c.map(function(d,f){return f<r||a<=f?d:Ri(e,f)?o[f]:s}).join("");for(var u=a;u<c.length;u++)Ri(e,u)&&(c[u]="");return r=Math.max(l.length,r),c.splice(r,a-r),t=c.join(""),Ql(e,t)}function $O(e,t,r,n){var a=e.mask,s=e.maskChar,o=e.prefix,l=r.split(""),c=Yre(e,t);return!s&&n>t.length&&(t+=a.slice(t.length,n)),l.every(function(u){for(;p=u,Ri(e,h=n)&&p!==a[h];){if(n>=t.length&&(t+=a[n]),d=u,f=n,s&&Ri(e,f)&&d===s)return!0;if(++n>=a.length)return!1}var d,f,h,p;return!Q2(e,n,u)&&u!==s||(n<t.length?t=s||c||n<o.length?t.slice(0,n)+u+t.slice(n+1):(t=t.slice(0,n)+u+t.slice(n),Ql(e,t)):s||(t+=u),++n<a.length)}),t}function iZe(e,t,r,n){var a=e.mask,s=e.maskChar,o=r.split(""),l=n;return o.every(function(c){for(;d=c,Ri(e,u=n)&&d!==a[u];)if(++n>=a.length)return!1;var u,d;return(Q2(e,n,c)||c===s)&&n++,n<a.length}),n-l}function oZe(e,t){for(var r=t;0<=r;--r)if(!Ri(e,r))return r;return null}function Wg(e,t){for(var r=e.mask,n=t;n<r.length;++n)if(!Ri(e,n))return n;return null}function fC(e){return e||e===0?e+"":""}function lZe(e,t,r,n,a){var s=e.mask,o=e.prefix,l=e.lastEditablePosition,c=t,u="",d=0,f=0,h=Math.min(a.start,r.start);return r.end>a.start?f=(d=iZe(e,n,u=c.slice(a.start,r.end),h))?a.length:0:c.length<n.length&&(f=n.length-c.length),c=n,f&&(f===1&&!a.length&&(h=a.start===r.start?Wg(e,r.start):oZe(e,r.start)),c=sZe(e,c,h,f)),c=$O(e,c,u,h),(h+=d)>=s.length?h=s.length:h<o.length&&!d?h=o.length:h>=o.length&&h<l&&d&&(h=Wg(e,h)),u||(u=null),{value:c=Ql(e,c),enteredString:u,selection:{start:h,end:h}}}function cZe(){var e=new RegExp("windows","i"),t=new RegExp("phone","i"),r=navigator.userAgent;return e.test(r)&&t.test(r)}function Us(e){return typeof e=="function"}function uZe(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame}function Zre(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame}function MB(e){return(Zre()?uZe():function(){return setTimeout(e,1e3/60)})(e)}function hC(e){(Zre()||clearTimeout)(e)}var dZe=function(e){function t(n){var a=e.call(this,n)||this;a.focused=!1,a.mounted=!1,a.previousSelection=null,a.selectionDeferId=null,a.saveSelectionLoopDeferId=null,a.saveSelectionLoop=function(){a.previousSelection=a.getSelection(),a.saveSelectionLoopDeferId=MB(a.saveSelectionLoop)},a.runSaveSelectionLoop=function(){a.saveSelectionLoopDeferId===null&&a.saveSelectionLoop()},a.stopSaveSelectionLoop=function(){a.saveSelectionLoopDeferId!==null&&(hC(a.saveSelectionLoopDeferId),a.saveSelectionLoopDeferId=null,a.previousSelection=null)},a.getInputDOMNode=function(){if(!a.mounted)return null;var v=ZYe.findDOMNode(Oh(Oh(a))),m=typeof window<"u"&&v instanceof window.Element;if(v&&!m)return null;if(v.nodeName!=="INPUT"&&(v=v.querySelector("input")),!v)throw new Error("react-input-mask: inputComponent doesn't contain input node");return v},a.getInputValue=function(){var v=a.getInputDOMNode();return v?v.value:null},a.setInputValue=function(v){var m=a.getInputDOMNode();m&&(a.value=v,m.value=v)},a.setCursorToEnd=function(){var v=ug(a.maskOptions,a.value),m=Wg(a.maskOptions,v);m!==null&&a.setCursorPosition(m)},a.setSelection=function(v,m,g){g===void 0&&(g={});var b=a.getInputDOMNode(),y=a.isFocused();b&&y&&(g.deferred||OB(b,v,m),a.selectionDeferId!==null&&hC(a.selectionDeferId),a.selectionDeferId=MB(function(){a.selectionDeferId=null,OB(b,v,m)}),a.previousSelection={start:v,end:m,length:Math.abs(m-v)})},a.getSelection=function(){return rZe(a.getInputDOMNode())},a.getCursorPosition=function(){return a.getSelection().start},a.setCursorPosition=function(v){a.setSelection(v,v)},a.isFocused=function(){return a.focused},a.getBeforeMaskedValueChangeConfig=function(){var v=a.maskOptions,m=v.mask,g=v.maskChar,b=v.permanents,y=v.formatChars;return{mask:m,maskChar:g,permanents:b,alwaysShowMask:!!a.props.alwaysShowMask,formatChars:y}},a.isInputAutofilled=function(v,m,g,b){var y=a.getInputDOMNode();try{if(y.matches(":-webkit-autofill"))return!0}catch{}return!a.focused||b.end<g.length&&m.end===v.length},a.onChange=function(v){var m=Oh(Oh(a)).beforePasteState,g=Oh(Oh(a)).previousSelection,b=a.props.beforeMaskedValueChange,y=a.getInputValue(),w=a.value,_=a.getSelection();a.isInputAutofilled(y,_,w,g)&&(w=Ql(a.maskOptions,""),g={start:0,end:0,length:0}),m&&(g=m.selection,w=m.value,_={start:g.start+y.length,end:g.start+y.length,length:0},y=w.slice(0,g.start)+y+w.slice(g.end),a.beforePasteState=null);var S=lZe(a.maskOptions,y,_,w,g),E=S.enteredString,j=S.selection,N=S.value;if(Us(b)){var k=b({value:N,selection:j},{value:w,selection:g},E,a.getBeforeMaskedValueChangeConfig());N=k.value,j=k.selection}a.setInputValue(N),Us(a.props.onChange)&&a.props.onChange(v),a.isWindowsPhoneBrowser?a.setSelection(j.start,j.end,{deferred:!0}):a.setSelection(j.start,j.end)},a.onFocus=function(v){var m=a.props.beforeMaskedValueChange,g=a.maskOptions,b=g.mask,y=g.prefix;if(a.focused=!0,a.mounted=!0,b){if(a.value)ug(a.maskOptions,a.value)<a.maskOptions.mask.length&&a.setCursorToEnd();else{var w=Ql(a.maskOptions,y),_=Ql(a.maskOptions,w),S=ug(a.maskOptions,_),E=Wg(a.maskOptions,S),j={start:E,end:E};if(Us(m)){var N=m({value:_,selection:j},{value:a.value,selection:null},null,a.getBeforeMaskedValueChangeConfig());_=N.value,j=N.selection}var k=_!==a.getInputValue();k&&a.setInputValue(_),k&&Us(a.props.onChange)&&a.props.onChange(v),a.setSelection(j.start,j.end)}a.runSaveSelectionLoop()}Us(a.props.onFocus)&&a.props.onFocus(v)},a.onBlur=function(v){var m=a.props.beforeMaskedValueChange,g=a.maskOptions.mask;if(a.stopSaveSelectionLoop(),a.focused=!1,g&&!a.props.alwaysShowMask&&DB(a.maskOptions,a.value)){var b="";Us(m)&&(b=m({value:b,selection:null},{value:a.value,selection:a.previousSelection},null,a.getBeforeMaskedValueChangeConfig()).value);var y=b!==a.getInputValue();y&&a.setInputValue(b),y&&Us(a.props.onChange)&&a.props.onChange(v)}Us(a.props.onBlur)&&a.props.onBlur(v)},a.onMouseDown=function(v){if(!a.focused&&document.addEventListener){a.mouseDownX=v.clientX,a.mouseDownY=v.clientY,a.mouseDownTime=new Date().getTime();var m=function g(b){if(document.removeEventListener("mouseup",g),a.focused){var y=Math.abs(b.clientX-a.mouseDownX),w=Math.abs(b.clientY-a.mouseDownY),_=Math.max(y,w),S=new Date().getTime()-a.mouseDownTime;(_<=10&&S<=200||_<=5&&S<=300)&&a.setCursorToEnd()}};document.addEventListener("mouseup",m)}Us(a.props.onMouseDown)&&a.props.onMouseDown(v)},a.onPaste=function(v){Us(a.props.onPaste)&&a.props.onPaste(v),v.defaultPrevented||(a.beforePasteState={value:a.getInputValue(),selection:a.getSelection()},a.setInputValue(""))},a.handleRef=function(v){a.props.children==null&&Us(a.props.inputRef)&&a.props.inputRef(v)};var s=n.mask,o=n.maskChar,l=n.formatChars,c=n.alwaysShowMask,u=n.beforeMaskedValueChange,d=n.defaultValue,f=n.value;a.maskOptions=RB(s,o,l),d==null&&(d=""),f==null&&(f=d);var h=fC(f);if(a.maskOptions.mask&&(c||h)&&(h=Ql(a.maskOptions,h),Us(u))){var p=n.value;n.value==null&&(p=d),h=u({value:h,selection:null},{value:p=fC(p),selection:null},null,a.getBeforeMaskedValueChangeConfig()).value}return a.value=h,a}QYe(t,e);var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.getInputDOMNode()&&(this.isWindowsPhoneBrowser=cZe(),this.maskOptions.mask&&this.getInputValue()!==this.value&&this.setInputValue(this.value))},r.componentDidUpdate=function(){var n=this.previousSelection,a=this.props,s=a.beforeMaskedValueChange,o=a.alwaysShowMask,l=a.mask,c=a.maskChar,u=a.formatChars,d=this.maskOptions,f=o||this.isFocused(),h=this.props.value!=null,p=h?fC(this.props.value):this.value,v=n?n.start:null;if(this.maskOptions=RB(l,c,u),this.maskOptions.mask){!d.mask&&this.isFocused()&&this.runSaveSelectionLoop();var m=this.maskOptions.mask&&this.maskOptions.mask!==d.mask;if(d.mask||h||(p=this.getInputValue()),(m||this.maskOptions.mask&&(p||f))&&(p=Ql(this.maskOptions,p)),m){var g=ug(this.maskOptions,p);(v===null||g<v)&&(v=Yre(this.maskOptions,p)?g:Wg(this.maskOptions,g))}!this.maskOptions.mask||!DB(this.maskOptions,p)||f||h&&this.props.value||(p="");var b={start:v,end:v};if(Us(s)){var y=s({value:p,selection:b},{value:this.value,selection:this.previousSelection},null,this.getBeforeMaskedValueChangeConfig());p=y.value,b=y.selection}this.value=p;var w=this.getInputValue()!==this.value;w?(this.setInputValue(this.value),this.forceUpdate()):m&&this.forceUpdate();var _=!1;b.start!=null&&b.end!=null&&(_=!n||n.start!==b.start||n.end!==b.end),(_||w)&&this.setSelection(b.start,b.end)}else d.mask&&(this.stopSaveSelectionLoop(),this.forceUpdate())},r.componentWillUnmount=function(){this.mounted=!1,this.selectionDeferId!==null&&hC(this.selectionDeferId),this.stopSaveSelectionLoop()},r.render=function(){var n,a=this.props,s=(a.mask,a.alwaysShowMask,a.maskChar,a.formatChars,a.inputRef,a.beforeMaskedValueChange,a.children),o=eZe(a,["mask","alwaysShowMask","maskChar","formatChars","inputRef","beforeMaskedValueChange","children"]);if(s){Us(s)||PB(!1);var l=["onChange","onPaste","onMouseDown","onFocus","onBlur","value","disabled","readOnly"],c=IO({},o);l.forEach(function(d){return delete c[d]}),n=s(c),l.filter(function(d){return n.props[d]!=null&&n.props[d]!==o[d]}).length&&PB(!1)}else n=dC.createElement("input",IO({ref:this.handleRef},o));var u={onFocus:this.onFocus,onBlur:this.onBlur};return this.maskOptions.mask&&(o.disabled||o.readOnly||(u.onChange=this.onChange,u.onPaste=this.onPaste,u.onMouseDown=this.onMouseDown),o.value!=null&&(u.value=this.value)),n=dC.cloneElement(n,u)},t}(dC.Component),fZe=dZe;Xre.exports=fZe;var hZe=Xre.exports;const XM=zr(hZe),mZe=({categories:e,selectedCategory:t,onSelectCategory:r})=>i.jsx("div",{className:"space-y-2",children:e.map(n=>i.jsxs("button",{className:`w-full text-left rounded-lg px-3 py-2 border ${t===n.id?"bg-pink-100 border-pink-400":"bg-white border-gray-200"} transition`,onClick:()=>r(n.id),children:[i.jsx("div",{className:"font-semibold",children:n.name}),i.jsx("div",{className:"text-xs text-gray-500",children:n.description})]},n.id))}),pZe=({services:e,selectedServices:t,onSelectService:r,categoryId:n})=>i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"max-h-[440px] overflow-y-auto pr-2 custom-scroll group-hover:scrollbar-thumb-pink-400",children:i.jsx("div",{className:"space-y-3",children:e.filter(a=>!n||a.categoryId===n).map(a=>i.jsxs("div",{className:["flex items-start justify-between border rounded-2xl px-6 py-4 transition cursor-pointer",t.includes(a.id)?"bg-pink-50 border-pink-200 shadow":"bg-white border-gray-200"].join(" "),onClick:()=>r(a.id,!t.includes(a.id)),tabIndex:0,role:"button","aria-pressed":t.includes(a.id),children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx(Hn,{checked:t.includes(a.id),onCheckedChange:s=>r(a.id,s),className:"mt-1","aria-label":`Выбрать услугу ${a.name}`,tabIndex:-1,onClick:s=>s.stopPropagation()}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-lg text-pink-900",children:a.name}),i.jsx("div",{className:"text-sm text-gray-500 mt-1",children:a.description}),a.details&&i.jsx("ul",{className:"mt-2 text-xs text-gray-500 list-disc pl-4",children:a.details.map((s,o)=>i.jsxs("li",{className:"text-pink-600",children:["- ",s]},o))})]})]}),i.jsxs("div",{className:"font-bold text-pink-700 text-lg mt-1",children:[a.price," ₽"]})]},a.id))})}),i.jsx("style",{children:`
      .custom-scroll::-webkit-scrollbar { width: 0; background: transparent; }
      .group:hover .custom-scroll::-webkit-scrollbar { width: 8px; }
      .custom-scroll::-webkit-scrollbar-thumb { background: #f9a8d4; border-radius: 8px; }
      .group:hover .custom-scroll::-webkit-scrollbar-thumb { background: #ec4899; }
    `})]}),gZe=({staffMembers:e,selectedStaffId:t,onSelectStaff:r,date:n})=>i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"max-h-[440px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-pink-300 scrollbar-track-transparent scrollbar-thumb-rounded hover:scrollbar-thumb-pink-400 transition-all duration-200 custom-scroll group-hover:scrollbar-thumb-pink-400",children:i.jsx("div",{className:"space-y-3",children:e.map(a=>i.jsxs("button",{className:`w-full flex items-center gap-4 rounded-lg px-4 py-3 border transition text-left ${t===a.id?"bg-pink-100 border-pink-400":"bg-white border-gray-200"}`,onClick:()=>r(a.id),children:[i.jsx("img",{src:a.avatar_url,alt:a.name,className:"w-14 h-14 rounded-full object-cover object-top border border-pink-200"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-semibold text-base text-pink-900",children:a.name}),i.jsx("div",{className:"text-sm text-gray-500",children:a.specialization}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsxs("span",{className:"flex items-center text-yellow-500 font-medium text-sm",children:[i.jsx("svg",{width:"16",height:"16",fill:"currentColor",className:"inline mr-1",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.967a1 1 0 00.95.69h4.175c.969 0 1.371 1.24.588 1.81l-3.38 2.455a1 1 0 00-.364 1.118l1.287 3.966c.3.922-.755 1.688-1.54 1.118l-3.38-2.454a1 1 0 00-1.175 0l-3.38 2.454c-.784.57-1.838-.196-1.54-1.118l1.287-3.966a1 1 0 00-.364-1.118L2.05 9.394c-.783-.57-.38-1.81.588-1.81h4.175a1 1 0 00.95-.69l1.286-3.967z"})}),a.rating]}),a.position&&i.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-pink-200 text-pink-800 text-xs font-semibold",children:a.position})]})]})]},a.id))})}),i.jsx("style",{children:`
      .custom-scroll::-webkit-scrollbar { width: 0; background: transparent; }
      .group:hover .custom-scroll::-webkit-scrollbar { width: 8px; }
      .custom-scroll::-webkit-scrollbar-thumb { background: #f9a8d4; border-radius: 8px; }
      .group:hover .custom-scroll::-webkit-scrollbar-thumb { background: #ec4899; }
    `})]}),vZe=({date:e,selectedTime:t,onSelectTime:r,selectedStaff:n,serviceDuration:a})=>{if(!n)return null;const o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][e.getDay()];let l,c;if(n.work_schedule&&n.work_schedule[o])l=n.work_schedule[o].start,c=n.work_schedule[o].end;else if(n.work_hours)l=n.work_hours.start,c=n.work_hours.end;else return i.jsx("div",{className:"h-full flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-gray-500 p-8",children:[i.jsx(Gp,{className:"mx-auto h-12 w-12 opacity-30 mb-2"}),i.jsx("p",{children:"У мастера не задано расписание на этот день"})]})});const u=w=>{const[_,S]=w.split(":").map(Number);return _*60+S},d=w=>`${String(Math.floor(w/60)).padStart(2,"0")}:${String(w%60).padStart(2,"0")}`,f=u(l),h=u(c),p=[];for(let w=f;w+(a||30)<=h;w+=30)p.push(d(w));const v=p.filter(w=>u(w)<12*60),m=p.filter(w=>u(w)>=12*60&&u(w)<17*60),g=p.filter(w=>u(w)>=17*60),b=i.jsxs("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",className:"inline-block mr-2 text-pink-700 align-middle",children:[i.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"1.5"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7v5l3 3"})]}),y=w=>i.jsxs("button",{className:`flex items-center px-5 py-2 rounded-lg border text-base font-medium transition mb-2 mr-2 ${t===w?"bg-pink-50 border-pink-400 text-pink-900":"bg-white border-gray-200 text-pink-900 hover:border-pink-300"}`,onClick:()=>r(w),children:[b,w]},w);return i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"max-h-72 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-pink-300 scrollbar-track-transparent scrollbar-thumb-rounded hover:scrollbar-thumb-pink-400 transition-all duration-200 custom-scroll group-hover:scrollbar-thumb-pink-400",children:i.jsxs("div",{className:"space-y-6",children:[v.length>0&&i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-pink-800 mb-2",children:"Утро"}),i.jsx("div",{className:"flex flex-wrap",children:v.map(y)})]}),m.length>0&&i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-pink-800 mb-2",children:"День"}),i.jsx("div",{className:"flex flex-wrap",children:m.map(y)})]}),g.length>0&&i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-pink-800 mb-2",children:"Вечер"}),i.jsx("div",{className:"flex flex-wrap",children:g.map(y)})]})]})}),i.jsx("style",{children:`
        .custom-scroll::-webkit-scrollbar { width: 0; background: transparent; }
        .group:hover .custom-scroll::-webkit-scrollbar { width: 8px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #f9a8d4; border-radius: 8px; }
        .group:hover .custom-scroll::-webkit-scrollbar-thumb { background: #ec4899; }
      `})]})},xZe=ln.object({lastName:ln.string().min(1,"Укажите фамилию"),firstName:ln.string().min(1,"Укажите имя"),phone:ln.string().min(10,"Укажите телефон"),email:ln.string().email("Некорректный email").optional().or(ln.literal("")),comments:ln.string().optional(),reminderTime:ln.string().optional(),agreeToTerms:ln.boolean().refine(e=>e,"Необходимо согласие")}),yZe=({formData:e,onChange:t,disabledFields:r,loading:n})=>{const a=jf({resolver:Ef(xZe),defaultValues:e,mode:"onChange"});return G.useEffect(()=>{a.reset(e)},[e]),i.jsx(dc,{...a,children:i.jsxs("form",{className:"space-y-2",onSubmit:a.handleSubmit(s=>t(s)),children:[i.jsx(Or,{name:"lastName",control:a.control,render:({field:s})=>i.jsxs(Nr,{children:[i.jsxs(Cr,{children:["Фамилия ",i.jsx("span",{className:"text-pink-500",children:"*"})]}),i.jsx(br,{children:i.jsx("input",{...s,className:"border border-pink-200 rounded-lg w-full py-2 px-4 mb-1 text-sm placeholder:text-xs placeholder-pink-300 focus:outline-none focus:border-pink-400",placeholder:"Введите фамилию",disabled:r.includes("lastName")||n})}),i.jsx(kr,{})]})}),i.jsx(Or,{name:"firstName",control:a.control,render:({field:s})=>i.jsxs(Nr,{children:[i.jsxs(Cr,{children:["Имя ",i.jsx("span",{className:"text-pink-500",children:"*"})]}),i.jsx(br,{children:i.jsx("input",{...s,className:"border border-pink-200 rounded-lg w-full py-2 px-4 mb-1 text-sm placeholder:text-xs placeholder-pink-300 focus:outline-none focus:border-pink-400",placeholder:"Введите имя",disabled:r.includes("firstName")||n})}),i.jsx(kr,{})]})}),i.jsx(Or,{name:"phone",control:a.control,render:({field:s})=>i.jsxs(Nr,{children:[i.jsxs(Cr,{children:["Телефон ",i.jsx("span",{className:"text-pink-500",children:"*"})]}),i.jsx(br,{children:i.jsx(XM,{mask:"+7 (999) 999-99-99",value:s.value,onChange:s.onChange,children:o=>i.jsx("input",{...o,className:"border border-pink-200 rounded-lg w-full py-2 px-4 mb-1 text-sm placeholder:text-xs placeholder-pink-300 focus:outline-none focus:border-pink-400",disabled:r.includes("phone")||n})})}),i.jsx(kr,{})]})}),i.jsx(Or,{name:"email",control:a.control,render:({field:s})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Email"}),i.jsx(br,{children:i.jsx("input",{...s,type:"email",className:"border border-pink-200 rounded-lg w-full py-2 px-4 mb-1 text-sm placeholder:text-xs placeholder-pink-300 focus:outline-none focus:border-pink-400",placeholder:"Введите email",disabled:r.includes("email")||n})}),i.jsx(kr,{})]})}),i.jsx(Or,{name:"comments",control:a.control,render:({field:s})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Комментарий к записи"}),i.jsx(br,{children:i.jsx("textarea",{...s,rows:2,className:"border border-pink-200 rounded-lg w-full py-2 px-4 mb-1 text-sm placeholder:text-xs placeholder-pink-300 focus:outline-none focus:border-pink-400",placeholder:"Например: опоздаю на 10 минут",disabled:r.includes("comments")||n})}),i.jsx(kr,{})]})}),i.jsx(Or,{name:"reminderTime",control:a.control,render:({field:s})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Напоминание"}),i.jsx(br,{children:i.jsxs("select",{...s,className:"border border-pink-200 rounded-lg w-full py-2 px-4 mb-1 text-sm focus:outline-none focus:border-pink-400",disabled:r.includes("reminderTime")||n,children:[i.jsx("option",{value:"",children:"Не выбрано"}),i.jsx("option",{value:"2hours",children:"За 2 часа"}),i.jsx("option",{value:"1hour",children:"За 1 час"}),i.jsx("option",{value:"30min",children:"За 30 минут"})]})}),i.jsx(kr,{})]})}),i.jsx(Or,{name:"agreeToTerms",control:a.control,render:({field:s})=>i.jsxs(Nr,{children:[i.jsxs("div",{className:"flex items-start gap-2 mt-1",children:[i.jsx(br,{children:i.jsx(Hn,{checked:s.value,onCheckedChange:s.onChange,disabled:r.includes("agreeToTerms")||n,className:"mt-1 data-[state=checked]:bg-pink-500 data-[state=checked]:border-pink-500"})}),i.jsx("span",{className:"text-xs text-gray-700",children:"Я предоставляю согласие на обработку персональных данных, а также подтверждаю ознакомление и согласие с Политикой конфиденциальности и Пользовательским соглашением"})]}),i.jsx(kr,{})]})})]})})},bZe=({selectedServices:e,selectedDate:t,selectedTime:r,selectedStaff:n})=>{const a=e.reduce((l,c)=>l+(c.price||0),0);let s="",o="";if(t&&r&&e.length>0){const l=["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],c=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],u=l[t.getDay()],d=t.getDate(),f=c[t.getMonth()];s=`${u}, ${d} ${f}`;const[h,p]=r.split(":").map(Number),v=new Date(t);v.setHours(h,p,0,0);const m=e.reduce((y,w)=>y+(w.duration||0),0),g=Qd(v,m),b=y=>y.toString().padStart(2,"0");o=`${b(h)}:${b(p)} — ${b(g.getHours())}:${b(g.getMinutes())}`}return i.jsx(qe,{className:"border-pink-200 shadow-lg mb-6",children:i.jsxs(Ge,{className:"p-6",children:[i.jsx("h3",{className:"font-bold text-pink-800 text-lg mb-4",children:"Детали записи"}),n&&i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("img",{src:n.avatar_url,alt:n.name,className:"w-12 h-12 rounded-full object-cover object-top border border-pink-200"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-pink-900 leading-tight",children:n.name}),i.jsx("div",{className:"text-sm text-gray-500 leading-tight",children:n.specialization})]})]}),s&&o&&i.jsxs("div",{className:"bg-pink-50 rounded-lg px-4 py-3 mb-4",children:[i.jsx("div",{className:"font-medium text-pink-900 mb-1",children:s}),i.jsx("div",{className:"text-pink-800 text-lg font-semibold",children:o})]}),e.length>0&&i.jsxs("div",{className:"mb-2",children:[i.jsx("div",{className:"font-semibold mb-1",children:"Услуги"}),e.map(l=>{var c;return i.jsxs("div",{className:"flex justify-between items-end mb-1",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-pink-900",children:l.name}),i.jsxs("div",{className:"text-xs text-gray-500",children:[l.duration," мин"]})]}),i.jsxs("div",{className:"font-medium text-pink-900",children:[(c=l.price)==null?void 0:c.toLocaleString()," ₽"]})]},l.id)})]}),i.jsx("hr",{className:"my-4 border-pink-100"}),i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("div",{className:"font-bold text-lg",children:"Итого"}),i.jsxs("div",{className:"font-bold text-2xl text-pink-800",children:[a.toLocaleString()," ₽"]})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-4",children:["Записываясь на услугу, вы соглашаетесь с правилами салона.",i.jsx("br",{}),"Отмена или перенос записи возможны не позднее чем за 12 часов."]})]})})},wZe=[{id:"haircut",name:"Стрижки",description:"Более 10 видов стрижек"},{id:"coloring",name:"Окрашивание",description:"Различные техники окрашивания"},{id:"manicure",name:"Маникюр",description:"Классический и аппаратный"},{id:"eyebrows",name:"Брови",description:"Коррекция и окрашивание"}],IB=[{id:"1",categoryId:"eyebrows",name:"Женская стрижка",description:"60 мин • Включает мытьё головы и укладку",duration:60,price:2e3},{id:"2",categoryId:"eyebrows",name:"Оформление бровей краской",description:"Коррекция и окрашивание",duration:40,price:1200},{id:"3",categoryId:"eyebrows",name:"Оформление бровей хной",description:"Долговременное окрашивание",duration:50,price:1400},{id:"8",categoryId:"eyebrows",name:"Ламинирование бровей",description:"Долговременная укладка и уход",duration:55,price:1700},{id:"9",categoryId:"eyebrows",name:"Архитектура бровей",description:"Подбор формы и коррекция",duration:45,price:1500},{id:"10",categoryId:"eyebrows",name:"Мужское оформление бровей",description:"Коррекция и уход для мужчин",duration:35,price:1100},{id:"11",categoryId:"eyebrows",name:"Восстановление бровей",description:"Уходовые процедуры для восстановления",duration:60,price:1800},{id:"4",categoryId:"manicure",name:"Классический маникюр",description:"Обработка кутикулы и ногтевой пластины",duration:60,price:1100},{id:"5",categoryId:"manicure",name:"Аппаратный маникюр",description:"Бережная обработка аппаратом",duration:60,price:1300},{id:"6",categoryId:"haircut",name:"Мужская стрижка",description:"Стрижка и укладка для мужчин",duration:45,price:1500},{id:"7",categoryId:"coloring",name:"Окрашивание корней",description:"Окрашивание отросших корней",duration:90,price:3e3}],_Ze=()=>{const{toast:e}=co(),[t,r]=x.useState(0),[n,a]=x.useState(null),[s,o]=x.useState([]),[l,c]=x.useState(null),[u,d]=x.useState(null),[f,h]=x.useState(null),[p,v]=x.useState({firstName:"",lastName:"",phone:"",email:"",comments:"",agreeToTerms:!1}),[m,g]=x.useState([]),{isAuthenticated:b,userRole:y}=ei(),[w,_]=x.useState(!1),[S,E]=x.useState(!1);x.useEffect(()=>{Ru.getAll().then(D=>g(D)).catch(D=>console.error("Ошибка загрузки специалистов:",D))},[]),x.useEffect(()=>{t===1&&(c(null),d(null),h(null))},[s,t]),x.useEffect(()=>{(async()=>{var U,M,F,K;if(b&&y==="client"){_(!0);try{const{data:X,error:O}=await ue.auth.getUser();if(O||!(X!=null&&X.user)){E(!1),_(!1);return}const W=X.user,L=W.email||((U=W.user_metadata)==null?void 0:U.email)||"",H=((M=W.user_metadata)==null?void 0:M.phone)||"";let ee=null;if(H){const q=await pr.searchClientsByPhone(H);q&&q.length>0&&(ee=q[0])}if(!ee&&L){const q=await pr.filterClients({search:L});q&&q.length>0&&(ee=q[0])}ee?(v({firstName:((F=ee.full_name)==null?void 0:F.split(" ")[1])||"",lastName:((K=ee.full_name)==null?void 0:K.split(" ")[0])||"",phone:ee.phone||"",email:ee.email||"",comments:"",agreeToTerms:!1}),E(!0)):E(!1)}catch{E(!1)}finally{_(!1)}}})()},[b,y]);const j=(D,U)=>{o(U?[...s,D]:s.filter(M=>M!==D))},N=(D,U)=>v({...p,[D]:U}),k=IB.filter(D=>s.includes(D.id)),C=m.find(D=>D.id===f),T=()=>{if(!s.length||!l||!u||!f||!p.firstName||!p.lastName||!p.phone||!p.agreeToTerms){e({title:"Ошибка",description:"Пожалуйста, заполните все обязательные поля",variant:"destructive"});return}e({title:"Запись успешно создана!",description:`Вы записаны на ${Me(l,"d MMMM")} в ${u}`}),a(null),o([]),c(null),d(null),h(null),v({firstName:"",lastName:"",phone:"",email:"",comments:"",agreeToTerms:!1}),r(0)},A=[{id:0,title:"Услуги"},{id:1,title:"Дата и время"},{id:2,title:"Контактные данные"}],B=()=>{if(t===0&&!s.length){e({title:"Выберите услуги",description:"Пожалуйста, выберите хотя бы одну услугу",variant:"destructive"});return}if(t===1&&(!l||!u||!f)){e({title:"Выберите дату, время и мастера",description:"Пожалуйста, заполните все поля для продолжения",variant:"destructive"});return}t<A.length-1?r(t+1):T()},R=()=>{t>0&&r(t-1)},P=(D,U)=>{if(!U)return D;const F=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][U.getDay()];return D.filter(K=>K.work_schedule&&K.work_schedule[F]||K.work_hours)};return i.jsxs("div",{className:"min-h-screen flex flex-col",children:[i.jsx(od,{}),i.jsx("main",{className:"flex-grow mt-24 mb-12",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6 beauty-gradient-text",children:"Онлайн запись"}),i.jsx("div",{className:"mb-8 hidden sm:block",children:i.jsx("div",{className:"flex items-center justify-center",children:A.map((D,U)=>i.jsxs("div",{className:"flex flex-col items-center",children:[U>0&&i.jsx("div",{className:`w-24 h-1 ${U<=t?"bg-pink-400":"bg-gray-200"} transition-all`}),i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${U===t||U<t?"bg-pink-400 text-white":"bg-gray-200 text-gray-500"}`,children:U<t?"✓":U+1}),i.jsx("div",{className:"mt-2 text-center",children:i.jsx("p",{className:`text-sm font-medium ${U===t?"text-pink-800":"text-gray-500"}`,children:D.title})})]},D.id))})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs(qe,{className:"border-beauty-100 shadow-lg",children:[i.jsx(ht,{className:"bg-pink-50 border-b border-pink-100",children:i.jsx(gt,{className:"text-pink-800",children:A[t].title})}),i.jsxs(Ge,{className:"p-5 md:p-6",children:[t===0&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("h3",{className:"text-sm font-medium mb-3 text-pink-800",children:"Категории"}),i.jsx(mZe,{categories:wZe,selectedCategory:n,onSelectCategory:a})]}),i.jsxs("div",{className:"md:col-span-3",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("h3",{className:"text-sm font-medium text-pink-800",children:"Услуги"}),s.length>0&&i.jsxs("span",{className:"text-sm",children:["Выбрано: ",s.length]})]}),i.jsx(pZe,{services:IB,selectedServices:s,onSelectService:j,categoryId:n})]})]}),t===1&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium mb-3 text-pink-800",children:"Выберите дату"}),i.jsx("div",{className:"bg-white border border-pink-200 rounded-md p-2",children:i.jsx(Rc,{mode:"single",selected:l,onSelect:c,disabled:D=>{const U=new Date;U.setHours(0,0,0,0);const M=new Date;return M.setMonth(M.getMonth()+2),D<U||D>M},locale:Da,className:"rounded-md pointer-events-auto",modifiersClassNames:{workday:'relative after:content-["•"] after:absolute after:bottom-1 after:left-1/2 after:-translate-x-1/2 after:text-pink-400 after:text-lg'}})})]}),i.jsxs("div",{children:[l&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium mb-3 text-pink-800",children:"Выберите мастера"}),i.jsx(gZe,{staffMembers:P(m,l),selectedStaffId:f,onSelectStaff:h,date:l})]}),f&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium mb-3 text-pink-800",children:"Выберите время"}),i.jsx(vZe,{date:l,selectedTime:u,onSelectTime:d,selectedStaff:C,serviceDuration:60})]})]}),!l&&i.jsx("div",{className:"h-full flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-gray-500 p-8",children:[i.jsx(Gp,{className:"mx-auto h-12 w-12 opacity-30 mb-2"}),i.jsx("p",{children:"Пожалуйста, выберите дату для записи"})]})})]})]}),t===2&&i.jsx(yZe,{formData:p,onChange:N,disabledFields:S?["firstName","lastName","phone","email"]:[],loading:w}),i.jsxs("div",{className:"flex justify-between mt-8",children:[i.jsx(ne,{variant:"outline",onClick:R,disabled:t===0,className:"border-pink-200",children:"Назад"}),i.jsx(ne,{onClick:B,className:"bg-pink-400 hover:bg-pink-500 text-white",children:t===A.length-1?"Записаться":"Продолжить"})]})]})]})}),i.jsxs("div",{children:[i.jsx(bZe,{selectedServices:k,selectedDate:l,selectedTime:u,selectedStaff:C}),i.jsx(XYe,{}),i.jsx(qe,{className:"border-pink-100 shadow-lg mt-6",children:i.jsxs(Ge,{className:"p-5",children:[i.jsx("h3",{className:"font-semibold text-pink-800 mb-4",children:"Информация"}),i.jsxs("ul",{className:"space-y-2 text-sm text-pink-700",children:[i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"mr-3 mt-1 text-pink-400",children:"✓"}),i.jsx("span",{children:"Вы можете отменить запись за 12 часов до начала"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"mr-3 mt-1 text-pink-400",children:"✓"}),i.jsx("span",{children:"Вы получите напоминание по SMS и email"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"mr-3 mt-1 text-pink-400",children:"✓"}),i.jsx("span",{children:"При опоздании более чем на 15 минут, запись может быть отменена"})]})]})]})})]})]})]})}),i.jsx(al,{})]})},Jre=({name:e,used:t,total:r,status:n,services:a})=>{const s=r>0?Math.min(100,Math.round(t/r*100)):0,o=n==="active"?"Активен":n==="expired"?"Истёк":"Использован",l=n==="active"?"bg-green-100 text-green-700 border-green-200":n==="expired"?"bg-gray-100 text-gray-500 border-gray-200":"bg-red-100 text-red-700 border-red-200";return i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-2 shadow-sm border",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsxs("span",{className:"font-semibold text-base",children:["«",e,"»"]}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs border ${l}`,children:o})]}),a&&a.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1 mt-2 mb-2",children:a.map(c=>i.jsx("span",{className:"text-xs font-normal px-1.5 py-0.5 bg-white border border-gray-300 text-gray-600 rounded",children:c},c))}),i.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:["Использовано ",i.jsx("b",{children:t})," из ",i.jsx("b",{children:r})]}),i.jsx("div",{className:"h-2 rounded bg-gray-200 overflow-hidden",children:i.jsx("div",{className:"h-2 bg-gray-900 rounded",style:{width:`${s}%`}})})]})},SZe="/placeholder-avatar.png",jZe=({client:e,nextAppointment:t,lastVisit:r,treatments:n,onViewDetails:a,onSchedule:s,onDelete:o,onEdit:l,showDetailsButton:c=!0,setSelectedClient:u,setOpenAddTagDialog:d,fetchClients:f,services:h,discountsByClientId:p,bonusBalance:v,expiringBonuses:m})=>{var W;const{appointments:g}=qu();x.useState(!1),x.useState(""),x.useState(!1);const[b,y]=x.useState([]),[w,_]=x.useState([]),[S,E]=x.useState(!!e.disable_notifications),j=()=>{a&&a(e)},N=e.created_at?new Date(e.created_at):null,k=N&&!isNaN(N.getTime())?Me(N,"dd.MM.yyyy"):"—",C=e.birthdate?new Date(e.birthdate):null,T=C&&!isNaN(C.getTime())?Me(C,"dd.MM.yyyy"):"—",A=L=>{const[H,ee,q]=L.split("-").map(Number),Z=new Date(H,ee-1,q),I=new Date;return I.setHours(0,0,0,0),Z<=I},R=r??(()=>{const L=g.filter(H=>H.client_id===e.id&&A(H.date)&&H.status==="completed").sort((H,ee)=>new Date(ee.date).getTime()-new Date(H.date).getTime());return L.length===0?"—":Me(new Date(L[0].date),"dd.MM.yyyy")})();x.useEffect(()=>{e.id&&(console.log("[SUBSCRIPTIONS DEBUG] Запрашиваем абонементы для клиента:",e.full_name,"ID:",e.id),ue.from("loyalty_user_states").select("*").eq("user_id",String(e.id)).then(({data:L,error:H})=>{H&&console.error("[SUBSCRIPTIONS ERROR]",H),console.log("[SUBSCRIPTIONS DEBUG] Результат запроса:",L),y(L||[])}),op().then(_))},[e.id]),x.useEffect(()=>{E(!!e.disable_notifications)},[e.disable_notifications]);const P=new Date;(p[e.id]||[]).filter(L=>L.valid_to&&new Date(L.valid_to)>=P&&L.used_count<L.max_usages);const U=L=>{const H=new Date(L),ee=new Date;return H.getFullYear()===ee.getFullYear()&&H.getMonth()===ee.getMonth()},M=(L,H)=>{const ee=new Date(L);return(new Date().getTime()-ee.getTime())/(1e3*60*60*24)<=H},F=(L,H)=>{const ee=new Date(L),q=new Date(H);return Math.abs((ee.getTime()-q.getTime())/(1e3*60*60*24))},K=L=>{const H=new Date(L);return Math.floor((new Date().getTime()-H.getTime())/(1e3*60*60*24))},O=(()=>{const L=g.filter(I=>I.client_id===e.id&&I.status==="completed").sort((I,Q)=>new Date(Q.date).getTime()-new Date(I.date).getTime()),ee=(e.tags||[]).includes("VIP")||L.length>=10,q=b.some(I=>I.status==="active"),Z=(p[e.id]||[]).length>0;return L.length===1?"Новый":L.length>=2&&U(L[0].date)?"Повторный":L.some(I=>M(I.date,30))?"Активный":L.length>=2&&F(L[0].date,L[1].date)>60?"Вернувшийся":L.length>0&&K(L[0].date)>180?"Потерянный":L.length>0&&K(L[0].date)>60?"Неактивный":ee?"VIP":q?"С абонементом":Z?"С индивидуальной скидкой":null})();return console.log("ClientCard RENDER, client:",JSON.parse(JSON.stringify(e))),i.jsxs(qe,{className:"rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden",children:[i.jsxs(Ge,{className:"p-5 flex flex-col md:flex-row gap-5",children:[i.jsxs("div",{className:"flex flex-col items-center md:items-start md:w-1/4 md:border-r md:pr-5",children:[e.avatar_url?i.jsx("img",{src:e.avatar_url,alt:e.full_name,className:"w-20 h-20 rounded-full object-cover border-2 border-beauty-300 mb-3",onError:L=>L.currentTarget.src=SZe}):i.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-3xl font-semibold border-2 border-gray-300 mb-3",children:Pde(e.full_name)}),i.jsx("h3",{className:"font-bold text-xl text-beauty-800 text-center md:text-left",children:e.full_name}),O&&i.jsx($t,{className:"mt-1 bg-blue-100 text-blue-700 border border-blue-200 px-2.5 py-0.5 text-xs font-medium",children:O}),e.is_active&&i.jsx($t,{className:"mt-1 bg-green-100 text-green-700 border border-green-200 px-2.5 py-0.5 text-xs font-medium",children:"Активен"}),i.jsxs("div",{className:"mt-3 text-xs text-gray-600 space-y-1 text-center md:text-left",children:[i.jsx("p",{children:e.email||"Email не указан"}),i.jsx("p",{children:e.phone||"Телефон не указан"}),i.jsxs("p",{children:["Создан: ",k]})]})]}),i.jsxs("div",{className:"flex-grow md:w-1/2 md:border-r md:px-5",children:[i.jsxs("div",{className:"text-sm space-y-1 mb-3",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Дата рождения:"})," ",T]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Последнее посещение:"})," ",R]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Следующая запись:"})," ",t]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-1 flex items-center",children:["Теги:",i.jsx("button",{className:"ml-2 inline-flex items-center justify-center bg-pink-100 text-pink-700 hover:bg-pink-200 rounded-full w-5 h-5 text-xs transition-colors",onClick:()=>{u(e),d(!0)},type:"button","aria-label":"Добавить тег",children:"+"})]}),i.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(W=e.tags)!=null&&W.length?e.tags.map(L=>i.jsx($t,{variant:"secondary",className:"bg-pink-100 text-pink-700 border-pink-200 px-2 py-0.5 text-xs font-normal",children:L},L)):i.jsx("span",{className:"text-xs text-gray-500",children:"Нет тегов"})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Процедуры:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:n.length?n.map(L=>i.jsx($t,{variant:"outline",className:"border-gray-300 text-gray-700 px-2 py-0.5 text-xs",children:L.name},L.id)):i.jsx("span",{className:"text-xs text-gray-500",children:"Нет записей"})})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Абонементы:"}),b&&b.length>0?i.jsx("div",{className:"space-y-2",children:b.map(L=>{const H=w.find(we=>we.id===L.program_id);if(!H||H.type!=="subscription")return null;const ee=H.rules,q=(ee==null?void 0:ee.visits)??0,Z=q-(L.subscription_visits_left??0);let I=null;if(L.expires_at)I=new Date(L.expires_at);else if(L.created_at&&(ee!=null&&ee.expireDays)){const we=new Date(L.created_at);I=new Date(we.getTime()+ee.expireDays*24*60*60*1e3)}const Q=I?I<new Date:!1;let ve="active";L.status==="cancelled"||Q?ve="expired":Z>=q&&q>0&&(ve="used");const z=Array.isArray(h)&&Array.isArray(L.services)?L.services.map(we=>{const Re=h.find(Pe=>String(Pe.id)===String(we));return Re?Re.name:null}).filter(Boolean):[];return i.jsxs("div",{className:"bg-white p-3 rounded-md shadow-sm border border-gray-200",children:[i.jsx(Jre,{name:(H==null?void 0:H.name)||"Абонемент",used:Z,total:q,status:ve,services:z}),I&&i.jsxs("div",{className:"text-xs text-gray-500 ml-1 mt-1",children:[ve==="expired"?"Истёк":"Действителен до",": ",Me(I,"dd.MM.yyyy")]})]},L.id)}).filter(Boolean).sort((L,H)=>{const ee=q=>{var I,Q,ve;if(!q||!q.props||!q.props.children)return 0;const Z=(ve=(Q=(I=q.props.children.find(z=>z&&z.props&&z.props.className&&z.props.className.includes("text-xs")))==null?void 0:I.props)==null?void 0:Q.children)==null?void 0:ve[2];return Z?new Date(Z.split(": ")[1].split(".").reverse().join("-")).getTime():0};return ee(H)-ee(L)})}):i.jsx("span",{className:"text-xs text-gray-500",children:"Нет абонементов"})]})]}),i.jsxs("div",{className:"md:w-1/4 md:pl-5 text-sm space-y-2",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Бонусы:"})," ",i.jsx("span",{className:"font-semibold text-beauty-700",children:typeof e.calculated_bonus_points=="number"?e.calculated_bonus_points:0})]}),m&&m.length>0&&i.jsx("div",{className:"text-xs text-pink-600 mt-0.5",children:m.map(L=>i.jsxs("div",{children:["Сгорает: ",i.jsx("b",{children:L.amount})," до ",Me(new Date(L.date),"dd.MM.yyyy")]},L.date))}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Индивидуальные скидки: "}),Array.isArray(p==null?void 0:p[e.id])&&p[e.id].length>0?i.jsx("ul",{className:"list-disc list-inside ml-1 mt-0.5",children:p[e.id].map(L=>i.jsxs("li",{className:"text-xs",children:[L.discount_percent,"% до ",L.valid_to?Me(new Date(L.valid_to),"dd.MM.yy"):"-",typeof L.max_usages=="number"&&typeof L.used_count=="number"?` (${L.max_usages-L.used_count} ост.)`:""]},L.id))}):i.jsx("span",{className:"text-gray-500",children:"Нет"})]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Абонементов:"})," ",i.jsx("span",{className:"font-semibold text-beauty-700",children:b?b.length:0})]}),i.jsxs("div",{className:"flex items-center mt-2",children:[i.jsx("input",{type:"checkbox",id:`disable-notifications-${e.id}`,checked:S,style:{zIndex:1e3,position:"relative"},onChange:async L=>{E(L.target.checked),await pr.updateClient(String(e.id),{disable_notifications:L.target.checked}),typeof f=="function"&&await f()},className:"mr-2"}),i.jsx("label",{htmlFor:`disable-notifications-${e.id}`,className:"text-xs text-gray-700 select-none cursor-pointer",children:"Не оповещать автоматическими уведомлениями"})]})]})]}),i.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end space-x-3",children:a&&i.jsx(ne,{variant:"outline",size:"sm",className:"text-primary border-primary hover:bg-primary/10",onClick:j,children:"Подробнее"})})]},e.id)},Qre=({className:e,...t})=>i.jsx("nav",{role:"navigation","aria-label":"pagination",className:Ue("mx-auto flex w-full justify-center",e),...t});Qre.displayName="Pagination";const ene=x.forwardRef(({className:e,...t},r)=>i.jsx("ul",{ref:r,className:Ue("flex flex-row items-center gap-1",e),...t}));ene.displayName="PaginationContent";const J1=x.forwardRef(({className:e,...t},r)=>i.jsx("li",{ref:r,className:Ue("",e),...t}));J1.displayName="PaginationItem";const YM=({className:e,isActive:t,size:r="icon",...n})=>i.jsx("a",{"aria-current":t?"page":void 0,className:Ue(ty({variant:t?"outline":"ghost",size:r}),e),...n});YM.displayName="PaginationLink";const tne=({className:e,...t})=>i.jsxs(YM,{"aria-label":"Go to previous page",size:"default",className:Ue("gap-1 pl-2.5",e),...t,children:[i.jsx(_v,{className:"h-4 w-4"}),i.jsx("span",{children:"Previous"})]});tne.displayName="PaginationPrevious";const rne=({className:e,...t})=>i.jsxs(YM,{"aria-label":"Go to next page",size:"default",className:Ue("gap-1 pr-2.5",e),...t,children:[i.jsx("span",{children:"Next"}),i.jsx(Ou,{className:"h-4 w-4"})]});rne.displayName="PaginationNext";const EZe=({clients:e,onViewDetails:t,onSchedule:r,setSelectedClient:n,setOpenAddTagDialog:a,services:s,discountsByClientId:o,bonusBalancesByClientId:l,expiringBonusesByClientId:c})=>{const[u,d]=x.useState(1),f=12,h=Math.ceil(e.length/f),p=(u-1)*f,v=p+f,m=e.slice(p,v),g=()=>{u<h&&d(u+1)},b=()=>{u>1&&d(u-1)};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[m.map(({client:y,lastVisit:w,nextAppointment:_,treatments:S})=>i.jsx(jZe,{client:y,nextAppointment:_,treatments:S,onViewDetails:t,onSchedule:r,setSelectedClient:n,setOpenAddTagDialog:a,services:s,discountsByClientId:o,bonusBalance:l==null?void 0:l[y.id],expiringBonuses:(c==null?void 0:c[y.id])||[]},y.id)),e.length===0&&i.jsx("div",{className:"col-span-3 py-12 text-center",children:i.jsx("p",{className:"text-beauty-600 text-lg",children:"Нет клиентов"})})]}),h>1&&i.jsx(Qre,{className:"mt-6",children:i.jsxs(ene,{children:[i.jsx(J1,{children:i.jsx(tne,{onClick:b,className:u===1?"pointer-events-none opacity-50":"cursor-pointer"})}),i.jsx(J1,{children:i.jsxs("span",{className:"px-4 py-2 text-sm text-beauty-500",children:["Страница ",u," из ",h]})}),i.jsx(J1,{children:i.jsx(rne,{onClick:g,className:u===h?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})},NZe=({open:e,onOpenChange:t,client:r,onSuccess:n,specialist:a,initialDate:s,initialTime:o})=>{Gs();const{specialists:l,fetchSpecialists:c,fetchSpecialistsByStudioId:u}=Oa(),{getServicesBySpecialist:d}=Oi(),{currentStudio:f}=Ba(),[h,p]=x.useState(""),[v,m]=x.useState([]),[g,b]=x.useState(""),[y,w]=x.useState(void 0),[_,S]=x.useState(""),[E,j]=x.useState("");return x.useState(!1),x.useEffect(()=>{e&&(f!=null&&f.id?u(f.id):c(),p(null),b(null),w(s||new Date),S(o||""),j(""))},[e,c,u,f==null?void 0:f.id]),x.useEffect(()=>{if(h){const N=d(h);m(N),b("")}else m([]),b("")},[h,d]),r?i.jsx(qt,{open:e,onOpenChange:t,children:i.jsxs(Wt,{className:"sm:max-w-[600px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Запись клиента"}),i.jsx(fr,{children:"Заполните информацию для записи клиента"})]}),i.jsx(Ore,{client:r,onSuccess:()=>{t(!1),n&&n()},initialSpecialist:a==null?void 0:a.id,initialDate:s,initialTime:o})]})}):i.jsx(qt,{open:e,onOpenChange:t,children:i.jsxs(Wt,{children:[i.jsx(Gt,{children:i.jsx(Vt,{children:"Запись клиента"})}),i.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Клиент не выбран"}),i.jsx(or,{children:i.jsx(ne,{variant:"outline",onClick:()=>t(!1),children:"Закрыть"})})]})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var nne=1252,CZe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],ZM={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},JM=function(e){CZe.indexOf(e)!=-1&&(nne=ZM[0]=e)};function kZe(){JM(1252)}var Uo=function(e){JM(e)};function ane(){Uo(1200),kZe()}function $B(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function TZe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function sne(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var dg=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?TZe(e.slice(2)):t==254&&r==255?sne(e.slice(2)):t==65279?e.slice(1):e},a1=function(t){return String.fromCharCode(t)},FB=function(t){return String.fromCharCode(t)},uu,wu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function LB(e){for(var t="",r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),o=(r&3)<<4|n>>4,a=e.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),t+=wu.charAt(s)+wu.charAt(o)+wu.charAt(l)+wu.charAt(c);return t}function Di(e){var t="",r=0,n=0,a=0,s=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=wu.indexOf(e.charAt(u++)),o=wu.indexOf(e.charAt(u++)),r=s<<2|o>>4,t+=String.fromCharCode(r),l=wu.indexOf(e.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=wu.indexOf(e.charAt(u++)),a=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var Rr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),nh=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Zu(e){return Rr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function BB(e){return Rr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Fo=function(t){return Rr?nh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function ah(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function QM(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return QM(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var du=Rr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:nh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function AZe(e){for(var t=[],r=0,n=e.length+250,a=Zu(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++s)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(t.push(a.slice(0,r)),r=0,a=Zu(65535),n=65530)}return t.push(a.slice(0,r)),du(t)}var Ps=/\u0000/g,fg=/[\u0001-\u0006]/g;function Om(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function zo(e,t){var r=""+e;return r.length>=t?r:Ln("0",t-r.length)+r}function eI(e,t){var r=""+e;return r.length>=t?r:Ln(" ",t-r.length)+r}function gS(e,t){var r=""+e;return r.length>=t?r:r+Ln(" ",t-r.length)}function PZe(e,t){var r=""+Math.round(e);return r.length>=t?r:Ln("0",t-r.length)+r}function OZe(e,t){var r=""+e;return r.length>=t?r:Ln("0",t-r.length)+r}var UB=Math.pow(2,32);function Rh(e,t){if(e>UB||e<-UB)return PZe(e,t);var r=Math.round(e);return OZe(r,t)}function vS(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var zB=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],mC=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function RZe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var ir={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},WB={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},DZe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function xS(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),l=f*o+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=o,o=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=s):(d=u,l=o)),!r)return[0,n*l,d];var h=Math.floor(n*l/d);return[h,n*l-h*d,d]}function Hd(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,o=[],l={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=BZe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var ine=new Date(1899,11,31,0,0,0),MZe=ine.getTime(),IZe=new Date(1900,2,1,0,0,0);function one(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=IZe&&(r+=24*60*60*1e3),(r-(MZe+(e.getTimezoneOffset()-ine.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function tI(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function $Ze(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function FZe(e){var t=e<0?12:11,r=tI(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function LZe(e){var t=tI(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Rx(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=FZe(e):t===10?r=e.toFixed(10).substr(0,12):r=LZe(e),tI($Ze(r.toUpperCase()))}function Uf(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Rx(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return io(14,one(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function BZe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function UZe(e,t,r,n){var a="",s=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return mC[r.m-1][1];case 5:return mC[r.m-1][0];default:return mC[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return zB[r.q][0];default:return zB[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?zo(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),t==="s"?s===0?"0":""+s/o:(a=zo(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?zo(c,u):"";return d}function _u(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var lne=/%/g;function zZe(e,t,r){var n=t.replace(lne,""),a=t.length-n.length;return pc(e,n,r*Math.pow(10,2*a))+Ln("%",a)}function WZe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return pc(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function cne(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+cne(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var une=/# (\?+)( ?)\/( ?)(\d+)/;function VZe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),o=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(o===0?Ln(" ",e[1].length+1+e[4].length):eI(o,e[1].length)+e[2]+"/"+e[3]+zo(l,e[4].length))}function HZe(e,t,r){return r+(t===0?"":""+t)+Ln(" ",e[1].length+2+e[4].length)}var dne=/^#*0*\.([0#]+)/,fne=/\).*[0#]/,hne=/\(###\) ###\\?-####/;function ys(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function VB(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function HB(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function qZe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function GZe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Vi(e,t,r){if(e.charCodeAt(0)===40&&!t.match(fne)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Vi("n",n,r):"("+Vi("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return WZe(e,t,r);if(t.indexOf("%")!==-1)return zZe(e,t,r);if(t.indexOf("E")!==-1)return cne(t,r);if(t.charCodeAt(0)===36)return"$"+Vi(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Rh(c,t.length);if(t.match(/^[#?]+$/))return a=Rh(r,0),a==="0"&&(a=""),a.length>t.length?a:ys(t.substr(0,t.length-a.length))+a;if(s=t.match(une))return VZe(s,c,u);if(t.match(/^#+0+$/))return u+Rh(c,t.length-t.indexOf("0"));if(s=t.match(dne))return a=VB(r,s[1].length).replace(/^([^\.]+)$/,"$1."+ys(s[1])).replace(/\.$/,"."+ys(s[1])).replace(/\.(\d*)$/,function(v,m){return"."+m+Ln("0",ys(s[1]).length-m.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+VB(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+_u(Rh(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Vi(e,t,-r):_u(""+(Math.floor(r)+qZe(r,s[1].length)))+"."+zo(HB(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Vi(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Om(Vi(e,t.replace(/[\\-]/g,""),r)),o=0,Om(Om(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<a.length?a.charAt(o++):v==="0"?"0":""}));if(t.match(hne))return a=Vi(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=xS(c,Math.pow(10,o)-1,!1),a=""+u,d=pc("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=gS(l[2],o),d.length<s[4].length&&(d=ys(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=xS(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?eI(l[1],o)+s[2]+"/"+s[3]+gS(l[2],o):Ln(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Rh(r,0),t.length<=a.length?a:ys(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,h=t.length-a.length-f;return ys(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=HB(r,s[1].length),r<0?"-"+Vi(e,t,-r):_u(GZe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?zo(0,3-v.length):"")+v})+"."+zo(o,s[1].length);switch(t){case"###,##0.00":return Vi(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=_u(Rh(c,0));return p!=="0"?u+p:"";case"###,###.00":return Vi(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Vi(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function KZe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return pc(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function XZe(e,t,r){var n=t.replace(lne,""),a=t.length-n.length;return pc(e,n,r*Math.pow(10,2*a))+Ln("%",a)}function mne(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+mne(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function dl(e,t,r){if(e.charCodeAt(0)===40&&!t.match(fne)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?dl("n",n,r):"("+dl("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return KZe(e,t,r);if(t.indexOf("%")!==-1)return XZe(e,t,r);if(t.indexOf("E")!==-1)return mne(t,r);if(t.charCodeAt(0)===36)return"$"+dl(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+zo(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:ys(t.substr(0,t.length-a.length))+a;if(s=t.match(une))return HZe(s,c,u);if(t.match(/^#+0+$/))return u+zo(c,t.length-t.indexOf("0"));if(s=t.match(dne))return a=(""+r).replace(/^([^\.]+)$/,"$1."+ys(s[1])).replace(/\.$/,"."+ys(s[1])),a=a.replace(/\.(\d*)$/,function(v,m){return"."+m+Ln("0",ys(s[1]).length-m.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+_u(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+dl(e,t,-r):_u(""+r)+"."+Ln("0",s[1].length);if(s=t.match(/^#,#*,#0/))return dl(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Om(dl(e,t.replace(/[\\-]/g,""),r)),o=0,Om(Om(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<a.length?a.charAt(o++):v==="0"?"0":""}));if(t.match(hne))return a=dl(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=xS(c,Math.pow(10,o)-1,!1),a=""+u,d=pc("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=gS(l[2],o),d.length<s[4].length&&(d=ys(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=xS(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?eI(l[1],o)+s[2]+"/"+s[3]+gS(l[2],o):Ln(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:ys(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,h=t.length-a.length-f;return ys(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+dl(e,t,-r):_u(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?zo(0,3-v.length):"")+v})+"."+zo(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=_u(""+c);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return dl(e,t.slice(0,t.lastIndexOf(".")),r)+ys(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function pc(e,t,r){return(r|0)===r?dl(e,t,r):Vi(e,t,r)}function YZe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var pne=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function g0(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":vS(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(pne))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function ZZe(e,t,r,n){for(var a=[],s="",o=0,l="",c="t",u,d,f,h="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!vS(e,o))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(f=e.charCodeAt(++o))!==34&&o<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++o;break;case"\\":var p=e.charAt(++o),v=p==="("||p===")"?p:"t";a[a.length]={t:v,v:p},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=Hd(t,r,e.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Hd(t,r),u==null))return"";for(s=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"上":var m={t:l,v:l};if(u==null&&(u=Hd(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(m.v=u.H>=12?"P":"A"),m.t="T",h="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(m.v=u.H>=12?"PM":"AM"),m.t="T",o+=5,h="h"):e.substr(o,5).toUpperCase()==="上午/下午"?(u!=null&&(m.v=u.H>=12?"下午":"上午"),m.t="T",o+=5,h="h"):(m.t="t",++o),u==null&&m.t==="T")return"";a[a.length]=m,c=l;break;case"[":for(s=l;e.charAt(o++)!=="]"&&o<e.length;)s+=e.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(pne)){if(u==null&&(u=Hd(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",g0(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<e.length&&(l=e.charAt(o))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;e.charAt(++o)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)s+=e.charAt(o);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++o;break}var g=0,b=0,y;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=h,c="h",g<1&&(g=1);break;case"s":(y=a[o].v.match(/\.0+$/))&&(b=Math.max(b,y[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&a[o].v.match(/[Hh]/)&&(g=1),g<2&&a[o].v.match(/[Mm]/)&&(g=2),g<3&&a[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var w="",_;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=UZe(a[o].t.charCodeAt(0),a[o].v,u,b),a[o].t="t";break;case"n":case"?":for(_=o+1;a[_]!=null&&((l=a[_].t)==="?"||l==="D"||(l===" "||l==="t")&&a[_+1]!=null&&(a[_+1].t==="?"||a[_+1].t==="t"&&a[_+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[_].v==="/"||a[_].v===" "&&a[_+1]!=null&&a[_+1].t=="?"));)a[o].v+=a[_].v,a[_]={v:"",t:";"},++_;w+=a[o].v,o=_-1;break;case"G":a[o].t="t",a[o].v=Uf(t,r);break}var S="",E,j;if(w.length>0){w.charCodeAt(0)==40?(E=t<0&&w.charCodeAt(0)===45?-t:t,j=pc("n",w,E)):(E=t<0&&n>1?-t:t,j=pc("n",w,E),E<0&&a[0]&&a[0].t=="t"&&(j=j.substr(1),a[0].v="-"+a[0].v)),_=j.length-1;var N=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){N=o;break}var k=a.length;if(N===a.length&&j.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(_>=a[o].v.length-1?(_-=a[o].v.length,a[o].v=j.substr(_+1,a[o].v.length)):_<0?a[o].v="":(a[o].v=j.substr(0,_+1),_=-1),a[o].t="t",k=o);_>=0&&k<a.length&&(a[k].v=j.substr(0,_+1)+a[k].v)}else if(N!==a.length&&j.indexOf("E")===-1){for(_=j.indexOf(".")-1,o=N;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===N?a[o].v.indexOf(".")-1:a[o].v.length-1,S=a[o].v.substr(d+1);d>=0;--d)_>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(S=j.charAt(_--)+S);a[o].v=S,a[o].t="t",k=o}for(_>=0&&k<a.length&&(a[k].v=j.substr(0,_+1)+a[k].v),_=j.indexOf(".")+1,o=N;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==N)){for(d=a[o].v.indexOf(".")>-1&&o===N?a[o].v.indexOf(".")+1:0,S=a[o].v.substr(0,d);d<a[o].v.length;++d)_<j.length&&(S+=j.charAt(_++));a[o].v=S,a[o].t="t",k=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(E=n>1&&t<0&&o>0&&a[o-1].v==="-"?-t:t,a[o].v=pc(a[o].t,a[o].v,E),a[o].t="t");var C="";for(o=0;o!==a.length;++o)a[o]!=null&&(C+=a[o].v);return C}var qB=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function GB(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function JZe(e,t){var r=YZe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(qB),l=r[1].match(qB);return GB(t,o)?[n,r[0]]:GB(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,s]}function io(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:ir)[e],n==null&&(n=r.table&&r.table[WB[e]]||ir[WB[e]]),n==null&&(n=DZe[e]||"General");break}if(vS(n,0))return Uf(t,r);t instanceof Date&&(t=one(t,r.date1904));var a=JZe(n,t);if(vS(a[1]))return Uf(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return ZZe(a[1],t,r,a[0])}function of(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(ir[r]==null){t<0&&(t=r);continue}if(ir[r]==e){t=r;break}}t<0&&(t=391)}return ir[t]=e,t}function gne(){ir=RZe()}var QZe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},vne=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function eJe(e){var t=typeof e=="number"?ir[e]:e;return t=t.replace(vne,"(\\d+)"),new RegExp("^"+t+"$")}function tJe(e,t,r){var n=-1,a=-1,s=-1,o=-1,l=-1,c=-1;(t.match(vne)||[]).forEach(function(f,h){var p=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":s=p;break;case"h":o=p;break;case"s":c=p;break;case"m":o>=0?l=p:a=p;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var rJe=function(){var e={};e.version="1.2.0";function t(){for(var j=0,N=new Array(256),k=0;k!=256;++k)j=k,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,N[k]=j;return typeof Int32Array<"u"?new Int32Array(N):N}var r=t();function n(j){var N=0,k=0,C=0,T=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(C=0;C!=256;++C)T[C]=j[C];for(C=0;C!=256;++C)for(k=j[C],N=256+C;N<4096;N+=256)k=T[N]=k>>>8^j[k&255];var A=[];for(C=1;C!=16;++C)A[C-1]=typeof Int32Array<"u"?T.subarray(C*256,C*256+256):T.slice(C*256,C*256+256);return A}var a=n(r),s=a[0],o=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],p=a[8],v=a[9],m=a[10],g=a[11],b=a[12],y=a[13],w=a[14];function _(j,N){for(var k=N^-1,C=0,T=j.length;C<T;)k=k>>>8^r[(k^j.charCodeAt(C++))&255];return~k}function S(j,N){for(var k=N^-1,C=j.length-15,T=0;T<C;)k=w[j[T++]^k&255]^y[j[T++]^k>>8&255]^b[j[T++]^k>>16&255]^g[j[T++]^k>>>24]^m[j[T++]]^v[j[T++]]^p[j[T++]]^h[j[T++]]^f[j[T++]]^d[j[T++]]^u[j[T++]]^c[j[T++]]^l[j[T++]]^o[j[T++]]^s[j[T++]]^r[j[T++]];for(C+=15;T<C;)k=k>>>8^r[(k^j[T++])&255];return~k}function E(j,N){for(var k=N^-1,C=0,T=j.length,A=0,B=0;C<T;)A=j.charCodeAt(C++),A<128?k=k>>>8^r[(k^A)&255]:A<2048?(k=k>>>8^r[(k^(192|A>>6&31))&255],k=k>>>8^r[(k^(128|A&63))&255]):A>=55296&&A<57344?(A=(A&1023)+64,B=j.charCodeAt(C++)&1023,k=k>>>8^r[(k^(240|A>>8&7))&255],k=k>>>8^r[(k^(128|A>>2&63))&255],k=k>>>8^r[(k^(128|B>>6&15|(A&3)<<4))&255],k=k>>>8^r[(k^(128|B&63))&255]):(k=k>>>8^r[(k^(224|A>>12&15))&255],k=k>>>8^r[(k^(128|A>>6&63))&255],k=k>>>8^r[(k^(128|A&63))&255]);return~k}return e.table=r,e.bstr=_,e.buf=S,e.str=E,e}(),Dr=function(){var t={};t.version="1.2.1";function r(V,oe){for(var re=V.split("/"),se=oe.split("/"),ce=0,fe=0,Ce=Math.min(re.length,se.length);ce<Ce;++ce){if(fe=re[ce].length-se[ce].length)return fe;if(re[ce]!=se[ce])return re[ce]<se[ce]?-1:1}return re.length-se.length}function n(V){if(V.charAt(V.length-1)=="/")return V.slice(0,-1).indexOf("/")===-1?V:n(V.slice(0,-1));var oe=V.lastIndexOf("/");return oe===-1?V:V.slice(0,oe+1)}function a(V){if(V.charAt(V.length-1)=="/")return a(V.slice(0,-1));var oe=V.lastIndexOf("/");return oe===-1?V:V.slice(oe+1)}function s(V,oe){typeof oe=="string"&&(oe=new Date(oe));var re=oe.getHours();re=re<<6|oe.getMinutes(),re=re<<5|oe.getSeconds()>>>1,V.write_shift(2,re);var se=oe.getFullYear()-1980;se=se<<4|oe.getMonth()+1,se=se<<5|oe.getDate(),V.write_shift(2,se)}function o(V){var oe=V.read_shift(2)&65535,re=V.read_shift(2)&65535,se=new Date,ce=re&31;re>>>=5;var fe=re&15;re>>>=4,se.setMilliseconds(0),se.setFullYear(re+1980),se.setMonth(fe-1),se.setDate(ce);var Ce=oe&31;oe>>>=5;var Fe=oe&63;return oe>>>=6,se.setHours(oe),se.setMinutes(Fe),se.setSeconds(Ce<<1),se}function l(V){Pa(V,0);for(var oe={},re=0;V.l<=V.length-4;){var se=V.read_shift(2),ce=V.read_shift(2),fe=V.l+ce,Ce={};switch(se){case 21589:re=V.read_shift(1),re&1&&(Ce.mtime=V.read_shift(4)),ce>5&&(re&2&&(Ce.atime=V.read_shift(4)),re&4&&(Ce.ctime=V.read_shift(4))),Ce.mtime&&(Ce.mt=new Date(Ce.mtime*1e3));break}V.l=fe,oe[se]=Ce}return oe}var c;function u(){return c||(c={})}function d(V,oe){if(V[0]==80&&V[1]==75)return St(V,oe);if((V[0]|32)==109&&(V[1]|32)==105)return ze(V,oe);if(V.length<512)throw new Error("CFB file size "+V.length+" < 512");var re=3,se=512,ce=0,fe=0,Ce=0,Fe=0,Ee=0,je=[],Te=V.slice(0,512);Pa(Te,0);var Qe=f(Te);switch(re=Qe[0],re){case 3:se=512;break;case 4:se=4096;break;case 0:if(Qe[1]==0)return St(V,oe);default:throw new Error("Major Version: Expected 3 or 4 saw "+re)}se!==512&&(Te=V.slice(0,se),Pa(Te,28));var lt=V.slice(0,se);h(Te,re);var xt=Te.read_shift(4,"i");if(re===3&&xt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+xt);Te.l+=4,Ce=Te.read_shift(4,"i"),Te.l+=4,Te.chk("00100000","Mini Stream Cutoff Size: "),Fe=Te.read_shift(4,"i"),ce=Te.read_shift(4,"i"),Ee=Te.read_shift(4,"i"),fe=Te.read_shift(4,"i");for(var at=-1,vt=0;vt<109&&(at=Te.read_shift(4,"i"),!(at<0));++vt)je[vt]=at;var Ut=p(V,se);g(Ee,fe,Ut,se,je);var Wr=y(Ut,Ce,je,se);Wr[Ce].name="!Directory",ce>0&&Fe!==B&&(Wr[Fe].name="!MiniFAT"),Wr[je[0]].name="!FAT",Wr.fat_addrs=je,Wr.ssz=se;var Gr={},Un=[],Ua=[],za=[];w(Ce,Wr,Ut,Un,ce,Gr,Ua,Fe),v(Ua,za,Un),Un.shift();var $i={FileIndex:Ua,FullPaths:za};return oe&&oe.raw&&($i.raw={header:lt,sectors:Ut}),$i}function f(V){if(V[V.l]==80&&V[V.l+1]==75)return[0,0];V.chk(R,"Header Signature: "),V.l+=16;var oe=V.read_shift(2,"u");return[V.read_shift(2,"u"),oe]}function h(V,oe){var re=9;switch(V.l+=2,re=V.read_shift(2)){case 9:if(oe!=3)throw new Error("Sector Shift: Expected 9 saw "+re);break;case 12:if(oe!=4)throw new Error("Sector Shift: Expected 12 saw "+re);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+re)}V.chk("0600","Mini Sector Shift: "),V.chk("000000000000","Reserved: ")}function p(V,oe){for(var re=Math.ceil(V.length/oe)-1,se=[],ce=1;ce<re;++ce)se[ce-1]=V.slice(ce*oe,(ce+1)*oe);return se[re-1]=V.slice(re*oe),se}function v(V,oe,re){for(var se=0,ce=0,fe=0,Ce=0,Fe=0,Ee=re.length,je=[],Te=[];se<Ee;++se)je[se]=Te[se]=se,oe[se]=re[se];for(;Fe<Te.length;++Fe)se=Te[Fe],ce=V[se].L,fe=V[se].R,Ce=V[se].C,je[se]===se&&(ce!==-1&&je[ce]!==ce&&(je[se]=je[ce]),fe!==-1&&je[fe]!==fe&&(je[se]=je[fe])),Ce!==-1&&(je[Ce]=se),ce!==-1&&se!=je[se]&&(je[ce]=je[se],Te.lastIndexOf(ce)<Fe&&Te.push(ce)),fe!==-1&&se!=je[se]&&(je[fe]=je[se],Te.lastIndexOf(fe)<Fe&&Te.push(fe));for(se=1;se<Ee;++se)je[se]===se&&(fe!==-1&&je[fe]!==fe?je[se]=je[fe]:ce!==-1&&je[ce]!==ce&&(je[se]=je[ce]));for(se=1;se<Ee;++se)if(V[se].type!==0){if(Fe=se,Fe!=je[Fe])do Fe=je[Fe],oe[se]=oe[Fe]+"/"+oe[se];while(Fe!==0&&je[Fe]!==-1&&Fe!=je[Fe]);je[se]=-1}for(oe[0]+="/",se=1;se<Ee;++se)V[se].type!==2&&(oe[se]+="/")}function m(V,oe,re){for(var se=V.start,ce=V.size,fe=[],Ce=se;re&&ce>0&&Ce>=0;)fe.push(oe.slice(Ce*A,Ce*A+A)),ce-=A,Ce=Id(re,Ce*4);return fe.length===0?ia(0):du(fe).slice(0,V.size)}function g(V,oe,re,se,ce){var fe=B;if(V===B){if(oe!==0)throw new Error("DIFAT chain shorter than expected")}else if(V!==-1){var Ce=re[V],Fe=(se>>>2)-1;if(!Ce)return;for(var Ee=0;Ee<Fe&&(fe=Id(Ce,Ee*4))!==B;++Ee)ce.push(fe);g(Id(Ce,se-4),oe-1,re,se,ce)}}function b(V,oe,re,se,ce){var fe=[],Ce=[];ce||(ce=[]);var Fe=se-1,Ee=0,je=0;for(Ee=oe;Ee>=0;){ce[Ee]=!0,fe[fe.length]=Ee,Ce.push(V[Ee]);var Te=re[Math.floor(Ee*4/se)];if(je=Ee*4&Fe,se<4+je)throw new Error("FAT boundary crossed: "+Ee+" 4 "+se);if(!V[Te])break;Ee=Id(V[Te],je)}return{nodes:fe,data:n7([Ce])}}function y(V,oe,re,se){var ce=V.length,fe=[],Ce=[],Fe=[],Ee=[],je=se-1,Te=0,Qe=0,lt=0,xt=0;for(Te=0;Te<ce;++Te)if(Fe=[],lt=Te+oe,lt>=ce&&(lt-=ce),!Ce[lt]){Ee=[];var at=[];for(Qe=lt;Qe>=0;){at[Qe]=!0,Ce[Qe]=!0,Fe[Fe.length]=Qe,Ee.push(V[Qe]);var vt=re[Math.floor(Qe*4/se)];if(xt=Qe*4&je,se<4+xt)throw new Error("FAT boundary crossed: "+Qe+" 4 "+se);if(!V[vt]||(Qe=Id(V[vt],xt),at[Qe]))break}fe[lt]={nodes:Fe,data:n7([Ee])}}return fe}function w(V,oe,re,se,ce,fe,Ce,Fe){for(var Ee=0,je=se.length?2:0,Te=oe[V].data,Qe=0,lt=0,xt;Qe<Te.length;Qe+=128){var at=Te.slice(Qe,Qe+128);Pa(at,64),lt=at.read_shift(2),xt=iI(at,0,lt-je),se.push(xt);var vt={name:xt,type:at.read_shift(1),color:at.read_shift(1),L:at.read_shift(4,"i"),R:at.read_shift(4,"i"),C:at.read_shift(4,"i"),clsid:at.read_shift(16),state:at.read_shift(4,"i"),start:0,size:0},Ut=at.read_shift(2)+at.read_shift(2)+at.read_shift(2)+at.read_shift(2);Ut!==0&&(vt.ct=_(at,at.l-8));var Wr=at.read_shift(2)+at.read_shift(2)+at.read_shift(2)+at.read_shift(2);Wr!==0&&(vt.mt=_(at,at.l-8)),vt.start=at.read_shift(4,"i"),vt.size=at.read_shift(4,"i"),vt.size<0&&vt.start<0&&(vt.size=vt.type=0,vt.start=B,vt.name=""),vt.type===5?(Ee=vt.start,ce>0&&Ee!==B&&(oe[Ee].name="!StreamData")):vt.size>=4096?(vt.storage="fat",oe[vt.start]===void 0&&(oe[vt.start]=b(re,vt.start,oe.fat_addrs,oe.ssz)),oe[vt.start].name=vt.name,vt.content=oe[vt.start].data.slice(0,vt.size)):(vt.storage="minifat",vt.size<0?vt.size=0:Ee!==B&&vt.start!==B&&oe[Ee]&&(vt.content=m(vt,oe[Ee].data,(oe[Fe]||{}).data))),vt.content&&Pa(vt.content,0),fe[xt]=vt,Ce.push(vt)}}function _(V,oe){return new Date((mi(V,oe+4)/1e7*Math.pow(2,32)+mi(V,oe)/1e7-11644473600)*1e3)}function S(V,oe){return u(),d(c.readFileSync(V),oe)}function E(V,oe){var re=oe&&oe.type;switch(re||Rr&&Buffer.isBuffer(V)&&(re="buffer"),re||"base64"){case"file":return S(V,oe);case"base64":return d(Fo(Di(V)),oe);case"binary":return d(Fo(V),oe)}return d(V,oe)}function j(V,oe){var re=oe||{},se=re.root||"Root Entry";if(V.FullPaths||(V.FullPaths=[]),V.FileIndex||(V.FileIndex=[]),V.FullPaths.length!==V.FileIndex.length)throw new Error("inconsistent CFB structure");V.FullPaths.length===0&&(V.FullPaths[0]=se+"/",V.FileIndex[0]={name:se,type:5}),re.CLSID&&(V.FileIndex[0].clsid=re.CLSID),N(V)}function N(V){var oe="Sh33tJ5";if(!Dr.find(V,"/"+oe)){var re=ia(4);re[0]=55,re[1]=re[3]=50,re[2]=54,V.FileIndex.push({name:oe,type:2,content:re,size:4,L:69,R:69,C:69}),V.FullPaths.push(V.FullPaths[0]+oe),k(V)}}function k(V,oe){j(V);for(var re=!1,se=!1,ce=V.FullPaths.length-1;ce>=0;--ce){var fe=V.FileIndex[ce];switch(fe.type){case 0:se?re=!0:(V.FileIndex.pop(),V.FullPaths.pop());break;case 1:case 2:case 5:se=!0,isNaN(fe.R*fe.L*fe.C)&&(re=!0),fe.R>-1&&fe.L>-1&&fe.R==fe.L&&(re=!0);break;default:re=!0;break}}if(!(!re&&!oe)){var Ce=new Date(1987,1,19),Fe=0,Ee=Object.create?Object.create(null):{},je=[];for(ce=0;ce<V.FullPaths.length;++ce)Ee[V.FullPaths[ce]]=!0,V.FileIndex[ce].type!==0&&je.push([V.FullPaths[ce],V.FileIndex[ce]]);for(ce=0;ce<je.length;++ce){var Te=n(je[ce][0]);se=Ee[Te],se||(je.push([Te,{name:a(Te).replace("/",""),type:1,clsid:D,ct:Ce,mt:Ce,content:null}]),Ee[Te]=!0)}for(je.sort(function(xt,at){return r(xt[0],at[0])}),V.FullPaths=[],V.FileIndex=[],ce=0;ce<je.length;++ce)V.FullPaths[ce]=je[ce][0],V.FileIndex[ce]=je[ce][1];for(ce=0;ce<je.length;++ce){var Qe=V.FileIndex[ce],lt=V.FullPaths[ce];if(Qe.name=a(lt).replace("/",""),Qe.L=Qe.R=Qe.C=-(Qe.color=1),Qe.size=Qe.content?Qe.content.length:0,Qe.start=0,Qe.clsid=Qe.clsid||D,ce===0)Qe.C=je.length>1?1:-1,Qe.size=0,Qe.type=5;else if(lt.slice(-1)=="/"){for(Fe=ce+1;Fe<je.length&&n(V.FullPaths[Fe])!=lt;++Fe);for(Qe.C=Fe>=je.length?-1:Fe,Fe=ce+1;Fe<je.length&&n(V.FullPaths[Fe])!=n(lt);++Fe);Qe.R=Fe>=je.length?-1:Fe,Qe.type=1}else n(V.FullPaths[ce+1]||"")==n(lt)&&(Qe.R=ce+1),Qe.type=2}}}function C(V,oe){var re=oe||{};if(re.fileType=="mad")return yt(V,re);switch(k(V),re.fileType){case"zip":return be(V,re)}var se=function(xt){for(var at=0,vt=0,Ut=0;Ut<xt.FileIndex.length;++Ut){var Wr=xt.FileIndex[Ut];if(Wr.content){var Gr=Wr.content.length;Gr>0&&(Gr<4096?at+=Gr+63>>6:vt+=Gr+511>>9)}}for(var Un=xt.FullPaths.length+3>>2,Ua=at+7>>3,za=at+127>>7,$i=Ua+vt+Un+za,vo=$i+127>>7,Bc=vo<=109?0:Math.ceil((vo-109)/127);$i+vo+Bc+127>>7>vo;)Bc=++vo<=109?0:Math.ceil((vo-109)/127);var ii=[1,Bc,vo,za,Un,vt,at,0];return xt.FileIndex[0].size=at<<6,ii[7]=(xt.FileIndex[0].start=ii[0]+ii[1]+ii[2]+ii[3]+ii[4]+ii[5])+(ii[6]+7>>3),ii}(V),ce=ia(se[7]<<9),fe=0,Ce=0;{for(fe=0;fe<8;++fe)ce.write_shift(1,P[fe]);for(fe=0;fe<8;++fe)ce.write_shift(2,0);for(ce.write_shift(2,62),ce.write_shift(2,3),ce.write_shift(2,65534),ce.write_shift(2,9),ce.write_shift(2,6),fe=0;fe<3;++fe)ce.write_shift(2,0);for(ce.write_shift(4,0),ce.write_shift(4,se[2]),ce.write_shift(4,se[0]+se[1]+se[2]+se[3]-1),ce.write_shift(4,0),ce.write_shift(4,4096),ce.write_shift(4,se[3]?se[0]+se[1]+se[2]-1:B),ce.write_shift(4,se[3]),ce.write_shift(-4,se[1]?se[0]-1:B),ce.write_shift(4,se[1]),fe=0;fe<109;++fe)ce.write_shift(-4,fe<se[2]?se[1]+fe:-1)}if(se[1])for(Ce=0;Ce<se[1];++Ce){for(;fe<236+Ce*127;++fe)ce.write_shift(-4,fe<se[2]?se[1]+fe:-1);ce.write_shift(-4,Ce===se[1]-1?B:Ce+1)}var Fe=function(xt){for(Ce+=xt;fe<Ce-1;++fe)ce.write_shift(-4,fe+1);xt&&(++fe,ce.write_shift(-4,B))};for(Ce=fe=0,Ce+=se[1];fe<Ce;++fe)ce.write_shift(-4,U.DIFSECT);for(Ce+=se[2];fe<Ce;++fe)ce.write_shift(-4,U.FATSECT);Fe(se[3]),Fe(se[4]);for(var Ee=0,je=0,Te=V.FileIndex[0];Ee<V.FileIndex.length;++Ee)Te=V.FileIndex[Ee],Te.content&&(je=Te.content.length,!(je<4096)&&(Te.start=Ce,Fe(je+511>>9)));for(Fe(se[6]+7>>3);ce.l&511;)ce.write_shift(-4,U.ENDOFCHAIN);for(Ce=fe=0,Ee=0;Ee<V.FileIndex.length;++Ee)Te=V.FileIndex[Ee],Te.content&&(je=Te.content.length,!(!je||je>=4096)&&(Te.start=Ce,Fe(je+63>>6)));for(;ce.l&511;)ce.write_shift(-4,U.ENDOFCHAIN);for(fe=0;fe<se[4]<<2;++fe){var Qe=V.FullPaths[fe];if(!Qe||Qe.length===0){for(Ee=0;Ee<17;++Ee)ce.write_shift(4,0);for(Ee=0;Ee<3;++Ee)ce.write_shift(4,-1);for(Ee=0;Ee<12;++Ee)ce.write_shift(4,0);continue}Te=V.FileIndex[fe],fe===0&&(Te.start=Te.size?Te.start-1:B);var lt=fe===0&&re.root||Te.name;if(je=2*(lt.length+1),ce.write_shift(64,lt,"utf16le"),ce.write_shift(2,je),ce.write_shift(1,Te.type),ce.write_shift(1,Te.color),ce.write_shift(-4,Te.L),ce.write_shift(-4,Te.R),ce.write_shift(-4,Te.C),Te.clsid)ce.write_shift(16,Te.clsid,"hex");else for(Ee=0;Ee<4;++Ee)ce.write_shift(4,0);ce.write_shift(4,Te.state||0),ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(4,Te.start),ce.write_shift(4,Te.size),ce.write_shift(4,0)}for(fe=1;fe<V.FileIndex.length;++fe)if(Te=V.FileIndex[fe],Te.size>=4096)if(ce.l=Te.start+1<<9,Rr&&Buffer.isBuffer(Te.content))Te.content.copy(ce,ce.l,0,Te.size),ce.l+=Te.size+511&-512;else{for(Ee=0;Ee<Te.size;++Ee)ce.write_shift(1,Te.content[Ee]);for(;Ee&511;++Ee)ce.write_shift(1,0)}for(fe=1;fe<V.FileIndex.length;++fe)if(Te=V.FileIndex[fe],Te.size>0&&Te.size<4096)if(Rr&&Buffer.isBuffer(Te.content))Te.content.copy(ce,ce.l,0,Te.size),ce.l+=Te.size+63&-64;else{for(Ee=0;Ee<Te.size;++Ee)ce.write_shift(1,Te.content[Ee]);for(;Ee&63;++Ee)ce.write_shift(1,0)}if(Rr)ce.l=ce.length;else for(;ce.l<ce.length;)ce.write_shift(1,0);return ce}function T(V,oe){var re=V.FullPaths.map(function(Ee){return Ee.toUpperCase()}),se=re.map(function(Ee){var je=Ee.split("/");return je[je.length-(Ee.slice(-1)=="/"?2:1)]}),ce=!1;oe.charCodeAt(0)===47?(ce=!0,oe=re[0].slice(0,-1)+oe):ce=oe.indexOf("/")!==-1;var fe=oe.toUpperCase(),Ce=ce===!0?re.indexOf(fe):se.indexOf(fe);if(Ce!==-1)return V.FileIndex[Ce];var Fe=!fe.match(fg);for(fe=fe.replace(Ps,""),Fe&&(fe=fe.replace(fg,"!")),Ce=0;Ce<re.length;++Ce)if((Fe?re[Ce].replace(fg,"!"):re[Ce]).replace(Ps,"")==fe||(Fe?se[Ce].replace(fg,"!"):se[Ce]).replace(Ps,"")==fe)return V.FileIndex[Ce];return null}var A=64,B=-2,R="d0cf11e0a1b11ae1",P=[208,207,17,224,161,177,26,225],D="00000000000000000000000000000000",U={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:B,FREESECT:-1,HEADER_SIGNATURE:R,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:D,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function M(V,oe,re){u();var se=C(V,re);c.writeFileSync(oe,se)}function F(V){for(var oe=new Array(V.length),re=0;re<V.length;++re)oe[re]=String.fromCharCode(V[re]);return oe.join("")}function K(V,oe){var re=C(V,oe);switch(oe&&oe.type||"buffer"){case"file":return u(),c.writeFileSync(oe.filename,re),re;case"binary":return typeof re=="string"?re:F(re);case"base64":return LB(typeof re=="string"?re:F(re));case"buffer":if(Rr)return Buffer.isBuffer(re)?re:nh(re);case"array":return typeof re=="string"?Fo(re):re}return re}var X;function O(V){try{var oe=V.InflateRaw,re=new oe;if(re._processChunk(new Uint8Array([3,0]),re._finishFlushFlag),re.bytesRead)X=V;else throw new Error("zlib does not expose bytesRead")}catch(se){console.error("cannot use native zlib: "+(se.message||se))}}function W(V,oe){if(!X)return Ze(V,oe);var re=X.InflateRaw,se=new re,ce=se._processChunk(V.slice(V.l),se._finishFlushFlag);return V.l+=se.bytesRead,ce}function L(V){return X?X.deflateRawSync(V):Ye(V)}var H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ee=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Z(V){var oe=(V<<1|V<<11)&139536|(V<<5|V<<15)&558144;return(oe>>16|oe>>8|oe)&255}for(var I=typeof Uint8Array<"u",Q=I?new Uint8Array(256):[],ve=0;ve<256;++ve)Q[ve]=Z(ve);function z(V,oe){var re=Q[V&255];return oe<=8?re>>>8-oe:(re=re<<8|Q[V>>8&255],oe<=16?re>>>16-oe:(re=re<<8|Q[V>>16&255],re>>>24-oe))}function we(V,oe){var re=oe&7,se=oe>>>3;return(V[se]|(re<=6?0:V[se+1]<<8))>>>re&3}function Re(V,oe){var re=oe&7,se=oe>>>3;return(V[se]|(re<=5?0:V[se+1]<<8))>>>re&7}function Pe(V,oe){var re=oe&7,se=oe>>>3;return(V[se]|(re<=4?0:V[se+1]<<8))>>>re&15}function De(V,oe){var re=oe&7,se=oe>>>3;return(V[se]|(re<=3?0:V[se+1]<<8))>>>re&31}function Ne(V,oe){var re=oe&7,se=oe>>>3;return(V[se]|(re<=1?0:V[se+1]<<8))>>>re&127}function J(V,oe,re){var se=oe&7,ce=oe>>>3,fe=(1<<re)-1,Ce=V[ce]>>>se;return re<8-se||(Ce|=V[ce+1]<<8-se,re<16-se)||(Ce|=V[ce+2]<<16-se,re<24-se)||(Ce|=V[ce+3]<<24-se),Ce&fe}function Y(V,oe,re){var se=oe&7,ce=oe>>>3;return se<=5?V[ce]|=(re&7)<<se:(V[ce]|=re<<se&255,V[ce+1]=(re&7)>>8-se),oe+3}function ae(V,oe,re){var se=oe&7,ce=oe>>>3;return re=(re&1)<<se,V[ce]|=re,oe+1}function ge(V,oe,re){var se=oe&7,ce=oe>>>3;return re<<=se,V[ce]|=re&255,re>>>=8,V[ce+1]=re,oe+8}function Se(V,oe,re){var se=oe&7,ce=oe>>>3;return re<<=se,V[ce]|=re&255,re>>>=8,V[ce+1]=re&255,V[ce+2]=re>>>8,oe+16}function te(V,oe){var re=V.length,se=2*re>oe?2*re:oe+5,ce=0;if(re>=oe)return V;if(Rr){var fe=BB(se);if(V.copy)V.copy(fe);else for(;ce<V.length;++ce)fe[ce]=V[ce];return fe}else if(I){var Ce=new Uint8Array(se);if(Ce.set)Ce.set(V);else for(;ce<re;++ce)Ce[ce]=V[ce];return Ce}return V.length=se,V}function me(V){for(var oe=new Array(V),re=0;re<V;++re)oe[re]=0;return oe}function ke(V,oe,re){var se=1,ce=0,fe=0,Ce=0,Fe=0,Ee=V.length,je=I?new Uint16Array(32):me(32);for(fe=0;fe<32;++fe)je[fe]=0;for(fe=Ee;fe<re;++fe)V[fe]=0;Ee=V.length;var Te=I?new Uint16Array(Ee):me(Ee);for(fe=0;fe<Ee;++fe)je[ce=V[fe]]++,se<ce&&(se=ce),Te[fe]=0;for(je[0]=0,fe=1;fe<=se;++fe)je[fe+16]=Fe=Fe+je[fe-1]<<1;for(fe=0;fe<Ee;++fe)Fe=V[fe],Fe!=0&&(Te[fe]=je[Fe+16]++);var Qe=0;for(fe=0;fe<Ee;++fe)if(Qe=V[fe],Qe!=0)for(Fe=z(Te[fe],se)>>se-Qe,Ce=(1<<se+4-Qe)-1;Ce>=0;--Ce)oe[Fe|Ce<<Qe]=Qe&15|fe<<4;return se}var he=I?new Uint16Array(512):me(512),et=I?new Uint16Array(32):me(32);if(!I){for(var nt=0;nt<512;++nt)he[nt]=0;for(nt=0;nt<32;++nt)et[nt]=0}(function(){for(var V=[],oe=0;oe<32;oe++)V.push(5);ke(V,et,32);var re=[];for(oe=0;oe<=143;oe++)re.push(8);for(;oe<=255;oe++)re.push(9);for(;oe<=279;oe++)re.push(7);for(;oe<=287;oe++)re.push(8);ke(re,he,288)})();var Oe=function(){for(var oe=I?new Uint8Array(32768):[],re=0,se=0;re<q.length-1;++re)for(;se<q[re+1];++se)oe[se]=re;for(;se<32768;++se)oe[se]=29;var ce=I?new Uint8Array(259):[];for(re=0,se=0;re<ee.length-1;++re)for(;se<ee[re+1];++se)ce[se]=re;function fe(Fe,Ee){for(var je=0;je<Fe.length;){var Te=Math.min(65535,Fe.length-je),Qe=je+Te==Fe.length;for(Ee.write_shift(1,+Qe),Ee.write_shift(2,Te),Ee.write_shift(2,~Te&65535);Te-- >0;)Ee[Ee.l++]=Fe[je++]}return Ee.l}function Ce(Fe,Ee){for(var je=0,Te=0,Qe=I?new Uint16Array(32768):[];Te<Fe.length;){var lt=Math.min(65535,Fe.length-Te);if(lt<10){for(je=Y(Ee,je,+(Te+lt==Fe.length)),je&7&&(je+=8-(je&7)),Ee.l=je/8|0,Ee.write_shift(2,lt),Ee.write_shift(2,~lt&65535);lt-- >0;)Ee[Ee.l++]=Fe[Te++];je=Ee.l*8;continue}je=Y(Ee,je,+(Te+lt==Fe.length)+2);for(var xt=0;lt-- >0;){var at=Fe[Te];xt=(xt<<5^at)&32767;var vt=-1,Ut=0;if((vt=Qe[xt])&&(vt|=Te&-32768,vt>Te&&(vt-=32768),vt<Te))for(;Fe[vt+Ut]==Fe[Te+Ut]&&Ut<250;)++Ut;if(Ut>2){at=ce[Ut],at<=22?je=ge(Ee,je,Q[at+1]>>1)-1:(ge(Ee,je,3),je+=5,ge(Ee,je,Q[at-23]>>5),je+=3);var Wr=at<8?0:at-4>>2;Wr>0&&(Se(Ee,je,Ut-ee[at]),je+=Wr),at=oe[Te-vt],je=ge(Ee,je,Q[at]>>3),je-=3;var Gr=at<4?0:at-2>>1;Gr>0&&(Se(Ee,je,Te-vt-q[at]),je+=Gr);for(var Un=0;Un<Ut;++Un)Qe[xt]=Te&32767,xt=(xt<<5^Fe[Te])&32767,++Te;lt-=Ut-1}else at<=143?at=at+48:je=ae(Ee,je,1),je=ge(Ee,je,Q[at]),Qe[xt]=Te&32767,++Te}je=ge(Ee,je,0)-1}return Ee.l=(je+7)/8|0,Ee.l}return function(Ee,je){return Ee.length<8?fe(Ee,je):Ce(Ee,je)}}();function Ye(V){var oe=ia(50+Math.floor(V.length*1.1)),re=Oe(V,oe);return oe.slice(0,re)}var ye=I?new Uint16Array(32768):me(32768),le=I?new Uint16Array(32768):me(32768),_e=I?new Uint16Array(128):me(128),Be=1,Ie=1;function it(V,oe){var re=De(V,oe)+257;oe+=5;var se=De(V,oe)+1;oe+=5;var ce=Pe(V,oe)+4;oe+=4;for(var fe=0,Ce=I?new Uint8Array(19):me(19),Fe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ee=1,je=I?new Uint8Array(8):me(8),Te=I?new Uint8Array(8):me(8),Qe=Ce.length,lt=0;lt<ce;++lt)Ce[H[lt]]=fe=Re(V,oe),Ee<fe&&(Ee=fe),je[fe]++,oe+=3;var xt=0;for(je[0]=0,lt=1;lt<=Ee;++lt)Te[lt]=xt=xt+je[lt-1]<<1;for(lt=0;lt<Qe;++lt)(xt=Ce[lt])!=0&&(Fe[lt]=Te[xt]++);var at=0;for(lt=0;lt<Qe;++lt)if(at=Ce[lt],at!=0){xt=Q[Fe[lt]]>>8-at;for(var vt=(1<<7-at)-1;vt>=0;--vt)_e[xt|vt<<at]=at&7|lt<<3}var Ut=[];for(Ee=1;Ut.length<re+se;)switch(xt=_e[Ne(V,oe)],oe+=xt&7,xt>>>=3){case 16:for(fe=3+we(V,oe),oe+=2,xt=Ut[Ut.length-1];fe-- >0;)Ut.push(xt);break;case 17:for(fe=3+Re(V,oe),oe+=3;fe-- >0;)Ut.push(0);break;case 18:for(fe=11+Ne(V,oe),oe+=7;fe-- >0;)Ut.push(0);break;default:Ut.push(xt),Ee<xt&&(Ee=xt);break}var Wr=Ut.slice(0,re),Gr=Ut.slice(re);for(lt=re;lt<286;++lt)Wr[lt]=0;for(lt=se;lt<30;++lt)Gr[lt]=0;return Be=ke(Wr,ye,286),Ie=ke(Gr,le,30),oe}function tt(V,oe){if(V[0]==3&&!(V[1]&3))return[Zu(oe),2];for(var re=0,se=0,ce=BB(oe||1<<18),fe=0,Ce=ce.length>>>0,Fe=0,Ee=0;!(se&1);){if(se=Re(V,re),re+=3,se>>>1)se>>1==1?(Fe=9,Ee=5):(re=it(V,re),Fe=Be,Ee=Ie);else{re&7&&(re+=8-(re&7));var je=V[re>>>3]|V[(re>>>3)+1]<<8;if(re+=32,je>0)for(!oe&&Ce<fe+je&&(ce=te(ce,fe+je),Ce=ce.length);je-- >0;)ce[fe++]=V[re>>>3],re+=8;continue}for(;;){!oe&&Ce<fe+32767&&(ce=te(ce,fe+32767),Ce=ce.length);var Te=J(V,re,Fe),Qe=se>>>1==1?he[Te]:ye[Te];if(re+=Qe&15,Qe>>>=4,!(Qe>>>8&255))ce[fe++]=Qe;else{if(Qe==256)break;Qe-=257;var lt=Qe<8?0:Qe-4>>2;lt>5&&(lt=0);var xt=fe+ee[Qe];lt>0&&(xt+=J(V,re,lt),re+=lt),Te=J(V,re,Ee),Qe=se>>>1==1?et[Te]:le[Te],re+=Qe&15,Qe>>>=4;var at=Qe<4?0:Qe-2>>1,vt=q[Qe];for(at>0&&(vt+=J(V,re,at),re+=at),!oe&&Ce<xt&&(ce=te(ce,xt+100),Ce=ce.length);fe<xt;)ce[fe]=ce[fe-vt],++fe}}}return oe?[ce,re+7>>>3]:[ce.slice(0,fe),re+7>>>3]}function Ze(V,oe){var re=V.slice(V.l||0),se=tt(re,oe);return V.l+=se[1],se[0]}function ct(V,oe){if(V)typeof console<"u"&&console.error(oe);else throw new Error(oe)}function St(V,oe){var re=V;Pa(re,0);var se=[],ce=[],fe={FileIndex:se,FullPaths:ce};j(fe,{root:oe.root});for(var Ce=re.length-4;(re[Ce]!=80||re[Ce+1]!=75||re[Ce+2]!=5||re[Ce+3]!=6)&&Ce>=0;)--Ce;re.l=Ce+4,re.l+=4;var Fe=re.read_shift(2);re.l+=6;var Ee=re.read_shift(4);for(re.l=Ee,Ce=0;Ce<Fe;++Ce){re.l+=20;var je=re.read_shift(4),Te=re.read_shift(4),Qe=re.read_shift(2),lt=re.read_shift(2),xt=re.read_shift(2);re.l+=8;var at=re.read_shift(4),vt=l(re.slice(re.l+Qe,re.l+Qe+lt));re.l+=Qe+lt+xt;var Ut=re.l;re.l=at+4,ie(re,je,Te,fe,vt),re.l=Ut}return fe}function ie(V,oe,re,se,ce){V.l+=2;var fe=V.read_shift(2),Ce=V.read_shift(2),Fe=o(V);if(fe&8257)throw new Error("Unsupported ZIP encryption");for(var Ee=V.read_shift(4),je=V.read_shift(4),Te=V.read_shift(4),Qe=V.read_shift(2),lt=V.read_shift(2),xt="",at=0;at<Qe;++at)xt+=String.fromCharCode(V[V.l++]);if(lt){var vt=l(V.slice(V.l,V.l+lt));(vt[21589]||{}).mt&&(Fe=vt[21589].mt),((ce||{})[21589]||{}).mt&&(Fe=ce[21589].mt)}V.l+=lt;var Ut=V.slice(V.l,V.l+je);switch(Ce){case 8:Ut=W(V,Te);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ce)}var Wr=!1;fe&8&&(Ee=V.read_shift(4),Ee==134695760&&(Ee=V.read_shift(4),Wr=!0),je=V.read_shift(4),Te=V.read_shift(4)),je!=oe&&ct(Wr,"Bad compressed size: "+oe+" != "+je),Te!=re&&ct(Wr,"Bad uncompressed size: "+re+" != "+Te),er(se,xt,Ut,{unsafe:!0,mt:Fe})}function be(V,oe){var re=oe||{},se=[],ce=[],fe=ia(1),Ce=re.compression?8:0,Fe=0,Ee=0,je=0,Te=0,Qe=0,lt=V.FullPaths[0],xt=lt,at=V.FileIndex[0],vt=[],Ut=0;for(Ee=1;Ee<V.FullPaths.length;++Ee)if(xt=V.FullPaths[Ee].slice(lt.length),at=V.FileIndex[Ee],!(!at.size||!at.content||xt=="Sh33tJ5")){var Wr=Te,Gr=ia(xt.length);for(je=0;je<xt.length;++je)Gr.write_shift(1,xt.charCodeAt(je)&127);Gr=Gr.slice(0,Gr.l),vt[Qe]=rJe.buf(at.content,0);var Un=at.content;Ce==8&&(Un=L(Un)),fe=ia(30),fe.write_shift(4,67324752),fe.write_shift(2,20),fe.write_shift(2,Fe),fe.write_shift(2,Ce),at.mt?s(fe,at.mt):fe.write_shift(4,0),fe.write_shift(-4,vt[Qe]),fe.write_shift(4,Un.length),fe.write_shift(4,at.content.length),fe.write_shift(2,Gr.length),fe.write_shift(2,0),Te+=fe.length,se.push(fe),Te+=Gr.length,se.push(Gr),Te+=Un.length,se.push(Un),fe=ia(46),fe.write_shift(4,33639248),fe.write_shift(2,0),fe.write_shift(2,20),fe.write_shift(2,Fe),fe.write_shift(2,Ce),fe.write_shift(4,0),fe.write_shift(-4,vt[Qe]),fe.write_shift(4,Un.length),fe.write_shift(4,at.content.length),fe.write_shift(2,Gr.length),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(4,0),fe.write_shift(4,Wr),Ut+=fe.l,ce.push(fe),Ut+=Gr.length,ce.push(Gr),++Qe}return fe=ia(22),fe.write_shift(4,101010256),fe.write_shift(2,0),fe.write_shift(2,0),fe.write_shift(2,Qe),fe.write_shift(2,Qe),fe.write_shift(4,Ut),fe.write_shift(4,Te),fe.write_shift(2,0),du([du(se),du(ce),fe])}var Je={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Et(V,oe){if(V.ctype)return V.ctype;var re=V.name||"",se=re.match(/\.([^\.]+)$/);return se&&Je[se[1]]||oe&&(se=(re=oe).match(/[\.\\]([^\.\\])+$/),se&&Je[se[1]])?Je[se[1]]:"application/octet-stream"}function Ke(V){for(var oe=LB(V),re=[],se=0;se<oe.length;se+=76)re.push(oe.slice(se,se+76));return re.join(`\r
`)+`\r
`}function Pt(V){var oe=V.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(je){var Te=je.charCodeAt(0).toString(16).toUpperCase();return"="+(Te.length==1?"0"+Te:Te)});oe=oe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),oe.charAt(0)==`
`&&(oe="=0D"+oe.slice(1)),oe=oe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var re=[],se=oe.split(`\r
`),ce=0;ce<se.length;++ce){var fe=se[ce];if(fe.length==0){re.push("");continue}for(var Ce=0;Ce<fe.length;){var Fe=76,Ee=fe.slice(Ce,Ce+Fe);Ee.charAt(Fe-1)=="="?Fe--:Ee.charAt(Fe-2)=="="?Fe-=2:Ee.charAt(Fe-3)=="="&&(Fe-=3),Ee=fe.slice(Ce,Ce+Fe),Ce+=Fe,Ce<fe.length&&(Ee+="="),re.push(Ee)}}return re.join(`\r
`)}function Ht(V){for(var oe=[],re=0;re<V.length;++re){for(var se=V[re];re<=V.length&&se.charAt(se.length-1)=="=";)se=se.slice(0,se.length-1)+V[++re];oe.push(se)}for(var ce=0;ce<oe.length;++ce)oe[ce]=oe[ce].replace(/[=][0-9A-Fa-f]{2}/g,function(fe){return String.fromCharCode(parseInt(fe.slice(1),16))});return Fo(oe.join(`\r
`))}function pe(V,oe,re){for(var se="",ce="",fe="",Ce,Fe=0;Fe<10;++Fe){var Ee=oe[Fe];if(!Ee||Ee.match(/^\s*$/))break;var je=Ee.match(/^(.*?):\s*([^\s].*)$/);if(je)switch(je[1].toLowerCase()){case"content-location":se=je[2].trim();break;case"content-type":fe=je[2].trim();break;case"content-transfer-encoding":ce=je[2].trim();break}}switch(++Fe,ce.toLowerCase()){case"base64":Ce=Fo(Di(oe.slice(Fe).join("")));break;case"quoted-printable":Ce=Ht(oe.slice(Fe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ce)}var Te=er(V,se.slice(re.length),Ce,{unsafe:!0});fe&&(Te.ctype=fe)}function ze(V,oe){if(F(V.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var re=oe&&oe.root||"",se=(Rr&&Buffer.isBuffer(V)?V.toString("binary"):F(V)).split(`\r
`),ce=0,fe="";for(ce=0;ce<se.length;++ce)if(fe=se[ce],!!/^Content-Location:/i.test(fe)&&(fe=fe.slice(fe.indexOf("file")),re||(re=fe.slice(0,fe.lastIndexOf("/")+1)),fe.slice(0,re.length)!=re))for(;re.length>0&&(re=re.slice(0,re.length-1),re=re.slice(0,re.lastIndexOf("/")+1),fe.slice(0,re.length)!=re););var Ce=(se[1]||"").match(/boundary="(.*?)"/);if(!Ce)throw new Error("MAD cannot find boundary");var Fe="--"+(Ce[1]||""),Ee=[],je=[],Te={FileIndex:Ee,FullPaths:je};j(Te);var Qe,lt=0;for(ce=0;ce<se.length;++ce){var xt=se[ce];xt!==Fe&&xt!==Fe+"--"||(lt++&&pe(Te,se.slice(Qe,ce),re),Qe=ce)}return Te}function yt(V,oe){var re=oe||{},se=re.boundary||"SheetJS";se="------="+se;for(var ce=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+se.slice(2)+'"',"","",""],fe=V.FullPaths[0],Ce=fe,Fe=V.FileIndex[0],Ee=1;Ee<V.FullPaths.length;++Ee)if(Ce=V.FullPaths[Ee].slice(fe.length),Fe=V.FileIndex[Ee],!(!Fe.size||!Fe.content||Ce=="Sh33tJ5")){Ce=Ce.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ut){return"_x"+Ut.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ut){return"_u"+Ut.charCodeAt(0).toString(16)+"_"});for(var je=Fe.content,Te=Rr&&Buffer.isBuffer(je)?je.toString("binary"):F(je),Qe=0,lt=Math.min(1024,Te.length),xt=0,at=0;at<=lt;++at)(xt=Te.charCodeAt(at))>=32&&xt<128&&++Qe;var vt=Qe>=lt*4/5;ce.push(se),ce.push("Content-Location: "+(re.root||"file:///C:/SheetJS/")+Ce),ce.push("Content-Transfer-Encoding: "+(vt?"quoted-printable":"base64")),ce.push("Content-Type: "+Et(Fe,Ce)),ce.push(""),ce.push(vt?Pt(Te):Ke(Te))}return ce.push(se+`--\r
`),ce.join(`\r
`)}function Rt(V){var oe={};return j(oe,V),oe}function er(V,oe,re,se){var ce=se&&se.unsafe;ce||j(V);var fe=!ce&&Dr.find(V,oe);if(!fe){var Ce=V.FullPaths[0];oe.slice(0,Ce.length)==Ce?Ce=oe:(Ce.slice(-1)!="/"&&(Ce+="/"),Ce=(Ce+oe).replace("//","/")),fe={name:a(oe),type:2},V.FileIndex.push(fe),V.FullPaths.push(Ce),ce||Dr.utils.cfb_gc(V)}return fe.content=re,fe.size=re?re.length:0,se&&(se.CLSID&&(fe.clsid=se.CLSID),se.mt&&(fe.mt=se.mt),se.ct&&(fe.ct=se.ct)),fe}function Dt(V,oe){j(V);var re=Dr.find(V,oe);if(re){for(var se=0;se<V.FileIndex.length;++se)if(V.FileIndex[se]==re)return V.FileIndex.splice(se,1),V.FullPaths.splice(se,1),!0}return!1}function ar(V,oe,re){j(V);var se=Dr.find(V,oe);if(se){for(var ce=0;ce<V.FileIndex.length;++ce)if(V.FileIndex[ce]==se)return V.FileIndex[ce].name=a(re),V.FullPaths[ce]=re,!0}return!1}function qr(V){k(V,!0)}return t.find=T,t.read=E,t.parse=d,t.write=K,t.writeFile=M,t.utils={cfb_new:Rt,cfb_add:er,cfb_del:Dt,cfb_mov:ar,cfb_gc:qr,ReadShift:Vg,CheckField:Lne,prep_blob:Pa,bconcat:du,use_zlib:O,_deflateRaw:Ye,_inflateRaw:Ze,consts:U},t}();function nJe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Ol(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function rI(e){for(var t=[],r=Ol(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}var yS=new Date(1899,11,30,0,0,0);function Ds(e,t){var r=e.getTime(),n=yS.getTime()+(e.getTimezoneOffset()-yS.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var xne=new Date,aJe=yS.getTime()+(xne.getTimezoneOffset()-yS.getTimezoneOffset())*6e4,KB=xne.getTimezoneOffset();function eE(e){var t=new Date;return t.setTime(e*24*60*60*1e3+aJe),t.getTimezoneOffset()!==KB&&t.setTime(t.getTime()+(t.getTimezoneOffset()-KB)*6e4),t}function sJe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var XB=new Date("2017-02-19T19:06:09.000Z"),yne=isNaN(XB.getFullYear())?new Date("2/19/17"):XB,iJe=yne.getFullYear()==2017;function Sa(e,t){var r=new Date(e);if(iJe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(yne.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function zf(e,t){if(Rr&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return mg(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return mg(sne(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return mg(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return mg(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Ia(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Ia(e[r]));return t}function Ln(e,t){for(var r="";r.length<t;)r+=e;return r}function Yo(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var oJe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Dp(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&oJe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var lJe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),o=[s[0]],l=1;l<s.length;++l)o.push(a),o.push(s[l]);return o}}();function bne(e){return e?e.content&&e.type?zf(e.content,!0):e.data?dg(e.data):e.asNodeBuffer&&Rr?dg(e.asNodeBuffer().toString("binary")):e.asBinary?dg(e.asBinary()):e._data&&e._data.getContent?dg(zf(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function wne(e){if(!e)return null;if(e.data)return $B(e.data);if(e.asNodeBuffer&&Rr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?$B(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function cJe(e){return e&&e.name.slice(-4)===".bin"?wne(e):bne(e)}function Hi(e,t){for(var r=e.FullPaths||Ol(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var o=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||a==o)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function nI(e,t){var r=Hi(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Jn(e,t,r){if(!r)return cJe(nI(e,t));if(!t)return null;try{return Jn(e,t)}catch{return null}}function yi(e,t,r){if(!r)return bne(nI(e,t));if(!t)return null;try{return yi(e,t)}catch{return null}}function uJe(e,t,r){return wne(nI(e,t))}function YB(e){for(var t=e.FullPaths||Ol(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function dJe(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Rr?n=nh(r):n=AZe(r),Dr.utils.cfb_add(e,t,n)}Dr.utils.cfb_add(e,t,r)}else e.file(t,r)}function _ne(e,t){switch(t.type){case"base64":return Dr.read(e,{type:"base64"});case"binary":return Dr.read(e,{type:"binary"});case"buffer":case"array":return Dr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function hg(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Sne=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,fJe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,ZB=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,hJe=/<[^>]*>/g,ds=Sne.match(ZB)?ZB:hJe,mJe=/<\w*:/,pJe=/<(\/?)\w+:/;function Zt(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var o=e.match(fJe),l=0,c="",u=0,d="",f="",h=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+h,f.length-h),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var p=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[p]&&d.slice(l-3,l)=="ext")continue;n[p]=c,n[p.toLowerCase()]=c}}return n}function $l(e){return e.replace(pJe,"<$1")}var jne={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},gJe=rI(jne),Ur=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(l,c){return jne[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,o)+r(a.slice(o+3))}}(),vJe=/[&<>'"]/g,xJe=/[\u0000-\u001f]/g;function aI(e){var t=e+"";return t.replace(vJe,function(r){return gJe[r]}).replace(/\n/g,"<br/>").replace(xJe,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var JB=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function wn(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function pC(e){for(var t="",r=0,n=0,a=0,s=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,t+=String.fromCharCode(o);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function QB(e){var t=Zu(2*e.length),r,n,a=1,s=0,o=0,l;for(n=0;n<e.length;n+=a)a=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[s++]=o&255,t[s++]=o>>>8,o=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function e7(e){return nh(e,"binary").toString("utf8")}var s1="foo bar bazâð£",dn=Rr&&(e7(s1)==pC(s1)&&e7||QB(s1)==pC(s1)&&QB)||pC,mg=Rr?function(e){return nh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Dx=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Ene=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),yJe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),bJe=/<\/?(?:vt:)?variant>/g,wJe=/<(?:vt:)([^>]*)>([\s\S]*)</;function t7(e,t){var r=Zt(e),n=e.match(yJe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var o=s.replace(bJe,"").match(wJe);o&&a.push({v:dn(o[2]),t:o[1]})}),a}var _Je=/(^\s|\s$|\n)/;function SJe(e){return Ol(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function jJe(e,t,r){return"<"+e+(r!=null?SJe(r):"")+(t!=null?(t.match(_Je)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function sI(e){if(Rr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return dn(ah(QM(e)));throw new Error("Bad input format: expected Buffer or string")}var Mx=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,EJe={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},NJe=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function CJe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function kJe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,o=n?-t:t;isFinite(o)?o==0?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var l=0;l<=5;++l,s/=256)e[r+l]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var r7=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},n7=Rr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:nh(t)})):r7(e)}:r7,a7=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(lc(e,a)));return n.join("").replace(Ps,"")},iI=Rr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Ps,""):a7(e,t,r)}:a7,s7=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},Nne=Rr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):s7(e,t,r)}:s7,i7=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode($h(e,a)));return n.join("")},My=Rr?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):i7(t,r,n)}:i7,Cne=function(e,t){var r=mi(e,t);return r>0?My(e,t+4,t+4+r-1):""},kne=Cne,Tne=function(e,t){var r=mi(e,t);return r>0?My(e,t+4,t+4+r-1):""},Ane=Tne,Pne=function(e,t){var r=2*mi(e,t);return r>0?My(e,t+4,t+4+r-1):""},One=Pne,Rne=function(t,r){var n=mi(t,r);return n>0?iI(t,r+4,r+4+n):""},Dne=Rne,Mne=function(e,t){var r=mi(e,t);return r>0?My(e,t+4,t+4+r):""},Ine=Mne,$ne=function(e,t){return CJe(e,t)},bS=$ne,Fne=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Rr&&(kne=function(t,r){if(!Buffer.isBuffer(t))return Cne(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Ane=function(t,r){if(!Buffer.isBuffer(t))return Tne(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},One=function(t,r){if(!Buffer.isBuffer(t))return Pne(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},Dne=function(t,r){if(!Buffer.isBuffer(t))return Rne(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},Ine=function(t,r){if(!Buffer.isBuffer(t))return Mne(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},bS=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):$ne(t,r)},Fne=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var $h=function(e,t){return e[t]},lc=function(e,t){return e[t+1]*256+e[t]},TJe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},mi=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Id=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},AJe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Vg(e,t){var r="",n,a,s=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,Rr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(lc(this,u)),u+=2;e*=2;break;case"utf8":r=My(this,this.l,this.l+e);break;case"utf16le":e*=2,r=iI(this,this.l,this.l+e);break;case"wstr":return Vg.call(this,e,"dbcs");case"lpstr-ansi":r=kne(this,this.l),e=4+mi(this,this.l);break;case"lpstr-cp":r=Ane(this,this.l),e=4+mi(this,this.l);break;case"lpwstr":r=One(this,this.l),e=4+2*mi(this,this.l);break;case"lpp4":e=4+mi(this,this.l),r=Dne(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+mi(this,this.l),r=Ine(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=$h(this,this.l+e++))!==0;)s.push(a1(o));r=s.join("");break;case"_wstr":for(e=0,r="";(o=lc(this,this.l+e))!==0;)s.push(a1(o)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=$h(this,u),this.l=u+1,l=Vg.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(a1(lc(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=$h(this,u),this.l=u+1,l=Vg.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(a1($h(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=$h(this,this.l),this.l++,n;case 2:return n=(t==="i"?TJe:lc)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?Id:AJe)(this,this.l),this.l+=4,n):(a=mi(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=bS(this,this.l):a=bS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=Nne(this,this.l,e);break}}return this.l+=e,r}var PJe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},OJe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},RJe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function DJe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)RJe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,PJe(this,t,this.l);break;case 8:if(n=8,r==="f"){kJe(this,t,this.l);break}case 16:break;case-4:n=4,OJe(this,t,this.l);break}return this.l+=n,this}function Lne(e,t){var r=Nne(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Pa(e,t){e.l=t,e.read_shift=Vg,e.chk=Lne,e.write_shift=DJe}function us(e,t){e.l+=t}function ia(e){var t=Zu(e);return Pa(t,0),t}function Lc(e,t,r){if(e){var n,a,s;Pa(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=NS[l]||NS[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,l))return}}}function FO(){var e=[],t=Rr?256:2048,r=function(u){var d=ia(u);return Pa(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},o=function(){return a(),du(e)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:l,end:o,_bufs:e}}function Hg(e,t,r){var n=Ia(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function o7(e,t,r){var n=Ia(e);return n.s=Hg(n.s,t.s,r),n.e=Hg(n.e,t.s,r),n}function qg(e,t){if(e.cRel&&e.c<0)for(e=Ia(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ia(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=tr(e);return!e.cRel&&e.cRel!=null&&(r=$Je(r)),!e.rRel&&e.rRel!=null&&(r=MJe(r)),r}function gC(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+ua(e.s.c)+":"+(e.e.cRel?"":"$")+ua(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+$a(e.s.r)+":"+(e.e.rRel?"":"$")+$a(e.e.r):qg(e.s,t.biff)+":"+qg(e.e,t.biff)}function oI(e){return parseInt(IJe(e),10)-1}function $a(e){return""+(e+1)}function MJe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function IJe(e){return e.replace(/\$(\d+)$/,"$1")}function lI(e){for(var t=FJe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function ua(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function $Je(e){return e.replace(/^([A-Z])/,"$$$1")}function FJe(e){return e.replace(/^\$([A-Z])/,"$1")}function LJe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Es(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function tr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function v0(e){var t=e.indexOf(":");return t==-1?{s:Es(e),e:Es(e)}:{s:Es(e.slice(0,t)),e:Es(e.slice(t+1))}}function $r(e,t){return typeof t>"u"||typeof t=="number"?$r(e.s,e.e):(typeof e!="string"&&(e=tr(e)),typeof t!="string"&&(t=tr(t)),e==t?e:e+":"+t)}function Bn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function l7(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=io(e.z,r?Ds(t):t)}catch{}try{return e.w=io((e.XF||{}).numFmtId||(r?14:0),r?Ds(t):t)}catch{return""+t}}function Tc(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?oh[e.v]||e.v:t==null?l7(e,e.v):l7(e,t))}function md(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function Bne(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Es(n.origin):n.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Bn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var p={v:t[f][h]},v=o+f,m=l+h;if(u.s.r>v&&(u.s.r=v),u.s.c>m&&(u.s.c=m),u.e.r<v&&(u.e.r=v),u.e.c<m&&(u.e.c=m),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))p=t[f][h];else if(Array.isArray(p.v)&&(p.f=t[f][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||ir[14],n.cellDates?(p.t="d",p.w=io(p.z,Ds(p.v))):(p.t="n",p.v=Ds(p.v),p.w=io(p.z,p.v))):p.t="s";if(a)s[v]||(s[v]=[]),s[v][m]&&s[v][m].z&&(p.z=s[v][m].z),s[v][m]=p;else{var g=tr({c:m,r:v});s[g]&&s[g].z&&(p.z=s[g].z),s[g]=p}}}return u.s.c<1e7&&(s["!ref"]=$r(u)),s}function x0(e,t){return Bne(null,e,t)}function BJe(e){return e.read_shift(4,"i")}function is(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function UJe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function cI(e,t){var r=e.l,n=e.read_shift(1),a=is(e),s=[],o={t:a,h:a};if(n&1){for(var l=e.read_shift(4),c=0;c!=l;++c)s.push(UJe(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}var zJe=cI;function go(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function sh(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var WJe=is;function uI(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var VJe=is,LO=uI;function dI(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?bS([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Id(t,0)>>2;return r?a/100:a}function Une(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var ih=Une;function as(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function HJe(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=lf[a];u&&(t.rgb=$x(u));break;case 2:t.rgb=$x([o,l,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function qJe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function zne(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function GJe(e){return zne(e,1)}function KJe(e){return zne(e,2)}var fI=2,Vs=3,i1=11,c7=12,wS=19,o1=64,XJe=65,YJe=71,ZJe=4108,JJe=4126,xa=80,Wne=81,QJe=[xa,Wne],eQe={1:{n:"CodePage",t:fI},2:{n:"Category",t:xa},3:{n:"PresentationFormat",t:xa},4:{n:"ByteCount",t:Vs},5:{n:"LineCount",t:Vs},6:{n:"ParagraphCount",t:Vs},7:{n:"SlideCount",t:Vs},8:{n:"NoteCount",t:Vs},9:{n:"HiddenCount",t:Vs},10:{n:"MultimediaClipCount",t:Vs},11:{n:"ScaleCrop",t:i1},12:{n:"HeadingPairs",t:ZJe},13:{n:"TitlesOfParts",t:JJe},14:{n:"Manager",t:xa},15:{n:"Company",t:xa},16:{n:"LinksUpToDate",t:i1},17:{n:"CharacterCount",t:Vs},19:{n:"SharedDoc",t:i1},22:{n:"HyperlinksChanged",t:i1},23:{n:"AppVersion",t:Vs,p:"version"},24:{n:"DigSig",t:XJe},26:{n:"ContentType",t:xa},27:{n:"ContentStatus",t:xa},28:{n:"Language",t:xa},29:{n:"Version",t:xa},255:{},2147483648:{n:"Locale",t:wS},2147483651:{n:"Behavior",t:wS},1919054434:{}},tQe={1:{n:"CodePage",t:fI},2:{n:"Title",t:xa},3:{n:"Subject",t:xa},4:{n:"Author",t:xa},5:{n:"Keywords",t:xa},6:{n:"Comments",t:xa},7:{n:"Template",t:xa},8:{n:"LastAuthor",t:xa},9:{n:"RevNumber",t:xa},10:{n:"EditTime",t:o1},11:{n:"LastPrinted",t:o1},12:{n:"CreatedDate",t:o1},13:{n:"ModifiedDate",t:o1},14:{n:"PageCount",t:Vs},15:{n:"WordCount",t:Vs},16:{n:"CharCount",t:Vs},17:{n:"Thumbnail",t:YJe},18:{n:"Application",t:xa},19:{n:"DocSecurity",t:Vs},255:{},2147483648:{n:"Locale",t:wS},2147483651:{n:"Behavior",t:wS},1919054434:{}},u7={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},rQe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function nQe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var aQe=nQe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),lf=Ia(aQe),oh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Vne={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},d7={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function sQe(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function iQe(e){var t=sQe();if(!e||!e.match)return t;var r={};if((e.match(ds)||[]).forEach(function(n){var a=Zt(n);switch(a[0].replace(mJe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[d7[a.ContentType]]!==void 0&&t[d7[a.ContentType]].push(a.PartName);break}}),t.xmlns!==EJe.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}var nm={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function BO(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Gg(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(ds)||[]).forEach(function(a){var s=Zt(a);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:hg(s.Target,t);r[l]=o,n[s.Id]=o}}),r["!id"]=n,r}var oQe="application/vnd.oasis.opendocument.spreadsheet";function lQe(e,t){for(var r=sI(e),n,a;n=Mx.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Zt(n[0],!1),a.path=="/"&&a.type!==oQe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}var Kg=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],cQe=function(){for(var e=new Array(Kg.length),t=0;t<Kg.length;++t){var r=Kg[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function Hne(e){var t={};e=dn(e);for(var r=0;r<Kg.length;++r){var n=Kg[r],a=e.match(cQe[r]);a!=null&&a.length>0&&(t[n[1]]=Ur(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Sa(t[n[1]]))}return t}var uQe=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function qne(e,t,r,n){var a=[];if(typeof e=="string")a=t7(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var o=typeof t=="string"?t7(t,n).map(function(d){return d.v}):t,l=0,c=0;if(o.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function dQe(e,t,r){var n={};return t||(t={}),e=dn(e),uQe.forEach(function(a){var s=(e.match(Dx(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Ur(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var o=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));o&&o.length>0&&(n[a[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&qne(n.HeadingPairs,n.TitlesOfParts,t,r),t}var fQe=/<[^>]+>[^<]*/g;function hQe(e,t){var r={},n="",a=e.match(fQe);if(a)for(var s=0;s!=a.length;++s){var o=a[s],l=Zt(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Ur(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Ur(d);break;case"bool":r[n]=wn(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Sa(d);break;case"cy":case"error":r[n]=Ur(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}var mQe={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},vC;function pQe(e,t,r){vC||(vC=rI(mQe)),t=vC[t]||t,e[t]=r}function hI(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Gne(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function Kne(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function Xne(e,t,r){return t===31?Kne(e):Gne(e,t,r)}function UO(e,t,r){return Xne(e,t,r===!1?0:4)}function gQe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Xne(e,t,0)}function vQe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Ps,""),e.l-a&2&&(e.l+=2)}return r}function xQe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Ps,"");return r}function yQe(e){var t=e.l,r=_S(e,Wne);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=_S(e,Vs);return[r,n]}function bQe(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(yQe(e));return r}function f7(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),o=e.read_shift(4);n[s]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Ps,"").replace(fg,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function Yne(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function wQe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function _S(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==c7&&n!==t&&QJe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===c7?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return Gne(e,n,4).replace(Ps,"");case 31:return Kne(e);case 64:return hI(e);case 65:return Yne(e);case 71:return wQe(e);case 80:return UO(e,n,!s.raw).replace(Ps,"");case 81:return gQe(e,n).replace(Ps,"");case 4108:return bQe(e);case 4126:case 4127:return n==4127?vQe(e):xQe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function h7(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],o=0,l=0,c=-1,u={};for(o=0;o!=a;++o){var d=e.read_shift(4),f=e.read_shift(4);s[o]=[d,f+r]}s.sort(function(y,w){return y[1]-w[1]});var h={};for(o=0;o!=a;++o){if(e.l!==s[o][1]){var p=!0;if(o>0&&t)switch(t[s[o-1][0]].t){case 2:e.l+2===s[o][1]&&(e.l+=2,p=!1);break;case 80:e.l<=s[o][1]&&(e.l=s[o][1],p=!1);break;case 4108:e.l<=s[o][1]&&(e.l=s[o][1],p=!1);break}if((!t||o==0)&&e.l<=s[o][1]&&(p=!1,e.l=s[o][1]),p)throw new Error("Read Error: Expected address "+s[o][1]+" at "+e.l+" :"+o)}if(t){var v=t[s[o][0]];if(h[v.n]=_S(e,v.t,{raw:!0}),v.p==="version"&&(h[v.n]=String(h[v.n]>>16)+"."+("0000"+String(h[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(h[v.n]){case 0:h[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Uo(l=h[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[v.n])}}else if(s[o][0]===1){if(l=h.CodePage=_S(e,fI),Uo(l),c!==-1){var m=e.l;e.l=s[c][1],u=f7(e,l),e.l=m}}else if(s[o][0]===0){if(l===0){c=o,e.l=s[o+1][1];continue}u=f7(e,l)}else{var g=u[s[o][0]],b;switch(e[e.l]){case 65:e.l+=4,b=Yne(e);break;case 30:e.l+=4,b=UO(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,b=UO(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,b=e.read_shift(4,"i");break;case 19:e.l+=4,b=e.read_shift(4);break;case 5:e.l+=4,b=e.read_shift(8,"f");break;case 11:e.l+=4,b=zn(e,4);break;case 64:e.l+=4,b=Sa(hI(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[g]=b}}return e.l=r+n,h}function m7(e,t,r){var n=e.content;if(!n)return{};Pa(n,0);var a,s,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Dr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(o=n.read_shift(16),c=n.read_shift(4));var f=h7(n,t),h={SystemIdentifier:u};for(var p in f)h[p]=f[p];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var v;try{v=h7(n,null)}catch{}for(p in v)h[p]=v[p];return h.FMTID=[s,o],h}function qc(e,t){return e.read_shift(t),null}function _Qe(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function zn(e,t){return e.read_shift(t)===1}function Qn(e){return e.read_shift(2,"u")}function Zne(e,t){return _Qe(e,t,Qn)}function SQe(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Iy(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?e.read_shift(n,a):"";return o}function jQe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),o=0,l,c={};a&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*o),n&&(e.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function Wf(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function $y(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Wf(e,n,r)}function lh(e,t,r){if(r.biff>5)return $y(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function EQe(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function NQe(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Ps,"");return n&&(e.l+=24),a}function CQe(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(s>>1,"utf16le").replace(Ps,"");return r+o}function kQe(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return NQe(e);case"0303000000000000c000000000000046":return CQe(e);default:throw new Error("Unsupported Moniker "+r)}}function l1(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Ps,""):"";return r}function TQe(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,o,l,c,u="",d,f;a&16&&(s=l1(e,r-e.l)),a&128&&(o=l1(e,r-e.l)),(a&257)===257&&(l=l1(e,r-e.l)),(a&257)===1&&(c=kQe(e,r-e.l)),a&8&&(u=l1(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=hI(e)),e.l=r;var h=o||l||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var p={Target:h};return d&&(p.guid=d),f&&(p.time=f),s&&(p.Tooltip=s),p}function Jne(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function Qne(e,t){var r=Jne(e);return r[3]=0,r}function Fl(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function AQe(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function PQe(e,t,r){return t===0?"":lh(e,t,r)}function OQe(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[a,s,o]}function eae(e){var t=e.read_shift(2),r=dI(e);return[t,r]}function RQe(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=Iy(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function tE(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function tae(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var DQe=tae;function rae(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function MQe(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function IQe(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Ga(e){e.l+=2,e.l+=e.read_shift(2)}var $Qe={0:Ga,4:Ga,5:Ga,6:Ga,7:IQe,8:Ga,9:Ga,10:Ga,11:Ga,12:Ga,13:MQe,14:Ga,15:Ga,16:Ga,17:Ga,18:Ga,19:Ga,20:Ga,21:rae};function FQe(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push($Qe[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function c1(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function LQe(e,t){return t===0||e.read_shift(2),1200}function BQe(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=lh(e,0,r);return e.read_shift(t+n-e.l),a}function UQe(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function zQe(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=Iy(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:a,dt:s,name:o}}function WQe(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],o=0;o!=a&&e.l<r;++o)s.push(jQe(e));return s.Count=n,s.Unique=a,s}function VQe(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function HQe(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function qQe(e){var t=AQe(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function GQe(e){return e.read_shift(2),e.read_shift(4)}function p7(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function KQe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function XQe(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function YQe(){}function ZQe(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=Iy(e,0,r),n}function JQe(e){var t=Fl(e);return t.isst=e.read_shift(4),t}function QQe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=Fl(e);r.biff==2&&e.l++;var s=$y(e,n-e.l,r);return a.val=s,a}function eet(e,t,r){var n=e.read_shift(2),a=lh(e,0,r);return[n,a]}var tet=lh;function g7(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:l},e:{r:o,c}}}function ret(e){var t=e.read_shift(2),r=e.read_shift(2),n=eae(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function net(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(eae(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(s.length!=o-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:o,rkrec:s}}function aet(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(s.length!=o-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:o,ixfe:s}}function set(e,t,r,n){var a={},s=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return a.patternType=rQe[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=o&15,a.dgRight=o>>4&15,a.dgTop=o>>8&15,a.dgBottom=o>>12&15,a.icvLeft=o>>16&127,a.icvRight=o>>23&127,a.grbitDiag=o>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function iet(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=set(e,t,n.fStyle,r),n}function oet(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function v7(e,t,r){var n=Fl(e);(r.biff==2||t==9)&&++e.l;var a=SQe(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function cet(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Fl(e),a=as(e);return n.val=a,n}var x7=PQe;function uet(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=Wf(e,s),l=[];n>e.l;)l.push($y(e));return[s,a,o,l]}function y7(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=RQe(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var det=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function b7(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Wf(e,o,r);a&32&&(u=det[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||l===0||!(d>0)?[]:Gnt(e,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function nae(e,t,r){if(r.biff<8)return fet(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(OQe(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function fet(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=Iy(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function het(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=Wf(e,n,r),o=Wf(e,a,r);return[s,o]}function met(e,t,r){var n=tae(e);e.l++;var a=e.read_shift(1);return t-=8,[Knt(e,t,r),a,n]}function w7(e,t,r){var n=DQe(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,Hnt(e,t,r)]}function pet(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function get(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=lh(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},l,o,s]}}function vet(e,t,r){return get(e,t,r)}function xet(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(tE(e));return r}function yet(e,t,r){if(r&&r.biff<8)return wet(e,t,r);var n=rae(e),a=FQe(e,t-22,n[1]);return{cmo:n,ft:a}}var bet={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function wet(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((bet[n]||us)(e,t,r)),{cmo:[a,n,s],ft:o}}function _et(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:o=EQe(e,6,r);var l=e.read_shift(2);e.read_shift(2),Qn(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Wf(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function jet(e,t){var r=tE(e);e.l+=16;var n=TQe(e,t-24);return[r,n]}function Eet(e,t){e.read_shift(2);var r=tE(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Ps,""),[r,n]}function Net(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=u7[r]||r,r=e.read_shift(2),t[1]=u7[r]||r,t}function Cet(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Qne(e));return r}function ket(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Qne(e));return r}function Tet(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function aae(e,t,r){if(!r.cellStyles)return us(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function Aet(e,t){var r={};return t<32||(e.l+=16,r.header=as(e),r.footer=as(e),e.l+=2),r}function Pet(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}var Oet=Fl,Ret=Zne,Det=$y;function Met(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function Iet(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Fl(e);++e.l;var a=lh(e,t-7,r);return n.t="str",n.val=a,n}function $et(e){var t=Fl(e);++e.l;var r=as(e);return t.t="n",t.val=r,t}function Fet(e){var t=Fl(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Let(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Bet(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Uet(e,t,r){var n=e.l+t,a=Fl(e),s=e.read_shift(2),o=Wf(e,s,r);return e.l=n,a.t="str",a.val=o,a}var zet=[2,3,48,49,131,139,140,245],_7=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=rI({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=Zu(1);switch(c.type){case"base64":d=Fo(Di(l));break;case"binary":d=Fo(l);break;case"buffer":case"array":d=l;break}Pa(d,0);var f=d.read_shift(1),h=!!(f&136),p=!1,v=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var m=0,g=521;f==2&&(m=d.read_shift(2)),d.l+=3,f!=2&&(m=d.read_shift(4)),m>1048576&&(m=1e6),f!=2&&(g=d.read_shift(2));var b=d.read_shift(2),y=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(y=e[d[d.l]]),d.l+=1,d.l+=2),v&&(d.l+=36);for(var w=[],_={},S=Math.min(d.length,f==2?521:g-10-(p?264:0)),E=v?32:11;d.l<S&&d[d.l]!=13;)switch(_={},_.name=uu.utils.decode(y,d.slice(d.l,d.l+E)).replace(/[\u0000\r\n].*$/g,""),d.l+=E,_.type=String.fromCharCode(d.read_shift(1)),f!=2&&!v&&(_.offset=d.read_shift(4)),_.len=d.read_shift(1),f==2&&(_.offset=d.read_shift(2)),_.dec=d.read_shift(1),_.name.length&&w.push(_),f!=2&&(d.l+=v?13:14),_.type){case"B":(!p||_.len!=8)&&c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+_.type)}if(d[d.l]!==13&&(d.l=g-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=g;var j=0,N=0;for(u[0]=[],N=0;N!=w.length;++N)u[0][N]=w[N].name;for(;m-- >0;){if(d[d.l]===42){d.l+=b;continue}for(++d.l,u[++j]=[],N=0,N=0;N!=w.length;++N){var k=d.slice(d.l,d.l+w[N].len);d.l+=w[N].len,Pa(k,0);var C=uu.utils.decode(y,k);switch(w[N].type){case"C":C.trim().length&&(u[j][N]=C.replace(/\s+$/,""));break;case"D":C.length===8?u[j][N]=new Date(+C.slice(0,4),+C.slice(4,6)-1,+C.slice(6,8)):u[j][N]=C;break;case"F":u[j][N]=parseFloat(C.trim());break;case"+":case"I":u[j][N]=v?k.read_shift(-4,"i")^2147483648:k.read_shift(4,"i");break;case"L":switch(C.trim().toUpperCase()){case"Y":case"T":u[j][N]=!0;break;case"N":case"F":u[j][N]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+C+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[j][N]="##MEMO##"+(v?parseInt(C.trim(),10):k.read_shift(4));break;case"N":C=C.replace(/\u0000/g,"").trim(),C&&C!="."&&(u[j][N]=+C||0);break;case"@":u[j][N]=new Date(k.read_shift(-8,"f")-621356832e5);break;case"T":u[j][N]=new Date((k.read_shift(4)-2440588)*864e5+k.read_shift(4));break;case"Y":u[j][N]=k.read_shift(4,"i")/1e4+k.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[j][N]=-k.read_shift(-8,"f");break;case"B":if(p&&w[N].len==8){u[j][N]=k.read_shift(8,"f");break}case"G":case"P":k.l+=w[N].len;break;case"0":if(w[N].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[N].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=w,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=x0(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return md(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&Uo(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=FO(),f=GO(l,{header:1,raw:!0,cellDates:!0}),h=f[0],p=f.slice(1),v=l["!cols"]||[],m=0,g=0,b=0,y=1;for(m=0;m<h.length;++m){if(((v[m]||{}).DBF||{}).name){h[m]=v[m].DBF.name,++b;continue}if(h[m]!=null){if(++b,typeof h[m]=="number"&&(h[m]=h[m].toString(10)),typeof h[m]!="string")throw new Error("DBF Invalid column name "+h[m]+" |"+typeof h[m]+"|");if(h.indexOf(h[m])!==m){for(g=0;g<1024;++g)if(h.indexOf(h[m]+"_"+g)==-1){h[m]+="_"+g;break}}}}var w=Bn(l["!ref"]),_=[],S=[],E=[];for(m=0;m<=w.e.c-w.s.c;++m){var j="",N="",k=0,C=[];for(g=0;g<p.length;++g)p[g][m]!=null&&C.push(p[g][m]);if(C.length==0||h[m]==null){_[m]="?";continue}for(g=0;g<C.length;++g){switch(typeof C[g]){case"number":N="B";break;case"string":N="C";break;case"boolean":N="L";break;case"object":N=C[g]instanceof Date?"D":"C";break;default:N="C"}k=Math.max(k,String(C[g]).length),j=j&&j!=N?"C":N}k>250&&(k=250),N=((v[m]||{}).DBF||{}).type,N=="C"&&v[m].DBF.len>k&&(k=v[m].DBF.len),j=="B"&&N=="N"&&(j="N",E[m]=v[m].DBF.dec,k=v[m].DBF.len),S[m]=j=="C"||N=="N"?k:s[j]||0,y+=S[m],_[m]=j}var T=d.next(32);for(T.write_shift(4,318902576),T.write_shift(4,p.length),T.write_shift(2,296+32*b),T.write_shift(2,y),m=0;m<4;++m)T.write_shift(4,0);for(T.write_shift(4,0|(+t[nne]||3)<<8),m=0,g=0;m<h.length;++m)if(h[m]!=null){var A=d.next(32),B=(h[m].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);A.write_shift(1,B,"sbcs"),A.write_shift(1,_[m]=="?"?"C":_[m],"sbcs"),A.write_shift(4,g),A.write_shift(1,S[m]||s[_[m]]||0),A.write_shift(1,E[m]||0),A.write_shift(1,2),A.write_shift(4,0),A.write_shift(1,0),A.write_shift(4,0),A.write_shift(4,0),g+=S[m]||s[_[m]]||0}var R=d.next(264);for(R.write_shift(4,13),m=0;m<65;++m)R.write_shift(4,0);for(m=0;m<p.length;++m){var P=d.next(y);for(P.write_shift(1,0),g=0;g<h.length;++g)if(h[g]!=null)switch(_[g]){case"L":P.write_shift(1,p[m][g]==null?63:p[m][g]?84:70);break;case"B":P.write_shift(8,p[m][g]||0,"f");break;case"N":var D="0";for(typeof p[m][g]=="number"&&(D=p[m][g].toFixed(E[g]||0)),b=0;b<S[g]-D.length;++b)P.write_shift(1,32);P.write_shift(1,D,"sbcs");break;case"D":p[m][g]?(P.write_shift(4,("0000"+p[m][g].getFullYear()).slice(-4),"sbcs"),P.write_shift(2,("00"+(p[m][g].getMonth()+1)).slice(-2),"sbcs"),P.write_shift(2,("00"+p[m][g].getDate()).slice(-2),"sbcs")):P.write_shift(8,"00000000","sbcs");break;case"C":var U=String(p[m][g]!=null?p[m][g]:"").slice(0,S[g]);for(P.write_shift(1,U,"sbcs"),b=0;b<S[g]-U.length;++b)P.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),Wet=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ol(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var v=e[p];return typeof v=="number"?FB(v):v},n=function(h,p,v){var m=p.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return m==59?h:FB(m)};e["|"]=254;function a(h,p){switch(p.type){case"base64":return s(Di(h),p);case"binary":return s(h,p);case"buffer":return s(Rr&&Buffer.isBuffer(h)?h.toString("binary"):ah(h),p);case"array":return s(zf(h),p)}throw new Error("Unrecognized type "+p.type)}function s(h,p){var v=h.split(/[\n\r]+/),m=-1,g=-1,b=0,y=0,w=[],_=[],S=null,E={},j=[],N=[],k=[],C=0,T;for(+p.codepage>=0&&Uo(+p.codepage);b!==v.length;++b){C=0;var A=v[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),B=A.replace(/;;/g,"\0").split(";").map(function(H){return H.replace(/\u0000/g,";")}),R=B[0],P;if(A.length>0)switch(R){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":B[1].charAt(0)=="P"&&_.push(A.slice(3).replace(/;;/g,";"));break;case"C":var D=!1,U=!1,M=!1,F=!1,K=-1,X=-1;for(y=1;y<B.length;++y)switch(B[y].charAt(0)){case"A":break;case"X":g=parseInt(B[y].slice(1))-1,U=!0;break;case"Y":for(m=parseInt(B[y].slice(1))-1,U||(g=0),T=w.length;T<=m;++T)w[T]=[];break;case"K":P=B[y].slice(1),P.charAt(0)==='"'?P=P.slice(1,P.length-1):P==="TRUE"?P=!0:P==="FALSE"?P=!1:isNaN(Yo(P))?isNaN(Dp(P).getDate())||(P=Sa(P)):(P=Yo(P),S!==null&&g0(S)&&(P=eE(P))),D=!0;break;case"E":F=!0;var O=Rm(B[y].slice(1),{r:m,c:g});w[m][g]=[w[m][g],O];break;case"S":M=!0,w[m][g]=[w[m][g],"S5S"];break;case"G":break;case"R":K=parseInt(B[y].slice(1))-1;break;case"C":X=parseInt(B[y].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+A)}if(D&&(w[m][g]&&w[m][g].length==2?w[m][g][0]=P:w[m][g]=P,S=null),M){if(F)throw new Error("SYLK shared formula cannot have own formula");var W=K>-1&&w[K][X];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");w[m][g][1]=mae(W[1],{r:m-K,c:g-X})}break;case"F":var L=0;for(y=1;y<B.length;++y)switch(B[y].charAt(0)){case"X":g=parseInt(B[y].slice(1))-1,++L;break;case"Y":for(m=parseInt(B[y].slice(1))-1,T=w.length;T<=m;++T)w[T]=[];break;case"M":C=parseInt(B[y].slice(1))/20;break;case"F":break;case"G":break;case"P":S=_[parseInt(B[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(k=B[y].slice(1).split(" "),T=parseInt(k[0],10);T<=parseInt(k[1],10);++T)C=parseInt(k[2],10),N[T-1]=C===0?{hidden:!0}:{wch:C},Mp(N[T-1]);break;case"C":g=parseInt(B[y].slice(1))-1,N[g]||(N[g]={});break;case"R":m=parseInt(B[y].slice(1))-1,j[m]||(j[m]={}),C>0?(j[m].hpt=C,j[m].hpx=Fx(C)):C===0&&(j[m].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+A)}L<1&&(S=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+A)}}return j.length>0&&(E["!rows"]=j),N.length>0&&(E["!cols"]=N),p&&p.sheetRows&&(w=w.slice(0,p.sheetRows)),[w,E]}function o(h,p){var v=a(h,p),m=v[0],g=v[1],b=x0(m,p);return Ol(g).forEach(function(y){b[y]=g[y]}),b}function l(h,p){return md(o(h,p),p)}function c(h,p,v,m){var g="C;Y"+(v+1)+";X"+(m+1)+";K";switch(h.t){case"n":g+=h.v||0,h.f&&!h.F&&(g+=";E"+Trt(h.f,{r:v,c:m}));break;case"b":g+=h.v?"TRUE":"FALSE";break;case"e":g+=h.w||h.v;break;case"d":g+='"'+(h.w||h.v)+'"';break;case"s":g+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function u(h,p){p.forEach(function(v,m){var g="F;W"+(m+1)+" "+(m+1)+" ";v.hidden?g+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=jS(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=ES(v.wpx)),typeof v.wch=="number"&&(g+=Math.round(v.wch))),g.charAt(g.length-1)!=" "&&h.push(g)})}function d(h,p){p.forEach(function(v,m){var g="F;";v.hidden?g+="M0;":v.hpt?g+="M"+20*v.hpt+";":v.hpx&&(g+="M"+20*dae(v.hpx)+";"),g.length>2&&h.push(g+"R"+(m+1))})}function f(h,p){var v=["ID;PWXL;N;E"],m=[],g=Bn(h["!ref"]),b,y=Array.isArray(h),w=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),h["!cols"]&&u(v,h["!cols"]),h["!rows"]&&d(v,h["!rows"]),v.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var _=g.s.r;_<=g.e.r;++_)for(var S=g.s.c;S<=g.e.c;++S){var E=tr({r:_,c:S});b=y?(h[_]||[])[S]:h[E],!(!b||b.v==null&&(!b.f||b.F))&&m.push(c(b,h,_,S))}return v.join(w)+w+m.join(w)+w+"E"+w}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),Vet=function(){function e(s,o){switch(o.type){case"base64":return t(Di(s),o);case"binary":return t(s,o);case"buffer":return t(Rr&&Buffer.isBuffer(s)?s.toString("binary"):ah(s),o);case"array":return t(zf(s),o)}throw new Error("Unrecognized type "+o.type)}function t(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),p=h[0],v=h[1];++d;for(var m=l[d]||"";(m.match(/["]/g)||[]).length&1&&d<l.length-1;)m+=`
`+l[++d];switch(m=m.trim(),+p){case-1:if(m==="BOT"){f[++c]=[],u=0;continue}else if(m!=="EOD")throw new Error("Unrecognized DIF special command "+m);break;case 0:m==="TRUE"?f[c][u]=!0:m==="FALSE"?f[c][u]=!1:isNaN(Yo(v))?isNaN(Dp(v).getDate())?f[c][u]=v:f[c][u]=Sa(v):f[c][u]=Yo(v),++u;break;case 1:m=m.slice(1,m.length-1),m=m.replace(/""/g,'"'),m&&m.match(/^=".*"$/)&&(m=m.slice(2,-1)),f[c][u++]=m!==""?m:null;break}if(m==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(s,o){return x0(e(s,o),o)}function n(s,o){return md(r(s,o),o)}var a=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Bn(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){o(u,-1,0,"BOT");for(var v=d.s.c;v<=d.e.c;++v){var m=tr({r:p,c:v});if(f=h?(c[p]||[])[v]:c[m],!f){o(u,1,0,"");continue}switch(f.t){case"n":var g=f.w;!g&&f.v!=null&&(g=f.v),g==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,g,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=io(f.z||ir[14],Ds(Sa(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var b=`\r
`,y=u.join(b);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Het=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var p=f.split(`
`),v=-1,m=-1,g=0,b=[];g!==p.length;++g){var y=p[g].trim().split(":");if(y[0]==="cell"){var w=Es(y[1]);if(b.length<=w.r)for(v=b.length;v<=w.r;++v)b[v]||(b[v]=[]);switch(v=w.r,m=w.c,y[2]){case"t":b[v][m]=e(y[3]);break;case"v":b[v][m]=+y[3];break;case"vtf":var _=y[y.length-1];case"vtc":switch(y[3]){case"nl":b[v][m]=!!+y[4];break;default:b[v][m]=+y[4];break}y[2]=="vtf"&&(b[v][m]=[b[v][m],_])}}}return h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),b}function n(f,h){return x0(r(f,h),h)}function a(f,h){return md(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],v,m="",g=v0(f["!ref"]),b=Array.isArray(f),y=g.s.r;y<=g.e.r;++y)for(var w=g.s.c;w<=g.e.c;++w)if(m=tr({r:y,c:w}),v=b?(f[y]||[])[w]:f[m],!(!v||v.v==null||v.t==="z")){switch(p=["cell",m,"t"],v.t){case"s":case"str":p.push(t(v.v));break;case"n":v.f?(p[2]="vtf",p[3]="n",p[4]=v.v,p[5]=t(v.f)):(p[2]="v",p[3]=v.v);break;case"b":p[2]="vt"+(v.f?"f":"c"),p[3]="nl",p[4]=v.v?"1":"0",p[5]=t(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var _=Ds(Sa(v.v));p[2]="vtc",p[3]="nd",p[4]=""+_,p[5]=v.w||io(v.z||ir[14],_);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,o,l,o,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Ix=function(){function e(d,f,h,p,v){v.raw?f[h][p]=d:d===""||(d==="TRUE"?f[h][p]=!0:d==="FALSE"?f[h][p]=!1:isNaN(Yo(d))?isNaN(Dp(d).getDate())?f[h][p]=d:f[h][p]=Sa(d):f[h][p]=Yo(d))}function t(d,f){var h=f||{},p=[];if(!d||d.length===0)return p;for(var v=d.split(/[\r\n]/),m=v.length-1;m>=0&&v[m].length===0;)--m;for(var g=10,b=0,y=0;y<=m;++y)b=v[y].indexOf(" "),b==-1?b=v[y].length:b++,g=Math.max(g,b);for(y=0;y<=m;++y){p[y]=[];var w=0;for(e(v[y].slice(0,g).trim(),p,y,w,h),w=1;w<=(v[y].length-g)/10+1;++w)e(v[y].slice(g+(w-1)*10,g+w*10).trim(),p,y,w,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,p=0,v=0;p<d.length;++p)(v=d.charCodeAt(p))==34?h=!h:!h&&v in r&&(f[v]=(f[v]||0)+1);v=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&v.push([f[p],p]);if(!v.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&v.push([f[p],p])}return v.sort(function(m,g){return m[0]-g[0]||n[m[1]]-n[g[1]]}),r[v.pop()[1]]||44}function s(d,f){var h=f||{},p="",v=h.dense?[]:{},m={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=a(d.slice(0,1024)):h&&h.FS?p=h.FS:p=a(d.slice(0,1024));var g=0,b=0,y=0,w=0,_=0,S=p.charCodeAt(0),E=!1,j=0,N=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var k=h.dateNF!=null?eJe(h.dateNF):null;function C(){var T=d.slice(w,_),A={};if(T.charAt(0)=='"'&&T.charAt(T.length-1)=='"'&&(T=T.slice(1,-1).replace(/""/g,'"')),T.length===0)A.t="z";else if(h.raw)A.t="s",A.v=T;else if(T.trim().length===0)A.t="s",A.v=T;else if(T.charCodeAt(0)==61)T.charCodeAt(1)==34&&T.charCodeAt(T.length-1)==34?(A.t="s",A.v=T.slice(2,-1).replace(/""/g,'"')):Prt(T)?(A.t="n",A.f=T.slice(1)):(A.t="s",A.v=T);else if(T=="TRUE")A.t="b",A.v=!0;else if(T=="FALSE")A.t="b",A.v=!1;else if(!isNaN(y=Yo(T)))A.t="n",h.cellText!==!1&&(A.w=T),A.v=y;else if(!isNaN(Dp(T).getDate())||k&&T.match(k)){A.z=h.dateNF||ir[14];var B=0;k&&T.match(k)&&(T=tJe(T,h.dateNF,T.match(k)||[]),B=1),h.cellDates?(A.t="d",A.v=Sa(T,B)):(A.t="n",A.v=Ds(Sa(T,B))),h.cellText!==!1&&(A.w=io(A.z,A.v instanceof Date?Ds(A.v):A.v)),h.cellNF||delete A.z}else A.t="s",A.v=T;if(A.t=="z"||(h.dense?(v[g]||(v[g]=[]),v[g][b]=A):v[tr({c:b,r:g})]=A),w=_+1,N=d.charCodeAt(w),m.e.c<b&&(m.e.c=b),m.e.r<g&&(m.e.r=g),j==S)++b;else if(b=0,++g,h.sheetRows&&h.sheetRows<=g)return!0}e:for(;_<d.length;++_)switch(j=d.charCodeAt(_)){case 34:N===34&&(E=!E);break;case S:case 10:case 13:if(!E&&C())break e;break}return _-w>0&&C(),v["!ref"]=$r(m),v}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):x0(t(d,f),f)}function l(d,f){var h="",p=f.type=="string"?[0,0,0,0]:wI(d,f);switch(f.type){case"base64":h=Di(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof uu<"u"?h=uu.utils.decode(f.codepage,d):h=Rr&&Buffer.isBuffer(d)?d.toString("binary"):ah(d);break;case"array":h=zf(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=dn(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=dn(h):f.type=="binary"&&typeof uu<"u"&&f.codepage&&(h=uu.utils.decode(f.codepage,uu.utils.encode(28591,h))),h.slice(0,19)=="socialcalc:version:"?Het.to_sheet(f.type=="string"?h:dn(h),f):o(h,f)}function c(d,f){return md(l(d,f),f)}function u(d){for(var f=[],h=Bn(d["!ref"]),p,v=Array.isArray(d),m=h.s.r;m<=h.e.r;++m){for(var g=[],b=h.s.c;b<=h.e.c;++b){var y=tr({r:m,c:b});if(p=v?(d[m]||[])[b]:d[y],!p||p.v==null){g.push("          ");continue}for(var w=(p.w||(Tc(p),p.w)||"").slice(0,10);w.length<10;)w+=" ";g.push(w+(b===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function qet(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=Wet.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return Ix.to_workbook(e,t)}}var Xg=function(){function e(O,W,L){if(O){Pa(O,O.l||0);for(var H=L.Enum||K;O.l<O.length;){var ee=O.read_shift(2),q=H[ee]||H[65535],Z=O.read_shift(2),I=O.l+Z,Q=q.f&&q.f(O,Z,L);if(O.l=I,W(Q,q,ee))return}}}function t(O,W){switch(W.type){case"base64":return r(Fo(Di(O)),W);case"binary":return r(Fo(O),W);case"buffer":case"array":return r(O,W)}throw"Unsupported type "+W.type}function r(O,W){if(!O)return O;var L=W||{},H=L.dense?[]:{},ee="Sheet1",q="",Z=0,I={},Q=[],ve=[],z={s:{r:0,c:0},e:{r:0,c:0}},we=L.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)L.Enum=K,e(O,function(Ne,J,Y){switch(Y){case 0:L.vers=Ne,Ne>=4096&&(L.qpro=!0);break;case 6:z=Ne;break;case 204:Ne&&(q=Ne);break;case 222:q=Ne;break;case 15:case 51:L.qpro||(Ne[1].v=Ne[1].v.slice(1));case 13:case 14:case 16:Y==14&&(Ne[2]&112)==112&&(Ne[2]&15)>1&&(Ne[2]&15)<15&&(Ne[1].z=L.dateNF||ir[14],L.cellDates&&(Ne[1].t="d",Ne[1].v=eE(Ne[1].v))),L.qpro&&Ne[3]>Z&&(H["!ref"]=$r(z),I[ee]=H,Q.push(ee),H=L.dense?[]:{},z={s:{r:0,c:0},e:{r:0,c:0}},Z=Ne[3],ee=q||"Sheet"+(Z+1),q="");var ae=L.dense?(H[Ne[0].r]||[])[Ne[0].c]:H[tr(Ne[0])];if(ae){ae.t=Ne[1].t,ae.v=Ne[1].v,Ne[1].z!=null&&(ae.z=Ne[1].z),Ne[1].f!=null&&(ae.f=Ne[1].f);break}L.dense?(H[Ne[0].r]||(H[Ne[0].r]=[]),H[Ne[0].r][Ne[0].c]=Ne[1]):H[tr(Ne[0])]=Ne[1];break}},L);else if(O[2]==26||O[2]==14)L.Enum=X,O[2]==14&&(L.qpro=!0,O.l=0),e(O,function(Ne,J,Y){switch(Y){case 204:ee=Ne;break;case 22:Ne[1].v=Ne[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ne[3]>Z&&(H["!ref"]=$r(z),I[ee]=H,Q.push(ee),H=L.dense?[]:{},z={s:{r:0,c:0},e:{r:0,c:0}},Z=Ne[3],ee="Sheet"+(Z+1)),we>0&&Ne[0].r>=we)break;L.dense?(H[Ne[0].r]||(H[Ne[0].r]=[]),H[Ne[0].r][Ne[0].c]=Ne[1]):H[tr(Ne[0])]=Ne[1],z.e.c<Ne[0].c&&(z.e.c=Ne[0].c),z.e.r<Ne[0].r&&(z.e.r=Ne[0].r);break;case 27:Ne[14e3]&&(ve[Ne[14e3][0]]=Ne[14e3][1]);break;case 1537:ve[Ne[0]]=Ne[1],Ne[0]==Z&&(ee=Ne[1]);break}},L);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(H["!ref"]=$r(z),I[q||ee]=H,Q.push(q||ee),!ve.length)return{SheetNames:Q,Sheets:I};for(var Re={},Pe=[],De=0;De<ve.length;++De)I[Q[De]]?(Pe.push(ve[De]||Q[De]),Re[ve[De]]=I[ve[De]]||I[Q[De]]):(Pe.push(ve[De]),Re[ve[De]]={"!ref":"A1"});return{SheetNames:Pe,Sheets:Re}}function n(O,W){var L=W||{};if(+L.codepage>=0&&Uo(+L.codepage),L.type=="string")throw new Error("Cannot write WK1 to JS string");var H=FO(),ee=Bn(O["!ref"]),q=Array.isArray(O),Z=[];_o(H,0,s(1030)),_o(H,6,c(ee));for(var I=Math.min(ee.e.r,8191),Q=ee.s.r;Q<=I;++Q)for(var ve=$a(Q),z=ee.s.c;z<=ee.e.c;++z){Q===ee.s.r&&(Z[z]=ua(z));var we=Z[z]+ve,Re=q?(O[Q]||[])[z]:O[we];if(!(!Re||Re.t=="z"))if(Re.t=="n")(Re.v|0)==Re.v&&Re.v>=-32768&&Re.v<=32767?_o(H,13,p(Q,z,Re.v)):_o(H,14,m(Q,z,Re.v));else{var Pe=Tc(Re);_o(H,15,f(Q,z,Pe.slice(0,239)))}}return _o(H,1),H.end()}function a(O,W){var L=W||{};if(+L.codepage>=0&&Uo(+L.codepage),L.type=="string")throw new Error("Cannot write WK3 to JS string");var H=FO();_o(H,0,o(O));for(var ee=0,q=0;ee<O.SheetNames.length;++ee)(O.Sheets[O.SheetNames[ee]]||{})["!ref"]&&_o(H,27,F(O.SheetNames[ee],q++));var Z=0;for(ee=0;ee<O.SheetNames.length;++ee){var I=O.Sheets[O.SheetNames[ee]];if(!(!I||!I["!ref"])){for(var Q=Bn(I["!ref"]),ve=Array.isArray(I),z=[],we=Math.min(Q.e.r,8191),Re=Q.s.r;Re<=we;++Re)for(var Pe=$a(Re),De=Q.s.c;De<=Q.e.c;++De){Re===Q.s.r&&(z[De]=ua(De));var Ne=z[De]+Pe,J=ve?(I[Re]||[])[De]:I[Ne];if(!(!J||J.t=="z"))if(J.t=="n")_o(H,23,C(Re,De,Z,J.v));else{var Y=Tc(J);_o(H,22,j(Re,De,Z,Y.slice(0,239)))}}++Z}}return _o(H,1),H.end()}function s(O){var W=ia(2);return W.write_shift(2,O),W}function o(O){var W=ia(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var L=0,H=0,ee=0,q=0;q<O.SheetNames.length;++q){var Z=O.SheetNames[q],I=O.Sheets[Z];if(!(!I||!I["!ref"])){++ee;var Q=v0(I["!ref"]);L<Q.e.r&&(L=Q.e.r),H<Q.e.c&&(H=Q.e.c)}}return L>8191&&(L=8191),W.write_shift(2,L),W.write_shift(1,ee),W.write_shift(1,H),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function l(O,W,L){var H={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&L.qpro?(H.s.c=O.read_shift(1),O.l++,H.s.r=O.read_shift(2),H.e.c=O.read_shift(1),O.l++,H.e.r=O.read_shift(2),H):(H.s.c=O.read_shift(2),H.s.r=O.read_shift(2),W==12&&L.qpro&&(O.l+=2),H.e.c=O.read_shift(2),H.e.r=O.read_shift(2),W==12&&L.qpro&&(O.l+=2),H.s.c==65535&&(H.s.c=H.e.c=H.s.r=H.e.r=0),H)}function c(O){var W=ia(8);return W.write_shift(2,O.s.c),W.write_shift(2,O.s.r),W.write_shift(2,O.e.c),W.write_shift(2,O.e.r),W}function u(O,W,L){var H=[{c:0,r:0},{t:"n",v:0},0,0];return L.qpro&&L.vers!=20768?(H[0].c=O.read_shift(1),H[3]=O.read_shift(1),H[0].r=O.read_shift(2),O.l+=2):(H[2]=O.read_shift(1),H[0].c=O.read_shift(2),H[0].r=O.read_shift(2)),H}function d(O,W,L){var H=O.l+W,ee=u(O,W,L);if(ee[1].t="s",L.vers==20768){O.l++;var q=O.read_shift(1);return ee[1].v=O.read_shift(q,"utf8"),ee}return L.qpro&&O.l++,ee[1].v=O.read_shift(H-O.l,"cstr"),ee}function f(O,W,L){var H=ia(7+L.length);H.write_shift(1,255),H.write_shift(2,W),H.write_shift(2,O),H.write_shift(1,39);for(var ee=0;ee<H.length;++ee){var q=L.charCodeAt(ee);H.write_shift(1,q>=128?95:q)}return H.write_shift(1,0),H}function h(O,W,L){var H=u(O,W,L);return H[1].v=O.read_shift(2,"i"),H}function p(O,W,L){var H=ia(7);return H.write_shift(1,255),H.write_shift(2,W),H.write_shift(2,O),H.write_shift(2,L,"i"),H}function v(O,W,L){var H=u(O,W,L);return H[1].v=O.read_shift(8,"f"),H}function m(O,W,L){var H=ia(13);return H.write_shift(1,255),H.write_shift(2,W),H.write_shift(2,O),H.write_shift(8,L,"f"),H}function g(O,W,L){var H=O.l+W,ee=u(O,W,L);if(ee[1].v=O.read_shift(8,"f"),L.qpro)O.l=H;else{var q=O.read_shift(2);_(O.slice(O.l,O.l+q),ee),O.l+=q}return ee}function b(O,W,L){var H=W&32768;return W&=-32769,W=(H?O:0)+(W>=8192?W-16384:W),(H?"":"$")+(L?ua(W):$a(W))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function _(O,W){Pa(O,0);for(var L=[],H=0,ee="",q="",Z="",I="";O.l<O.length;){var Q=O[O.l++];switch(Q){case 0:L.push(O.read_shift(8,"f"));break;case 1:q=b(W[0].c,O.read_shift(2),!0),ee=b(W[0].r,O.read_shift(2),!1),L.push(q+ee);break;case 2:{var ve=b(W[0].c,O.read_shift(2),!0),z=b(W[0].r,O.read_shift(2),!1);q=b(W[0].c,O.read_shift(2),!0),ee=b(W[0].r,O.read_shift(2),!1),L.push(ve+z+":"+q+ee)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:L.push("("+L.pop()+")");break;case 5:L.push(O.read_shift(2));break;case 6:{for(var we="";Q=O[O.l++];)we+=String.fromCharCode(Q);L.push('"'+we.replace(/"/g,'""')+'"')}break;case 8:L.push("-"+L.pop());break;case 23:L.push("+"+L.pop());break;case 22:L.push("NOT("+L.pop()+")");break;case 20:case 21:I=L.pop(),Z=L.pop(),L.push(["AND","OR"][Q-20]+"("+Z+","+I+")");break;default:if(Q<32&&w[Q])I=L.pop(),Z=L.pop(),L.push(Z+w[Q]+I);else if(y[Q]){if(H=y[Q][1],H==69&&(H=O[O.l++]),H>L.length){console.error("WK1 bad formula parse 0x"+Q.toString(16)+":|"+L.join("|")+"|");return}var Re=L.slice(-H);L.length-=H,L.push(y[Q][0]+"("+Re.join(",")+")")}else return Q<=7?console.error("WK1 invalid opcode "+Q.toString(16)):Q<=24?console.error("WK1 unsupported op "+Q.toString(16)):Q<=30?console.error("WK1 invalid opcode "+Q.toString(16)):Q<=115?console.error("WK1 unsupported function opcode "+Q.toString(16)):console.error("WK1 unrecognized opcode "+Q.toString(16))}}L.length==1?W[1].f=""+L[0]:console.error("WK1 bad formula parse |"+L.join("|")+"|")}function S(O){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=O.read_shift(2),W[3]=O[O.l++],W[0].c=O[O.l++],W}function E(O,W){var L=S(O);return L[1].t="s",L[1].v=O.read_shift(W-4,"cstr"),L}function j(O,W,L,H){var ee=ia(6+H.length);ee.write_shift(2,O),ee.write_shift(1,L),ee.write_shift(1,W),ee.write_shift(1,39);for(var q=0;q<H.length;++q){var Z=H.charCodeAt(q);ee.write_shift(1,Z>=128?95:Z)}return ee.write_shift(1,0),ee}function N(O,W){var L=S(O);L[1].v=O.read_shift(2);var H=L[1].v>>1;if(L[1].v&1)switch(H&7){case 0:H=(H>>3)*5e3;break;case 1:H=(H>>3)*500;break;case 2:H=(H>>3)/20;break;case 3:H=(H>>3)/200;break;case 4:H=(H>>3)/2e3;break;case 5:H=(H>>3)/2e4;break;case 6:H=(H>>3)/16;break;case 7:H=(H>>3)/64;break}return L[1].v=H,L}function k(O,W){var L=S(O),H=O.read_shift(4),ee=O.read_shift(4),q=O.read_shift(2);if(q==65535)return H===0&&ee===3221225472?(L[1].t="e",L[1].v=15):H===0&&ee===3489660928?(L[1].t="e",L[1].v=42):L[1].v=0,L;var Z=q&32768;return q=(q&32767)-16446,L[1].v=(1-Z*2)*(ee*Math.pow(2,q+32)+H*Math.pow(2,q)),L}function C(O,W,L,H){var ee=ia(14);if(ee.write_shift(2,O),ee.write_shift(1,L),ee.write_shift(1,W),H==0)return ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(2,65535),ee;var q=0,Z=0,I=0,Q=0;return H<0&&(q=1,H=-H),Z=Math.log2(H)|0,H/=Math.pow(2,Z-31),Q=H>>>0,Q&2147483648||(H/=2,++Z,Q=H>>>0),H-=Q,Q|=2147483648,Q>>>=0,H*=Math.pow(2,32),I=H>>>0,ee.write_shift(4,I),ee.write_shift(4,Q),Z+=16383+(q?32768:0),ee.write_shift(2,Z),ee}function T(O,W){var L=k(O);return O.l+=W-14,L}function A(O,W){var L=S(O),H=O.read_shift(4);return L[1].v=H>>6,L}function B(O,W){var L=S(O),H=O.read_shift(8,"f");return L[1].v=H,L}function R(O,W){var L=B(O);return O.l+=W-10,L}function P(O,W){return O[O.l+W-1]==0?O.read_shift(W,"cstr"):""}function D(O,W){var L=O[O.l++];L>W-1&&(L=W-1);for(var H="";H.length<L;)H+=String.fromCharCode(O[O.l++]);return H}function U(O,W,L){if(!(!L.qpro||W<21)){var H=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var ee=O.read_shift(W-21,"cstr");return[H,ee]}}function M(O,W){for(var L={},H=O.l+W;O.l<H;){var ee=O.read_shift(2);if(ee==14e3){for(L[ee]=[0,""],L[ee][0]=O.read_shift(2);O[O.l];)L[ee][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return L}function F(O,W){var L=ia(5+O.length);L.write_shift(2,14e3),L.write_shift(2,W);for(var H=0;H<O.length;++H){var ee=O.charCodeAt(H);L[L.l++]=ee>127?95:ee}return L[L.l++]=0,L}var K={0:{n:"BOF",f:Qn},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:P},222:{n:"SHEETNAMELP",f:D},65535:{n:""}},X={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:E},23:{n:"NUMBER17",f:k},24:{n:"NUMBER18",f:N},25:{n:"FORMULA19",f:T},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:M},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:A},38:{n:"??"},39:{n:"NUMBER27",f:B},40:{n:"FORMULA28",f:R},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:P},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:U},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function Get(e){var t={},r=e.match(ds),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Zt(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=ZM[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var Ket=function(){var e=Dx("t"),t=Dx("rPr");function r(s){var o=s.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Ur(o[1])},c=s.match(t);return c&&(l.s=Get(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),Xet=function(){var t=/(\r\n|\n)/g;function r(a,s,o){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),o.push("</b>")),a.i&&(s.push("<i>"),o.push("</i>")),a.strike&&(s.push("<s>"),o.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),Yet=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Zet=/<(?:\w+:)?r>/,Jet=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function mI(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Ur(dn(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=dn(e),r&&(n.h=aI(n.t))):e.match(Zet)&&(n.r=dn(e),n.t=Ur(dn((e.replace(Jet,"").match(Yet)||[]).join("").replace(ds,""))),r&&(n.h=Xet(Ket(n.r)))),n):{t:""}}var Qet=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,ett=/<(?:\w+:)?(?:si|sstItem)>/g,ttt=/<\/(?:\w+:)?(?:si|sstItem)>/;function rtt(e,t){var r=[],n="";if(!e)return r;var a=e.match(Qet);if(a){n=a[2].replace(ett,"").split(ttt);for(var s=0;s!=n.length;++s){var o=mI(n[s].trim(),t);o!=null&&(r[r.length]=o)}a=Zt(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}function ntt(e){return[e.read_shift(4),e.read_shift(4)]}function att(e,t){var r=[],n=!1;return Lc(e,function(s,o,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function sae(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function gc(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function stt(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=gc(e,4),t.U=gc(e,4),t.W=gc(e,4),t}function itt(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function ott(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(itt(e));return t}function ltt(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function ctt(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=gc(e,4),t.U=gc(e,4),t.W=gc(e,4),t}function utt(e){var t=ctt(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function iae(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function oae(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function dtt(e){var t=gc(e);switch(t.Minor){case 2:return[t.Minor,ftt(e)];case 3:return[t.Minor,htt()];case 4:return[t.Minor,mtt(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function ftt(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=iae(e,r),a=oae(e,e.length-e.l);return{t:"Std",h:n,v:a}}function htt(){throw new Error("File is password-protected: ECMA-376 Extensible")}function mtt(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(ds,function(s){var o=Zt(s);switch($l(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function ptt(e,t){var r={},n=r.EncryptionVersionInfo=gc(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=iae(e,a),t-=a,r.EncryptionVerifier=oae(e,t),r}function gtt(e){var t={},r=t.EncryptionVersionInfo=gc(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function vtt(e){var t=0,r,n=sae(e),a=n.length+1,s,o,l,c,u;for(r=Zu(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)o=r[s],l=t&16384?1:0,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var lae=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},a=function(o,l){return n(o^l)},s=function(o){for(var l=t[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=sae(o),c=s(l),u=l.length,d=Zu(16),f=0;f!=16;++f)d[f]=0;var h,p,v;for((u&1)===1&&(h=c>>8,d[u]=a(e[0],h),--u,h=c&255,p=l[l.length-1],d[u]=a(p,h));u>0;)--u,h=c>>8,d[u]=a(l[u],h),--u,h=c&255,d[u]=a(l[u],h);for(u=15,v=15-l.length;v>0;)h=c>>8,d[u]=a(e[v],h),--u,--v,h=c&255,d[u]=a(l[u],h),--u,--v;return d}}(),xtt=function(e,t,r,n,a){a||(a=t),n||(n=lae(e));var s,o;for(s=0;s!=t.length;++s)o=t[s],o^=n[r],o=(o>>5|o<<3)&255,a[s]=o,++r;return[a,r,n]},ytt=function(e){var t=0,r=lae(e);return function(n){var a=xtt("",n,t,r);return t=a[1],a[0]}};function btt(e,t,r,n){var a={key:Qn(e),verificationBytes:Qn(e)};return r.password&&(a.verifier=vtt(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=ytt(r.password)),a}function wtt(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=gtt(e):n.Data=ptt(e,t),n}function _tt(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?wtt(e,t-2,n):btt(e,r.biff>=8?t:t-2,r,n),n}var Stt=function(){function e(a,s){switch(s.type){case"base64":return t(Di(a),s);case"binary":return t(a,s);case"buffer":return t(Rr&&Buffer.isBuffer(a)?a.toString("binary"):ah(a),s);case"array":return t(zf(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var o=s||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var h=/\\\w+\b/g,p=0,v,m=-1;v=h.exec(d);){switch(v[0]){case"\\cell":var g=d.slice(p,h.lastIndex-v[0].length);if(g[0]==" "&&(g=g.slice(1)),++m,g.length){var b={v:g,t:"s"};Array.isArray(l)?l[f][m]=b:l[tr({r:f,c:m})]=b}break}p=h.lastIndex}m>u.e.c&&(u.e.c=m)}),l["!ref"]=$r(u),l}function r(a,s){return md(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],o=Bn(a["!ref"]),l,c=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=tr({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(Tc(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function jtt(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function $x(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Ett(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),o=a-s;if(o===0)return[0,0,t];var l=0,c=0,u=a+s;switch(c=o/(u>1?2-u:u),a){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,c,u/2]}function Ntt(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,o=[s,s,s],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,o[0]+=a,o[1]+=c;break;case 1:c=a*(2-l),o[0]+=c,o[1]+=a;break;case 2:c=a*(l-2),o[1]+=a,o[2]+=c;break;case 3:c=a*(4-l),o[1]+=c,o[2]+=a;break;case 4:c=a*(l-4),o[2]+=a,o[0]+=c;break;case 5:c=a*(6-l),o[2]+=c,o[0]+=a;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function SS(e,t){if(t===0)return e;var r=Ett(jtt(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),$x(Ntt(r))}var cae=6,Ctt=15,ktt=1,ws=cae;function jS(e){return Math.floor((e+Math.round(128/ws)/256)*ws)}function ES(e){return Math.floor((e-5)/ws*100+.5)/100}function zO(e){return Math.round((e*ws+5)/ws*256)/256}function xC(e){return zO(ES(jS(e)))}function pI(e){var t=Math.abs(e-xC(e)),r=ws;if(t>.005)for(ws=ktt;ws<Ctt;++ws)Math.abs(e-xC(e))<=t&&(t=Math.abs(e-xC(e)),r=ws);ws=r}function Mp(e){e.width?(e.wpx=jS(e.width),e.wch=ES(e.wpx),e.MDW=ws):e.wpx?(e.wch=ES(e.wpx),e.width=zO(e.wch),e.MDW=ws):typeof e.wch=="number"&&(e.width=zO(e.wch),e.wpx=jS(e.width),e.MDW=ws),e.customWidth&&delete e.customWidth}var Ttt=96,uae=Ttt;function dae(e){return e*96/uae}function Fx(e){return e*uae/96}var Att={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Ptt(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(ds)||[]).forEach(function(o){var l=Zt(o);switch($l(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=wn(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=wn(l.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function Ott(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(ds)||[]).forEach(function(o){var l=Zt(o);switch($l(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function Rtt(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(ds)||[]).forEach(function(o){var l=Zt(o);switch($l(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=dn(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?wn(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?wn(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?wn(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?wn(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?wn(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?wn(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?wn(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=ZM[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=wn(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=lf[a.color.index];a.color.index==81&&(c=lf[1]),c||(c=lf[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=SS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function Dtt(e,t,r){t.NumberFmt=[];for(var n=Ol(ir),a=0;a<n.length;++a)t.NumberFmt[n[a]]=ir[n[a]];var s=e[0].match(ds);if(s)for(a=0;a<s.length;++a){var o=Zt(s[a]);switch($l(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Ur(dn(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}of(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}var u1=["numFmtId","fillId","fontId","borderId","xfId"],d1=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Mtt(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(ds)||[]).forEach(function(s){var o=Zt(s),l=0;switch($l(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<u1.length;++l)n[u1[l]]&&(n[u1[l]]=parseInt(n[u1[l]],10));for(l=0;l<d1.length;++l)n[d1[l]]&&(n[d1[l]]=wn(n[d1[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=wn(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}var Itt=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&Dtt(f,d,u),(f=l.match(a))&&Rtt(f,d,c,u),(f=l.match(n))&&Ott(f,d,c,u),(f=l.match(s))&&Ptt(f,d,c,u),(f=l.match(r))&&Mtt(f,d,u),d}}();function $tt(e,t){var r=e.read_shift(2),n=is(e);return[r,n]}function Ftt(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=qJe(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=HJe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=is(e),n}var Ltt=us;function Btt(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}var Utt=us;function ztt(e,t,r){var n={};n.NumberFmt=[];for(var a in ir)n.NumberFmt[a]=ir[a];n.CellXf=[],n.Fonts=[];var s=[],o=!1;return Lc(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],of(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=SS(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!o||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}var Wtt=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Vtt(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(ds)||[]).forEach(function(a){var s=Zt(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[Wtt.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function Htt(){}function qtt(){}var Gtt=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Ktt=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Xtt=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Ytt(e,t,r){t.themeElements={};var n;[["clrScheme",Gtt,Vtt],["fontScheme",Ktt,Htt],["fmtScheme",Xtt,qtt]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var Ztt=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function fae(e,t){(!e||e.length===0)&&(e=Jtt());var r,n={};if(!(r=e.match(Ztt)))throw new Error("themeElements not found in theme");return Ytt(r[0],n,t),n.raw=e,n}function Jtt(e,t){var r=[Sne];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Qtt(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var o;try{o=_ne(s,{type:"array"})}catch{return}var l=yi(o,"theme/theme/theme1.xml",!0);if(l)return fae(l,r)}}function ert(e){return e.read_shift(4)}function trt(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=rrt(e,4);break;case 2:t.xclrValue=Jne(e);break;case 3:t.xclrValue=ert(e);break;case 4:e.l+=4;break}return e.l+=8,t}function rrt(e,t){return us(e,t)}function nrt(e,t){return us(e,t)}function art(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=trt(e);break;case 6:n[1]=nrt(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function srt(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(art(e,r-e.l));return{ixfe:n,ext:s}}function irt(e,t){t.forEach(function(r){switch(r[0]){}})}function ort(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:is(e)}}function lrt(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function crt(e){return e.l+=4,e.read_shift(4)!=0}function urt(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],o=!1,l=2;return Lc(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!u.T){if(!o||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function drt(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,o;return e.replace(ds,function(l){var c=Zt(l);switch($l(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function frt(e){var t=[];if(!e)return t;var r=1;return(e.match(ds)||[]).forEach(function(n){var a=Zt(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function hrt(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=tr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function mrt(e,t,r){var n=[];return Lc(e,function(s,o,l){switch(l){case 63:n.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function prt(e,t,r,n){if(!e)return e;var a=n||{},s=!1;Lc(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function grt(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}function S7(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(o){var l=Es(o.ref);if(a?(e[l.r]||(e[l.r]=[]),s=e[l.r][l.c]):s=e[o.ref],!s){s={t:"z"},a?e[l.r][l.c]=s:e[o.ref]=s;var c=Bn(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=$r(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function vrt(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Zt(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=Es(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&mI(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function xrt(e,t){var r=[],n=!1,a={},s=0;return e.replace(ds,function(l,c){var u=Zt(l);switch($l(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function yrt(e,t){var r=[],n=!1;return e.replace(ds,function(s){var o=Zt(s);switch($l(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),r}function brt(e){var t={};t.iauthor=e.read_shift(4);var r=ih(e);return t.rfx=r.s,t.ref=tr(r.s),e.l+=16,t}var wrt=is;function _rt(e,t){var r=[],n=[],a={},s=!1;return Lc(e,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}var Srt="application/vnd.ms-office.vbaProject";function jrt(e){var t=Dr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Dr.utils.cfb_add(t,a,e.FileIndex[n].content)}}),Dr.write(t)}function Ert(){return{"!type":"dialog"}}function Nrt(){return{"!type":"dialog"}}function Crt(){return{"!type":"macro"}}function krt(){return{"!type":"macro"}}var Rm=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,a+(l?"":"$")+ua(d)+(c?"":"$")+$a(u)}return function(a,s){return t=s,a.replace(e,r)}}(),hae=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Trt=function(){return function(t,r){return t.replace(hae,function(n,a,s,o,l,c){var u=lI(o)-(s?0:r.c),d=oI(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function mae(e,t){return e.replace(hae,function(r,n,a,s,o,l){return n+(a=="$"?a+s:ua(lI(s)+t.c))+(o=="$"?o+l:$a(oI(l)+t.r))})}function Art(e,t,r){var n=v0(t),a=n.s,s=Es(r),o={r:s.r-a.r,c:s.c-a.c};return mae(e,o)}function Prt(e){return e.length!=1}function j7(e){return e.replace(/_xlfn\./g,"")}function Yn(e){e.l+=1}function Ju(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function pae(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return gae(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),o=Ju(e),l=Ju(e);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function gae(e){var t=Ju(e),r=Ju(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function Ort(e,t,r){if(r.biff<8)return gae(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=Ju(e),o=Ju(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function vae(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Rrt(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Ju(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function Rrt(e){var t=Ju(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Drt(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Mrt(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Irt(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:o,rRel:l}}function Irt(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function $rt(e,t,r){var n=(e[e.l++]&96)>>5,a=pae(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function Frt(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var o=pae(e,s,r);return[n,a,o]}function Lrt(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Brt(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function Urt(e,t,r){var n=(e[e.l++]&96)>>5,a=Ort(e,t-1,r);return[n,a]}function zrt(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function E7(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Wrt(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function Vrt(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Hrt(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function qrt(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Grt(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function xae(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Krt(e){return e.read_shift(2),xae(e)}function Xrt(e){return e.read_shift(2),xae(e)}function Yrt(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=vae(e,0,r);return[n,a]}function Zrt(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Mrt(e,0,r);return[n,a]}function Jrt(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=vae(e,0,r);return[n,a,s]}function Qrt(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[eat[a],wae[a],n]}function ent(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:tnt(e);return[a,(s[0]===0?wae:Qnt)[s[1]]]}function tnt(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function rnt(e,t,r){e.l+=r&&r.biff==2?3:4}function nnt(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function ant(e){return e.l++,oh[e.read_shift(1)]}function snt(e){return e.l++,e.read_shift(2)}function int(e){return e.l++,e.read_shift(1)!==0}function ont(e){return e.l++,as(e)}function lnt(e,t,r){return e.l++,Iy(e,t-1,r)}function cnt(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=zn(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=oh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=as(e);break;case 2:r[1]=lh(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function unt(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?ih:tE)(e));return a}function dnt(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=a;++l)o[s][l]=cnt(e,r.biff);return o}function fnt(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function hnt(e,t,r){if(r.biff==5)return mnt(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function mnt(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function pnt(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function gnt(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function vnt(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function xnt(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var ynt=us,bnt=us,wnt=us;function Fy(e,t,r){return e.l+=2,[Drt(e)]}function gI(e){return e.l+=6,[]}var _nt=Fy,Snt=gI,jnt=gI,Ent=Fy;function yae(e){return e.l+=2,[Qn(e),e.read_shift(2)&1]}var Nnt=Fy,Cnt=yae,knt=gI,Tnt=Fy,Ant=Fy,Pnt=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Ont(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),o=Pnt[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:a,C:s}}function Rnt(e){return e.l+=2,[e.read_shift(4)]}function Dnt(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Mnt(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Int(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function $nt(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Fnt(e){return e.l+=4,[0,0]}var N7={1:{n:"PtgExp",f:nnt},2:{n:"PtgTbl",f:wnt},3:{n:"PtgAdd",f:Yn},4:{n:"PtgSub",f:Yn},5:{n:"PtgMul",f:Yn},6:{n:"PtgDiv",f:Yn},7:{n:"PtgPower",f:Yn},8:{n:"PtgConcat",f:Yn},9:{n:"PtgLt",f:Yn},10:{n:"PtgLe",f:Yn},11:{n:"PtgEq",f:Yn},12:{n:"PtgGe",f:Yn},13:{n:"PtgGt",f:Yn},14:{n:"PtgNe",f:Yn},15:{n:"PtgIsect",f:Yn},16:{n:"PtgUnion",f:Yn},17:{n:"PtgRange",f:Yn},18:{n:"PtgUplus",f:Yn},19:{n:"PtgUminus",f:Yn},20:{n:"PtgPercent",f:Yn},21:{n:"PtgParen",f:Yn},22:{n:"PtgMissArg",f:Yn},23:{n:"PtgStr",f:lnt},26:{n:"PtgSheet",f:Dnt},27:{n:"PtgEndSheet",f:Mnt},28:{n:"PtgErr",f:ant},29:{n:"PtgBool",f:int},30:{n:"PtgInt",f:snt},31:{n:"PtgNum",f:ont},32:{n:"PtgArray",f:zrt},33:{n:"PtgFunc",f:Qrt},34:{n:"PtgFuncVar",f:ent},35:{n:"PtgName",f:fnt},36:{n:"PtgRef",f:Yrt},37:{n:"PtgArea",f:$rt},38:{n:"PtgMemArea",f:pnt},39:{n:"PtgMemErr",f:ynt},40:{n:"PtgMemNoMem",f:bnt},41:{n:"PtgMemFunc",f:gnt},42:{n:"PtgRefErr",f:vnt},43:{n:"PtgAreaErr",f:Lrt},44:{n:"PtgRefN",f:Zrt},45:{n:"PtgAreaN",f:Urt},46:{n:"PtgMemAreaN",f:Int},47:{n:"PtgMemNoMemN",f:$nt},57:{n:"PtgNameX",f:hnt},58:{n:"PtgRef3d",f:Jrt},59:{n:"PtgArea3d",f:Frt},60:{n:"PtgRefErr3d",f:xnt},61:{n:"PtgAreaErr3d",f:Brt},255:{}},Lnt={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Bnt={1:{n:"PtgElfLel",f:yae},2:{n:"PtgElfRw",f:Tnt},3:{n:"PtgElfCol",f:_nt},6:{n:"PtgElfRwV",f:Ant},7:{n:"PtgElfColV",f:Ent},10:{n:"PtgElfRadical",f:Nnt},11:{n:"PtgElfRadicalS",f:knt},13:{n:"PtgElfColS",f:Snt},15:{n:"PtgElfColSV",f:jnt},16:{n:"PtgElfRadicalLel",f:Cnt},25:{n:"PtgList",f:Ont},29:{n:"PtgSxName",f:Rnt},255:{}},Unt={0:{n:"PtgAttrNoop",f:Fnt},1:{n:"PtgAttrSemi",f:Grt},2:{n:"PtgAttrIf",f:Hrt},4:{n:"PtgAttrChoose",f:Wrt},8:{n:"PtgAttrGoto",f:Vrt},16:{n:"PtgAttrSum",f:rnt},32:{n:"PtgAttrBaxcel",f:E7},33:{n:"PtgAttrBaxcel",f:E7},64:{n:"PtgAttrSpace",f:Krt},65:{n:"PtgAttrSpaceSemi",f:Xrt},128:{n:"PtgAttrIfError",f:qrt},255:{}};function Ly(e,t,r,n){if(n.biff<8)return us(e,t);for(var a=e.l+t,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=dnt(e,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=unt(e,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=a-e.l,t!==0&&s.push(us(e,t)),s}function By(e,t,r){for(var n=e.l+t,a,s,o=[];n!=e.l;)t=n-e.l,s=e[e.l],a=N7[s]||N7[Lnt[s]],(s===24||s===25)&&(a=(s===24?Bnt:Unt)[e[e.l+1]]),!a||!a.f?us(e,t):o.push([a.n,a.f(e,t,r)]);return o}function znt(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var Wnt={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Vnt(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function bae(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function C7(e,t,r){var n=bae(e,t,r);return n=="#REF"?n:Vnt(n,r)}function Za(e,t,r,n,a){var s=a&&a.biff||8,o={s:{c:0,r:0},e:{c:0,r:0}},l=[],c,u,d,f=0,h=0,p,v="";if(!e[0]||!e[0][0])return"";for(var m=-1,g="",b=0,y=e[0].length;b<y;++b){var w=e[0][b];switch(w[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),m>=0){switch(e[0][m][1][0]){case 0:g=Ln(" ",e[0][m][1][1]);break;case 1:g=Ln("\r",e[0][m][1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}u=u+g,m=-1}l.push(u+Wnt[w[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Hg(w[1][1],o,a),l.push(qg(d,s));break;case"PtgRefN":d=r?Hg(w[1][1],r,a):w[1][1],l.push(qg(d,s));break;case"PtgRef3d":f=w[1][1],d=Hg(w[1][2],o,a),v=C7(n,f,a),l.push(v+"!"+qg(d,s));break;case"PtgFunc":case"PtgFuncVar":var _=w[1][0],S=w[1][1];_||(_=0),_&=127;var E=_==0?[]:l.slice(-_);l.length-=_,S==="User"&&(S=E.shift()),l.push(S+"("+E.join(",")+")");break;case"PtgBool":l.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(w[1]);break;case"PtgNum":l.push(String(w[1]));break;case"PtgStr":l.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(w[1]);break;case"PtgAreaN":p=o7(w[1][1],r?{s:r}:o,a),l.push(gC(p,a));break;case"PtgArea":p=o7(w[1][1],o,a),l.push(gC(p,a));break;case"PtgArea3d":f=w[1][1],p=w[1][2],v=C7(n,f,a),l.push(v+"!"+gC(p,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=w[1][2];var j=(n.names||[])[h-1]||(n[0]||[])[h],N=j?j.Name:"SH33TJSNAME"+String(h);N&&N.slice(0,6)=="_xlfn."&&!a.xlfn&&(N=N.slice(6)),l.push(N);break;case"PtgNameX":var k=w[1][1];h=w[1][2];var C;if(a.biff<=5)k<0&&(k=-k),n[k]&&(C=n[k][h]);else{var T="";if(((n[k]||[])[0]||[])[0]==14849||(((n[k]||[])[0]||[])[0]==1025?n[k][h]&&n[k][h].itab>0&&(T=n.SheetNames[n[k][h].itab-1]+"!"):T=n.SheetNames[h-1]+"!"),n[k]&&n[k][h])T+=n[k][h].Name;else if(n[0]&&n[0][h])T+=n[0][h].Name;else{var A=(bae(n,k,a)||"").split(";;");A[h-1]?T=A[h-1]:T+="SH33TJSERRX"}l.push(T);break}C||(C={Name:"SH33TJSERRY"}),l.push(C.Name);break;case"PtgParen":var B="(",R=")";if(m>=0){switch(g="",e[0][m][1][0]){case 2:B=Ln(" ",e[0][m][1][1])+B;break;case 3:B=Ln("\r",e[0][m][1][1])+B;break;case 4:R=Ln(" ",e[0][m][1][1])+R;break;case 5:R=Ln("\r",e[0][m][1][1])+R;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}l.push(B+l.pop()+R);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:w[1][1],r:w[1][0]};var P={c:r.c,r:r.r};if(n.sharedf[tr(d)]){var D=n.sharedf[tr(d)];l.push(Za(D,o,P,n,a))}else{var U=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(Za(u[1],o,P,n,a)),U=!0;break}U||l.push(w[1])}break;case"PtgArray":l.push("{"+znt(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=b;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var M=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&m>=0&&M.indexOf(e[0][b][0])==-1){w=e[0][m];var F=!0;switch(w[1][0]){case 4:F=!1;case 0:g=Ln(" ",w[1][1]);break;case 5:F=!1;case 1:g=Ln("\r",w[1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}l.push((F?g:"")+l.pop()+(F?"":g)),m=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function Hnt(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,o=e.read_shift(a);if(o==65535)return[[],us(e,t-2)];var l=By(e,o,r);return t!==o+a&&(s=Ly(e,t-o-a,l,r)),e.l=n,[l,s]}function qnt(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,o=e.read_shift(a);if(o==65535)return[[],us(e,t-2)];var l=By(e,o,r);return t!==o+a&&(s=Ly(e,t-o-a,l,r)),e.l=n,[l,s]}function Gnt(e,t,r,n){var a=e.l+t,s=By(e,n,r),o;return a!==e.l&&(o=Ly(e,a-e.l,s,r)),[s,o]}function Knt(e,t,r){var n=e.l+t,a,s=e.read_shift(2),o=By(e,s,r);return s==65535?[[],us(e,t-2)]:(t!==s+2&&(a=Ly(e,n-s-2,o,r)),[o,a])}function Xnt(e){var t;if(lc(e,e.l+6)!==65535)return[as(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function yC(e,t,r){var n=e.l+t,a=Fl(e);r.biff==2&&++e.l;var s=Xnt(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=qnt(e,n-e.l,r);return{cell:a,val:s[0],formula:l,shared:o>>3&1,tt:s[1]}}function rE(e,t,r){var n=e.read_shift(4),a=By(e,n,r),s=e.read_shift(4),o=s>0?Ly(e,s,a,r):null;return[a,o]}var Ynt=rE,nE=rE,Znt=rE,Jnt=rE,Qnt={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},wae={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},eat={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function k7(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function bC(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var Yg={},Dm={};function Zg(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function _ae(e,t,r,n,a,s){try{n.cellNF&&(e.z=ir[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Sa(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(ir[t]==null&&of(QZe[t]||"General",t),e.t==="e")e.w=e.w||oh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Rx(e.v);else if(e.t==="d"){var o=Ds(e.v);(o|0)===o?e.w=o.toString(10):e.w=Rx(o)}else{if(e.v===void 0)return"";e.w=Uf(e.v,Dm)}else e.t==="d"?e.w=io(t,Ds(e.v),Dm):e.w=io(t,e.v,Dm)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=SS(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=SS(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function tat(e,t){var r=Bn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=$r(r))}var rat=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,nat=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,aat=/<(?:\w:)?hyperlink [^>]*>/mg,sat=/"(\w*:\w*)"/,iat=/<(?:\w:)?col\b[^>]*[\/]?>/g,oat=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,lat=/<(?:\w:)?pageMargins[^>]*\/>/g,Sae=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,cat=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,uat=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function dat(e,t,r,n,a,s,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(nat);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(Sae);h?vI(h[0],l,a,r):(h=u.match(cat))&&fat(h[0],h[1]||"",l,a,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var v=u.slice(p,p+50).match(sat);v&&tat(l,v[1])}var m=u.match(uat);m&&m[1]&&xat(m[1],a);var g=[];if(t.cellStyles){var b=u.match(iat);b&&pat(g,b)}f&&yat(f[1],l,t,c,s,o);var y=d.match(oat);y&&(l["!autofilter"]=gat(y[0]));var w=[],_=d.match(rat);if(_)for(p=0;p!=_.length;++p)w[p]=Bn(_[p].slice(_[p].indexOf('"')+1));var S=d.match(aat);S&&hat(l,S,n);var E=d.match(lat);if(E&&(l["!margins"]=mat(Zt(E[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=$r(c)),t.sheetRows>0&&l["!ref"]){var j=Bn(l["!ref"]);t.sheetRows<=+j.e.r&&(j.e.r=t.sheetRows-1,j.e.r>c.e.r&&(j.e.r=c.e.r),j.e.r<j.s.r&&(j.s.r=j.e.r),j.e.c>c.e.c&&(j.e.c=c.e.c),j.e.c<j.s.c&&(j.s.c=j.e.c),l["!fullref"]=l["!ref"],l["!ref"]=$r(j))}return g.length>0&&(l["!cols"]=g),w.length>0&&(l["!merges"]=w),l}function vI(e,t,r,n){var a=Zt(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Ur(dn(a.codeName)))}function fat(e,t,r,n,a){vI(e.slice(0,e.indexOf(">")),r,n,a)}function hat(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=Zt(dn(t[a]),!0);if(!s.ref)return;var o=((r||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+Ur(s.location))):(s.Target="#"+Ur(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=Bn(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=tr({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function mat(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function pat(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=Zt(t[n],!0);a.hidden&&(a.hidden=wn(a.hidden));var s=parseInt(a.min,10)-1,o=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,pI(a.width)),Mp(a);s<=o;)e[s++]=Ia(a)}}function gat(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var vat=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function xat(e,t){t.Views||(t.Views=[{}]),(e.match(vat)||[]).forEach(function(r,n){var a=Zt(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),wn(a.rightToLeft)&&(t.Views[n].RTL=!0)})}var yat=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=Dx("v"),o=Dx("f");return function(c,u,d,f,h,p){for(var v=0,m="",g=[],b=[],y=0,w=0,_=0,S="",E,j,N=0,k=0,C,T,A=0,B=0,R=Array.isArray(p.CellXf),P,D=[],U=[],M=Array.isArray(u),F=[],K={},X=!1,O=!!d.sheetStubs,W=c.split(t),L=0,H=W.length;L!=H;++L){m=W[L].trim();var ee=m.length;if(ee!==0){var q=0;e:for(v=0;v<ee;++v)switch(m[v]){case">":if(m[v-1]!="/"){++v;break e}if(d&&d.cellStyles){if(j=Zt(m.slice(q,v),!0),N=j.r!=null?parseInt(j.r,10):N+1,k=-1,d.sheetRows&&d.sheetRows<N)continue;K={},X=!1,j.ht&&(X=!0,K.hpt=parseFloat(j.ht),K.hpx=Fx(K.hpt)),j.hidden=="1"&&(X=!0,K.hidden=!0),j.outlineLevel!=null&&(X=!0,K.level=+j.outlineLevel),X&&(F[N-1]=K)}break;case"<":q=v;break}if(q>=v)break;if(j=Zt(m.slice(q,v),!0),N=j.r!=null?parseInt(j.r,10):N+1,k=-1,!(d.sheetRows&&d.sheetRows<N)){f.s.r>N-1&&(f.s.r=N-1),f.e.r<N-1&&(f.e.r=N-1),d&&d.cellStyles&&(K={},X=!1,j.ht&&(X=!0,K.hpt=parseFloat(j.ht),K.hpx=Fx(K.hpt)),j.hidden=="1"&&(X=!0,K.hidden=!0),j.outlineLevel!=null&&(X=!0,K.level=+j.outlineLevel),X&&(F[N-1]=K)),g=m.slice(v).split(e);for(var Z=0;Z!=g.length&&g[Z].trim().charAt(0)=="<";++Z);for(g=g.slice(Z),v=0;v!=g.length;++v)if(m=g[v].trim(),m.length!==0){if(b=m.match(r),y=v,w=0,_=0,m="<c "+(m.slice(0,1)=="<"?">":"")+m,b!=null&&b.length===2){for(y=0,S=b[1],w=0;w!=S.length&&!((_=S.charCodeAt(w)-64)<1||_>26);++w)y=26*y+_;--y,k=y}else++k;for(w=0;w!=m.length&&m.charCodeAt(w)!==62;++w);if(++w,j=Zt(m.slice(0,w),!0),j.r||(j.r=tr({r:N-1,c:k})),S=m.slice(w),E={t:""},(b=S.match(s))!=null&&b[1]!==""&&(E.v=Ur(b[1])),d.cellFormula){if((b=S.match(o))!=null&&b[1]!==""){if(E.f=Ur(dn(b[1])).replace(/\r\n/g,`
`),d.xlfn||(E.f=j7(E.f)),b[0].indexOf('t="array"')>-1)E.F=(S.match(a)||[])[1],E.F.indexOf(":")>-1&&D.push([Bn(E.F),E.F]);else if(b[0].indexOf('t="shared"')>-1){T=Zt(b[0]);var I=Ur(dn(b[1]));d.xlfn||(I=j7(I)),U[parseInt(T.si,10)]=[T,I,j.r]}}else(b=S.match(/<f[^>]*\/>/))&&(T=Zt(b[0]),U[T.si]&&(E.f=Art(U[T.si][1],U[T.si][2],j.r)));var Q=Es(j.r);for(w=0;w<D.length;++w)Q.r>=D[w][0].s.r&&Q.r<=D[w][0].e.r&&Q.c>=D[w][0].s.c&&Q.c<=D[w][0].e.c&&(E.F=D[w][1])}if(j.t==null&&E.v===void 0)if(E.f||E.F)E.v=0,E.t="n";else if(O)E.t="z";else continue;else E.t=j.t||"n";switch(f.s.c>k&&(f.s.c=k),f.e.c<k&&(f.e.c=k),E.t){case"n":if(E.v==""||E.v==null){if(!O)continue;E.t="z"}else E.v=parseFloat(E.v);break;case"s":if(typeof E.v>"u"){if(!O)continue;E.t="z"}else C=Yg[parseInt(E.v,10)],E.v=C.t,E.r=C.r,d.cellHTML&&(E.h=C.h);break;case"str":E.t="s",E.v=E.v!=null?dn(E.v):"",d.cellHTML&&(E.h=aI(E.v));break;case"inlineStr":b=S.match(n),E.t="s",b!=null&&(C=mI(b[1]))?(E.v=C.t,d.cellHTML&&(E.h=C.h)):E.v="";break;case"b":E.v=wn(E.v);break;case"d":d.cellDates?E.v=Sa(E.v,1):(E.v=Ds(Sa(E.v,1)),E.t="n");break;case"e":(!d||d.cellText!==!1)&&(E.w=E.v),E.v=Vne[E.v];break}if(A=B=0,P=null,R&&j.s!==void 0&&(P=p.CellXf[j.s],P!=null&&(P.numFmtId!=null&&(A=P.numFmtId),d.cellStyles&&P.fillId!=null&&(B=P.fillId))),_ae(E,A,B,d,h,p),d.cellDates&&R&&E.t=="n"&&g0(ir[A])&&(E.t="d",E.v=eE(E.v)),j.cm&&d.xlmeta){var ve=(d.xlmeta.Cell||[])[+j.cm-1];ve&&ve.type=="XLDAPR"&&(E.D=!0)}if(M){var z=Es(j.r);u[z.r]||(u[z.r]=[]),u[z.r][z.c]=E}else u[j.r]=E}}}}F.length>0&&(u["!rows"]=F)}}();function bat(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}var wat=ih;function _at(){}function Sat(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=WJe(e),r}function jat(e){var t=go(e);return[t]}function Eat(e){var t=sh(e);return[t]}function Nat(e){var t=go(e),r=e.read_shift(1);return[t,r,"b"]}function Cat(e){var t=sh(e),r=e.read_shift(1);return[t,r,"b"]}function kat(e){var t=go(e),r=e.read_shift(1);return[t,r,"e"]}function Tat(e){var t=sh(e),r=e.read_shift(1);return[t,r,"e"]}function Aat(e){var t=go(e),r=e.read_shift(4);return[t,r,"s"]}function Pat(e){var t=sh(e),r=e.read_shift(4);return[t,r,"s"]}function Oat(e){var t=go(e),r=as(e);return[t,r,"n"]}function jae(e){var t=sh(e),r=as(e);return[t,r,"n"]}function Rat(e){var t=go(e),r=dI(e);return[t,r,"n"]}function Dat(e){var t=sh(e),r=dI(e);return[t,r,"n"]}function Mat(e){var t=go(e),r=cI(e);return[t,r,"is"]}function Iat(e){var t=go(e),r=is(e);return[t,r,"str"]}function $at(e){var t=sh(e),r=is(e);return[t,r,"str"]}function Fat(e,t,r){var n=e.l+t,a=go(e);a.r=r["!row"];var s=e.read_shift(1),o=[a,s,"b"];if(r.cellFormula){e.l+=2;var l=nE(e,n-e.l,r);o[3]=Za(l,null,a,r.supbooks,r)}else e.l=n;return o}function Lat(e,t,r){var n=e.l+t,a=go(e);a.r=r["!row"];var s=e.read_shift(1),o=[a,s,"e"];if(r.cellFormula){e.l+=2;var l=nE(e,n-e.l,r);o[3]=Za(l,null,a,r.supbooks,r)}else e.l=n;return o}function Bat(e,t,r){var n=e.l+t,a=go(e);a.r=r["!row"];var s=as(e),o=[a,s,"n"];if(r.cellFormula){e.l+=2;var l=nE(e,n-e.l,r);o[3]=Za(l,null,a,r.supbooks,r)}else e.l=n;return o}function Uat(e,t,r){var n=e.l+t,a=go(e);a.r=r["!row"];var s=is(e),o=[a,s,"str"];if(r.cellFormula){e.l+=2;var l=nE(e,n-e.l,r);o[3]=Za(l,null,a,r.supbooks,r)}else e.l=n;return o}var zat=ih;function Wat(e,t){var r=e.l+t,n=ih(e),a=uI(e),s=is(e),o=is(e),l=is(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:l};return o&&(c.Tooltip=o),c}function Vat(){}function Hat(e,t,r){var n=e.l+t,a=Une(e),s=e.read_shift(1),o=[a];if(o[2]=s,r.cellFormula){var l=Ynt(e,n-e.l,r);o[1]=l}else e.l=n;return o}function qat(e,t,r){var n=e.l+t,a=ih(e),s=[a];if(r.cellFormula){var o=Jnt(e,n-e.l,r);s[1]=o,e.l=n}else e.l=n;return s}var Gat=["left","right","top","bottom","header","footer"];function Kat(e){var t={};return Gat.forEach(function(r){t[r]=as(e)}),t}function Xat(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Yat(){}function Zat(){}function Jat(e,t,r,n,a,s,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,p,v,m,g,b,y,w,_,S,E=[];l.biff=12,l["!row"]=0;var j=0,N=!1,k=[],C={},T=l.supbooks||a.supbooks||[[]];if(T.sharedf=C,T.arrayf=k,T.SheetNames=a.SheetNames||a.Sheets.map(function(M){return M.name}),!l.supbooks&&(l.supbooks=T,a.Names))for(var A=0;A<a.Names.length;++A)T[0][A+1]=a.Names[A];var B=[],R=[],P=!1;NS[16]={n:"BrtShortReal",f:jae};var D;if(Lc(e,function(F,K,X){if(!h)switch(X){case 148:u=F;break;case 0:p=F,l.sheetRows&&l.sheetRows<=p.r&&(h=!0),_=$a(g=p.r),l["!row"]=p.r,(F.hidden||F.hpt||F.level!=null)&&(F.hpt&&(F.hpx=Fx(F.hpt)),R[F.r]=F);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:F[2]},F[2]){case"n":v.v=F[1];break;case"s":w=Yg[F[1]],v.v=w.t,v.r=w.r;break;case"b":v.v=!!F[1];break;case"e":v.v=F[1],l.cellText!==!1&&(v.w=oh[v.v]);break;case"str":v.t="s",v.v=F[1];break;case"is":v.t="s",v.v=F[1].t;break}if((m=o.CellXf[F[0].iStyleRef])&&_ae(v,m.numFmtId,null,l,s,o),b=F[0].c==-1?b+1:F[0].c,l.dense?(c[g]||(c[g]=[]),c[g][b]=v):c[ua(b)+_]=v,l.cellFormula){for(N=!1,j=0;j<k.length;++j){var O=k[j];p.r>=O[0].s.r&&p.r<=O[0].e.r&&b>=O[0].s.c&&b<=O[0].e.c&&(v.F=$r(O[0]),N=!0)}!N&&F.length>3&&(v.f=F[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>b&&(d.s.c=b),d.e.r<p.r&&(d.e.r=p.r),d.e.c<b&&(d.e.c=b),l.cellDates&&m&&v.t=="n"&&g0(ir[m.numFmtId])){var W=Hd(v.v);W&&(v.t="d",v.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}D&&(D.type=="XLDAPR"&&(v.D=!0),D=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;v={t:"z",v:void 0},b=F[0].c==-1?b+1:F[0].c,l.dense?(c[g]||(c[g]=[]),c[g][b]=v):c[ua(b)+_]=v,d.s.r>p.r&&(d.s.r=p.r),d.s.c>b&&(d.s.c=b),d.e.r<p.r&&(d.e.r=p.r),d.e.c<b&&(d.e.c=b),D&&(D.type=="XLDAPR"&&(v.D=!0),D=void 0);break;case 176:E.push(F);break;case 49:D=((l.xlmeta||{}).Cell||[])[F-1];break;case 494:var L=n["!id"][F.relId];for(L?(F.Target=L.Target,F.loc&&(F.Target+="#"+F.loc),F.Rel=L):F.relId==""&&(F.Target="#"+F.loc),g=F.rfx.s.r;g<=F.rfx.e.r;++g)for(b=F.rfx.s.c;b<=F.rfx.e.c;++b)l.dense?(c[g]||(c[g]=[]),c[g][b]||(c[g][b]={t:"z",v:void 0}),c[g][b].l=F):(y=tr({c:b,r:g}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=F);break;case 426:if(!l.cellFormula)break;k.push(F),S=l.dense?c[g][b]:c[ua(b)+_],S.f=Za(F[1],d,{r:p.r,c:b},T,l),S.F=$r(F[0]);break;case 427:if(!l.cellFormula)break;C[tr(F[0].s)]=F[1],S=l.dense?c[g][b]:c[ua(b)+_],S.f=Za(F[1],d,{r:p.r,c:b},T,l);break;case 60:if(!l.cellStyles)break;for(;F.e>=F.s;)B[F.e--]={width:F.w/256,hidden:!!(F.flags&1),level:F.level},P||(P=!0,pI(F.w/256)),Mp(B[F.e+1]);break;case 161:c["!autofilter"]={ref:$r(F)};break;case 476:c["!margins"]=F;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),F.name&&(a.Sheets[r].CodeName=F.name),(F.above||F.left)&&(c["!outline"]={above:F.above,left:F.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),F.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!K.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+X.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=$r(u||d)),l.sheetRows&&c["!ref"]){var U=Bn(c["!ref"]);l.sheetRows<=+U.e.r&&(U.e.r=l.sheetRows-1,U.e.r>d.e.r&&(U.e.r=d.e.r),U.e.r<U.s.r&&(U.s.r=U.e.r),U.e.c>d.e.c&&(U.e.c=d.e.c),U.e.c<U.s.c&&(U.s.c=U.e.c),c["!fullref"]=c["!ref"],c["!ref"]=$r(U))}return E.length>0&&(c["!merges"]=E),B.length>0&&(c["!cols"]=B),R.length>0&&(c["!rows"]=R),c}function Qat(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var a=Ur((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function est(e,t,r,n,a,s){var o=s||{"!type":"chart"};if(!e)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=Qat(f);d.s.r=d.s.c=0,d.e.c=l,u=ua(l),h[0].forEach(function(p,v){o[u+$a(v)]={t:"n",v:p,z:h[1]},c=v}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=$r(d)),o}function tst(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(Sae);return l&&vI(l[0],s,a,r),(o=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function rst(e,t){e.l+=10;var r=is(e);return{name:r}}function nst(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Lc(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var Eae=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],ast=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],sst=[],ist=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function T7(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=wn(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function A7(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=wn(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function Nae(e){A7(e.WBProps,Eae),A7(e.CalcPr,ist),T7(e.WBView,ast),T7(e.Sheets,sst),Dm.date1904=wn(e.WBProps.date1904)}var ost="][*?/\\".split("");function lst(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return ost.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var cst=/<\w+:workbook/;function ust(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},o=0;if(e.replace(ds,function(c,u){var d=Zt(c);switch($l(d[0])){case"<?xml":break;case"<workbook":c.match(cst)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":Eae.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=wn(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=dn(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Ur(dn(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=dn(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),wn(d.hidden||"0")&&(s.Hidden=!0),o=u+c.length;break;case"</definedName>":s.Ref=Ur(dn(e.slice(o,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),NJe.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Nae(r),r}function dst(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=LO(e),r.name=is(e),r}function fst(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?is(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function hst(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function mst(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=VJe(e),o=Znt(e,0,r),l=uI(e);e.l=n;var c={Name:s,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function pst(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],NS[16]={n:"BrtFRTArchID$",f:hst},Lc(e,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Za(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),Nae(r),r.Names=s,r.supbooks=o,r}function gst(e,t,r){return t.slice(-4)===".bin"?pst(e,r):ust(e,r)}function vst(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?Jat(e,n,r,a,s,o,l):dat(e,n,r,a,s,o,l)}function xst(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?nst(e,n,r,a,s):tst(e,n,r,a,s)}function yst(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?Crt():krt()}function bst(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?Ert():Nrt()}function wst(e,t,r,n){return t.slice(-4)===".bin"?ztt(e,r,n):Itt(e,r,n)}function _st(e,t,r){return fae(e,r)}function Sst(e,t,r){return t.slice(-4)===".bin"?att(e,r):rtt(e,r)}function jst(e,t,r){return t.slice(-4)===".bin"?_rt(e,r):vrt(e,r)}function Est(e,t,r){return t.slice(-4)===".bin"?mrt(e):frt(e)}function Nst(e,t,r,n){return r.slice(-4)===".bin"?prt(e,t,r,n):void 0}function Cst(e,t,r){return t.slice(-4)===".bin"?urt(e,t,r):drt(e,t,r)}var Cae=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,kae=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function wo(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(Cae),s,o,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(kae),(o=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(o+1),n[l]=s[2].slice(1,s[2].length-1));return n}function kst(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(Cae),a,s,o,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(kae),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),r[o]=a[2].slice(1,a[2].length-1));return r}var Jg;function Tst(e,t){var r=Jg[e]||Ur(e);return r==="General"?Uf(t):io(r,t)}function Ast(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=wn(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Sa(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Ur(t)]=a}function Pst(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||oh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Rx(e.v):e.w=Uf(e.v):e.w=Tst(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=Jg[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&g0(n)){var a=Hd(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function Ost(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=Att[n.Pattern]||n.Pattern)}e[t.ID]=t}function Rst(e,t,r,n,a,s,o,l,c,u){var d="General",f=n.StyleID,h={};u=u||{};var p=[],v=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&p.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=wn(e);break;case"String":n.t="s",n.r=JB(Ur(e)),n.v=e.indexOf("<")>-1?Ur(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Sa(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Ur(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Vne[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=JB(t||e));break}if(Pst(n,d,u),u.cellFormula!==!1)if(n.Formula){var m=Ur(n.Formula);m.charCodeAt(0)==61&&(m=m.slice(1)),n.f=Rm(m,a),delete n.Formula,n.ArrayRange=="RC"?n.F=Rm("RC:RC",a):n.ArrayRange&&(n.F=Rm(n.ArrayRange,a),c.push([Bn(n.F),n.F]))}else for(v=0;v<c.length;++v)a.r>=c[v][0].s.r&&a.r<=c[v][0].e.r&&a.c>=c[v][0].s.c&&a.c<=c[v][0].e.c&&(n.F=c[v][1]);u.cellStyles&&(p.forEach(function(g){!h.patternType&&g.patternType&&(h.patternType=g.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Dst(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function wC(e,t){var r=t||{};gne();var n=dg(sI(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=dn(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var o=Ia(r);return o.type="string",Ix.to_workbook(n,o)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(J){a.indexOf("<"+J)>=0&&(s=!0)}),s)return Wst(n,r);Jg={"General Number":"General","General Date":ir[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":ir[15],"Short Date":ir[14],"Long Time":ir[19],"Medium Time":ir[18],"Short Time":ir[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:ir[2],Standard:ir[4],Percent:ir[10],Scientific:ir[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],h=r.dense?[]:{},p="",v={},m={},g=wo('<Data ss:Type="String">'),b=0,y=0,w=0,_={s:{r:2e6,c:2e6},e:{r:0,c:0}},S={},E={},j="",N=0,k=[],C={},T={},A=0,B=[],R=[],P={},D=[],U,M=!1,F=[],K=[],X={},O=0,W=0,L={Sheets:[],WBProps:{date1904:!1}},H={};Mx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ee="";l=Mx.exec(n);)switch(l[3]=(ee=l[3]).toLowerCase()){case"data":if(ee=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?Rst(n.slice(b,l.index),j,g,c[c.length-1][0]=="comment"?P:v,{c:y,r:w},S,D[y],m,F,r):(j="",g=wo(l[0]),b=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(R.length>0&&(v.c=R),(!r.sheetRows||r.sheetRows>w)&&v.v!==void 0&&(r.dense?(h[w]||(h[w]=[]),h[w][y]=v):h[ua(y)+$a(w)]=v),v.HRef&&(v.l={Target:Ur(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(O=y+(parseInt(v.MergeAcross,10)|0),W=w+(parseInt(v.MergeDown,10)|0),k.push({s:{c:y,r:w},e:{c:O,r:W}})),!r.sheetStubs)v.MergeAcross?y=O+1:++y;else if(v.MergeAcross||v.MergeDown){for(var q=y;q<=O;++q)for(var Z=w;Z<=W;++Z)(q>y||Z>w)&&(r.dense?(h[Z]||(h[Z]=[]),h[Z][q]={t:"z"}):h[ua(q)+$a(Z)]={t:"z"});y=O+1}else++y;else v=kst(l[0]),v.Index&&(y=+v.Index-1),y<_.s.c&&(_.s.c=y),y>_.e.c&&(_.e.c=y),l[0].slice(-2)==="/>"&&++y,R=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(w<_.s.r&&(_.s.r=w),w>_.e.r&&(_.e.r=w),l[0].slice(-2)==="/>"&&(m=wo(l[0]),m.Index&&(w=+m.Index-1)),y=0,++w):(m=wo(l[0]),m.Index&&(w=+m.Index-1),X={},(m.AutoFitHeight=="0"||m.Height)&&(X.hpx=parseInt(m.Height,10),X.hpt=dae(X.hpx),K[w]=X),m.Hidden=="1"&&(X.hidden=!0,K[w]=X));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(p),_.s.r<=_.e.r&&_.s.c<=_.e.c&&(h["!ref"]=$r(_),r.sheetRows&&r.sheetRows<=_.e.r&&(h["!fullref"]=h["!ref"],_.e.r=r.sheetRows-1,h["!ref"]=$r(_))),k.length&&(h["!merges"]=k),D.length>0&&(h["!cols"]=D),K.length>0&&(h["!rows"]=K),d[p]=h}else _={s:{r:2e6,c:2e6},e:{r:0,c:0}},w=y=0,c.push([l[3],!1]),u=wo(l[0]),p=Ur(u.Name),h=r.dense?[]:{},k=[],F=[],K=[],H={name:p,Hidden:0},L.Sheets.push(H);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),D=[],M=!1}break;case"style":l[1]==="/"?Ost(S,E,r):E=wo(l[0]);break;case"numberformat":E.nf=Ur(wo(l[0]).Format||"General"),Jg[E.nf]&&(E.nf=Jg[E.nf]);for(var I=0;I!=392&&ir[I]!=E.nf;++I);if(I==392){for(I=57;I!=392;++I)if(ir[I]==null){of(E.nf,I);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(U=wo(l[0]),U.Hidden&&(U.hidden=!0,delete U.Hidden),U.Width&&(U.wpx=parseInt(U.Width,10)),!M&&U.wpx>10){M=!0,ws=cae;for(var Q=0;Q<D.length;++Q)D[Q]&&Mp(D[Q])}M&&Mp(U),D[U.Index-1||D.length]=U;for(var ve=0;ve<+U.Span;++ve)D[D.length]=Ia(U);break;case"namedrange":if(l[1]==="/")break;L.Names||(L.Names=[]);var z=Zt(l[0]),we={Name:z.Name,Ref:Rm(z.RefersTo.slice(1),{r:0,c:0})};L.Sheets.length>0&&(we.Sheet=L.Sheets.length-1),L.Names.push(we);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?j+=n.slice(N,l.index):N=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;E.Interior=wo(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?pQe(C,ee,n.slice(A,l.index)):A=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));Dst(P),R.push(P)}else c.push([l[3],!1]),u=wo(l[0]),P={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Re=wo(l[0]);h["!autofilter"]={ref:Rm(Re.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return I7(n,r);var Pe=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Pe=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Pe=!1}break;case"excelworkbook":switch(l[3]){case"date1904":L.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Pe=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:Pe=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(A,l.index)){case"SheetHidden":H.Hidden=1;break;case"SheetVeryHidden":H.Hidden=2;break}else A=l.index+l[0].length;break;case"header":h["!margins"]||Zg(h["!margins"]={},"xlml"),isNaN(+Zt(l[0]).Margin)||(h["!margins"].header=+Zt(l[0]).Margin);break;case"footer":h["!margins"]||Zg(h["!margins"]={},"xlml"),isNaN(+Zt(l[0]).Margin)||(h["!margins"].footer=+Zt(l[0]).Margin);break;case"pagemargins":var De=Zt(l[0]);h["!margins"]||Zg(h["!margins"]={},"xlml"),isNaN(+De.Top)||(h["!margins"].top=+De.Top),isNaN(+De.Left)||(h["!margins"].left=+De.Left),isNaN(+De.Right)||(h["!margins"].right=+De.Right),isNaN(+De.Bottom)||(h["!margins"].bottom=+De.Bottom);break;case"displayrighttoleft":L.Views||(L.Views=[]),L.Views[0]||(L.Views[0]={}),L.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Pe=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Pe=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Pe=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Pe=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Pe=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Pe=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Pe=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Pe=!1}break;case"smarttags":break;default:Pe=!1;break}if(Pe||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?Ast(T,ee,B,n.slice(A,l.index)):(B=l,A=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var Ne={};return!r.bookSheets&&!r.bookProps&&(Ne.Sheets=d),Ne.SheetNames=f,Ne.Workbook=L,Ne.SSF=Ia(ir),Ne.Props=C,Ne.Custprops=T,Ne}function WO(e,t){switch(bI(t=t||{}),t.type||"base64"){case"base64":return wC(Di(e),t);case"binary":case"buffer":case"file":return wC(e,t);case"array":return wC(ah(e),t)}}function Mst(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=GJe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=KJe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Ist=[60,1084,2066,2165,2175];function $st(e,t,r,n,a){var s=n,o=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}o.push(l),r.l+=s;for(var c=lc(r,r.l),u=VO[c],d=0;u!=null&&Ist.indexOf(c)>-1;)s=lc(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),o.push(l),r.l+=4+s,u=VO[c=lc(r,r.l)];var f=du(o);Pa(f,0);var h=0;f.lens=[];for(var p=0;p<o.length;++p)f.lens.push(h),h+=o[p].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function cl(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=ir[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||oh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Rx(e.v):e.w=Uf(e.v):e.w=io(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&g0(ir[n]||String(n))){var a=Hd(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function f1(e,t,r){return{v:e,ixfe:t,t:r}}function Fst(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},o={},l=null,c=[],u="",d={},f,h="",p,v,m,g,b={},y=[],w,_,S=[],E=[],j={Sheets:[],WBProps:{date1904:!1},Views:[{}]},N={},k=function(Ye){return Ye<8?lf[Ye]:Ye<64&&E[Ye-8]||lf[Ye]},C=function(Ye,ye,le){var _e=ye.XF.data;if(!(!_e||!_e.patternType||!le||!le.cellStyles)){ye.s={},ye.s.patternType=_e.patternType;var Be;(Be=$x(k(_e.icvFore)))&&(ye.s.fgColor={rgb:Be}),(Be=$x(k(_e.icvBack)))&&(ye.s.bgColor={rgb:Be})}},T=function(Ye,ye,le){if(!(X>1)&&!(le.sheetRows&&Ye.r>=le.sheetRows)){if(le.cellStyles&&ye.XF&&ye.XF.data&&C(Ye,ye,le),delete ye.ixfe,delete ye.XF,f=Ye,h=tr(Ye),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),Ye.r<o.s.r&&(o.s.r=Ye.r),Ye.c<o.s.c&&(o.s.c=Ye.c),Ye.r+1>o.e.r&&(o.e.r=Ye.r+1),Ye.c+1>o.e.c&&(o.e.c=Ye.c+1),le.cellFormula&&ye.f){for(var _e=0;_e<y.length;++_e)if(!(y[_e][0].s.c>Ye.c||y[_e][0].s.r>Ye.r)&&!(y[_e][0].e.c<Ye.c||y[_e][0].e.r<Ye.r)){ye.F=$r(y[_e][0]),(y[_e][0].s.c!=Ye.c||y[_e][0].s.r!=Ye.r)&&delete ye.f,ye.f&&(ye.f=""+Za(y[_e][1],o,Ye,F,A));break}}le.dense?(a[Ye.r]||(a[Ye.r]=[]),a[Ye.r][Ye.c]=ye):a[h]=ye}},A={enc:!1,sbcch:0,snames:[],sharedf:b,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(A.password=t.password);var B,R=[],P=[],D=[],U=[],M=!1,F=[];F.SheetNames=A.snames,F.sharedf=A.sharedf,F.arrayf=A.arrayf,F.names=[],F.XTI=[];var K=0,X=0,O=0,W=[],L=[],H;A.codepage=1200,Uo(1200);for(var ee=!1;e.l<e.length-1;){var q=e.l,Z=e.read_shift(2);if(Z===0&&K===10)break;var I=e.l===e.length?0:e.read_shift(2),Q=VO[Z];if(Q&&Q.f){if(t.bookSheets&&K===133&&Z!==133)break;if(K=Z,Q.r===2||Q.r==12){var ve=e.read_shift(2);if(I-=2,!A.enc&&ve!==Z&&((ve&255)<<8|ve>>8)!==Z)throw new Error("rt mismatch: "+ve+"!="+Z);Q.r==12&&(e.l+=10,I-=10)}var z={};if(Z===10?z=Q.f(e,I,A):z=$st(Z,Q,e,I,A),X==0&&[9,521,1033,2057].indexOf(K)===-1)continue;switch(Z){case 34:r.opts.Date1904=j.WBProps.date1904=z;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(A.enc||(e.l=0),A.enc=z,!t.password)throw new Error("File is password-protected");if(z.valid==null)throw new Error("Encryption scheme unsupported");if(!z.valid)throw new Error("Password is incorrect");break;case 92:A.lastuser=z;break;case 66:var we=Number(z);switch(we){case 21010:we=1200;break;case 32768:we=1e4;break;case 32769:we=1252;break}Uo(A.codepage=we),ee=!0;break;case 317:A.rrtabid=z;break;case 25:A.winlocked=z;break;case 439:r.opts.RefreshAll=z;break;case 12:r.opts.CalcCount=z;break;case 16:r.opts.CalcDelta=z;break;case 17:r.opts.CalcIter=z;break;case 13:r.opts.CalcMode=z;break;case 14:r.opts.CalcPrecision=z;break;case 95:r.opts.CalcSaveRecalc=z;break;case 15:A.CalcRefMode=z;break;case 2211:r.opts.FullCalc=z;break;case 129:z.fDialog&&(a["!type"]="dialog"),z.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),z.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:S.push(z);break;case 430:F.push([z]),F[F.length-1].XTI=[];break;case 35:case 547:F[F.length-1].push(z);break;case 24:case 536:H={Name:z.Name,Ref:Za(z.rgce,o,null,F,A)},z.itab>0&&(H.Sheet=z.itab-1),F.names.push(H),F[0]||(F[0]=[],F[0].XTI=[]),F[F.length-1].push(z),z.Name=="_xlnm._FilterDatabase"&&z.itab>0&&z.rgce&&z.rgce[0]&&z.rgce[0][0]&&z.rgce[0][0][0]=="PtgArea3d"&&(L[z.itab-1]={ref:$r(z.rgce[0][0][1][2])});break;case 22:A.ExternCount=z;break;case 23:F.length==0&&(F[0]=[],F[0].XTI=[]),F[F.length-1].XTI=F[F.length-1].XTI.concat(z),F.XTI=F.XTI.concat(z);break;case 2196:if(A.biff<8)break;H!=null&&(H.Comment=z[1]);break;case 18:a["!protect"]=z;break;case 19:z!==0&&A.WTF&&console.error("Password verifier: "+z);break;case 133:s[z.pos]=z,A.snames.push(z.name);break;case 10:{if(--X)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,a["!ref"]=$r(o),t.sheetRows&&t.sheetRows<=o.e.r){var Re=o.e.r;o.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=$r(o),o.e.r=Re}o.e.r++,o.e.c++}R.length>0&&(a["!merges"]=R),P.length>0&&(a["!objects"]=P),D.length>0&&(a["!cols"]=D),U.length>0&&(a["!rows"]=U),j.Sheets.push(N)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(A.biff===8&&(A.biff={9:2,521:3,1033:4}[Z]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[z.BIFFVer]||8),A.biffguess=z.BIFFVer==0,z.BIFFVer==0&&z.dt==4096&&(A.biff=5,ee=!0,Uo(A.codepage=28591)),A.biff==8&&z.BIFFVer==0&&z.dt==16&&(A.biff=2),X++)break;if(a=t.dense?[]:{},A.biff<8&&!ee&&(ee=!0,Uo(A.codepage=t.codepage||1252)),A.biff<5||z.BIFFVer==0&&z.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var Pe={pos:e.l-I,name:u};s[Pe.pos]=Pe,A.snames.push(u)}else u=(s[q]||{name:""}).name;z.dt==32&&(a["!type"]="chart"),z.dt==64&&(a["!type"]="macro"),R=[],P=[],A.arrayf=y=[],D=[],U=[],M=!1,N={Hidden:(s[q]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[z.r]||[])[z.c]:a[tr({c:z.c,r:z.r})])&&++z.c,w={ixfe:z.ixfe,XF:S[z.ixfe]||{},v:z.val,t:"n"},O>0&&(w.z=W[w.ixfe>>8&63]),cl(w,t,r.opts.Date1904),T({c:z.c,r:z.r},w,t);break;case 5:case 517:w={ixfe:z.ixfe,XF:S[z.ixfe],v:z.val,t:z.t},O>0&&(w.z=W[w.ixfe>>8&63]),cl(w,t,r.opts.Date1904),T({c:z.c,r:z.r},w,t);break;case 638:w={ixfe:z.ixfe,XF:S[z.ixfe],v:z.rknum,t:"n"},O>0&&(w.z=W[w.ixfe>>8&63]),cl(w,t,r.opts.Date1904),T({c:z.c,r:z.r},w,t);break;case 189:for(var De=z.c;De<=z.C;++De){var Ne=z.rkrec[De-z.c][0];w={ixfe:Ne,XF:S[Ne],v:z.rkrec[De-z.c][1],t:"n"},O>0&&(w.z=W[w.ixfe>>8&63]),cl(w,t,r.opts.Date1904),T({c:De,r:z.r},w,t)}break;case 6:case 518:case 1030:{if(z.val=="String"){l=z;break}if(w=f1(z.val,z.cell.ixfe,z.tt),w.XF=S[w.ixfe],t.cellFormula){var J=z.formula;if(J&&J[0]&&J[0][0]&&J[0][0][0]=="PtgExp"){var Y=J[0][0][1][0],ae=J[0][0][1][1],ge=tr({r:Y,c:ae});b[ge]?w.f=""+Za(z.formula,o,z.cell,F,A):w.F=((t.dense?(a[Y]||[])[ae]:a[ge])||{}).F}else w.f=""+Za(z.formula,o,z.cell,F,A)}O>0&&(w.z=W[w.ixfe>>8&63]),cl(w,t,r.opts.Date1904),T(z.cell,w,t),l=z}break;case 7:case 519:if(l)l.val=z,w=f1(z,l.cell.ixfe,"s"),w.XF=S[w.ixfe],t.cellFormula&&(w.f=""+Za(l.formula,o,l.cell,F,A)),O>0&&(w.z=W[w.ixfe>>8&63]),cl(w,t,r.opts.Date1904),T(l.cell,w,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(z);var Se=tr(z[0].s);if(p=t.dense?(a[z[0].s.r]||[])[z[0].s.c]:a[Se],t.cellFormula&&p){if(!l||!Se||!p)break;p.f=""+Za(z[1],o,z[0],F,A),p.F=$r(z[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!l)break;b[tr(l.cell)]=z[0],p=t.dense?(a[l.cell.r]||[])[l.cell.c]:a[tr(l.cell)],(p||{}).f=""+Za(z[0],o,f,F,A)}}break;case 253:w=f1(c[z.isst].t,z.ixfe,"s"),c[z.isst].h&&(w.h=c[z.isst].h),w.XF=S[w.ixfe],O>0&&(w.z=W[w.ixfe>>8&63]),cl(w,t,r.opts.Date1904),T({c:z.c,r:z.r},w,t);break;case 513:t.sheetStubs&&(w={ixfe:z.ixfe,XF:S[z.ixfe],t:"z"},O>0&&(w.z=W[w.ixfe>>8&63]),cl(w,t,r.opts.Date1904),T({c:z.c,r:z.r},w,t));break;case 190:if(t.sheetStubs)for(var te=z.c;te<=z.C;++te){var me=z.ixfe[te-z.c];w={ixfe:me,XF:S[me],t:"z"},O>0&&(w.z=W[w.ixfe>>8&63]),cl(w,t,r.opts.Date1904),T({c:te,r:z.r},w,t)}break;case 214:case 516:case 4:w=f1(z.val,z.ixfe,"s"),w.XF=S[w.ixfe],O>0&&(w.z=W[w.ixfe>>8&63]),cl(w,t,r.opts.Date1904),T({c:z.c,r:z.r},w,t);break;case 0:case 512:X===1&&(o=z);break;case 252:c=z;break;case 1054:if(A.biff==4){W[O++]=z[1];for(var ke=0;ke<O+163&&ir[ke]!=z[1];++ke);ke>=163&&of(z[1],O+163)}else of(z[1],z[0]);break;case 30:{W[O++]=z;for(var he=0;he<O+163&&ir[he]!=z;++he);he>=163&&of(z,O+163)}break;case 229:R=R.concat(z);break;case 93:P[z.cmo[0]]=A.lastobj=z;break;case 438:A.lastobj.TxO=z;break;case 127:A.lastobj.ImData=z;break;case 440:for(g=z[0].s.r;g<=z[0].e.r;++g)for(m=z[0].s.c;m<=z[0].e.c;++m)p=t.dense?(a[g]||[])[m]:a[tr({c:m,r:g})],p&&(p.l=z[1]);break;case 2048:for(g=z[0].s.r;g<=z[0].e.r;++g)for(m=z[0].s.c;m<=z[0].e.c;++m)p=t.dense?(a[g]||[])[m]:a[tr({c:m,r:g})],p&&p.l&&(p.l.Tooltip=z[1]);break;case 28:{if(A.biff<=5&&A.biff>=2)break;p=t.dense?(a[z[0].r]||[])[z[0].c]:a[tr(z[0])];var et=P[z[2]];p||(t.dense?(a[z[0].r]||(a[z[0].r]=[]),p=a[z[0].r][z[0].c]={t:"z"}):p=a[tr(z[0])]={t:"z"},o.e.r=Math.max(o.e.r,z[0].r),o.s.r=Math.min(o.s.r,z[0].r),o.e.c=Math.max(o.e.c,z[0].c),o.s.c=Math.min(o.s.c,z[0].c)),p.c||(p.c=[]),v={a:z[1],t:et.TxO.t},p.c.push(v)}break;case 2173:irt(S[z.ixfe],z.ext);break;case 125:{if(!A.cellStyles)break;for(;z.e>=z.s;)D[z.e--]={width:z.w/256,level:z.level||0,hidden:!!(z.flags&1)},M||(M=!0,pI(z.w/256)),Mp(D[z.e+1])}break;case 520:{var nt={};z.level!=null&&(U[z.r]=nt,nt.level=z.level),z.hidden&&(U[z.r]=nt,nt.hidden=!0),z.hpt&&(U[z.r]=nt,nt.hpt=z.hpt,nt.hpx=Fx(z.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Zg(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Z]]=z;break;case 161:a["!margins"]||Zg(a["!margins"]={}),a["!margins"].header=z.header,a["!margins"].footer=z.footer;break;case 574:z.RTL&&(j.Views[0].RTL=!0);break;case 146:E=z;break;case 2198:B=z;break;case 140:_=z;break;case 442:u?N.CodeName=z||N.name:j.WBProps.CodeName=z||"ThisWorkbook";break}}else Q||console.error("Missing Info for XLS Record 0x"+Z.toString(16)),e.l+=I}return r.SheetNames=Ol(s).sort(function(Oe,Ye){return Number(Oe)-Number(Ye)}).map(function(Oe){return s[Oe].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&L.forEach(function(Oe,Ye){r.Sheets[r.SheetNames[Ye]]["!autofilter"]=Oe}),r.Strings=c,r.SSF=Ia(ir),A.enc&&(r.Encryption=A.enc),B&&(r.Themes=B),r.Metadata={},_!==void 0&&(r.Metadata.Country=_),F.names.length>0&&(j.Names=F.names),r.Workbook=j,r}var P7={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Lst(e,t,r){var n=Dr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=m7(n,eQe,P7.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var o=Dr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=m7(o,tQe,P7.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(qne(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function Tae(e,t){t||(t={}),bI(t),ane(),t.codepage&&JM(t.codepage);var r,n;if(e.FullPaths){if(Dr.find(e,"/encryption"))throw new Error("File is password-protected");r=Dr.find(e,"!CompObj"),n=Dr.find(e,"/Workbook")||Dr.find(e,"/Book")}else{switch(t.type){case"base64":e=Fo(Di(e));break;case"binary":e=Fo(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Pa(e,0),n={content:e}}var a,s;if(r&&Mst(r),t.bookProps&&!t.bookSheets)a={};else{var o=Rr?"buffer":"array";if(n&&n.content)a=Fst(n.content,t);else if((s=Dr.find(e,"PerfectOffice_MAIN"))&&s.content)a=Xg.to_workbook(s.content,(t.type=o,t));else if((s=Dr.find(e,"NativeContent_MAIN"))&&s.content)a=Xg.to_workbook(s.content,(t.type=o,t));else throw(s=Dr.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Dr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=jrt(e))}var l={};return e.FullPaths&&Lst(e,l,t),a.Props=a.Custprops=l,t.bookFiles&&(a.cfb=e),a}var NS={0:{f:bat},1:{f:jat},2:{f:Rat},3:{f:kat},4:{f:Nat},5:{f:Oat},6:{f:Iat},7:{f:Aat},8:{f:Uat},9:{f:Bat},10:{f:Fat},11:{f:Lat},12:{f:Eat},13:{f:Dat},14:{f:Tat},15:{f:Cat},16:{f:jae},17:{f:$at},18:{f:Pat},19:{f:cI},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:mst},40:{},42:{},43:{f:Ftt},44:{f:$tt},45:{f:Ltt},46:{f:Utt},47:{f:Btt},48:{},49:{f:BJe},50:{},51:{f:lrt},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:aae},62:{f:Mat},63:{f:hrt},64:{f:Yat},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:us,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Xat},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Sat},148:{f:wat,p:16},151:{f:Vat},152:{},153:{f:fst},154:{},155:{},156:{f:dst},157:{},158:{},159:{T:1,f:ntt},160:{T:-1},161:{T:1,f:ih},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:zat},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:ort},336:{T:-1},337:{f:crt,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:LO},357:{},358:{},359:{},360:{T:1},361:{},362:{f:nae},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Hat},427:{f:qat},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Kat},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:_at},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Wat},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:LO},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:wrt},633:{T:1},634:{T:-1},635:{T:1,f:brt},636:{T:-1},637:{f:zJe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:rst},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Zat},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},VO={6:{f:yC},10:{f:qc},12:{f:Qn},13:{f:Qn},14:{f:zn},15:{f:zn},16:{f:as},17:{f:zn},18:{f:zn},19:{f:Qn},20:{f:x7},21:{f:x7},23:{f:nae},24:{f:b7},25:{f:zn},26:{},27:{},28:{f:vet},29:{},34:{f:zn},35:{f:y7},38:{f:as},39:{f:as},40:{f:as},41:{f:as},42:{f:zn},43:{f:zn},47:{f:_tt},49:{f:ZQe},51:{f:Qn},60:{},61:{f:KQe},64:{f:zn},65:{f:YQe},66:{f:Qn},77:{},80:{},81:{},82:{},85:{f:Qn},89:{},90:{},91:{},92:{f:BQe},93:{f:yet},94:{},95:{f:zn},96:{},97:{},99:{f:zn},125:{f:aae},128:{f:oet},129:{f:UQe},130:{f:Qn},131:{f:zn},132:{f:zn},133:{f:zQe},134:{},140:{f:Net},141:{f:Qn},144:{},146:{f:ket},151:{},152:{},153:{},154:{},155:{},156:{f:Qn},157:{},158:{},160:{f:Ret},161:{f:Aet},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:net},190:{f:aet},193:{f:qc},197:{},198:{},199:{},200:{},201:{},202:{f:zn},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Qn},220:{},221:{f:zn},222:{},224:{f:iet},225:{f:LQe},226:{f:qc},227:{},229:{f:xet},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:WQe},253:{f:JQe},255:{f:VQe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Zne},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:zn},353:{f:qc},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:uet},431:{f:zn},432:{},433:{},434:{},437:{},438:{f:_et},439:{f:zn},440:{f:jet},441:{},442:{f:$y},443:{},444:{f:Qn},445:{},446:{},448:{f:qc},449:{f:GQe,r:2},450:{f:qc},512:{f:g7},513:{f:Oet},515:{f:cet},516:{f:QQe},517:{f:v7},519:{f:Det},520:{f:HQe},523:{},545:{f:w7},549:{f:p7},566:{},574:{f:XQe},638:{f:ret},659:{},1048:{},1054:{f:eet},1084:{},1212:{f:met},2048:{f:Eet},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:c1},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:qc},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Tet,r:12},2173:{f:srt,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:zn,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:het,r:12},2197:{},2198:{f:Qtt,r:12},2199:{},2200:{},2201:{},2202:{f:pet,r:12},2203:{f:qc},2204:{},2205:{},2206:{},2207:{},2211:{f:qQe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Qn},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Pet},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Cet},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:g7},1:{},2:{f:Fet},3:{f:$et},4:{f:Iet},5:{f:v7},7:{f:Let},8:{},9:{f:c1},11:{},22:{f:Qn},30:{f:tet},31:{},32:{},33:{f:w7},36:{},37:{f:p7},50:{f:Bet},62:{},52:{},67:{},68:{f:Qn},69:{},86:{},126:{},127:{f:Met},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Uet},223:{},234:{},354:{},421:{},518:{f:yC},521:{f:c1},536:{f:b7},547:{f:y7},561:{},579:{},1030:{f:yC},1033:{f:c1},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function _o(e,t,r,n){var a=t;if(!isNaN(a)){var s=(r||[]).length||0,o=e.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&Fne(r)&&e.push(r)}}function O7(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),o=a.index,l=s&&s.index||e.length,c=lJe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(o=0;o<c.length;++o){var m=c[o].trim(),g=m.slice(0,3).toLowerCase();if(g=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(g!="<td"&&g!="<th")){var b=m.split(/<\/t[dh]>/i);for(l=0;l<b.length;++l){var y=b[l].trim();if(y.match(/<t[dh]/i)){for(var w=y,_=0;w.charAt(0)=="<"&&(_=w.indexOf(">"))>-1;)w=w.slice(_+1);for(var S=0;S<v.length;++S){var E=v[S];E.s.c==d&&E.s.r<u&&u<=E.e.r&&(d=E.e.c+1,S=-1)}var j=Zt(y.slice(0,y.indexOf(">")));h=j.colspan?+j.colspan:1,((f=+j.rowspan)>1||h>1)&&v.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var N=j.t||j["data-t"]||"";if(!w.length){d+=h;continue}if(w=Ene(w),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!w.length){d+=h;continue}var k={t:"s",v:w};r.raw||!w.trim().length||N=="s"||(w==="TRUE"?k={t:"b",v:!0}:w==="FALSE"?k={t:"b",v:!1}:isNaN(Yo(w))?isNaN(Dp(w).getDate())||(k={t:"d",v:Sa(w)},r.cellDates||(k={t:"n",v:Ds(k.v)}),k.z=r.dateNF||ir[14]):k={t:"n",v:Yo(w)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=k):n[tr({r:u,c:d})]=k,d+=h}}}}return n["!ref"]=$r(p),v.length&&(n["!merges"]=v),n}function Bst(e,t,r,n){for(var a=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=tr({r,c:o}),f=n.dense?(e[r]||[])[o]:e[d],h=f&&f.v!=null&&(f.h||aI(f.w||(Tc(f),f.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+d,s.push(jJe("td",h,p))}}var v="<tr>";return v+s.join("")+"</tr>"}var Ust='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',zst="</body></html>";function Wst(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return md(O7(r[0],t),t);var n=_I();return r.forEach(function(a,s){SI(n,O7(a,t),"Sheet"+(s+1))}),n}function Vst(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Hst(e,t){var r=t||{},n=r.header!=null?r.header:Ust,a=r.footer!=null?r.footer:zst,s=[n],o=v0(e["!ref"]);r.dense=Array.isArray(e),s.push(Vst(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push(Bst(e,o,l,r));return s.push("</table>"+a),s.join("")}function Aae(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?Es(n.origin):n.origin;a=o.r,s=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=v0(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,p=e["!rows"]||(e["!rows"]=[]),v=0,m=0,g=0,b=0,y=0,w=0;for(e["!cols"]||(e["!cols"]=[]);v<l.length&&m<c;++v){var _=l[v];if(R7(_)){if(n.display)continue;p[m]={hidden:!0}}var S=_.children;for(g=b=0;g<S.length;++g){var E=S[g];if(!(n.display&&R7(E))){var j=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):Ene(E.innerHTML),N=E.getAttribute("data-z")||E.getAttribute("z");for(h=0;h<f.length;++h){var k=f[h];k.s.c==b+s&&k.s.r<m+a&&m+a<=k.e.r&&(b=k.e.c+1-s,h=-1)}w=+E.getAttribute("colspan")||1,((y=+E.getAttribute("rowspan")||1)>1||w>1)&&f.push({s:{r:m+a,c:b+s},e:{r:m+a+(y||1)-1,c:b+s+(w||1)-1}});var C={t:"s",v:j},T=E.getAttribute("data-t")||E.getAttribute("t")||"";j!=null&&(j.length==0?C.t=T||"z":n.raw||j.trim().length==0||T=="s"||(j==="TRUE"?C={t:"b",v:!0}:j==="FALSE"?C={t:"b",v:!1}:isNaN(Yo(j))?isNaN(Dp(j).getDate())||(C={t:"d",v:Sa(j)},n.cellDates||(C={t:"n",v:Ds(C.v)}),C.z=n.dateNF||ir[14]):C={t:"n",v:Yo(j)})),C.z===void 0&&N!=null&&(C.z=N);var A="",B=E.getElementsByTagName("A");if(B&&B.length)for(var R=0;R<B.length&&!(B[R].hasAttribute("href")&&(A=B[R].getAttribute("href"),A.charAt(0)!="#"));++R);A&&A.charAt(0)!="#"&&(C.l={Target:A}),n.dense?(e[m+a]||(e[m+a]=[]),e[m+a][b+s]=C):e[tr({c:b+s,r:m+a})]=C,u.e.c<b+s&&(u.e.c=b+s),b+=w}}++m}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,m-1+a),e["!ref"]=$r(u),m>=c&&(e["!fullref"]=$r((u.e.r=l.length-v+m-1+a,u))),e}function Pae(e,t){var r=t||{},n=r.dense?[]:{};return Aae(n,e,t)}function qst(e,t){return md(Pae(e,t),t)}function R7(e){var t="",r=Gst(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Gst(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Kst(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Ur(t.replace(/<[^>]*>/g,""));return[r]}var D7={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Oae(e,t){var r=t||{},n=sI(e),a=[],s,o,l={name:""},c="",u=0,d,f,h={},p=[],v=r.dense?[]:{},m,g,b={value:""},y="",w=0,_=[],S=-1,E=-1,j={s:{r:1e6,c:1e7},e:{r:0,c:0}},N=0,k={},C=[],T={},A=0,B=0,R=[],P=1,D=1,U=[],M={Names:[]},F={},K=["",""],X=[],O={},W="",L=0,H=!1,ee=!1,q=0;for(Mx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");m=Mx.exec(n);)switch(m[3]=m[3].replace(/_.*$/,"")){case"table":case"工作表":m[1]==="/"?(j.e.c>=j.s.c&&j.e.r>=j.s.r?v["!ref"]=$r(j):v["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=j.e.r&&(v["!fullref"]=v["!ref"],j.e.r=r.sheetRows-1,v["!ref"]=$r(j)),C.length&&(v["!merges"]=C),R.length&&(v["!rows"]=R),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),h[d.name]=v,ee=!1):m[0].charAt(m[0].length-2)!=="/"&&(d=Zt(m[0],!1),S=E=-1,j.s.r=j.s.c=1e7,j.e.r=j.e.c=0,v=r.dense?[]:{},C=[],R=[],ee=!0);break;case"table-row-group":m[1]==="/"?--N:++N;break;case"table-row":case"行":if(m[1]==="/"){S+=P,P=1;break}if(f=Zt(m[0],!1),f.行号?S=f.行号-1:S==-1&&(S=0),P=+f["number-rows-repeated"]||1,P<10)for(q=0;q<P;++q)N>0&&(R[S+q]={level:N});E=-1;break;case"covered-table-cell":m[1]!=="/"&&++E,r.sheetStubs&&(r.dense?(v[S]||(v[S]=[]),v[S][E]={t:"z"}):v[tr({r:S,c:E})]={t:"z"}),y="",_=[];break;case"table-cell":case"数据":if(m[0].charAt(m[0].length-2)==="/")++E,b=Zt(m[0],!1),D=parseInt(b["number-columns-repeated"]||"1",10),g={t:"z",v:null},b.formula&&r.cellFormula!=!1&&(g.f=k7(Ur(b.formula))),(b.数据类型||b["value-type"])=="string"&&(g.t="s",g.v=Ur(b["string-value"]||""),r.dense?(v[S]||(v[S]=[]),v[S][E]=g):v[tr({r:S,c:E})]=g),E+=D-1;else if(m[1]!=="/"){++E,y="",w=0,_=[],D=1;var Z=P?S+P-1:S;if(E>j.e.c&&(j.e.c=E),E<j.s.c&&(j.s.c=E),S<j.s.r&&(j.s.r=S),Z>j.e.r&&(j.e.r=Z),b=Zt(m[0],!1),X=[],O={},g={t:b.数据类型||b["value-type"],v:null},r.cellFormula)if(b.formula&&(b.formula=Ur(b.formula)),b["number-matrix-columns-spanned"]&&b["number-matrix-rows-spanned"]&&(A=parseInt(b["number-matrix-rows-spanned"],10)||0,B=parseInt(b["number-matrix-columns-spanned"],10)||0,T={s:{r:S,c:E},e:{r:S+A-1,c:E+B-1}},g.F=$r(T),U.push([T,g.F])),b.formula)g.f=k7(b.formula);else for(q=0;q<U.length;++q)S>=U[q][0].s.r&&S<=U[q][0].e.r&&E>=U[q][0].s.c&&E<=U[q][0].e.c&&(g.F=U[q][1]);switch((b["number-columns-spanned"]||b["number-rows-spanned"])&&(A=parseInt(b["number-rows-spanned"],10)||0,B=parseInt(b["number-columns-spanned"],10)||0,T={s:{r:S,c:E},e:{r:S+A-1,c:E+B-1}},C.push(T)),b["number-columns-repeated"]&&(D=parseInt(b["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=wn(b["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(b.value);break;case"percentage":g.t="n",g.v=parseFloat(b.value);break;case"currency":g.t="n",g.v=parseFloat(b.value);break;case"date":g.t="d",g.v=Sa(b["date-value"]),r.cellDates||(g.t="n",g.v=Ds(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=sJe(b["time-value"])/86400,r.cellDates&&(g.t="d",g.v=eE(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(b.数据数值);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",b["string-value"]!=null&&(y=Ur(b["string-value"]),_=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(H=!1,g.t==="s"&&(g.v=y||"",_.length&&(g.R=_),H=w==0),F.Target&&(g.l=F),X.length>0&&(g.c=X,X=[]),y&&r.cellText!==!1&&(g.w=y),H&&(g.t="z",delete g.v),(!H||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=S))for(var I=0;I<P;++I){if(D=parseInt(b["number-columns-repeated"]||"1",10),r.dense)for(v[S+I]||(v[S+I]=[]),v[S+I][E]=I==0?g:Ia(g);--D>0;)v[S+I][E+D]=Ia(g);else for(v[tr({r:S+I,c:E})]=g;--D>0;)v[tr({r:S+I,c:E+D})]=Ia(g);j.e.c<=E&&(j.e.c=E)}D=parseInt(b["number-columns-repeated"]||"1",10),E+=D-1,D=0,g={},y="",_=[]}F={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(m[1]==="/"){if((s=a.pop())[0]!==m[3])throw"Bad state: "+s}else m[0].charAt(m[0].length-2)!=="/"&&a.push([m[3],!0]);break;case"annotation":if(m[1]==="/"){if((s=a.pop())[0]!==m[3])throw"Bad state: "+s;O.t=y,_.length&&(O.R=_),O.a=W,X.push(O)}else m[0].charAt(m[0].length-2)!=="/"&&a.push([m[3],!1]);W="",L=0,y="",w=0,_=[];break;case"creator":m[1]==="/"?W=n.slice(L,m.index):L=m.index+m[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(m[1]==="/"){if((s=a.pop())[0]!==m[3])throw"Bad state: "+s}else m[0].charAt(m[0].length-2)!=="/"&&a.push([m[3],!1]);y="",w=0,_=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(m[1]==="/"){if(k[l.name]=c,(s=a.pop())[0]!==m[3])throw"Bad state: "+s}else m[0].charAt(m[0].length-2)!=="/"&&(c="",l=Zt(m[0],!1),a.push([m[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Zt(m[0],!1),c+=D7[m[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Zt(m[0],!1),c+=D7[m[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(m[0].slice(-2)==="/>")break;if(m[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,m.index);break}else u=m.index+m[0].length;break;case"named-range":o=Zt(m[0],!1),K=bC(o["cell-range-address"]);var Q={Name:o.name,Ref:K[0]+"!"+K[1]};ee&&(Q.Sheet=p.length),M.Names.push(Q);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(m[1]==="/"&&(!b||!b["string-value"])){var ve=Kst(n.slice(w,m.index));y=(y.length>0?y+`
`:"")+ve[0]}else Zt(m[0],!1),w=m.index+m[0].length;break;case"s":break;case"database-range":if(m[1]==="/")break;try{K=bC(Zt(m[0])["target-range-address"]),h[K[0]]["!autofilter"]={ref:K[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(m[1]!=="/"){if(F=Zt(m[0],!1),!F.href)break;F.Target=Ur(F.href),delete F.href,F.Target.charAt(0)=="#"&&F.Target.indexOf(".")>-1?(K=bC(F.Target.slice(1)),F.Target="#"+K[0]+"!"+K[1]):F.Target.match(/^\.\.[\\\/]/)&&(F.Target=F.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(m[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(m)}}var z={Sheets:h,SheetNames:p,Workbook:M};return r.bookSheets&&delete z.Sheets,z}function M7(e,t){t=t||{},Hi(e,"META-INF/manifest.xml")&&lQe(Jn(e,"META-INF/manifest.xml"),t);var r=yi(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Oae(dn(r),t);return Hi(e,"meta.xml")&&(n.Props=Hne(Jn(e,"meta.xml"))),n}function I7(e,t){return Oae(e,t)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function xI(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function HO(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):dn(ah(e))}function qO(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function $7(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Xst(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function Lx(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ha(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function ss(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=Lx(e,r),s=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=Lx(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function yI(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function Yst(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=Lx(e,n),s=ss(e.slice(n[0],n[0]+a));n[0]+=a;var o={id:ha(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=ss(l.data),u=ha(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(o.merge=ha(s[3][0].data)>>>0>0),r.push(o)}return r}function Zst(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Lx(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[qO(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=qO(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Jst(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Zst(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return qO(t)}function Qst(e,t,r,n){var a=xI(e),s=a.getUint32(4,!0),o=(n>1?12:8)+$7(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(o,!0),o+=4),o+=$7(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(o,!0),o+=4),s&32&&(u=a.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function eit(e,t,r){var n=xI(e),a=n.getUint32(8,!0),s=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=Xst(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(o=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function tit(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Qst(e,t,r,e[0]);case 5:return eit(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function $u(e){var t=ss(e);return Lx(t[1][0].data)}function F7(e,t){var r=ss(t.data),n=ha(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(o){var l=ss(o.data),c=ha(l[1][0].data)>>>0;switch(n){case 1:s[c]=HO(l[3][0].data);break;case 8:{var u=e[$u(l[9][0].data)][0],d=ss(u.data),f=e[$u(d[1][0].data)][0],h=ha(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var p=ss(f.data);s[c]=p[3].map(function(v){return HO(v.data)}).join("")}break}}),s}function rit(e,t){var r,n,a,s,o,l,c,u,d,f,h,p,v,m,g=ss(e),b=ha(g[1][0].data)>>>0,y=ha(g[2][0].data)>>>0,w=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&ha(g[8][0].data)>0||!1,_,S;if((s=(a=g[7])==null?void 0:a[0])!=null&&s.data&&t!=0)_=(l=(o=g[7])==null?void 0:o[0])==null?void 0:l.data,S=(u=(c=g[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=g[4])==null?void 0:d[0])!=null&&f.data&&t!=1)_=(p=(h=g[4])==null?void 0:h[0])==null?void 0:p.data,S=(m=(v=g[3])==null?void 0:v[0])==null?void 0:m.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var E=w?4:1,j=xI(_),N=[],k=0;k<_.length/2;++k){var C=j.getUint16(k*2,!0);C<65535&&N.push([k,C])}if(N.length!=y)throw"Expected ".concat(y," cells, found ").concat(N.length);var T=[];for(k=0;k<N.length-1;++k)T[N[k][0]]=S.subarray(N[k][1]*E,N[k+1][1]*E);return N.length>=1&&(T[N[N.length-1][0]]=S.subarray(N[N.length-1][1]*E)),{R:b,cells:T}}function nit(e,t){var r,n=ss(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?ha(n[7][0].data)>>>0>0?1:0:-1,s=yI(n[5],function(o){return rit(o,a)});return{nrows:ha(n[4][0].data)>>>0,data:s.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function ait(e,t,r){var n,a=ss(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(ha(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(ha(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=$r(s);var o=ss(a[4][0].data),l=F7(e,e[$u(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?F7(e,e[$u(o[17][0].data)][0]):[],u=ss(o[3][0].data),d=0;u[1].forEach(function(f){var h=ss(f.data),p=e[$u(h[2][0].data)][0],v=ha(p.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var m=nit(e,p);m.data.forEach(function(g,b){g.forEach(function(y,w){var _=tr({r:d+b,c:w}),S=tit(y,l,c);S&&(r[_]=S)})}),d+=m.nrows})}function sit(e,t){var r=ss(t.data),n={"!ref":"A1"},a=e[$u(r[2][0].data)],s=ha(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return ait(e,a[0],n),n}function iit(e,t){var r,n=ss(t.data),a={name:(r=n[1])!=null&&r[0]?HO(n[1][0].data):"",sheets:[]},s=yI(n[2],$u);return s.forEach(function(o){e[o].forEach(function(l){var c=ha(l.meta[1][0].data);c==6e3&&a.sheets.push(sit(e,l))})}),a}function oit(e,t){var r=_I(),n=ss(t.data),a=yI(n[1],$u);if(a.forEach(function(s){e[s].forEach(function(o){var l=ha(o.meta[1][0].data);if(l==2){var c=iit(e,o);c.sheets.forEach(function(u,d){SI(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function _C(e){var t,r,n,a,s={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Jst(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=Yst(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&ha(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||o.forEach(function(c){s[c].forEach(function(u){var d=ha(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return oit(s,l)}function lit(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function bI(e){lit([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function cit(e){return nm.WS.indexOf(e)>-1?"sheet":e==nm.CS?"chart":e==nm.DS?"dialog":e==nm.MS?"macro":e&&e.length?e:"sheet"}function uit(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,cit(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function dit(e,t,r,n,a,s,o,l,c,u,d,f){try{s[n]=Gg(yi(e,r,!0),t);var h=Jn(e,t),p;switch(l){case"sheet":p=vst(h,t,a,c,s[n],u,d,f);break;case"chart":if(p=xst(h,t,a,c,s[n],u,d,f),!p||!p["!drawel"])break;var v=hg(p["!drawel"].Target,t),m=BO(v),g=grt(yi(e,v,!0),Gg(yi(e,m,!0),v)),b=hg(g,v),y=BO(b);p=est(yi(e,b,!0),b,c,Gg(yi(e,y,!0),b),u,p);break;case"macro":p=yst(h,t,a,c,s[n],u,d,f);break;case"dialog":p=bst(h,t,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=p;var w=[];s&&s[n]&&Ol(s[n]).forEach(function(_){var S="";if(s[n][_].Type==nm.CMNT){S=hg(s[n][_].Target,t);var E=jst(Jn(e,S,!0),S,c);if(!E||!E.length)return;S7(p,E,!1)}s[n][_].Type==nm.TCMNT&&(S=hg(s[n][_].Target,t),w=w.concat(xrt(Jn(e,S,!0),c)))}),w&&w.length&&S7(p,w,!0,c.people||[])}catch(_){if(c.WTF)throw _}}function Wi(e){return e.charAt(0)=="/"?e.slice(1):e}function fit(e,t){if(gne(),t=t||{},bI(t),Hi(e,"META-INF/manifest.xml")||Hi(e,"objectdata.xml"))return M7(e,t);if(Hi(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof _C<"u"){if(e.FileIndex)return _C(e);var r=Dr.utils.cfb_new();return YB(e).forEach(function(R){dJe(r,R,uJe(e,R))}),_C(r)}throw new Error("Unsupported NUMBERS file")}if(!Hi(e,"[Content_Types].xml"))throw Hi(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Hi(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=YB(e),a=iQe(yi(e,"[Content_Types].xml")),s=!1,o,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",Jn(e,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!Jn(e,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(Yg=[],a.sst)try{Yg=Sst(Jn(e,Wi(a.sst)),a.sst,t)}catch(R){if(t.WTF)throw R}t.cellStyles&&a.themes.length&&(c=_st(yi(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=wst(Jn(e,Wi(a.style)),a.style,c,t))}a.links.map(function(R){try{var P=Gg(yi(e,BO(Wi(R))),R);return Nst(Jn(e,Wi(R)),P,R,t)}catch{}});var d=gst(Jn(e,Wi(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=Jn(e,Wi(a.coreprops[0]),!0),h&&(f=Hne(h)),a.extprops.length!==0&&(h=Jn(e,Wi(a.extprops[0]),!0),h&&dQe(h,f,t)));var p={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=yi(e,Wi(a.custprops[0]),!0),h&&(p=hQe(h,t)));var v={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(P){return P.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(v.Props=f,v.Custprops=p),t.bookSheets&&typeof o<"u"&&(v.SheetNames=o),t.bookSheets?v.SheetNames:t.bookProps))return v;o={};var m={};t.bookDeps&&a.calcchain&&(m=Est(Jn(e,Wi(a.calcchain)),a.calcchain));var g=0,b={},y,w;{var _=d.Sheets;f.Worksheets=_.length,f.SheetNames=[];for(var S=0;S!=_.length;++S)f.SheetNames[S]=_[S].name}var E=s?"bin":"xml",j=a.workbooks[0].lastIndexOf("/"),N=(a.workbooks[0].slice(0,j+1)+"_rels/"+a.workbooks[0].slice(j+1)+".rels").replace(/^\//,"");Hi(e,N)||(N="xl/_rels/workbook."+E+".rels");var k=Gg(yi(e,N,!0),N.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=Cst(Jn(e,Wi(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=yrt(Jn(e,Wi(a.people[0])),t)),k&&(k=uit(k,d.Sheets));var C=Jn(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=f.Worksheets;++g){var T="sheet";if(k&&k[g]?(y="xl/"+k[g][1].replace(/[\/]?xl\//,""),Hi(e,y)||(y=k[g][1]),Hi(e,y)||(y=N.replace(/_rels\/.*$/,"")+k[g][1]),T=k[g][2]):(y="xl/worksheets/sheet"+(g+1-C)+"."+E,y=y.replace(/sheet0\./,"sheet.")),w=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(g!=t.sheets)continue e;break;case"string":if(f.SheetNames[g].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var A=!1,B=0;B!=t.sheets.length;++B)typeof t.sheets[B]=="number"&&t.sheets[B]==g&&(A=1),typeof t.sheets[B]=="string"&&t.sheets[B].toLowerCase()==f.SheetNames[g].toLowerCase()&&(A=1);if(!A)continue e}}dit(e,y,w,f.SheetNames[g],g,b,o,T,t,d,c,u)}return v={Directory:a,Workbook:d,Props:f,Custprops:p,Deps:m,Sheets:o,SheetNames:f.SheetNames,Strings:Yg,Styles:u,Themes:c,SSF:Ia(ir)},t&&t.bookFiles&&(e.files?(v.keys=n,v.files=e.files):(v.keys=[],v.files={},e.FullPaths.forEach(function(R,P){R=R.replace(/^Root Entry[\/]/,""),v.keys.push(R),v.files[R]=e.FileIndex[P]}))),t&&t.bookVBA&&(a.vba.length>0?v.vbaraw=Jn(e,Wi(a.vba[0]),!0):a.defaults&&a.defaults.bin===Srt&&(v.vbaraw=Jn(e,"xl/vbaProject.bin",!0))),v}function hit(e,t){var r=t||{},n="Workbook",a=Dr.find(e,n);try{if(n="/!DataSpaces/Version",a=Dr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(stt(a.content),n="/!DataSpaces/DataSpaceMap",a=Dr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=ott(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Dr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=ltt(a.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Dr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);utt(a.content)}catch{}if(n="/EncryptionInfo",a=Dr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=dtt(a.content);if(n="/EncryptedPackage",a=Dr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function wI(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Di(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function mit(e,t){return Dr.find(e,"EncryptedPackage")?hit(e,t):Tae(e,t)}function pit(e,t){var r,n=e,a=t||{};return a.type||(a.type=Rr&&Buffer.isBuffer(e)?"buffer":"base64"),r=_ne(n,a),fit(r,a)}function Rae(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return WO(e.slice(r),t);default:break e}return Ix.to_workbook(e,t)}function git(e,t){var r="",n=wI(e,t);switch(t.type){case"base64":r=Di(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=zf(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=dn(r)),t.type="binary",Rae(r,t)}function vit(e,t){var r=e;return t.type=="base64"&&(r=Di(r)),r=uu.utils.decode(1200,r.slice(2),"str"),t.type="binary",Rae(r,t)}function xit(e){return e.match(/[^\x00-\x7F]/)?mg(e):e}function SC(e,t,r,n){return n?(r.type="string",Ix.to_workbook(e,r)):Ix.to_workbook(t,r)}function CS(e,t){ane();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return CS(new Uint8Array(e),(r=Ia(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Dm={},r.dateNF&&(Dm.dateNF=r.dateNF),r.type||(r.type=Rr&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Rr?"buffer":"binary",n=nJe(e),typeof Uint8Array<"u"&&!Rr&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=xit(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Ia(r),r.type="array",CS(QM(n),r)}switch((a=wI(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return mit(Dr.read(n,r),r);break;case 9:if(a[1]<=8)return Tae(n,r);break;case 60:return WO(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return qet(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return Vet.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?pit(n,r):SC(e,n,r,s);case 239:return a[3]===60?WO(n,r):SC(e,n,r,s);case 255:if(a[1]===254)return vit(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Xg.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Xg.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return _7.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return Stt.to_workbook(n,r);break;case 10:case 13:case 32:return git(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return zet.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?_7.to_workbook(n,r):SC(e,n,r,s)}function yit(e,t,r,n,a,s,o,l){var c=$a(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!o||e[r])for(var p=t.s.c;p<=t.e.c;++p){var v=o?e[r][p]:e[n[p]+c];if(v===void 0||v.t===void 0){if(u===void 0)continue;s[p]!=null&&(h[s[p]]=u);continue}var m=v.v;switch(v.t){case"z":if(m==null)break;continue;case"e":m=m==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(s[p]!=null){if(m==null)if(v.t=="e"&&m===null)h[s[p]]=null;else if(u!==void 0)h[s[p]]=u;else if(d&&m===null)h[s[p]]=null;else continue;else h[s[p]]=d&&(v.t!=="n"||v.t==="n"&&l.rawNumbers!==!1)?m:Tc(v,m,l);m!=null&&(f=!1)}}return{row:h,isempty:f}}function GO(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Bn(d);break;case"number":c=Bn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=$a(c.s.r),h=[],p=[],v=0,m=0,g=Array.isArray(e),b=c.s.r,y=0,w={};g&&!e[b]&&(e[b]=[]);var _=u.skipHidden&&e["!cols"]||[],S=u.skipHidden&&e["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(_[y]||{}).hidden)switch(h[y]=ua(y),r=g?e[b][y]:e[h[y]+f],n){case 1:s[y]=y-c.s.c;break;case 2:s[y]=h[y];break;case 3:s[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Tc(r,null,u),m=w[o]||0,!m)w[o]=1;else{do l=o+"_"+m++;while(w[l]);w[o]=m,w[l]=1}s[y]=l}for(b=c.s.r+a;b<=c.e.r;++b)if(!(S[b]||{}).hidden){var E=yit(e,c,b,h,n,s,g,u);(E.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[v++]=E.row)}return p.length=v,p}var L7=/"/g;function bit(e,t,r,n,a,s,o,l){for(var c=!0,u=[],d="",f=$a(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var p=l.dense?(e[r]||[])[h]:e[n[h]+f];if(p==null)d="";else if(p.v!=null){c=!1,d=""+(l.rawNumbers&&p.t=="n"?p.v:Tc(p,null,l));for(var v=0,m=0;v!==d.length;++v)if((m=d.charCodeAt(v))===a||m===s||m===34||l.forceQuotes){d='"'+d.replace(L7,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(c=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(L7,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function Dae(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Bn(e["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],v=a.s.c;v<=a.e.c;++v)(h[v]||{}).hidden||(f[v]=ua(v));for(var m=0,g=a.s.r;g<=a.e.r;++g)(p[g]||{}).hidden||(d=bit(e,a,g,f,o,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((m++?l:"")+d)));return delete n.dense,r.join("")}function wit(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=Dae(e,t);return r}function _it(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Bn(e["!ref"]),s="",o=[],l,c=[],u=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)o[l]=ua(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=$a(d),l=a.s.c;l<=a.e.c;++l)if(t=o[l]+s,r=u?(e[d]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function Mae(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Es(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+a}};if(s["!ref"]){var f=Bn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+a)}else o==-1&&(o=0,d.e.r=t.length-1+a);var h=n.header||[],p=0;t.forEach(function(m,g){Ol(m).forEach(function(b){(p=h.indexOf(b))==-1&&(h[p=h.length]=b);var y=m[b],w="z",_="",S=tr({c:l+p,r:o+g+a});u=Bx(s,S),y&&typeof y=="object"&&!(y instanceof Date)?s[S]=y:(typeof y=="number"?w="n":typeof y=="boolean"?w="b":typeof y=="string"?w="s":y instanceof Date?(w="d",n.cellDates||(w="n",y=Ds(y)),_=n.dateNF||ir[14]):y===null&&n.nullError&&(w="e",y=0),u?(u.t=w,u.v=y,delete u.w,delete u.R,_&&(u.z=_)):s[S]=u={t:w,v:y},_&&(u.z=_))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var v=$a(o);if(a)for(p=0;p<h.length;++p)s[ua(p+l)+v]={t:"s",v:h[p]};return s["!ref"]=$r(d),s}function Sit(e,t){return Mae(null,e,t)}function Bx(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Es(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Bx(e,tr(t)):Bx(e,tr({r:t,c:r||0}))}function jit(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function _I(){return{SheetNames:[],Sheets:{}}}function SI(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=o+a)!=-1;++a);}if(lst(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Eit(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=jit(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function Nit(e,t){return e.z=t,e}function Iae(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function Cit(e,t,r){return Iae(e,"#"+t,r)}function kit(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Tit(e,t,r,n){for(var a=typeof t!="string"?t:Bn(t),s=typeof t=="string"?t:$r(t),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=Bx(e,o,l);c.t="n",c.F=s,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var B7={encode_col:ua,encode_row:$a,encode_cell:tr,encode_range:$r,decode_col:lI,decode_row:oI,split_cell:LJe,decode_cell:Es,decode_range:v0,format_cell:Tc,sheet_add_aoa:Bne,sheet_add_json:Mae,sheet_add_dom:Aae,aoa_to_sheet:x0,json_to_sheet:Sit,table_to_sheet:Pae,table_to_book:qst,sheet_to_csv:Dae,sheet_to_txt:wit,sheet_to_json:GO,sheet_to_html:Hst,sheet_to_formulae:_it,sheet_to_row_object_array:GO,sheet_get_cell:Bx,book_new:_I,book_append_sheet:SI,book_set_sheet_visibility:Eit,cell_set_number_format:Nit,cell_set_hyperlink:Iae,cell_set_internal_link:Cit,cell_add_comment:kit,sheet_set_array_formula:Tit,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const jC=[{key:"full_name",label:"Имя (обязательно)",required:!0},{key:"phone",label:"Телефон (обязательно)",required:!0},{key:"email",label:"Email (необязательно)",required:!1},{key:"birthdate",label:"Дата рождения (необязательно)",required:!1},{key:"notes",label:"Заметки (необязательно)",required:!1}],Ait=({open:e,onClose:t,onSave:r})=>{const[n,a]=x.useState("paste"),[s,o]=x.useState(""),[l,c]=x.useState(null),[u,d]=x.useState([]),[f,h]=x.useState([]),[p,v]=x.useState({}),[m,g]=x.useState(!1),[b,y]=x.useState(null),[w,_]=x.useState([]),[S,E]=x.useState(!1),[j,N]=x.useState({current:0,total:0}),[k,C]=x.useState(null);G.useEffect(()=>{e||(a("paste"),o(""),c(null),d([]),h([]),v({}),g(!1),y(null))},[e]);const T=()=>{g(!0),y(null);try{const X=s.trim().split(/\r?\n/).map(O=>O.split(/[\t,;]/));d(X.slice(0,10)),h(X[0]||[]),v({})}catch{y("Ошибка разбора данных.")}g(!1)},A=K=>{var W;const X=(W=K.target.files)==null?void 0:W[0];if(!X)return;c(X),g(!0),y(null);const O=new FileReader;O.onload=L=>{var H,ee;try{let q=[];if(X.name.endsWith(".xls")||X.name.endsWith(".xlsx")){const Z=new Uint8Array((H=L.target)==null?void 0:H.result),I=CS(Z,{type:"array"}),Q=I.Sheets[I.SheetNames[0]];q=B7.sheet_to_json(Q,{header:1})}else{const Z=String(((ee=L.target)==null?void 0:ee.result)||""),I=CS(Z,{type:"string"}),Q=I.Sheets[I.SheetNames[0]];q=B7.sheet_to_json(Q,{header:1})}d(q.slice(0,10)),h(q[0]||[]),v({})}catch{y("Ошибка разбора файла.")}g(!1)},X.name.endsWith(".xls")||X.name.endsWith(".xlsx")?O.readAsArrayBuffer(X):O.readAsText(X)},B=(K,X)=>{v(O=>({...O,[K]:X}))},R=jC.filter(K=>K.key==="full_name"||K.key==="phone").every(K=>Object.values(p).includes(K.key)),P=K=>{const X=K.replace(/\D/g,"");return X.length>=10&&X.length<=12},D=K=>K?/^[\w.-]+@[\w.-]+\.[A-Za-z]{2,}$/.test(K):!0,U=K=>K?/^(\d{2})[.\-/](\d{2})([.\-/](\d{4}))?$/.test(K.trim()):!0,M=async K=>{E(!0),C(null),N({current:0,total:0});const X=100,O=[];for(let Z=0;Z<K.length;Z+=X)O.push(K.slice(Z,Z+X));let W=0,L=0;const H=[];N({current:0,total:O.length});const ee="https://gmajzyndavrqvjccojus.supabase.co";let q="";ee.includes("localhost")?q=`${ee.replace(/\/$/,"")}/functions/v1/import-clients`:q=`${ee.replace("supabase.co","functions.supabase.co")}/import-clients`;for(let Z=0;Z<O.length;Z++){N({current:Z+1,total:O.length});try{const Q=await(await fetch(q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clients:O[Z]})})).json();W+=Q.imported||0,L+=Q.updated||0,Array.isArray(Q.errors)&&H.push(...Q.errors.map(ve=>({...ve,row:ve.row+Z*X})))}catch{H.push({row:Z*X+1,reason:"Ошибка сети или сервера"})}}C({imported:W,updated:L,errors:H}),E(!1)},F=()=>{if(!u.length||!f.length)return;const K=p,X=[],O=[],W=new Set;for(let L=1;L<u.length;L++){const H=u[L],ee={full_name:"",phone:""};for(const[q,Z]of Object.entries(K)){const I=Number(q);Z&&H[I]!==void 0&&(ee[Z]=String(H[I]||"").trim())}if(L===1&&(console.log("DEBUG: i =",L),console.log("DEBUG: row being processed =",JSON.stringify(H)),console.log("DEBUG: fieldMap (map) =",JSON.stringify(K)),console.log("DEBUG: client object after mapping =",JSON.stringify(ee))),!(!ee.full_name||!ee.phone)){if(!P(ee.phone)){O.push({row:L+1,reason:"Некорректный телефон"});continue}if(W.has(ee.phone.replace(/\D/g,""))){O.push({row:L+1,reason:"Дублирующийся телефон в файле"});continue}if(W.add(ee.phone.replace(/\D/g,"")),!D(ee.email||"")){O.push({row:L+1,reason:"Некорректный email"});continue}if(!U(ee.birthdate||"")){O.push({row:L+1,reason:"Некорректная дата рождения"});continue}X.push(ee)}}if(X.length>500){_([{row:0,reason:"Слишком много строк (максимум 500)"}]);return}if(O.length){_(O);return}if(_([]),X.length===0&&u.length>1){_([{row:0,reason:"Нет корректных строк для импорта после фильтрации (все строки либо пустые, либо не прошли валидацию)."}]);return}M(X)};return i.jsx(qt,{open:e,onOpenChange:t,children:i.jsxs(Wt,{className:"max-w-6xl min-h-[80vh] max-h-[90vh]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Импорт клиентов"}),i.jsx(fr,{children:"Загрузите базу клиентов из Excel/CSV. Поддерживаются форматы: .csv, .xls, .xlsx. Не более 500 строк за раз."})]}),i.jsxs(fa,{value:n,onValueChange:K=>a(K),className:"mb-4",children:[i.jsxs(ta,{children:[i.jsx(Tt,{value:"paste",children:"Вставить"}),i.jsx(Tt,{value:"file",children:"Файл"})]}),i.jsxs(Ft,{value:"paste",children:[i.jsx("textarea",{className:"w-full h-32 border rounded p-2 mb-2 text-sm",placeholder:"Вставьте данные из Excel/Google Sheets (таблица или CSV)",value:s,onChange:K=>o(K.target.value),disabled:m}),i.jsxs(ne,{onClick:T,disabled:m||!s.trim(),children:[m?i.jsx(ki,{className:"animate-spin w-4 h-4 mr-2"}):null,"Загрузить"]})]}),i.jsxs(Ft,{value:"file",children:[i.jsx($e,{type:"file",accept:".csv,.xls,.xlsx",onChange:A,disabled:m}),l&&i.jsxs("div",{className:"text-xs mt-2",children:["Файл: ",l.name]})]})]}),b&&i.jsx("div",{className:"text-red-600 mb-2",children:b}),w.length>0&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-2 mb-2 text-sm text-red-700 max-h-40 overflow-y-auto",children:[i.jsx("div",{className:"font-semibold mb-1",children:"Ошибки импорта:"}),i.jsx("ul",{className:"list-disc pl-5",children:w.map((K,X)=>i.jsxs("li",{children:["Строка ",K.row+1,": ",K.reason]},X))})]}),u.length>0&&i.jsx("div",{className:"overflow-auto max-h-[60vh] border rounded mb-4",children:i.jsxs(ks,{children:[i.jsx(Ts,{children:i.jsx(Lr,{children:f.map((K,X)=>{var O;return i.jsxs(pt,{className:"max-w-[220px] truncate whitespace-nowrap overflow-hidden",children:[i.jsxs(Tr,{value:p[X]||"none",onValueChange:W=>B(X,W==="none"?"":W),children:[i.jsx(wr,{className:"w-full text-xs",children:i.jsx(Ar,{placeholder:"Выбрать поле"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"none",children:"---"}),jC.filter(W=>W.required).map(W=>i.jsx(_t,{value:W.key,children:i.jsx("span",{className:"font-semibold text-pink-600",children:W.label})},W.key)),i.jsx(_t,{value:"none",children:"---"}),jC.filter(W=>!W.required).map(W=>i.jsx(_t,{value:W.key,children:W.label},W.key))]})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1 truncate",children:f[X]?f[X]:(O=u[1])!=null&&O[X]?`Пример: ${u[1][X]}`:"Без заголовка"})]},X)})})}),i.jsx(As,{children:u.map((K,X)=>i.jsx(Lr,{children:K.map((O,W)=>i.jsx(dt,{className:"text-xs max-w-[220px] truncate whitespace-nowrap overflow-hidden",children:O},W))},X))})]})}),S&&i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"text-sm text-blue-700",children:["Загрузка: ",j.current," из ",j.total]}),i.jsx(nc,{value:j.current/j.total*100,className:"h-2"})]}),k&&i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded p-2 mb-2 text-sm text-green-700",children:[i.jsx("div",{className:"font-semibold mb-1",children:"Импорт завершён:"}),i.jsxs("div",{children:["Добавлено: ",i.jsx("b",{children:k.imported}),", обновлено: ",i.jsx("b",{children:k.updated})]}),k.errors.length>0&&i.jsxs("div",{className:"mt-2 text-red-700",children:[i.jsx("div",{className:"font-semibold",children:"Ошибки:"}),i.jsx("ul",{className:"list-disc pl-5 max-h-32 overflow-y-auto",children:k.errors.map((K,X)=>i.jsxs("li",{children:["Строка ",K.row,": ",K.reason]},X))})]})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:t,disabled:S,children:"Отмена"}),!k&&i.jsx(ne,{disabled:!R||!u.length||S,onClick:F,children:S?"Импорт...":"Сохранить"}),k&&i.jsx(ne,{onClick:t,children:"Закрыть"})]})]})})},Pit=e=>{if(!e)return"-";const t=e.split(".");if(t.length===3){const[n,a,s]=t,o=new Date(Number(s),Number(a)-1,Number(n));return isNaN(o.getTime())?"-":o.toLocaleDateString("ru-RU")}const r=new Date(e);return isNaN(r.getTime())?"-":r.toLocaleDateString("ru-RU")},Oit=({appointments:e,clientId:t,bonusSpentMap:r})=>{const[n,a]=x.useState([]),[s,o]=x.useState(!1),[l,c]=x.useState(null);x.useEffect(()=>{if(e){a(e);return}if(!t){c("Не указан ID клиента");return}o(!0),c(null),rs.getClientProcedureHistory(t).then(d=>{console.log("Получены данные истории процедур:",d),a(d||[])}).catch(d=>{console.error("Ошибка при загрузке истории процедур:",d),c("Не удалось загрузить историю процедур")}).finally(()=>{o(!1)})},[e,t]);const u=e||n;return i.jsxs(qe,{children:[i.jsx(ht,{className:"pb-3",children:i.jsx(gt,{className:"text-lg",children:"История процедур"})}),i.jsx(Ge,{children:s?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx(ki,{className:"h-8 w-8 animate-spin text-beauty-500"})}):l?i.jsx("div",{className:"text-center text-red-500 py-4",children:l}):u.length===0?i.jsx("div",{className:"text-center text-muted-foreground py-4",children:"Нет записей о процедурах"}):i.jsx("div",{className:"overflow-x-auto w-full",children:i.jsxs("table",{className:"w-full text-sm border-separate border-spacing-y-2",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-left text-beauty-700",children:[i.jsx("th",{className:"pr-4",children:"Дата"}),i.jsx("th",{className:"pr-4",children:"Процедура"}),i.jsx("th",{className:"pr-4",children:"Мастер"}),i.jsx("th",{className:"pr-4",children:"Стоимость"}),i.jsx("th",{className:"pr-4",children:"Скидка (%)"}),i.jsx("th",{className:"pr-4",children:"Бонусы"}),i.jsx("th",{className:"pr-4",children:"С учётом скидки"}),i.jsx("th",{className:"pr-4",children:"Статус"}),i.jsx("th",{className:"pr-4",children:"Программа лояльности"}),i.jsx("th",{className:"pr-4",children:"№ записи"})]})}),i.jsx("tbody",{children:u.map((d,f)=>{const h=r&&d.appointment_id&&r[d.appointment_id]!==void 0?r[d.appointment_id]:d.bonuses_spent??0,p=Math.max(0,(d.final_price!==null&&d.final_price!==void 0?d.final_price:d.appointment_price)-h);return i.jsxs("tr",{className:"align-middle",children:[i.jsx("td",{className:"pr-4 whitespace-nowrap",children:Pit(d.date)}),i.jsx("td",{className:"pr-4 whitespace-nowrap",children:d.service_name}),i.jsx("td",{className:"pr-4 whitespace-nowrap",children:d.specialist_name}),i.jsx("td",{className:"pr-4 whitespace-nowrap",children:d.appointment_price!==null&&d.appointment_price!==void 0?`${d.appointment_price} ₽`:"-"}),i.jsx("td",{className:"pr-4 whitespace-nowrap",children:d.discount_percent===0?"0%":d.discount_percent&&d.discount_percent>0?`${d.discount_percent}%`:"—"}),i.jsx("td",{className:"pr-4 whitespace-nowrap",children:h>0?i.jsxs("span",{className:"text-yellow-700 font-medium flex items-center",children:[i.jsx(Kp,{size:14,className:"mr-1 text-yellow-600"}),h]}):"—"}),i.jsx("td",{className:"pr-4 whitespace-nowrap",children:i.jsxs("span",{className:"font-semibold text-green-700",children:[p.toFixed(2)," ₽"]})}),i.jsx("td",{className:"pr-4 whitespace-nowrap",children:i.jsx($t,{className:d.status==="Завершено"?"bg-green-100 text-green-700 border-green-200":"bg-gray-100 text-gray-700 border-gray-200",children:d.status})}),i.jsx("td",{className:"pr-4 whitespace-nowrap",children:d.loyalty_program_name||"-"}),i.jsx("td",{className:"pr-4 whitespace-nowrap",children:d.appointment_number?`№${d.appointment_number}`:"-"})]},d.appointment_id||f)})})]})})})]})},Rit={начислено:{label:"начислено",color:"bg-green-100 text-green-700"},списано:{label:"списано",color:"bg-red-100 text-red-700"},сгорели:{label:"сгорели",color:"bg-gray-100 text-gray-500"},корректировка:{label:"корректировка",color:"bg-blue-100 text-blue-700"}},Dit=({entries:e,clientId:t,bonusPercent:r=5,appointments:n=[]})=>{const[a,s]=x.useState(!1),[o,l]=x.useState([]),[c,u]=x.useState(null);return x.useEffect(()=>{if(console.log("🔍 ClientBonusHistoryTable Mount - appointments:",n),console.log("🔍 ClientBonusHistoryTable appointments структура:",n&&n.length>0?Object.keys(n[0]):"Нет данных"),e){l(e);return}t&&(s(!0),u(null),pr.getBonusHistory(t).then(d=>{console.log("Получены данные истории бонусов:",d),l(d||[])}).catch(d=>{console.error("Ошибка при загрузке истории бонусов:",d),u("Ошибка при загрузке истории бонусов. Пожалуйста, попробуйте позже.")}).finally(()=>{s(!1)}))},[e,t,n]),a?i.jsx("div",{className:"py-6 flex justify-center items-center",children:i.jsx(ki,{className:"h-6 w-6 text-gray-500 animate-spin"})}):c?i.jsx("div",{className:"py-6 text-center text-red-500",children:c}):o.length===0?i.jsx("div",{className:"py-6 text-center text-gray-500",children:"История бонусов отсутствует"}):i.jsxs(ks,{className:"min-w-[700px]",children:[i.jsx(Ts,{children:i.jsxs(Lr,{children:[i.jsx(pt,{className:"font-semibold text-pink-700",children:"№"}),i.jsx(pt,{className:"font-semibold text-pink-700",children:"Дата"}),i.jsx(pt,{className:"font-semibold text-pink-700",children:"Тип"}),i.jsx(pt,{className:"font-semibold text-pink-700",children:"Бонусы"}),i.jsx(pt,{className:"font-semibold text-pink-700",children:"Комментарий"}),i.jsx(pt,{className:"font-semibold text-pink-700",children:"№ записи"})]})}),i.jsx(As,{children:o.map((d,f)=>{const h=d,p=Rit[h.type]||{label:h.type,color:"bg-gray-100 text-gray-500"},v=h.type==="начислено";if(console.log(`🔍 Entry #${f+1}:`,{entry_id:h.id,appointment_id:h.appointment_id,appointment_number:h.appointment_number,date:h.date,amount:h.amount,type:h.type}),h.appointment_id&&n&&n.length>0){console.log(`🔍 Searching for appointment_id "${h.appointment_id}" in ${n.length} appointments`);const m=n.filter(g=>{const b=String(g.appointment_id),y=String(h.appointment_id),w=b===y;return console.log(`   - Comparing: "${b}" === "${y}" => ${w}`),w});console.log(`   - Found ${m.length} matches:`,m)}return i.jsxs(Lr,{children:[i.jsx(dt,{children:f+1}),i.jsx(dt,{children:h.date?Me(new Date(h.date),"dd.MM.yyyy"):"-"}),i.jsx(dt,{children:i.jsx($t,{className:p.color+" text-xs px-2 py-0.5 hover:bg-transparent hover:text-inherit",children:p.label})}),i.jsxs(dt,{className:v?"text-green-700 font-semibold":"text-red-700 font-semibold",children:[v?"+":"-",Math.abs(h.amount)]}),i.jsx(dt,{children:h.description?h.description.replace(/\s*\(запись\s*#?([0-9a-fA-F-]+)\)/gi,"").trim():"—"}),i.jsx(dt,{children:h.appointment_number?`№${h.appointment_number}`:h.appointment_id&&n&&n.length>0?(()=>{let m=n.find(b=>String(b.appointment_id)===String(h.appointment_id));if(console.log(`   - Finding match for "${h.appointment_id}": result:`,m?`Found: ${m.appointment_number}`:"Not found"),!m&&h.description){const b=h.description.match(/запись\s*#?([0-9a-fA-F-]+)/i);if(b){const y=b[1];m=n.find(w=>String(w.appointment_id)===y)}}const g=m&&m.appointment_number?`№${m.appointment_number}`:"—";return console.log(`   - Final display value: ${g}`),g})():"—"})]},h.id||f)})})]})},EC={async getAll(){const{data:e,error:t}=await ue.from("suggested_tags").select("*").order("name",{ascending:!0});if(t)throw t;return e},async add(e){const{data:t,error:r}=await ue.from("suggested_tags").insert([{name:e}]).select().single();if(r)throw r;return t},async remove(e){const{error:t}=await ue.from("suggested_tags").delete().eq("id",e);if(t)throw t}},Mit=({client:e,onSuccess:t})=>{const[r,n]=G.useState(""),[a,s]=G.useState(!1),[o,l]=G.useState(e.tags||[]),[c,u]=G.useState([]),[d,f]=G.useState(""),[h,p]=G.useState(!1),[v,m]=G.useState(!1);G.useEffect(()=>{l(e.tags||[])},[e]),G.useEffect(()=>{g()},[]);const g=async()=>{p(!0);try{const j=await EC.getAll();u(j)}finally{p(!1)}},b=async()=>{const j=r.split(",").map(N=>N.trim()).filter(Boolean);if(j.length){s(!0);try{const N=Array.isArray(o)?o:[],k=Array.from(new Set([...N,...j]));await pr.updateClient(e.id,{tags:k}),n(""),l(k),t(k)}finally{s(!1)}}},y=async j=>{s(!0);try{const N=o.filter(k=>k!==j);await pr.updateClient(e.id,{tags:N}),l(N),t(N)}finally{s(!1)}},w=j=>{const N=r.split(",").map(k=>k.trim()).filter(Boolean);N.includes(j)||n(N.length?r.replace(/\s*$/,"")+", "+j:j)},_=async()=>{const j=d.trim();if(j){p(!0);try{await EC.add(j),f(""),m(!1),await g()}finally{p(!1)}}},S=async j=>{const N=[...c];u(k=>k.filter(C=>C.id!==j)),p(!0);try{await EC.remove(j)}catch(k){u(N),Ae({title:"Ошибка удаления",description:"Не удалось удалить предложенный тег.",variant:"destructive"}),console.error("Ошибка удаления предложенного тега:",k)}finally{p(!1)}},E=()=>{n("")};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Теги"}),i.jsx("input",{className:"w-full border rounded px-3 py-2",value:r,onChange:j=>n(j.target.value),placeholder:"VIP, Постоянный клиент, Чувствительная кожа",disabled:a}),i.jsx("p",{className:"text-xs text-beauty-500 mt-1",children:"Введите несколько тегов, разделяя их запятыми"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Готовые варианты:"}),i.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:h?i.jsx(ki,{className:"h-4 w-4 animate-spin"}):i.jsxs(i.Fragment,{children:[c.map(j=>i.jsxs("span",{className:"inline-flex items-center bg-admin-badge text-admin-badge-foreground rounded-full px-3 py-1 text-sm font-bold hover:bg-admin-badge/80 transition cursor-pointer mr-1",onClick:()=>w(j.name),tabIndex:0,"aria-label":`Добавить тег ${j.name}`,onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&w(j.name)},children:[j.name,i.jsx("button",{className:"ml-2 text-admin-badge-foreground hover:opacity-80 focus:outline-none text-lg font-bold","aria-label":`Удалить готовый тег ${j.name}`,onClick:N=>{N.stopPropagation(),S(j.id)},disabled:h,type:"button",children:"×"})]},j.id)),v?i.jsxs("span",{className:"inline-flex items-center bg-admin-badge text-admin-badge-foreground rounded-full px-2 py-0.5 text-xs mr-1",children:[i.jsx("input",{className:"border-none bg-transparent outline-none w-20 text-admin-badge text-xs",value:d,onChange:j=>f(j.target.value),placeholder:"Новый тег",disabled:h,onKeyDown:j=>{j.key==="Enter"&&_(),j.key==="Escape"&&m(!1)},autoFocus:!0}),i.jsx("button",{className:"ml-1 text-admin-badge-foreground hover:opacity-80 text-base",onClick:()=>{m(!1),f("")},type:"button","aria-label":"Отменить добавление",children:"×"})]}):i.jsx("button",{className:"inline-flex items-center justify-center bg-admin-badge text-admin-badge-foreground rounded-full w-8 h-8 text-s ml-1 hover:bg-admin-badge/80 transition",onClick:()=>m(!0),type:"button","aria-label":"Добавить новый тег",children:"+"})]})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Теги клиента:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:o.length?o.map((j,N)=>i.jsxs("span",{className:"inline-flex items-center bg-admin-badge text-admin-badge-foreground rounded-full px-3 py-1 text-sm font-medium",children:[j,i.jsx("button",{className:"ml-2 text-admin-badge-foreground hover:opacity-80 focus:outline-none","aria-label":`Удалить тег ${j}`,onClick:()=>y(j),disabled:a,type:"button",children:"×"})]},N)):i.jsx("span",{className:"text-muted-foreground",children:"Нет тегов"})})]}),i.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[i.jsx(ne,{variant:"outline",onClick:E,disabled:a,children:"Очистить"}),i.jsxs(ne,{onClick:b,disabled:a||!r.trim(),children:[a?i.jsx(ki,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Добавить теги"]})]})]})},Iit=({open:e,client:t,onClose:r,loading:n,onSubmit:a,defaultAmount:s=100,defaultExpiryDate:o=null})=>{const[l,c]=x.useState(s),[u,d]=x.useState(o),[f,h]=x.useState("");x.useEffect(()=>{e||(c(s),d(o),h(""))},[e,s,o]);const p=b=>{c(parseInt(b.target.value)||0)},v=b=>{d(b.target.value||null)},m=b=>{c(b)},g=async()=>{if(h(""),!!t){if(!l||l<1||l>1e4){h("Введите количество от 1 до 10000");return}try{await a(l,u),c(s),d(o),r()}catch{h("Ошибка при начислении бонусов")}}};return i.jsx(qt,{open:e,onOpenChange:b=>{b||r()},children:i.jsxs(Wt,{children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Добавление бонусов"}),i.jsx(fr,{children:t&&i.jsxs(i.Fragment,{children:["Добавьте бонусные баллы для клиента ",i.jsx("b",{children:t.full_name||t.name}),".",i.jsx("br",{}),"Текущий баланс: ",t.bonus_points??0," баллов."]})})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Количество бонусов"}),i.jsx($e,{type:"number",min:"1",max:"10000",value:l,onChange:p,disabled:n}),f&&i.jsx("div",{className:"text-red-600 text-xs mt-1",children:f})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Действует до (оставьте пустым для бессрочных)"}),i.jsx($e,{type:"date",value:u||"",min:new Date().toISOString().slice(0,10),onChange:v,placeholder:"дд.мм.гггг",disabled:n})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsx(ne,{variant:"outline",type:"button",onClick:()=>m(100),disabled:n,children:"+100"}),i.jsx(ne,{variant:"outline",type:"button",onClick:()=>m(300),disabled:n,children:"+300"}),i.jsx(ne,{variant:"outline",type:"button",onClick:()=>m(500),disabled:n,children:"+500"})]})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",type:"button",onClick:r,disabled:n,children:"Отмена"}),i.jsx(ne,{type:"button",onClick:g,disabled:n||!l||l<1||l>1e4,children:n?"Добавление...":"Добавить бонусы"})]})]})})},$it=ln.object({full_name:ln.string().min(1,"Укажите ФИО клиента"),phone:ln.string().min(1,"Укажите телефон"),email:ln.string().email("Некорректный email").optional().or(ln.literal("")),birthdate:ln.string().optional(),notes:ln.string().optional(),avatar_file:ln.any().optional()}),Fit=({client:e,onSuccess:t,onCancel:r})=>{var p;const[n,a]=x.useState(!1),[s,o]=x.useState(null),l=jf({resolver:Ef($it),defaultValues:{full_name:(e==null?void 0:e.full_name)||"",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||"",birthdate:(e==null?void 0:e.birthdate)||"",notes:(e==null?void 0:e.notes)||"",avatar_file:null},mode:"onChange"}),c=v=>{if(!v)return"";const m=v.split(".");if(m.length!==3)return v;const[g,b,y]=m;return g.length!==2||b.length!==2||y.length!==4?v:`${y}-${b}-${g}`},u=v=>{if(!v)return"";if(v.includes("."))return v;const m=v.split("-");if(m.length!==3)return v;const[g,b,y]=m;return g.length!==4||b.length!==2||y.length!==2?v:`${y}.${b}.${g}`};x.useEffect(()=>{l.reset({full_name:(e==null?void 0:e.full_name)||"",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||"",birthdate:u((e==null?void 0:e.birthdate)||""),notes:(e==null?void 0:e.notes)||"",avatar_file:null}),e!=null&&e.avatar_url?o(e.avatar_url):o(null)},[e,l]);const d=v=>{var g;const m=((g=v.target.files)==null?void 0:g[0])||null;if(m){l.setValue("avatar_file",m);const b=new FileReader;b.onloadend=()=>o(b.result),b.readAsDataURL(m)}},f=(v,m)=>{const b=v.target.value.replace(/[^\d]/g,"");let y="";b.length>0&&(y=b.substring(0,2)),b.length>=3&&(y+="."+b.substring(2,4)),b.length>=5&&(y+="."+b.substring(4,8)),m(y.substring(0,10))},h=async v=>{var m,g;if(!((m=v.full_name)!=null&&m.trim())||!((g=v.phone)!=null&&g.trim())){Ae({title:"Ошибка валидации",description:"Поля ФИО и Телефон обязательны для заполнения.",variant:"destructive"});return}a(!0);try{let b=(e==null?void 0:e.avatar_url)||"";if(v.avatar_file){const w=await pr.uploadClientAvatar(v.avatar_file);if(w)b=w;else throw new Error("Не удалось загрузить новый аватар.")}const y={full_name:v.full_name,phone:v.phone,email:v.email||null,birthdate:c(v.birthdate||""),notes:v.notes||null,avatar_url:b};await pr.updateClient(String(e==null?void 0:e.id),y),Ae({title:"Клиент обновлен",description:`Данные клиента ${v.full_name} успешно обновлены.`}),t()}catch(b){console.error("Ошибка при обновлении клиента:",b),Ae({title:"Ошибка",description:"Не удалось обновить данные клиента. Пожалуйста, попробуйте снова.",variant:"destructive"})}finally{a(!1)}};return i.jsx(dc,{...l,children:i.jsxs("form",{onSubmit:l.handleSubmit(h),className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden border-2 border-gray-200",children:s?i.jsx("img",{src:s,alt:l.watch("full_name"),className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center text-gray-400 text-xl font-semibold",children:l.watch("full_name")?(p=l.watch("full_name"))==null?void 0:p.charAt(0).toUpperCase():"-"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Cr,{children:"Фото клиента"}),i.jsx(br,{children:i.jsx($e,{type:"file",accept:"image/*",onChange:d,disabled:n})})]})]}),i.jsx(Or,{name:"full_name",control:l.control,render:({field:v})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Имя клиента *"}),i.jsx(br,{children:i.jsx($e,{...v,placeholder:"Введите ФИО клиента",required:!0,disabled:n})}),i.jsx(kr,{})]})}),i.jsx(Or,{name:"phone",control:l.control,render:({field:v})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Телефон *"}),i.jsx(br,{children:i.jsx(XM,{mask:"+7 (999) 999-99-99",value:v.value||"",onChange:v.onChange,disabled:n,children:m=>i.jsx($e,{...m,placeholder:"+7 (___) ___-__-__",required:!0})})}),i.jsx(kr,{})]})}),i.jsx(Or,{name:"email",control:l.control,render:({field:v})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Email"}),i.jsx(br,{children:i.jsx($e,{...v,type:"email",placeholder:"client@beautytrack.ru",disabled:n})}),i.jsx(kr,{})]})}),i.jsx(Or,{name:"birthdate",control:l.control,render:({field:v})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Дата рождения"}),i.jsx(br,{children:i.jsx($e,{...v,placeholder:"ДД.ММ.ГГГГ",disabled:n,maxLength:10,onChange:m=>f(m,v.onChange),value:v.value||""})}),i.jsx(kr,{})]})}),i.jsx(Or,{name:"notes",control:l.control,render:({field:v})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Заметки"}),i.jsx(br,{children:i.jsx(rn,{...v,placeholder:"Комментарий или заметки о клиенте",disabled:n})}),i.jsx(kr,{})]})}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx(ne,{type:"button",variant:"outline",onClick:r,disabled:n,children:"Отмена"}),i.jsxs(ne,{type:"submit",disabled:n,children:[n&&i.jsx(ki,{className:"animate-spin mr-2 h-4 w-4"}),"Сохранить"]})]})]})})},Lit=["Новый","Повторный","Активный","Вернувшийся","Потерянный","Неактивный","VIP","С абонементом","С индивидуальной скидкой"],Bit=(e,t)=>{const r=String(e.full_name||"").toLowerCase(),n=String(t.full_name||"").toLowerCase();return r.localeCompare(n)},Uit=e=>{const t=new Date(e),r=new Date;return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()},zit=(e,t)=>{const r=new Date(e);return(new Date().getTime()-r.getTime())/(1e3*60*60*24)<=t},Wit=(e,t)=>{const r=new Date(e),n=new Date(t);return Math.abs((r.getTime()-n.getTime())/(1e3*60*60*24))},U7=e=>{const t=new Date(e);return Math.floor((new Date().getTime()-t.getTime())/(1e3*60*60*24))},Vit=(e,t)=>{let{value:r}=e.target;r=r.replace(/[^\d]/g,""),r.length>8&&(r=r.slice(0,8));let n="";r.length>0&&(n=r.substring(0,Math.min(2,r.length))),r.length>2&&(n+="."+r.substring(2,Math.min(4,r.length))),r.length>4&&(n+="."+r.substring(4,Math.min(8,r.length))),t(n)};function NC(e,t,r,n){if(!e)return null;const a=t.filter(f=>String(f.client_id)===String(e.id)&&f.status==="completed").sort((f,h)=>new Date(h.date).getTime()-new Date(f.date).getTime());if(a.length===0)return null;const o=(e.tags||[]).includes("VIP")||a.length>=10,c=r.filter(f=>String(f.user_id)===String(e.id)).some(f=>(f.subscription_visits_left||0)>0),d=((n==null?void 0:n[e.id])||[]).length>0;return a.length===1?"Новый":a.length>=2&&Uit(a[0].date)?"Повторный":a.some(f=>zit(f.date,30))?"Активный":a.length>=2&&Wit(a[0].date,a[1].date)>60?"Вернувшийся":a.length>0&&U7(a[0].date)>180?"Потерянный":a.length>0&&U7(a[0].date)>60?"Неактивный":o?"VIP":c?"С абонементом":d?"С индивидуальной скидкой":null}const Hit=(e,t)=>!e||!t?[]:t.filter(r=>String(r.user_id)===String(e));function qit(e){if(!e)return null;const t=new Date(e);return wG(t)?t:null}const Git=()=>{var Ht;const e=Gs(pe=>pe.clients),t=Gs(pe=>pe.fetchClients),r=Gs(pe=>pe.fetchClientsByStudio);Gs(pe=>pe.addTagToClient),Gs(pe=>pe.removeTagFromClient),Gs(pe=>pe.updateClient);const n=Oi(pe=>pe.services),a=Oi(pe=>pe.fetchServices),s=qu(pe=>pe.appointments),o=qu(pe=>pe.fetchAppointments),{currentStudio:l}=Ba(),[c,u]=x.useState(""),[d,f]=x.useState(null),[h,p]=x.useState(!1),[v,m]=x.useState([]),[g,b]=x.useState(!1),[y,w]=x.useState(null),[_,S]=x.useState(!1),[E,j]=x.useState(null),[N,k]=x.useState(!1),[C,T]=x.useState([]),[A,B]=x.useState([]),[R,P]=x.useState([]),[D,U]=x.useState(!1),[M,F]=x.useState(!1),[K,X]=x.useState(!1),[O,W]=x.useState(null),[L,H]=x.useState([]),[ee,q]=x.useState(!1),[Z,I]=x.useState({open:!1,client:null}),[Q,ve]=x.useState(!1),[z,we]=x.useState(!1),[Re,Pe]=x.useState({full_name:"",phone:"",email:"",birthdate:"",notes:"",avatar_file:null}),[De,Ne]=x.useState(!1),[J,Y]=x.useState({status:"",hasSubscription:!1,hasBonuses:!1,hasDiscount:!1,tags:[]}),[ae,ge]=x.useState(!1),[Se,te]=x.useState([]),[me,ke]=x.useState({});x.useState(0);const[he,et]=x.useState({}),[nt,Oe]=x.useState({}),Ye=pe=>{switch(pe){case"completed":return"Завершено";case"confirmed":return"Подтверждено";case"cancelled":return"Отменено";case"pending":return"В ожидании";default:return pe||"—"}},ye=x.useMemo(()=>!E||ee||!v?L:L.map(pe=>{const ze=qit(pe.date),yt=ze?Me(ze,"dd.MM.yyyy"):pe.date||"-",Rt=pe.appointment_price||0;let er=pe.discount_percent,Dt=pe.loyalty_program_name;if(ze&&er==null){const V=C.filter(oe=>String(oe.user_id)===String(E.id));for(const oe of V){const re=v.find(se=>String(se.id)===String(oe.program_id));if(re&&re.type==="discount"&&re.is_active){const se=re.start_date?new Date(re.start_date):null,ce=re.end_date?new Date(re.end_date):null;if((!se||ef(se,ze)||xm(se,ze))&&(!ce||Du(ce,ze)||xm(ce,ze))){const Ce=re.rules;if(Ce&&typeof Ce.discount=="number"){er=Ce.discount,Dt=re.name;break}}}}}let ar=null,qr=Rt;return pe.final_price===0&&Rt>0?(ar=100,qr=0):er===0?(ar=0,qr=Rt):er!=null?(ar=Number(er),qr=pe.final_price??Rt-Rt*(ar/100)):(ar=null,qr=Rt),Dt&&typeof Dt=="string"&&(Dt=`Абонемент "${Dt}"`),{...pe,appointment_id:String(pe.appointment_id),date:yt,service_name:pe.service_name||"—",specialist_name:pe.specialist_name||"—",appointment_price:Rt,discount_percent:ar,final_price:qr,status:Ye(pe.status),loyalty_program_name:Dt||pe.loyalty_program_name||"—"}}),[L,E,v,C,ee]);x.useEffect(()=>{l!=null&&l.id?(console.log("Загружаем клиентов для студии:",l.name,l.id),r(l.id)):(console.log("Загружаем всех клиентов (студия не выбрана)"),t()),o(),a(),(async()=>{try{const ze=await op();console.log("Загружены программы лояльности:",ze),m(ze)}catch(ze){console.error("Ошибка загрузки программ лояльности:",ze)}})()},[l==null?void 0:l.id,t,r,o,a]),x.useEffect(()=>{E!=null&&E.id?(vZ(String(E.id)).then(T),op().then(B)):(T([]),B([]))},[E==null?void 0:E.id]),x.useEffect(()=>{E!=null&&E.id?(U(!0),P([]),pr.getBonusHistory(String(E.id)).then(pe=>{console.log(`[BonusHistory] Загружена история для ${E.id}:`,pe),P(pe||[])}).catch(pe=>{console.error(`[BonusHistory] Ошибка загрузки истории для ${E.id}:`,pe),P([])}).finally(()=>U(!1))):P([])},[E==null?void 0:E.id]),x.useEffect(()=>{E!=null&&E.id?(q(!0),rs.getClientProcedureHistory(String(E.id)).then(pe=>H(pe||[])).catch(()=>H([])).finally(()=>q(!1))):H([])},[E==null?void 0:E.id]),x.useEffect(()=>{if(!h||!(E!=null&&E.id)){H([]),P([]);return}q(!0),rs.getClientProcedureHistory(String(E.id)).then(pe=>{H(pe||[])}).catch(pe=>{console.error("Ошибка загрузки истории процедур:",pe),H([])}).finally(()=>{q(!1)}),U(!0),pr.getBonusHistory(String(E.id)).then(pe=>{P(pe||[])}).catch(pe=>{console.error("Ошибка загрузки истории бонусов для профиля:",pe),P([])}).finally(()=>{U(!1)})},[h,E]);const le=x.useMemo(()=>{const pe=new Set;return e.forEach(ze=>{var yt;return(yt=ze.tags)==null?void 0:yt.forEach(Rt=>pe.add(Rt))}),Array.from(pe)},[e]);function _e(pe){return Se.some(ze=>String(ze.user_id)===String(pe.id)&&(ze.subscription_visits_left||0)>0)}function Be(pe){return(me[String(pe.id)]||[]).length>0}const Ie=e.filter(pe=>{var ze;return!(c&&!((ze=pe.full_name)!=null&&ze.toLowerCase().includes(c.toLowerCase()))||J.status&&NC(pe,s,Se,me)!==J.status||J.hasSubscription&&!_e(pe)||J.hasBonuses&&!(he[pe.id]>0)||J.hasDiscount&&!Be(pe)||J.tags.length&&!J.tags.some(yt=>{var Rt;return(Rt=pe.tags)==null?void 0:Rt.includes(yt)}))}),it=[J.status,J.hasSubscription,J.hasBonuses,J.hasDiscount,J.tags.length].filter(Boolean).length;Ie.sort(Bit);const tt=pe=>{var Rt;const ze=s.filter(er=>String(er.client_id)===pe&&er.date>=Me(new Date,"yyyy-MM-dd"));if(ze.length===0)return"Не запланировано";const yt=ze.sort((er,Dt)=>er.date.localeCompare(Dt.date))[0];return`${Me(new Date(String(yt.date)),"dd MMM yyyy")} (${((Rt=yt.service)==null?void 0:Rt.name)||"—"})`},Ze=pe=>s.filter(yt=>String(yt.client_id)===pe).sort((yt,Rt)=>Rt.date.localeCompare(yt.date)).slice(0,2).map(yt=>{var Rt;return{id:String(yt.id),name:(Rt=yt.service)==null?void 0:Rt.name}}).filter(yt=>yt.name),ct=Ie.map(pe=>({client:pe,lastVisit:pe.last_visit||"—",nextAppointment:tt(String(pe.id)),treatments:Ze(String(pe.id))})),St=pe=>{console.log("Запись для клиента:",pe),w(pe),S(!0)},ie=pe=>{console.log("Редактирование клиента:",pe),W(pe),X(!0)},be=pe=>{const ze=s.filter(Rt=>String(Rt.client_id)===pe&&Rt.status==="completed");if(ze.length===0)return"-";const yt=ze.sort((Rt,er)=>new Date(er.date).getTime()-new Date(Rt.date).getTime())[0];return Me(new Date(yt.date),"dd.MM.yyyy")},Je=pe=>{var er;const ze=s.filter(Dt=>String(Dt.client_id)===pe&&new Date(Dt.date)>=new Date&&(Dt.status==="pending"||Dt.status==="confirmed"));if(ze.length===0)return"Нет записей";const yt=ze.sort((Dt,ar)=>new Date(Dt.date).getTime()-new Date(ar.date).getTime())[0],Rt=((er=n.find(Dt=>String(Dt.id)===String(yt.service_id)))==null?void 0:er.name)||"Услуга";return`${Me(new Date(yt.date),"dd.MM.yyyy")} (${Rt})`},Et=pe=>{j(pe),p(!0)},Ke=async()=>{if(!Re.full_name.trim()||!Re.phone.trim()){Ae({title:"Заполните обязательные поля",variant:"destructive"});return}Ne(!0);try{await pr.createClient(Re),we(!1),Pe({full_name:"",phone:"",email:"",birthdate:"",notes:"",avatar_file:null}),t(),Ae({title:"Клиент добавлен"})}catch{Ae({title:"Ошибка при добавлении клиента",variant:"destructive"})}finally{Ne(!1)}};x.useEffect(()=>{e.length>0&&xNe().then(te).catch(console.error)},[e]),x.useEffect(()=>{console.log("allSubscriptions:",Se),console.log("clients:",e)},[Se,e]),x.useEffect(()=>{e.length>0?pr.getDiscountsForClients(e.map(pe=>String(pe.id))).then(pe=>{console.log("Загружено скидок:",pe);const ze={};pe.forEach(yt=>{ze[yt.client_id]||(ze[yt.client_id]=[]),ze[yt.client_id].push(yt)}),ke(ze),console.log("discountsByClientId:",ze)}).catch(console.error):ke({})},[e]);const Pt=x.useMemo(()=>E?Hit(String(E.id),Se):[],[E,Se]);return x.useEffect(()=>{if(!e||e.length===0)return;(async()=>{const ze={};await Promise.all(e.map(async yt=>{try{const er=(await pr.getBonusHistory(String(yt.id))||[]).reduce((Dt,ar)=>ar.type==="начислено"?Dt+(ar.amount||0):ar.type==="списано"?Dt-(ar.amount||0):Dt,0);ze[String(yt.id)]=er}catch{ze[String(yt.id)]=0}})),et(ze)})()},[e]),x.useEffect(()=>{if(!e||e.length===0)return;(async()=>{const ze={};await Promise.all(e.map(async yt=>{try{const Rt=await pr.getBonusHistory(String(yt.id)),er=new Date,Dt={};(Rt||[]).forEach(ar=>{ar.expiry_date&&new Date(ar.expiry_date)>er&&ar.type==="начислено"&&(Dt[ar.expiry_date]=(Dt[ar.expiry_date]||0)+(ar.amount||0))}),ze[String(yt.id)]=Object.entries(Dt).map(([ar,qr])=>({date:ar,amount:qr}))}catch{ze[String(yt.id)]=[]}})),Oe(ze)})()},[e]),i.jsxs("div",{className:"min-h-screen flex flex-col",children:[i.jsx(cy,{}),i.jsx("main",{className:"flex-grow mb-12",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("h1",{className:"text-3xl font-bold mb-8 beauty-gradient-text",children:"Карточки клиентов"}),i.jsxs("div",{className:"flex gap-4 justify-between mb-6",children:[i.jsxs("div",{className:"flex gap-2 w-full max-w-md",children:[i.jsx($e,{value:c,onChange:pe=>u(pe.target.value),placeholder:"Поиск по имени, телефону или email",className:"w-full"}),i.jsxs(ne,{variant:"outline",className:"shrink-0",onClick:()=>ge(!0),children:[i.jsx(iH,{className:"w-4 h-4 mr-2"})," Фильтры",it?` (${it})`:""]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs(ne,{className:"bg-beauty-500 hover:bg-beauty-600",onClick:()=>we(!0),children:[i.jsx(ls,{className:"h-4 w-4 mr-2 text-primary"})," Добавить клиента"]}),i.jsx(ne,{className:"bg-beauty-500 hover:bg-beauty-600",onClick:()=>F(!0),children:"Импорт из Excel/CSV"})]})]}),i.jsx(EZe,{clients:ct,onViewDetails:Et,onSchedule:St,setSelectedClient:j,setOpenAddTagDialog:k,services:n.map(pe=>({id:String(pe.id),name:pe.name})),discountsByClientId:me,bonusBalancesByClientId:he,expiringBonusesByClientId:nt})]})}),i.jsx(Ait,{open:M,onClose:()=>F(!1),onSave:()=>F(!1)}),i.jsx(qt,{open:h,onOpenChange:p,children:E&&i.jsxs(Wt,{className:"max-w-[90vw] w-[90vw] max-h-[90vh] bg-white p-0 sm:rounded-lg overflow-hidden overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[i.jsxs("div",{children:[i.jsx(Vt,{className:"text-xl font-semibold",children:"Профиль клиента"}),i.jsx(fr,{className:"text-sm text-gray-500",children:"Подробная информация и история записей"})]}),i.jsx(xbe,{asChild:!0,children:i.jsxs("button",{type:"button",className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground","aria-label":"Закрыть",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),i.jsx("span",{className:"sr-only",children:"Закрыть"})]})})]}),i.jsxs("div",{className:"p-6 flex items-start gap-6 border-b border-gray-200",children:[E.avatar_url?i.jsx("img",{src:E.avatar_url,alt:E.full_name,className:"w-20 h-20 rounded-full object-cover border-2 border-gray-100"}):i.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-2xl font-semibold border-2 border-gray-100",children:E.full_name?E.full_name.charAt(0).toUpperCase():"-"}),i.jsxs("div",{className:"flex-grow",children:[i.jsxs("div",{className:"flex items-center mb-1",children:[i.jsx("h3",{className:"text-2xl font-bold mr-3",children:E.full_name}),NC(E,s,Se,me)&&i.jsx($t,{className:"ml-2 bg-blue-100 text-blue-700 border border-blue-200 px-2.5 py-0.5 text-xs font-medium",children:NC(E,s,Se,me)}),E.is_active&&i.jsx($t,{className:"bg-green-100 text-green-700 border-green-200 text-xs px-2 py-0.5 ml-2",children:"Активен"})]}),E.email&&i.jsxs("p",{className:"text-sm text-gray-500 mb-0.5 flex items-center",children:[i.jsx(Sv,{size:14,className:"mr-2 text-gray-400"}),E.email]}),E.phone&&i.jsxs("p",{className:"text-sm text-gray-500 mb-0.5 flex items-center",children:[i.jsx(Mw,{size:14,className:"mr-2 text-gray-400"}),E.phone]}),i.jsxs("p",{className:"text-xs text-gray-400",children:["Создан: ",E.created_at?Me(new Date(E.created_at),"dd.MM.yyyy"):"-"]})]}),i.jsxs("div",{className:"flex flex-col space-y-2",children:[i.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>ie(E),children:[i.jsx(Dw,{size:16,className:"mr-2"})," Редактировать"]}),i.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>I({open:!0,client:E}),children:[i.jsx(Kp,{size:16,className:"mr-2"})," Начислить бонусы"]}),i.jsxs(ne,{size:"sm",variant:"destructive",onClick:()=>b(!0),children:[i.jsx(vf,{size:16,className:"mr-2"})," Удалить"]})]})]}),i.jsxs(fa,{defaultValue:"info",className:"w-full p-6",children:[i.jsxs(ta,{className:"grid w-full grid-cols-3 mb-6 bg-gray-100 p-1 rounded-lg",children:[i.jsx(Tt,{value:"info",className:"py-2 text-sm data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-gray-800 text-gray-600",children:"Информация"}),i.jsx(Tt,{value:"procedures",className:"py-2 text-sm data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-gray-800 text-gray-600",children:"История процедур"}),i.jsx(Tt,{value:"bonuses",className:"py-2 text-sm data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-gray-800 text-gray-600",children:"История бонусов"})]}),i.jsx(Ft,{value:"info",children:i.jsxs("div",{className:"grid md:grid-cols-2 gap-x-12 gap-y-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Личная информация"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Дата рождения:"})," ",i.jsx("span",{className:"text-sm text-gray-700 font-medium ml-2",children:E.birthdate?Me(new Date(E.birthdate),"dd.MM.yyyy"):"-"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Последнее посещение:"})," ",i.jsx("span",{className:"text-sm text-gray-700 font-medium ml-2",children:be(String(E.id))})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Следующая запись:"})," ",i.jsx("span",{className:"text-sm text-gray-700 font-medium ml-2",children:Je(String(E.id))})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-sm text-gray-500 mt-0.5",children:"Теги:"}),i.jsx("div",{className:"ml-2 flex flex-wrap gap-1.5",children:E.tags&&E.tags.length>0?E.tags.map(pe=>i.jsx($t,{variant:"secondary",className:"text-xs px-2 py-0.5 bg-purple-100 text-purple-700 border-purple-200",children:pe},pe)):i.jsx("span",{className:"text-sm text-gray-400",children:"Нет тегов"})})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Примечания:"})," ",i.jsx("span",{className:"text-sm text-gray-700 font-medium ml-2",children:E.notes||"Нет примечаний"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Программа лояльности"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Бонусы:"})," ",i.jsx("span",{className:"text-sm text-gray-700 font-medium ml-2",children:he[E.id]??0})]}),((Ht=nt[E.id])==null?void 0:Ht.length)>0&&i.jsx("div",{className:"text-xs text-pink-600 mt-1",children:nt[E.id].map(pe=>i.jsxs("div",{children:["Сгорает: ",i.jsx("b",{children:pe.amount})," до ",Me(new Date(pe.date),"dd.MM.yyyy")]},pe.date))}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Индивидуальные скидки:"}),Array.isArray(me==null?void 0:me[E.id])&&me[E.id].length>0?i.jsx("ul",{className:"list-disc list-inside ml-2",children:me[E.id].map(pe=>i.jsxs("li",{className:"text-xs",children:[pe.discount_percent,"% до ",pe.valid_to?Me(new Date(pe.valid_to),"dd.MM.yy"):"-",typeof pe.max_usages=="number"&&typeof pe.used_count=="number"?` (${pe.max_usages-pe.used_count} ост.)`:""]},pe.id))}):i.jsx("span",{className:"text-sm text-gray-700 font-medium ml-2",children:"Нет"})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1.5",children:"Абонементы:"}),v.length===0?i.jsx("p",{className:"text-sm text-gray-400",children:"Загрузка программ лояльности..."}):Pt.length>0?Pt.filter(pe=>{pe.visits;const ze=pe.subscription_visits_left??0;let yt=null;if(pe.created_at&&pe.expire_days){const er=new Date(pe.created_at);yt=new Date(er.getTime()+pe.expire_days*24*60*60*1e3)}const Rt=yt?yt<new Date:!1;return ze>0&&!Rt}).slice(0,2).map(pe=>{const ze=v.find(re=>String(re.id)===String(pe.program_id));if(!ze)return console.warn(`Программа с ID ${pe.program_id} не найдена для абонемента ${pe.id}`),null;const yt=pe.visits??0,Rt=pe.subscription_visits_left??0,er=yt>Rt?yt-Rt:0;let Dt=null;if(pe.created_at&&pe.expire_days){const re=new Date(pe.created_at);Dt=new Date(re.getTime()+pe.expire_days*24*60*60*1e3)}const ar=Dt?Dt<new Date:!1,V=Rt>0&&!ar?"active":ar?"expired":"used",oe=Array.isArray(n)&&Array.isArray(pe.services)?pe.services.map(re=>{const se=n.find(ce=>String(ce.id)===String(re));return se?se.name:null}).filter(Boolean):[];return i.jsxs("div",{className:"mb-2",children:[i.jsx(Jre,{name:(ze==null?void 0:ze.name)||"Абонемент",used:er,total:yt,status:V,services:oe}),Dt&&i.jsxs("div",{className:"text-xs text-gray-400 ml-1 mt-0.5",children:["до ",Me(Dt,"dd.MM.yy")]})]},pe.id)}):i.jsx("p",{className:"text-sm text-gray-400",children:"Нет активных абонементов"})]})]})]})}),i.jsx(Ft,{value:"procedures",className:"mt-4",children:ee?i.jsxs("div",{className:"flex items-center justify-center h-32",children:[i.jsx(ki,{className:"h-8 w-8 animate-spin text-primary"}),i.jsx("p",{className:"ml-2 text-muted-foreground",children:"Загрузка истории процедур..."})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsx(Oit,{appointments:ye})})}),i.jsx(Ft,{value:"bonuses",className:"mt-4",children:D?i.jsxs("div",{className:"flex items-center justify-center h-32",children:[i.jsx(ki,{className:"h-8 w-8 animate-spin text-primary"}),i.jsx("p",{className:"ml-2 text-muted-foreground",children:"Загрузка истории бонусов..."})]}):R.length===0?i.jsx("div",{className:"text-muted-foreground text-sm py-8 text-center",children:"Нет операций с бонусами"}):i.jsx("div",{className:"overflow-x-auto",children:i.jsx(Dit,{clientId:String(E==null?void 0:E.id),appointments:L})})})]}),i.jsx("div",{className:"p-6 border-t border-gray-200 flex justify-end sticky bottom-0 bg-white z-10",children:i.jsx(ne,{variant:"outline",onClick:()=>p(!1),children:"Закрыть"})})]},E.id+"-"+Se.length)}),i.jsx(NZe,{open:_,onOpenChange:S,client:y,onSuccess:o}),i.jsx(Mg,{open:g,onOpenChange:b,children:i.jsxs(_m,{children:[i.jsxs(Sm,{children:[i.jsx(Em,{children:"Вы уверены, что хотите удалить этого клиента?"}),i.jsx(Nm,{children:"Это действие нельзя отменить. Данные клиента будут безвозвратно удалены."})]}),i.jsxs(jm,{children:[i.jsx(km,{children:"Отмена"}),i.jsx(Cm,{onClick:async()=>{if(d)try{await pr.deleteClient(String(d.id)),t(),p(!1),b(!1)}catch(pe){console.error("Ошибка при удалении клиента:",pe)}},children:"Удалить"})]})]})}),i.jsx(qt,{open:N,onOpenChange:k,children:i.jsxs(Wt,{children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Добавление тегов"}),i.jsx(fr,{children:E&&i.jsxs(i.Fragment,{children:["Добавьте теги для клиента ",E.full_name,". Разделяйте теги запятыми."]})})]}),E&&i.jsx(Mit,{client:E,onSuccess:async pe=>{await t(),j(ze=>ze&&{...ze,tags:pe}),k(!1)}})]})}),i.jsx(qt,{open:K,onOpenChange:X,children:i.jsxs(Wt,{children:[i.jsx(Gt,{children:i.jsx(Vt,{children:"Редактировать клиента"})}),O&&i.jsx(Fit,{client:O,onSuccess:()=>{t(),X(!1)},onCancel:()=>X(!1)})]})}),i.jsx(Iit,{open:Z.open,client:Z.client,onClose:()=>I({open:!1,client:null}),loading:Q,onSubmit:async(pe,ze)=>{if(Z.client){ve(!0);try{await pr.addBonusPointsWithExpiry(String(Z.client.id),pe,ze),Ae({title:"Бонусы добавлены",description:`${pe} бонусов добавлены для клиента ${Z.client.full_name||Z.client.name}${ze?` (до ${ze})`:""}`}),I({open:!1,client:null}),t()}catch{Ae({title:"Ошибка",description:"Не удалось добавить бонусы. Пожалуйста, попробуйте снова.",variant:"destructive"})}finally{ve(!1)}}}}),i.jsx(qt,{open:z,onOpenChange:we,children:i.jsxs(Wt,{className:"sm:max-w-[500px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Добавление нового клиента"}),i.jsx(fr,{children:"Заполните информацию о новом клиенте. Поля, отмеченные *, обязательны."})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Имя клиента *"}),i.jsx($e,{name:"full_name",placeholder:"Введите ФИО клиента",required:!0,value:Re.full_name,onChange:pe=>Pe(ze=>({...ze,full_name:pe.target.value})),disabled:De})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Телефон *"}),i.jsx(XM,{mask:"+7 (999) 999-99-99",value:Re.phone,onChange:pe=>Pe(ze=>({...ze,phone:pe.target.value})),disabled:De,children:pe=>i.jsx($e,{...pe,name:"phone",placeholder:"+7 (___) ___-__-__",required:!0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),i.jsx($e,{name:"email",type:"email",placeholder:"client@beautytrack.ru",value:Re.email,onChange:pe=>Pe(ze=>({...ze,email:pe.target.value})),disabled:De})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Дата рождения"}),i.jsx($e,{name:"birthdate",placeholder:"ДД.ММ.ГГГГ",value:Re.birthdate,onChange:pe=>Vit(pe,ze=>Pe(yt=>({...yt,birthdate:ze}))),disabled:De,maxLength:10})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Примечание"}),i.jsx(rn,{name:"notes",placeholder:"Дополнительная информация о клиенте",rows:3,value:Re.notes,onChange:pe=>Pe(ze=>({...ze,notes:pe.target.value})),disabled:De})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Фото клиента"}),i.jsx($e,{name:"avatar_file",type:"file",accept:"image/*",onChange:pe=>Pe(ze=>{var yt;return{...ze,avatar_file:((yt=pe.target.files)==null?void 0:yt[0])||null}}),disabled:De})]})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",onClick:()=>we(!1),disabled:De,children:"Отмена"}),i.jsx(ne,{className:"bg-beauty-500 hover:bg-beauty-600",onClick:Ke,disabled:De,children:De?"Добавление...":"Добавить"})]})]})}),i.jsx(qt,{open:ae,onOpenChange:ge,children:i.jsxs(Wt,{children:[i.jsx(Gt,{children:i.jsx(Vt,{children:"Фильтры"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium mb-1",children:"Статус"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:J.status,onChange:pe=>Y(ze=>({...ze,status:pe.target.value})),children:[i.jsx("option",{value:"",children:"Любой"}),Lit.map(pe=>i.jsx("option",{value:pe,children:pe},pe))]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Hn,{checked:J.hasSubscription,onCheckedChange:pe=>Y(ze=>({...ze,hasSubscription:!!pe}))}),i.jsx("span",{children:"Есть абонемент"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Hn,{checked:J.hasBonuses,onCheckedChange:pe=>Y(ze=>({...ze,hasBonuses:!!pe}))}),i.jsx("span",{children:"Есть бонусы"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Hn,{checked:J.hasDiscount,onCheckedChange:pe=>Y(ze=>({...ze,hasDiscount:!!pe}))}),i.jsx("span",{children:"Есть индивидуальная скидка"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium mb-1",children:"Теги"}),i.jsx("select",{multiple:!0,className:"w-full border rounded px-2 py-1 h-32",value:J.tags,onChange:pe=>{const ze=Array.from(pe.target.selectedOptions).map(yt=>yt.value);Y(yt=>({...yt,tags:ze}))},children:le.map(pe=>i.jsx("option",{value:pe,children:pe},pe))})]})]}),i.jsxs(or,{className:"mt-4 flex gap-2",children:[i.jsx(ne,{variant:"outline",onClick:()=>Y({status:"",hasSubscription:!1,hasBonuses:!1,hasDiscount:!1,tags:[]}),children:"Сбросить"}),i.jsx(ne,{onClick:()=>ge(!1),children:"Применить"})]})]})})]})},$ae=["active","completed"],Kit=lD({name:sa().min(3,{message:"Treatment name must be at least 3 characters long"}),client_id:sa().min(1,{message:"Client selection is required"}),staff_id:sa().min(1,{message:"Staff selection is required"}),products_used:sa().optional(),notes:sa().optional(),date:sa().min(1,{message:"Date is required"}),next_date:sa().optional(),followupMonths:sa().optional(),status:cD($ae),color:sa().optional(),progress:uD.number().min(0).max(100).optional()}),Xit=lD({notes:sa().optional(),products_used:sa().optional(),result:sa().optional(),progress:uD.number().min(0).max(100).optional(),next_date:sa().optional(),status:cD($ae).optional(),color:sa().optional(),name:sa().min(3,{message:"Treatment name must be at least 3 characters long"}).optional(),staff_id:sa().optional(),date:sa().optional()}),Yit=()=>{const{trackings:e,selectedTracking:t,trackingHistory:r,isLoading:n,error:a,fetchTrackings:s,fetchTrackingsByStudio:o,createTracking:l,updateTracking:c,deleteTracking:u,selectTracking:d,fetchTrackingHistory:f,addTrackingHistoryItem:h}=dJ(),{clients:p,fetchClients:v,loading:m,error:g,addClient:b}=Gs();Oi();const{specialists:y}=Oa(),{procedureTypes:w,fetchProcedureTypes:_,isLoading:S,error:E}=RD(),{currentStudio:j}=Ba(),[N,k]=x.useState(""),[C,T]=x.useState("all"),[A,B]=x.useState(!1),[R,P]=x.useState("cards"),[D,U]=x.useState(!1);x.useState(null);const[M,F]=x.useState(!1),[K,X]=x.useState("active");x.useState({from:cye(new Date,6),to:new Date});const{toast:O}=co(),[W,L]=x.useState(!1),[H,ee]=x.useState(""),[q,Z]=x.useState(""),[I,Q]=x.useState(!1);x.useEffect(()=>{(async()=>{j!=null&&j.id?await o(j.id):await s({status:K==="all"||K==="recommendations"?void 0:K}),v(),_()})()},[j==null?void 0:j.id]),x.useEffect(()=>{(async()=>{if(j!=null&&j.id)await o(j.id);else{const me={};K!=="all"&&K!=="recommendations"&&(me.status=K),await s(me)}})()},[K,j==null?void 0:j.id,s,o]),x.useEffect(()=>{M&&t&&f(t.id)},[M,t]);const ve=jf({resolver:Ef(Kit),defaultValues:{name:"",client_id:"",staff_id:"",products_used:"",notes:"",date:Me(new Date,"yyyy-MM-dd"),next_date:"",followupMonths:"3",status:"active",color:"#7c3aed",progress:0}}),z=jf({resolver:Ef(Xit)}),we=x.useMemo(()=>{let te=e;return K==="active"?te=te.filter(me=>me.status==="active"):K==="completed"&&(te=te.filter(me=>me.status==="completed")),C!=="all"&&(te=te.filter(me=>me.client_id===C)),N&&(te=te.filter(me=>me.name.toLowerCase().includes(N.toLowerCase()))),te},[e,K,C,N]),Re=te=>{var me;return((me=p.find(ke=>ke.id===te))==null?void 0:me.full_name)||"Unknown Client"},Pe=te=>{switch(te){case"beauty":return"bg-beauty-100 text-beauty-700";case"teal":return"bg-teal-100 text-teal-700";case"lavender":return"bg-lavender-100 text-lavender-700";default:return"bg-beauty-100 text-beauty-700"}},De=te=>{switch(te){case"beauty":return"bg-beauty-100 [&>div]:bg-beauty-500";case"teal":return"bg-teal-100 [&>div]:bg-teal-500";case"lavender":return"bg-lavender-100 [&>div]:bg-lavender-500";default:return"bg-beauty-100 [&>div]:bg-beauty-500"}},Ne=te=>{const me=y.find(Oe=>String(Oe.id)===te.staff_id),ke=te.next_date||Me(Ti(new Date(te.date),parseInt(te.followupMonths||"3")),"yyyy-MM-dd"),he=["beauty","teal","lavender"],et=he[Math.floor(Math.random()*he.length)],nt={name:te.name,client_id:te.client_id,date:Me(new Date(te.date),"dd MMM yyyy"),next_date:Me(new Date(ke),"dd MMM yyyy"),staff_id:te.staff_id,staff_name:(me==null?void 0:me.name)||"Unknown Staff",notes:te.notes,products_used:te.products_used?te.products_used.split(",").map(Oe=>Oe.trim()):[],progress:10,status:"active",color:et};l(nt),B(!1),ve.reset(),O({title:"Процедура добавлена",description:`${nt.name} для клиента ${Re(nt.client_id)}`})},J=async te=>{if(!t)return;const me=te.progress!==void 0?te.progress:t.progress;let ke="active";me&&me>=100&&(ke="completed");const he={notes:te.notes,progress:me,result:te.result,products_used:te.products_used?te.products_used.split(",").map(ye=>ye.trim()):void 0,next_date:te.next_date?Me(new Date(te.next_date),"yyyy-MM-dd"):void 0,status:ke,date:Me(new Date,"yyyy-MM-dd")};await c(t.id,he);const et=t.progress||0,nt=me||et,Oe=nt!==et;Oe&&(await h({tracking_id:t.id,date:Me(new Date,"yyyy-MM-dd"),tracking:`${t.name} - Прогресс: ${et}% → ${nt}%`,notes:te.notes,products_used:te.products_used?te.products_used.split(",").map(ye=>ye.trim()):[],staff_id:t.staff_id,staff_name:t.staff_name}),await f(t.id));const Ye={};K!=="all"&&K!=="recommendations"&&(Ye.status=K),await s(Ye),U(!1),z.reset(),d(null),O({title:"Процедура обновлена",description:Oe?`Прогресс изменен с ${et}% на ${nt}%${ke==="completed"?". Процедура завершена!":""}`:"Информация о процедуре успешно обновлена"})},Y=te=>{d(te),z.setValue("notes",te.notes||""),z.setValue("products_used",te.products_used?te.products_used.join(", "):""),z.setValue("result",te.result||""),z.setValue("progress",te.progress||0)},ae=te=>{try{const me=new Date(te);return Kve(me,new Date)}catch{return null}},ge=te=>te.status==="completed"?"Завершен":"Активен",Se=te=>{const me=te.next_date?ae(te.next_date):null,ke=me!==null&&me<=14&&me>0,he=me!==null&&me<0;return i.jsx(qe,{className:`border-beauty-100 ${ke?"ring-2 ring-beauty-300":""}`,children:i.jsxs(Ge,{className:"p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-beauty-900",children:Re(te.client_id)}),i.jsx("h4",{className:"text-lg font-semibold text-beauty-800",children:te.name})]}),i.jsx($t,{className:Pe(te.color||"beauty"),children:ge(te)})]}),i.jsxs("div",{className:"flex justify-between text-sm text-beauty-600 mb-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Qa,{className:"h-3.5 w-3.5 mr-1.5"}),i.jsxs("span",{children:["Последняя: ",te.date]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Si,{className:"h-3.5 w-3.5 mr-1.5"}),i.jsxs("span",{className:ke?"text-beauty-700 font-medium":he?"text-red-600":"",children:[he?"Просрочено":"След.: ",te.next_date]})]})]}),i.jsxs("div",{className:"flex items-center mb-1 mt-3",children:[i.jsxs("span",{className:"text-xs text-beauty-600 w-16",children:[te.progress,"% готово"]}),i.jsx(nc,{value:te.progress,className:`h-2 flex-1 ${De(te.color||"beauty")}`})]}),te.products_used&&te.products_used.length>0&&i.jsxs("div",{className:"mt-3",children:[i.jsx("h5",{className:"text-xs font-medium text-beauty-700 mb-1",children:"Использованные продукты:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:te.products_used.map((et,nt)=>i.jsx($t,{variant:"outline",className:"text-xs bg-gray-50",children:et},nt))})]}),te.notes&&i.jsxs("div",{className:"mt-3 bg-gray-50 p-2 rounded text-sm italic text-beauty-600 border-l-2 border-beauty-300",children:['"',te.notes,'"']}),i.jsxs("div",{className:"flex justify-between mt-3 space-x-2",children:[i.jsxs("div",{className:"text-xs text-beauty-600 flex items-center",children:[i.jsx(Ro,{className:"h-3 w-3 mr-1"}),te.staff_name]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ne,{size:"sm",variant:"outline",className:"text-beauty-600 border-beauty-200",onClick:()=>{Y(te),U(!0)},children:[i.jsx(tg,{className:"h-3.5 w-3.5 mr-1"}),"Обновить"]}),i.jsx(ne,{size:"sm",className:"bg-beauty-500 hover:bg-beauty-600",onClick:()=>{Y(te),F(!0)},children:i.jsx(ffe,{className:"h-3.5 w-3.5"})})]})]})]})},te.id)};return i.jsxs("div",{className:"min-h-screen flex flex-col",children:[i.jsx(cy,{}),i.jsx("main",{className:"flex-grow mb-12",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("h1",{className:"text-3xl font-bold mb-8 beauty-gradient-text",children:"Процедуры клиентов"}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8 items-center justify-between",children:[i.jsxs("div",{className:"w-full md:w-auto flex flex-wrap gap-2 md:gap-4",children:[i.jsxs("div",{className:"relative flex-grow md:flex-grow-0 md:w-64",children:[i.jsx(oj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-beauty-400 h-4 w-4"}),i.jsx($e,{type:"text",placeholder:"Поиск процедур...",className:"pl-9",value:N,onChange:te=>k(te.target.value)})]}),i.jsxs(Tr,{value:C,onValueChange:T,children:[i.jsx(wr,{className:"w-full md:w-48",children:i.jsx(Ar,{placeholder:"Фильтр по клиенту"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"all",children:"Все клиенты"}),(p||[]).map(te=>i.jsx(_t,{value:String(te.id),children:te.full_name},String(te.id)))]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ne,{variant:R==="cards"?"default":"outline",size:"sm",onClick:()=>P("cards"),className:R==="cards"?"bg-beauty-500 hover:bg-beauty-600":"",children:"Карточки"}),i.jsx(ne,{variant:R==="table"?"default":"outline",size:"sm",onClick:()=>P("table"),className:R==="table"?"bg-beauty-500 hover:bg-beauty-600":"",children:"Таблица"})]})]}),i.jsxs(qt,{open:A,onOpenChange:B,children:[i.jsx(Dv,{asChild:!0,children:i.jsxs(ne,{className:"bg-beauty-500 hover:bg-beauty-600",children:[i.jsx(ls,{className:"h-4 w-4 mr-2"})," Добавить процедуру"]})}),i.jsxs(Wt,{className:"sm:max-w-[550px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Добавить новую процедуру"}),i.jsx(fr,{children:"Запись новой процедуры или лечения для клиента"})]}),i.jsx(dc,{...ve,children:i.jsxs("form",{onSubmit:ve.handleSubmit(Ne),className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Or,{control:ve.control,name:"name",render:({field:te})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Тип процедуры"}),i.jsx(br,{children:i.jsxs(Tr,{onValueChange:te.onChange,value:te.value,children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите тип процедуры"})}),i.jsx(_r,{children:w.map(me=>i.jsx(_t,{value:me.name,children:me.name},me.id))})]})}),i.jsx(kr,{})]})}),i.jsx(Or,{control:ve.control,name:"staff_id",render:({field:te})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Специалист"}),i.jsx(br,{children:i.jsxs(Tr,{onValueChange:te.onChange,value:te.value,children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите специалиста"})}),i.jsx(_r,{children:y.map(me=>i.jsx(_t,{value:String(me.id),children:me.name},me.id))})]})}),i.jsx(kr,{})]})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsx(Or,{control:ve.control,name:"client_id",render:({field:te})=>i.jsxs(Nr,{className:"col-span-2",children:[i.jsx(Cr,{children:"Клиент"}),i.jsx(br,{children:i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex-grow",children:i.jsx(f_,{items:p.map(me=>({value:String(me.id),label:`${me.full_name}${me.phone?` (${me.phone})`:""}`})),selectedValue:te.value||null,onSelectValue:me=>{te.onChange(me),L(!1)},placeholder:"Выберите или найдите клиента...",searchPlaceholder:"Поиск по имени или телефону...",emptyText:m?"Загрузка клиентов...":p.length===0?"Клиенты не найдены. Добавьте нового.":"Клиент не найден по запросу.",className:"w-full"})}),i.jsx(ne,{variant:"outline",size:"icon",onClick:()=>L(!0),title:"Добавить нового клиента",disabled:I,children:i.jsx(nH,{className:"h-4 w-4"})})]}),W&&i.jsxs("div",{className:"mt-2 space-y-2 border p-3 rounded-md bg-gray-50",children:[i.jsx($e,{placeholder:"Имя нового клиента",value:H,onChange:me=>ee(me.target.value),disabled:I}),i.jsx($e,{placeholder:"Телефон нового клиента",value:q,onChange:me=>Z(me.target.value),disabled:I}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ne,{size:"sm",onClick:async()=>{Q(!0);const me=await b({full_name:H,phone:q});Q(!1),me&&(L(!1),ee(""),Z(""),te.onChange(String(me.id)),v())},disabled:!H||!q||I,children:I?"Сохранение...":"Сохранить клиента"}),i.jsx(ne,{size:"sm",variant:"outline",onClick:()=>L(!1),disabled:I,children:"Отмена"})]})]})]})}),i.jsx(kr,{})]})}),i.jsx(Or,{control:ve.control,name:"date",render:({field:te})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Дата"}),i.jsx(br,{children:i.jsx($e,{type:"date",...te,className:"w-full text-sm"})}),i.jsx(kr,{})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Or,{control:ve.control,name:"products_used",render:({field:te})=>i.jsxs(Nr,{className:"col-span-2",children:[i.jsx(Cr,{children:"Использованные продукты"}),i.jsx(br,{children:i.jsx($e,{...te,placeholder:"Введите продукты через запятую"})}),i.jsx(kr,{})]})}),i.jsx(Or,{control:ve.control,name:"notes",render:({field:te})=>i.jsxs(Nr,{className:"col-span-2",children:[i.jsx(Cr,{children:"Заметки"}),i.jsx(br,{children:i.jsx(rn,{...te,placeholder:"Добавьте заметки о процедуре..."})}),i.jsx(kr,{})]})}),i.jsx(Or,{control:ve.control,name:"followupMonths",render:({field:te})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Интервал следующей процедуры"}),i.jsxs(Tr,{onValueChange:te.onChange,value:te.value||"3",children:[i.jsx(br,{children:i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите интервал"})})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"1",children:"1 месяц"}),i.jsx(_t,{value:"2",children:"2 месяца"}),i.jsx(_t,{value:"3",children:"3 месяца"}),i.jsx(_t,{value:"6",children:"6 месяцев"}),i.jsx(_t,{value:"12",children:"12 месяцев"})]})]}),i.jsx(kr,{})]})}),i.jsx(Or,{control:ve.control,name:"next_date",render:({field:te})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Точная дата следующей процедуры"}),i.jsx(br,{children:i.jsxs("div",{className:"relative",children:[i.jsx(Qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-beauty-500 h-4 w-4"}),i.jsx($e,{type:"date",className:"pl-9",...te})]})}),i.jsx(ag,{children:"Опционально. Если не указано, будет рассчитано исходя из интервала"}),i.jsx(kr,{})]})})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",type:"button",onClick:()=>B(!1),children:"Отмена"}),i.jsx(ne,{type:"submit",className:"bg-beauty-500 hover:bg-beauty-600",children:"Сохранить"})]})]})})]})]})]}),i.jsxs(fa,{defaultValue:"active",value:K,onValueChange:te=>X(te),className:"mb-8",children:[i.jsxs(ta,{className:"mb-6",children:[i.jsx(Tt,{value:"active",children:"Активные процедуры"}),i.jsx(Tt,{value:"completed",children:"Завершенные"}),i.jsx(Tt,{value:"all",children:"Все процедуры"}),i.jsx(Tt,{value:"recommendations",children:"Рекомендации"})]}),i.jsx(Ft,{value:"active",children:we.length>0?R==="cards"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(we||[]).map(Se)}):i.jsx(qe,{children:i.jsx(Ge,{className:"p-0",children:i.jsxs(ks,{children:[i.jsx(Ts,{children:i.jsxs(Lr,{children:[i.jsx(pt,{children:"Клиент"}),i.jsx(pt,{children:"Процедура"}),i.jsx(pt,{children:"Последняя дата"}),i.jsx(pt,{children:"Следующая дата"}),i.jsx(pt,{children:"Специалист"}),i.jsx(pt,{children:"Статус"}),i.jsx(pt,{children:"Прогресс"}),i.jsx(pt,{className:"text-right",children:"Действия"})]})}),i.jsx(As,{children:(we||[]).map(te=>{const me=ae(te.next_date),ke=me!==null&&me<=14&&me>0,he=me!==null&&me<0;return i.jsxs(Lr,{className:ke?"bg-beauty-50":"",children:[i.jsx(dt,{className:"font-medium",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ro,{className:"h-4 w-4 mr-2 text-beauty-500"}),Re(te.client_id)]})}),i.jsx(dt,{children:te.name}),i.jsx(dt,{children:te.date}),i.jsx(dt,{className:he?"text-red-600":ke?"text-beauty-700 font-medium":"",children:he?i.jsxs("div",{className:"flex items-center",children:[i.jsx(rc,{className:"h-4 w-4 mr-1 text-red-500"}),te.next_date]}):ke?i.jsxs("div",{className:"flex items-center",children:[i.jsx(Si,{className:"h-4 w-4 mr-1 text-beauty-500"}),te.next_date]}):te.next_date}),i.jsx(dt,{children:te.staff_name}),i.jsx(dt,{children:i.jsx($t,{className:Pe(te.color||"beauty"),children:ge(te)})}),i.jsx(dt,{children:i.jsx(nc,{value:te.progress,className:`h-2 w-24 ${De(te.color||"beauty")}`})}),i.jsx(dt,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-1",children:[i.jsx(ne,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>{Y(te),U(!0)},children:i.jsx(tg,{className:"h-4 w-4"})}),i.jsx(ne,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>{Y(te),F(!0)},children:i.jsx(Ou,{className:"h-4 w-4"})})]})})]},te.id)})})]})})}):i.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-gray-100",children:[i.jsx(rc,{className:"h-12 w-12 mx-auto text-beauty-300 mb-3"}),i.jsx("h3",{className:"text-lg font-medium text-beauty-900 mb-1",children:"Процедуры не найдены"}),i.jsx("p",{className:"text-beauty-600 mb-4",children:"Нет процедур, соответствующих текущим фильтрам"}),i.jsx(ne,{onClick:()=>{k(""),T("all")},variant:"outline",children:"Сбросить фильтры"})]})}),i.jsx(Ft,{value:"completed",children:we.filter(te=>te.status==="completed").length>0?R==="cards"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:we.filter(te=>te.status==="completed").map(Se)}):i.jsx(qe,{children:i.jsx(Ge,{className:"p-0",children:i.jsxs(ks,{children:[i.jsx(Ts,{children:i.jsxs(Lr,{children:[i.jsx(pt,{children:"Клиент"}),i.jsx(pt,{children:"Процедура"}),i.jsx(pt,{children:"Дата завершения"}),i.jsx(pt,{children:"Специалист"}),i.jsx(pt,{children:"Результат"}),i.jsx(pt,{className:"text-right",children:"Действия"})]})}),i.jsx(As,{children:we.filter(te=>te.status==="completed").map(te=>i.jsxs(Lr,{children:[i.jsx(dt,{className:"font-medium",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ro,{className:"h-4 w-4 mr-2 text-beauty-500"}),Re(te.client_id)]})}),i.jsx(dt,{children:te.name}),i.jsx(dt,{children:te.date}),i.jsx(dt,{children:te.staff_name}),i.jsx(dt,{children:i.jsx($t,{className:"bg-green-100 text-green-700",children:"Завершено"})}),i.jsx(dt,{className:"text-right",children:i.jsx(ne,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>{Y(te),F(!0)},children:i.jsx(Ou,{className:"h-4 w-4"})})})]},te.id))})]})})}):i.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-gray-100",children:[i.jsx(Rw,{className:"h-12 w-12 mx-auto text-green-300 mb-3"}),i.jsx("h3",{className:"text-lg font-medium text-beauty-900 mb-1",children:"Завершенных процедур нет"}),i.jsx("p",{className:"text-beauty-600",children:"Завершенные процедуры будут отображаться здесь"})]})}),i.jsx(Ft,{value:"all",children:we.length>0?R==="cards"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:we.map(Se)}):i.jsx(qe,{children:i.jsx(Ge,{className:"p-0",children:i.jsxs(ks,{children:[i.jsx(Ts,{children:i.jsxs(Lr,{children:[i.jsx(pt,{children:"Клиент"}),i.jsx(pt,{children:"Процедура"}),i.jsx(pt,{children:"Последняя дата"}),i.jsx(pt,{children:"Следующая дата"}),i.jsx(pt,{children:"Специалист"}),i.jsx(pt,{children:"Статус"}),i.jsx(pt,{children:"Прогресс"}),i.jsx(pt,{className:"text-right",children:"Действия"})]})}),i.jsx(As,{children:we.map(te=>{const me=ae(te.next_date),ke=me!==null&&me<=14&&me>0,he=me!==null&&me<0;return i.jsxs(Lr,{className:ke?"bg-beauty-50":"",children:[i.jsx(dt,{className:"font-medium",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ro,{className:"h-4 w-4 mr-2 text-beauty-500"}),Re(te.client_id)]})}),i.jsx(dt,{children:te.name}),i.jsx(dt,{children:te.date}),i.jsx(dt,{className:he?"text-red-600":ke?"text-beauty-700 font-medium":"",children:he?i.jsxs("div",{className:"flex items-center",children:[i.jsx(rc,{className:"h-4 w-4 mr-1 text-red-500"}),te.next_date]}):ke?i.jsxs("div",{className:"flex items-center",children:[i.jsx(Si,{className:"h-4 w-4 mr-1 text-beauty-500"}),te.next_date]}):te.next_date}),i.jsx(dt,{children:te.staff_name}),i.jsx(dt,{children:i.jsx($t,{className:Pe(te.color||"beauty"),children:ge(te)})}),i.jsx(dt,{children:i.jsx(nc,{value:te.progress,className:`h-2 w-24 ${De(te.color||"beauty")}`})}),i.jsx(dt,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-1",children:[i.jsx(ne,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>{Y(te),U(!0)},children:i.jsx(tg,{className:"h-4 w-4"})}),i.jsx(ne,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>{Y(te),F(!0)},children:i.jsx(Ou,{className:"h-4 w-4"})})]})})]},te.id)})})]})})}):i.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-gray-100",children:[i.jsx(rc,{className:"h-12 w-12 mx-auto text-beauty-300 mb-3"}),i.jsx("h3",{className:"text-lg font-medium text-beauty-900 mb-1",children:"Процедуры не найдены"}),i.jsx("p",{className:"text-beauty-600 mb-4",children:"Нет процедур, соответствующих текущим фильтрам"}),i.jsx(ne,{onClick:()=>{k(""),T("all")},variant:"outline",children:"Сбросить фильтры"})]})}),i.jsx(Ft,{value:"recommendations",children:i.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-gray-100",children:[i.jsx("h3",{className:"text-lg font-medium text-beauty-900 mb-1",children:"Рекомендации"}),i.jsx("p",{className:"text-beauty-600",children:"Функция рекомендаций временно недоступна"})]})})]}),i.jsx("div",{className:"text-center mt-10",children:i.jsx(ne,{className:"bg-beauty-500 hover:bg-beauty-600 text-white px-6 py-2",onClick:()=>B(!0),children:"Записать новую процедуру"})})]})}),i.jsx(al,{}),i.jsx(qt,{open:D,onOpenChange:U,children:i.jsxs(Wt,{className:"sm:max-w-[550px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Обновить результаты процедуры"}),i.jsx(fr,{children:"Добавьте информацию о результатах и планируйте последующие процедуры"})]}),t&&i.jsx(dc,{...z,children:i.jsxs("form",{onSubmit:z.handleSubmit(J),className:"space-y-4",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium",children:t.name}),i.jsxs("p",{className:"text-sm text-beauty-600",children:["Клиент: ",Re(t.client_id)]})]}),i.jsx($t,{className:Pe(t.color||"beauty"),children:ge(t)})]}),i.jsx(Or,{control:z.control,name:"notes",render:({field:te})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Заметки о результате"}),i.jsx(br,{children:i.jsx(rn,{...te,placeholder:"Опишите результаты процедуры, реакцию клиента..."})}),i.jsx(kr,{})]})}),i.jsx(Or,{control:z.control,name:"products_used",render:({field:te})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Использованные продукты"}),i.jsx(br,{children:i.jsx($e,{...te,placeholder:"Продукты, используемые во время процедуры..."})}),i.jsx(ag,{children:"Введите через запятую"}),i.jsx(kr,{})]})}),i.jsx(Or,{control:z.control,name:"result",render:({field:te})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Общий результат"}),i.jsx(br,{children:i.jsx(rn,{...te,placeholder:"Общая оценка результата процедуры..."})}),i.jsx(kr,{})]})}),i.jsx(Or,{control:z.control,name:"progress",render:({field:te})=>i.jsxs(Nr,{children:[i.jsxs(Cr,{children:["Прогресс курса процедур (",te.value,"%)"]}),i.jsx(br,{children:i.jsx($e,{type:"range",min:0,max:100,step:5,...te})}),i.jsx(ag,{children:"Установите 100%, если курс завершен полностью"}),i.jsx(kr,{})]})}),i.jsx(Or,{control:z.control,name:"next_date",render:({field:te})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Дата следующей процедуры"}),i.jsx(br,{children:i.jsxs("div",{className:"relative",children:[i.jsx(Qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-beauty-500 h-4 w-4"}),i.jsx($e,{type:"date",className:"pl-9",...te})]})}),i.jsx(ag,{children:"Оставьте пустым, если дата следующей процедуры не изменилась"}),i.jsx(kr,{})]})})]}),i.jsxs(or,{children:[i.jsx(ne,{variant:"outline",type:"button",onClick:()=>{U(!1),d(null)},children:"Отмена"}),i.jsx(ne,{type:"submit",className:"bg-beauty-500 hover:bg-beauty-600",children:"Обновить"})]})]})})]})}),i.jsx(qt,{open:M,onOpenChange:F,children:i.jsx(Wt,{className:"sm:max-w-[600px]",children:t&&i.jsxs(i.Fragment,{children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"История процедуры"}),i.jsxs(fr,{children:["Подробная история процедуры ",t.name," для клиента ",Re(t.client_id)]})]}),i.jsxs("div",{className:"space-y-6 py-4 max-h-[60vh] overflow-y-auto",children:[i.jsxs(qe,{className:"border-beauty-100",children:[i.jsx(ht,{className:"pb-2",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-xl font-bold text-beauty-900",children:t.name}),i.jsx($t,{className:Pe(t.color||"beauty"),children:ge(t)})]})}),i.jsxs(Ge,{className:"pt-0",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-beauty-700",children:"Клиент"}),i.jsxs("p",{className:"flex items-center",children:[i.jsx(Ro,{className:"h-4 w-4 mr-1.5 text-beauty-500"}),Re(t.client_id)]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-beauty-700",children:"Специалист"}),i.jsx("p",{children:t.staff_name})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-beauty-700",children:"Первая процедура"}),i.jsxs("p",{className:"flex items-center",children:[i.jsx(Qa,{className:"h-4 w-4 mr-1.5 text-beauty-500"}),t.date]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-beauty-700",children:"Последняя процедура"}),i.jsxs("p",{className:"flex items-center",children:[i.jsx(Qa,{className:"h-4 w-4 mr-1.5 text-beauty-500"}),t.date]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-beauty-700",children:"Следующая процедура"}),i.jsxs("p",{className:"flex items-center",children:[i.jsx(Qa,{className:"h-4 w-4 mr-1.5 text-beauty-500"}),t.next_date]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-beauty-700",children:"Прогресс"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(nc,{value:t.progress,className:`h-2 w-24 mr-2 ${De(t.color||"beauty")}`}),i.jsxs("span",{className:"text-sm",children:[t.progress,"%"]})]})]})]}),t.result&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h4",{className:"text-sm font-medium text-beauty-700",children:"Результат"}),i.jsx("p",{className:"text-beauty-600 bg-beauty-50 p-2 rounded mt-1",children:t.result})]})]})]}),i.jsxs("div",{className:"bg-white p-4 shadow-sm rounded-md border border-beauty-100",children:[i.jsxs("h3",{className:"text-lg font-medium text-beauty-900 mb-4 flex items-center",children:[i.jsx(tg,{className:"h-5 w-5 mr-2 text-beauty-500"}),"Детальная история"]}),r&&r.length>0?i.jsx("div",{className:"space-y-6",children:r.map((te,me)=>i.jsxs("div",{className:"border-l-2 border-beauty-300 pl-4 relative pb-4",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-beauty-500 absolute -left-[7px] top-[6px]"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-sm font-medium text-beauty-800",children:te.date}),i.jsxs("p",{className:"text-xs text-beauty-600",children:["Специалист: ",te.staff_name]})]}),i.jsx("p",{className:"text-sm text-beauty-700 mt-1 font-medium",children:te.tracking}),te.products_used&&te.products_used.length>0&&i.jsxs("div",{className:"mt-1",children:[i.jsx("p",{className:"text-xs text-beauty-600 font-medium",children:"Использованные продукты:"}),i.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:te.products_used.map((ke,he)=>i.jsx($t,{variant:"outline",className:"text-xs bg-gray-50",children:ke},he))})]}),te.notes&&i.jsxs("div",{className:"mt-2 bg-beauty-50 p-2 rounded text-sm italic text-beauty-600",children:['"',te.notes,'"']})]},me))}):i.jsx("p",{className:"text-beauty-600 text-center py-4",children:"История процедур отсутствует"})]})]}),i.jsxs(or,{className:"space-x-2",children:[i.jsxs(ne,{variant:"outline",onClick:()=>{F(!1),Y(t),U(!0)},children:[i.jsx(Rw,{className:"h-4 w-4 mr-2"}),"Обновить прогресс"]}),i.jsxs(ne,{className:"bg-beauty-500 hover:bg-beauty-600",onClick:()=>F(!1),children:[i.jsx(vfe,{className:"h-4 w-4 mr-2"}),"Закрыть"]})]})]})})})]})};var Fae={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(wa,function(){var r=1e3,n=6e4,a=36e5,s="millisecond",o="second",l="minute",c="hour",u="day",d="week",f="month",h="quarter",p="year",v="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(R){var P=["th","st","nd","rd"],D=R%100;return"["+R+(P[(D-20)%10]||P[D]||P[0])+"]"}},w=function(R,P,D){var U=String(R);return!U||U.length>=P?R:""+Array(P+1-U.length).join(D)+R},_={s:w,z:function(R){var P=-R.utcOffset(),D=Math.abs(P),U=Math.floor(D/60),M=D%60;return(P<=0?"+":"-")+w(U,2,"0")+":"+w(M,2,"0")},m:function R(P,D){if(P.date()<D.date())return-R(D,P);var U=12*(D.year()-P.year())+(D.month()-P.month()),M=P.clone().add(U,f),F=D-M<0,K=P.clone().add(U+(F?-1:1),f);return+(-(U+(D-M)/(F?M-K:K-M))||0)},a:function(R){return R<0?Math.ceil(R)||0:Math.floor(R)},p:function(R){return{M:f,y:p,w:d,d:u,D:v,h:c,m:l,s:o,ms:s,Q:h}[R]||String(R||"").toLowerCase().replace(/s$/,"")},u:function(R){return R===void 0}},S="en",E={};E[S]=y;var j="$isDayjsObject",N=function(R){return R instanceof A||!(!R||!R[j])},k=function R(P,D,U){var M;if(!P)return S;if(typeof P=="string"){var F=P.toLowerCase();E[F]&&(M=F),D&&(E[F]=D,M=F);var K=P.split("-");if(!M&&K.length>1)return R(K[0])}else{var X=P.name;E[X]=P,M=X}return!U&&M&&(S=M),M||!U&&S},C=function(R,P){if(N(R))return R.clone();var D=typeof P=="object"?P:{};return D.date=R,D.args=arguments,new A(D)},T=_;T.l=k,T.i=N,T.w=function(R,P){return C(R,{locale:P.$L,utc:P.$u,x:P.$x,$offset:P.$offset})};var A=function(){function R(D){this.$L=k(D.locale,null,!0),this.parse(D),this.$x=this.$x||D.x||{},this[j]=!0}var P=R.prototype;return P.parse=function(D){this.$d=function(U){var M=U.date,F=U.utc;if(M===null)return new Date(NaN);if(T.u(M))return new Date;if(M instanceof Date)return new Date(M);if(typeof M=="string"&&!/Z$/i.test(M)){var K=M.match(g);if(K){var X=K[2]-1||0,O=(K[7]||"0").substring(0,3);return F?new Date(Date.UTC(K[1],X,K[3]||1,K[4]||0,K[5]||0,K[6]||0,O)):new Date(K[1],X,K[3]||1,K[4]||0,K[5]||0,K[6]||0,O)}}return new Date(M)}(D),this.init()},P.init=function(){var D=this.$d;this.$y=D.getFullYear(),this.$M=D.getMonth(),this.$D=D.getDate(),this.$W=D.getDay(),this.$H=D.getHours(),this.$m=D.getMinutes(),this.$s=D.getSeconds(),this.$ms=D.getMilliseconds()},P.$utils=function(){return T},P.isValid=function(){return this.$d.toString()!==m},P.isSame=function(D,U){var M=C(D);return this.startOf(U)<=M&&M<=this.endOf(U)},P.isAfter=function(D,U){return C(D)<this.startOf(U)},P.isBefore=function(D,U){return this.endOf(U)<C(D)},P.$g=function(D,U,M){return T.u(D)?this[U]:this.set(M,D)},P.unix=function(){return Math.floor(this.valueOf()/1e3)},P.valueOf=function(){return this.$d.getTime()},P.startOf=function(D,U){var M=this,F=!!T.u(U)||U,K=T.p(D),X=function(I,Q){var ve=T.w(M.$u?Date.UTC(M.$y,Q,I):new Date(M.$y,Q,I),M);return F?ve:ve.endOf(u)},O=function(I,Q){return T.w(M.toDate()[I].apply(M.toDate("s"),(F?[0,0,0,0]:[23,59,59,999]).slice(Q)),M)},W=this.$W,L=this.$M,H=this.$D,ee="set"+(this.$u?"UTC":"");switch(K){case p:return F?X(1,0):X(31,11);case f:return F?X(1,L):X(0,L+1);case d:var q=this.$locale().weekStart||0,Z=(W<q?W+7:W)-q;return X(F?H-Z:H+(6-Z),L);case u:case v:return O(ee+"Hours",0);case c:return O(ee+"Minutes",1);case l:return O(ee+"Seconds",2);case o:return O(ee+"Milliseconds",3);default:return this.clone()}},P.endOf=function(D){return this.startOf(D,!1)},P.$set=function(D,U){var M,F=T.p(D),K="set"+(this.$u?"UTC":""),X=(M={},M[u]=K+"Date",M[v]=K+"Date",M[f]=K+"Month",M[p]=K+"FullYear",M[c]=K+"Hours",M[l]=K+"Minutes",M[o]=K+"Seconds",M[s]=K+"Milliseconds",M)[F],O=F===u?this.$D+(U-this.$W):U;if(F===f||F===p){var W=this.clone().set(v,1);W.$d[X](O),W.init(),this.$d=W.set(v,Math.min(this.$D,W.daysInMonth())).$d}else X&&this.$d[X](O);return this.init(),this},P.set=function(D,U){return this.clone().$set(D,U)},P.get=function(D){return this[T.p(D)]()},P.add=function(D,U){var M,F=this;D=Number(D);var K=T.p(U),X=function(L){var H=C(F);return T.w(H.date(H.date()+Math.round(L*D)),F)};if(K===f)return this.set(f,this.$M+D);if(K===p)return this.set(p,this.$y+D);if(K===u)return X(1);if(K===d)return X(7);var O=(M={},M[l]=n,M[c]=a,M[o]=r,M)[K]||1,W=this.$d.getTime()+D*O;return T.w(W,this)},P.subtract=function(D,U){return this.add(-1*D,U)},P.format=function(D){var U=this,M=this.$locale();if(!this.isValid())return M.invalidDate||m;var F=D||"YYYY-MM-DDTHH:mm:ssZ",K=T.z(this),X=this.$H,O=this.$m,W=this.$M,L=M.weekdays,H=M.months,ee=M.meridiem,q=function(Q,ve,z,we){return Q&&(Q[ve]||Q(U,F))||z[ve].slice(0,we)},Z=function(Q){return T.s(X%12||12,Q,"0")},I=ee||function(Q,ve,z){var we=Q<12?"AM":"PM";return z?we.toLowerCase():we};return F.replace(b,function(Q,ve){return ve||function(z){switch(z){case"YY":return String(U.$y).slice(-2);case"YYYY":return T.s(U.$y,4,"0");case"M":return W+1;case"MM":return T.s(W+1,2,"0");case"MMM":return q(M.monthsShort,W,H,3);case"MMMM":return q(H,W);case"D":return U.$D;case"DD":return T.s(U.$D,2,"0");case"d":return String(U.$W);case"dd":return q(M.weekdaysMin,U.$W,L,2);case"ddd":return q(M.weekdaysShort,U.$W,L,3);case"dddd":return L[U.$W];case"H":return String(X);case"HH":return T.s(X,2,"0");case"h":return Z(1);case"hh":return Z(2);case"a":return I(X,O,!0);case"A":return I(X,O,!1);case"m":return String(O);case"mm":return T.s(O,2,"0");case"s":return String(U.$s);case"ss":return T.s(U.$s,2,"0");case"SSS":return T.s(U.$ms,3,"0");case"Z":return K}return null}(Q)||K.replace(":","")})},P.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},P.diff=function(D,U,M){var F,K=this,X=T.p(U),O=C(D),W=(O.utcOffset()-this.utcOffset())*n,L=this-O,H=function(){return T.m(K,O)};switch(X){case p:F=H()/12;break;case f:F=H();break;case h:F=H()/3;break;case d:F=(L-W)/6048e5;break;case u:F=(L-W)/864e5;break;case c:F=L/a;break;case l:F=L/n;break;case o:F=L/r;break;default:F=L}return M?F:T.a(F)},P.daysInMonth=function(){return this.endOf(f).$D},P.$locale=function(){return E[this.$L]},P.locale=function(D,U){if(!D)return this.$L;var M=this.clone(),F=k(D,U,!0);return F&&(M.$L=F),M},P.clone=function(){return T.w(this.$d,this)},P.toDate=function(){return new Date(this.valueOf())},P.toJSON=function(){return this.isValid()?this.toISOString():null},P.toISOString=function(){return this.$d.toISOString()},P.toString=function(){return this.$d.toUTCString()},R}(),B=A.prototype;return C.prototype=B,[["$ms",s],["$s",o],["$m",l],["$H",c],["$W",u],["$M",f],["$y",p],["$D",v]].forEach(function(R){B[R[1]]=function(P){return this.$g(P,R[0],R[1])}}),C.extend=function(R,P){return R.$i||(R(P,A,C),R.$i=!0),C},C.locale=k,C.isDayjs=N,C.unix=function(R){return C(1e3*R)},C.en=E[S],C.Ls=E,C.p={},C})})(Fae);var Lae=Fae.exports;const Xa=zr(Lae);var Zit={exports:{}};(function(e,t){(function(r,n){e.exports=n(Lae)})(wa,function(r){function n(v){return v&&typeof v=="object"&&"default"in v?v:{default:v}}var a=n(r),s="января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),o="январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),l="янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),c="янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_"),u=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function d(v,m,g){var b,y;return g==="m"?m?"минута":"минуту":v+" "+(b=+v,y={mm:m?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[g].split("_"),b%10==1&&b%100!=11?y[0]:b%10>=2&&b%10<=4&&(b%100<10||b%100>=20)?y[1]:y[2])}var f=function(v,m){return u.test(m)?s[v.month()]:o[v.month()]};f.s=o,f.f=s;var h=function(v,m){return u.test(m)?l[v.month()]:c[v.month()]};h.s=c,h.f=l;var p={name:"ru",weekdays:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),weekdaysShort:"вск_пнд_втр_срд_чтв_птн_сбт".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),months:f,monthsShort:h,weekStart:1,yearStart:4,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:d,mm:d,h:"час",hh:d,d:"день",dd:d,M:"месяц",MM:d,y:"год",yy:d},ordinal:function(v){return v},meridiem:function(v){return v<4?"ночи":v<12?"утра":v<17?"дня":"вечера"}};return a.default.locale(p,null,!0),p})})(Zit);Xa.locale("ru");const Jit=()=>i.jsx("div",{className:"min-h-screen flex flex-col",children:i.jsxs("main",{className:"flex-grow p-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Личный кабинет клиента"}),i.jsx("p",{children:"Страница находится в разработке"})]})}),Qit=()=>{var B;Kn();const[e,t]=x.useState(null),[r,n]=x.useState(null),[a,s]=x.useState(!1),[o,l]=x.useState(null),[c,u]=x.useState(!1),[d,f]=x.useState(null),[h,p]=x.useState(null),[v,m]=x.useState(!0),[g,b]=x.useState(null),[y,w]=x.useState([]),[_,S]=x.useState([]),[E,j]=x.useState([]),[N,k]=x.useState({today:0,week:0,month:0}),[C,T]=x.useState(!1);x.useState(!1),x.useEffect(()=>{async function R(){m(!0),b(null);try{const P=await LG.getCurrentUser();if(!P)throw new Error("Пользователь не найден");const{data:D,error:U}=await ue.from("profiles").select("*").eq("id",P.id).limit(1);if(U||!D||D.length===0)throw new Error("Профиль не найден");const M=D[0];p(M);let F=await Ru.getById(M.id);if(!F){const K=await Ru.getAll(),X=K.find(ee=>ee.profile_id===M.id),O=K.find(ee=>ee.email&&M.email&&ee.email.toLowerCase()===M.email.toLowerCase()),W=K.find(ee=>ee.phone&&M.phone&&ee.phone.replace(/\D/g,"")===M.phone.replace(/\D/g,"")),L=K.find(ee=>ee.full_name&&`${M.first_name} ${M.last_name}`.toLowerCase()===ee.full_name.toLowerCase());if(F=X||O||W||L,K.filter(ee=>ee.email&&M.email&&ee.email.toLowerCase()===M.email.toLowerCase()||ee.phone&&M.phone&&ee.phone.replace(/\D/g,"")===M.phone.replace(/\D/g,"")||ee.full_name&&`${M.first_name} ${M.last_name}`.toLowerCase()===ee.full_name.toLowerCase()).length>1){b("Найдено несколько специалистов с совпадающими данными (email, телефон или ФИО). Обратитесь к администратору для ручной привязки."),f(null);return}}if(!F){b("Мастер не найден. Проверьте, что ваш email, телефон или ФИО совпадают с данными в профиле специалиста. Если проблема не решается — обратитесь к администратору."),f(null);return}f(F)}catch{f(null),p(null),b("Мастер не найден. Проверьте, что ваш email, телефон или ФИО совпадают с данными в профиле специалиста. Если проблема не решается — обратитесь к администратору.")}finally{m(!1)}}R()},[]),x.useEffect(()=>{d&&(T(!0),Promise.all([rs.getAllAppointments({specialistId:d.id}),es.getServicesBySpecialistId(d.id)]).then(async([R,P])=>{console.log("Appointments for specialist:",d==null?void 0:d.id,R),w(R||[]),S(P.data||[]);const D=new Map;(R||[]).forEach(O=>{if(O.client&&O.client.id){const W=O.client,L=String(W.id),H=typeof W.full_name=="string"&&W.full_name||typeof W.name=="string"&&W.name||W.users&&typeof W.users.full_name=="string"&&W.users.full_name||"-";if(H==="-")return;const ee=typeof W.avatar_url=="string"&&W.avatar_url||W.users&&typeof W.users.avatar_url=="string"&&W.users.avatar_url||null;if(!D.has(L))D.set(L,{id:L,full_name:H,avatar_url:ee,visits:1,last_visit:O.date||null,next_appointment:null});else{const q=D.get(L);q.visits+=1,O.date&&(!q.last_visit||new Date(O.date)>new Date(q.last_visit))&&(q.last_visit=O.date)}}}),console.log("Client map before setting state:",D),j(Array.from(D.values()));const U=new Date,M=U.toISOString().slice(0,10),F=new Date(U);F.setDate(U.getDate()-7);const K=new Date(U);K.setMonth(U.getMonth()-1);const X=O=>(R||[]).filter(O).reduce((W,L)=>W+(L.price||L.appointment_price||0),0);k({today:X(O=>O.date&&O.date.slice(0,10)===M),week:X(O=>O.date&&new Date(O.date)>=F),month:X(O=>O.date&&new Date(O.date)>=K)})}).finally(()=>T(!1)))},[d]);const A=async R=>{t(R),s(!0),u(!0);const P=await pr.getClientById(R.id);n(P),s(!1);try{const M=(await rs.getClientProcedureHistory(R.id)).filter(F=>String(F.specialist_id)===String(d.id)).filter(F=>F.status==="completed");if(M.length>0){const F=M.sort((K,X)=>new Date(X.date).getTime()-new Date(K.date).getTime());l(F[0])}else l(null)}catch{l(null)}finally{u(!1)}};return i.jsxs("div",{className:"min-h-screen flex flex-col",children:[i.jsx(od,{}),i.jsx("main",{className:"flex-grow pt-24 pb-12",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[v?i.jsx(jl,{className:"h-20 w-full rounded-lg mb-4"}):d&&h?i.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[i.jsx("img",{src:h.avatar_url||"/placeholder.png",alt:h.first_name+" "+h.last_name,className:"w-16 h-16 rounded-full object-cover mr-4 border-2 border-beauty-200"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:h.full_name||d.name||"-"}),d.specialization&&i.jsx("p",{className:"text-beauty-600",children:d.specialization})]})]}):i.jsxs("div",{className:"text-muted-foreground",children:["Мастер не найден",i.jsx("br",{}),g&&i.jsx("span",{className:"text-xs text-red-500 block mt-2",children:g})]}),i.jsx("div",{className:"flex gap-2",children:i.jsx(en,{to:"/specialist/schedule",children:i.jsxs(ne,{className:"bg-primary text-primary-foreground hover:bg-primary/90 flex items-center gap-2",children:[i.jsx(Qa,{className:"h-4 w-4"})," Моё расписание"]})})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[i.jsx(qe,{children:i.jsxs(Ge,{className:"p-4 flex flex-col items-center",children:[i.jsx(mfe,{className:"h-8 w-8 text-beauty-500 mb-2"}),i.jsx("p",{className:"text-2xl font-bold",children:y.filter(R=>R.date&&R.date.slice(0,10)===new Date().toISOString().slice(0,10)).length}),i.jsx("p",{className:"text-beauty-600 text-sm",children:"Записей сегодня"})]})}),i.jsx(qe,{children:i.jsxs(Ge,{className:"p-4 flex flex-col items-center",children:[i.jsx(Vu,{className:"h-8 w-8 text-beauty-500 mb-2"}),i.jsx("p",{className:"text-2xl font-bold",children:E.length}),i.jsx("p",{className:"text-beauty-600 text-sm",children:"Клиентов"})]})}),i.jsx(qe,{children:i.jsxs(Ge,{className:"p-4 flex flex-col items-center",children:[i.jsx(w3,{className:"h-8 w-8 text-beauty-500 mb-2"}),i.jsxs("p",{className:"text-2xl font-bold",children:[N.month.toLocaleString(),"₽"]}),i.jsx("p",{className:"text-beauty-600 text-sm",children:"Общий доход"})]})}),i.jsx(qe,{children:i.jsxs(Ge,{className:"p-4 flex flex-col items-center",children:[i.jsx(Nv,{className:"h-8 w-8 text-beauty-500 mb-2"}),i.jsx("p",{className:"text-2xl font-bold",children:"4.8"}),i.jsx("p",{className:"text-beauty-600 text-sm",children:"Рейтинг (нет отзывов)"})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs(qe,{className:"lg:col-span-1",children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"flex items-center",children:[i.jsx(Si,{className:"h-5 w-5 mr-2 text-beauty-500"}),"Сегодняшние записи"]})}),i.jsx(Ge,{children:y.filter(R=>R.date&&R.date.slice(0,10)===new Date().toISOString().slice(0,10)).map(R=>{var D,U,M;const P=R.start_time?R.start_time.slice(0,5):"--:--";return i.jsxs("div",{className:"flex items-center mb-3 pb-3 border-b border-beauty-100 last:border-0 last:pb-0 last:mb-0",children:[i.jsx("div",{className:"bg-beauty-50 text-beauty-600 px-2 py-1 rounded text-sm font-medium w-16 text-center",children:P}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsx("div",{className:"font-medium",children:((D=R.client)==null?void 0:D.full_name)||R.client_name||"-"}),i.jsxs("div",{className:"text-sm text-beauty-600",children:[((U=R.service)==null?void 0:U.name)||"-",(M=R.service)!=null&&M.duration?` (${R.service.duration} мин)`:""]})]}),i.jsx(ne,{variant:"ghost",size:"sm",className:"text-primary hover:text-primary/80 hover:bg-primary/10",children:i.jsx(Si,{className:"h-4 w-4"})})]},R.id)})})]}),i.jsxs(qe,{className:"lg:col-span-2",children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"flex items-center",children:[i.jsx(Vu,{className:"h-5 w-5 mr-2 text-beauty-500"}),"Последние клиенты"]})}),i.jsxs(Ge,{children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.map(R=>{const P=R;return i.jsxs("div",{className:"flex items-center border border-beauty-100 rounded-lg p-3 cursor-pointer",onClick:()=>A(P),children:[P.avatar_url?i.jsx("img",{src:P.avatar_url,alt:P.full_name||"-",className:"w-12 h-12 rounded-full object-cover mr-3"}):i.jsx("div",{className:"w-12 h-12 rounded-full bg-beauty-100 mr-3 flex items-center justify-center text-beauty-400 font-bold text-xl",children:(P.full_name||"-")[0]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium",children:P.full_name||"-"}),i.jsxs("div",{className:"text-sm text-beauty-600",children:["Визитов: ",P.visits]}),i.jsxs("div",{className:"flex justify-between text-xs text-beauty-600 mt-1",children:[i.jsxs("span",{children:["Посл.: ",P.last_visit?Xa(P.last_visit).format("DD.MM.YYYY"):"-"]}),i.jsxs("span",{children:["След.: ",P.next_appointment?Xa(P.next_appointment).format("DD.MM.YYYY"):"-"]})]})]})]},P.id)})}),i.jsx("div",{className:"text-center mt-4",children:i.jsx(ne,{variant:"link",className:"text-primary",children:"Показать всех клиентов"})})]})]}),i.jsxs(qe,{className:"lg:col-span-2",children:[i.jsx(ht,{className:"pb-2",children:i.jsxs(gt,{className:"flex items-center",children:[i.jsx(w3,{className:"h-5 w-5 mr-2 text-beauty-500"}),"Доходы"]})}),i.jsxs(Ge,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{className:"bg-beauty-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-beauty-600 text-sm mb-1",children:"Сегодня"}),i.jsxs("p",{className:"text-xl font-bold",children:[N.today.toLocaleString(),"₽"]})]}),i.jsxs("div",{className:"bg-beauty-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-beauty-600 text-sm mb-1",children:"Эта неделя"}),i.jsxs("p",{className:"text-xl font-bold",children:[N.week.toLocaleString(),"₽"]})]}),i.jsxs("div",{className:"bg-beauty-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-beauty-600 text-sm mb-1",children:"Этот месяц"}),i.jsxs("p",{className:"text-xl font-bold",children:[N.month.toLocaleString(),"₽"]})]})]}),i.jsx("p",{className:"font-medium mb-2",children:"Популярные услуги:"}),i.jsx("div",{className:"space-y-2",children:_.map(R=>i.jsxs("div",{className:"flex justify-between border-b border-beauty-100 pb-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:R.name}),i.jsxs("p",{className:"text-sm text-beauty-600",children:["Длительность: ",R.duration," мин"]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("p",{className:"font-medium",children:[R.price,"₽"]})})]},R.id))}),i.jsx("div",{className:"text-center mt-4",children:i.jsx(ne,{variant:"link",className:"text-primary",children:"Подробная статистика"})})]})]})]})]})}),i.jsx(al,{}),e&&i.jsx(qt,{open:!!e,onOpenChange:R=>{R||(t(null),n(null))},children:i.jsxs(Wt,{className:"max-w-3xl",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Профиль клиента"}),i.jsx(fr,{children:"Подробная информация и история записей"})]}),a?i.jsx(jl,{className:"h-40 w-full rounded-lg"}):r?i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("img",{src:r.avatar_url||r.image||"/placeholder.png",alt:r.full_name||r.name,className:"w-16 h-16 rounded-full object-cover border"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg",children:r.full_name||r.name}),i.jsx("div",{className:"text-sm text-beauty-700",children:r.email}),i.jsx("div",{className:"text-sm text-beauty-700",children:r.phone}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Создан: ",r.created_at&&typeof r.created_at=="string"?r.created_at.slice(0,10).split("-").reverse().join("."):""]})]})]}),i.jsxs("div",{className:"mb-2 text-sm",children:["Дата рождения: ",r.birthdate?typeof r.birthdate=="string"?r.birthdate.slice(0,10).split("-").reverse().join("."):"":"—"]}),i.jsxs("div",{className:"mb-2 text-sm",children:["Бонусы: ",i.jsx("span",{className:"font-semibold",children:r.calculated_bonus_points||r.bonusPoints||0})]}),i.jsxs("div",{className:"mb-2 text-sm flex flex-wrap gap-1 items-center",children:["Теги: ",(B=r.tags)!=null&&B.length?r.tags.map(R=>i.jsx($t,{children:R},R)):i.jsx("span",{className:"text-muted-foreground",children:"Нет"})]}),i.jsxs("div",{className:"mb-2 text-sm",children:["Примечания: ",r.notes||i.jsx("span",{className:"text-muted-foreground",children:"Нет"})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("div",{className:"mb-2 text-sm font-medium",children:"Последняя процедура:"}),c?i.jsx(jl,{className:"h-12 w-full rounded"}):o?i.jsxs("table",{className:"w-full text-left table-fixed border rounded bg-beauty-50",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-xs text-beauty-700",children:[i.jsx("th",{className:"py-1 px-2",children:"Дата"}),i.jsx("th",{className:"py-1 px-2",children:"Процедура"}),i.jsx("th",{className:"py-1 px-2",children:"Мастер"}),i.jsx("th",{className:"py-1 px-2",children:"Стоимость"}),i.jsx("th",{className:"py-1 px-2",children:"Скидка (%)"}),i.jsx("th",{className:"py-1 px-2",children:"С учётом скидки"}),i.jsx("th",{className:"py-1 px-2",children:"Статус"}),i.jsx("th",{className:"py-1 px-2",children:"Программа лояльности"})]})}),i.jsx("tbody",{children:i.jsxs("tr",{className:"text-sm",children:[i.jsx("td",{className:"py-1 px-2",children:Xa(o.date).locale("ru").format("DD.MM.YYYY")}),i.jsx("td",{className:"py-1 px-2",children:o.service_name}),i.jsx("td",{className:"py-1 px-2",children:o.specialist_name}),i.jsxs("td",{className:"py-1 px-2",children:[o.appointment_price," ₽"]}),i.jsx("td",{className:"py-1 px-2",children:o.discount_percent?`${o.discount_percent}%`:"-"}),i.jsx("td",{className:"py-1 px-2",children:o.final_price!==null&&o.final_price!==void 0?`${o.final_price.toFixed(2)} ₽`:"-"}),i.jsx("td",{className:"py-1 px-2",children:o.status==="completed"?i.jsx($t,{className:"bg-green-100 text-green-800",children:"Завершено"}):o.status}),i.jsx("td",{className:"py-1 px-2",children:o.loyalty_program_name||"-"})]})})]}):i.jsx("div",{className:"text-muted-foreground text-sm",children:"Нет завершённых процедур"})]})]}):i.jsx("div",{children:"Нет данных"})]})})]})},eot=({searchQuery:e,onSearchChange:t,onAddNew:r,className:n})=>{const a=s=>{t(s.target.value)};return i.jsx("div",{className:"container mx-auto px-0",children:i.jsx("div",{className:"flex items-center gap-4 mb-6 justify-start",children:i.jsxs("div",{className:`relative ${n||""}`,children:[i.jsx(oj,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"}),i.jsx($e,{type:"search",placeholder:"Поиск специалистов...",className:"pl-10 max-w-xs w-full",value:e,onChange:a})]})})})};G.forwardRef(({className:e,...t},r)=>i.jsx(ne,{ref:r,variant:"ghost",size:"icon",className:Ue("h-8 w-8 p-1.5 text-primary hover:text-primary/80 hover:bg-primary/10",e),...t,children:i.jsx(iH,{className:"h-full w-full"})}));const Bae=({specialists:e,appointments:t,timeSlots:r,selectedDate:n,viewMode:a,onCellClick:s,getWorkTimeForDate:o})=>{const l=(f,h)=>{const[p,v]=f.split(":").map(Number),m=p*60+v;let g=h[0],b=Math.abs(m-(parseInt(h[0].split(":")[0])*60+parseInt(h[0].split(":")[1])));for(const y of h){const w=parseInt(y.split(":")[0])*60+parseInt(y.split(":")[1]),_=Math.abs(m-w);_<b&&(b=_,g=y)}return g},c=(f,h=[])=>{const p=l(f.start_time,r),v=r.findIndex(C=>C===p);if(v===-1)return null;const[m,g]=f.start_time.split(":").map(Number),[b,y]=f.end_time.split(":").map(Number),w=m*60+g,S=b*60+y-w,E=Math.ceil(S/30),j=v+E-1,k=h.some(C=>v<=C.endIndex&&j>=C.startIndex);return{startIndex:v,endIndex:j,slotsCount:E,hasConflict:k}},u=(f,h)=>{const p=o(f,n);if(!(p.isWorkingDay!==!1))return!1;const m=parseInt(h.split(":")[0]),g=parseInt(h.split(":")[1]),b=m*60+g,y=parseInt(p.start.split(":")[0]),w=parseInt(p.start.split(":")[1]),_=y*60+w,S=parseInt(p.end.split(":")[0]),E=parseInt(p.end.split(":")[1]),j=S*60+E;return b>=_&&b<j},d=x.useMemo(()=>e.map(f=>{const h=t.filter(g=>String(g.specialist_id)===String(f.id)&&g.date===Me(n,"yyyy-MM-dd")),p=[],v=h.map(g=>{const b=c(g,p);return b&&p.push({startIndex:b.startIndex,endIndex:b.endIndex,appointment:g}),{appointment:g,position:b}}).filter(g=>g.position!==null),m=r.map((g,b)=>{const y=v.find(S=>S.position.startIndex===b);return y?{type:"appointment-start",appointment:y.appointment,colSpan:y.position.slotsCount,hasConflict:y.position.hasConflict}:v.some(S=>{const E=S.position.startIndex,j=S.position.endIndex;return b>E&&b<=j})?{type:"appointment-inside"}:{type:u(f,g)?"free":"non-working",slot:g}});return{specialist:f,slotOccupancy:m}}),[e,t,n,r]);if(a==="week"){const f=Vn(n,{weekStartsOn:1}),h=Array.from({length:7},(p,v)=>bn(f,v));return i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"w-32 px-4 py-2 text-left font-medium text-gray-500",children:"Мастер"}),h.map(p=>i.jsxs("th",{className:"px-1 py-2 text-center text-sm font-medium text-gray-500",children:[Me(p,"dd.MM"),i.jsx("br",{}),Me(p,"EEE")]},Me(p,"yyyy-MM-dd")))]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(p=>i.jsxs("tr",{className:"h-[60px]",children:[i.jsxs("td",{className:"px-4 py-2 align-top font-medium text-gray-900",children:[i.jsx("div",{children:p.full_name||p.name}),i.jsx("div",{className:"text-xs text-beauty-500",children:p.specialization})]}),h.map(v=>{const g=o(p,v).isWorkingDay===!1,b=t.filter(y=>String(y.specialist_id)===String(p.id)&&y.date===Me(v,"yyyy-MM-dd"));return g?i.jsx("td",{className:"bg-gray-100 text-gray-400 text-center align-middle",children:"Выходной"},Me(v,"yyyy-MM-dd")):b.length===0?i.jsx("td",{className:"text-gray-400 text-center align-middle",children:"-"},Me(v,"yyyy-MM-dd")):i.jsx("td",{className:"align-top",children:b.map(y=>i.jsxs("div",{className:"mb-1 bg-pink-100 border border-pink-300 rounded px-2 py-1 text-xs flex flex-col gap-0.5 shadow-sm",children:[i.jsxs("div",{className:"font-semibold text-pink-900 flex items-center gap-1",children:[i.jsx("span",{children:y.start_time}),i.jsx("span",{children:y.client_name||"Клиент"}),i.jsx("span",{className:"ml-auto w-2 h-2 rounded-full bg-green-400 inline-block",title:"Подтверждено"})]}),i.jsx("div",{className:"text-pink-700 italic",children:y.service?y.service.name:"Услуга"})]},y.id))},Me(v,"yyyy-MM-dd"))})]},p.id))})]})}return i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"w-32 px-4 py-2 text-left font-medium text-gray-500",children:"Мастер"}),r.map(f=>i.jsx("th",{className:"px-1 py-2 text-center text-sm font-medium text-gray-500",children:f},f))]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map(({specialist:f,slotOccupancy:h})=>i.jsxs("tr",{className:"h-[60px]",children:[i.jsx("td",{className:"px-4 py-2 align-top",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:i.jsx("img",{className:"h-10 w-10 rounded-full object-cover object-top",src:f.avatar_url||f.photo_url==="/placeholder.svg"?"/placeholder.svg":f.photo_url||"/placeholder.svg",alt:f.full_name||f.name||"",onError:p=>{p.currentTarget.src="/placeholder.svg"}})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("div",{className:"font-medium text-gray-900",children:f.full_name||f.name}),i.jsx("div",{className:"text-xs text-beauty-500",children:f.specialization}),i.jsx("div",{className:"text-xs text-gray-500",children:(()=>{const p=o(f,n);return"isWorkingDay"in p&&p.isWorkingDay===!1?"Выходной":`${p.start} - ${p.end}`})()})]})]})}),o(f,n).isWorkingDay===!1?i.jsx("td",{colSpan:r.length,className:"bg-gray-200 text-center text-gray-500 font-semibold py-4",children:"Выходной"}):h.map((m,g)=>{var w,_,S,E;if(m.type==="appointment-inside")return null;if(m.type==="appointment-start"){const j=m.appointment,N=m.colSpan,k=m.hasConflict,C=()=>{if(k)return"bg-red-50 border-l-4 border-red-500";switch(j.status){case"confirmed":return"bg-pink-100 border-l-4 border-pink-500";case"completed":return"bg-green-100 border-l-4 border-green-500";case"pending":return"bg-amber-100 border-l-4 border-amber-500";case"cancelled":return"bg-gray-100 border-l-4 border-gray-500";default:return"bg-gray-100"}};return i.jsx("td",{colSpan:N,className:`border relative ${C()} p-1 rounded shadow-sm transition-all hover:shadow`,children:i.jsxs("div",{className:"text-xs h-full",children:[i.jsxs("div",{className:"font-semibold flex justify-between items-start",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:((w=j.specialist)==null?void 0:w.avatar_url)||j.specialist_avatar_url||"/placeholder.svg",alt:((_=j.specialist)==null?void 0:_.name)||j.specialist_name||"Специалист",className:"w-8 h-8 rounded-full object-cover",onError:T=>{T.currentTarget.src="/placeholder.svg"}}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:((S=j.client)==null?void 0:S.name)||j.client_name||"Клиент не указан"}),i.jsx("div",{className:"text-sm text-gray-500",children:((E=j.service)==null?void 0:E.name)||"Услуга не указана"})]})]}),k&&i.jsx("span",{className:"bg-red-500 text-white text-[0.6rem] px-1 py-0.5 rounded",children:"конфликт"})]}),i.jsx("div",{className:"truncate",children:j.service?j.service.name:"Услуга"}),i.jsxs("div",{className:"text-gray-500 flex justify-between items-center mt-0.5",children:[i.jsxs("span",{children:[j.start_time," - ",j.end_time]}),j.final_price&&i.jsxs("span",{className:"font-medium text-gray-700",children:[j.final_price??j.price," ₽"]})]})]})},`appointment-${j.id}`)}const b=m.slot,y=m.type==="free";return i.jsx("td",{className:`border relative ${y?"hover:bg-gray-100 cursor-pointer":"bg-gray-50"}`,onClick:y?()=>s(b,f):void 0,children:y&&i.jsx("div",{className:"flex items-center justify-center h-full text-gray-300",children:"+"})},`${f.id}-${b}`)})]},f.id))})]})},z7=["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00"],Uae=({open:e,onClose:t,specialistName:r,initialDate:n=new Date,onSave:a,workingHours:s={},workSchedule:o={}})=>{const[l,c]=x.useState(n),[u,d]=x.useState(!0),[f,h]=x.useState("10:00"),[p,v]=x.useState("18:00"),[m,g]=x.useState(!1),[b,y]=x.useState(null),[w,_]=x.useState(n),S=Me(l,"d MMMM yyyy",{locale:Da}),E=Me(l,"eeee",{locale:Da});x.useEffect(()=>{if(!e||b&&+b==+l)return;const N=Me(l,"yyyy-MM-dd"),k=Me(l,"EEEE").toLowerCase();if(s&&s[N]){const C=s[N];"isWorkingDay"in C&&C.isWorkingDay===!1?d(!1):d(!0),h(C.start),v(C.end),y(l);return}if(o&&o[k]){const C=o[k];"isWorkingDay"in C&&C.isWorkingDay===!1?d(!1):d(!0),h(C.start),v(C.end),y(l);return}d(!1),h("10:00"),v("18:00"),y(l)},[l,e,s,o,b]),x.useEffect(()=>{e||y(null)},[e]),x.useEffect(()=>{c(n),_(n)},[n,e]),x.useEffect(()=>{_(l)},[l]);const j=async(N=!0)=>{if(a){g(!0);try{await a(l,u,f,p,!N),t()}catch(k){console.error("Ошибка при сохранении графика:",k)}finally{g(!1)}}};return i.jsx(qt,{open:e,onOpenChange:N=>!N&&t(),children:i.jsxs(Wt,{className:"sm:max-w-[700px]",children:[i.jsxs(Gt,{className:"flex justify-between items-center",children:[i.jsxs(Vt,{className:"text-xl",children:["Настройка графика работы ",i.jsx("span",{className:"text-beauty-500",children:r})]}),i.jsx(ne,{variant:"ghost",size:"icon",onClick:t,children:i.jsx(Oc,{className:"h-4 w-4"})})]}),i.jsx(G1,{type:"single",collapsible:!0,className:"w-full mb-4",children:i.jsxs(Ag,{value:"help-text",children:[i.jsx(Pg,{className:"text-sm hover:no-underline justify-start",children:i.jsx("span",{className:"text-muted-foreground font-normal",children:"Подсказка по настройке графика"})}),i.jsx(Og,{children:i.jsxs("div",{className:"bg-muted rounded p-3 text-sm text-muted-foreground",children:[i.jsx("b",{children:"Как работает настройка графика:"}),i.jsx("br",{}),"Основной график работы специалиста задаётся на неделю (панель управление мастерами) и применяется по умолчанию для всех дней.",i.jsx("br",{}),"Здесь вы можете настроить индивидуальный график для выбранной даты — сделать день рабочим или выходным, изменить время начала и окончания работы.",i.jsx("br",{}),"Кнопка ",i.jsx("b",{children:"«Применить этот график ко всей неделе»"})," изменит только время для всех рабочих дней недели, но не изменит статус выходных — выходные останутся выходными.",i.jsx("br",{}),"Чтобы сделать день выходным или рабочим, используйте переключатель «Рабочий день» для нужной даты.",i.jsx("br",{}),"После сохранения изменений расписание специалиста обновится автоматически."]})})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 my-2",children:[i.jsxs("div",{className:"space-y-4 max-w-[340px] w-full justify-self-center",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Выберите дату"}),i.jsx("div",{className:"calendar-wrapper max-w-[320px] w-full overflow-x-auto",children:i.jsx(Rc,{mode:"single",selected:l,onSelect:N=>N&&c(N),month:w,onMonthChange:_,className:"w-full min-w-[280px] mx-auto border rounded-md",locale:Da})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("h3",{className:"text-lg font-medium",children:["Настройки для ",S,",",i.jsxs("span",{className:"lowercase",children:[" ",E]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-base",children:"Рабочий день"}),i.jsx(Io,{checked:u,onCheckedChange:d})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Начало работы"}),i.jsxs(Tr,{value:f,onValueChange:h,disabled:!u,children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите время"})}),i.jsx(_r,{children:z7.filter(N=>{const[k,C]=N.split(":").map(Number),[T,A]=p.split(":").map(Number),B=k*60+C,R=T*60+A;return B<R}).map(N=>i.jsx(_t,{value:N,children:N},N))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Окончание работы"}),i.jsxs(Tr,{value:p,onValueChange:v,disabled:!u,children:[i.jsx(wr,{children:i.jsx(Ar,{placeholder:"Выберите время"})}),i.jsx(_r,{children:z7.filter(N=>{const[k,C]=N.split(":").map(Number),[T,A]=f.split(":").map(Number),B=T*60+A;return k*60+C>B}).map(N=>i.jsx(_t,{value:N,children:N},N))})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{onClick:()=>j(!0),className:"w-full bg-pink-500 hover:bg-pink-600 text-white",children:"Сохранить для этого дня"}),i.jsx(ne,{onClick:()=>j(!1),variant:"outline",className:"w-full",children:"Применить этот график ко всей неделе"})]})]})]}),i.jsxs(or,{className:"mt-6",children:[i.jsx(ne,{variant:"outline",onClick:t,children:"Отмена"}),i.jsx(ne,{className:"bg-beauty-500 hover:bg-beauty-600",onClick:()=>j(!0),disabled:m,children:"Сохранить изменения"})]})]})})},tot=(e,t)=>{const r=[];let[n,a]=e.split(":").map(Number);const[s,o]=t.split(":").map(Number);for(;n<s||n===s&&a<o;)r.push(`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`),a+=30,a>=60&&(n+=1,a-=60);return r},rot=()=>{const[e,t]=x.useState(new Date),[r,n]=x.useState("day"),[a,s]=x.useState("all"),[o,l]=x.useState(!1),[c,u]=x.useState(null),{currentStudio:d}=Ba(),{specialists:f,fetchSpecialists:h,fetchSpecialistsByStudioId:p,overrides:v,loadOverrides:m}=Oa(),{appointments:g,loading:b,fetchAppointments:y}=qu(),[w,_]=x.useState(!1),[S,E]=x.useState(null),[j,N]=x.useState(!1),[k,C]=x.useState(null);x.useEffect(()=>{(async()=>{if(d!=null&&d.id)try{if(await p(d.id),r==="day"){const I=Me(e,"yyyy-MM-dd");await y({fromDate:I,toDate:I})}else{const I=Vn(e,{weekStartsOn:1}),Q=yf(e,{weekStartsOn:1});await y({fromDate:Me(I,"yyyy-MM-dd"),toDate:Me(Q,"yyyy-MM-dd")})}}catch(I){console.error("Ошибка при загрузке данных:",I),I instanceof Error&&I.message.includes("Доступ к данным студии запрещен")?E("У вас нет доступа к данным этой студии"):E("Ошибка при загрузке данных расписания")}})()},[d==null?void 0:d.id,e,r,p,y]);const T=x.useMemo(()=>f.map(Z=>{const I=v[Z.id]||[],Q={};return I.forEach(ve=>{Q[ve.date]={start:ve.start_time||"00:00",end:ve.end_time||"00:00",isWorkingDay:ve.is_working_day}}),{...Z,workingHours:Q}}),[f,v]),A=()=>{t(bn(e,1))},B=()=>{t(tf(e,1))},R=()=>{t(bn(e,7))},P=()=>{t(tf(e,7))},D=(Z,I)=>{const Q=Me(I,"yyyy-MM-dd"),ve=Z.workingHours;if(ve&&ve[Q])return ve[Q];const z=Me(I,"EEEE").toLowerCase();if(Z.work_schedule&&Z.work_schedule[z]){const we=Z.work_schedule[z];return"isWorkingDay"in we&&we.isWorkingDay===!1?{start:"00:00",end:"00:00",isWorkingDay:!1}:{...we,isWorkingDay:"isWorkingDay"in we?we.isWorkingDay:!0}}return!Z.work_schedule||!Z.work_schedule[z]?{start:"00:00",end:"00:00",isWorkingDay:!1}:Z.work_hours?Z.work_hours:{start:"09:00",end:"18:00",isWorkingDay:!0}},U=x.useMemo(()=>{const Z=T.map(ve=>D(ve,e)).filter(ve=>"isWorkingDay"in ve?ve.isWorkingDay!==!1:!0);if(!Z.length)return[];let I=Z[0].start,Q=Z[0].end;for(const ve of Z)ve.start<I&&(I=ve.start),ve.end>Q&&(Q=ve.end);return tot(I,Q)},[T,e]),M=x.useMemo(()=>{if(r==="day")return Me(e,"d MMMM yyyy, EEEE");{const Z=Vn(e,{weekStartsOn:1}),I=yf(e,{weekStartsOn:1});return`${Me(Z,"dd.MM")} - ${Me(I,"dd.MM, yyyy")}`}},[e,r]);Me(e,"LLLL yyyy");const F=x.useMemo(()=>{if(r!=="week")return[];const Z=Vn(e,{weekStartsOn:1}),I=[];let Q=Z;for(let ve=0;ve<7;ve++)I.push({short:Me(Q,"EEEEEE"),full:Me(Q,"d.MM"),date:Q}),Q=bn(Q,1);return I},[e,r]),K=Z=>{const I=Z?T.find(Q=>Q.id===Z):a!=="all"?T.find(Q=>Q.id===a):null;I?(u(I),l(!0)):alert("Выберите специалиста для настройки графика")},X=async(Z,I,Q,ve,z)=>{console.log("[handleSaveSchedule] Начало сохранения:",{date:Me(Z,"yyyy-MM-dd"),isWorkingDay:I,startTime:Q,endTime:ve,applyToWeek:z,selectedSpecialist:c==null?void 0:c.id});try{if(!c||!c.id){console.error("Не выбран специалист для обновления графика.");return}const we=c.id,Re=Oa.getState(),{overrides:Pe,addOverride:De,updateOverride:Ne,fetchSpecialists:J,loadOverrides:Y}=Re,ae=I?Q:null,ge=I?ve:null;if(console.log("[handleSaveSchedule] Параметры сохранения:",{specialistId:we,modalStartTime:ae,modalEndTime:ge,currentOverrides:Pe[we]}),z){console.log("[handleSaveSchedule] Применение ко всей неделе");const Se=Vn(Z,{weekStartsOn:1}),te=Re.overrides[we]||[];for(let me=0;me<7;me++){const ke=bn(Se,me),he=Me(ke,"yyyy-MM-dd"),et=Me(ke,"EEEE").toLowerCase(),nt=te.find(le=>le.date===he);console.log("[handleSaveSchedule] Обработка дня недели:",{dayToUpdate:he,dayOfWeekName:et,existing:nt==null?void 0:nt.id});let Oe,Ye,ye;if(nt?Oe=nt.is_working_day:Oe=!!(c.work_schedule?c.work_schedule[et]:null),Ye=Oe?ae:null,ye=Oe?ge:null,nt)console.log("[handleSaveSchedule] Обновление существующего override:",{id:nt.id,dateString:he,dayStartTime:Ye,dayEndTime:ye,dayIsWorking:Oe}),await Ne(we,{...nt,start_time:Ye,end_time:ye,is_working_day:Oe});else try{console.log("[handleSaveSchedule] Создание нового override:",{dateString:he,dayStartTime:Ye,dayEndTime:ye,dayIsWorking:Oe}),await De(we,{staff_id:we,date:he,start_time:Ye,end_time:ye,is_working_day:Oe})}catch(le){if(console.error("[handleSaveSchedule] Ошибка при добавлении override:",le),(le instanceof Error?le.message:String(le)).includes("duplicate key")){console.log("[handleSaveSchedule] Обработка дубликата ключа"),await Y(we);const Ie=(Oa.getState().overrides[we]||[]).find(it=>it.date===he);Ie?(console.log("[handleSaveSchedule] Обновление после дубликата:",Ie.id),await Ne(we,{...Ie,start_time:Ye,end_time:ye,is_working_day:Oe})):console.warn("Не удалось найти override для обновления после ошибки дубликата",{dateString:he})}else throw console.error("Ошибка при добавлении override",{dateString:he,error:le}),le}}}else{console.log("[handleSaveSchedule] Применение к одному дню");const Se=Me(Z,"yyyy-MM-dd"),me=(Re.overrides[we]||[]).find(ke=>ke.date===Se);if(console.log("[handleSaveSchedule] Обработка одного дня:",{dateString:Se,existing:me==null?void 0:me.id,modalStartTime:ae,modalEndTime:ge,isWorkingDay:I}),me)console.log("[handleSaveSchedule] Обновление существующего override для одного дня:",me.id),await Ne(we,{...me,start_time:ae,end_time:ge,is_working_day:I});else try{console.log("[handleSaveSchedule] Создание нового override для одного дня"),await De(we,{staff_id:we,date:Se,start_time:ae,end_time:ge,is_working_day:I})}catch(ke){if(console.error("[handleSaveSchedule] Ошибка при добавлении override (один день):",ke),(ke instanceof Error?ke.message:String(ke)).includes("duplicate key")){console.log("[handleSaveSchedule] Обработка дубликата ключа (один день)"),await Y(we);const nt=(Oa.getState().overrides[we]||[]).find(Oe=>Oe.date===Se);nt?(console.log("[handleSaveSchedule] Обновление после дубликата (один день):",nt.id),await Ne(we,{...nt,start_time:ae,end_time:ge,is_working_day:I})):console.warn("Не удалось найти override для обновления после ошибки дубликата (один день)",{dateString:Se})}else throw console.error("Ошибка при добавлении override (один день)",{dateString:Se,error:ke}),ke}}console.log("[handleSaveSchedule] Сохранение завершено, закрываем модальное окно"),l(!1),await Y(we),await J(),console.log("[handleSaveSchedule] Данные обновлены")}catch(we){console.error("[handleSaveSchedule] Ошибка при сохранении графика:",we),alert("Не удалось обновить график работы специалиста.")}},O=Z=>{if(!Z)return"";if(/^\d+$/.test(Z))return`${Z.padStart(2,"0")}:00`;if(/^\d{1,2}:\d{2}$/.test(Z)){const[I,Q]=Z.split(":");return`${I.padStart(2,"0")}:${Q}`}return Z.replace(/:\d{2}$/,"")},W=(Z,I)=>{const Q=O(Z),ve=Me(e,"yyyy-MM-dd"),z=ee.filter(we=>String(we.specialist_id)===String(I.id)).map(we=>({...we,start_time:we.start_time||we.time,end_time:we.end_time}));console.log("[StaffSchedule] Записи на выбранную дату для мастера:",{masterName:I.name||I.full_name,masterId:I.id,date:ve,existingAppointments:z,allAppointments:g}),C({date:e,time:Q,specialistId:I.id,specialistName:I.name||I.full_name||"",existingAppointments:z}),N(!0)},L=async Z=>{try{const{appointmentService:I}=await qo(async()=>{const{appointmentService:we}=await Promise.resolve().then(()=>PG);return{appointmentService:we}},void 0);if(console.log(`[ЗАПИСЬ] Проверка доступности специалиста ID=${Z.specialistId}, дата=${Z.date}, время=${Z.time}`),!await I.checkSpecialistAvailability(Z.specialistId,Z.date,Z.time,Z.duration)){console.error(`[ЗАПИСЬ] Специалист недоступен в выбранное время: ID=${Z.specialistId}, дата=${Z.date}, время=${Z.time}`),Ae({title:"Время недоступно",description:"Выбранное время уже занято другой записью или выходит за рамки рабочего времени специалиста. Пожалуйста, выберите другое время.",variant:"destructive"});return}console.log("[ЗАПИСЬ] Создание новой записи с данными:",{client_id:Z.clientId,client_name:Z.clientName,client_phone:Z.clientPhone,client_email:Z.clientEmail,specialist_id:Z.specialistId,service_id:Z.serviceId,date:Z.date,time:Z.time});const ve=await I.createAppointment({client_id:Z.clientId,client_name:Z.clientName,client_phone:Z.clientPhone||"",client_email:Z.clientEmail||"",specialist_id:Z.specialistId,service_id:Z.serviceId,date:Z.date,time:Z.time,notes:""});console.log(`[ЗАПИСЬ] Запись успешно создана с ID=${ve.id}`);const z=Z.date;await y({fromDate:z,toDate:z}),N(!1),C(null),Ae({title:"Запись успешно создана",description:`Запись на ${Z.date} ${Z.time} успешно добавлена!`,variant:"default"})}catch(I){console.error("Ошибка при создании записи:",I);let Q="Ошибка при создании записи. ";I instanceof Error?Q+=I.message:Q+="Пожалуйста, проверьте данные и попробуйте еще раз.",Ae({title:"Ошибка",description:Q,variant:"destructive"})}},H=x.useMemo(()=>g.map(Z=>({...Z,start_time:O(Z.start_time),end_time:O(Z.end_time)})),[g]),ee=x.useMemo(()=>{const Z=H.filter(I=>{const Q=new Date(I.date);return Ra(Q,e)});return a==="all"?Z:Z.filter(I=>String(I.specialist_id)===a)},[H,e,a]),q=()=>{if(a!=="all"){const Z=T.find(I=>I.id===a);Z?(C({date:e,time:"10:00",specialistId:a,specialistName:(Z==null?void 0:Z.full_name)||(Z==null?void 0:Z.name)||"",existingAppointments:ee.filter(I=>String(I.specialist_id)===String(a))}),N(!0)):(C({date:e,time:"10:00",specialistId:"",specialistName:"",existingAppointments:[]}),N(!0))}};return i.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[S&&i.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Ошибка доступа"}),i.jsx("div",{className:"mt-2 text-sm text-red-700",children:i.jsx("p",{children:S})})]}),i.jsx("div",{className:"ml-auto pl-3",children:i.jsx("div",{className:"-mx-1.5 -my-1.5",children:i.jsxs("button",{type:"button",className:"inline-flex bg-red-50 rounded-md p-1.5 text-red-500 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-red-50 focus:ring-red-600",onClick:()=>E(null),children:[i.jsx("span",{className:"sr-only",children:"Закрыть"}),i.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})})]})}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[i.jsx(ne,{variant:"outline",size:"icon",onClick:r==="day"?B:P,children:i.jsx(_v,{className:"h-5 w-5"})}),r==="day"&&i.jsxs(pi,{open:w,onOpenChange:_,children:[i.jsx(gi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:"w-[280px] justify-start text-left font-normal",children:[i.jsx(Gp,{className:"mr-2 h-4 w-4"}),M]})}),i.jsx(Ks,{className:"w-auto p-0",children:i.jsx(Rc,{mode:"single",selected:e,onSelect:Z=>{Z&&t(Z),_(!1)},initialFocus:!0,locale:Da})})]}),r==="week"&&i.jsx("div",{className:"w-[280px] text-center font-normal mx-2",children:M}),i.jsx(ne,{variant:"outline",size:"icon",onClick:r==="day"?A:R,children:i.jsx(Ou,{className:"h-5 w-5"})}),i.jsx("div",{className:"w-full sm:w-auto min-w-[180px]",children:i.jsxs(Tr,{value:a,onValueChange:s,children:[i.jsx(wr,{className:"h-11 text-base focus:ring-2 focus:ring-beauty-500",children:i.jsx(Ar,{placeholder:"Все мастера"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"all",children:"Все мастера"}),T.map(Z=>i.jsx(_t,{value:Z.id,children:Z.full_name||Z.name},Z.id))]})]})})]}),i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[i.jsx(fa,{value:r,onValueChange:Z=>n(Z),className:"w-auto",children:i.jsxs(ta,{children:[i.jsx(Tt,{value:"day",children:"День"}),i.jsx(Tt,{value:"week",children:"Неделя"})]})}),i.jsxs(ne,{variant:"outline",onClick:()=>a!=="all"?K(a):K(),className:"h-11 text-base focus:ring-2 focus:ring-beauty-500",disabled:a==="all"&&T.length>1,title:a==="all"&&T.length>1?"Выберите мастера для настройки графика":"Настроить график",children:[i.jsx(jv,{className:"mr-2 h-5 w-5"}),"Настроить график"]}),i.jsxs(ne,{onClick:q,className:"h-11 text-base bg-beauty-500 hover:bg-beauty-600 text-white focus:ring-2 focus:ring-beauty-500 focus:ring-offset-2",children:[i.jsx(ls,{className:"mr-2 h-5 w-5"}),"Добавить запись"]})]})]}),i.jsxs("div",{className:"overflow-x-auto",children:[r==="day"&&i.jsx(Bae,{specialists:T.filter(Z=>a==="all"||Z.id===a),appointments:ee,timeSlots:U,selectedDate:e,onCellClick:W,getWorkTimeForDate:D,viewMode:r}),r==="week"&&i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"sticky left-0 z-10 bg-gray-50 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 w-48",children:"МАСТЕР"}),F.map(Z=>i.jsxs("th",{className:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900",children:[i.jsx("div",{children:Z.short.toUpperCase()}),i.jsx("div",{children:Z.full})]},Z.short+Z.full))]})}),i.jsxs("tbody",{children:[T.filter(Z=>a==="all"||Z.id===a).map(Z=>i.jsxs("tr",{className:"divide-x divide-gray-200 border-b",children:[i.jsxs("td",{className:"px-2 py-2 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-white z-10 min-w-[110px] w-[110px] align-top",children:[i.jsx("div",{className:"font-semibold",children:Z.full_name||Z.name}),i.jsx("div",{className:"text-xs text-gray-500",children:Z.specialization})]}),F.map(I=>{const Q=D(Z,I.date),ve="isWorkingDay"in Q?Q.isWorkingDay!==!1:!0,z=H.filter(we=>{const Re=Me(I.date,"yyyy-MM-dd");return String(we.specialist_id)===String(Z.id)&&we.date===Re});return i.jsx("td",{className:Ue("px-2 py-2 text-xs text-gray-700 align-top min-w-[100px] w-[100px]",!ve&&"bg-gray-100 text-gray-400 text-center",ve&&z.length===0&&"text-center",ve&&z.length>0&&"bg-beauty-50/50 border-l border-beauty-200"),children:ve?z.length>0?i.jsx("div",{className:"space-y-1.5 px-0.5",children:z.sort((we,Re)=>we.start_time.localeCompare(Re.start_time)).map(we=>i.jsxs("div",{className:"p-1.5 bg-beauty-100 rounded-md text-beauty-800 text-xs leading-tight shadow-sm mb-1.5 relative border border-beauty-200",title:`${we.start_time} - ${we.client_name||"Клиент"} (${typeof we.service=="object"&&we.service!==null?we.service.name:String(we.service)})`,children:[i.jsxs("div",{className:"font-semibold flex justify-between items-center",children:[i.jsx("span",{children:we.start_time}),we.status&&i.jsxs(En,{children:[i.jsx(Nn,{asChild:!0,children:i.jsx("span",{className:Ue("w-2.5 h-2.5 rounded-full cursor-default",we.status==="confirmed"&&"bg-beauty-600",we.status==="completed"&&"bg-green-600",we.status==="pending"&&"bg-yellow-500",we.status==="cancelled"&&"bg-gray-400")})}),i.jsx(yn,{children:i.jsx("p",{children:we.status==="confirmed"?"Подтверждено":we.status==="completed"?"Выполнено":we.status==="pending"?"Ожидается":we.status==="cancelled"?"Отменено":we.status})})]})]}),i.jsx("div",{className:"truncate font-medium",children:we.client_name||"Клиент"}),i.jsx("div",{className:"truncate italic text-[11px] text-beauty-600",children:typeof we.service=="object"&&we.service!==null?we.service.name:String(we.service)})]},we.id))}):i.jsx("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 text-sm",children:i.jsxs("div",{children:[Q.start," - ",Q.end]})}):i.jsx("div",{className:"flex items-center justify-center h-full text-xs",children:"Выходной"})},`${Z.id}-${I.short}`)})]},Z.id)),T.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:F.length+1,className:"text-center py-8 text-gray-500",children:"Нет специалистов в этой студии"})})]})]})]}),r==="day"&&i.jsx(qe,{children:i.jsxs(Ge,{className:"pt-6",children:[i.jsxs("h3",{className:"text-xl font-semibold mb-4",children:["Записи на ",Me(e,"d MMMM yyyy")]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:b?i.jsx("div",{className:"text-gray-500",children:"Загрузка..."}):ee.length===0?i.jsx("div",{className:"text-gray-500",children:"Нет записей"}):ee.map(Z=>{var Q,ve,z;const I=T.find(we=>we.id===Z.specialist_id);return i.jsxs(qe,{className:"overflow-hidden",children:[i.jsxs("div",{className:`flex items-center justify-between p-4 border-b ${Z.status==="confirmed"?"bg-pink-50":Z.status==="completed"?"bg-green-50":Z.status==="pending"?"bg-amber-50":"bg-gray-50"}`,children:[i.jsx("div",{className:"flex items-center",children:i.jsxs("span",{className:"text-sm font-medium",children:[Z.start_time," - ",Z.end_time]})}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${Z.status==="confirmed"?"bg-pink-100 text-pink-800":Z.status==="completed"?"bg-green-100 text-green-800":Z.status==="pending"?"bg-amber-100 text-amber-800":"bg-gray-100 text-gray-800"}`,children:Z.status==="confirmed"?"Подтверждено":Z.status==="completed"?"Выполнено":Z.status==="pending"?"Ожидается":"Отменено"}),Z.appointment_number&&i.jsxs("span",{className:"ml-3 text-xs text-gray-500 font-medium",children:["#",Z.appointment_number]})]})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h4",{className:"font-medium",children:Z.client_name||((Q=Z.client)==null?void 0:Q.name)}),i.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[i.jsxs("div",{children:["Услуга: ",typeof Z.service=="object"?(ve=Z.service)==null?void 0:ve.name:Z.service]}),i.jsxs("div",{children:["Длительность: ",Z.duration||((z=Z.service)==null?void 0:z.duration)||0," мин."]}),i.jsxs("div",{className:"mt-2 flex justify-between",children:[i.jsxs("div",{children:["Мастер: ",(I==null?void 0:I.full_name)||(I==null?void 0:I.name)||"Не назначен"]}),i.jsxs("div",{className:"font-medium",children:[Z.final_price??Z.price," ₽"]})]})]})]})]},Z.id)})})]})}),o&&c&&i.jsx(Uae,{open:o,onClose:()=>l(!1),specialistName:(c==null?void 0:c.name)||(c==null?void 0:c.full_name)||"",initialDate:e,onSave:X,workingHours:Object.fromEntries((Oa.getState().overrides[c==null?void 0:c.id]||[]).map(Z=>[Z.date,{start:Z.is_working_day===!1?"00:00":Z.start_time||"10:00",end:Z.is_working_day===!1?"00:00":Z.end_time||"18:00",isWorkingDay:Z.is_working_day!==!1}])),workSchedule:c==null?void 0:c.work_schedule}),j&&k&&(console.log("[StaffSchedule] existingAppointments для AppointmentModal:",k==null?void 0:k.existingAppointments),i.jsx(zM,{open:j,onClose:()=>{N(!1),C(null)},selectedDate:(k==null?void 0:k.date)||e,selectedTime:k==null?void 0:k.time,specialistId:k==null?void 0:k.specialistId,specialistName:k==null?void 0:k.specialistName,existingAppointments:(k==null?void 0:k.existingAppointments)||[],onSave:L}))]})};function not(){const e=Kn(),{currentStudio:t}=Ba(),[r,n]=x.useState("");x.useState("rating"),x.useState("all");const[a,s]=x.useState("schedule"),[o,l]=x.useState({}),[c,u]=x.useState({}),[d,f]=x.useState({}),{specialists:h,filteredSpecialists:p,fetchSpecialists:v,fetchSpecialistsByStudioId:m,filterSpecialistsByName:g,filterSpecialistsBySpecialization:b,resetFilters:y,deleteSpecialist:w,loading:_,error:S,clearError:E,filterSpecialistsByStudio:j}=Oa();x.useEffect(()=>{t!=null&&t.id?m(t.id):v()},[v,m,t==null?void 0:t.id]),x.useEffect(()=>{t!=null&&t.id&&h.length>0&&j(t.id)},[h,t==null?void 0:t.id,j]),x.useEffect(()=>{async function A(){if(!p.length)return;const B={},R={};for(const P of p){const D=await Jte.getReviewsBySpecialist(P.id),U=Array.isArray(D)?D:[];B[P.id]=U,R[P.id]={avg:U.length?U.reduce((M,F)=>M+(F.rating||0),0)/U.length:0,count:U.length}}l(B),u(R)}A()},[p]),x.useEffect(()=>{async function A(){if(!p.length)return;const B={};for(const R of p){const{data:P}=await es.getServicesBySpecialistId(R.id);B[R.id]=(P||[]).filter(D=>D.is_active)}f(B)}A()},[p]);const N=A=>{n(A),g(A)},k=()=>{e("/staff/new")},C=A=>{e(`/staff/edit/${A}`)},T=async A=>{try{await w(A),Ae({title:"Специалист удален",description:"Специалист успешно удален из системы."})}catch{Ae({title:"Ошибка",description:"Не удалось удалить специалиста. Попробуйте позже.",variant:"destructive"})}};return _&&h.length===0?i.jsxs("div",{className:"mt-6",children:[i.jsx(jl,{className:"h-12 w-full mb-4"}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(A=>i.jsx(jl,{className:"h-64 w-full"},A))})]}):S?i.jsxs(i.Fragment,{children:[i.jsxs(Rf,{variant:"destructive",className:"mt-6",children:[i.jsx(rc,{className:"h-4 w-4"}),i.jsx(Df,{children:S})]}),i.jsx("button",{onClick:()=>{E(),v()},className:"mt-4 px-4 py-2 bg-beauty-600 text-white rounded-md hover:bg-beauty-700 transition-colors",children:"Попробовать снова"})]}):i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-3xl font-bold mb-8 beauty-gradient-text",children:"Информация по специалистам"}),h.length===0?i.jsx(tP,{specialists:[],onEdit:C,onDelete:T,onAddMasterTab:()=>s("add")}):i.jsxs(fa,{value:a,onValueChange:s,className:"w-full",children:[i.jsxs(ta,{className:"mb-6",children:[i.jsx(Tt,{value:"schedule",children:"Расписание"}),i.jsx(Tt,{value:"specialists",children:"Специалисты"}),i.jsx(Tt,{value:"add",children:"Добавить мастера"})]}),i.jsx(Ft,{value:"schedule",children:i.jsx(qe,{children:i.jsx(Ge,{className:"pt-6",children:i.jsx(rot,{})})})}),i.jsxs(Ft,{value:"specialists",children:[i.jsx("div",{className:"mb-4",children:i.jsx(eot,{searchQuery:r,onSearchChange:N,onAddNew:k,className:"max-w-xs w-full"})}),_&&h.length>0&&i.jsx("div",{className:"text-center py-2 text-beauty-600",children:"Обновление данных..."}),i.jsx(tP,{specialists:p,onEdit:C,onDelete:T,reviews:o,ratings:c,servicesByStaffId:d,onAddMasterTab:()=>s("add")})]}),i.jsx(Ft,{value:"add",children:i.jsx(qe,{children:i.jsxs(Ge,{className:"py-12 flex flex-col items-center justify-center",children:[i.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Добавление нового мастера"}),i.jsx("p",{className:"text-muted-foreground mb-6 text-center max-w-md",children:"Здесь вы можете добавить нового мастера в систему, указав его данные и специализацию"}),i.jsxs(ne,{onClick:k,className:"bg-beauty-600 hover:bg-beauty-700 text-white",children:[i.jsx(ls,{className:"h-4 w-4 mr-2"}),"Добавить нового мастера"]})]})})})]})]})}const aot=()=>{const e=nd();return x.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};Xa.locale("ru");const sot=(e,t)=>{const r=[];if(!e||!t||!e.includes(":")||!t.includes(":"))return console.warn("generateTimeSlots: Неверные параметры start или end",{start:e,end:t}),r;let[n,a]=e.split(":").map(Number);const[s,o]=t.split(":").map(Number);for(;n<s||n===s&&a<o;)r.push(`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`),a+=30,a>=60&&(n+=1,a-=60);return r},iot=({specialistId:e})=>{const[t,r]=x.useState(new Date),[n,a]=x.useState("day"),[s,o]=x.useState(!1),{userRole:l,token:c,specialist:u,user:d,setUserRole:f}=ei(),{specialists:h,fetchSpecialists:p,overrides:v,loadOverrides:m,updateOverride:g,addOverride:b}=Oa(),y=x.useMemo(()=>e&&h.length>0?h.find(q=>String(q.id)===String(e)):l==="specialist"&&h.length>0&&(u!=null&&u.id)?h.find(q=>String(q.id)===String(u.id)):null,[l,h,e,u]),{appointments:w,loading:_,fetchAppointments:S,createAppointment:E}=qu(),[j,N]=x.useState(!1),[k,C]=x.useState(!1),[T,A]=x.useState(null),B=Kn();x.useEffect(()=>{p()},[p]),x.useEffect(()=>{const q=e||(l==="specialist"&&h.length>0?String(h[0].id):null);q&&m(String(q))},[e,l,h,m]),x.useEffect(()=>{if(y){const q=String(y.id);if(n==="day"){const Z=Me(t,"yyyy-MM-dd");S({fromDate:Z,toDate:Z,specialistId:q})}else{const Z=Vn(t,{weekStartsOn:1}),I=yf(t,{weekStartsOn:1});S({fromDate:Me(Z,"yyyy-MM-dd"),toDate:Me(I,"yyyy-MM-dd"),specialistId:q})}}},[y,t,S,n]),x.useEffect(()=>{l==="specialist"&&!(u!=null&&u.id)&&(d!=null&&d.id)&&Ru.getById(d.id).then(q=>{q&&ei.setState({specialist:q})})},[l,u,d]),x.useEffect(()=>{!d&&c&&ue.auth.getUser().then(({data:q})=>{q!=null&&q.user&&ei.setState({user:q.user})})},[d,c]);const R=()=>r(bn(t,1)),P=()=>r(tf(t,1)),D=()=>r(bn(t,7)),U=()=>r(tf(t,7)),M=(q,Z)=>{var Re;const I=Me(Z,"yyyy-MM-dd"),ve=(v[String(q.id)]||[]).find(Pe=>Pe.date===I);if(ve)return{start:ve.start_time||"00:00",end:ve.end_time||"00:00",isWorkingDay:ve.is_working_day!==!1};const z=Me(Z,"EEEE").toLowerCase(),we=(Re=q.work_schedule)==null?void 0:Re[z];if(we){const Pe=Object.prototype.hasOwnProperty.call(we,"isWorkingDay")?!!we.isWorkingDay:!0;return{start:we.start||"00:00",end:we.end||"00:00",isWorkingDay:Pe}}if(q.work_hours){const Pe=q.work_hours,De=Object.prototype.hasOwnProperty.call(Pe,"isWorkingDay")?!!Pe.isWorkingDay:!0;return{start:Pe.start||"09:00",end:Pe.end||"18:00",isWorkingDay:De}}else return{start:"09:00",end:"18:00",isWorkingDay:!0}},F=x.useMemo(()=>{if(!y)return[];const q=M(y,t);return console.log("workTime",q),!q||!q.isWorkingDay?[]:sot(q.start,q.end)},[y,t,v]);x.useMemo(()=>y?w.filter(q=>String(q.specialist_id)===String(y.id)&&Me(new Date(q.date),"yyyy-MM-dd")===Me(t,"yyyy-MM-dd")):[],[w,y,t]);const K=x.useMemo(()=>{if(n==="day")return Xa(t).format("D MMMM, dddd");{const q=Vn(t,{weekStartsOn:1}),Z=yf(t,{weekStartsOn:1});return`${Xa(q).format("DD.MM")} - ${Xa(Z).format("DD.MM, YYYY")}`}},[t,n]),X=()=>{y&&o(!0)},O=async(q,Z,I,Q)=>{if(!y)return;const ve=String(y.id),z=Me(q,"yyyy-MM-dd"),Re=(v[ve]||[]).find(Pe=>Pe.date===z);Re?await g(ve,{...Re,start_time:I,end_time:Q,is_working_day:Z}):await b(ve,{staff_id:ve,date:z,start_time:I,end_time:Q,is_working_day:Z}),await m(ve),await p(),r(new Date(t)),o(!1)},W=(q,Z)=>{A({date:t,time:q,specialistId:String(Z.id),specialistName:Z.full_name||Z.name||""}),C(!0)},L=async q=>{if(y)try{const{appointmentService:Z}=await qo(async()=>{const{appointmentService:Q}=await Promise.resolve().then(()=>PG);return{appointmentService:Q}},void 0);if(!await Z.checkSpecialistAvailability(q.specialistId,q.date,q.time,q.duration)){alert("Выбранное время уже занято другой записью или выходит за рамки рабочего времени специалиста. Пожалуйста, выберите другое время.");return}await E({client_id:q.clientId,client_name:q.clientName,client_phone:q.clientPhone||"",client_email:q.clientEmail||"",specialist_id:q.specialistId,service_id:q.serviceId,date:q.date,time:q.time,notes:""}),await S({fromDate:Me(t,"yyyy-MM-dd"),toDate:Me(t,"yyyy-MM-dd"),specialistId:y.id}),C(!1),A(null),alert(`Запись успешно создана на ${q.date} ${q.time}`)}catch(Z){console.error("Ошибка при создании записи:",Z),alert("Ошибка при создании записи. Пожалуйста, попробуйте еще раз.")}};if(!y)return i.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-gray-500",children:[i.jsx("div",{className:"text-lg font-semibold mb-2",children:"Специалист не найден. Проверьте профиль или обратитесь к администратору."}),i.jsx("pre",{className:"bg-gray-100 p-2 rounded text-xs text-left max-w-2xl overflow-x-auto",children:JSON.stringify({userRole:l,authSpecialist:u,user:d,specialists:h},null,2)})]});const ee=M(y,t).isWorkingDay;return i.jsxs(i.Fragment,{children:[i.jsx(od,{}),i.jsxs("div",{className:"flex items-center mb-6",children:[i.jsxs(ne,{variant:"ghost",className:"mr-4",onClick:()=>B("/specialist/dashboard"),children:[i.jsx(_v,{className:"h-5 w-5 mr-1"}),"Назад"]}),i.jsx("h1",{className:"text-3xl font-bold text-beauty-600",children:"Моё расписание"})]}),i.jsxs("div",{className:"p-4 md:p-6 bg-background rounded-lg shadow-lg",children:[i.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-center gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ne,{variant:"outline",size:"icon",onClick:n==="day"?P:U,"aria-label":n==="day"?"Предыдущий день":"Предыдущая неделя",children:i.jsx(_v,{className:"h-5 w-5"})}),i.jsxs(pi,{open:j,onOpenChange:N,children:[i.jsx(gi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:"w-[240px] sm:w-[280px] justify-start text-left font-normal",children:[i.jsx(Gp,{className:"mr-2 h-4 w-4"}),K]})}),i.jsx(Ks,{className:"w-auto p-0",children:i.jsx(Rc,{mode:"single",selected:t,onSelect:q=>{q&&r(q),N(!1)},initialFocus:!0,locale:Da,disabled:q=>q<new Date(new Date().setDate(new Date().getDate()-365))||q>new Date(new Date().setDate(new Date().getDate()+365))})})]}),i.jsx(ne,{variant:"outline",size:"icon",onClick:n==="day"?R:D,"aria-label":n==="day"?"Следующий день":"Следующая неделя",children:i.jsx(Ou,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(fa,{value:n,onValueChange:q=>a(q),children:i.jsxs(ta,{className:"grid w-full grid-cols-2",children:[i.jsx(Tt,{value:"day",children:"День"}),i.jsx(Tt,{value:"week",children:"Неделя"})]})}),i.jsxs(ne,{variant:"outline",onClick:()=>{if(console.log("Клик по Настроить график",y),!y){console.warn("Нет currentSpecialist, кнопка неактивна");return}X()},disabled:!y,children:[i.jsx(jv,{className:"mr-2 h-4 w-4"}),"Настроить график"]}),i.jsxs(ne,{onClick:()=>{if(console.log("Клик по Добавить запись",y,ee),!y||!ee){console.warn("Нет currentSpecialist или нерабочий день, кнопка неактивна");return}W(Me(new Date,"HH:mm"),y)},disabled:!y||!ee,children:[i.jsx(ls,{className:"mr-2 h-4 w-4"}),"Добавить запись"]})]})]}),n==="day"&&i.jsxs(i.Fragment,{children:[i.jsx(Bae,{specialists:[y],appointments:w,timeSlots:F,selectedDate:t,onCellClick:W,getWorkTimeForDate:M,viewMode:"day"}),i.jsx(qe,{children:i.jsxs(Ge,{className:"pt-6",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:`Записи на ${Xa(t).locale("ru").format("D MMMM YYYY, dddd")}`}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:w.filter(q=>Me(new Date(q.date),"yyyy-MM-dd")===Me(t,"yyyy-MM-dd")).length===0?i.jsx("div",{className:"text-gray-500",children:"Нет записей"}):w.filter(q=>Me(new Date(q.date),"yyyy-MM-dd")===Me(t,"yyyy-MM-dd")).map(q=>{var Z;return i.jsxs(qe,{className:"overflow-hidden",children:[i.jsx("div",{className:`flex items-center justify-between p-4 border-b ${q.status==="confirmed"?"bg-pink-50":q.status==="completed"?"bg-green-50":q.status==="pending"?"bg-amber-50":"bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:`${Xa(`${q.date}T${q.start_time}`).format("HH:mm")} - ${Xa(`${q.date}T${q.end_time}`).format("HH:mm")}`}),i.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full ${q.status==="confirmed"?"bg-pink-100 text-pink-800":q.status==="completed"?"bg-green-100 text-green-800":q.status==="pending"?"bg-amber-100 text-amber-800":"bg-gray-100 text-gray-800"}`,children:q.status==="confirmed"?"Подтверждено":q.status==="completed"?"Выполнено":q.status==="pending"?"Ожидается":"Отменено"})]})}),i.jsxs("div",{className:"p-4",children:[i.jsx("h4",{className:"font-medium",children:q.client_name}),i.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[i.jsxs("div",{children:["Услуга: ",typeof q.service=="object"?(Z=q.service)==null?void 0:Z.name:q.service]}),i.jsxs("div",{className:"mt-2 flex justify-between",children:[i.jsxs("div",{children:["Мастер: ",y.full_name||y.name||"Не назначен"]}),i.jsx("div",{className:"font-medium",children:q.price?`${q.price} ₽`:""})]})]})]})]},q.id)})})]})})]}),n==="week"&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky left-0 bg-gray-50 z-10 min-w-[110px] w-[110px]",children:"Мастер"}),Array.from({length:7}).map((q,Z)=>{const I=bn(Vn(t,{weekStartsOn:1}),Z);return i.jsxs("th",{className:"px-1 py-3 min-h-[150px] text-center text-[12px] font-semibold text-gray-700 uppercase tracking-wider min-w-[100px] w-[100px]",children:[i.jsx("div",{className:"leading-tight",children:Xa(I).format("dd")}),i.jsx("div",{className:"leading-tight",children:Xa(I).format("DD.MM")})]},Z)})]})}),i.jsx("tbody",{children:[y].map(q=>i.jsxs("tr",{className:"divide-x divide-gray-200 border-b",children:[i.jsxs("td",{className:"px-2 py-2 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-white z-10 min-w-[110px] w-[110px] align-top",children:[i.jsx("div",{className:"font-semibold",children:q.full_name||q.name}),i.jsx("div",{className:"text-xs text-gray-500",children:q.specialization})]}),Array.from({length:7}).map((Z,I)=>{const Q=bn(Vn(t,{weekStartsOn:1}),I),ve=M(q,Q),z="isWorkingDay"in ve?ve.isWorkingDay!==!1:!0,we=Me(Q,"yyyy-MM-dd"),Re=w.filter(Pe=>String(Pe.specialist_id)===String(q.id)&&Pe.date===we);return i.jsx("td",{className:Ue("px-2 py-2 text-xs text-gray-700 align-top min-w-[100px] w-[100px]",!z&&"bg-gray-100 text-gray-400 text-center",z&&Re.length>0&&"bg-beauty-50/50 border-l border-beauty-200"),children:z?Re.length>0?i.jsx("div",{className:"space-y-1.5 px-0.5",children:Re.sort((Pe,De)=>Pe.start_time.localeCompare(De.start_time)).map(Pe=>i.jsxs("div",{className:"p-1.5 bg-beauty-100 rounded-md text-beauty-800 text-xs leading-tight shadow-sm mb-1.5 relative border border-beauty-200",title:`${Xa(`${Pe.date}T${Pe.start_time}`).format("HH:mm")} - ${Xa(`${Pe.date}T${Pe.end_time}`).format("HH:mm")}`,children:[i.jsxs("div",{className:"font-semibold flex justify-between",children:[i.jsx("span",{children:Xa(`${Pe.date}T${Pe.start_time}`).format("HH:mm")}),Pe.status&&i.jsx("span",{className:Ue("w-2 h-2 rounded-full",Pe.status==="confirmed"&&"bg-beauty-600",Pe.status==="completed"&&"bg-green-600",Pe.status==="pending"&&"bg-yellow-500",Pe.status==="cancelled"&&"bg-gray-400")})]}),i.jsx("div",{className:"truncate font-medium",children:Pe.client_name||"Клиент"}),i.jsx("div",{className:"truncate italic text-[11px] text-beauty-600",children:typeof Pe.service=="object"&&Pe.service!==null?Pe.service.name:String(Pe.service)})]},Pe.id))}):i.jsx("div",{className:"flex items-center justify-center h-full text-gray-300 text-sm",children:"-"}):i.jsx("div",{className:"flex items-center justify-center h-full text-xs",children:"Выходной"})},`${q.id}-${we}`)})]},q.id))})]})})]}),s&&y&&i.jsx(Uae,{open:s,onClose:()=>o(!1),specialistName:y.full_name||y.name||"",initialDate:t,onSave:O,workingHours:Object.fromEntries((v[y.id]||[]).map(q=>[q.date,{start:q.is_working_day===!1?"00:00":q.start_time||"10:00",end:q.is_working_day===!1?"00:00":q.end_time||"18:00",isWorkingDay:q.is_working_day!==!1}])),workSchedule:y.work_schedule}),k&&T&&(console.log("[SpecialistSchedule] existingAppointments для AppointmentModal:",T==null?void 0:T.existingAppointments),i.jsx(zM,{open:k,onClose:()=>{C(!1),A(null)},selectedDate:(T==null?void 0:T.date)||t,selectedTime:T==null?void 0:T.time,specialistId:y==null?void 0:y.id,specialistName:(y==null?void 0:y.name)||(y==null?void 0:y.full_name),existingAppointments:(T==null?void 0:T.existingAppointments)||[],onSave:L}))]})},oot=()=>i.jsxs("div",{className:"container mx-auto py-8",children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Моё расписание"}),i.jsx(iot,{})]}),lot={monday:"Пн",tuesday:"Вт",wednesday:"Ср",thursday:"Чт",friday:"Пт",saturday:"Сб",sunday:"Вс"},cot=()=>{const e=Kn(),[t,r]=x.useState(null),[n,a]=x.useState(null),[s,o]=x.useState(!0),[l,c]=x.useState(null),[u,d]=x.useState(!1),[f,h]=x.useState({}),[p,v]=x.useState([]),[m,g]=x.useState(""),[b,y]=x.useState(null);x.useState([]);const[w,_]=x.useState([]),{services:S,categories:E,fetchServices:j,fetchCategories:N,isLoading:k,getServicesBySpecialist:C,refreshSpecialistServices:T}=Oi();x.useEffect(()=>{async function P(){o(!0),c(null);try{const D=await LG.getCurrentUser();if(!D)throw new Error("Пользователь не найден");const{data:U,error:M}=await ue.from("profiles").select("*").eq("id",D.id).limit(1);if(M||!U||U.length===0)throw new Error("Профиль не найден");const F=U[0];a(F);let K=await Ru.getById(F.id);if(!K&&(K=(await Ru.getAll()).find(W=>W.profile_id===F.id)||null,!K)){c("Мастер не найден. Обратитесь к администратору для привязки вашего профиля к мастеру.");return}r(K)}catch{r(null),a(null),c("Мастер не найден. Проверьте, что ваш профиль привязан к мастеру. Если проблема не решается — обратитесь к администратору.")}finally{o(!1)}}P()},[]),x.useEffect(()=>{j(),N()},[j,N]),x.useEffect(()=>{t&&t.id&&T(String(t.id)).then(P=>{v(P.map(D=>String(D.id)))})},[t]),x.useEffect(()=>{let P=S;b&&(P=P.filter(D=>String(D.category_id)===String(b))),m&&(P=P.filter(D=>D.name.toLowerCase().includes(m.toLowerCase()))),_(P)},[S,b,m]),x.useEffect(()=>{t&&t.work_schedule&&h(t.work_schedule)},[t]);const A=(P,D)=>{h(U=>({...U,[P]:D?{start:"",end:""}:null}))},B=(P,D,U)=>{h(M=>({...M,[P]:{...M[P],[D]:U}}))},R=P=>{p.includes(P)?v(D=>D.filter(U=>U!==P)):v(D=>[...D,P])};return i.jsxs("div",{className:"min-h-screen flex flex-col",children:[i.jsx(od,{}),i.jsx("main",{className:"flex-grow pt-24 pb-12",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[i.jsx("h1",{className:"text-2xl font-bold text-beauty-600",children:"Мой профиль"}),i.jsx(ne,{variant:"outline",onClick:()=>e("/specialist/dashboard"),className:"mt-4 md:mt-0",children:"Вернуться в кабинет"})]}),s?i.jsxs("div",{className:"space-y-4",children:[i.jsx(jl,{className:"h-20 w-full rounded-lg"}),i.jsx(jl,{className:"h-64 w-full rounded-lg"})]}):t&&n?i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(qe,{className:"md:col-span-1",children:[i.jsx(ht,{children:i.jsxs(gt,{className:"flex items-center",children:[i.jsx(Ro,{className:"h-5 w-5 mr-2 text-beauty-500"}),"Фото профиля"]})}),i.jsxs(Ge,{className:"flex flex-col items-center",children:[i.jsx("div",{className:"mb-4 relative",children:i.jsx("img",{src:n.avatar_url||"/placeholder.png",alt:n.full_name||n.first_name+" "+n.last_name,className:"w-32 h-32 rounded-full object-cover border-2 border-beauty-200"})}),i.jsx("p",{className:"font-bold text-xl",children:n.full_name||n.first_name+" "+n.last_name}),i.jsx("p",{className:"text-beauty-600",children:t.specialization||"Специалист"})]})]}),i.jsxs(qe,{className:"md:col-span-2",children:[i.jsx(ht,{children:i.jsx(gt,{children:"Личные данные"})}),i.jsxs(Ge,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"name",children:"ФИО"}),i.jsx($e,{id:"name",placeholder:"Введите ФИО специалиста",value:n.full_name||n.first_name+" "+n.last_name||"",disabled:!0})]}),i.jsxs("div",{children:[i.jsxs(Xe,{htmlFor:"phone",children:["Телефон ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx($e,{id:"phone",placeholder:"+7 (999) 123-45-67",value:t.phone||n.phone||"",disabled:!0})]}),i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"email",children:"Email"}),i.jsx($e,{id:"email",type:"email",placeholder:"Email",value:t.email||n.email||"",disabled:!0})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"specialization",children:"Специализация"}),i.jsx($e,{id:"specialization",placeholder:"Например: Косметолог",value:t.specialization||"",onChange:P=>{r(D=>D?{...D,specialization:P.target.value}:null)}})]}),i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"experienceYears",children:"Опыт работы (лет)"}),i.jsx($e,{id:"experienceYears",type:"number",min:"0",placeholder:"Например: 5",value:t.experience_years||"",onChange:P=>{r(D=>D?{...D,experience_years:parseInt(P.target.value)||0}:null)}})]}),i.jsxs("div",{children:[i.jsx(Xe,{htmlFor:"bio",children:"Биография"}),i.jsx(rn,{id:"bio",placeholder:"Краткое описание специалиста...",value:t.bio||"",onChange:P=>{r(D=>D?{...D,bio:P.target.value}:null)},rows:3})]})]})]}),i.jsxs("div",{className:"space-y-4 mt-8",children:[i.jsx(Xe,{className:"text-sm font-medium",children:"График работы"}),i.jsx("div",{className:"space-y-2 mt-2 border rounded-md p-3",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map((P,D)=>{var U,M;return i.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_auto] items-center gap-2",children:[i.jsx(Hn,{id:`day-${P}`,checked:!!f[P],onCheckedChange:F=>A(P,!!F)}),i.jsx(Xe,{htmlFor:`day-${P}`,className:"text-sm font-normal cursor-pointer w-8 text-admin-badge-foreground",children:lot[P]}),i.jsx($e,{type:"time",value:((U=f[P])==null?void 0:U.start)||"",onChange:F=>B(P,"start",F.target.value),disabled:!f[P],className:"w-24"}),i.jsx($e,{type:"time",value:((M=f[P])==null?void 0:M.end)||"",onChange:F=>B(P,"end",F.target.value),disabled:!f[P],className:"w-24"})]},P)})})]}),i.jsxs("div",{className:"space-y-4 mt-8",children:[i.jsx(Xe,{children:"Услуги специалиста"}),i.jsxs("div",{className:"mt-2 p-4 border rounded-md",children:[i.jsx($e,{placeholder:"Поиск услуг...",value:m,onChange:P=>g(P.target.value),className:"mb-3"}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[i.jsx(ne,{variant:b===null?"default":"outline",size:"sm",onClick:()=>y(null),className:b===null?"bg-admin-badge text-admin-badge-foreground hover:bg-admin-badge/90":"border-admin-badge text-admin-badge-foreground hover:bg-admin-badge/10",children:"Все категории"}),E.map(P=>i.jsx(ne,{variant:b===String(P.id)?"default":"outline",size:"sm",onClick:()=>y(String(P.id)),className:b===String(P.id)?"bg-admin-badge text-admin-badge-foreground hover:bg-admin-badge/90":"border-admin-badge text-admin-badge-foreground hover:bg-admin-badge/10",children:P.name},P.id))]}),i.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:w.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-4",children:"Услуги не найдены"}):w.map(P=>{var D;return i.jsxs("div",{className:"flex items-center space-x-2 p-2 border rounded-md",children:[i.jsx(Hn,{id:`service-${P.id}`,checked:p.includes(String(P.id)),onCheckedChange:()=>R(String(P.id))}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Xe,{htmlFor:`service-${P.id}`,className:"font-medium cursor-pointer text-admin-badge-foreground",children:P.name}),i.jsxs("div",{className:"flex gap-4 mt-1 text-sm text-muted-foreground",children:[i.jsxs("span",{className:"text-admin-badge-foreground",children:[P.price," ₽"]}),i.jsxs("span",{className:"text-admin-badge-foreground",children:[P.duration," мин."]}),i.jsx("span",{className:"text-admin-badge-foreground",children:((D=E.find(U=>String(U.id)===String(P.category_id)))==null?void 0:D.name)||"Без категории"})]})]})]},P.id)})})]})]}),i.jsx("div",{className:"flex justify-end mt-6",children:i.jsx(ne,{onClick:async()=>{try{if(!t)return;d(!0),await Ru.update(String(t.id),{specialization:t.specialization,experience_years:t.experience_years,bio:t.bio,work_schedule:f}),Ae({title:"Данные обновлены",description:"Ваш профиль успешно обновлен",variant:"default"})}catch(P){console.error("Ошибка при обновлении профиля:",P),Ae({title:"Ошибка",description:"Не удалось обновить данные профиля",variant:"destructive"})}finally{d(!1)}},className:"bg-primary text-primary-foreground hover:bg-primary/90",disabled:u,children:u?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"mr-2",children:"Сохранение..."}),i.jsx(ki,{className:"h-4 w-4 animate-spin"})]}):"Сохранить изменения"})})]})]})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-muted-foreground text-lg mb-4",children:"Мастер не найден"}),l&&i.jsx("div",{className:"text-sm text-red-500 max-w-lg mx-auto",children:l}),i.jsx(ne,{className:"mt-6",onClick:()=>e("/specialist/dashboard"),children:"Вернуться в кабинет"})]})]})}),i.jsx(al,{})]})},CC=["admin","specialist","client"],uot="https://gmajzyndavrqvjccojus.supabase.co",dot="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdtYWp6eW5kYXZycXZqY2NvanVzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0OTM1NjEsImV4cCI6MjA2MTA2OTU2MX0.BryyXcZIgCKBfgVky2TouD2Ru1gO9Hrd5QyJ7c7vUdk",Y0=gj(uot,dot);function fot(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),[a,s]=x.useState(!1),{toast:o}=co(),l=x.useCallback(async()=>{n(!0);try{const{data:d,error:f}=await Y0.from("profiles").select("id, full_name");if(f)throw f;const{data:h,error:p}=await Y0.from("user_roles").select("user_id, role");if(p)throw p;const v=d.map(m=>{const g=h.filter(b=>b.user_id===m.id).map(b=>b.role);return{id:m.id,full_name:m.full_name,email:null,roles:g}});t(v)}catch(d){let f="Неизвестная ошибка";typeof d=="object"&&d!==null&&"message"in d&&(f=d.message),console.error("Ошибка загрузки данных:",d),o({title:"Ошибка загрузки!",description:`Не удалось загрузить данные пользователей и ролей: ${f}`,variant:"destructive"})}finally{n(!1)}},[Y0,o]);x.useEffect(()=>{l()},[l]);const c=(d,f,h)=>{t(p=>p.map(v=>{if(v.id===d){const m=new Set(v.roles);return h?m.add(f):m.delete(f),{...v,roles:Array.from(m)}}return v}))},u=async()=>{s(!0);try{for(const d of e){const{error:f}=await Y0.from("user_roles").delete().eq("user_id",d.id);if(f)throw console.error(`Ошибка при удалении ролей для user ${d.id}:`,f),f;if(d.roles.length>0){const h=d.roles.map(v=>({user_id:d.id,role:v})),{error:p}=await Y0.from("user_roles").insert(h);if(p)throw console.error(`Ошибка при добавлении ролей для user ${d.id}:`,p),p}}o({title:"Успешно!",description:"Роли пользователей обновлены."}),await l()}catch(d){let f="Неизвестная ошибка";typeof d=="object"&&d!==null&&"message"in d&&(f=d.message),console.error("Ошибка сохранения ролей:",d),o({title:"Ошибка!",description:f||"Не удалось сохранить роли.",variant:"destructive"})}finally{s(!1)}};return r?i.jsx("div",{className:"flex justify-center items-center h-32",children:"Загрузка данных пользователей..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ks,{children:[i.jsx(Ts,{children:i.jsxs(Lr,{children:[i.jsx(pt,{className:"w-[200px]",children:"ФИО"}),i.jsx(pt,{children:"Email"}),CC.map(d=>i.jsx(pt,{className:"text-center w-[100px] capitalize",children:d},d))]})}),i.jsx(As,{children:e.length===0&&!r?i.jsx(Lr,{children:i.jsx(dt,{colSpan:2+CC.length,className:"text-center h-24",children:"Пользователи не найдены."})}):e.map(d=>i.jsxs(Lr,{children:[i.jsx(dt,{className:"font-medium",children:d.full_name||"N/A"}),i.jsx(dt,{children:d.email||"N/A (требуется RPC для загрузки)"}),CC.map(f=>i.jsx(dt,{className:"text-center",children:i.jsx(Hn,{id:`role-${d.id}-${f}`,checked:d.roles.includes(f),onCheckedChange:h=>c(d.id,f,!!h),"aria-label":`Роль ${f} для ${d.full_name||d.id}`})},f))]},d.id))})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(ne,{onClick:u,disabled:a||r,children:a?"Сохранение...":"Сохранить изменения"})})]})}function hot(){return i.jsxs("div",{className:"space-y-4",children:[i.jsx(ne,{asChild:!0,variant:"outline",size:"sm",children:i.jsxs(en,{to:"/admin/settings",children:[i.jsx(f4,{className:"mr-2 h-4 w-4"}),"Назад к настройкам"]})}),i.jsx(fot,{})]})}function mot(){return i.jsxs("div",{className:"space-y-4",children:[i.jsx(ne,{asChild:!0,variant:"outline",size:"sm",children:i.jsxs(en,{to:"/admin",children:[i.jsx(f4,{className:"mr-2 h-4 w-4"}),"Назад в админ-панель"]})}),i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsx(gt,{children:"Настройки"})}),i.jsxs(Ge,{className:"space-y-4",children:[i.jsx("p",{children:"Выберите раздел настроек:"}),i.jsx(ne,{asChild:!0,variant:"outline",children:i.jsx(en,{to:"/admin/settings/user-roles",children:"Управление ролями пользователей"})})]})]})]})}class zae{static async authenticateWithVK(t){var r;try{console.log("Отправляем VK auth данные на Netlify MCP:",this.MCP_URL);const n=await fetch(this.MCP_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"tools/call",params:{name:"vk-auth",arguments:t}})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();return a.error?{success:!1,error:a.error.message||"Ошибка авторизации через VK"}:(r=a.result)!=null&&r.success?{success:!0,user:a.result.user}:{success:!1,error:"Неожиданный ответ от сервера авторизации"}}catch(n){return console.error("Ошибка при авторизации через Netlify MCP:",n),{success:!1,error:n instanceof Error?n.message:"Неизвестная ошибка"}}}static getVKAuthUrl(t,r){return`https://oauth.vk.com/authorize?${new URLSearchParams({client_id:t,display:"popup",redirect_uri:r,scope:"email",response_type:"code",v:"5.131"}).toString()}`}static extractAuthCodeFromUrl(t){try{return new URL(t).searchParams.get("code")}catch{const r=t.match(/code=([^&]+)/);return r?r[1]:null}}}Yy(zae,"MCP_URL","https://lvlupgames.ru/mcp");const pot=()=>{const[e,t]=x.useState(null),[r,n]=x.useState(!0),[a,s]=x.useState(null);return x.useEffect(()=>{(async()=>{try{const{data:{session:h}}=await ue.auth.getSession();t(h)}catch(h){console.error("Ошибка получения сессии:",h),s("Ошибка получения сессии")}finally{n(!1)}})();const{data:{subscription:f}}=ue.auth.onAuthStateChange(async(h,p)=>{var v;console.log("Auth state changed:",h,(v=p==null?void 0:p.user)==null?void 0:v.id),t(p),n(!1)});return()=>f.unsubscribe()},[]),{session:e,loading:r,error:a,signInWithOAuth:async(d,f)=>{s(null),n(!0);try{const{error:h}=await ue.auth.signInWithOAuth({provider:d,options:{redirectTo:f||window.location.origin}});if(h)throw h}catch(h){const p=h instanceof Error?h.message:"Ошибка авторизации";console.error("OAuth error:",h),s(p)}finally{n(!1)}},signInWithVK:async d=>{s(null),n(!0);try{const f=await zae.authenticateWithVK(d);if(!f.success)throw new Error(f.error||"Ошибка авторизации через VK");console.log("VK auth successful:",f.user)}catch(f){const h=f instanceof Error?f.message:"Ошибка авторизации через VK";console.error("VK auth error:",f),s(h)}finally{n(!1)}},signOut:async()=>{s(null);try{const{error:d}=await ue.auth.signOut();if(d)throw d}catch(d){const f=d instanceof Error?d.message:"Ошибка выхода";console.error("Sign out error:",d),s(f)}},clearError:()=>{s(null)}}},got=()=>{const[e,t]=x.useState(!1),[r,n]=x.useState(null),a=[{name:"Google",key:"google",color:"bg-red-500 hover:bg-red-600 text-white"},{name:"ВКонтакте",key:"vk",color:"bg-blue-500 hover:bg-blue-600 text-white"},{name:"Яндекс",key:"yandex",color:"bg-yellow-500 hover:bg-yellow-600 text-white"}],s=x.useCallback(()=>{n(null)},[]),o=x.useCallback(c=>{t(c)},[]),l=x.useCallback(c=>{n(c)},[]);return{providers:a,loading:e,error:r,clearError:s,setLoadingState:o,setErrorState:l}};var h1={exports:{}},ch={};function vot(e){return e&&e.__esModule?e:{default:e}}ch._=vot;var kC={},TC={},W7;function jI(){if(W7)return TC;W7=1;function e(r){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(e=function(s){return s?a:n})(r)}function t(r,n){if(!n&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var a=e(n);if(a&&a.has(r))return a.get(r);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in r)if(l!=="default"&&Object.prototype.hasOwnProperty.call(r,l)){var c=o?Object.getOwnPropertyDescriptor(r,l):null;c&&(c.get||c.set)?Object.defineProperty(s,l,c):s[l]=r[l]}return s.default=r,a&&a.set(r,s),s}return TC._=t,TC}var AC={},V7;function Uy(){return V7||(V7=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"removeTrailingSlash",{enumerable:!0,get:function(){return t}});function t(r){return r.replace(/\/$/,"")||"/"}}(AC)),AC}var m1={exports:{}},PC={},H7;function xot(){return H7||(H7=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t}});function t(r,n){return n===void 0&&(n=""),(r==="/"?"/index":/^\/index(\/|$)/.test(r)?"/index"+r:r)+n}}(PC)),PC}var p1={exports:{}},q7;function yot(){return q7||(q7=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"__unsafeCreateTrustedScriptURL",{enumerable:!0,get:function(){return a}});let r;function n(){if(typeof r>"u"&&typeof window<"u"){var s;r=((s=window.trustedTypes)==null?void 0:s.createPolicy("nextjs",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o}))||null}return r}function a(s){var o;return((o=n())==null?void 0:o.createScriptURL(s))||s}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(p1,p1.exports)),p1.exports}var g1={exports:{}},G7;function Wae(){return G7||(G7=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function r(s,o){for(var l in o)Object.defineProperty(s,l,{enumerable:!0,get:o[l]})}r(t,{cancelIdleCallback:function(){return a},requestIdleCallback:function(){return n}});const n=typeof self<"u"&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(s){let o=Date.now();return self.setTimeout(function(){s({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-o))}})},1)},a=typeof self<"u"&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(s){return clearTimeout(s)};(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(g1,g1.exports)),g1.exports}var OC={},K7;function bot(){return K7||(K7=1,function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getDeploymentIdQueryOrEmptyString",{enumerable:!0,get:function(){return r}});function r(){return t.NEXT_DEPLOYMENT_ID?`?dpl=${t.NEXT_DEPLOYMENT_ID}`:""}}(OC)),OC}var RC={},X7;function wot(){return X7||(X7=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"encodeURIPath",{enumerable:!0,get:function(){return t}});function t(r){return r.split("/").map(n=>encodeURIComponent(n)).join("/")}}(RC)),RC}var Y7;function _ot(){return Y7||(Y7=1,function(e,t){var r={};Object.defineProperty(t,"__esModule",{value:!0});function n(j,N){for(var k in N)Object.defineProperty(j,k,{enumerable:!0,get:N[k]})}n(t,{createRouteLoader:function(){return E},getClientBuildManifest:function(){return _},isAssetError:function(){return p},markAssetError:function(){return h}});const a=ch;xot();const s=yot(),o=Wae(),l=bot(),c=wot(),u=3800;function d(j,N,k){let C=N.get(j);if(C)return"future"in C?C.future:Promise.resolve(C);let T;const A=new Promise(B=>{T=B});return N.set(j,{resolve:T,future:A}),k?k().then(B=>(T(B),B)).catch(B=>{throw N.delete(j),B}):A}const f=Symbol("ASSET_LOAD_ERROR");function h(j){return Object.defineProperty(j,f,{})}function p(j){return j&&f in j}function v(j){try{return j=document.createElement("link"),!!window.MSInputMethodContext&&!!document.documentMode||j.relList.supports("prefetch")}catch{return!1}}const m=v(),g=()=>(0,l.getDeploymentIdQueryOrEmptyString)();function b(j,N,k){return new Promise((C,T)=>{const A=`
      link[rel="prefetch"][href^="`+j+`"],
      link[rel="preload"][href^="`+j+`"],
      script[src^="`+j+'"]';if(document.querySelector(A))return C();k=document.createElement("link"),k.as=N,k.rel="prefetch",k.crossOrigin=r.__NEXT_CROSS_ORIGIN,k.onload=C,k.onerror=()=>T(h(Object.defineProperty(new Error("Failed to prefetch: "+j),"__NEXT_ERROR_CODE",{value:"E268",enumerable:!1,configurable:!0}))),k.href=j,document.head.appendChild(k)})}function y(j,N){return new Promise((k,C)=>{N=document.createElement("script"),N.onload=k,N.onerror=()=>C(h(Object.defineProperty(new Error("Failed to load script: "+j),"__NEXT_ERROR_CODE",{value:"E74",enumerable:!1,configurable:!0}))),N.crossOrigin=r.__NEXT_CROSS_ORIGIN,N.src=j,document.body.appendChild(N)})}function w(j,N,k){return new Promise((C,T)=>{let A=!1;j.then(B=>{A=!0,C(B)}).catch(T),(0,o.requestIdleCallback)(()=>setTimeout(()=>{A||T(k)},N))})}function _(){if(self.__BUILD_MANIFEST)return Promise.resolve(self.__BUILD_MANIFEST);const j=new Promise(N=>{const k=self.__BUILD_MANIFEST_CB;self.__BUILD_MANIFEST_CB=()=>{N(self.__BUILD_MANIFEST),k&&k()}});return w(j,u,h(Object.defineProperty(new Error("Failed to load client build manifest"),"__NEXT_ERROR_CODE",{value:"E273",enumerable:!1,configurable:!0})))}function S(j,N){return _().then(k=>{if(!(N in k))throw h(Object.defineProperty(new Error("Failed to lookup route: "+N),"__NEXT_ERROR_CODE",{value:"E446",enumerable:!1,configurable:!0}));const C=k[N].map(T=>j+"/_next/"+(0,c.encodeURIPath)(T));return{scripts:C.filter(T=>T.endsWith(".js")).map(T=>(0,s.__unsafeCreateTrustedScriptURL)(T)+g()),css:C.filter(T=>T.endsWith(".css")).map(T=>T+g())}})}function E(j){const N=new Map,k=new Map,C=new Map,T=new Map;function A(R){{let P=k.get(R.toString());return P||(document.querySelector('script[src^="'+R+'"]')?Promise.resolve():(k.set(R.toString(),P=y(R)),P))}}function B(R){let P=C.get(R);return P||(C.set(R,P=fetch(R,{credentials:"same-origin"}).then(D=>{if(!D.ok)throw Object.defineProperty(new Error("Failed to load stylesheet: "+R),"__NEXT_ERROR_CODE",{value:"E189",enumerable:!1,configurable:!0});return D.text().then(U=>({href:R,content:U}))}).catch(D=>{throw h(D)})),P)}return{whenEntrypoint(R){return d(R,N)},onEntrypoint(R,P){(P?Promise.resolve().then(()=>P()).then(D=>({component:D&&D.default||D,exports:D}),D=>({error:D})):Promise.resolve(void 0)).then(D=>{const U=N.get(R);U&&"resolve"in U?D&&(N.set(R,D),U.resolve(D)):(D?N.set(R,D):N.delete(R),T.delete(R))})},loadRoute(R,P){return d(R,T,()=>w(S(j,R).then(D=>{let{scripts:U,css:M}=D;return Promise.all([N.has(R)?[]:Promise.all(U.map(A)),Promise.all(M.map(B))])}).then(D=>this.whenEntrypoint(R).then(U=>({entrypoint:U,styles:D[1]}))),u,h(Object.defineProperty(new Error("Route did not complete loading: "+R),"__NEXT_ERROR_CODE",{value:"E12",enumerable:!1,configurable:!0}))).then(D=>{let{entrypoint:U,styles:M}=D;const F=Object.assign({styles:M},U);return"error"in U?U:F}).catch(D=>{if(P)throw D;return{error:D}}).finally(()=>{}))},prefetch(R){let P;return(P=navigator.connection)&&(P.saveData||/2g/.test(P.effectiveType))?Promise.resolve():S(j,R).then(D=>Promise.all(m?D.scripts.map(U=>b(U.toString(),"script")):[])).then(()=>{(0,o.requestIdleCallback)(()=>this.loadRoute(R,!0).catch(()=>{}))}).catch(()=>{})}}}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(m1,m1.exports)),m1.exports}var v1={exports:{}},DC={},Z7;function Sot(){return Z7||(Z7=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"HeadManagerContext",{enumerable:!0,get:function(){return n}});const n=ch._(x).default.createContext({})}(DC)),DC}var x1={exports:{}},J7;function jot(){return J7||(J7=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"setAttributesFromProps",{enumerable:!0,get:function(){return s}});const r={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv",noModule:"noModule"},n=["onLoad","onReady","dangerouslySetInnerHTML","children","onError","strategy","stylesheets"];function a(o){return["async","defer","noModule"].includes(o)}function s(o,l){for(const[c,u]of Object.entries(l)){if(!l.hasOwnProperty(c)||n.includes(c)||u===void 0)continue;const d=r[c]||c.toLowerCase();o.tagName==="SCRIPT"&&a(d)?o[d]=!!u:o.setAttribute(d,String(u)),(u===!1||o.tagName==="SCRIPT"&&a(d)&&(!u||u==="false"))&&(o.setAttribute(d,""),o.removeAttribute(d))}}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(x1,x1.exports)),x1.exports}var Q7;function Eot(){return Q7||(Q7=1,function(e,t){"use client";Object.defineProperty(t,"__esModule",{value:!0});function r(S,E){for(var j in E)Object.defineProperty(S,j,{enumerable:!0,get:E[j]})}r(t,{default:function(){return _},handleClientScriptLoad:function(){return m},initScriptLoader:function(){return y}});const n=ch,a=jI(),s=i,o=n._(oo),l=a._(x),c=Sot(),u=jot(),d=Wae(),f=new Map,h=new Set,p=S=>{if(o.default.preinit){S.forEach(E=>{o.default.preinit(E,{as:"style"})});return}if(typeof window<"u"){let E=document.head;S.forEach(j=>{let N=document.createElement("link");N.type="text/css",N.rel="stylesheet",N.href=j,E.appendChild(N)})}},v=S=>{const{src:E,id:j,onLoad:N=()=>{},onReady:k=null,dangerouslySetInnerHTML:C,children:T="",strategy:A="afterInteractive",onError:B,stylesheets:R}=S,P=j||E;if(P&&h.has(P))return;if(f.has(E)){h.add(P),f.get(E).then(N,B);return}const D=()=>{k&&k(),h.add(P)},U=document.createElement("script"),M=new Promise((F,K)=>{U.addEventListener("load",function(X){F(),N&&N.call(this,X),D()}),U.addEventListener("error",function(X){K(X)})}).catch(function(F){B&&B(F)});C?(U.innerHTML=C.__html||"",D()):T?(U.textContent=typeof T=="string"?T:Array.isArray(T)?T.join(""):"",D()):E&&(U.src=E,f.set(E,M)),(0,u.setAttributesFromProps)(U,S),A==="worker"&&U.setAttribute("type","text/partytown"),U.setAttribute("data-nscript",A),R&&p(R),document.body.appendChild(U)};function m(S){const{strategy:E="afterInteractive"}=S;E==="lazyOnload"?window.addEventListener("load",()=>{(0,d.requestIdleCallback)(()=>v(S))}):v(S)}function g(S){document.readyState==="complete"?(0,d.requestIdleCallback)(()=>v(S)):window.addEventListener("load",()=>{(0,d.requestIdleCallback)(()=>v(S))})}function b(){[...document.querySelectorAll('[data-nscript="beforeInteractive"]'),...document.querySelectorAll('[data-nscript="beforePageRender"]')].forEach(E=>{const j=E.id||E.getAttribute("src");h.add(j)})}function y(S){S.forEach(m),b()}function w(S){const{id:E,src:j="",onLoad:N=()=>{},onReady:k=null,strategy:C="afterInteractive",onError:T,stylesheets:A,...B}=S,{updateScripts:R,scripts:P,getIsSsr:D,appDir:U,nonce:M}=(0,l.useContext)(c.HeadManagerContext),F=(0,l.useRef)(!1);(0,l.useEffect)(()=>{const X=E||j;F.current||(k&&X&&h.has(X)&&k(),F.current=!0)},[k,E,j]);const K=(0,l.useRef)(!1);if((0,l.useEffect)(()=>{K.current||(C==="afterInteractive"?v(S):C==="lazyOnload"&&g(S),K.current=!0)},[S,C]),(C==="beforeInteractive"||C==="worker")&&(R?(P[C]=(P[C]||[]).concat([{id:E,src:j,onLoad:N,onReady:k,onError:T,...B}]),R(P)):D&&D()?h.add(E||j):D&&!D()&&v(S)),U){if(A&&A.forEach(X=>{o.default.preinit(X,{as:"style"})}),C==="beforeInteractive")return j?(o.default.preload(j,B.integrity?{as:"script",integrity:B.integrity,nonce:M,crossOrigin:B.crossOrigin}:{as:"script",nonce:M,crossOrigin:B.crossOrigin}),(0,s.jsx)("script",{nonce:M,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([j,{...B,id:E}])+")"}})):(B.dangerouslySetInnerHTML&&(B.children=B.dangerouslySetInnerHTML.__html,delete B.dangerouslySetInnerHTML),(0,s.jsx)("script",{nonce:M,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([0,{...B,id:E}])+")"}}));C==="afterInteractive"&&j&&o.default.preload(j,B.integrity?{as:"script",integrity:B.integrity,nonce:M,crossOrigin:B.crossOrigin}:{as:"script",nonce:M,crossOrigin:B.crossOrigin})}return null}Object.defineProperty(w,"__nextScript",{value:!0});const _=w;(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(v1,v1.exports)),v1.exports}var MC={},IC={},e9;function Not(){return e9||(e9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(a,s){for(var o in s)Object.defineProperty(a,o,{enumerable:!0,get:s[o]})}t(e,{getObjectClassLabel:function(){return r},isPlainObject:function(){return n}});function r(a){return Object.prototype.toString.call(a)}function n(a){if(r(a)!=="[object Object]")return!1;const s=Object.getPrototypeOf(a);return s===null||s.hasOwnProperty("isPrototypeOf")}}(IC)),IC}var t9;function Vae(){return t9||(t9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(o,l){for(var c in l)Object.defineProperty(o,c,{enumerable:!0,get:l[c]})}t(e,{default:function(){return n},getProperError:function(){return s}});const r=Not();function n(o){return typeof o=="object"&&o!==null&&"name"in o&&"message"in o}function a(o){const l=new WeakSet;return JSON.stringify(o,(c,u)=>{if(typeof u=="object"&&u!==null){if(l.has(u))return"[Circular]";l.add(u)}return u})}function s(o){return n(o)?o:Object.defineProperty(new Error((0,r.isPlainObject)(o)?a(o):o+""),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}(MC)),MC}var $C={},FC={},LC={},r9;function Cot(){return r9||(r9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,o){for(var l in o)Object.defineProperty(s,l,{enumerable:!0,get:o[l]})}t(e,{getSortedRouteObjects:function(){return a},getSortedRoutes:function(){return n}});class r{insert(o){this._insert(o.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(o){o===void 0&&(o="/");const l=[...this.children.keys()].sort();this.slugName!==null&&l.splice(l.indexOf("[]"),1),this.restSlugName!==null&&l.splice(l.indexOf("[...]"),1),this.optionalRestSlugName!==null&&l.splice(l.indexOf("[[...]]"),1);const c=l.map(u=>this.children.get(u)._smoosh(""+o+u+"/")).reduce((u,d)=>[...u,...d],[]);if(this.slugName!==null&&c.push(...this.children.get("[]")._smoosh(o+"["+this.slugName+"]/")),!this.placeholder){const u=o==="/"?"/":o.slice(0,-1);if(this.optionalRestSlugName!=null)throw Object.defineProperty(new Error('You cannot define a route with the same specificity as a optional catch-all route ("'+u+'" and "'+u+"[[..."+this.optionalRestSlugName+']]").'),"__NEXT_ERROR_CODE",{value:"E458",enumerable:!1,configurable:!0});c.unshift(u)}return this.restSlugName!==null&&c.push(...this.children.get("[...]")._smoosh(o+"[..."+this.restSlugName+"]/")),this.optionalRestSlugName!==null&&c.push(...this.children.get("[[...]]")._smoosh(o+"[[..."+this.optionalRestSlugName+"]]/")),c}_insert(o,l,c){if(o.length===0){this.placeholder=!1;return}if(c)throw Object.defineProperty(new Error("Catch-all must be the last part of the URL."),"__NEXT_ERROR_CODE",{value:"E392",enumerable:!1,configurable:!0});let u=o[0];if(u.startsWith("[")&&u.endsWith("]")){let h=function(p,v){if(p!==null&&p!==v)throw Object.defineProperty(new Error("You cannot use different slug names for the same dynamic path ('"+p+"' !== '"+v+"')."),"__NEXT_ERROR_CODE",{value:"E337",enumerable:!1,configurable:!0});l.forEach(m=>{if(m===v)throw Object.defineProperty(new Error('You cannot have the same slug name "'+v+'" repeat within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E247",enumerable:!1,configurable:!0});if(m.replace(/\W/g,"")===u.replace(/\W/g,""))throw Object.defineProperty(new Error('You cannot have the slug names "'+m+'" and "'+v+'" differ only by non-word symbols within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E499",enumerable:!1,configurable:!0})}),l.push(v)},d=u.slice(1,-1),f=!1;if(d.startsWith("[")&&d.endsWith("]")&&(d=d.slice(1,-1),f=!0),d.startsWith("…"))throw Object.defineProperty(new Error("Detected a three-dot character ('…') at ('"+d+"'). Did you mean ('...')?"),"__NEXT_ERROR_CODE",{value:"E147",enumerable:!1,configurable:!0});if(d.startsWith("...")&&(d=d.substring(3),c=!0),d.startsWith("[")||d.endsWith("]"))throw Object.defineProperty(new Error("Segment names may not start or end with extra brackets ('"+d+"')."),"__NEXT_ERROR_CODE",{value:"E421",enumerable:!1,configurable:!0});if(d.startsWith("."))throw Object.defineProperty(new Error("Segment names may not start with erroneous periods ('"+d+"')."),"__NEXT_ERROR_CODE",{value:"E288",enumerable:!1,configurable:!0});if(c)if(f){if(this.restSlugName!=null)throw Object.defineProperty(new Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+o[0]+'" ).'),"__NEXT_ERROR_CODE",{value:"E299",enumerable:!1,configurable:!0});h(this.optionalRestSlugName,d),this.optionalRestSlugName=d,u="[[...]]"}else{if(this.optionalRestSlugName!=null)throw Object.defineProperty(new Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+o[0]+'").'),"__NEXT_ERROR_CODE",{value:"E300",enumerable:!1,configurable:!0});h(this.restSlugName,d),this.restSlugName=d,u="[...]"}else{if(f)throw Object.defineProperty(new Error('Optional route parameters are not yet supported ("'+o[0]+'").'),"__NEXT_ERROR_CODE",{value:"E435",enumerable:!1,configurable:!0});h(this.slugName,d),this.slugName=d,u="[]"}}this.children.has(u)||this.children.set(u,new r),this.children.get(u)._insert(o.slice(1),l,c)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function n(s){const o=new r;return s.forEach(l=>o.insert(l)),o.smoosh()}function a(s,o){const l={},c=[];for(let d=0;d<s.length;d++){const f=o(s[d]);l[f]=d,c[d]=f}return n(c).map(d=>s[l[d]])}}(LC)),LC}var BC={},UC={},zC={},WC={},n9;function kot(){return n9||(n9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ensureLeadingSlash",{enumerable:!0,get:function(){return t}});function t(r){return r.startsWith("/")?r:"/"+r}}(WC)),WC}var VC={},a9;function Tot(){return a9||(a9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(l,c){for(var u in c)Object.defineProperty(l,u,{enumerable:!0,get:c[u]})}t(e,{DEFAULT_SEGMENT_KEY:function(){return o},PAGE_SEGMENT_KEY:function(){return s},addSearchParamsIfPageSegment:function(){return a},isGroupSegment:function(){return r},isParallelRouteSegment:function(){return n}});function r(l){return l[0]==="("&&l.endsWith(")")}function n(l){return l.startsWith("@")&&l!=="@children"}function a(l,c){if(l.includes(s)){const d=JSON.stringify(c);return d!=="{}"?s+"?"+d:s}return l}const s="__PAGE__",o="__DEFAULT__"}(VC)),VC}var s9;function Aot(){return s9||(s9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(o,l){for(var c in l)Object.defineProperty(o,c,{enumerable:!0,get:l[c]})}t(e,{normalizeAppPath:function(){return a},normalizeRscURL:function(){return s}});const r=kot(),n=Tot();function a(o){return(0,r.ensureLeadingSlash)(o.split("/").reduce((l,c,u,d)=>!c||(0,n.isGroupSegment)(c)||c[0]==="@"||(c==="page"||c==="route")&&u===d.length-1?l:l+"/"+c,""))}function s(o){return o.replace(/\.rsc($|\?)/,"$1")}}(zC)),zC}var i9;function EI(){return i9||(i9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(o,l){for(var c in l)Object.defineProperty(o,c,{enumerable:!0,get:l[c]})}t(e,{INTERCEPTION_ROUTE_MARKERS:function(){return n},extractInterceptionRouteInformation:function(){return s},isInterceptionRouteAppPath:function(){return a}});const r=Aot(),n=["(..)(..)","(.)","(..)","(...)"];function a(o){return o.split("/").find(l=>n.find(c=>l.startsWith(c)))!==void 0}function s(o){let l,c,u;for(const d of o.split("/"))if(c=n.find(f=>d.startsWith(f)),c){[l,u]=o.split(c,2);break}if(!l||!c||!u)throw Object.defineProperty(new Error("Invalid interception route: "+o+". Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>"),"__NEXT_ERROR_CODE",{value:"E269",enumerable:!1,configurable:!0});switch(l=(0,r.normalizeAppPath)(l),c){case"(.)":l==="/"?u="/"+u:u=l+"/"+u;break;case"(..)":if(l==="/")throw Object.defineProperty(new Error("Invalid interception route: "+o+". Cannot use (..) marker at the root level, use (.) instead."),"__NEXT_ERROR_CODE",{value:"E207",enumerable:!1,configurable:!0});u=l.split("/").slice(0,-1).concat(u).join("/");break;case"(...)":u="/"+u;break;case"(..)(..)":const d=l.split("/");if(d.length<=2)throw Object.defineProperty(new Error("Invalid interception route: "+o+". Cannot use (..)(..) marker at the root level or one level up."),"__NEXT_ERROR_CODE",{value:"E486",enumerable:!1,configurable:!0});u=d.slice(0,-2).concat(u).join("/");break;default:throw Object.defineProperty(new Error("Invariant: unexpected marker"),"__NEXT_ERROR_CODE",{value:"E112",enumerable:!1,configurable:!0})}return{interceptingRoute:l,interceptedRoute:u}}}(UC)),UC}var o9;function Hae(){return o9||(o9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"isDynamicRoute",{enumerable:!0,get:function(){return a}});const t=EI(),r=/\/[^/]*\[[^/]+\][^/]*(?=\/|$)/,n=/\/\[[^/]+\](?=\/|$)/;function a(s,o){return o===void 0&&(o=!0),(0,t.isInterceptionRouteAppPath)(s)&&(s=(0,t.extractInterceptionRouteInformation)(s).interceptedRoute),o?n.test(s):r.test(s)}}(BC)),BC}var l9;function qae(){return l9||(l9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(a,s){for(var o in s)Object.defineProperty(a,o,{enumerable:!0,get:s[o]})}t(e,{getSortedRouteObjects:function(){return r.getSortedRouteObjects},getSortedRoutes:function(){return r.getSortedRoutes},isDynamicRoute:function(){return n.isDynamicRoute}});const r=Cot(),n=Hae()}(FC)),FC}var HC={},c9;function Pot(){return c9||(c9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"normalizePathSep",{enumerable:!0,get:function(){return t}});function t(r){return r.replace(/\\/g,"/")}}(HC)),HC}var u9;function Oot(){return u9||(u9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"denormalizePagePath",{enumerable:!0,get:function(){return n}});const t=qae(),r=Pot();function n(a){let s=(0,r.normalizePathSep)(a);return s.startsWith("/index/")&&!(0,t.isDynamicRoute)(s)?s.slice(6):s!=="/index"?s:"/"}}($C)),$C}var qC={},d9;function NI(){return d9||(d9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"normalizeLocalePath",{enumerable:!0,get:function(){return r}});const t=new WeakMap;function r(n,a){if(!a)return{pathname:n};let s=t.get(a);s||(s=a.map(d=>d.toLowerCase()),t.set(a,s));let o;const l=n.split("/",2);if(!l[1])return{pathname:n};const c=l[1].toLowerCase(),u=s.indexOf(c);return u<0?{pathname:n}:(o=a[u],n=n.slice(o.length+1)||"/",{pathname:n,detectedLocale:o})}}(qC)),qC}var GC={},f9;function Rot(){return f9||(f9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t}});function t(){const r=Object.create(null);return{on(n,a){(r[n]||(r[n]=[])).push(a)},off(n,a){r[n]&&r[n].splice(r[n].indexOf(a)>>>0,1)},emit(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];(r[n]||[]).slice().map(l=>{l(...s)})}}}}(GC)),GC}var KC={},h9;function zy(){return h9||(h9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(_,S){for(var E in S)Object.defineProperty(_,E,{enumerable:!0,get:S[E]})}t(e,{DecodeError:function(){return v},MiddlewareNotFoundError:function(){return y},MissingStaticPage:function(){return b},NormalizeError:function(){return m},PageNotFoundError:function(){return g},SP:function(){return h},ST:function(){return p},WEB_VITALS:function(){return r},execOnce:function(){return n},getDisplayName:function(){return c},getLocationOrigin:function(){return o},getURL:function(){return l},isAbsoluteUrl:function(){return s},isResSent:function(){return u},loadGetInitialProps:function(){return f},normalizeRepeatedSlashes:function(){return d},stringifyError:function(){return w}});const r=["CLS","FCP","FID","INP","LCP","TTFB"];function n(_){let S=!1,E;return function(){for(var j=arguments.length,N=new Array(j),k=0;k<j;k++)N[k]=arguments[k];return S||(S=!0,E=_(...N)),E}}const a=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,s=_=>a.test(_);function o(){const{protocol:_,hostname:S,port:E}=window.location;return _+"//"+S+(E?":"+E:"")}function l(){const{href:_}=window.location,S=o();return _.substring(S.length)}function c(_){return typeof _=="string"?_:_.displayName||_.name||"Unknown"}function u(_){return _.finished||_.headersSent}function d(_){const S=_.split("?");return S[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(S[1]?"?"+S.slice(1).join("?"):"")}async function f(_,S){const E=S.res||S.ctx&&S.ctx.res;if(!_.getInitialProps)return S.ctx&&S.Component?{pageProps:await f(S.Component,S.ctx)}:{};const j=await _.getInitialProps(S);if(E&&u(E))return j;if(!j){const N='"'+c(_)+'.getInitialProps()" should resolve to an object. But found "'+j+'" instead.';throw Object.defineProperty(new Error(N),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}return j}const h=typeof performance<"u",p=h&&["mark","measure","getEntriesByName"].every(_=>typeof performance[_]=="function");class v extends Error{}class m extends Error{}class g extends Error{constructor(S){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+S}}class b extends Error{constructor(S,E){super(),this.message="Failed to load static file for page: "+S+" "+E}}class y extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function w(_){return JSON.stringify({message:_.message,stack:_.stack})}}(KC)),KC}var XC={},YC={},m9;function aE(){return m9||(m9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(o,l){for(var c in l)Object.defineProperty(o,c,{enumerable:!0,get:l[c]})}t(e,{assign:function(){return s},searchParamsToUrlQuery:function(){return r},urlQueryToSearchParams:function(){return a}});function r(o){const l={};for(const[c,u]of o.entries()){const d=l[c];typeof d>"u"?l[c]=u:Array.isArray(d)?d.push(u):l[c]=[d,u]}return l}function n(o){return typeof o=="string"?o:typeof o=="number"&&!isNaN(o)||typeof o=="boolean"?String(o):""}function a(o){const l=new URLSearchParams;for(const[c,u]of Object.entries(o))if(Array.isArray(u))for(const d of u)l.append(c,n(d));else l.set(c,n(u));return l}function s(o){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];for(const d of c){for(const f of d.keys())o.delete(f);for(const[f,h]of d.entries())o.append(f,h)}return o}}(YC)),YC}var p9;function CI(){return p9||(p9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"parseRelativeUrl",{enumerable:!0,get:function(){return n}});const t=zy(),r=aE();function n(a,s,o){o===void 0&&(o=!0);const l=new URL(typeof window>"u"?"http://n":(0,t.getLocationOrigin)()),c=s?new URL(s,l):a.startsWith(".")?new URL(typeof window>"u"?"http://n":window.location.href):l,{pathname:u,searchParams:d,search:f,hash:h,href:p,origin:v}=new URL(a,c);if(v!==l.origin)throw Object.defineProperty(new Error("invariant: invalid relative URL, router received "+a),"__NEXT_ERROR_CODE",{value:"E159",enumerable:!1,configurable:!0});return{pathname:u,query:o?(0,r.searchParamsToUrlQuery)(d):void 0,search:f,hash:h,href:p.slice(v.length)}}}(XC)),XC}var ZC={},JC={},QC={exports:{}},g9;function Gae(){return g9||(g9=1,(()=>{typeof __nccwpck_require__<"u"&&(__nccwpck_require__.ab=__dirname+"/");var e={};(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0});function r(m){for(var g=[],b=0;b<m.length;){var y=m[b];if(y==="*"||y==="+"||y==="?"){g.push({type:"MODIFIER",index:b,value:m[b++]});continue}if(y==="\\"){g.push({type:"ESCAPED_CHAR",index:b++,value:m[b++]});continue}if(y==="{"){g.push({type:"OPEN",index:b,value:m[b++]});continue}if(y==="}"){g.push({type:"CLOSE",index:b,value:m[b++]});continue}if(y===":"){for(var w="",_=b+1;_<m.length;){var S=m.charCodeAt(_);if(S>=48&&S<=57||S>=65&&S<=90||S>=97&&S<=122||S===95){w+=m[_++];continue}break}if(!w)throw new TypeError("Missing parameter name at "+b);g.push({type:"NAME",index:b,value:w}),b=_;continue}if(y==="("){var E=1,j="",_=b+1;if(m[_]==="?")throw new TypeError('Pattern cannot start with "?" at '+_);for(;_<m.length;){if(m[_]==="\\"){j+=m[_++]+m[_++];continue}if(m[_]===")"){if(E--,E===0){_++;break}}else if(m[_]==="("&&(E++,m[_+1]!=="?"))throw new TypeError("Capturing groups are not allowed at "+_);j+=m[_++]}if(E)throw new TypeError("Unbalanced pattern at "+b);if(!j)throw new TypeError("Missing pattern at "+b);g.push({type:"PATTERN",index:b,value:j}),b=_;continue}g.push({type:"CHAR",index:b,value:m[b++]})}return g.push({type:"END",index:b,value:""}),g}function n(m,g){g===void 0&&(g={});for(var b=r(m),y=g.prefixes,w=y===void 0?"./":y,_="[^"+c(g.delimiter||"/#?")+"]+?",S=[],E=0,j=0,N="",k=function(X){if(j<b.length&&b[j].type===X)return b[j++].value},C=function(X){var O=k(X);if(O!==void 0)return O;var W=b[j],L=W.type,H=W.index;throw new TypeError("Unexpected "+L+" at "+H+", expected "+X)},T=function(){for(var X="",O;O=k("CHAR")||k("ESCAPED_CHAR");)X+=O;return X};j<b.length;){var A=k("CHAR"),B=k("NAME"),R=k("PATTERN");if(B||R){var P=A||"";w.indexOf(P)===-1&&(N+=P,P=""),N&&(S.push(N),N=""),S.push({name:B||E++,prefix:P,suffix:"",pattern:R||_,modifier:k("MODIFIER")||""});continue}var D=A||k("ESCAPED_CHAR");if(D){N+=D;continue}N&&(S.push(N),N="");var U=k("OPEN");if(U){var P=T(),M=k("NAME")||"",F=k("PATTERN")||"",K=T();C("CLOSE"),S.push({name:M||(F?E++:""),pattern:M&&!F?_:F,prefix:P,suffix:K,modifier:k("MODIFIER")||""});continue}C("END")}return S}t.parse=n;function a(m,g){return s(n(m,g),g)}t.compile=a;function s(m,g){g===void 0&&(g={});var b=u(g),y=g.encode,w=y===void 0?function(j){return j}:y,_=g.validate,S=_===void 0?!0:_,E=m.map(function(j){if(typeof j=="object")return new RegExp("^(?:"+j.pattern+")$",b)});return function(j){for(var N="",k=0;k<m.length;k++){var C=m[k];if(typeof C=="string"){N+=C;continue}var T=j?j[C.name]:void 0,A=C.modifier==="?"||C.modifier==="*",B=C.modifier==="*"||C.modifier==="+";if(Array.isArray(T)){if(!B)throw new TypeError('Expected "'+C.name+'" to not repeat, but got an array');if(T.length===0){if(A)continue;throw new TypeError('Expected "'+C.name+'" to not be empty')}for(var R=0;R<T.length;R++){var P=w(T[R],C);if(S&&!E[k].test(P))throw new TypeError('Expected all "'+C.name+'" to match "'+C.pattern+'", but got "'+P+'"');N+=C.prefix+P+C.suffix}continue}if(typeof T=="string"||typeof T=="number"){var P=w(String(T),C);if(S&&!E[k].test(P))throw new TypeError('Expected "'+C.name+'" to match "'+C.pattern+'", but got "'+P+'"');N+=C.prefix+P+C.suffix;continue}if(!A){var D=B?"an array":"a string";throw new TypeError('Expected "'+C.name+'" to be '+D)}}return N}}t.tokensToFunction=s;function o(m,g){var b=[],y=v(m,b,g);return l(y,b,g)}t.match=o;function l(m,g,b){b===void 0&&(b={});var y=b.decode,w=y===void 0?function(_){return _}:y;return function(_){var S=m.exec(_);if(!S)return!1;for(var E=S[0],j=S.index,N=Object.create(null),k=function(T){if(S[T]===void 0)return"continue";var A=g[T-1];A.modifier==="*"||A.modifier==="+"?N[A.name]=S[T].split(A.prefix+A.suffix).map(function(B){return w(B,A)}):N[A.name]=w(S[T],A)},C=1;C<S.length;C++)k(C);return{path:E,index:j,params:N}}}t.regexpToFunction=l;function c(m){return m.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function u(m){return m&&m.sensitive?"":"i"}function d(m,g){if(!g)return m;var b=m.source.match(/\((?!\?)/g);if(b)for(var y=0;y<b.length;y++)g.push({name:y,prefix:"",suffix:"",modifier:"",pattern:""});return m}function f(m,g,b){var y=m.map(function(w){return v(w,g,b).source});return new RegExp("(?:"+y.join("|")+")",u(b))}function h(m,g,b){return p(n(m,b),g,b)}function p(m,g,b){b===void 0&&(b={});for(var y=b.strict,w=y===void 0?!1:y,_=b.start,S=_===void 0?!0:_,E=b.end,j=E===void 0?!0:E,N=b.encode,k=N===void 0?function(X){return X}:N,C="["+c(b.endsWith||"")+"]|$",T="["+c(b.delimiter||"/#?")+"]",A=S?"^":"",B=0,R=m;B<R.length;B++){var P=R[B];if(typeof P=="string")A+=c(k(P));else{var D=c(k(P.prefix)),U=c(k(P.suffix));if(P.pattern)if(g&&g.push(P),D||U)if(P.modifier==="+"||P.modifier==="*"){var M=P.modifier==="*"?"?":"";A+="(?:"+D+"((?:"+P.pattern+")(?:"+U+D+"(?:"+P.pattern+"))*)"+U+")"+M}else A+="(?:"+D+"("+P.pattern+")"+U+")"+P.modifier;else A+="("+P.pattern+")"+P.modifier;else A+="(?:"+D+U+")"+P.modifier}}if(j)w||(A+=T+"?"),A+=b.endsWith?"(?="+C+")":"$";else{var F=m[m.length-1],K=typeof F=="string"?T.indexOf(F[F.length-1])>-1:F===void 0;w||(A+="(?:"+T+"(?="+C+"))?"),K||(A+="(?="+T+"|"+C+")")}return new RegExp(A,u(b))}t.tokensToRegexp=p;function v(m,g,b){return m instanceof RegExp?d(m,g):Array.isArray(m)?f(m,g,b):h(m,g,b)}t.pathToRegexp=v})(),QC.exports=e})()),QC.exports}var v9;function Dot(){return v9||(v9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getPathMatch",{enumerable:!0,get:function(){return r}});const t=Gae();function r(n,a){const s=[],o=(0,t.pathToRegexp)(n,s,{delimiter:"/",sensitive:typeof(a==null?void 0:a.sensitive)=="boolean"?a.sensitive:!1,strict:a==null?void 0:a.strict}),l=(0,t.regexpToFunction)(a!=null&&a.regexModifier?new RegExp(a.regexModifier(o.source),o.flags):o,s);return(c,u)=>{if(typeof c!="string")return!1;const d=l(c);if(!d)return!1;if(a!=null&&a.removeUnnamedParams)for(const f of s)typeof f.name=="number"&&delete d.params[f.name];return{...u,...d.params}}}}(JC)),JC}var ek={},tk={},x9;function Kae(){return x9||(x9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"escapeStringRegexp",{enumerable:!0,get:function(){return n}});const t=/[|\\{}()[\]^$+*?.-]/,r=/[|\\{}()[\]^$+*?.-]/g;function n(a){return t.test(a)?a.replace(r,"\\$&"):a}}(tk)),tk}var rk={},y9;function Mot(){return y9||(y9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"parseUrl",{enumerable:!0,get:function(){return n}});const t=aE(),r=CI();function n(a){if(a.startsWith("/"))return(0,r.parseRelativeUrl)(a);const s=new URL(a);return{hash:s.hash,hostname:s.hostname,href:s.href,pathname:s.pathname,port:s.port,protocol:s.protocol,query:(0,t.searchParamsToUrlQuery)(s.searchParams),search:s.search}}}(rk)),rk}var nk={},ak={exports:{}},b9;function Iot(){return b9||(b9=1,(()=>{typeof __nccwpck_require__<"u"&&(__nccwpck_require__.ab=__dirname+"/");var e={};(()=>{var t=e;/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=o,t.serialize=l;var r=decodeURIComponent,n=encodeURIComponent,a=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(u,d){if(typeof u!="string")throw new TypeError("argument str must be a string");for(var f={},h=d||{},p=u.split(a),v=h.decode||r,m=0;m<p.length;m++){var g=p[m],b=g.indexOf("=");if(!(b<0)){var y=g.substr(0,b).trim(),w=g.substr(++b,g.length).trim();w[0]=='"'&&(w=w.slice(1,-1)),f[y]==null&&(f[y]=c(w,v))}}return f}function l(u,d,f){var h=f||{},p=h.encode||n;if(typeof p!="function")throw new TypeError("option encode is invalid");if(!s.test(u))throw new TypeError("argument name is invalid");var v=p(d);if(v&&!s.test(v))throw new TypeError("argument val is invalid");var m=u+"="+v;if(h.maxAge!=null){var g=h.maxAge-0;if(isNaN(g)||!isFinite(g))throw new TypeError("option maxAge is invalid");m+="; Max-Age="+Math.floor(g)}if(h.domain){if(!s.test(h.domain))throw new TypeError("option domain is invalid");m+="; Domain="+h.domain}if(h.path){if(!s.test(h.path))throw new TypeError("option path is invalid");m+="; Path="+h.path}if(h.expires){if(typeof h.expires.toUTCString!="function")throw new TypeError("option expires is invalid");m+="; Expires="+h.expires.toUTCString()}if(h.httpOnly&&(m+="; HttpOnly"),h.secure&&(m+="; Secure"),h.sameSite){var b=typeof h.sameSite=="string"?h.sameSite.toLowerCase():h.sameSite;switch(b){case!0:m+="; SameSite=Strict";break;case"lax":m+="; SameSite=Lax";break;case"strict":m+="; SameSite=Strict";break;case"none":m+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return m}function c(u,d){try{return d(u)}catch{return u}}})(),ak.exports=e})()),ak.exports}var w9;function $ot(){return w9||(w9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getCookieParser",{enumerable:!0,get:function(){return t}});function t(r){return function(){const{cookie:a}=r;if(!a)return{};const{parse:s}=Iot();return s(Array.isArray(a)?a.join("; "):a)}}}(nk)),nk}var _9;function Fot(){return _9||(_9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,m){for(var g in m)Object.defineProperty(v,g,{enumerable:!0,get:m[g]})}t(e,{compileNonPath:function(){return f},matchHas:function(){return d},parseDestination:function(){return h},prepareDestination:function(){return p}});const r=Gae(),n=Kae(),a=Mot(),s=EI(),o=$ot();function l(v){let m="";for(let g=0;g<v.length;g++){const b=v.charCodeAt(g);(b>64&&b<91||b>96&&b<123)&&(m+=v[g])}return m}function c(v,m){return v.replace(new RegExp(":"+(0,n.escapeStringRegexp)(m),"g"),"__ESC_COLON_"+m)}function u(v){return v.replace(/__ESC_COLON_/gi,":")}function d(v,m,g,b){g===void 0&&(g=[]),b===void 0&&(b=[]);const y={},w=S=>{let E,j=S.key;switch(S.type){case"header":{j=j.toLowerCase(),E=v.headers[j];break}case"cookie":{"cookies"in v?E=v.cookies[S.key]:E=(0,o.getCookieParser)(v.headers)()[S.key];break}case"query":{E=m[j];break}case"host":{const{host:N}=(v==null?void 0:v.headers)||{};E=N==null?void 0:N.split(":",1)[0].toLowerCase();break}}if(!S.value&&E)return y[l(j)]=E,!0;if(E){const N=new RegExp("^"+S.value+"$"),k=Array.isArray(E)?E.slice(-1)[0].match(N):E.match(N);if(k)return Array.isArray(k)&&(k.groups?Object.keys(k.groups).forEach(C=>{y[C]=k.groups[C]}):S.type==="host"&&k[0]&&(y.host=k[0])),!0}return!1};return g.every(S=>w(S))&&!b.some(S=>w(S))?y:!1}function f(v,m){if(!v.includes(":"))return v;for(const g of Object.keys(m))v.includes(":"+g)&&(v=v.replace(new RegExp(":"+g+"\\*","g"),":"+g+"--ESCAPED_PARAM_ASTERISKS").replace(new RegExp(":"+g+"\\?","g"),":"+g+"--ESCAPED_PARAM_QUESTION").replace(new RegExp(":"+g+"\\+","g"),":"+g+"--ESCAPED_PARAM_PLUS").replace(new RegExp(":"+g+"(?!\\w)","g"),"--ESCAPED_PARAM_COLON"+g));return v=v.replace(/(:|\*|\?|\+|\(|\)|\{|\})/g,"\\$1").replace(/--ESCAPED_PARAM_PLUS/g,"+").replace(/--ESCAPED_PARAM_COLON/g,":").replace(/--ESCAPED_PARAM_QUESTION/g,"?").replace(/--ESCAPED_PARAM_ASTERISKS/g,"*"),(0,r.compile)("/"+v,{validate:!1})(m).slice(1)}function h(v){let m=v.destination;for(const S of Object.keys({...v.params,...v.query}))S&&(m=c(m,S));const g=(0,a.parseUrl)(m);let b=g.pathname;b&&(b=u(b));let y=g.href;y&&(y=u(y));let w=g.hostname;w&&(w=u(w));let _=g.hash;return _&&(_=u(_)),{...g,pathname:b,hostname:w,href:y,hash:_}}function p(v){const m=Object.assign({},v.query),g=h(v),{hostname:b,query:y}=g;let w=g.pathname;g.hash&&(w=""+w+g.hash);const _=[],S=[];(0,r.pathToRegexp)(w,S);for(const C of S)_.push(C.name);if(b){const C=[];(0,r.pathToRegexp)(b,C);for(const T of C)_.push(T.name)}const E=(0,r.compile)(w,{validate:!1});let j;b&&(j=(0,r.compile)(b,{validate:!1}));for(const[C,T]of Object.entries(y))Array.isArray(T)?y[C]=T.map(A=>f(u(A),v.params)):typeof T=="string"&&(y[C]=f(u(T),v.params));let N=Object.keys(v.params).filter(C=>C!=="nextInternalLocale");if(v.appendParamsToQuery&&!N.some(C=>_.includes(C)))for(const C of N)C in y||(y[C]=v.params[C]);let k;if((0,s.isInterceptionRouteAppPath)(w))for(const C of w.split("/")){const T=s.INTERCEPTION_ROUTE_MARKERS.find(A=>C.startsWith(A));if(T){T==="(..)(..)"?(v.params[0]="(..)",v.params[1]="(..)"):v.params[0]=T;break}}try{k=E(v.params);const[C,T]=k.split("#",2);j&&(g.hostname=j(v.params)),g.pathname=C,g.hash=(T?"#":"")+(T||""),delete g.search}catch(C){throw C.message.match(/Expected .*? to not repeat, but got an array/)?Object.defineProperty(new Error("To use a multi-match in the destination you must add `*` at the end of the param name to signify it should repeat. https://nextjs.org/docs/messages/invalid-multi-match"),"__NEXT_ERROR_CODE",{value:"E329",enumerable:!1,configurable:!0}):C}return g.query={...m,...g.query},{newUrl:k,destQuery:y,parsedDestination:g}}}(ek)),ek}var y1={exports:{}},b1={exports:{}},sk={},ik={},S9;function y0(){return S9||(S9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"parsePath",{enumerable:!0,get:function(){return t}});function t(r){const n=r.indexOf("#"),a=r.indexOf("?"),s=a>-1&&(n<0||a<n);return s||n>-1?{pathname:r.substring(0,s?a:n),query:s?r.substring(a,n>-1?n:void 0):"",hash:n>-1?r.slice(n):""}:{pathname:r,query:"",hash:""}}}(ik)),ik}var j9;function sE(){return j9||(j9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"pathHasPrefix",{enumerable:!0,get:function(){return r}});const t=y0();function r(n,a){if(typeof n!="string")return!1;const{pathname:s}=(0,t.parsePath)(n);return s===a||s.startsWith(a+"/")}}(sk)),sk}var E9;function kI(){return E9||(E9=1,function(e,t){var r={};Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"hasBasePath",{enumerable:!0,get:function(){return s}});const n=sE(),a=r.__NEXT_ROUTER_BASEPATH||"";function s(o){return(0,n.pathHasPrefix)(o,a)}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(b1,b1.exports)),b1.exports}var N9;function Xae(){return N9||(N9=1,function(e,t){var r={};Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeBasePath",{enumerable:!0,get:function(){return s}});const n=kI(),a=r.__NEXT_ROUTER_BASEPATH||"";function s(o){return r.__NEXT_MANUAL_CLIENT_BASE_PATH&&!(0,n.hasBasePath)(o)||a.length===0||(o=o.slice(a.length),o.startsWith("/")||(o="/"+o)),o}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(y1,y1.exports)),y1.exports}var C9;function Lot(){return C9||(C9=1,function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return c}});const r=Dot(),n=Fot(),a=Uy(),s=NI(),o=Xae(),l=CI();function c(u,d,f,h,p,v){let m=!1,g=!1,b=(0,l.parseRelativeUrl)(u),y=(0,a.removeTrailingSlash)((0,s.normalizeLocalePath)((0,o.removeBasePath)(b.pathname),v).pathname),w;const _=E=>{let N=(0,r.getPathMatch)(E.source+(t.__NEXT_TRAILING_SLASH?"(/)?":""),{removeUnnamedParams:!0,strict:!0})(b.pathname);if((E.has||E.missing)&&N){const k=(0,n.matchHas)({headers:{host:document.location.hostname,"user-agent":navigator.userAgent},cookies:document.cookie.split("; ").reduce((C,T)=>{const[A,...B]=T.split("=");return C[A]=B.join("="),C},{})},b.query,E.has,E.missing);k?Object.assign(N,k):N=!1}if(N){if(!E.destination)return g=!0,!0;const k=(0,n.prepareDestination)({appendParamsToQuery:!0,destination:E.destination,params:N,query:h});if(b=k.parsedDestination,u=k.newUrl,Object.assign(h,k.parsedDestination.query),y=(0,a.removeTrailingSlash)((0,s.normalizeLocalePath)((0,o.removeBasePath)(u),v).pathname),d.includes(y))return m=!0,w=y,!0;if(w=p(y),w!==u&&d.includes(w))return m=!0,!0}};let S=!1;for(let E=0;E<f.beforeFiles.length;E++)_(f.beforeFiles[E]);if(m=d.includes(y),!m){if(!S){for(let E=0;E<f.afterFiles.length;E++)if(_(f.afterFiles[E])){S=!0;break}}if(S||(w=p(y),m=d.includes(w),S=m),!S){for(let E=0;E<f.fallback.length;E++)if(_(f.fallback[E])){S=!0;break}}}return{asPath:u,parsedAs:b,matchedPage:m,resolvedHref:w,externalDest:g}}}(ZC)),ZC}var ok={},k9;function Yae(){return k9||(k9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getRouteMatcher",{enumerable:!0,get:function(){return r}});const t=zy();function r(n){let{re:a,groups:s}=n;return o=>{const l=a.exec(o);if(!l)return!1;const c=d=>{try{return decodeURIComponent(d)}catch{throw Object.defineProperty(new t.DecodeError("failed to decode param"),"__NEXT_ERROR_CODE",{value:"E528",enumerable:!1,configurable:!0})}},u={};for(const[d,f]of Object.entries(s)){const h=l[f.pos];h!==void 0&&(f.repeat?u[d]=h.split("/").map(p=>c(p)):u[d]=c(h))}return u}}}(ok)),ok}var lk={},ck={},T9;function Zae(){return T9||(T9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(Y,ae){for(var ge in ae)Object.defineProperty(Y,ge,{enumerable:!0,get:ae[ge]})}t(e,{ACTION_SUFFIX:function(){return f},APP_DIR_ALIAS:function(){return P},CACHE_ONE_YEAR:function(){return j},DOT_NEXT_ALIAS:function(){return B},ESLINT_DEFAULT_DIRS:function(){return Re},GSP_NO_RETURNED_VALUE:function(){return Z},GSSP_COMPONENT_MEMBER_ERROR:function(){return ve},GSSP_NO_RETURNED_VALUE:function(){return I},INFINITE_CACHE:function(){return N},INSTRUMENTATION_HOOK_FILENAME:function(){return T},MATCHED_PATH_HEADER:function(){return a},MIDDLEWARE_FILENAME:function(){return k},MIDDLEWARE_LOCATION_REGEXP:function(){return C},NEXT_BODY_SUFFIX:function(){return v},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return E},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return g},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return b},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return S},NEXT_CACHE_TAGS_HEADER:function(){return m},NEXT_CACHE_TAG_MAX_ITEMS:function(){return w},NEXT_CACHE_TAG_MAX_LENGTH:function(){return _},NEXT_DATA_SUFFIX:function(){return h},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return n},NEXT_META_SUFFIX:function(){return p},NEXT_QUERY_PARAM_PREFIX:function(){return r},NEXT_RESUME_HEADER:function(){return y},NON_STANDARD_NODE_ENV:function(){return z},PAGES_DIR_ALIAS:function(){return A},PRERENDER_REVALIDATE_HEADER:function(){return s},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return o},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return O},ROOT_DIR_ALIAS:function(){return R},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return X},RSC_ACTION_ENCRYPTION_ALIAS:function(){return K},RSC_ACTION_PROXY_ALIAS:function(){return M},RSC_ACTION_VALIDATE_ALIAS:function(){return U},RSC_CACHE_WRAPPER_ALIAS:function(){return F},RSC_MOD_REF_PROXY_ALIAS:function(){return D},RSC_PREFETCH_SUFFIX:function(){return l},RSC_SEGMENTS_DIR_SUFFIX:function(){return c},RSC_SEGMENT_SUFFIX:function(){return u},RSC_SUFFIX:function(){return d},SERVER_PROPS_EXPORT_ERROR:function(){return q},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return L},SERVER_PROPS_SSG_CONFLICT:function(){return H},SERVER_RUNTIME:function(){return Pe},SSG_FALLBACK_EXPORT_ERROR:function(){return we},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return W},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return ee},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return Q},WEBPACK_LAYERS:function(){return Ne},WEBPACK_RESOURCE_QUERIES:function(){return J}});const r="nxtP",n="nxtI",a="x-matched-path",s="x-prerender-revalidate",o="x-prerender-revalidate-if-generated",l=".prefetch.rsc",c=".segments",u=".segment.rsc",d=".rsc",f=".action",h=".json",p=".meta",v=".body",m="x-next-cache-tags",g="x-next-revalidated-tags",b="x-next-revalidate-tag-token",y="next-resume",w=128,_=256,S=1024,E="_N_T_",j=31536e3,N=4294967294,k="middleware",C=`(?:src/)?${k}`,T="instrumentation",A="private-next-pages",B="private-dot-next",R="private-next-root-dir",P="private-next-app-dir",D="private-next-rsc-mod-ref-proxy",U="private-next-rsc-action-validate",M="private-next-rsc-server-reference",F="private-next-rsc-cache-wrapper",K="private-next-rsc-action-encryption",X="private-next-rsc-action-client-wrapper",O="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",W="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",L="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",H="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",ee="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",q="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",Z="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",I="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",Q="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",ve="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",z='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',we="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",Re=["app","pages","components","lib","src"],Pe={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},De={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},Ne={...De,GROUP:{builtinReact:[De.reactServerComponents,De.actionBrowser],serverOnly:[De.reactServerComponents,De.actionBrowser,De.instrument,De.middleware],neutralTarget:[De.apiNode,De.apiEdge],clientOnly:[De.serverSideRendering,De.appPagesBrowser],bundled:[De.reactServerComponents,De.actionBrowser,De.serverSideRendering,De.appPagesBrowser,De.shared,De.instrument,De.middleware],appPages:[De.reactServerComponents,De.serverSideRendering,De.appPagesBrowser,De.actionBrowser]}},J={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}}(ck)),ck}var A9;function Jae(){return A9||(A9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(g,b){for(var y in b)Object.defineProperty(g,y,{enumerable:!0,get:b[y]})}t(e,{getNamedMiddlewareRegex:function(){return m},getNamedRouteRegex:function(){return v},getRouteRegex:function(){return d},parseParameter:function(){return l}});const r=Zae(),n=EI(),a=Kae(),s=Uy(),o=/^([^[]*)\[((?:\[[^\]]*\])|[^\]]+)\](.*)$/;function l(g){const b=g.match(o);return c(b?b[2]:g)}function c(g){const b=g.startsWith("[")&&g.endsWith("]");b&&(g=g.slice(1,-1));const y=g.startsWith("...");return y&&(g=g.slice(3)),{key:g,repeat:y,optional:b}}function u(g,b,y){const w={};let _=1;const S=[];for(const E of(0,s.removeTrailingSlash)(g).slice(1).split("/")){const j=n.INTERCEPTION_ROUTE_MARKERS.find(k=>E.startsWith(k)),N=E.match(o);if(j&&N&&N[2]){const{key:k,optional:C,repeat:T}=c(N[2]);w[k]={pos:_++,repeat:T,optional:C},S.push("/"+(0,a.escapeStringRegexp)(j)+"([^/]+?)")}else if(N&&N[2]){const{key:k,repeat:C,optional:T}=c(N[2]);w[k]={pos:_++,repeat:C,optional:T},y&&N[1]&&S.push("/"+(0,a.escapeStringRegexp)(N[1]));let A=C?T?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)";y&&N[1]&&(A=A.substring(1)),S.push(A)}else S.push("/"+(0,a.escapeStringRegexp)(E));b&&N&&N[3]&&S.push((0,a.escapeStringRegexp)(N[3]))}return{parameterizedRoute:S.join(""),groups:w}}function d(g,b){let{includeSuffix:y=!1,includePrefix:w=!1,excludeOptionalTrailingSlash:_=!1}=b===void 0?{}:b;const{parameterizedRoute:S,groups:E}=u(g,y,w);let j=S;return _||(j+="(?:/)?"),{re:new RegExp("^"+j+"$"),groups:E}}function f(){let g=0;return()=>{let b="",y=++g;for(;y>0;)b+=String.fromCharCode(97+(y-1)%26),y=Math.floor((y-1)/26);return b}}function h(g){let{interceptionMarker:b,getSafeRouteKey:y,segment:w,routeKeys:_,keyPrefix:S,backreferenceDuplicateKeys:E}=g;const{key:j,optional:N,repeat:k}=c(w);let C=j.replace(/\W/g,"");S&&(C=""+S+C);let T=!1;(C.length===0||C.length>30)&&(T=!0),isNaN(parseInt(C.slice(0,1)))||(T=!0),T&&(C=y());const A=C in _;S?_[C]=""+S+j:_[C]=j;const B=b?(0,a.escapeStringRegexp)(b):"";let R;return A&&E?R="\\k<"+C+">":k?R="(?<"+C+">.+?)":R="(?<"+C+">[^/]+?)",N?"(?:/"+B+R+")?":"/"+B+R}function p(g,b,y,w,_){const S=f(),E={},j=[];for(const N of(0,s.removeTrailingSlash)(g).slice(1).split("/")){const k=n.INTERCEPTION_ROUTE_MARKERS.some(T=>N.startsWith(T)),C=N.match(o);if(k&&C&&C[2])j.push(h({getSafeRouteKey:S,interceptionMarker:C[1],segment:C[2],routeKeys:E,keyPrefix:b?r.NEXT_INTERCEPTION_MARKER_PREFIX:void 0,backreferenceDuplicateKeys:_}));else if(C&&C[2]){w&&C[1]&&j.push("/"+(0,a.escapeStringRegexp)(C[1]));let T=h({getSafeRouteKey:S,segment:C[2],routeKeys:E,keyPrefix:b?r.NEXT_QUERY_PARAM_PREFIX:void 0,backreferenceDuplicateKeys:_});w&&C[1]&&(T=T.substring(1)),j.push(T)}else j.push("/"+(0,a.escapeStringRegexp)(N));y&&C&&C[3]&&j.push((0,a.escapeStringRegexp)(C[3]))}return{namedParameterizedRoute:j.join(""),routeKeys:E}}function v(g,b){var y,w,_;const S=p(g,b.prefixRouteKeys,(y=b.includeSuffix)!=null?y:!1,(w=b.includePrefix)!=null?w:!1,(_=b.backreferenceDuplicateKeys)!=null?_:!1);let E=S.namedParameterizedRoute;return b.excludeOptionalTrailingSlash||(E+="(?:/)?"),{...d(g,b),namedRegex:"^"+E+"$",routeKeys:S.routeKeys}}function m(g,b){const{parameterizedRoute:y}=u(g,!1,!1),{catchAll:w=!0}=b;if(y==="/")return{namedRegex:"^/"+(w?".*":"")+"$"};const{namedParameterizedRoute:_}=p(g,!1,!1,!1,!1);let S=w?"(?:(/.*)?)":"";return{namedRegex:"^"+_+S+"$"}}}(lk)),lk}var uk={},P9;function Qae(){return P9||(P9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(c,u){for(var d in u)Object.defineProperty(c,d,{enumerable:!0,get:u[d]})}t(e,{formatUrl:function(){return s},formatWithValidation:function(){return l},urlObjectKeys:function(){return o}});const n=jI()._(aE()),a=/https?|ftp|gopher|file/;function s(c){let{auth:u,hostname:d}=c,f=c.protocol||"",h=c.pathname||"",p=c.hash||"",v=c.query||"",m=!1;u=u?encodeURIComponent(u).replace(/%3A/i,":")+"@":"",c.host?m=u+c.host:d&&(m=u+(~d.indexOf(":")?"["+d+"]":d),c.port&&(m+=":"+c.port)),v&&typeof v=="object"&&(v=String(n.urlQueryToSearchParams(v)));let g=c.search||v&&"?"+v||"";return f&&!f.endsWith(":")&&(f+=":"),c.slashes||(!f||a.test(f))&&m!==!1?(m="//"+(m||""),h&&h[0]!=="/"&&(h="/"+h)):m||(m=""),p&&p[0]!=="#"&&(p="#"+p),g&&g[0]!=="?"&&(g="?"+g),h=h.replace(/[?#]/g,encodeURIComponent),g=g.replace("#","%23"),""+f+m+h+g+p}const o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function l(c){return s(c)}}(uk)),uk}var w1={exports:{}},dk={},O9;function Bot(){return O9||(O9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"detectDomainLocale",{enumerable:!0,get:function(){return t}});function t(r,n,a){if(r){a&&(a=a.toLowerCase());for(const l of r){var s,o;const c=(s=l.domain)==null?void 0:s.split(":",1)[0].toLowerCase();if(n===c||a===l.defaultLocale.toLowerCase()||(o=l.locales)!=null&&o.some(u=>u.toLowerCase()===a))return l}}}}(dk)),dk}var R9;function Uot(){return R9||(R9=1,function(e,t){var r={};Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"detectDomainLocale",{enumerable:!0,get:function(){return n}});const n=function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];if(r.__NEXT_I18N_SUPPORT)return Bot().detectDomainLocale(...s)};(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(w1,w1.exports)),w1.exports}var _1={exports:{}},S1={exports:{}},D9;function TI(){return D9||(D9=1,function(e,t){var r={};Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizePathTrailingSlash",{enumerable:!0,get:function(){return s}});const n=Uy(),a=y0(),s=o=>{if(!o.startsWith("/")||r.__NEXT_MANUAL_TRAILING_SLASH)return o;const{pathname:l,query:c,hash:u}=(0,a.parsePath)(o);return r.__NEXT_TRAILING_SLASH?/\.[^/]+\/?$/.test(l)?""+(0,n.removeTrailingSlash)(l)+c+u:l.endsWith("/")?""+l+c+u:l+"/"+c+u:""+(0,n.removeTrailingSlash)(l)+c+u};(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(S1,S1.exports)),S1.exports}var fk={},hk={},M9;function AI(){return M9||(M9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"addPathPrefix",{enumerable:!0,get:function(){return r}});const t=y0();function r(n,a){if(!n.startsWith("/")||!a)return n;const{pathname:s,query:o,hash:l}=(0,t.parsePath)(n);return""+a+s+o+l}}(hk)),hk}var I9;function ese(){return I9||(I9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"addLocale",{enumerable:!0,get:function(){return n}});const t=AI(),r=sE();function n(a,s,o,l){if(!s||s===o)return a;const c=a.toLowerCase();return!l&&((0,r.pathHasPrefix)(c,"/api")||(0,r.pathHasPrefix)(c,"/"+s.toLowerCase()))?a:(0,t.addPathPrefix)(a,"/"+s)}}(fk)),fk}var $9;function zot(){return $9||($9=1,function(e,t){var r={};Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLocale",{enumerable:!0,get:function(){return a}});const n=TI(),a=function(s){for(var o=arguments.length,l=new Array(o>1?o-1:0),c=1;c<o;c++)l[c-1]=arguments[c];return r.__NEXT_I18N_SUPPORT?(0,n.normalizePathTrailingSlash)(ese().addLocale(s,...l)):s};(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(_1,_1.exports)),_1.exports}var j1={exports:{}},F9;function Wot(){return F9||(F9=1,function(e,t){var r={};Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeLocale",{enumerable:!0,get:function(){return a}});const n=y0();function a(s,o){if(r.__NEXT_I18N_SUPPORT){const{pathname:l}=(0,n.parsePath)(s),c=l.toLowerCase(),u=o==null?void 0:o.toLowerCase();return o&&(c.startsWith("/"+u+"/")||c==="/"+u)?(l.length===o.length+1?"/":"")+s.slice(o.length+1):s}return s}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(j1,j1.exports)),j1.exports}var E1={exports:{}},L9;function Vot(){return L9||(L9=1,function(e,t){var r={};Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addBasePath",{enumerable:!0,get:function(){return o}});const n=AI(),a=TI(),s=r.__NEXT_ROUTER_BASEPATH||"";function o(l,c){return(0,a.normalizePathTrailingSlash)(r.__NEXT_MANUAL_CLIENT_BASE_PATH&&!c?l:(0,n.addPathPrefix)(l,s))}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(E1,E1.exports)),E1.exports}var N1={exports:{}},mk={},B9;function tse(){return B9||(B9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"omit",{enumerable:!0,get:function(){return t}});function t(r,n){const a={};return Object.keys(r).forEach(s=>{n.includes(s)||(a[s]=r[s])}),a}}(mk)),mk}var pk={},U9;function rse(){return U9||(U9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"isLocalURL",{enumerable:!0,get:function(){return n}});const t=zy(),r=kI();function n(a){if(!(0,t.isAbsoluteUrl)(a))return!0;try{const s=(0,t.getLocationOrigin)(),o=new URL(a,s);return o.origin===s&&(0,r.hasBasePath)(o.pathname)}catch{return!1}}}(pk)),pk}var gk={},z9;function nse(){return z9||(z9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"interpolateAs",{enumerable:!0,get:function(){return n}});const t=Yae(),r=Jae();function n(a,s,o){let l="";const c=(0,r.getRouteRegex)(a),u=c.groups,d=(s!==a?(0,t.getRouteMatcher)(c)(s):"")||o;l=a;const f=Object.keys(u);return f.every(h=>{let p=d[h]||"";const{repeat:v,optional:m}=u[h];let g="["+(v?"...":"")+h+"]";return m&&(g=(p?"":"/")+"["+g+"]"),v&&!Array.isArray(p)&&(p=[p]),(m||h in d)&&(l=l.replace(g,v?p.map(b=>encodeURIComponent(b)).join("/"):encodeURIComponent(p))||"/")})||(l=""),{params:f,result:l}}}(gk)),gk}var W9;function Hot(){return W9||(W9=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"resolveHref",{enumerable:!0,get:function(){return d}});const r=aE(),n=Qae(),a=tse(),s=zy(),o=TI(),l=rse(),c=qae(),u=nse();function d(f,h,p){let v,m=typeof h=="string"?h:(0,n.formatWithValidation)(h);const g=m.match(/^[a-zA-Z]{1,}:\/\//),b=g?m.slice(g[0].length):m;if((b.split("?",1)[0]||"").match(/(\/\/|\\)/)){console.error("Invalid href '"+m+"' passed to next/router in page: '"+f.pathname+"'. Repeated forward-slashes (//) or backslashes \\ are not valid in the href.");const w=(0,s.normalizeRepeatedSlashes)(b);m=(g?g[0]:"")+w}if(!(0,l.isLocalURL)(m))return p?[m]:m;try{v=new URL(m.startsWith("#")?f.asPath:f.pathname,"http://n")}catch{v=new URL("/","http://n")}try{const w=new URL(m,v);w.pathname=(0,o.normalizePathTrailingSlash)(w.pathname);let _="";if((0,c.isDynamicRoute)(w.pathname)&&w.searchParams&&p){const E=(0,r.searchParamsToUrlQuery)(w.searchParams),{result:j,params:N}=(0,u.interpolateAs)(w.pathname,w.pathname,E);j&&(_=(0,n.formatWithValidation)({pathname:j,hash:w.hash,query:(0,a.omit)(E,N)}))}const S=w.origin===v.origin?w.href.slice(w.origin.length):w.href;return p?[S,_||S]:S}catch{return p?[m]:m}}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(N1,N1.exports)),N1.exports}var vk={},V9;function qot(){return V9||(V9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"isAPIRoute",{enumerable:!0,get:function(){return t}});function t(r){return r==="/api"||!!(r!=null&&r.startsWith("/api/"))}}(vk)),vk}var xk={},yk={},H9;function Got(){return H9||(H9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"removePathPrefix",{enumerable:!0,get:function(){return r}});const t=sE();function r(n,a){if(!(0,t.pathHasPrefix)(n,a))return n;const s=n.slice(a.length);return s.startsWith("/")?s:"/"+s}}(yk)),yk}var q9;function Kot(){return q9||(q9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getNextPathnameInfo",{enumerable:!0,get:function(){return a}});const t=NI(),r=Got(),n=sE();function a(s,o){var l;const{basePath:c,i18n:u,trailingSlash:d}=(l=o.nextConfig)!=null?l:{},f={pathname:s,trailingSlash:s!=="/"?s.endsWith("/"):d};c&&(0,n.pathHasPrefix)(f.pathname,c)&&(f.pathname=(0,r.removePathPrefix)(f.pathname,c),f.basePath=c);let h=f.pathname;if(f.pathname.startsWith("/_next/data/")&&f.pathname.endsWith(".json")){const v=f.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),m=v[0];f.buildId=m,h=v[1]!=="index"?"/"+v.slice(1).join("/"):"/",o.parseData===!0&&(f.pathname=h)}if(u){let v=o.i18nProvider?o.i18nProvider.analyze(f.pathname):(0,t.normalizeLocalePath)(f.pathname,u.locales);f.locale=v.detectedLocale;var p;f.pathname=(p=v.pathname)!=null?p:f.pathname,!v.detectedLocale&&f.buildId&&(v=o.i18nProvider?o.i18nProvider.analyze(h):(0,t.normalizeLocalePath)(h,u.locales),v.detectedLocale&&(f.locale=v.detectedLocale))}return f}}(xk)),xk}var bk={},wk={},G9;function Xot(){return G9||(G9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"addPathSuffix",{enumerable:!0,get:function(){return r}});const t=y0();function r(n,a){if(!n.startsWith("/")||!a)return n;const{pathname:s,query:o,hash:l}=(0,t.parsePath)(n);return""+s+a+o+l}}(wk)),wk}var K9;function Yot(){return K9||(K9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"formatNextPathnameInfo",{enumerable:!0,get:function(){return s}});const t=Uy(),r=AI(),n=Xot(),a=ese();function s(o){let l=(0,a.addLocale)(o.pathname,o.locale,o.buildId?void 0:o.defaultLocale,o.ignorePrefix);return(o.buildId||!o.trailingSlash)&&(l=(0,t.removeTrailingSlash)(l)),o.buildId&&(l=(0,n.addPathSuffix)((0,r.addPathPrefix)(l,"/_next/data/"+o.buildId),o.pathname==="/"?"index.json":".json")),l=(0,r.addPathPrefix)(l,o.basePath),!o.buildId&&o.trailingSlash?l.endsWith("/")?l:(0,n.addPathSuffix)(l,"/"):(0,t.removeTrailingSlash)(l)}}(bk)),bk}var _k={},X9;function Zot(){return X9||(X9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"compareRouterStates",{enumerable:!0,get:function(){return t}});function t(r,n){const a=Object.keys(r);if(a.length!==Object.keys(n).length)return!1;for(let s=a.length;s--;){const o=a[s];if(o==="query"){const l=Object.keys(r.query);if(l.length!==Object.keys(n.query).length)return!1;for(let c=l.length;c--;){const u=l[c];if(!n.query.hasOwnProperty(u)||r.query[u]!==n.query[u])return!1}}else if(!n.hasOwnProperty(o)||r[o]!==n[o])return!1}return!0}}(_k)),_k}var Sk={},jk={},Y9;function Jot(){return Y9||(Y9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"HTML_LIMITED_BOT_UA_RE",{enumerable:!0,get:function(){return t}});const t=/Mediapartners-Google|Slurp|DuckDuckBot|baiduspider|yandex|sogou|bitlybot|tumblr|vkShare|quora link preview|redditbot|ia_archiver|Bingbot|BingPreview|applebot|facebookexternalhit|facebookcatalog|Twitterbot|LinkedInBot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|Yeti/i}(jk)),jk}var Z9;function Qot(){return Z9||(Z9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(u,d){for(var f in d)Object.defineProperty(u,f,{enumerable:!0,get:d[f]})}t(e,{HTML_LIMITED_BOT_UA_RE:function(){return r.HTML_LIMITED_BOT_UA_RE},HTML_LIMITED_BOT_UA_RE_STRING:function(){return a},getBotType:function(){return c},isBot:function(){return l}});const r=Jot(),n=/Googlebot|Google-PageRenderer|AdsBot-Google|googleweblight|Storebot-Google/i,a=r.HTML_LIMITED_BOT_UA_RE.source;function s(u){return n.test(u)}function o(u){return r.HTML_LIMITED_BOT_UA_RE.test(u)}function l(u){return s(u)||o(u)}function c(u){if(s(u))return"dom";if(o(u))return"html"}}(Sk)),Sk}var Ek={},J9;function elt(){return J9||(J9=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"handleSmoothScroll",{enumerable:!0,get:function(){return t}});function t(r,n){if(n===void 0&&(n={}),n.onlyHashChange){r();return}const a=document.documentElement,s=a.style.scrollBehavior;a.style.scrollBehavior="auto",n.dontForceLayout||a.getClientRects(),r(),a.style.scrollBehavior=s}}(Ek)),Ek}var Nk={},Ck={exports:{}};const tlt={},rlt=Object.freeze(Object.defineProperty({__proto__:null,default:tlt},Symbol.toStringTag,{value:"Module"})),kk=mU(rlt);var Q9;function nlt(){return Q9||(Q9=1,(()=>{var e={154:(a,s,o)=>{var l=o(781),c=["write","end","destroy"],u=["resume","pause"],d=["data","close"],f=Array.prototype.slice;a.exports=p;function h(v,m){if(v.forEach)return v.forEach(m);for(var g=0;g<v.length;g++)m(v[g],g)}function p(v,m){var g=new l,b=!1;return h(c,y),h(u,w),h(d,_),m.on("end",S),v.on("drain",function(){g.emit("drain")}),v.on("error",E),m.on("error",E),g.writable=v.writable,g.readable=m.readable,g;function y(j){g[j]=N;function N(){return v[j].apply(v,arguments)}}function w(j){g[j]=N;function N(){g.emit(j);var k=m[j];if(k)return k.apply(m,arguments);m.emit(j)}}function _(j){m.on(j,N);function N(){var k=f.call(arguments);k.unshift(j),g.emit.apply(g,k)}}function S(){if(!b){b=!0;var j=f.call(arguments);j.unshift("end"),g.emit.apply(g,j)}}function E(j){g.emit("error",j)}}},349:(a,s,o)=>{const l=o(147),c=o(781),u=o(796),d=o(154),f=o(530),h=p=>Object.assign({level:9},p);a.exports=(p,v)=>p?f(u.gzip)(p,h(v)).then(m=>m.length).catch(m=>0):Promise.resolve(0),a.exports.sync=(p,v)=>u.gzipSync(p,h(v)).length,a.exports.stream=p=>{const v=new c.PassThrough,m=new c.PassThrough,g=d(v,m);let b=0;const y=u.createGzip(h(p)).on("data",w=>{b+=w.length}).on("error",()=>{g.gzipSize=0}).on("end",()=>{g.gzipSize=b,g.emit("gzip-size",b),m.end()});return v.pipe(y),v.pipe(m,{end:!1}),g},a.exports.file=(p,v)=>new Promise((m,g)=>{const b=l.createReadStream(p);b.on("error",g);const y=b.pipe(a.exports.stream(v));y.on("error",g),y.on("gzip-size",m)}),a.exports.fileSync=(p,v)=>a.exports.sync(l.readFileSync(p),v)},530:a=>{const s=(o,l)=>function(...c){const u=l.promiseModule;return new u((d,f)=>{l.multiArgs?c.push((...h)=>{l.errorFirst?h[0]?f(h):(h.shift(),d(h)):d(h)}):l.errorFirst?c.push((h,p)=>{h?f(h):d(p)}):c.push(d),o.apply(this,c)})};a.exports=(o,l)=>{l=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},l);const c=typeof o;if(!(o!==null&&(c==="object"||c==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${o===null?"null":c}\``);const u=f=>{const h=p=>typeof p=="string"?f===p:p.test(f);return l.include?l.include.some(h):!l.exclude.some(h)};let d;c==="function"?d=function(...f){return l.excludeMain?o(...f):s(o,l).apply(this,f)}:d=Object.create(Object.getPrototypeOf(o));for(const f in o){const h=o[f];d[f]=typeof h=="function"&&u(f)?s(h,l):h}return d}},147:a=>{a.exports=kk},781:a=>{a.exports=kk},796:a=>{a.exports=kk}},t={};function r(a){var s=t[a];if(s!==void 0)return s.exports;var o=t[a]={exports:{}},l=!0;try{e[a](o,o.exports,r),l=!1}finally{l&&delete t[a]}return o.exports}typeof r<"u"&&(r.ab=__dirname+"/");var n=r(349);Ck.exports=n})()),Ck.exports}var eU;function alt(){return eU||(eU=1,function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BloomFilter",{enumerable:!0,get:function(){return a}});function r(s){let o=0;for(let l=0;l<s.length;l++){const c=s.charCodeAt(l);o=Math.imul(o^c,1540483477),o^=o>>>13,o=Math.imul(o,1540483477)}return o>>>0}const n=1e-4;class a{static from(o,l){l===void 0&&(l=n);const c=new a(o.length,l);for(const u of o)c.add(u);return c}export(){const o={numItems:this.numItems,errorRate:this.errorRate,numBits:this.numBits,numHashes:this.numHashes,bitArray:this.bitArray};if(t.NEXT_RUNTIME==="nodejs"&&this.errorRate<n){const l=JSON.stringify(o),c=nlt().sync(l);c>1024&&console.warn("Creating filter with error rate less than 0.1% (0.001) can increase the size dramatically proceed with caution. Received error rate "+this.errorRate+" resulted in size "+l.length+" bytes, "+c+" bytes (gzip)")}return o}import(o){this.numItems=o.numItems,this.errorRate=o.errorRate,this.numBits=o.numBits,this.numHashes=o.numHashes,this.bitArray=o.bitArray}add(o){this.getHashValues(o).forEach(c=>{this.bitArray[c]=1})}contains(o){return this.getHashValues(o).every(c=>this.bitArray[c])}getHashValues(o){const l=[];for(let c=1;c<=this.numHashes;c++){const u=r(""+o+c)%this.numBits;l.push(u)}return l}constructor(o,l=n){this.numItems=o,this.errorRate=l,this.numBits=Math.ceil(-(o*Math.log(l))/(Math.log(2)*Math.log(2))),this.numHashes=Math.ceil(this.numBits/o*Math.log(2)),this.bitArray=new Array(this.numBits).fill(0)}}}(Nk)),Nk}var tU;function slt(){return tU||(tU=1,function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0});function r(Ne,J){for(var Y in J)Object.defineProperty(Ne,Y,{enumerable:!0,get:J[Y]})}r(e,{createKey:function(){return we},default:function(){return De},matchesMiddleware:function(){return O}});const n=ch,a=jI(),s=Uy(),o=_ot(),l=Eot(),c=a._(Vae()),u=Oot(),d=NI(),f=n._(Rot()),h=zy(),p=Hae(),v=CI(),m=n._(Lot()),g=Yae(),b=Jae(),y=Qae(),w=Uot(),_=y0(),S=zot(),E=Wot(),j=Xae(),N=Vot(),k=kI(),C=Hot(),T=qot(),A=Kot(),B=Yot(),R=Zot(),P=rse(),D=Qot(),U=tse(),M=nse(),F=elt(),K=Zae();function X(){return Object.assign(Object.defineProperty(new Error("Route Cancelled"),"__NEXT_ERROR_CODE",{value:"E315",enumerable:!1,configurable:!0}),{cancelled:!0})}async function O(Ne){const J=await Promise.resolve(Ne.router.pageLoader.getMiddleware());if(!J)return!1;const{pathname:Y}=(0,_.parsePath)(Ne.asPath),ae=(0,k.hasBasePath)(Y)?(0,j.removeBasePath)(Y):Y,ge=(0,N.addBasePath)((0,S.addLocale)(ae,Ne.locale));return J.some(Se=>new RegExp(Se.regexp).test(ge))}function W(Ne){const J=(0,h.getLocationOrigin)();return Ne.startsWith(J)?Ne.substring(J.length):Ne}function L(Ne,J,Y){let[ae,ge]=(0,C.resolveHref)(Ne,J,!0);const Se=(0,h.getLocationOrigin)(),te=ae.startsWith(Se),me=ge&&ge.startsWith(Se);ae=W(ae),ge=ge&&W(ge);const ke=te?ae:(0,N.addBasePath)(ae),he=Y?W((0,C.resolveHref)(Ne,Y)):ge||ae;return{url:ke,as:me?he:(0,N.addBasePath)(he)}}function H(Ne,J){const Y=(0,s.removeTrailingSlash)((0,u.denormalizePagePath)(Ne));return Y==="/404"||Y==="/_error"?Ne:(J.includes(Y)||J.some(ae=>{if((0,p.isDynamicRoute)(ae)&&(0,b.getRouteRegex)(ae).re.test(Y))return Ne=ae,!0}),(0,s.removeTrailingSlash)(Ne))}function ee(Ne,J,Y){const ae={basePath:Y.router.basePath,i18n:{locales:Y.router.locales},trailingSlash:!!t.__NEXT_TRAILING_SLASH},ge=J.headers.get("x-nextjs-rewrite");let Se=ge||J.headers.get("x-nextjs-matched-path");const te=J.headers.get(K.MATCHED_PATH_HEADER);if(te&&!Se&&!te.includes("__next_data_catchall")&&!te.includes("/_error")&&!te.includes("/404")&&(Se=te),Se){if(Se.startsWith("/")||t.__NEXT_EXTERNAL_MIDDLEWARE_REWRITE_RESOLVE){const et=(0,v.parseRelativeUrl)(Se),nt=(0,A.getNextPathnameInfo)(et.pathname,{nextConfig:ae,parseData:!0});let Oe=(0,s.removeTrailingSlash)(nt.pathname);return Promise.all([Y.router.pageLoader.getPageList(),(0,o.getClientBuildManifest)()]).then(Ye=>{let[ye,{__rewrites:le}]=Ye,_e=(0,S.addLocale)(nt.pathname,nt.locale);if((0,p.isDynamicRoute)(_e)||!ge&&ye.includes((0,d.normalizeLocalePath)((0,j.removeBasePath)(_e),Y.router.locales).pathname)){const Ie=(0,A.getNextPathnameInfo)((0,v.parseRelativeUrl)(Ne).pathname,{nextConfig:t.__NEXT_HAS_REWRITES?void 0:ae,parseData:!0});_e=(0,N.addBasePath)(Ie.pathname),et.pathname=_e}if(t.__NEXT_HAS_REWRITES){const Ie=(0,m.default)(_e,ye,le,et.query,it=>H(it,ye),Y.router.locales);Ie.matchedPage&&(et.pathname=Ie.parsedAs.pathname,_e=et.pathname,Object.assign(et.query,Ie.parsedAs.query))}else if(!ye.includes(Oe)){const Ie=H(Oe,ye);Ie!==Oe&&(Oe=Ie)}const Be=ye.includes(Oe)?Oe:H((0,d.normalizeLocalePath)((0,j.removeBasePath)(et.pathname),Y.router.locales).pathname,ye);if((0,p.isDynamicRoute)(Be)){const Ie=(0,g.getRouteMatcher)((0,b.getRouteRegex)(Be))(_e);Object.assign(et.query,Ie||{})}return{type:"rewrite",parsedAs:et,resolvedHref:Be}})}const ke=(0,_.parsePath)(Ne),he=(0,B.formatNextPathnameInfo)({...(0,A.getNextPathnameInfo)(ke.pathname,{nextConfig:ae,parseData:!0}),defaultLocale:Y.router.defaultLocale,buildId:""});return Promise.resolve({type:"redirect-external",destination:""+he+ke.query+ke.hash})}const me=J.headers.get("x-nextjs-redirect");if(me){if(me.startsWith("/")){const ke=(0,_.parsePath)(me),he=(0,B.formatNextPathnameInfo)({...(0,A.getNextPathnameInfo)(ke.pathname,{nextConfig:ae,parseData:!0}),defaultLocale:Y.router.defaultLocale,buildId:""});return Promise.resolve({type:"redirect-internal",newAs:""+he+ke.query+ke.hash,newUrl:""+he+ke.query+ke.hash})}return Promise.resolve({type:"redirect-external",destination:me})}return Promise.resolve({type:"next"})}async function q(Ne){if(!await O(Ne)||!Ne.fetchData)return null;const Y=await Ne.fetchData(),ae=await ee(Y.dataHref,Y.response,Ne);return{dataHref:Y.dataHref,json:Y.json,response:Y.response,text:Y.text,cacheKey:Y.cacheKey,effect:ae}}const Z=t.__NEXT_SCROLL_RESTORATION&&typeof window<"u"&&"scrollRestoration"in window.history&&!!function(){try{let Ne="__next";return sessionStorage.setItem(Ne,Ne),sessionStorage.removeItem(Ne),!0}catch{}}(),I=Symbol("SSG_DATA_NOT_FOUND");function Q(Ne,J,Y){return fetch(Ne,{credentials:"same-origin",method:Y.method||"GET",headers:Object.assign({},Y.headers,{"x-nextjs-data":"1"})}).then(ae=>!ae.ok&&J>1&&ae.status>=500?Q(Ne,J-1,Y):ae)}function ve(Ne){try{return JSON.parse(Ne)}catch{return null}}function z(Ne){let{dataHref:J,inflightCache:Y,isPrefetch:ae,hasMiddleware:ge,isServerRender:Se,parseJSON:te,persistCache:me,isBackground:ke,unstable_skipClientCache:he}=Ne;const{href:et}=new URL(J,window.location.href),nt=Oe=>{var Ye;return Q(J,Se?3:1,{headers:Object.assign({},ae?{purpose:"prefetch"}:{},ae&&ge?{"x-middleware-prefetch":"1"}:{},t.NEXT_DEPLOYMENT_ID?{"x-deployment-id":t.NEXT_DEPLOYMENT_ID}:{}),method:(Ye=Oe==null?void 0:Oe.method)!=null?Ye:"GET"}).then(ye=>ye.ok&&(Oe==null?void 0:Oe.method)==="HEAD"?{dataHref:J,response:ye,text:"",json:{},cacheKey:et}:ye.text().then(le=>{if(!ye.ok){if(ge&&[301,302,307,308].includes(ye.status))return{dataHref:J,response:ye,text:le,json:{},cacheKey:et};if(ye.status===404){var _e;if((_e=ve(le))!=null&&_e.notFound)return{dataHref:J,json:{notFound:I},response:ye,text:le,cacheKey:et}}const Be=Object.defineProperty(new Error("Failed to load static props"),"__NEXT_ERROR_CODE",{value:"E124",enumerable:!1,configurable:!0});throw Se||(0,o.markAssetError)(Be),Be}return{dataHref:J,json:te?ve(le):null,response:ye,text:le,cacheKey:et}})).then(ye=>((!me||ye.response.headers.get("x-middleware-cache")==="no-cache")&&delete Y[et],ye)).catch(ye=>{throw he||delete Y[et],(ye.message==="Failed to fetch"||ye.message==="NetworkError when attempting to fetch resource."||ye.message==="Load failed")&&(0,o.markAssetError)(ye),ye})};return he&&me?nt({}).then(Oe=>(Oe.response.headers.get("x-middleware-cache")!=="no-cache"&&(Y[et]=Promise.resolve(Oe)),Oe)):Y[et]!==void 0?Y[et]:Y[et]=nt(ke?{method:"HEAD"}:{})}function we(){return Math.random().toString(36).slice(2,10)}function Re(Ne){let{url:J,router:Y}=Ne;if(J===(0,N.addBasePath)((0,S.addLocale)(Y.asPath,Y.locale)))throw Object.defineProperty(new Error("Invariant: attempted to hard navigate to the same URL "+J+" "+location.href),"__NEXT_ERROR_CODE",{value:"E282",enumerable:!1,configurable:!0});window.location.href=J}const Pe=Ne=>{let{route:J,router:Y}=Ne,ae=!1;const ge=Y.clc=()=>{ae=!0};return()=>{if(ae){const te=Object.defineProperty(new Error('Abort fetching component for route: "'+J+'"'),"__NEXT_ERROR_CODE",{value:"E483",enumerable:!1,configurable:!0});throw te.cancelled=!0,te}ge===Y.clc&&(Y.clc=null)}};class De{reload(){window.location.reload()}back(){window.history.back()}forward(){window.history.forward()}push(J,Y,ae){if(ae===void 0&&(ae={}),t.__NEXT_SCROLL_RESTORATION&&Z)try{sessionStorage.setItem("__next_scroll_"+this._key,JSON.stringify({x:self.pageXOffset,y:self.pageYOffset}))}catch{}return{url:J,as:Y}=L(this,J,Y),this.change("pushState",J,Y,ae)}replace(J,Y,ae){return ae===void 0&&(ae={}),{url:J,as:Y}=L(this,J,Y),this.change("replaceState",J,Y,ae)}async _bfl(J,Y,ae,ge){if(t.__NEXT_CLIENT_ROUTER_FILTER_ENABLED){if(!this._bfl_s&&!this._bfl_d){const{BloomFilter:nt}=alt();let Oe,Ye;try{({__routerFilterStatic:Oe,__routerFilterDynamic:Ye}=await(0,o.getClientBuildManifest)())}catch(_e){return console.error(_e),ge?!0:(Re({url:(0,N.addBasePath)((0,S.addLocale)(J,ae||this.locale,this.defaultLocale)),router:this}),new Promise(()=>{}))}const ye=t.__NEXT_CLIENT_ROUTER_S_FILTER;!Oe&&ye&&(Oe=ye||void 0);const le=t.__NEXT_CLIENT_ROUTER_D_FILTER;!Ye&&le&&(Ye=le||void 0),Oe!=null&&Oe.numHashes&&(this._bfl_s=new nt(Oe.numItems,Oe.errorRate),this._bfl_s.import(Oe)),Ye!=null&&Ye.numHashes&&(this._bfl_d=new nt(Ye.numItems,Ye.errorRate),this._bfl_d.import(Ye))}let ke=!1,he=!1;const et=[{as:J},{as:Y}];for(const{as:nt,allowMatchCurrent:Oe}of et)if(nt){const Ye=(0,s.removeTrailingSlash)(new URL(nt,"http://n").pathname),ye=(0,N.addBasePath)((0,S.addLocale)(Ye,ae||this.locale));if(Oe||Ye!==(0,s.removeTrailingSlash)(new URL(this.asPath,"http://n").pathname)){var Se,te;ke=ke||!!((Se=this._bfl_s)!=null&&Se.contains(Ye))||!!((te=this._bfl_s)!=null&&te.contains(ye));for(const le of[Ye,ye]){const _e=le.split("/");for(let Be=0;!he&&Be<_e.length+1;Be++){var me;const Ie=_e.slice(0,Be).join("/");if(Ie&&((me=this._bfl_d)!=null&&me.contains(Ie))){he=!0;break}}}if(ke||he)return ge?!0:(Re({url:(0,N.addBasePath)((0,S.addLocale)(J,ae||this.locale,this.defaultLocale)),router:this}),new Promise(()=>{}))}}}return!1}async change(J,Y,ae,ge,Se){var te;if(!(0,P.isLocalURL)(Y))return Re({url:Y,router:this}),!1;const me=ge._h===1;!me&&!ge.shallow&&await this._bfl(ae,void 0,ge.locale);let ke=me||ge._shouldResolveHref||(0,_.parsePath)(Y).pathname===(0,_.parsePath)(ae).pathname;const he={...this.state},et=this.isReady!==!0;this.isReady=!0;const nt=this.isSsr;if(me||(this.isSsr=!1),me&&this.clc)return!1;const Oe=he.locale;if(t.__NEXT_I18N_SUPPORT){he.locale=ge.locale===!1?this.defaultLocale:ge.locale||he.locale,typeof ge.locale>"u"&&(ge.locale=he.locale);const V=(0,v.parseRelativeUrl)((0,k.hasBasePath)(ae)?(0,j.removeBasePath)(ae):ae),oe=(0,d.normalizeLocalePath)(V.pathname,this.locales);oe.detectedLocale&&(he.locale=oe.detectedLocale,V.pathname=(0,N.addBasePath)(V.pathname),ae=(0,y.formatWithValidation)(V),Y=(0,N.addBasePath)((0,d.normalizeLocalePath)((0,k.hasBasePath)(Y)?(0,j.removeBasePath)(Y):Y,this.locales).pathname));let re=!1;if(t.__NEXT_I18N_SUPPORT){var Ye;(Ye=this.locales)!=null&&Ye.includes(he.locale)||(V.pathname=(0,S.addLocale)(V.pathname,he.locale),Re({url:(0,y.formatWithValidation)(V),router:this}),re=!0)}const se=(0,w.detectDomainLocale)(this.domainLocales,void 0,he.locale);if(t.__NEXT_I18N_SUPPORT&&!re&&se&&this.isLocaleDomain&&self.location.hostname!==se.domain){const ce=(0,j.removeBasePath)(ae);Re({url:"http"+(se.http?"":"s")+"://"+se.domain+(0,N.addBasePath)((he.locale===se.defaultLocale?"":"/"+he.locale)+(ce==="/"?"":ce)||"/"),router:this}),re=!0}if(re)return new Promise(()=>{})}h.ST&&performance.mark("routeChange");const{shallow:ye=!1,scroll:le=!0}=ge,_e={shallow:ye};this._inFlightRoute&&this.clc&&(nt||De.events.emit("routeChangeError",X(),this._inFlightRoute,_e),this.clc(),this.clc=null),ae=(0,N.addBasePath)((0,S.addLocale)((0,k.hasBasePath)(ae)?(0,j.removeBasePath)(ae):ae,ge.locale,this.defaultLocale));const Be=(0,E.removeLocale)((0,k.hasBasePath)(ae)?(0,j.removeBasePath)(ae):ae,he.locale);this._inFlightRoute=ae;const Ie=Oe!==he.locale;if(!me&&this.onlyAHashChange(Be)&&!Ie){he.asPath=Be,De.events.emit("hashChangeStart",ae,_e),this.changeState(J,Y,ae,{...ge,scroll:!1}),le&&this.scrollToHash(Be);try{await this.set(he,this.components[he.route],null)}catch(V){throw(0,c.default)(V)&&V.cancelled&&De.events.emit("routeChangeError",V,Be,_e),V}return De.events.emit("hashChangeComplete",ae,_e),!0}let it=(0,v.parseRelativeUrl)(Y),{pathname:tt,query:Ze}=it,ct,St;try{[ct,{__rewrites:St}]=await Promise.all([this.pageLoader.getPageList(),(0,o.getClientBuildManifest)(),this.pageLoader.getMiddleware()])}catch{return Re({url:ae,router:this}),!1}!this.urlIsNew(Be)&&!Ie&&(J="replaceState");let ie=ae;tt=tt&&(0,s.removeTrailingSlash)((0,j.removeBasePath)(tt));let be=(0,s.removeTrailingSlash)(tt);const Je=ae.startsWith("/")&&(0,v.parseRelativeUrl)(ae).pathname;if((te=this.components[tt])!=null&&te.__appRouter)return Re({url:ae,router:this}),new Promise(()=>{});const Et=!!(Je&&be!==Je&&(!(0,p.isDynamicRoute)(be)||!(0,g.getRouteMatcher)((0,b.getRouteRegex)(be))(Je))),Ke=!ge.shallow&&await O({asPath:ae,locale:he.locale,router:this});if(me&&Ke&&(ke=!1),ke&&tt!=="/_error")if(ge._shouldResolveHref=!0,t.__NEXT_HAS_REWRITES&&ae.startsWith("/")){const V=(0,m.default)((0,N.addBasePath)((0,S.addLocale)(Be,he.locale),!0),ct,St,Ze,oe=>H(oe,ct),this.locales);if(V.externalDest)return Re({url:ae,router:this}),!0;Ke||(ie=V.asPath),V.matchedPage&&V.resolvedHref&&(tt=V.resolvedHref,it.pathname=(0,N.addBasePath)(tt),Ke||(Y=(0,y.formatWithValidation)(it)))}else it.pathname=H(tt,ct),it.pathname!==tt&&(tt=it.pathname,it.pathname=(0,N.addBasePath)(tt),Ke||(Y=(0,y.formatWithValidation)(it)));if(!(0,P.isLocalURL)(ae))return Re({url:ae,router:this}),!1;ie=(0,E.removeLocale)((0,j.removeBasePath)(ie),he.locale),be=(0,s.removeTrailingSlash)(tt);let Pt=!1;if((0,p.isDynamicRoute)(be)){const V=(0,v.parseRelativeUrl)(ie),oe=V.pathname,re=(0,b.getRouteRegex)(be);Pt=(0,g.getRouteMatcher)(re)(oe);const se=be===oe,ce=se?(0,M.interpolateAs)(be,oe,Ze):{};if(!Pt||se&&!ce.result){const fe=Object.keys(re.groups).filter(Ce=>!Ze[Ce]&&!re.groups[Ce].optional);if(fe.length>0&&!Ke)throw Object.defineProperty(new Error((se?"The provided `href` ("+Y+") value is missing query values ("+fe.join(", ")+") to be interpolated properly. ":"The provided `as` value ("+oe+") is incompatible with the `href` value ("+be+"). ")+("Read more: https://nextjs.org/docs/messages/"+(se?"href-interpolation-failed":"incompatible-href-as"))),"__NEXT_ERROR_CODE",{value:"E344",enumerable:!1,configurable:!0})}else se?ae=(0,y.formatWithValidation)(Object.assign({},V,{pathname:ce.result,query:(0,U.omit)(Ze,ce.params)})):Object.assign(Ze,Pt)}me||De.events.emit("routeChangeStart",ae,_e);const Ht=this.pathname==="/404"||this.pathname==="/_error";try{var pe,ze,yt;let V=await this.getRouteInfo({route:be,pathname:tt,query:Ze,as:ae,resolvedAs:ie,routeProps:_e,locale:he.locale,isPreview:he.isPreview,hasMiddleware:Ke,unstable_skipClientCache:ge.unstable_skipClientCache,isQueryUpdating:me&&!this.isFallback,isMiddlewareRewrite:Et});if(!me&&!ge.shallow&&await this._bfl(ae,"resolvedAs"in V?V.resolvedAs:void 0,he.locale),"route"in V&&Ke){tt=V.route||be,be=tt,_e.shallow||(Ze=Object.assign({},V.query||{},Ze));const Ee=(0,k.hasBasePath)(it.pathname)?(0,j.removeBasePath)(it.pathname):it.pathname;if(Pt&&tt!==Ee&&Object.keys(Pt).forEach(je=>{Pt&&Ze[je]===Pt[je]&&delete Ze[je]}),(0,p.isDynamicRoute)(tt)){let Te=!_e.shallow&&V.resolvedAs?V.resolvedAs:(0,N.addBasePath)((0,S.addLocale)(new URL(ae,location.href).pathname,he.locale),!0);if((0,k.hasBasePath)(Te)&&(Te=(0,j.removeBasePath)(Te)),t.__NEXT_I18N_SUPPORT){const xt=(0,d.normalizeLocalePath)(Te,this.locales);he.locale=xt.detectedLocale||he.locale,Te=xt.pathname}const Qe=(0,b.getRouteRegex)(tt),lt=(0,g.getRouteMatcher)(Qe)(new URL(Te,location.href).pathname);lt&&Object.assign(Ze,lt)}}if("type"in V)return V.type==="redirect-internal"?this.change(J,V.newUrl,V.newAs,ge):(Re({url:V.destination,router:this}),new Promise(()=>{}));const oe=V.Component;if(oe&&oe.unstable_scriptLoader&&[].concat(oe.unstable_scriptLoader()).forEach(je=>{(0,l.handleClientScriptLoad)(je.props)}),(V.__N_SSG||V.__N_SSP)&&V.props){if(V.props.pageProps&&V.props.pageProps.__N_REDIRECT){ge.locale=!1;const Ee=V.props.pageProps.__N_REDIRECT;if(Ee.startsWith("/")&&V.props.pageProps.__N_REDIRECT_BASE_PATH!==!1){const je=(0,v.parseRelativeUrl)(Ee);je.pathname=H(je.pathname,ct);const{url:Te,as:Qe}=L(this,Ee,Ee);return this.change(J,Te,Qe,ge)}return Re({url:Ee,router:this}),new Promise(()=>{})}if(he.isPreview=!!V.props.__N_PREVIEW,V.props.notFound===I){let Ee;try{await this.fetchComponent("/404"),Ee="/404"}catch{Ee="/_error"}if(V=await this.getRouteInfo({route:Ee,pathname:Ee,query:Ze,as:ae,resolvedAs:ie,routeProps:{shallow:!1},locale:he.locale,isPreview:he.isPreview,isNotFound:!0}),"type"in V)throw Object.defineProperty(new Error("Unexpected middleware effect on /404"),"__NEXT_ERROR_CODE",{value:"E158",enumerable:!1,configurable:!0})}}me&&this.pathname==="/_error"&&((ze=self.__NEXT_DATA__.props)==null||(pe=ze.pageProps)==null?void 0:pe.statusCode)===500&&((yt=V.props)!=null&&yt.pageProps)&&(V.props.pageProps.statusCode=500);var Rt;const re=ge.shallow&&he.route===((Rt=V.route)!=null?Rt:be);var er;const se=(er=ge.scroll)!=null?er:!me&&!re,fe=Se??(se?{x:0,y:0}:null),Ce={...he,route:be,pathname:tt,query:Ze,asPath:Be,isFallback:!1};if(me&&Ht){var Dt,ar,qr;if(V=await this.getRouteInfo({route:this.pathname,pathname:this.pathname,query:Ze,as:ae,resolvedAs:ie,routeProps:{shallow:!1},locale:he.locale,isPreview:he.isPreview,isQueryUpdating:me&&!this.isFallback}),"type"in V)throw Object.defineProperty(new Error("Unexpected middleware effect on "+this.pathname),"__NEXT_ERROR_CODE",{value:"E225",enumerable:!1,configurable:!0});this.pathname==="/_error"&&((ar=self.__NEXT_DATA__.props)==null||(Dt=ar.pageProps)==null?void 0:Dt.statusCode)===500&&((qr=V.props)!=null&&qr.pageProps)&&(V.props.pageProps.statusCode=500);try{await this.set(Ce,V,fe)}catch(Ee){throw(0,c.default)(Ee)&&Ee.cancelled&&De.events.emit("routeChangeError",Ee,Be,_e),Ee}return!0}if(De.events.emit("beforeHistoryChange",ae,_e),this.changeState(J,Y,ae,ge),!(me&&!fe&&!et&&!Ie&&(0,R.compareRouterStates)(Ce,this.state))){try{await this.set(Ce,V,fe)}catch(je){if(je.cancelled)V.error=V.error||je;else throw je}if(V.error)throw me||De.events.emit("routeChangeError",V.error,Be,_e),V.error;t.__NEXT_I18N_SUPPORT&&he.locale&&(document.documentElement.lang=he.locale),me||De.events.emit("routeChangeComplete",ae,_e),se&&/#.+$/.test(ae)&&this.scrollToHash(ae)}return!0}catch(V){if((0,c.default)(V)&&V.cancelled)return!1;throw V}}changeState(J,Y,ae,ge){ge===void 0&&(ge={}),(J!=="pushState"||(0,h.getURL)()!==ae)&&(this._shallow=ge.shallow,window.history[J]({url:Y,as:ae,options:ge,__N:!0,key:this._key=J!=="pushState"?this._key:we()},"",ae))}async handleRouteInfoError(J,Y,ae,ge,Se,te){if(J.cancelled)throw J;if((0,o.isAssetError)(J)||te)throw De.events.emit("routeChangeError",J,ge,Se),Re({url:ge,router:this}),X();console.error(J);try{let me;const{page:ke,styleSheets:he}=await this.fetchComponent("/_error"),et={props:me,Component:ke,styleSheets:he,err:J,error:J};if(!et.props)try{et.props=await this.getInitialProps(ke,{err:J,pathname:Y,query:ae})}catch(nt){console.error("Error in error page `getInitialProps`: ",nt),et.props={}}return et}catch(me){return this.handleRouteInfoError((0,c.default)(me)?me:Object.defineProperty(new Error(me+""),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0}),Y,ae,ge,Se,!0)}}async getRouteInfo(J){let{route:Y,pathname:ae,query:ge,as:Se,resolvedAs:te,routeProps:me,locale:ke,hasMiddleware:he,isPreview:et,unstable_skipClientCache:nt,isQueryUpdating:Oe,isMiddlewareRewrite:Ye,isNotFound:ye}=J,le=Y;try{var _e,Be,Ie,it;let tt=this.components[le];if(me.shallow&&tt&&this.route===le)return tt;const Ze=Pe({route:le,router:this});he&&(tt=void 0);let ct=tt&&!("initial"in tt)?tt:void 0;const St=Oe,ie={dataHref:this.pageLoader.getDataHref({href:(0,y.formatWithValidation)({pathname:ae,query:ge}),skipInterpolation:!0,asPath:ye?"/404":te,locale:ke}),hasMiddleware:!0,isServerRender:this.isSsr,parseJSON:!0,inflightCache:St?this.sbc:this.sdc,persistCache:!et,isPrefetch:!1,unstable_skipClientCache:nt,isBackground:St};let be=Oe&&!Ye?null:await q({fetchData:()=>z(ie),asPath:ye?"/404":te,locale:ke,router:this}).catch(pe=>{if(Oe)return null;throw pe});if(be&&(ae==="/_error"||ae==="/404")&&(be.effect=void 0),Oe&&(be?be.json=self.__NEXT_DATA__.props:be={json:self.__NEXT_DATA__.props}),Ze(),(be==null||(_e=be.effect)==null?void 0:_e.type)==="redirect-internal"||(be==null||(Be=be.effect)==null?void 0:Be.type)==="redirect-external")return be.effect;if((be==null||(Ie=be.effect)==null?void 0:Ie.type)==="rewrite"){const pe=(0,s.removeTrailingSlash)(be.effect.resolvedHref),ze=await this.pageLoader.getPageList();if((!Oe||ze.includes(pe))&&(le=pe,ae=be.effect.resolvedHref,ge={...ge,...be.effect.parsedAs.query},te=(0,j.removeBasePath)((0,d.normalizeLocalePath)(be.effect.parsedAs.pathname,this.locales).pathname),tt=this.components[le],me.shallow&&tt&&this.route===le&&!he))return{...tt,route:le}}if((0,T.isAPIRoute)(le))return Re({url:Se,router:this}),new Promise(()=>{});const Je=ct||await this.fetchComponent(le).then(pe=>({Component:pe.page,styleSheets:pe.styleSheets,__N_SSG:pe.mod.__N_SSG,__N_SSP:pe.mod.__N_SSP})),Et=be==null||(it=be.response)==null?void 0:it.headers.get("x-middleware-skip"),Ke=Je.__N_SSG||Je.__N_SSP;Et&&(be!=null&&be.dataHref)&&delete this.sdc[be.dataHref];const{props:Pt,cacheKey:Ht}=await this._getData(async()=>{if(Ke){if(be!=null&&be.json&&!Et)return{cacheKey:be.cacheKey,props:be.json};const pe=be!=null&&be.dataHref?be.dataHref:this.pageLoader.getDataHref({href:(0,y.formatWithValidation)({pathname:ae,query:ge}),asPath:te,locale:ke}),ze=await z({dataHref:pe,isServerRender:this.isSsr,parseJSON:!0,inflightCache:Et?{}:this.sdc,persistCache:!et,isPrefetch:!1,unstable_skipClientCache:nt});return{cacheKey:ze.cacheKey,props:ze.json||{}}}return{headers:{},props:await this.getInitialProps(Je.Component,{pathname:ae,query:ge,asPath:Se,locale:ke,locales:this.locales,defaultLocale:this.defaultLocale})}});return Je.__N_SSP&&ie.dataHref&&Ht&&delete this.sdc[Ht],!this.isPreview&&Je.__N_SSG&&!Oe&&z(Object.assign({},ie,{isBackground:!0,persistCache:!1,inflightCache:this.sbc})).catch(()=>{}),Pt.pageProps=Object.assign({},Pt.pageProps),Je.props=Pt,Je.route=le,Je.query=ge,Je.resolvedAs=te,this.components[le]=Je,Je}catch(tt){return this.handleRouteInfoError((0,c.getProperError)(tt),ae,ge,Se,me)}}set(J,Y,ae){return this.state=J,this.sub(Y,this.components["/_app"].Component,ae)}beforePopState(J){this._bps=J}onlyAHashChange(J){if(!this.asPath)return!1;const[Y,ae]=this.asPath.split("#",2),[ge,Se]=J.split("#",2);return Se&&Y===ge&&ae===Se?!0:Y!==ge?!1:ae!==Se}scrollToHash(J){const[,Y=""]=J.split("#",2);(0,F.handleSmoothScroll)(()=>{if(Y===""||Y==="top"){window.scrollTo(0,0);return}const ae=decodeURIComponent(Y),ge=document.getElementById(ae);if(ge){ge.scrollIntoView();return}const Se=document.getElementsByName(ae)[0];Se&&Se.scrollIntoView()},{onlyHashChange:this.onlyAHashChange(J)})}urlIsNew(J){return this.asPath!==J}async prefetch(J,Y,ae){if(Y===void 0&&(Y=J),ae===void 0&&(ae={}),typeof window<"u"&&(0,D.isBot)(window.navigator.userAgent))return;let ge=(0,v.parseRelativeUrl)(J);const Se=ge.pathname;let{pathname:te,query:me}=ge;const ke=te;if(t.__NEXT_I18N_SUPPORT&&ae.locale===!1){te=(0,d.normalizeLocalePath)(te,this.locales).pathname,ge.pathname=te,J=(0,y.formatWithValidation)(ge);let le=(0,v.parseRelativeUrl)(Y);const _e=(0,d.normalizeLocalePath)(le.pathname,this.locales);le.pathname=_e.pathname,ae.locale=_e.detectedLocale||this.defaultLocale,Y=(0,y.formatWithValidation)(le)}const he=await this.pageLoader.getPageList();let et=Y;const nt=typeof ae.locale<"u"?ae.locale||void 0:this.locale,Oe=await O({asPath:Y,locale:nt,router:this});if(t.__NEXT_HAS_REWRITES&&Y.startsWith("/")){let le;({__rewrites:le}=await(0,o.getClientBuildManifest)());const _e=(0,m.default)((0,N.addBasePath)((0,S.addLocale)(Y,this.locale),!0),he,le,ge.query,Be=>H(Be,he),this.locales);if(_e.externalDest)return;Oe||(et=(0,E.removeLocale)((0,j.removeBasePath)(_e.asPath),this.locale)),_e.matchedPage&&_e.resolvedHref&&(te=_e.resolvedHref,ge.pathname=te,Oe||(J=(0,y.formatWithValidation)(ge)))}ge.pathname=H(ge.pathname,he),(0,p.isDynamicRoute)(ge.pathname)&&(te=ge.pathname,ge.pathname=te,Object.assign(me,(0,g.getRouteMatcher)((0,b.getRouteRegex)(ge.pathname))((0,_.parsePath)(Y).pathname)||{}),Oe||(J=(0,y.formatWithValidation)(ge)));const Ye=t.__NEXT_MIDDLEWARE_PREFETCH==="strict"?null:await q({fetchData:()=>z({dataHref:this.pageLoader.getDataHref({href:(0,y.formatWithValidation)({pathname:ke,query:me}),skipInterpolation:!0,asPath:et,locale:nt}),hasMiddleware:!0,isServerRender:!1,parseJSON:!0,inflightCache:this.sdc,persistCache:!this.isPreview,isPrefetch:!0}),asPath:Y,locale:nt,router:this});if((Ye==null?void 0:Ye.effect.type)==="rewrite"&&(ge.pathname=Ye.effect.resolvedHref,te=Ye.effect.resolvedHref,me={...me,...Ye.effect.parsedAs.query},et=Ye.effect.parsedAs.pathname,J=(0,y.formatWithValidation)(ge)),(Ye==null?void 0:Ye.effect.type)==="redirect-external")return;const ye=(0,s.removeTrailingSlash)(te);await this._bfl(Y,et,ae.locale,!0)&&(this.components[Se]={__appRouter:!0}),await Promise.all([this.pageLoader._isSsg(ye).then(le=>le?z({dataHref:Ye!=null&&Ye.json?Ye==null?void 0:Ye.dataHref:this.pageLoader.getDataHref({href:J,asPath:et,locale:nt}),isServerRender:!1,parseJSON:!0,inflightCache:this.sdc,persistCache:!this.isPreview,isPrefetch:!0,unstable_skipClientCache:ae.unstable_skipClientCache||ae.priority&&!!t.__NEXT_OPTIMISTIC_CLIENT_CACHE}).then(()=>!1).catch(()=>!1):!1),this.pageLoader[ae.priority?"loadPage":"prefetch"](ye)])}async fetchComponent(J){const Y=Pe({route:J,router:this});try{const ae=await this.pageLoader.loadPage(J);return Y(),ae}catch(ae){throw Y(),ae}}_getData(J){let Y=!1;const ae=()=>{Y=!0};return this.clc=ae,J().then(ge=>{if(ae===this.clc&&(this.clc=null),Y){const Se=Object.defineProperty(new Error("Loading initial props cancelled"),"__NEXT_ERROR_CODE",{value:"E405",enumerable:!1,configurable:!0});throw Se.cancelled=!0,Se}return ge})}getInitialProps(J,Y){const{Component:ae}=this.components["/_app"],ge=this._wrapApp(ae);return Y.AppTree=ge,(0,h.loadGetInitialProps)(ae,{AppTree:ge,Component:J,router:this,ctx:Y})}get route(){return this.state.route}get pathname(){return this.state.pathname}get query(){return this.state.query}get asPath(){return this.state.asPath}get locale(){return this.state.locale}get isFallback(){return this.state.isFallback}get isPreview(){return this.state.isPreview}constructor(J,Y,ae,{initialProps:ge,pageLoader:Se,App:te,wrapApp:me,Component:ke,err:he,subscription:et,isFallback:nt,locale:Oe,locales:Ye,defaultLocale:ye,domainLocales:le,isPreview:_e}){this.sdc={},this.sbc={},this.isFirstPopStateEvent=!0,this._key=we(),this.onPopState=it=>{const{isFirstPopStateEvent:tt}=this;this.isFirstPopStateEvent=!1;const Ze=it.state;if(!Ze){const{pathname:Ke,query:Pt}=this;this.changeState("replaceState",(0,y.formatWithValidation)({pathname:(0,N.addBasePath)(Ke),query:Pt}),(0,h.getURL)());return}if(Ze.__NA){window.location.reload();return}if(!Ze.__N||tt&&this.locale===Ze.options.locale&&Ze.as===this.asPath)return;let ct;const{url:St,as:ie,options:be,key:Je}=Ze;if(t.__NEXT_SCROLL_RESTORATION&&Z&&this._key!==Je){try{sessionStorage.setItem("__next_scroll_"+this._key,JSON.stringify({x:self.pageXOffset,y:self.pageYOffset}))}catch{}try{const Ke=sessionStorage.getItem("__next_scroll_"+Je);ct=JSON.parse(Ke)}catch{ct={x:0,y:0}}}this._key=Je;const{pathname:Et}=(0,v.parseRelativeUrl)(St);this.isSsr&&ie===(0,N.addBasePath)(this.asPath)&&Et===(0,N.addBasePath)(this.pathname)||this._bps&&!this._bps(Ze)||this.change("replaceState",St,ie,Object.assign({},be,{shallow:be.shallow&&this._shallow,locale:be.locale||this.defaultLocale,_h:0}),ct)};const Be=(0,s.removeTrailingSlash)(J);this.components={},J!=="/_error"&&(this.components[Be]={Component:ke,initial:!0,props:ge,err:he,__N_SSG:ge&&ge.__N_SSG,__N_SSP:ge&&ge.__N_SSP}),this.components["/_app"]={Component:te,styleSheets:[]},this.events=De.events,this.pageLoader=Se;const Ie=(0,p.isDynamicRoute)(J)&&self.__NEXT_DATA__.autoExport;if(this.basePath=t.__NEXT_ROUTER_BASEPATH||"",this.sub=et,this.clc=null,this._wrapApp=me,this.isSsr=!0,this.isLocaleDomain=!1,this.isReady=!!(self.__NEXT_DATA__.gssp||self.__NEXT_DATA__.gip||self.__NEXT_DATA__.isExperimentalCompile||self.__NEXT_DATA__.appGip&&!self.__NEXT_DATA__.gsp||!Ie&&!self.location.search&&!t.__NEXT_HAS_REWRITES),t.__NEXT_I18N_SUPPORT&&(this.locales=Ye,this.defaultLocale=ye,this.domainLocales=le,this.isLocaleDomain=!!(0,w.detectDomainLocale)(le,self.location.hostname)),this.state={route:Be,pathname:J,query:Y,asPath:Ie?J:ae,isPreview:!!_e,locale:t.__NEXT_I18N_SUPPORT?Oe:void 0,isFallback:nt},this._initialMatchesMiddlewarePromise=Promise.resolve(!1),typeof window<"u"){if(!ae.startsWith("//")){const it={locale:Oe},tt=(0,h.getURL)();this._initialMatchesMiddlewarePromise=O({router:this,locale:Oe,asPath:tt}).then(Ze=>(it._shouldResolveHref=ae!==J,this.changeState("replaceState",Ze?tt:(0,y.formatWithValidation)({pathname:(0,N.addBasePath)(J),query:Y}),tt,it),Ze))}window.addEventListener("popstate",this.onPopState),t.__NEXT_SCROLL_RESTORATION&&Z&&(window.history.scrollRestoration="manual")}}}De.events=(0,f.default)()}(kC)),kC}var Tk={},rU;function ilt(){return rU||(rU=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"RouterContext",{enumerable:!0,get:function(){return n}});const n=ch._(x).default.createContext(null)}(Tk)),Tk}var C1={exports:{}},nU;function olt(){return nU||(nU=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});const r=i,n=ase();function a(s){function o(l){return(0,r.jsx)(s,{router:(0,n.useRouter)(),...l})}return o.getInitialProps=s.getInitialProps,o.origGetInitialProps=s.origGetInitialProps,o}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(C1,C1.exports)),C1.exports}var aU;function ase(){return aU||(aU=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function r(y,w){for(var _ in w)Object.defineProperty(y,_,{enumerable:!0,get:w[_]})}r(t,{Router:function(){return s.default},createRouter:function(){return g},default:function(){return v},makePublicRouterInstance:function(){return b},useRouter:function(){return m},withRouter:function(){return c.default}});const n=ch,a=n._(x),s=n._(slt()),o=ilt(),l=n._(Vae()),c=n._(olt()),u={router:null,readyCallbacks:[],ready(y){if(this.router)return y();typeof window<"u"&&this.readyCallbacks.push(y)}},d=["pathname","route","query","asPath","components","isFallback","basePath","locale","locales","defaultLocale","isReady","isPreview","isLocaleDomain","domainLocales"],f=["routeChangeStart","beforeHistoryChange","routeChangeComplete","routeChangeError","hashChangeStart","hashChangeComplete"],h=["push","replace","reload","back","prefetch","beforePopState"];Object.defineProperty(u,"events",{get(){return s.default.events}});function p(){if(!u.router){const y=`No router instance found.
You should only use "next/router" on the client side of your app.
`;throw Object.defineProperty(new Error(y),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}return u.router}d.forEach(y=>{Object.defineProperty(u,y,{get(){return p()[y]}})}),h.forEach(y=>{u[y]=function(){for(var w=arguments.length,_=new Array(w),S=0;S<w;S++)_[S]=arguments[S];return p()[y](..._)}}),f.forEach(y=>{u.ready(()=>{s.default.events.on(y,function(){for(var w=arguments.length,_=new Array(w),S=0;S<w;S++)_[S]=arguments[S];const E="on"+y.charAt(0).toUpperCase()+y.substring(1),j=u;if(j[E])try{j[E](..._)}catch(N){console.error("Error when running the Router event: "+E),console.error((0,l.default)(N)?N.message+`
`+N.stack:N+"")}})})});const v=u;function m(){const y=a.default.useContext(o.RouterContext);if(!y)throw Object.defineProperty(new Error("NextRouter was not mounted. https://nextjs.org/docs/messages/next-router-not-mounted"),"__NEXT_ERROR_CODE",{value:"E509",enumerable:!1,configurable:!0});return y}function g(){for(var y=arguments.length,w=new Array(y),_=0;_<y;_++)w[_]=arguments[_];return u.router=new s.default(...w),u.readyCallbacks.forEach(S=>S()),u.readyCallbacks=[],u.router}function b(y){const w=y,_={};for(const S of d){if(typeof w[S]=="object"){_[S]=Object.assign(Array.isArray(w[S])?[]:{},w[S]);continue}_[S]=w[S]}return _.events=s.default.events,h.forEach(S=>{_[S]=function(){for(var E=arguments.length,j=new Array(E),N=0;N<E;N++)j[N]=arguments[N];return w[S](...j)}}),_}(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(h1,h1.exports)),h1.exports}var llt=ase();const clt=()=>{const{session:e,signInWithOAuth:t,signInWithVK:r,signOut:n,loading:a,error:s}=pot(),{providers:o,loading:l,error:c,setLoadingState:u,setErrorState:d,clearError:f}=got(),h=llt.useRouter(),p=x.useCallback(async b=>{try{f(),u(!0),b==="vk"?await r({code:""}):await t(b)}catch(y){console.error("Ошибка авторизации:",y),d(y instanceof Error?y.message:"Произошла ошибка при авторизации")}finally{u(!1)}},[t,r,f,u,d]),v=x.useCallback(()=>{h.push("/dashboard")},[h]),m=a||l,g=s||c;return{user:(e==null?void 0:e.user)||null,providers:o,loading:m,error:g,handleProviderClick:p,handleDashboardClick:v,signOut:n}},ult=({children:e})=>i.jsxs("div",{className:"container mx-auto py-10 px-4",children:[i.jsx("header",{className:"mb-8 text-center",children:i.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Онлайн-запись"})}),i.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-6 md:p-8",children:[i.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-6",children:"Добро пожаловать!"}),e]}),i.jsx("footer",{className:"mt-12 text-center text-sm text-gray-500",children:i.jsxs("p",{children:["© ",new Date().getFullYear()," Beauty Track Hub. Все права защищены."]})})]}),dlt=({userEmail:e,onDashboardClick:t})=>i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-4 text-green-700 font-semibold",children:["Вы уже авторизованы как ",e]}),i.jsx(ne,{className:"mb-4 w-full",onClick:t,children:"Перейти в личный кабинет"})]}),flt=({providers:e,onProviderClick:t,loading:r=!1,error:n})=>i.jsxs("div",{className:"space-y-4",children:[n&&i.jsx("div",{className:"mb-4 text-red-600 font-semibold text-center",children:n}),i.jsx("div",{className:"flex flex-col gap-4 max-w-xs mx-auto",children:e.map(a=>i.jsx(ne,{className:`${a.color} w-full`,onClick:()=>t(a.key),disabled:r,children:r?"Загрузка...":`Войти через ${a.name}`},a.key))})]}),hlt=({providers:e,onProviderClick:t,loading:r,error:n})=>i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-gray-600 mb-4",children:"Для записи в салон необходимо авторизоваться через одну из соцсетей:"}),i.jsx(flt,{providers:e,onProviderClick:t,loading:r,error:n}),i.jsx("div",{className:"mt-8 pt-8 border-t border-gray-200",children:i.jsx("p",{className:"text-sm text-gray-500 text-center",children:"После входа вы сможете выбрать услугу, мастера и время для записи."})})]}),mlt=()=>{const{user:e,providers:t,loading:r,error:n,handleProviderClick:a,handleDashboardClick:s}=clt();return i.jsx(ult,{children:e?i.jsx(dlt,{userEmail:e.email||"Пользователь",onDashboardClick:s}):i.jsx(hlt,{providers:t,onProviderClick:a,loading:r,error:n})})},plt=[{value:"beauty",label:"Розовый"},{value:"teal",label:"Бирюзовый"},{value:"lavender",label:"Лавандовый"}],glt=()=>{const{branches:e,studios:t,currentBranch:r,setCurrentBranch:n,addBranch:a,updateBranch:s,deleteBranch:o,addStudio:l,updateStudio:c,deleteStudio:u,isLoading:d,isLoadingStudios:f,currentStudio:h,setCurrentStudio:p}=Ba(),[v,m]=x.useState("branches"),[g,b]=x.useState(!1),[y,w]=x.useState(!1),[_,S]=x.useState(!1),[E,j]=x.useState(!1),[N,k]=x.useState(null),[C,T]=x.useState(null),[A,B]=x.useState({name:"",address:"",phone:"",email:"",description:"",image:"",is_active:!0,color:"#FFB6C1"}),[R,P]=x.useState({name:"",address:"",phone:"",email:"",description:"",image:"",is_active:!0,color:"#FFB6C1",branch_id:"none"}),D=()=>{B({name:"",address:"",phone:"",email:"",description:"",image:"",is_active:!0,color:"#FFB6C1"})},U=()=>{P({name:"",address:"",phone:"",email:"",description:"",image:"",is_active:!0,color:"#FFB6C1",branch_id:"none"})},M=async()=>{try{await a(A),b(!1),D()}catch(I){console.error("Error adding branch:",I)}},F=I=>{k(I),B({name:I.name,address:I.address,phone:I.phone,email:I.email||"",description:I.description||"",image:I.image||"",is_active:I.is_active,color:I.color||"#FFB6C1"}),w(!0)},K=async()=>{if(N)try{await s(N.id,A),w(!1),k(null),D()}catch(I){console.error("Error updating branch:",I)}},X=async I=>{if(confirm("Вы уверены, что хотите удалить этот бренд?"))try{await o(I)}catch(Q){console.error("Error deleting branch:",Q)}},O=async()=>{try{await l({...R,branch_id:R.branch_id==="none"?null:R.branch_id}),S(!1),U()}catch(I){console.error("Error adding studio:",I)}},W=I=>{T(I),P({name:I.name,address:I.address,phone:I.phone,email:I.email||"",description:I.description||"",image:I.image||"",is_active:I.is_active,color:I.color||"#FFB6C1",branch_id:I.branch_id||"none"}),j(!0)},L=async()=>{if(C)try{await c(C.id,{...R,branch_id:R.branch_id==="none"?null:R.branch_id}),j(!1),T(null),U()}catch(I){console.error("Error updating studio:",I)}},H=async I=>{if(confirm("Вы уверены, что хотите удалить эту студию?"))try{await u(I)}catch(Q){console.error("Error deleting studio:",Q)}},ee=I=>{if(!I)return"Не привязана";const Q=e.find(ve=>ve.id===I);return Q?Q.name:"Неизвестный бренд"},q=I=>{if(!I)return"#FFB6C1";const Q=e.find(ve=>ve.id===I);return Q&&Q.color||"#FFB6C1"},Z=Kn();return d||f?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"text-lg",children:"Загрузка..."})}):i.jsxs("div",{className:"min-h-screen flex flex-col",children:[i.jsx(cy,{}),i.jsx("main",{className:"flex-grow mb-12",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsx("h1",{className:"text-3xl font-bold",children:"Управление филиалами"})}),r&&i.jsx("div",{className:"flex items-center gap-4 mb-6",children:i.jsxs("span",{className:"flex items-center gap-2 text-lg font-semibold",children:[i.jsx("span",{className:"w-4 h-4 rounded-full inline-block",style:{backgroundColor:r.color}}),"Текущий бренд: ",r.name]})}),i.jsxs(fa,{value:v,onValueChange:m,className:"w-full",children:[i.jsxs(ta,{className:"grid w-full grid-cols-2",children:[i.jsxs(Tt,{value:"branches",className:"flex items-center gap-2",children:[i.jsx(hfe,{className:"h-4 w-4"}),"Бренды (",e.length,")"]}),i.jsxs(Tt,{value:"studios",className:"flex items-center gap-2",children:[i.jsx(zT,{className:"h-4 w-4"}),"Студии (",r?t.filter(I=>I.branch_id===r.id).length:0,")"]})]}),i.jsxs(Ft,{value:"branches",className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Бренды"}),i.jsxs(qt,{open:g,onOpenChange:b,children:[i.jsx(Dv,{asChild:!0,children:i.jsxs(ne,{children:[i.jsx(ls,{className:"h-4 w-4 mr-2"}),"Добавить бренд"]})}),i.jsxs(Wt,{className:"sm:max-w-[425px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Добавить новый бренд"}),i.jsx(fr,{children:"Создайте новый бренд для вашей сети салонов."})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"branch-name",className:"text-right",children:"Название"}),i.jsx($e,{id:"branch-name",value:A.name,onChange:I=>B(Q=>({...Q,name:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"branch-address",className:"text-right",children:"Адрес"}),i.jsx($e,{id:"branch-address",value:A.address,onChange:I=>B(Q=>({...Q,address:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"branch-phone",className:"text-right",children:"Телефон"}),i.jsx($e,{id:"branch-phone",value:A.phone,onChange:I=>B(Q=>({...Q,phone:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"branch-email",className:"text-right",children:"Email"}),i.jsx($e,{id:"branch-email",type:"email",value:A.email,onChange:I=>B(Q=>({...Q,email:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"branch-description",className:"text-right",children:"Описание"}),i.jsx(rn,{id:"branch-description",value:A.description,onChange:I=>B(Q=>({...Q,description:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"branch-color",className:"text-right",children:"Цвет"}),i.jsxs(Tr,{value:A.color,onValueChange:I=>B(Q=>({...Q,color:I})),children:[i.jsx(wr,{className:"col-span-3",children:i.jsx(Ar,{placeholder:"Выберите цвет"})}),i.jsx(_r,{children:plt.map(I=>i.jsx(_t,{value:I.value,children:I.label},I.value))})]})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"branch-is_active",className:"text-right",children:"Активен"}),i.jsx(Io,{id:"branch-is_active",checked:A.is_active,onCheckedChange:I=>B(Q=>({...Q,is_active:I}))})]})]}),i.jsx(or,{children:i.jsx(ne,{type:"submit",onClick:M,children:"Создать бренд"})})]})]})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(I=>{const Q=r&&r.id===I.id;return i.jsxs(qe,{className:`relative transition ${Q?"border-2 border-pink-400 shadow-lg":""}`,children:[i.jsx(ht,{children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs(gt,{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:I.color}}),I.name,Q&&i.jsx($t,{className:"ml-2",variant:"default",children:"Выбран"})]}),i.jsx(da,{children:I.address})]}),i.jsx($t,{variant:I.is_active?"default":"secondary",children:I.is_active?"Активен":"Неактивен"})]})}),i.jsxs(Ge,{children:[i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Телефон:"})," ",I.phone]}),I.email&&i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",I.email]}),I.description&&i.jsxs("p",{children:[i.jsx("strong",{children:"Описание:"})," ",I.description]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Создан:"})," ",new Date(I.created_at).toLocaleDateString()]})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx(ne,{variant:Q?"default":"outline",onClick:()=>n(I),disabled:Q,children:Q?"Выбран":"Выбрать"}),i.jsx(ne,{variant:"outline",size:"sm",onClick:()=>F(I),children:i.jsx(Ev,{className:"h-4 w-4"})}),i.jsx(ne,{variant:"outline",size:"sm",onClick:()=>X(I.id),children:i.jsx(vf,{className:"h-4 w-4"})})]})]})]},I.id)})})]}),i.jsxs(Ft,{value:"studios",className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Студии"}),i.jsxs(qt,{open:_,onOpenChange:S,children:[i.jsx(Dv,{asChild:!0,children:i.jsxs(ne,{children:[i.jsx(ls,{className:"h-4 w-4 mr-2"}),"Добавить студию"]})}),i.jsxs(Wt,{className:"sm:max-w-[425px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Добавить новую студию"}),i.jsx(fr,{children:"Создайте новую студию и привяжите к бренду"})]}),i.jsxs(fa,{defaultValue:"main",className:"w-full",children:[i.jsxs(ta,{className:"grid w-full grid-cols-2",children:[i.jsx(Tt,{value:"main",children:"Основное"}),i.jsx(Tt,{value:"details",children:"Детали"})]}),i.jsx(Ft,{value:"main",className:"space-y-4 pt-4",children:i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"studio-name",className:"text-right",children:"Название"}),i.jsx($e,{id:"studio-name",value:R.name,onChange:I=>P(Q=>({...Q,name:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"studio-branch",className:"text-right",children:"Бренд"}),i.jsxs(Tr,{value:R.branch_id||"none",onValueChange:I=>{P(Q=>({...Q,branch_id:I,color:q(I)}))},children:[i.jsx(wr,{className:"col-span-3",children:i.jsx(Ar,{placeholder:"Выберите бренд"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"none",children:"Без бренда"}),e.map(I=>i.jsx(_t,{value:I.id,children:I.name},I.id))]})]})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"studio-address",className:"text-right",children:"Адрес"}),i.jsx($e,{id:"studio-address",value:R.address,onChange:I=>P(Q=>({...Q,address:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"studio-phone",className:"text-right",children:"Телефон"}),i.jsx($e,{id:"studio-phone",value:R.phone,onChange:I=>P(Q=>({...Q,phone:I.target.value})),className:"col-span-3"})]})]})}),i.jsx(Ft,{value:"details",className:"space-y-4 pt-4",children:i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"studio-email",className:"text-right",children:"Email"}),i.jsx($e,{id:"studio-email",type:"email",value:R.email,onChange:I=>P(Q=>({...Q,email:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"studio-description",className:"text-right",children:"Описание"}),i.jsx(rn,{id:"studio-description",value:R.description,onChange:I=>P(Q=>({...Q,description:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"studio-color",className:"text-right",children:"Цвет"}),i.jsx($e,{id:"studio-color",type:"color",value:R.color,disabled:!0,className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"studio-is_active",className:"text-right",children:"Активна"}),i.jsx(Io,{id:"studio-is_active",checked:R.is_active,onCheckedChange:I=>P(Q=>({...Q,is_active:I}))})]})]})})]}),i.jsx(or,{className:"mt-4",children:i.jsx(ne,{type:"submit",onClick:O,children:"Создать студию"})})]})]})]}),r?t.filter(I=>I.branch_id===r.id).length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[i.jsx("div",{className:"text-lg mb-4",children:"У этого бренда пока нет ни одной студии."}),i.jsx(ne,{onClick:()=>S(!0),children:"Создать студию"})]}):i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.filter(I=>I.branch_id===r.id).map(I=>{const Q=h&&h.id===I.id;return i.jsxs(qe,{className:`relative ${Q?"border-2 border-green-500 shadow-lg":""}`,children:[i.jsx(ht,{children:i.jsx("div",{className:"flex justify-between items-start",children:i.jsxs("div",{children:[i.jsxs(gt,{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:I.color}}),I.name,Q&&i.jsx($t,{className:"ml-2",variant:"success",children:"Выбрана"})]}),i.jsx(da,{children:I.address})]})})}),i.jsxs(Ge,{children:[i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Бренд:"})," ",ee(I.branch_id)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Телефон:"})," ",I.phone]}),I.email&&i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",I.email]}),I.description&&i.jsxs("p",{children:[i.jsx("strong",{children:"Описание:"})," ",I.description]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Создана:"})," ",new Date(I.created_at).toLocaleDateString()]}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx(Io,{checked:I.is_active,disabled:!0}),i.jsx("span",{className:"text-xs text-muted-foreground",children:I.is_active?"Активна":"Неактивна"})]})]}),i.jsxs("div",{className:"flex gap-2 mt-4 items-center",children:[Q?i.jsx(ne,{variant:"outline",className:"flex-1 cursor-default",disabled:!0,children:"Выбрана"}):i.jsx(ne,{variant:"default",className:"flex-1",onClick:()=>p(I),children:"Выбрать"}),i.jsx(ne,{variant:"outline",size:"icon",onClick:()=>Z(`/brands/${r.id}/studios/${I.id}`),title:"Перейти в дашборд",disabled:!r,children:i.jsx(sH,{className:"h-5 w-5"})}),i.jsx(ne,{variant:"outline",size:"sm",onClick:()=>W(I),children:i.jsx(Ev,{className:"h-4 w-4"})}),i.jsx(ne,{variant:"outline",size:"sm",onClick:()=>H(I.id),children:i.jsx(vf,{className:"h-4 w-4"})})]})]})]},I.id)})}):i.jsx("div",{className:"flex flex-col items-center justify-center h-64",children:i.jsx("div",{className:"text-lg mb-4",children:"Сначала выберите бренд"})})]})]})]})}),i.jsx(qt,{open:y,onOpenChange:w,children:i.jsxs(Wt,{className:"sm:max-w-[425px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Редактировать бренд"}),i.jsx(fr,{children:"Внесите изменения в информацию о бренде"})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"edit-name",className:"text-right",children:"Название"}),i.jsx($e,{id:"edit-name",value:A.name,onChange:I=>B(Q=>({...Q,name:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"edit-address",className:"text-right",children:"Адрес"}),i.jsx($e,{id:"edit-address",value:A.address,onChange:I=>B(Q=>({...Q,address:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"edit-phone",className:"text-right",children:"Телефон"}),i.jsx($e,{id:"edit-phone",value:A.phone,onChange:I=>B(Q=>({...Q,phone:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"edit-email",className:"text-right",children:"Email"}),i.jsx($e,{id:"edit-email",type:"email",value:A.email,onChange:I=>B(Q=>({...Q,email:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"edit-description",className:"text-right",children:"Описание"}),i.jsx(rn,{id:"edit-description",value:A.description,onChange:I=>B(Q=>({...Q,description:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"edit-color",className:"text-right",children:"Цвет"}),i.jsx($e,{id:"edit-color",type:"color",value:A.color,onChange:I=>B(Q=>({...Q,color:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"edit-is_active",className:"text-right",children:"Активен"}),i.jsx(Io,{id:"edit-is_active",checked:A.is_active,onCheckedChange:I=>B(Q=>({...Q,is_active:I}))})]})]}),i.jsx(or,{children:i.jsx(ne,{type:"submit",onClick:K,children:"Сохранить изменения"})})]})}),i.jsx(qt,{open:E,onOpenChange:j,children:i.jsxs(Wt,{className:"sm:max-w-[425px]",children:[i.jsxs(Gt,{children:[i.jsx(Vt,{children:"Редактировать студию"}),i.jsx(fr,{children:"Внесите изменения в информацию о студии"})]}),i.jsxs(fa,{defaultValue:"main",className:"w-full",children:[i.jsxs(ta,{className:"grid w-full grid-cols-2",children:[i.jsx(Tt,{value:"main",children:"Основное"}),i.jsx(Tt,{value:"details",children:"Детали"})]}),i.jsx(Ft,{value:"main",className:"space-y-4 pt-4",children:i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"edit-studio-name",className:"text-right",children:"Название"}),i.jsx($e,{id:"edit-studio-name",value:R.name,onChange:I=>P(Q=>({...Q,name:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"edit-studio-branch",className:"text-right",children:"Бренд"}),i.jsxs(Tr,{value:R.branch_id||"none",onValueChange:I=>{P(Q=>({...Q,branch_id:I,color:q(I)}))},children:[i.jsx(wr,{className:"col-span-3",children:i.jsx(Ar,{placeholder:"Выберите бренд"})}),i.jsxs(_r,{children:[i.jsx(_t,{value:"none",children:"Без бренда"}),e.map(I=>i.jsx(_t,{value:I.id,children:I.name},I.id))]})]})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"edit-studio-address",className:"text-right",children:"Адрес"}),i.jsx($e,{id:"edit-studio-address",value:R.address,onChange:I=>P(Q=>({...Q,address:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"edit-studio-phone",className:"text-right",children:"Телефон"}),i.jsx($e,{id:"edit-studio-phone",value:R.phone,onChange:I=>P(Q=>({...Q,phone:I.target.value})),className:"col-span-3"})]})]})}),i.jsx(Ft,{value:"details",className:"space-y-4 pt-4",children:i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"edit-studio-email",className:"text-right",children:"Email"}),i.jsx($e,{id:"edit-studio-email",type:"email",value:R.email,onChange:I=>P(Q=>({...Q,email:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"edit-studio-description",className:"text-right",children:"Описание"}),i.jsx(rn,{id:"edit-studio-description",value:R.description,onChange:I=>P(Q=>({...Q,description:I.target.value})),className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"edit-studio-color",className:"text-right",children:"Цвет"}),i.jsx($e,{id:"edit-studio-color",type:"color",value:R.color,disabled:!0,className:"col-span-3"})]}),i.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[i.jsx(Xe,{htmlFor:"edit-studio-is_active",className:"text-right",children:"Активна"}),i.jsx(Io,{id:"edit-studio-is_active",checked:R.is_active,onCheckedChange:I=>P(Q=>({...Q,is_active:I}))})]})]})})]}),i.jsx(or,{className:"mt-4",children:i.jsx(ne,{type:"submit",onClick:L,children:"Сохранить изменения"})})]})}),i.jsx(al,{})]})};var vlt="Separator",sU="horizontal",xlt=["horizontal","vertical"],sse=x.forwardRef((e,t)=>{const{decorative:r,orientation:n=sU,...a}=e,s=ylt(n)?n:sU,l=r?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return i.jsx(zt.div,{"data-orientation":s,...l,...a,ref:t})});sse.displayName=vlt;function ylt(e){return xlt.includes(e)}var ise=sse;const KO=x.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>i.jsx(ise,{ref:a,decorative:r,orientation:t,className:Ue("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));KO.displayName=ise.displayName;const blt=()=>{const{brandId:e,studioId:t}=Mle(),r=Kn(),[n]=XR(),{branches:a,studios:s,currentBranch:o,currentStudio:l,setCurrentBranch:c,setCurrentStudio:u}=Ba(),[d,f]=x.useState(!0);if(x.useEffect(()=>{if(e&&t&&a.length>0&&s.length>0){const m=a.find(b=>b.id===e),g=s.find(b=>b.id===t);m&&g?(c(m),f(!1)):r("/branches")}},[e,t,a,s,c,r]),d||!o||!l)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),i.jsx("p",{children:"Загрузка рабочей среды студии..."})]})});const h=()=>{const m=n.get("from")==="adminpanel";r(m?"/admin?tab=branches":"/branches")},p=[{title:"Новая запись",description:"Создать запись клиента",icon:ls,action:()=>r("/appointments"),color:"bg-blue-500"},{title:"Расписание",description:"Управление расписанием",icon:Qa,action:()=>r("/appointments"),color:"bg-green-500"},{title:"Клиенты",description:"База клиентов",icon:Vu,action:()=>r("/clients"),color:"bg-purple-500"},{title:"Мастера",description:"Управление персоналом",icon:gf,action:()=>r("/staff"),color:"bg-orange-500"}],v=[{title:"Записи сегодня",value:"12",icon:Qa,trend:"+2"},{title:"Активные клиенты",value:"156",icon:Vu,trend:"+8"},{title:"Мастера в смене",value:"4",icon:gf,trend:"0"},{title:"Выручка за день",value:"₽15,240",icon:qT,trend:"+12%"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs(ne,{variant:"outline",size:"sm",onClick:h,className:"flex items-center space-x-2",children:[i.jsx(f4,{className:"h-4 w-4"}),i.jsx("span",{children:"К брендам"})]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:l.name}),i.jsx("p",{className:"text-muted-foreground",children:o.name})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx($t,{variant:l.is_active?"default":"secondary",children:l.is_active?"Активна":"Неактивна"}),i.jsxs(ne,{variant:"outline",size:"sm",children:[i.jsx(jv,{className:"h-4 w-4 mr-2"}),"Настройки"]})]})]}),i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsxs(gt,{className:"flex items-center space-x-2",children:[i.jsx(zT,{className:"h-5 w-5"}),i.jsx("span",{children:"Информация о студии"})]})}),i.jsxs(Ge,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(zT,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm",children:l.address})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Mw,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm",children:l.phone})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Sv,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm",children:l.email})]})]}),l.description&&i.jsxs(i.Fragment,{children:[i.jsx(KO,{className:"my-4"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:l.description})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:v.map((m,g)=>i.jsx(qe,{children:i.jsx(Ge,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:m.title}),i.jsx("p",{className:"text-2xl font-bold",children:m.value}),i.jsx("p",{className:"text-xs text-green-600",children:m.trend})]}),i.jsx(m.icon,{className:"h-8 w-8 text-muted-foreground"})]})})},g))}),i.jsxs(qe,{children:[i.jsxs(ht,{children:[i.jsx(gt,{children:"Быстрые действия"}),i.jsx(da,{children:"Основные функции для работы в студии"})]}),i.jsx(Ge,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:p.map((m,g)=>i.jsxs(ne,{variant:"outline",className:"h-auto p-4 flex flex-col items-center space-y-2",onClick:m.action,children:[i.jsx("div",{className:`p-2 rounded-full ${m.color} text-white`,children:i.jsx(m.icon,{className:"h-6 w-6"})}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"font-medium",children:m.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:m.description})]})]},g))})})]}),i.jsxs(qe,{children:[i.jsx(ht,{children:i.jsxs(gt,{className:"flex items-center space-x-2",children:[i.jsx(Si,{className:"h-5 w-5"}),i.jsx("span",{children:"Записи на сегодня"})]})}),i.jsxs(Ge,{children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Анна Петрова"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Стрижка + укладка"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-medium",children:"10:00"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Мастер: Елена"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Мария Сидорова"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Окрашивание"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-medium",children:"12:30"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Мастер: Анна"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Ольга Иванова"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Маникюр"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-medium",children:"15:00"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Мастер: Светлана"})]})]})]}),i.jsx(KO,{className:"my-4"}),i.jsx(ne,{variant:"outline",className:"w-full",children:"Посмотреть все записи"})]})]})]})},wlt=()=>{const t=new URLSearchParams(window.location.hash.replace("#","")).get("type")==="recovery",[r,n]=x.useState(""),[a,s]=x.useState(""),[o,l]=x.useState(""),[c,u]=x.useState(""),[d,f]=x.useState(!1),h=Kn(),p=async m=>{m.preventDefault(),f(!0),u(""),l("");const{error:g}=await ue.auth.resetPasswordForEmail(r,{redirectTo:window.location.origin+"/set-new-password"});g?u(g.message):l("Проверьте почту для получения ссылки на сброс пароля."),f(!1)},v=async m=>{m.preventDefault(),f(!0),u(""),l("");const{error:g}=await ue.auth.updateUser({password:a});g?u(g.message):(l("Пароль успешно обновлён! Теперь вы можете войти."),setTimeout(()=>h("/login"),2e3)),f(!1)};return i.jsxs("div",{className:"min-h-screen flex flex-col",children:[i.jsx(od,{}),i.jsx("main",{className:"flex-grow mt-24 mb-12",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold mb-4 beauty-gradient-text text-center",children:"Сброс пароля"}),i.jsx("p",{className:"text-center text-beauty-700 mb-8",children:t?"Придумайте новый пароль для своей учётной записи.":"Введите email, на который зарегистрирован ваш аккаунт. Мы отправим ссылку для сброса пароля."}),i.jsxs(qe,{className:"w-full max-w-md mx-auto",children:[i.jsxs(ht,{children:[i.jsx(gt,{children:t?"Новый пароль":"Сбросить пароль по email"}),i.jsx(da,{children:t?"Введите новый пароль для входа в BeautyTrack.":"Укажите email, чтобы получить ссылку для сброса пароля."})]}),t?i.jsxs("form",{onSubmit:v,children:[i.jsxs(Ge,{className:"space-y-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"new-password",children:"Новый пароль"}),i.jsx($e,{id:"new-password",type:"password",placeholder:"Новый пароль",value:a,onChange:m=>s(m.target.value),required:!0}),c&&i.jsx("div",{className:"bg-red-50 p-3 rounded-md border border-red-200",children:i.jsx("p",{className:"text-sm text-red-600",children:c})}),o&&i.jsx("div",{className:"bg-green-50 p-3 rounded-md border border-green-200",children:i.jsx("p",{className:"text-sm text-green-600",children:o})})]}),i.jsx(Go,{className:"flex flex-col space-y-4",children:i.jsx(ne,{type:"submit",className:"w-full",disabled:d||!a,children:d?"Сохраняем...":"Сохранить новый пароль"})})]}):i.jsxs("form",{onSubmit:p,children:[i.jsxs(Ge,{className:"space-y-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"email",children:"Email"}),i.jsx($e,{id:"email",type:"email",placeholder:"Ваш email",value:r,onChange:m=>n(m.target.value),required:!0}),c&&i.jsx("div",{className:"bg-red-50 p-3 rounded-md border border-red-200",children:i.jsx("p",{className:"text-sm text-red-600",children:c})}),o&&i.jsx("div",{className:"bg-green-50 p-3 rounded-md border border-green-200",children:i.jsx("p",{className:"text-sm text-green-600",children:o})})]}),i.jsx(Go,{className:"flex flex-col space-y-4",children:i.jsx(ne,{type:"submit",className:"w-full",disabled:d||!r,children:d?"Отправляем...":"Отправить ссылку для сброса"})})]})]})]})})}),i.jsx(al,{})]})},_lt=ln.object({email:ln.string().email("Введите корректный email"),password:ln.string().min(6,"Пароль должен содержать минимум 6 символов"),confirmPassword:ln.string().min(6,"Пароль должен содержать минимум 6 символов")}).refine(e=>e.password===e.confirmPassword,{message:"Пароли не совпадают",path:["confirmPassword"]}),Slt=()=>{const[e,t]=x.useState(!1),[r,n]=x.useState(null),[a,s]=x.useState(null),o=Kn();ei();const l=jf({resolver:Ef(_lt),defaultValues:{email:"",password:"",confirmPassword:""}}),c=async u=>{try{if(t(!0),n(null),s(null),u.password!==u.confirmPassword){n("Пароли не совпадают");return}const{data:d,error:f}=await ue.auth.signUp({email:u.email,password:u.password,options:{data:{role:"client"}}});if(f){n(f.message);return}if(d!=null&&d.user&&d.user.id){const{error:h}=await ue.from("profiles").insert([{id:d.user.id,email:u.email,role:"client"}]);if(h){n(h.message);return}}else{s("Проверьте почту и подтвердите регистрацию, затем войдите в систему.");return}s("Регистрация прошла успешно! Теперь вы можете войти в систему."),l.reset()}catch(d){console.error("Ошибка регистрации:",d),n(d instanceof Error?d.message:"Произошла ошибка при регистрации. Пожалуйста, попробуйте снова.")}finally{t(!1)}};return i.jsxs("div",{className:"min-h-screen flex flex-col",children:[i.jsx(od,{}),i.jsx("main",{className:"flex-grow mt-24 mb-12",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold mb-4 beauty-gradient-text text-center",children:"Регистрация"}),i.jsx("p",{className:"text-center text-beauty-700 mb-8",children:"Создайте учетную запись для использования BeautyTrack"}),i.jsxs(qe,{className:"w-full max-w-md mx-auto",children:[i.jsxs(ht,{children:[i.jsx(gt,{children:"Создание аккаунта"}),i.jsx(da,{children:"Введите ваш email и пароль для регистрации в BeautyTrack"})]}),i.jsx(dc,{...l,children:i.jsxs("form",{onSubmit:l.handleSubmit(c),children:[i.jsxs(Ge,{className:"space-y-4",children:[i.jsx(Or,{name:"email",control:l.control,render:({field:u})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Email"}),i.jsx(br,{children:i.jsx($e,{...u,id:"email",type:"email",placeholder:"email@beautytrack.ru"})}),i.jsx(kr,{})]})}),i.jsx(Or,{name:"password",control:l.control,render:({field:u})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Пароль"}),i.jsx(br,{children:i.jsx($e,{...u,id:"password",type:"password",placeholder:"••••••••"})}),i.jsx(kr,{})]})}),i.jsx(Or,{name:"confirmPassword",control:l.control,render:({field:u})=>i.jsxs(Nr,{children:[i.jsx(Cr,{children:"Подтверждение пароля"}),i.jsx(br,{children:i.jsx($e,{...u,id:"confirmPassword",type:"password",placeholder:"••••••••"})}),i.jsx(kr,{})]})}),r&&i.jsx("div",{className:"bg-red-50 p-3 rounded-md border border-red-200",children:i.jsx("p",{className:"text-sm text-red-600",children:r})}),a&&i.jsx("div",{className:"bg-green-50 p-3 rounded-md border border-green-200",children:i.jsx("p",{className:"text-sm text-green-600",children:a})})]}),i.jsxs(Go,{className:"flex flex-col space-y-4",children:[i.jsx(ne,{type:"submit",className:"w-full",disabled:e,children:e?"Регистрация...":"Зарегистрироваться"}),i.jsxs("p",{className:"text-sm text-center text-muted-foreground",children:["Уже есть аккаунт?"," ",i.jsx(ne,{variant:"link",className:"p-0 h-auto",type:"button",onClick:()=>o("/login"),children:"Войти"})]})]})]})})]})]})})}),i.jsx(al,{})]})},jlt=()=>{const[e]=XR(),t=e.get("token"),r=e.get("type"),[n,a]=x.useState(""),[s,o]=x.useState(""),[l,c]=x.useState(""),[u,d]=x.useState(!1),f=Kn(),h=async p=>{if(p.preventDefault(),d(!0),c(""),o(""),!t||r!=="recovery"){c("Некорректная или устаревшая ссылка для восстановления."),d(!1);return}try{const{data:v,error:m}=await ue.auth.setSession({access_token:t,refresh_token:t});if(m){c("Ошибка восстановления сессии: "+m.message),d(!1);return}const{error:g}=await ue.auth.updateUser({password:n});g?c(g.message):(o("Пароль успешно обновлён! Теперь вы можете войти."),setTimeout(()=>f("/login"),2e3))}catch(v){c("Ошибка: "+(v.message||v.toString()))}d(!1)};return i.jsxs("div",{className:"min-h-screen flex flex-col",children:[i.jsx(od,{}),i.jsx("main",{className:"flex-grow mt-24 mb-12",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold mb-4 beauty-gradient-text text-center",children:"Ввод нового пароля"}),i.jsx("p",{className:"text-center text-beauty-700 mb-8",children:"Введите новый пароль для своей учётной записи."}),i.jsxs(qe,{className:"w-full max-w-md mx-auto",children:[i.jsxs(ht,{children:[i.jsx(gt,{children:"Новый пароль"}),i.jsx(da,{children:"Введите новый пароль для входа в BeautyTrack."})]}),i.jsxs("form",{onSubmit:h,children:[i.jsxs(Ge,{className:"space-y-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"new-password",children:"Новый пароль"}),i.jsx($e,{id:"new-password",type:"password",placeholder:"Новый пароль",value:n,onChange:p=>a(p.target.value),required:!0}),l&&i.jsx("div",{className:"bg-red-50 p-3 rounded-md border border-red-200",children:i.jsx("p",{className:"text-sm text-red-600",children:l})}),s&&i.jsx("div",{className:"bg-green-50 p-3 rounded-md border border-green-200",children:i.jsx("p",{className:"text-sm text-green-600",children:s})})]}),i.jsx(Go,{className:"flex flex-col space-y-4",children:i.jsx(ne,{type:"submit",className:"w-full",disabled:u||!n,children:u?"Сохраняем...":"Сохранить новый пароль"})})]})]})]})})}),i.jsx(al,{})]})},Elt=new ale;function Nlt(){return ei(),i.jsx(ile,{client:Elt,children:i.jsx(UH,{children:i.jsxs(jn,{children:[i.jsx(Ffe,{}),i.jsx(hhe,{}),i.jsx(nce,{children:i.jsxs(Xle,{children:[i.jsx(On,{path:"/",element:i.jsx(Ube,{})}),i.jsx(On,{path:"/login",element:i.jsx(v_e,{})}),i.jsx(On,{path:"/register",element:i.jsx(Slt,{})}),i.jsx(On,{path:"/book-appointment",element:i.jsx(_Ze,{})}),i.jsx(On,{path:"/book/:salonId",element:i.jsx(mlt,{})}),i.jsx(On,{path:"/reset-password",element:i.jsx(wlt,{})}),i.jsx(On,{path:"/set-new-password",element:i.jsx(jlt,{})}),i.jsx(On,{path:"/admin",element:i.jsx(oi,{allowedRoles:["admin"],children:i.jsx(Bl,{children:i.jsx(LXe,{})})})}),i.jsx(On,{path:"/appointments",element:i.jsx(oi,{allowedRoles:["admin"],children:i.jsx(Bl,{children:i.jsx(KYe,{})})})}),i.jsx(On,{path:"/procedures",element:i.jsx(oi,{allowedRoles:["admin"],children:i.jsx(Bl,{children:i.jsx(Yit,{})})})}),i.jsx(On,{path:"/clients",element:i.jsx(oi,{allowedRoles:["admin"],children:i.jsx(Bl,{children:i.jsx(Git,{})})})}),i.jsx(On,{path:"/staff",element:i.jsx(oi,{allowedRoles:["admin"],children:i.jsx(Bl,{children:i.jsx(not,{})})})}),i.jsx(On,{path:"/admin/settings",element:i.jsx(oi,{allowedRoles:["admin"],children:i.jsx(Bl,{children:i.jsx(mot,{})})})}),i.jsx(On,{path:"/admin/settings/user-roles",element:i.jsx(oi,{allowedRoles:["admin"],children:i.jsx(Bl,{children:i.jsx(hot,{})})})}),i.jsx(On,{path:"/branches",element:i.jsx(oi,{allowedRoles:["admin"],children:i.jsx(Bl,{children:i.jsx(glt,{})})})}),i.jsx(On,{path:"/brands/:brandId/studios/:studioId",element:i.jsx(oi,{allowedRoles:["admin"],children:i.jsx(Bl,{children:i.jsx(blt,{})})})}),i.jsx(On,{path:"/client/dashboard",element:i.jsx(oi,{allowedRoles:["client"],children:i.jsx(Jit,{})})}),i.jsx(On,{path:"/specialist/dashboard",element:i.jsx(oi,{allowedRoles:["specialist"],children:i.jsx(Qit,{})})}),i.jsx(On,{path:"/specialist/schedule",element:i.jsx(oi,{allowedRoles:["specialist"],children:i.jsx(oot,{})})}),i.jsx(On,{path:"/specialist/profile",element:i.jsx(oi,{allowedRoles:["specialist"],children:i.jsx(cot,{})})}),i.jsx(On,{path:"*",element:i.jsx(aot,{})})]})})]})})})}CW(document.getElementById("root")).render(i.jsx(UH,{children:i.jsx(Nlt,{})}));export{zr as g};
